!function(){var e={GraphingCalculator:!0,FourFunctionCalculator:!0,ScientificCalculator:!0};!function(t){var r,n="undefined"!=typeof Desmos?Desmos:{};if("function"==typeof define&&define.amd){define([],(function(){return n}));var i=!1;Object.defineProperty(t,"Desmos",{configurable:!0,enumerable:!0,get:function(){return i||(console.warn("Found a 'define' function with 'define.amd' set. Note that starting in v1.7, the 'Desmos' object will no longer be attached to the global object in AMD environments."),i=!0),n},set:function(e){n=e}})}else"object"==typeof module&&"object"==typeof module.exports?module.exports=n:t.Desmos=n;(r=n).config||(r.config={}),"object"==typeof e&&(r.enabledFeatures=e),"object"==typeof desmosLocales&&(r.locales=desmosLocales),"object"==typeof desmosLocaleData&&(r.localeData=desmosLocaleData),r.commit="8cc650ff2c86f201b2993acdef6cbdb69cf516ba",function(){var e,n,i;!function(t){var r,o,a,s,l={},c={},u={},d={},p=Object.prototype.hasOwnProperty,h=[].slice;function g(e,t){return p.call(e,t)}function f(e,t){var r,n,i,o,a,s,l,c,d,p,h=t&&t.split("/"),g=u.map,f=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=(h=h.slice(0,h.length-1)).concat(e.split("/")),c=0;c<e.length;c+=1)if("."===(p=e[c]))e.splice(c,1),--c;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;0<c&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||f)&&g){for(c=(r=e.split("/")).length;0<c;--c){if(n=r.slice(0,c).join("/"),h)for(d=h.length;0<d;--d)if(i=(i=g[h.slice(0,d).join("/")])&&i[n]){o=i,a=c;break}if(o)break;!s&&f&&f[n]&&(s=f[n],l=c)}!o&&s&&(o=s,a=l),o&&(r.splice(0,a,o),e=r.join("/"))}return e}function m(e,r){return function(){return o.apply(t,h.call(arguments,0).concat([e,r]))}}function y(e){var n;if(g(c,e)&&(n=c[e],delete c[e],d[e]=!0,r.apply(t,n)),!g(l,e)&&!g(d,e))throw new Error("No "+e);return l[e]}function v(e){var t,r=e?e.indexOf("!"):-1;return-1<r&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}a=function(e,t){var r,n,i=v(e),o=i[0];return e=i[1],o&&(r=y(o=f(o,t))),o?e=r&&r.normalize?r.normalize(e,(n=t,function(e){return f(e,n)})):f(e,t):(o=(i=v(e=f(e,t)))[0],e=i[1],o&&(r=y(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},s={require:function(e){return m(e)},exports:function(e){var t=l[e];return void 0!==t?t:l[e]={}},module:function(e){return{id:e,uri:"",exports:l[e],config:(t=e,function(){return u&&u.config&&u.config[t]||{}})};var t}},r=function(e,r,n,i){var o,u,p,h,f,v,b=[];if(i=i||e,"function"==typeof n){for(r=!r.length&&n.length?["require","exports","module"]:r,f=0;f<r.length;f+=1)if("require"===(u=(h=a(r[f],i)).f))b[f]=s.require(e);else if("exports"===u)b[f]=s.exports(e),v=!0;else if("module"===u)o=b[f]=s.module(e);else if(g(l,u)||g(c,u)||g(d,u))b[f]=y(u);else{if(!h.p)throw new Error(e+" missing "+u);h.p.load(h.n,m(i,!0),function(e){return function(t){l[e]=t}}(u),{}),b[f]=l[u]}p=n.apply(l[e],b),e&&(o&&o.exports!==t&&o.exports!==l[e]?l[e]=o.exports:p===t&&v||(l[e]=p))}else e&&(l[e]=n)},e=n=o=function(e,n,i,l,c){return"string"==typeof e?s[e]?s[e](n):y(a(e,n).f):(e.splice||(u=e,n.splice?(e=n,n=i,i=null):e=t),n=n||function(){},"function"==typeof i&&(i=l,l=c),l?r(t,e,n,i):setTimeout((function(){r(t,e,n,i)}),4),o)},o.config=function(e){return(u=e).deps&&o(u.deps,u.callback),o},(i=function(e,t,r){t.splice||(r=t,t=[]),g(l,e)||g(c,e)||(c[e]=[e,t,r])}).amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(i=ALMOND_OVERRIDES.define||i,n=ALMOND_OVERRIDES.require||n,e=ALMOND_OVERRIDES.requirejs||e),i("core/vendor/almond",(function(){})),i("ipad.ghostevents",["require"],(function(e){var t=!1,r=null;function n(e){t&&o.evtInScope(e)&&(e.stopPropagation(),e.stopImmediatePropagation())}function i(e){t&&o.evtInScope(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}var o={isGhostEvent:function(e){return!1},evtInScope:function(e){return!1}};return document.addEventListener("mousedown",(function(e){o.evtInScope(e)&&(r=document.activeElement,t=o.isGhostEvent(e),n(e))}),!0),document.addEventListener("mouseup",n,!0),document.addEventListener("click",(function(e){i(e),t&&document.activeElement!==r&&(document.activeElement&&document.activeElement.blur(),r&&r.focus()),t=!1}),!0),document.addEventListener("focus",i,!0),document.addEventListener("blur",i,!0),o})),function(e,t){"use strict";!function(e,t){function r(e){return null!=e&&e===e.window}var n=[],o=Object.getPrototypeOf,a=n.slice,s=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},l=n.push,c=n.indexOf,u={},d=u.toString,p=u.hasOwnProperty,h=p.toString,g=h.call(Object),f={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,r){var n,i,o=(r=r||y).createElement("script");if(o.text=e,t)for(n in v)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,i);r.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[d.call(e)]||"object":typeof e}var w="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function E(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!m(e)&&!r(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:w,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(0<=r&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},S.extend=S.fn.extend=function(){var e,t,r,n,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&a!==n&&(c&&n&&(S.isPlainObject(n)||(i=Array.isArray(n)))?(r=a[t],o=i&&!Array.isArray(r)?[]:i||S.isPlainObject(r)?r:{},i=!1,a[t]=S.extend(c,o,n)):void 0!==n&&(a[t]=n));return a},S.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==d.call(e)||(t=o(e))&&("function"!=typeof(r=p.call(t,"constructor")&&t.constructor)||h.call(r)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){b(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(E(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var r=t||[];return null!=e&&(E(Object(e))?S.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:c.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,a=!r;i<o;i++)!t(e[i],i)!=a&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,a=[];if(E(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&a.push(i);return s(a)},guid:1,support:f}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=n[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var _=function(e){function t(e,t){var r="0x"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320))}function r(){g()}var n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S="sizzle"+ +new Date,E=e.document,_=0,k=0,M=le(),I=le(),C=le(),L=le(),P=function(e,t){return e===t&&(h=!0),0},T={}.hasOwnProperty,A=[],O=A.pop,D=A.push,F=A.push,q=A.slice,N=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",V="\\["+B+"*("+j+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+B+"*\\]",z=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",U=new RegExp(B+"+","g"),G=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),K=new RegExp("^"+B+"*,"+B+"*"),H=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp(B+"|>"),$=new RegExp(z),Y=new RegExp("^"+j+"$"),Q={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,re=/[+~]/,ne=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=ve((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{F.apply(A=q.call(E.childNodes),E.childNodes),A[E.childNodes.length].nodeType}catch(n){F={apply:A.length?function(e,t){D.apply(e,q.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function se(e,t,r,n){var o,a,s,c,d,p,h,m=t&&t.ownerDocument,b=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return r;if(!n&&(g(t),t=t||f,y)){if(11!==b&&(d=te.exec(e)))if(o=d[1]){if(9===b){if(!(s=t.getElementById(o)))return r;if(s.id===o)return r.push(s),r}else if(m&&(s=m.getElementById(o))&&w(t,s)&&s.id===o)return r.push(s),r}else{if(d[2])return F.apply(r,t.getElementsByTagName(e)),r;if((o=d[3])&&i.getElementsByClassName&&t.getElementsByClassName)return F.apply(r,t.getElementsByClassName(o)),r}if(i.qsa&&!L[e+" "]&&(!v||!v.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(h=e,m=t,1===b&&(W.test(e)||H.test(e))){for((m=re.test(e)&&fe(t.parentNode)||t)===t&&i.scope||((c=t.getAttribute("id"))?c=c.replace(ie,oe):t.setAttribute("id",c=S)),a=(p=l(e)).length;a--;)p[a]=(c?"#"+c:":scope")+" "+ye(p[a]);h=p.join(",")}try{return F.apply(r,m.querySelectorAll(h)),r}catch(t){L(e,!0)}finally{c===S&&t.removeAttribute("id")}}}return u(e.replace(G,"$1"),t,r,n)}function le(){var e=[];return function t(r,n){return e.push(r+" ")>o.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ce(e){return e[S]=!0,e}function ue(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var r=e.split("|"),n=r.length;n--;)o.attrHandle[r[n]]=t}function pe(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(r,n){for(var i,o=e([],r.length,t),a=o.length;a--;)r[i=o[a]]&&(r[i]=!(n[i]=r[i]))}))}))}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(n in i=se.support={},s=se.isXML=function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!X.test(t||r&&r.nodeName||"HTML")},g=se.setDocument=function(e){var n,a,l=e?e.ownerDocument||e:E;return l!=f&&9===l.nodeType&&l.documentElement&&(m=(f=l).documentElement,y=!s(f),E!=f&&(a=f.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",r,!1):a.attachEvent&&a.attachEvent("onunload",r)),i.scope=ue((function(e){return m.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=ee.test(f.getElementsByClassName),i.getById=ue((function(e){return m.appendChild(e).id=S,!f.getElementsByName||!f.getElementsByName(S).length})),i.getById?(o.filter.ID=function(e){var r=e.replace(ne,t);return function(e){return e.getAttribute("id")===r}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var r=t.getElementById(e);return r?[r]:[]}}):(o.filter.ID=function(e){var r=e.replace(ne,t);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===r}},o.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var r,n,i,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(i=t.getElementsByName(e),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),o.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;r=o[i++];)1===r.nodeType&&n.push(r);return n},o.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},b=[],v=[],(i.qsa=ee.test(f.querySelectorAll))&&(ue((function(e){var t;m.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+B+"*name"+B+"*="+B+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),m.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(i.matchesSelector=ee.test(x=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&ue((function(e){i.disconnectedMatch=x.call(e,"*"),x.call(e,"[s!='']:x"),b.push("!=",z)})),v=v.length&&new RegExp(v.join("|")),b=b.length&&new RegExp(b.join("|")),n=ee.test(m.compareDocumentPosition),w=n||ee.test(m.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=n?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===r?e==f||e.ownerDocument==E&&w(E,e)?-1:t==f||t.ownerDocument==E&&w(E,t)?1:p?N(p,e)-N(p,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==f?-1:t==f?1:i?-1:o?1:p?N(p,e)-N(p,t):0;if(i===o)return pe(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;a[n]===s[n];)n++;return n?pe(a[n],s[n]):a[n]==E?-1:s[n]==E?1:0}),f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(g(e),i.matchesSelector&&y&&!L[t+" "]&&(!b||!b.test(t))&&(!v||!v.test(t)))try{var r=x.call(e,t);if(r||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){L(t,!0)}return 0<se(t,f,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&g(e),w(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&g(e);var r=o.attrHandle[t.toLowerCase()],n=r&&T.call(o.attrHandle,t.toLowerCase())?r(e,t,!y):void 0;return void 0!==n?n:i.attributes||!y?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},se.escape=function(e){return(e+"").replace(ie,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],n=0,o=0;if(h=!i.detectDuplicates,p=!i.sortStable&&e.slice(0),e.sort(P),h){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)e.splice(r[n],1)}return p=null,e},a=se.getText=function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=a(t);return r},(o=se.selectors={cacheLength:50,createPseudo:ce,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,t),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&$.test(r)&&(t=l(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var r=e.replace(ne,t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===r}},CLASS:function(e){var t=M[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&M(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=se.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&-1<i.indexOf(r):"$="===t?r&&i.slice(-r.length)===r:"~="===t?-1<(" "+i.replace(U," ")+" ").indexOf(r):"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var c,u,d,p,h,g,f=o!=a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(m){if(o){for(;f;){for(p=t;p=p[f];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?m.firstChild:m.lastChild],a&&v){for(b=(h=(c=(u=(d=(p=m)[S]||(p[S]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[f]||(b=h=0)||g.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[_,h,b];break}}else if(v&&(b=h=(c=(u=(d=(p=t)[S]||(p[S]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(p=++h&&p&&p[f]||(b=h=0)||g.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++b||(v&&((u=(d=p[S]||(p[S]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[_,b]),p!==t)););return(b-=i)===n||b%n==0&&0<=b/n}}},PSEUDO:function(e,t){var r,n=o.pseudos[e]||o.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return n[S]?n(t):1<n.length?(r=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,r){for(var i,o=n(e,t),a=o.length;a--;)e[i=N(e,o[a])]=!(r[i]=o[a])})):function(e){return n(e,0,r)}):n}},pseudos:{not:ce((function(e){var t=[],r=[],n=c(e.replace(G,"$1"));return n[S]?ce((function(e,t,r,i){for(var o,a=n(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,n(t,null,o,r),t[0]=null,!r.pop()}})),has:ce((function(e){return function(t){return 0<se(e,t).length}})),contains:ce((function(e){return e=e.replace(ne,t),function(t){return-1<(t.textContent||a(t)).indexOf(e)}})),lang:ce((function(e){return Y.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(ne,t).toLowerCase(),function(t){var r;do{if(r=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===m},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,r){return[r<0?r+t:r]})),even:ge((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:ge((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:ge((function(e,t,r){for(var n=r<0?r+t:t<r?t:r;0<=--n;)e.push(n);return e})),gt:ge((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}}).pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=function(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}(n);function me(){}function ye(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function ve(e,t,r){var n=t.dir,i=t.next,o=i||n,a=r&&"parentNode"===o,s=k++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||a)return e(t,r,i);return!1}:function(t,r,l){var c,u,d,p=[_,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,r,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(u=(d=t[S]||(t[S]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=u[o])&&c[0]===_&&c[1]===s)return p[2]=c[2];if((u[o]=p)[2]=e(t,r,l))return!0}return!1}}function be(e){return 1<e.length?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function xe(e,t,r,n,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(r&&!r(o,n,i)||(a.push(o),c&&t.push(s)));return a}function we(e,t,r,n,i,o){return n&&!n[S]&&(n=we(n)),i&&!i[S]&&(i=we(i,o)),ce((function(o,a,s,l){var c,u,d,p=[],h=[],g=a.length,f=o||function(e,t,r){for(var n=0,i=t.length;n<i;n++)se(e,t[n],r);return r}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?f:xe(f,p,e,s,l),y=r?i||(o?e:g||n)?[]:a:m;if(r&&r(m,y,s,l),n)for(c=xe(y,h),n(c,[],s,l),u=c.length;u--;)(d=c[u])&&(y[h[u]]=!(m[h[u]]=d));if(o){if(i||e){if(i){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(m[u]=d);i(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&-1<(c=i?N(o,d):p[u])&&(o[c]=!(a[c]=d))}}else y=xe(y===a?y.splice(g,y.length):y),i?i(null,a,y,l):F.apply(a,y)}))}return me.prototype=o.filters=o.pseudos,o.setFilters=new me,l=se.tokenize=function(e,t){var r,n,i,a,s,l,c,u=I[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=o.preFilter;s;){for(a in r&&!(n=K.exec(s))||(n&&(s=s.slice(n[0].length)||s),l.push(i=[])),r=!1,(n=H.exec(s))&&(r=n.shift(),i.push({value:r,type:n[0].replace(G," ")}),s=s.slice(r.length)),o.filter)!(n=Q[a].exec(s))||c[a]&&!(n=c[a](n))||(r=n.shift(),i.push({value:r,type:a,matches:n}),s=s.slice(r.length));if(!r)break}return t?s.length:s?se.error(e):I(e,l).slice(0)},c=se.compile=function(e,t){var r,n=[],i=[],a=C[e+" "];if(!a){for(r=(t=t||l(e)).length;r--;)(a=function e(t){for(var r,n,i,a=t.length,s=o.relative[t[0].type],l=s||o.relative[" "],c=s?1:0,u=ve((function(e){return e===r}),l,!0),p=ve((function(e){return-1<N(r,e)}),l,!0),h=[function(e,t,n){var i=!s&&(n||t!==d)||((r=t).nodeType?u:p)(e,t,n);return r=null,i}];c<a;c++)if(n=o.relative[t[c].type])h=[ve(be(h),n)];else{if((n=o.filter[t[c].type].apply(null,t[c].matches))[S]){for(i=++c;i<a&&!o.relative[t[i].type];i++);return we(1<c&&be(h),1<c&&ye(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(G,"$1"),n,c<i&&e(t.slice(c,i)),i<a&&e(t=t.slice(i)),i<a&&ye(t))}h.push(n)}return be(h)}(t[r]))[S]?n.push(a):i.push(a);(a=C(e,function(e,t){function r(r,a,s,l,c){var u,p,h,m=0,v="0",b=r&&[],x=[],w=d,S=r||i&&o.find.TAG("*",c),E=_+=null==w?1:Math.random()||.1,k=S.length;for(c&&(d=a==f||a||c);v!==k&&null!=(u=S[v]);v++){if(i&&u){for(p=0,a||u.ownerDocument==f||(g(u),s=!y);h=e[p++];)if(h(u,a||f,s)){l.push(u);break}c&&(_=E)}n&&((u=!h&&u)&&m--,r&&b.push(u))}if(m+=v,n&&v!==m){for(p=0;h=t[p++];)h(b,x,a,s);if(r){if(0<m)for(;v--;)b[v]||x[v]||(x[v]=O.call(l));x=xe(x)}F.apply(l,x),c&&!r&&0<x.length&&1<m+t.length&&se.uniqueSort(l)}return c&&(_=E,d=w),b}var n=0<t.length,i=0<e.length;return n?ce(r):r}(i,n))).selector=e}return a},u=se.select=function(e,r,n,i){var a,s,u,d,p,h="function"==typeof e&&e,g=!i&&l(e=h.selector||e);if(n=n||[],1===g.length){if(2<(s=g[0]=g[0].slice(0)).length&&"ID"===(u=s[0]).type&&9===r.nodeType&&y&&o.relative[s[1].type]){if(!(r=(o.find.ID(u.matches[0].replace(ne,t),r)||[])[0]))return n;h&&(r=r.parentNode),e=e.slice(s.shift().value.length)}for(a=Q.needsContext.test(e)?0:s.length;a--&&(u=s[a],!o.relative[d=u.type]);)if((p=o.find[d])&&(i=p(u.matches[0].replace(ne,t),re.test(s[0].type)&&fe(r.parentNode)||r))){if(s.splice(a,1),!(e=i.length&&ye(s)))return F.apply(n,i),n;break}}return(h||c(e,g))(i,r,!y,n,!r||re.test(e)&&fe(r.parentNode)||r),n},i.sortStable=S.split("").sort(P).join("")===S,i.detectDuplicates=!!h,g(),i.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(R,(function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),se}(e);function k(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(r))break;n.push(e)}return n}function M(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}S.find=_,S.expr=_.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=_.uniqueSort,S.text=_.getText,S.isXMLDoc=_.isXML,S.contains=_.contains,S.escapeSelector=_.escape;var I=S.expr.match.needsContext;function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,r){return m(t)?S.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?S.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?S.grep(e,(function(e){return-1<c.call(t,e)!==r})):S.filter(t,e,r)}S.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<n;t++)if(S.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)S.find(e,i[t],r);return 1<n?S.uniqueSort(r):r},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&I.test(e)?S(e):e||[],!1).length}});var T,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||T,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==r.ready?r.ready(e):e(S):S.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:A.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),L.test(n[1])&&S.isPlainObject(t))for(n in t)m(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=y.getElementById(n[2]))&&(this[0]=i,this.length=1),this}).prototype=S.fn,T=S(y);var O=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!I.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?-1<a.index(r):1===r.nodeType&&S.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?c.call(S(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,r){return k(e,"parentNode",r)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,r){return k(e,"nextSibling",r)},prevUntil:function(e,t,r){return k(e,"previousSibling",r)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(r,n){var i=S.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=S.filter(n,i)),1<this.length&&(D[e]||S.uniqueSort(i),O.test(e)&&i.reverse()),this.pushStack(i)}}));var q=/[^\x20\t\r\n\f]+/g;function N(e){return e}function R(e){throw e}function B(e,t,r,n){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(r):e&&m(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}S.Callbacks=function(e){var t,r;function n(){for(s=s||e.once,a=i=!0;c.length;u=-1)for(o=c.shift();++u<l.length;)!1===l[u].apply(o[0],o[1])&&e.stopOnFalse&&(u=l.length,o=!1);e.memory||(o=!1),i=!1,s&&(l=o?[]:"")}e="string"==typeof e?(t=e,r={},S.each(t.match(q)||[],(function(e,t){r[t]=!0})),r):S.extend({},e);var i,o,a,s,l=[],c=[],u=-1,d={add:function(){return l&&(o&&!i&&(u=l.length-1,c.push(o)),function t(r){S.each(r,(function(r,n){m(n)?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==x(n)&&t(n)}))}(arguments),o&&!i&&n()),this},remove:function(){return S.each(arguments,(function(e,t){for(var r;-1<(r=S.inArray(t,l,r));)l.splice(r,1),r<=u&&u--})),this},has:function(e){return e?-1<S.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=o="",this},disabled:function(){return!l},lock:function(){return s=c=[],o||i||(l=o=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),i||n()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},S.extend({Deferred:function(t){var r=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(t){S.each(r,(function(r,n){var i=m(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=i&&i.apply(this,arguments);e&&m(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(t,n,i){var o=0;function a(t,r,n,i){return function(){function s(){var e,s;if(!(t<o)){if((e=n.apply(l,c))===r.promise())throw new TypeError("Thenable self-resolution");s=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(s)?i?s.call(e,a(o,r,N,i),a(o,r,R,i)):(o++,s.call(e,a(o,r,N,i),a(o,r,R,i),a(o,r,N,r.notifyWith))):(n!==N&&(l=void 0,c=[e]),(i||r.resolveWith)(l,c))}}var l=this,c=arguments,u=i?s:function(){try{s()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,u.stackTrace),o<=t+1&&(n!==R&&(l=void 0,c=[e]),r.rejectWith(l,c))}};t?u():(S.Deferred.getStackHook&&(u.stackTrace=S.Deferred.getStackHook()),e.setTimeout(u))}}return S.Deferred((function(e){r[0][3].add(a(0,e,m(i)?i:N,e.notifyWith)),r[1][3].add(a(0,e,m(t)?t:N)),r[2][3].add(a(0,e,m(n)?n:R))})).promise()},promise:function(e){return null!=e?S.extend(e,i):i}},o={};return S.each(r,(function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add((function(){n=s}),r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(e){function t(e){return function(t){i[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--r||s.resolveWith(i,o)}}var r=arguments.length,n=r,i=Array(n),o=a.call(arguments),s=S.Deferred();if(r<=1&&(B(e,s.done(t(n)).resolve,s.reject,!r),"pending"===s.state()||m(o[n]&&o[n].then)))return s.then();for(;n--;)B(o[n],t(n),s.reject);return s.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,r){e.console&&e.console.warn&&t&&j.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,r)},S.readyException=function(t){e.setTimeout((function(){throw t}))};var V=S.Deferred();function z(){y.removeEventListener("DOMContentLoaded",z),e.removeEventListener("load",z),S.ready()}S.fn.ready=function(e){return V.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||V.resolveWith(y,[S])}}),S.ready.then=V.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?e.setTimeout(S.ready):(y.addEventListener("DOMContentLoaded",z),e.addEventListener("load",z));var U=function(e,t,r,n,i,o,a){var s=0,l=e.length,c=null==r;if("object"===x(r))for(s in i=!0,r)U(e,t,s,r[s],!0,o,a);else if(void 0!==n&&(i=!0,m(n)||(a=!0),c&&(t=a?(t.call(e,n),null):(c=t,function(e,t,r){return c.call(S(e),r)})),t))for(;s<l;s++)t(e[s],r,a?n:n.call(e[s],s,t(e[s],r)));return i?e:c?t.call(e):l?t(e[0],r):o},G=/^-ms-/,K=/-([a-z])/g;function H(e,t){return t.toUpperCase()}function W(e){return e.replace(G,"ms-").replace(K,H)}function $(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function Y(){this.expando=S.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[W(t)]=r;else for(n in t)i[W(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(W):(t=W(t))in n?[t]:t.match(q)||[]).length;for(;r--;)delete n[t[r]]}void 0!==t&&!S.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Q=new Y,X=new Y,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function ee(e,t,r){var n,i;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r="true"===(i=r)||"false"!==i&&("null"===i?null:i===+i+""?+i:Z.test(i)?JSON.parse(i):i)}catch(e){}X.set(e,t,r)}else r=void 0;return r}S.extend({hasData:function(e){return X.hasData(e)||Q.hasData(e)},data:function(e,t,r){return X.access(e,t,r)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,r){return Q.access(e,t,r)},_removeData:function(e,t){Q.remove(e,t)}}),S.fn.extend({data:function(e,t){var r,n,i,o=this[0],a=o&&o.attributes;if(void 0!==e)return"object"==typeof e?this.each((function(){X.set(this,e)})):U(this,(function(t){var r;return o&&void 0===t?void 0!==(r=X.get(o,e))||void 0!==(r=ee(o,e))?r:void 0:void this.each((function(){X.set(this,e,t)}))}),null,t,1<arguments.length,null,!0);if(this.length&&(i=X.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&0===(n=a[r].name).indexOf("data-")&&(n=W(n.slice(5)),ee(o,n,i[n]));Q.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each((function(){X.remove(this,e)}))}}),S.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=Q.get(e,t),r&&(!n||Array.isArray(r)?n=Q.access(e,t,S.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=S.queue(e,t),n=r.length,i=r.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,(function(){S.dequeue(e,t)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Q.get(e,r)||Q.access(e,r,{empty:S.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",r])}))})}}),S.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?S.queue(this[0],e):void 0===t?this:this.each((function(){var r=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function r(){--i||o.resolveWith(a,[a])}var n,i=1,o=S.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Q.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),o.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=y.documentElement,oe=function(e){return S.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===S.css(e,"display")};function le(e,t,r,n){var i,o,a=20,s=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=s(),c=r&&r[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+l)&&re.exec(S.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)S.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,S.style(e,t,u+c),r=r||[]}return r&&(u=+u||+l||0,i=r[1]?u+(r[1]+1)*r[2]:+r[2],n&&(n.unit=c,n.start=u,n.end=i)),i}var ce={};function ue(e,t){for(var r,n,i,o,a,s,l,c=[],u=0,d=e.length;u<d;u++)(n=e[u]).style&&(r=n.style.display,t?("none"===r&&(c[u]=Q.get(n,"display")||null,c[u]||(n.style.display="")),""===n.style.display&&se(n)&&(c[u]=(l=a=o=void 0,a=(i=n).ownerDocument,s=i.nodeName,(l=ce[s])||(o=a.body.appendChild(a.createElement(s)),l=S.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),ce[s]=l)))):"none"!==r&&(c[u]="none",Q.set(n,"display",r)));for(u=0;u<d;u++)null!=c[u]&&(e[u].style.display=c[u]);return e}S.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){se(this)?S(this).show():S(this).hide()}))}});var de,pe,he=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,fe=/^$|^module$|\/(?:java|ecma)script/i;de=y.createDocumentFragment().appendChild(y.createElement("div")),(pe=y.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),de.appendChild(pe),f.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",f.option=!!de.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&C(e,t)?S.merge([e],r):r}function ve(e,t){for(var r=0,n=e.length;r<n;r++)Q.set(e[r],"globalEval",!t||Q.get(t[r],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,f.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function xe(e,t,r,n,i){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),p=[],h=0,g=e.length;h<g;h++)if((o=e[h])||0===o)if("object"===x(o))S.merge(p,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(ge.exec(o)||["",""])[1].toLowerCase(),l=me[s]||me._default,a.innerHTML=l[1]+S.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;S.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(t.createTextNode(o));for(d.textContent="",h=0;o=p[h++];)if(n&&-1<S.inArray(o,n))i&&i.push(o);else if(c=oe(o),a=ye(d.appendChild(o),"script"),c&&ve(a),r)for(u=0;o=a[u++];)fe.test(o.type||"")&&r.push(o);return d}var we=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Ee(){return!1}function _e(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,r,n,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof r&&(n=n||r,r=void 0),t)ke(e,s,r,n,t[s],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each((function(){S.event.add(this,t,i,n,r)}))}function Me(e,t,r){r?(Q.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,i,o=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),Q.set(this,t,o),n=r(this,t),this[t](),o!==(i=Q.get(this,t))||n?Q.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(Q.set(this,t,{value:S.event.trigger(S.extend(o[0],S.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&S.event.add(e,t,Se)}S.event={global:{},add:function(e,t,r,n,i){var o,a,s,l,c,u,d,p,h,g,f,m=Q.get(e);if($(e))for(r.handler&&(r=(o=r).handler,i=o.selector),i&&S.find.matchesSelector(ie,i),r.guid||(r.guid=S.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(q)||[""]).length;c--;)h=f=(s=we.exec(t[c])||[])[1],g=(s[2]||"").split(".").sort(),h&&(d=S.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=S.event.special[h]||{},u=S.extend({type:h,origType:f,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:g.join(".")},o),(p=l[h])||((p=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,g,a)||e.addEventListener&&e.addEventListener(h,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),i?p.splice(p.delegateCount++,0,u):p.push(u),S.event.global[h]=!0)},remove:function(e,t,r,n,i){var o,a,s,l,c,u,d,p,h,g,f,m=Q.hasData(e)&&Q.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(q)||[""]).length;c--;)if(h=f=(s=we.exec(t[c])||[])[1],g=(s[2]||"").split(".").sort(),h){for(d=S.event.special[h]||{},p=l[h=(n?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],!i&&f!==u.origType||r&&r.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,g,m.handle)||S.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)S.event.remove(e,h+t[c],r,n,!0);S.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,o,a,s=new Array(arguments.length),l=S.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],u=S.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=S.event.handlers.call(this,l,c),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(n=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var r,n,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},r=0;r<l;r++)void 0===a[i=(n=t[r]).selector+" "]&&(a[i]=n.needsContext?-1<S(i,this).index(c):S.find(i,this,null,[c]).length),a[i]&&o.push(n);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&C(t,"input")&&Me(t,"click",Se),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&C(t,"input")&&Me(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&C(t,"input")&&Q.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Me(this,e,_e),!1},trigger:function(){return Me(this,e),!0},_default:function(){return!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}})),S.fn.extend({on:function(e,t,r,n){return ke(this,e,t,r,n)},one:function(e,t,r,n){return ke(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Ee),this.each((function(){S.event.remove(this,e,r,t)}));for(i in e)this.off(i,t,e[i]);return this}});var Ie=/<script|<style|<link/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Te(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ae(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var r,n,i,o,a,s;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.get(e).events))for(i in Q.remove(t,"handle events"),s)for(r=0,n=s[i].length;r<n;r++)S.event.add(t,i,s[i][r]);X.hasData(e)&&(o=X.access(e),a=S.extend({},o),X.set(t,a))}}function De(e,t,r,n){t=s(t);var i,o,a,l,c,u,d=0,p=e.length,h=p-1,g=t[0],y=m(g);if(y||1<p&&"string"==typeof g&&!f.checkClone&&Ce.test(g))return e.each((function(i){var o=e.eq(i);y&&(t[0]=g.call(this,i,o.html())),De(o,t,r,n)}));if(p&&(o=(i=xe(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(l=(a=S.map(ye(i,"script"),Te)).length;d<p;d++)c=i,d!==h&&(c=S.clone(c,!0,!0),l&&S.merge(a,ye(c,"script"))),r.call(e[d],c,d);if(l)for(u=a[a.length-1].ownerDocument,S.map(a,Ae),d=0;d<l;d++)c=a[d],fe.test(c.type||"")&&!Q.access(c,"globalEval")&&S.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):b(c.textContent.replace(Le,""),c,u))}return e}function Fe(e,t,r){for(var n,i=t?S.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||S.cleanData(ye(n)),n.parentNode&&(r&&oe(n)&&ve(ye(n,"script")),n.parentNode.removeChild(n));return e}function qe(e,t,r){var n,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in n=r.call(e),t)e.style[i]=o[i];return n}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,i,o,a,s,l,c,u=e.cloneNode(!0),d=oe(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ye(u),n=0,i=(o=ye(e)).length;n<i;n++)s=o[n],"input"===(c=(l=a[n]).nodeName.toLowerCase())&&he.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(r)for(o=o||ye(e),a=a||ye(u),n=0,i=o.length;n<i;n++)Oe(o[n],a[n]);else Oe(e,u);return 0<(a=ye(u,"script")).length&&ve(a,!d&&ye(e,"script")),u},cleanData:function(e){for(var t,r,n,i=S.event.special,o=0;void 0!==(r=e[o]);o++)if($(r)){if(t=r[Q.expando]){if(t.events)for(n in t.events)i[n]?S.event.remove(r,n):S.removeEvent(r,n,t.handle);r[Q.expando]=void 0}r[X.expando]&&(r[X.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return U(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return De(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)}))},prepend:function(){return De(this,arguments,(function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Pe(this,e)).insertBefore(e,t.firstChild)}))},before:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return U(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!me[(ge.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(S.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,(function(t){var r=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(ye(this)),r&&r.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var r,n=[],i=S(e),o=i.length-1,a=0;a<=o;a++)r=a===o?this:this.clone(!0),S(i[a])[t](r),l.apply(n,r.get());return this.pushStack(n)}}));var Ne,Re,Be,je,Ve,ze,Ue,Ge,Ke=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),He=function(t){var r=t.ownerDocument.defaultView;return r&&r.opener||(r=e),r.getComputedStyle(t)},We=new RegExp(ne.join("|"),"i");function $e(){var t;Ge&&(Ue.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ge.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(Ue).appendChild(Ge),t=e.getComputedStyle(Ge),Ne="1%"!==t.top,ze=12===Ye(t.marginLeft),Ge.style.right="60%",je=36===Ye(t.right),Re=36===Ye(t.width),Ge.style.position="absolute",Be=12===Ye(Ge.offsetWidth/3),ie.removeChild(Ue),Ge=null)}function Ye(e){return Math.round(parseFloat(e))}function Qe(e,t,r){var n,i,o,a,s=e.style;return(r=r||He(e))&&(""!==(a=r.getPropertyValue(t)||r[t])||oe(e)||(a=S.style(e,t)),!f.pixelBoxStyles()&&Ke.test(a)&&We.test(t)&&(n=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=n,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Xe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ue=y.createElement("div"),(Ge=y.createElement("div")).style&&(Ge.style.backgroundClip="content-box",Ge.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===Ge.style.backgroundClip,S.extend(f,{boxSizingReliable:function(){return $e(),Re},pixelBoxStyles:function(){return $e(),je},pixelPosition:function(){return $e(),Ne},reliableMarginLeft:function(){return $e(),ze},scrollboxSize:function(){return $e(),Be},reliableTrDimensions:function(){var t,r,n,i;return null==Ve&&(t=y.createElement("table"),r=y.createElement("tr"),n=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",r.style.cssText="border:1px solid",r.style.height="1px",n.style.height="9px",n.style.display="block",ie.appendChild(t).appendChild(r).appendChild(n),i=e.getComputedStyle(r),Ve=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===r.offsetHeight,ie.removeChild(t)),Ve}}));var Ze=["Webkit","Moz","ms"],Je=y.createElement("div").style,et={};function tt(e){return S.cssProps[e]||et[e]||(e in Je?e:et[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=Ze.length;r--;)if((e=Ze[r]+t)in Je)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,nt=/^--/,it={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function at(e,t,r){var n=re.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function st(e,t,r,n,i,o){var a="width"===t?1:0,s=0,l=0;if(r===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===r&&(l+=S.css(e,r+ne[a],!0,i)),n?("content"===r&&(l-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==r&&(l-=S.css(e,"border"+ne[a]+"Width",!0,i))):(l+=S.css(e,"padding"+ne[a],!0,i),"padding"!==r?l+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!n&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function lt(e,t,r){var n=He(e),i=(!f.boxSizingReliable()||r)&&"border-box"===S.css(e,"boxSizing",!1,n),o=i,a=Qe(e,t,n),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(a)){if(!r)return a;a="auto"}return(!f.boxSizingReliable()&&i||!f.reliableTrDimensions()&&C(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,n),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+st(e,t,r||(i?"border":"content"),o,n,a)+"px"}function ct(e,t,r,n,i){return new ct.prototype.init(e,t,r,n,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Qe(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=W(t),l=nt.test(t),c=e.style;if(l||(t=tt(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===r)return a&&"get"in a&&void 0!==(i=a.get(e,!1,n))?i:c[t];"string"==(o=typeof r)&&(i=re.exec(r))&&i[1]&&(r=le(e,t,i),o="number"),null!=r&&r==r&&("number"!==o||l||(r+=i&&i[3]||(S.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(r=a.set(e,r,n))||(l?c.setProperty(t,r):c[t]=r))}},css:function(e,t,r,n){var i,o,a,s=W(t);return nt.test(t)||(t=tt(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,r)),void 0===i&&(i=Qe(e,t,n)),"normal"===i&&t in ot&&(i=ot[t]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,r,n){if(r)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,t,n):qe(e,it,(function(){return lt(e,t,n)}))},set:function(e,r,n){var i,o=He(e),a=!f.scrollboxSize()&&"absolute"===o.position,s=(a||n)&&"border-box"===S.css(e,"boxSizing",!1,o),l=n?st(e,t,n,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-st(e,t,"border",!1,o)-.5)),l&&(i=re.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=S.css(e,t)),at(0,r,l)}}})),S.cssHooks.marginLeft=Xe(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+ne[n]+t]=o[n]||o[n-2]||o[0];return i}},"margin"!==e&&(S.cssHooks[e+t].set=at)})),S.fn.extend({css:function(e,t){return U(this,(function(e,t,r){var n,i,o={},a=0;if(Array.isArray(t)){for(n=He(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,n);return o}return void 0!==r?S.style(e,t,r):S.css(e,t)}),e,t,1<arguments.length)}}),(S.Tween=ct).prototype={constructor:ct,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(S.cssNumber[r]?"":"px")},cur:function(){var e=ct.propHooks[this.prop];return e&&e.get?e.get(this):ct.propHooks._default.get(this)},run:function(e){var t,r=ct.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):ct.propHooks._default.set(this),this}},ct.prototype.init.prototype=ct.prototype,ct.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[tt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},ct.propHooks.scrollTop=ct.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=ct.prototype.init,S.fx.step={};var ut,dt,pt,ht,gt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function mt(){dt&&(!1===y.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(mt):e.setTimeout(mt,S.fx.interval),S.fx.tick())}function yt(){return e.setTimeout((function(){ut=void 0})),ut=Date.now()}function vt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=ne[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function bt(e,t,r){for(var n,i=(xt.tweeners[t]||[]).concat(xt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(n=i[o].call(r,t,e))return n}function xt(e,t,r){var n,i,o=0,a=xt.prefilters.length,s=S.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=ut||yt(),r=Math.max(0,c.startTime+c.duration-t),n=1-(r/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(n);return s.notifyWith(e,[c,n,r]),n<1&&a?r:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},r),originalProperties:t,originalOptions:r,startTime:ut||yt(),duration:r.duration,tweens:[],createTween:function(t,r){var n=S.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var r=0,n=t?c.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)c.tweens[r].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var r,n,i,o,a;for(r in e)if(i=t[n=W(r)],o=e[r],Array.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(a=S.cssHooks[n])&&"expand"in a)for(r in o=a.expand(o),delete e[n],o)r in e||(e[r]=o[r],t[r]=i);else t[n]=i}(u,c.opts.specialEasing);o<a;o++)if(n=xt.prefilters[o].call(c,e,u,c.opts))return m(n.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return S.map(u,bt,c),m(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(xt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return le(r.elem,e,re.exec(t),r),r}]},tweener:function(e,t){for(var r,n=0,i=(e=m(e)?(t=e,["*"]):e.match(q)).length;n<i;n++)r=e[n],xt.tweeners[r]=xt.tweeners[r]||[],xt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,a,s,l,c,u,d="width"in t||"height"in t,p=this,h={},g=e.style,f=e.nodeType&&se(e),m=Q.get(e,"fxshow");for(n in r.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always((function(){p.always((function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[n],gt.test(i)){if(delete t[n],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!m||void 0===m[n])continue;f=!0}h[n]=m&&m[n]||S.style(e,n)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(h))for(n in d&&1===e.nodeType&&(r.overflow=[g.overflow,g.overflowX,g.overflowY],null==(c=m&&m.display)&&(c=Q.get(e,"display")),"none"===(u=S.css(e,"display"))&&(c?u=c:(ue([e],!0),c=e.style.display||c,u=S.css(e,"display"),ue([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===S.css(e,"float")&&(l||(p.done((function(){g.display=c})),null==c&&(u=g.display,c="none"===u?"":u)),g.display="inline-block")),r.overflow&&(g.overflow="hidden",p.always((function(){g.overflow=r.overflow[0],g.overflowX=r.overflow[1],g.overflowY=r.overflow[2]}))),l=!1,h)l||(m?"hidden"in m&&(f=m.hidden):m=Q.access(e,"fxshow",{display:c}),o&&(m.hidden=!f),f&&ue([e],!0),p.done((function(){for(n in f||ue([e]),Q.remove(e,"fxshow"),h)S.style(e,n,h[n])}))),l=bt(f?m[n]:0,n,p),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?xt.prefilters.unshift(e):xt.prefilters.push(e)}}),S.speed=function(e,t,r){var n=e&&"object"==typeof e?S.extend({},e):{complete:r||!r&&t||m(e)&&e,duration:e,easing:r&&t||t&&!m(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,r,n){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){function i(){var t=xt(this,S.extend({},e),a);(o||Q.get(this,"finish"))&&t.stop(!0)}var o=S.isEmptyObject(e),a=S.speed(t,r,n);return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(e,t,r){function n(e){var t=e.stop;delete e.stop,t(r)}return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=S.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&ft.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=Q.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=S.timers,a=n?n.length:0;for(r.finish=!0,S.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var r=S.fn[t];S.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(vt(t,!0),e,n,i)}})),S.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,r=S.timers;for(ut=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||S.fx.stop(),ut=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){dt||(dt=!0,mt())},S.fx.stop=function(){dt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,r){return t=S.fx&&S.fx.speeds[t]||t,r=r||"fx",this.queue(r,(function(r,n){var i=e.setTimeout(r,t);n.stop=function(){e.clearTimeout(i)}}))},pt=y.createElement("input"),ht=y.createElement("select").appendChild(y.createElement("option")),pt.type="checkbox",f.checkOn=""!==pt.value,f.optSelected=ht.selected,(pt=y.createElement("input")).value="t",pt.type="radio",f.radioValue="t"===pt.value;var wt,St=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return U(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?S.prop(e,t,r):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?wt:void 0)),void 0!==r?null===r?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))||null!=(n=S.find.attr(e,t))?n:void 0)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&C(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(q);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),wt={set:function(e,t,r){return!1===t?S.removeAttr(e,r):e.setAttribute(r,r),r}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=St[t]||S.find.attr;St[t]=function(e,t,n){var i,o,a=t.toLowerCase();return n||(o=St[a],St[a]=i,i=null!=r(e,t,n)?a:null,St[a]=o),i}}));var Et=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;function kt(e){return(e.match(q)||[]).join(" ")}function Mt(e){return e.getAttribute&&e.getAttribute("class")||""}function It(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(q)||[]}S.fn.extend({prop:function(e,t){return U(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,r,n,i,o,a,s,l=0;if(m(e))return this.each((function(t){S(this).addClass(e.call(this,t,Mt(this)))}));if((t=It(e)).length)for(;r=this[l++];)if(i=Mt(r),n=1===r.nodeType&&" "+kt(i)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i!==(s=kt(n))&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,n,i,o,a,s,l=0;if(m(e))return this.each((function(t){S(this).removeClass(e.call(this,t,Mt(this)))}));if(!arguments.length)return this.attr("class","");if((t=It(e)).length)for(;r=this[l++];)if(i=Mt(r),n=1===r.nodeType&&" "+kt(i)+" "){for(a=0;o=t[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");i!==(s=kt(n))&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=typeof e,n="string"==r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):m(e)?this.each((function(r){S(this).toggleClass(e.call(this,r,Mt(this),t),t)})):this.each((function(){var t,i,o,a;if(n)for(i=0,o=S(this),a=It(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!=r||((t=Mt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==e&&Q.get(this,"__className__")||""))}))},hasClass:function(e){for(var t,r=0,n=" "+e+" ";t=this[r++];)if(1===t.nodeType&&-1<(" "+kt(Mt(t))+" ").indexOf(n))return!0;return!1}});var Ct=/\r/g;function Lt(e){e.stopPropagation()}S.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=m(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,S(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(Ct,""):null==r?"":r:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:kt(S.text(e))}},select:{get:function(e){for(var t,r,n=e.options,i=e.selectedIndex,o="select-one"===e.type,a=o?null:[],s=o?i+1:n.length,l=i<0?s:o?i:0;l<s;l++)if(((r=n[l]).selected||l===i)&&!r.disabled&&(!r.parentNode.disabled||!C(r.parentNode,"optgroup"))){if(t=S(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,o=S.makeArray(t),a=i.length;a--;)((n=i[a]).selected=-1<S.inArray(S.valHooks.option.get(n),o))&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},f.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.focusin="onfocusin"in e;var Pt=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(t,n,i,o){var a,s,l,c,u,d,h,g=[i||y],f=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[],b=h=s=i=i||y;if(3!==i.nodeType&&8!==i.nodeType&&!Pt.test(f+S.event.triggered)&&(-1<f.indexOf(".")&&(f=(v=f.split(".")).shift(),v.sort()),c=f.indexOf(":")<0&&"on"+f,(t=t[S.expando]?t:new S.Event(f,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:S.makeArray(n,[t]),d=S.event.special[f]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!r(i)){for(l=d.delegateType||f,Pt.test(l+f)||(b=b.parentNode);b;b=b.parentNode)g.push(b),s=b;s===(i.ownerDocument||y)&&g.push(s.defaultView||s.parentWindow||e)}for(a=0;(b=g[a++])&&!t.isPropagationStopped();)h=b,t.type=1<a?l:d.bindType||f,(u=(Q.get(b,"events")||Object.create(null))[t.type]&&Q.get(b,"handle"))&&u.apply(b,n),(u=c&&b[c])&&u.apply&&$(b)&&(t.result=u.apply(b,n),!1===t.result&&t.preventDefault());return t.type=f,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),n)||!$(i)||c&&m(i[f])&&!r(i)&&((s=i[c])&&(i[c]=null),S.event.triggered=f,t.isPropagationStopped()&&h.addEventListener(f,Lt),i[f](),t.isPropagationStopped()&&h.removeEventListener(f,Lt),S.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,r){var n=S.extend(new S.Event,r,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return S.event.trigger(e,t,r,!0)}}),f.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){function r(e){S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,i=Q.access(n,t);i||n.addEventListener(e,r,!0),Q.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,i=Q.access(n,t)-1;i?Q.access(n,t,i):(n.removeEventListener(e,r,!0),Q.remove(n,t))}}}));var Tt=e.location,At={guid:Date.now()},Ot=/\?/;S.parseXML=function(t){var r,n;if(!t||"string"!=typeof t)return null;try{r=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=r&&r.getElementsByTagName("parsererror")[0],r&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):t)),r};var Dt=/\[\]$/,Ft=/\r?\n/g,qt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function r(e,t){var r=m(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)}var n,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){r(this.name,this.value)}));else for(n in e)!function e(t,r,n,i){var o;if(Array.isArray(r))S.each(r,(function(r,o){n||Dt.test(t)?i(t,o):e(t+"["+("object"==typeof o&&null!=o?r:"")+"]",o,n,i)}));else if(n||"object"!==x(r))i(t,r);else for(o in r)e(t+"["+o+"]",r[o],n,i)}(n,e[n],t,r);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!qt.test(e)&&(this.checked||!he.test(e))})).map((function(e,t){var r=S(this).val();return null==r?null:Array.isArray(r)?S.map(r,(function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}})):{name:t.name,value:r.replace(Ft,"\r\n")}})).get()}});var Rt=/%20/g,Bt=/#.*$/,jt=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Gt={},Kt={},Ht="*/".concat("*"),Wt=y.createElement("a");function $t(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(q)||[];if(m(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Yt(e,t,r,n){var i={},o=e===Kt;function a(s){var l;return i[s]=!0,S.each(e[s]||[],(function(e,s){var c=s(t,r,n);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Qt(e,t){var r,n,i=S.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n=n||{})[r]=t[r]);return n&&S.extend(!0,e,n),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,S.ajaxSettings),t):Qt(S.ajaxSettings,e)},ajaxPrefilter:$t(Gt),ajaxTransport:$t(Kt),ajax:function(t,r){"object"==typeof t&&(r=t,t=void 0),r=r||{};var n,i,o,a,s,l,c,u,d,p,h=S.ajaxSetup({},r),g=h.context||h,f=h.context&&(g.nodeType||g.jquery)?S(g):S.event,m=S.Deferred(),v=S.Callbacks("once memory"),b=h.statusCode||{},x={},w={},E="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Vt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)_.always(e[_.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return n&&n.abort(t),k(0,t),this}};if(m.promise(_),h.url=((t||h.url||Tt.href)+"").replace(Ut,Tt.protocol+"//"),h.type=r.method||r.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(q)||[""],null==h.crossDomain){l=y.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Wt.protocol+"//"+Wt.host!=l.protocol+"//"+l.host}catch(t){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=S.param(h.data,h.traditional)),Yt(Gt,h,r,_),c)return _;for(d in(u=S.event&&h.global)&&0==S.active++&&S.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!zt.test(h.type),i=h.url.replace(Bt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Rt,"+")):(p=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(Ot.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(jt,"$1"),p=(Ot.test(i)?"&":"?")+"_="+At.guid+++p),h.url=i+p),h.ifModified&&(S.lastModified[i]&&_.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&_.setRequestHeader("If-None-Match",S.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||r.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ht+"; q=0.01":""):h.accepts["*"]),h.headers)_.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(g,_,h)||c))return _.abort();if(E="abort",v.add(h.complete),_.done(h.success),_.fail(h.error),n=Yt(Kt,h,r,_)){if(_.readyState=1,u&&f.trigger("ajaxSend",[_,h]),c)return _;h.async&&0<h.timeout&&(s=e.setTimeout((function(){_.abort("timeout")}),h.timeout));try{c=!1,n.send(x,k)}catch(t){if(c)throw t;k(-1,t)}}else k(-1,"No Transport");function k(t,r,a,l){var d,p,y,x,w,E=r;c||(c=!0,s&&e.clearTimeout(s),n=void 0,o=l||"",_.readyState=0<t?4:0,d=200<=t&&t<300||304===t,a&&(x=function(e,t,r){for(var n,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in s)if(s[i]&&s[i].test(n)){l.unshift(i);break}if(l[0]in r)o=l[0];else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a=a||i}o=o||a}if(o)return o!==l[0]&&l.unshift(o),r[o]}(h,_,a)),!d&&-1<S.inArray("script",h.dataTypes)&&S.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),x=function(e,t,r,n){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(h,x,_,d),d?(h.ifModified&&((w=_.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=w),(w=_.getResponseHeader("etag"))&&(S.etag[i]=w)),204===t||"HEAD"===h.type?E="nocontent":304===t?E="notmodified":(E=x.state,p=x.data,d=!(y=x.error))):(y=E,!t&&E||(E="error",t<0&&(t=0))),_.status=t,_.statusText=(r||E)+"",d?m.resolveWith(g,[p,E,_]):m.rejectWith(g,[_,E,y]),_.statusCode(b),b=void 0,u&&f.trigger(d?"ajaxSuccess":"ajaxError",[_,h,d?p:y]),v.fireWith(g,[_,E]),u&&(f.trigger("ajaxComplete",[_,h]),--S.active||S.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,r){return S.get(e,t,r,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,r,n,i){return m(r)&&(i=i||n,n=r,r=void 0),S.ajax(S.extend({url:e,type:t,dataType:i,data:r,success:n},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,r){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,r)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return m(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m(e);return this.each((function(r){S(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Zt=S.ajaxSettings.xhr();f.cors=!!Zt&&"withCredentials"in Zt,f.ajax=Zt=!!Zt,S.ajaxTransport((function(t){var r,n;if(f.cors||Zt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);r=function(e){return function(){r&&(r=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Xt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=r(),n=s.onerror=s.ontimeout=r("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){r&&n()}))},r=r("abort");try{s.send(t.hasContent&&t.data||null)}catch(i){if(r)throw i}},abort:function(){r&&r()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Jt,er=[],tr=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||S.expando+"_"+At.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(t,r,n){var i,o,a,s=!1!==t.jsonp&&(tr.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tr,"$1"+i):!1!==t.jsonp&&(t.url+=(Ot.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||S.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},n.always((function(){void 0===o?S(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=r.jsonpCallback,er.push(i)),a&&m(o)&&o(a[0]),a=o=void 0})),"script"})),f.createHTMLDocument=((Jt=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),S.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(f.createHTMLDocument?((n=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(n)):t=y),o=!r&&[],(i=L.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var n,i,o},S.fn.load=function(e,t,r){var n,i,o,a=this,s=e.indexOf(" ");return-1<s&&(n=kt(e.slice(s)),e=e.slice(0,s)),m(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)})).always(r&&function(e,t){a.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,r){var n,i,o,a,s,l,c=S.css(e,"position"),u=S(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=S.css(e,"top"),l=S.css(e,"left"),i=("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(a=(n=u.position()).top,n.left):(a=parseFloat(o)||0,parseFloat(l)||0),m(t)&&(t=t.call(e,r,S.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):u.css(d)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(n,"marginTop",!0),left:t.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||ie}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(i){return U(this,(function(e,i,o){var a;return r(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o?a?a[t]:e[i]:void(a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[i]=o)}),e,i,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Xe(f.pixelPosition,(function(e,r){if(r)return r=Qe(e,t),Ke.test(r)?S(e).position()[t]+"px":r}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){S.fn[i]=function(o,a){var s=arguments.length&&(n||"boolean"!=typeof o),l=n||(!0===o||!0===a?"margin":"border");return U(this,(function(t,n,o){var a;return r(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?S.css(t,n,l):S.style(t,n,o,l)}),t,s?o:void 0,s)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,r){return 0<arguments.length?this.on(t,null,e,r):this.trigger(t)}}));var rr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),m(e))return n=a.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=C,S.isFunction=m,S.isWindow=r,S.camelCase=W,S.type=x,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(rr,"")},"function"==typeof i&&i.amd&&i("jquery",[],(function(){return S}));var nr=e.jQuery,ir=e.$;S.noConflict=function(t){return e.$===S&&(e.$=ir),t&&e.jQuery===S&&(e.jQuery=nr),S},void 0===t&&(e.jQuery=e.$=S)}(e)}("undefined"!=typeof window?window:this),i("browser",["require","jquery"],(function(e){var t,r,n,i,o,a,s,l=e("jquery"),c={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i)||null!==navigator.userAgent.match(/Trident/i)&&null!==navigator.userAgent.match(/rv:11/i),IS_EDGE:null!==navigator.userAgent.match(/Edge/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_IOS:null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,IS_CHROME:null!==navigator.userAgent.match(/Chrome/i),IS_FIREFOX:null!==navigator.userAgent.match(/Firefox/i),IS_SAFARI:null!==navigator.userAgent.match(/^((?!chrome|android).)*safari/i),IS_APPLE:null!==navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),IS_WINDOWS:null!==navigator.platform.match(/(Win32)/i),IS_TOUCH:null!==navigator.userAgent.match(/Touch/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_BRAILLENOTE:null!==navigator.userAgent.match(/KeyWeb/i),IS_IN_IFRAME:window.parent!==window};return c.IS_TABLET=c.IS_IPAD||c.IS_ANDROID||c.IS_KINDLE,c.IS_TOUCH_DEVICE=c.SHOULD_NOT_AUTOFOCUS=c.IS_IOS||c.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),c.IOS_VERSION=(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null,c.MAC_VERSION=(r=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/))?[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||0,10)]:null,c.CHROME_VERSION=(n=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/))?[parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4]||0,10)]:null,c.SUPPORTS_INPUTMODE=(i=c.IOS_VERSION,o=c.MAC_VERSION,a=c.CHROME_VERSION,i&&13<=i[0]||c.IS_IOS&&!i&&o&&(10<o[0]||10===o[0]&&15<=o[1])||c.IS_ANDROID&&a&&76<=a[0]),c.SUPPORTS_TRANSLATE3D=!1,l(document).ready((function(){var e,t,r=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var i in document.body.insertBefore(r,null),n)if(void 0!==r.style[i]){if(r.style[i]="translate3d(1px,1px,1px)",!(t=window.getComputedStyle(r)))return;e=t.getPropertyValue(n[i])}document.body.removeChild(r),c.SUPPORTS_TRANSLATE3D=void 0!==e&&0<e.length&&"none"!==e})),c.translateRule=function(e,t){return c.SUPPORTS_TRANSLATE3D?"translate3d("+e+(e?"px":"")+","+t+(t?"px":"")+",0)":"translate("+e+(e?"px":"")+","+t+(t?"px":"")+")"},c.SUPPORTS_CANVAS=!(!(s=document.createElement("canvas")).getContext||!s.getContext("2d")),c})),i("testbridge",["require"],(function(e){var t={ready:function(){try{window.TestBridge=t,parent.USING_SELENIUM&&function(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);e.apply(window.console,[].concat([t.join(" ")],t))}}()}catch(e){}}};return t})),function(){var e,t=window.jQuery,r=Math.min,n=Math.max;if(!t)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";function i(){}var o=[].slice;function a(e){var t=o.call(arguments,1);return function(){return e.apply(this,t)}}function s(e,t){if(!t)throw new Error("prayer failed: "+e)}var l,c,u=(l="prototype",c={}.hasOwnProperty,function e(t,r){function n(){var e=new i;return p(e.init)&&e.init.apply(e,arguments),e}function i(){}void 0===r&&(r=t,t=Object),n.Bare=i;var o,a=h[l]=t[l],s=i[l]=n[l]=n.p=new h;return(s.constructor=n).extend=function(t){return e(n,t)},(n.open=function(e){if(o={},p(e)?o=e.call(n,s,a,n,t):d(e)&&(o=e),d(o))for(var r in o)c.call(o,r)&&(s[r]=o[r]);return p(s.init)||(s.init=t),n})(r)});function d(e){return"object"==typeof e}function p(e){return"function"==typeof e}function h(){}var g=-1;function f(e){s("a direction was passed",e===g||1===e)}var m=u(t,(function(e){e.insDirOf=function(e,t){return e===g?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===g?this.prependTo(t):this.appendTo(t)}})),y=u((function(e){e.parent=0,e[g]=0,e[1]=0,e.init=function(e,t,r){this.parent=e,this[g]=t,this[1]=r},this.copy=function(e){return y(e.parent,e[g],e[1])}})),v={},b=!1;function x(){b=!1,v={}}function w(e,t){var r=e[g];if(r)for(;r!==e[1][1]&&!1!==t(r);r=r[1]);}function S(e,t,r){var n=e[g];if(!n)return t;for(;n!==e[1][1];n=n[1])t=r(t,n);return t}var E=u((function(e){e[g]=0,e[1]=0;var t=e.parent=0;this.getNodeOfElement=function(e){if(e){if(!e.nodeType)throw new Error("must pass an HTMLElement to Node.getNodeOfElement");return e.mqBlockNode||e.mqCmdNode}},this.linkElementByBlockId=function(e,t){E.linkElementByBlockNode(e,v[t])},this.linkElementByBlockNode=function(e,t){e.mqBlockNode=t},this.linkElementByCmdNode=function(e,t){e.mqCmdNode=t},e.init=function(){this.id=t+=1,v[t]=this,b||(b=!0,setTimeout(x)),this.ends={},this.ends[g]=0,this.ends[1]=0},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=m(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){e=m(e||this.html());for(var t=0;t<e.length;t+=1)!function e(t){var r,n,i,o;for(t.getAttribute&&((r=t.getAttribute("mathquill-command-id"))&&(t.removeAttribute("mathquill-command-id"),(n=v[r]).jQadd(t),E.linkElementByCmdNode(t,n)),(i=t.getAttribute("mathquill-block-id"))&&(t.removeAttribute("mathquill-block-id"),(o=v[i]).jQadd(t),E.linkElementByBlockNode(t,o))),t=t.firstChild;t;t=t.nextSibling)e(t)}(e[t]);return e},e.createDir=function(e,t){return f(e),this.jQize(),this.jQ.insDirOf(e,t.jQ),t[e]=this.adopt(t.parent,t[g],t[1]),this},e.createLeftOf=function(e){return this.createDir(g,e)},e.selectChildren=function(e,t){return L(e,t)},e.bubble=function(e){for(var t=this;t&&!1!==e(t);t=t.parent);return this},e.postOrder=function(e){return function t(r){r.eachChild(t),e(r)}(this),this},e.isEmpty=function(){return 0===this.ends[g]&&0===this.ends[1]},e.isEmptyParens=function(){return!!this.isEmpty()&&!!this.parent&&"\\left("===this.parent.ctrlSeq},e.isEmptySquareBrackets=function(){return!!this.isEmpty()&&!!this.parent&&"\\left["===this.parent.ctrlSeq},e.isStyleBlock=function(){return!1},e.children=function(){return k(this.ends[g],this.ends[1])},e.eachChild=function(e){return w(this.ends,e),this},e.foldChildren=function(e,t){return S(this.ends,e,t)},e.withDirAdopt=function(e,t,r,n){return k(this,this).withDirAdopt(e,t,r,n),this},e.adopt=function(e,t,r){return k(this,this).adopt(e,t,r),this},e.disown=function(){return k(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.disown()},e.isParentSimpleSubscript=function(){return!!this.parent&&this.parent.parent instanceof je&&!!this.parent.jQ.hasClass("dcg-mq-sub")},e.finalizeTree=function(){},e.contactWeld=function(){},e.blur=function(){},e.intentionalBlur=function(){},e.reflow=function(){},e.registerInnerField=function(){}}));function _(e,t,r){s("a parent is always present",e),s("leftward is properly set up",t?t[1]===r&&t.parent===e:e.ends[g]===r),s("rightward is properly set up",r?r[g]===t&&r.parent===e:e.ends[1]===t)}var k=u((function(t){t.init=function(t,r,n){var i;n===e&&(n=g),f(n),s("no half-empty fragments",!t==!r),this.ends={},t&&(s("withDir is passed to Fragment",t instanceof E),s("oppDir is passed to Fragment",r instanceof E),s("withDir and oppDir have the same parent",t.parent===r.parent),this.ends[n]=t,this.ends[-n]=r,i=this.fold([],(function(e,t){return e.push.apply(e,t.jQ.get()),e})),this.jQ=this.jQ.add(i))},t.jQ=m(),t.withDirAdopt=function(e,t,r,n){return e===g?this.adopt(t,r,n):this.adopt(t,n,r)},t.adopt=function(e,t,r){_(e,t,r);var n=this;n.disowned=!1;var i=n.ends[g];if(!i)return this;var o=n.ends[1];return t||(e.ends[g]=i),r?r[g]=o:e.ends[1]=o,n.ends[1][1]=r,n.each((function(r){r[g]=t,r.parent=e,t&&(t[1]=r),t=r})),n},t.disown=function(){var e=this,t=e.ends[g];if(!t||e.disowned)return e;e.disowned=!0;var r=e.ends[1],n=t.parent;return _(n,t[g],t),_(n,r,r[1]),t[g]?t[g][1]=r[1]:n.ends[g]=r[1],r[1]?r[1][g]=t[g]:n.ends[1]=t[g],e},t.remove=function(){return this.jQ.remove(),this.disown()},t.each=function(e){return w(this.ends,e),this},t.fold=function(e,t){return S(this.ends,e,t)}})),M={},I={},C=u(y,(function(e){e.init=function(e,t,r){this.controller=r,this.parent=e,this.options=t;var n=this.jQ=this._jQ=m('<span class="dcg-mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("dcg-mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("dcg-mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[g][g]===this[g]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=m(),this},e.withDirInsertAt=function(e,t,r,n){var i=this.parent;this.parent=t,this[e]=r,this[-e]=n,i!==t&&i.blur&&i.blur(this)},e.insDirOf=function(e,t){return f(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("dcg-mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(g,e)},e.insRightOf=function(e){return this.insDirOf(1,e)},e.insAtDirEnd=function(e,t){return f(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(g,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(1,e)},e.jumpUpDown=function(e,t){var r=this;r.upDownCache[e.id]=y.copy(r);var n,i=r.upDownCache[t.id];i?i[1]?r.insLeftOf(i[1]):r.insAtRightEnd(i.parent):(n=r.offset().left,t.seek(n,r)),W.queue(t,!0)},e.offset=function(){var e=this.jQ.removeClass("dcg-mq-cursor").offset();return this.jQ.addClass("dcg-mq-cursor"),e},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,r=e[1],n=e[g];if(e.disown().eachChild((function(i){i.isEmpty()||(i.children().adopt(t,n,r).each((function(t){t.jQ.insertBefore(e.jQ.first())})),n=i.ends[1])})),!this[1])if(this[g])this[1]=this[g][1];else for(;!this[1];){if(this.parent=this.parent[1],!this.parent){this[1]=e[1],this.parent=t;break}this[1]=this.parent.ends[g]}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(t),e.jQ.remove(),e[g].siblingDeleted&&e[g].siblingDeleted(this.options,1),e[1].siblingDeleted&&e[1].siblingDeleted(this.options,g)},e.startSelection=function(){for(var e=this.anticursor=y.copy(this),t=e.ancestors={},r=e;r.parent;r=r.parent)t[r.parent.id]=r},e.endSelection=function(){delete this.anticursor},e.select=function(){var e=this.anticursor;if(this[g]===e[g]&&this.parent===e.parent)return!1;for(var t=this;t.parent;t=t.parent)if(t.parent.id in e.ancestors){var r=t.parent;break}s("cursor and anticursor in the same tree",r);var n,i,o=e.ancestors[r.id],a=1;if(t[g]!==o)for(var l=t;l;l=l[1])if(l[1]===o[1]){a=g,n=t,i=o;break}return 1===a&&(n=o,i=t),n instanceof y&&(n=n[1]),i instanceof y&&(i=i[g]),this.hide().selection=r.selectChildren(n,i),this.insDirOf(a,this.selection.ends[a]),this.selectionChanged(),!0},e.resetToEnd=function(e){this.clearSelection();var t=e.root;this[1]=0,this[g]=t.ends[1],this.parent=t},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[g]=this.selection.ends[g][g],this[1]=this.selection.ends[1][1],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[g]=e.ends[g][g],this[1]=e.ends[1][1],delete this.selection),e}})),L=u(k,(function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e,t){var r=t||"";return this.fold("",(function(t,n){return t+r+n[e]()}))}})),P=u((function(e){e.init=function(e,t,r){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=r,this.ariaLabel="Math Input",this.ariaPostLabel="",(e.controller=this).cursor=e.cursor=C(e,r,this)},e.handle=function(e,t){var r,n=this.options.handlers;n&&n.fns[e]&&(r=n.APIClasses[this.KIND_OF_MQ](this),t===g||1===t?n.fns[e](t,r):n.fns[e](r))};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}})),T={},A=u(),O={},D=u(),F={};function q(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014â2015) â v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function N(e){return q(),tt(e)}N.prototype=D.p,N.VERSION="vv1.6",N.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return(q=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014â2015) â v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),N};var R=(N.getInterface=j).MIN=1,B=j.MAX=2;function j(e){if(!(R<=e&&e<=B))throw"Only interface versions between "+R+" and "+B+" supported. You specified: "+e;function r(e){if(!e||!e.nodeType)return null;var t=E.getNodeOfElement(m(e).children(".dcg-mq-root-block")[0]),r=t&&t.controller;return r?n[r.KIND_OF_MQ](r):null}var n={};function o(e,t){for(var r in t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:n}),t){var i,o;t.hasOwnProperty(r)&&(i=t[r],o=O[r],e[r]=o?o(i):i)}}r.L=g,r.R=1,r.saneKeyboardEvents=K,r.config=function(e){return o(A.p,e),this},r.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";F[e]=t};var a=n.AbstractMathQuill=u(D,(function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t=this.__controller,r=t.root,n=t.container;t.createTextarea();var i=n.addClass(e).contents().detach();r.jQ=m('<span class="dcg-mq-root-block"/>').appendTo(n),E.linkElementByBlockId(r.jQ[0],r.id),this.latex(i.text()),this.revert=function(){return n.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(i)}},e.config=function(e){return o(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.mathspeak=function(){return this.__controller.exportMathSpeak()},e.latex=function(e){return 0<arguments.length?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder((function(e){e.reflow()})),this}}));for(var s in r.prototype=a.prototype,n.EditableField=u(a,(function(e,r){e.__mathquillify=function(){return r.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},e.focus=function(){return this.__controller.textarea[0].focus(),this.__controller.scrollHoriz(),this},e.blur=function(){return this.__controller.textarea.blur(),this},e.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},e.cmd=function(e){var t,r=this.__controller.notify(),n=r.cursor;return/^\\[a-z]+$/i.test(e)?(e=e.slice(1),(t=M[e])&&(e=t(e),n.selection&&e.replaces(n.replaceSelection()),e.createLeftOf(n.show()))):n.parent.write(n,e),r.scrollHoriz(),r.blurred&&n.hide().parent.blur(),this},e.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[g];)e.selectLeft();return this},e.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},e.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},e.moveToLeftEnd=function(){return this.moveToDirEnd(g)},e.moveToRightEnd=function(){return this.moveToDirEnd(1)},e.keystroke=function(e,t){e=e.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var r=0;r<e.length;r+=1)this.__controller.keystroke(e[r],t||{preventDefault:i});return this},e.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},e.dropEmbedded=function(e,t,r){var n=e-m(window).scrollLeft(),i=t-m(window).scrollTop(),o=document.elementFromPoint(n,i);this.__controller.seek(m(o),e,t),et().setOptions(r).createLeftOf(this.__controller.cursor)},e.setAriaLabel=function(e){return this.__controller.ariaLabel=e&&"string"==typeof e&&""!=e?e:"Math Input",this},e.getAriaLabel=function(){return this.__controller.ariaLabel||"Math Input"},e.setAriaPostLabel=function(e,t){var r=this.__controller;return e&&"string"==typeof e&&""!=e?(e!==r.ariaPostLabel&&"number"==typeof t&&(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),this.ariaAlertTimeout=setTimeout(function(){m(document.activeElement).closest(m(r.container)).length&&W.alert(this.mathspeak().trim()+" "+e.trim())}.bind(this),t)),r.ariaPostLabel=e):(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),r.ariaPostLabel=""),this},e.getAriaPostLabel=function(){return this.__controller.ariaPostLabel||""},e.clickAt=function(e,r,n){n=n||document.elementFromPoint(e,r);var i=this.__controller,o=i.root;return t.contains(o.jQ[0],n)||(n=o.jQ[0]),i.seek(m(n),e+pageXOffset,r+pageYOffset),i.blurred&&this.focus(),this},e.ignoreNextMousedown=function(e){return this.__controller.cursor.options.ignoreNextMousedown=e,this}})),(r.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"}).prototype=n.EditableField.prototype,T)!function(t,i){var o=n[t]=i(n);(r[t]=function(n,i){var a=r(n);if(a instanceof o||!n||!n.nodeType)return a;var s=P(o.RootBlock(),m(n),A());return s.KIND_OF_MQ=t,o(s).__mathquillify(i,e)}).prototype=o.prototype}(s,T[s]);return r}N.noConflict=function(){return window.MathQuill=V,N};var V=window.MathQuill;function z(e){for(var t="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),r=0;r<t.length;r+=1)!function(t){e[t]=function(e){this.controller.handle(t,e)}}(t[r]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}window.MathQuill=N;var U,G=u((function(e,t,r){function n(e,t){throw"Parse Error: "+t+" at "+(e?"'"+e+"'":"EOF")}e.init=function(e){this._=e},e.parse=function(e){return this.skip(a)._(""+e,(function(e,t){return t}),n)},e.or=function(e){s("or is passed a parser",e instanceof r);var t=this;return r((function(r,n,i){return t._(r,n,(function(t){return e._(r,n,i)}))}))},e.then=function(e){var t=this;return r((function(n,i,o){return t._(n,(function(t,n){var a=e instanceof r?e:e(n);return s("a parser is returned",a instanceof r),a._(t,i,o)}),o)}))},e.many=function(){var e=this;return r((function(t,r,n){for(var i=[];e._(t,o,a););return r(t,i);function o(e,r){return t=e,i.push(r),!0}function a(){return!1}}))},e.times=function(e,t){arguments.length<2&&(t=e);var n=this;return r((function(r,i,o){for(var a,s=[],l=!0,c=0;c<e;c+=1)if(!(l=n._(r,u,d)))return o(r,a);for(;c<t&&l;c+=1)l=n._(r,u,p);return i(r,s);function u(e,t){return s.push(t),r=e,!0}function d(e,t){return a=t,r=e,!1}function p(e,t){return!1}}))},e.result=function(e){return this.then(o(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then((function(e){return t.many().map((function(t){return e.concat(t)}))}))},e.map=function(e){return this.then((function(t){return o(e(t))}))},e.skip=function(e){return this.then((function(t){return e.result(t)}))},this.string=function(e){var t=e.length,n="expected '"+e+"'";return r((function(r,i,o){var a=r.slice(0,t);return a===e?i(r.slice(t),a):o(r,n)}))};var i=this.regex=function(e){s("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return r((function(r,n,i){var o=e.exec(r);if(o){var a=o[0];return n(r.slice(a.length),a)}return i(r,t)}))},o=r.succeed=function(e){return r((function(t,r){return r(t,e)}))},a=(r.fail=function(e){return r((function(t,r,n){return n(t,e)}))},r.letter=i(/^[a-z]/i),r.letters=i(/^[a-z]*/i),r.digit=i(/^[0-9]/),r.digits=i(/^[0-9]*/),r.whitespace=i(/^\s+/),r.optWhitespace=i(/^\s*/),r.any=r((function(e,t,r){return e?t(e.slice(1),e.charAt(0)):r(e,"expected any character")})),r.all=r((function(e,t,r){return t("",e)})),r.eof=r((function(e,t,r){return e?r(e,"expected EOF"):t(e,e)})))})),K=(U={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},function(e,r){var n,o=null,a=null,s=t(e),l=t(r.container||s),c=i;function u(e){c=e,clearTimeout(n),n=setTimeout(e)}function d(e){u((function(t){c=i,clearTimeout(n),e(t)}))}function p(){try{s[0].select()}catch(e){}}l.bind("keydown keypress input keyup paste",(function(e){c(e)}));var h=!1;function g(){r.options&&r.options.overrideKeystroke?r.options.overrideKeystroke(H(o),o):r.keystroke(H(o),o)}function f(e){o=e,a=null,h&&d((function(e){e&&"focusout"===e.type||p()})),g()}function m(e){if(e&&e.originalEvent)switch(e.originalEvent.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"ArrowUp":return 1}}function y(e){o&&a&&g(),m(a=e)||u(b)}function v(e){o&&!a&&(m(e)||u(b))}function b(){var e,t;"selectionStart"in(e=s[0])&&e.selectionStart!==e.selectionEnd||(1===(t=s.val()).length?(s.val(""),r.options&&r.options.overrideTypedText?r.options.overrideTypedText(t):r.typedText(t)):t&&p())}function x(){a=o=null,c=i,clearTimeout(n),s.val("")}function w(){var e=s.val();s.val(""),e&&r.paste(e)}return r.options&&r.options.disableCopyPaste?l.bind({keydown:f,keypress:y,keyup:v,focusout:x,copy:function(e){e.preventDefault()},cut:function(e){e.preventDefault()},paste:function(e){e.preventDefault()}}):l.bind({keydown:f,keypress:y,keyup:v,focusout:x,cut:function(){d((function(){r.cut()}))},copy:function(){d((function(){r.copy()}))},paste:function(e){document.activeElement!==s[0]&&s[0].focus(),u(w)}}),{select:function(e){c(),c=i,clearTimeout(n),s.val(e),e&&p(),h=!!e}}});function H(e){var t,r=e.which||e.keyCode,n=U[r],i=[];return e.ctrlKey&&i.push("Ctrl"),e.originalEvent&&e.originalEvent.metaKey&&i.push("Meta"),e.altKey&&i.push("Alt"),e.shiftKey&&i.push("Shift"),t=n||String.fromCharCode(r),i.length||n?(i.push(t),i.join("-")):t}var W=u((function(e){e.init=function(){this.jQ=t([]),t(document).ready(function(){var e=".dcg-mq-aria-alert";t(e).length||t("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"),this.jQ=t(e)}.bind(this)),this.items=[],this.msg=""},e.queue=function(e,t){return e instanceof E&&(e=t?e.parent&&e.parent.ariaLabel&&"block"===e.ariaLabel?e.parent.ariaLabel+" "+e.mathspeak():e.ariaLabel?e.ariaLabel+" "+e.mathspeak():e.mathspeak():e.mathspeak()),this.items.push(e),this},e.queueDirOf=function(e){return f(e),this.queue(e===g?"before":"after")},e.queueDirEndOf=function(e){return f(e),this.queue(e===g?"beginning of":"end of")},e.alert=function(e){return e&&this.queue(e),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.jQ.empty().text(this.msg)),this.clear()},e.clear=function(){return this.items.length=0,this}}))();P.open((function(e){e.aria=W,e.exportMathSpeak=function(){return this.root.mathspeak()}})),P.open((function(e,t){e.exportText=function(){return this.root.foldChildren("",(function(e,t){return e+t.text()}))}})),P.open((function(t){this.onNotify((function(t){if("edit"===t||"replace"===t||t===e){var r=this.controller;if(!r)return;if(!r.options.enableDigitGrouping)return;if(!1!==r.blurred)return;r.disableGroupingForSeconds(1)}})),t.disableGroupingForSeconds=function(e){clearTimeout(this.__disableGroupingTimeout);var t=this.root.jQ;0===e?t.removeClass("dcg-mq-suppress-grouping"):(t.addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout((function(){t.removeClass("dcg-mq-suppress-grouping")}),1e3*e))},t.focusBlurEvents=function(){var t,r=this,n=r.root,i=r.cursor;function o(){clearTimeout(t),i.selection&&i.selection.jQ.addClass("dcg-mq-blur"),a(),s()}function a(){i.hide().parent.blur(),r.container.removeClass("dcg-mq-focused"),m(window).unbind("blur",o),r.options&&r.options.resetCursorOnBlur&&i.resetToEnd(r)}function s(){var e=(r.ariaLabel+": "+n.mathspeak()+" "+r.ariaPostLabel).trim();W.jQ.empty(),r.textarea.attr("aria-label",e),r.container.attr("aria-label",e)}r.textarea.focus((function(){s(),r.blurred=!1,clearTimeout(t),r.container.addClass("dcg-mq-focused"),i.parent||i.insAtRightEnd(n),i.selection?(i.selection.jQ.removeClass("dcg-mq-blur"),r.selectionChanged()):i.show(),r.setOverflowClasses()})).blur((function(){r.textareaSelectionTimeout&&(clearTimeout(r.textareaSelectionTimeout),r.textareaSelectionTimeout=e),r.disableGroupingForSeconds(0),r.blurred=!0,t=setTimeout((function(){n.postOrder((function(e){e.intentionalBlur()})),i.clearSelection().endSelection(),a(),s(),r.scrollHoriz()})),m(window).bind("blur",o)})),s(),r.blurred=!0,i.hide().parent.blur()}})),P.open((function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}})),E.open((function(e){e.keystroke=function(e,t,r){var n=r.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":r.ctrlDeleteDir(g);break;case"Shift-Backspace":case"Backspace":r.backspace();break;case"Esc":case"Tab":return void r.escapeDir(1,e,t);case"Shift-Tab":case"Shift-Esc":return void r.escapeDir(g,e,t);case"End":r.notify("move").cursor.insAtRightEnd(n.parent),W.queue("end of").queue(n.parent,!0);break;case"Ctrl-End":r.notify("move").cursor.insAtRightEnd(r.root),W.queue("end of").queue(r.ariaLabel).queue(r.root).queue(r.ariaPostLabel);break;case"Shift-End":for(;n[1];)r.selectRight();break;case"Ctrl-Shift-End":for(;n[1]||n.parent!==r.root;)r.selectRight();break;case"Home":r.notify("move").cursor.insAtLeftEnd(n.parent),W.queue("beginning of").queue(n.parent,!0);break;case"Ctrl-Home":r.notify("move").cursor.insAtLeftEnd(r.root),W.queue("beginning of").queue(r.ariaLabel).queue(r.root).queue(r.ariaPostLabel);break;case"Shift-Home":for(;n[g];)r.selectLeft();break;case"Ctrl-Shift-Home":for(;n[g]||n.parent!==r.root;)r.selectLeft();break;case"Left":r.moveLeft();break;case"Shift-Left":r.selectLeft();break;case"Ctrl-Left":break;case"Right":r.moveRight();break;case"Shift-Right":r.selectRight();break;case"Ctrl-Right":break;case"Up":r.moveUp();break;case"Down":r.moveDown();break;case"Shift-Up":if(n[g])for(;n[g];)r.selectLeft();else r.selectLeft();case"Shift-Down":if(n[1])for(;n[1];)r.selectRight();else r.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":r.ctrlDeleteDir(1);break;case"Shift-Del":case"Del":r.deleteForward();break;case"Meta-A":case"Ctrl-A":for(r.notify("move").cursor.insAtRightEnd(r.root);n[g];)r.selectLeft();break;case"Ctrl-Alt-Up":n.parent.parent&&n.parent.parent instanceof E?W.queue(n.parent.parent):W.queue("nothing above");break;case"Ctrl-Alt-Down":n.parent&&n.parent instanceof E?W.queue(n.parent):W.queue("block is empty");break;case"Ctrl-Alt-Left":n.parent.parent&&n.parent.parent.ends&&n.parent.parent.ends[g]&&n.parent.parent.ends[g]instanceof E?W.queue(n.parent.parent.ends[g]):W.queue("nothing to the left");break;case"Ctrl-Alt-Right":n.parent.parent&&n.parent.parent.ends&&n.parent.parent.ends[1]&&n.parent.parent.ends[1]instanceof E?W.queue(n.parent.parent.ends[1]):W.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":n.selection?W.queue(n.selection.join("mathspeak"," ").trim()+" selected"):W.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":r.ariaPostLabel.length?W.queue(r.ariaPostLabel):W.queue("no answer");break;default:return}W.alert(),t.preventDefault(),r.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){s("overridden or never called on this node")}})),P.open((function(e){function t(e,t){var r=e.notify("upDown").cursor,n=t+"Into",i=t+"OutOf";return r[1][n]?r.insAtLeftEnd(r[1][n]):r[g][n]?r.insAtRightEnd(r[g][n]):r.parent.bubble((function(e){var t=e[i];if(t&&("function"==typeof t&&(t=e[i](r)),t instanceof E&&r.jumpUpDown(e,t),!0!==t))return!1})),e}this.onNotify((function(e){"move"!==e&&"upDown"!==e||this.show().clearSelection()})),e.escapeDir=function(e,t,r){f(e);var n=this.cursor;if(n.parent!==this.root&&r.preventDefault(),n.parent!==this.root)return n.parent.moveOutOf(e,n),W.alert(),this.notify("move")},O.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){f(e);var t=this.cursor,r=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,r):t.parent.moveOutOf(e,t,r),this.notify("move")},e.moveLeft=function(){return this.moveDir(g)},e.moveRight=function(){return this.moveDir(1)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify((function(e){"upDown"!==e&&(this.upDownCache={})})),this.onNotify((function(e){"edit"===e&&this.show().deleteSelection()})),e.deleteDir=function(e){f(e);var t,r,n=this.cursor,i=n[e],o=n.parent.parent;i&&i instanceof E?i.sides?W.queue(i.parent.chToCmd(i.sides[-e].ch).mathspeak({createdLeftOf:n})):i.blocks||"\\text"===i.parent.ctrlSeq||W.queue(i):o&&o instanceof E&&(o.sides?W.queue(o.parent.chToCmd(o.sides[e].ch).mathspeak({createdLeftOf:n})):o.blocks&&o.mathspeakTemplate?o.upInto&&o.downInto?W.queue(o.mathspeakTemplate[1]):(t=o.mathspeakTemplate,r=e===g?t[0]:t[t.length-1],W.queue(r)):W.queue(o));var a=n.selection;return this.notify("edit"),a||(n[e]?n[e].deleteTowards(e,n):n.parent.deleteOutOf(e,n)),n[g].siblingDeleted&&n[g].siblingDeleted(n.options,1),n[1].siblingDeleted&&n[1].siblingDeleted(n.options,g),n.parent.bubble((function(e){e.reflow()})),this},e.ctrlDeleteDir=function(e){f(e);var t,r=this.cursor;return!r[e]||r.selection?this.deleteDir(e):(this.notify("edit"),t=e===g?k(r.parent.ends[g],r[g]):k(r[1],r.parent.ends[1]),W.queue(t),t.remove(),r.insAtDirEnd(e,r.parent),r[g].siblingDeleted&&r[g].siblingDeleted(r.options,1),r[1].siblingDeleted&&r[1].siblingDeleted(r.options,g),r.parent.bubble((function(e){e.reflow()})),this)},e.backspace=function(){return this.deleteDir(g)},e.deleteForward=function(){return this.deleteDir(1)},this.onNotify((function(e){"select"!==e&&this.endSelection()})),e.selectDir=function(e){var t=this.notify("select").cursor,r=t.selection;f(e),t.anticursor||t.startSelection();var n=t[e];n?r&&r.ends[e]===n&&t.anticursor[-e]!==n?n.unselectInto(e,t):n.selectTowards(e,t):t.parent.selectOutOf(e,t),t.clearSelection(),t.select()||t.show(),t.selection&&W.clear().queue(t.selection.join("mathspeak"," ").trim()+" selected")},e.selectLeft=function(){return this.selectDir(g)},e.selectRight=function(){return this.selectDir(1)}}));var $,Y,Q,X,Z,J,ee,te,re,ne,ie,oe,ae,se,le,ce,ue,de=($=G.string,Y=G.regex,Q=G.letter,X=G.digit,Z=G.any,J=G.optWhitespace,ee=G.succeed,te=G.fail,re=Q.map((function(e){return Ee(e)})),ne=X.map((function(e){return we(e)})),ie=Y(/^[^${}\\_^]/).map((function(e){return me(e)})),oe=Y(/^[^\\a-eg-zA-Z]/).or($("\\").then(Y(/^[a-z]+/i).or(Y(/^\s+/).result(" ")).or(Z))).then((function(e){var t=M[e];return t?t(e).parser():te("unknown command: \\"+e)})).or(re).or(ne).or(ie),ae=$("{").then((function(){return le})).skip($("}")),se=J.then(ae.or(oe.map((function(e){var t=ve();return e.adopt(t,0,0),t})))),le=se.many().map(pe).skip(J),ce=$("[").then(se.then((function(e){return"]"!==e.join("latex")?ee(e):te()})).many().map(pe).skip(J)).skip($("]")),(ue=le).block=se,ue.optBlock=ce,ue);function pe(e){for(var t=e[0]||ve(),r=1;r<e.length;r+=1)e[r].children().adopt(t,t.ends[1],0);return t}P.open((function(e,t){e.cleanLatex=function(e){return e.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.exportLatex=function(){return this.cleanLatex(this.root.latex())},e.writeLatex=function(e){var t=this.notify("edit").cursor,r=G.all,n=G.eof,i=de.skip(n).or(r.result(!1)).parse(e);return i&&!i.isEmpty()&&(i.children().adopt(t.parent,t[g],t[1]),i.jQize().insertBefore(t.jQ),t[g]=i.ends[1],i.finalizeInsert(t.options,t),i.ends[1][1].siblingCreated&&i.ends[1][1].siblingCreated(t.options,g),i.ends[g][g].siblingCreated&&i.ends[g][g].siblingCreated(t.options,1),t.parent.bubble((function(e){e.reflow()}))),this},e.classifyLatexForEfficientUpdate=function(e){if("string"==typeof e){var t=e.match(/-?[0-9.]+$/g);return t&&1===t.length?{latex:e,prefix:e.substr(0,e.length-t[0].length),digits:t[0]}:void 0}},e.renderLatexMathEfficiently=function(e){var t,r,n=this.classifyLatexForEfficientUpdate(e);if(!n)return!1;if(t=this.exportLatex(),!(r=this.classifyLatexForEfficientUpdate(t))||r.prefix!==n.prefix)return!1;var i=this.root,o=r.digits,a=n.digits,s=!1,l=!1;"-"===o[0]&&(s=!0,o=o.substr(1)),"-"===a[0]&&(l=!0,a=a.substr(1));for(var c,u,d=this.root.ends[1],p=[],h=o.length-1;0<=h;h--){if(d.ctrlSeq!==o[h])return!1;if(d.parent!==i)return!1;p.unshift(d),d=d[g]}if(s&&!l){var f=d;if("-"!==f.ctrlSeq)return!1;if(f[1]!==p[0])return!1;if(f.parent!==i)return!1;if(f[g]&&f[g].parent!==i)return!1;p[0][g]=f[g],i.ends[g]===f&&(i.ends[g]=p[0]),f[g]&&(f[g][1]=p[0]),f.jQ.remove()}!s&&l&&(c=Te("-"),(u=document.createElement("span")).textContent="-",c.jQ=m(u),p[0][g]&&(p[0][g][1]=c),i.ends[g]===p[0]&&(i.ends[g]=c),c.parent=i,c[g]=p[0][g],c[1]=p[0],(p[0][g]=c).contactWeld(),c.jQ.insertBefore(p[0].jQ));var y=Math.min(o.length,a.length);for(h=0;h<y;h++){var v=a[h];(d=p[h]).ctrlSeq!==v&&(d.ctrlSeq=v,d.jQ[0].textContent=v,d.mathspeakName=v)}if(o.length>a.length)for(d=p[a.length-1],(i.ends[1]=d)[1]=0,h=o.length-1;y<=h;h--)p[h].jQ.remove();if(a.length>o.length){var b=document.createDocumentFragment();for(h=y;h<a.length;h++){var x=document.createElement("span");x.className="dcg-mq-digit",x.textContent=a[h];var w=we(a[h]);w.parent=i,w.jQ=m(x),b.appendChild(x),w[g]=i.ends[1],w[1]=0,w[g][1]=w,i.ends[1]=w}i.jQ[0].appendChild(b)}var S=this.exportLatex();if(S!==e)return console.warn("tried updating latex efficiently but did not work. Attempted: "+e+" but wrote: "+S),!1;this.cursor.resetToEnd(this);var E=i.ends[1];return E.fixDigitGrouping&&E.fixDigitGrouping(this.cursor.options),!0},e.renderLatexMathFromScratch=function(e){var t=this.root,r=this.cursor,n=G.all,i=G.eof,o=de.skip(i).or(n.result(!1)).parse(e);t.ends[g]=t.ends[1]=0,o&&o.children().adopt(t,0,0);var a,s=t.jQ;o?(a=o.join("html"),s.html(a),t.jQize(s.children()),t.finalizeInsert(r.options)):s.empty();var l=this.ariaLabel&&"Math Input"!==this.ariaLabel?this.ariaLabel+": ":"";this.container.attr("aria-label",l+t.mathspeak().trim()),delete r.selection,r.insAtRightEnd(t)},e.renderLatexMath=function(e){this.notify("replace"),this.renderLatexMathEfficiently(e)||this.renderLatexMathFromScratch(e)},e.renderLatexText=function(e){var t=this.root,r=this.cursor;t.jQ.children().slice(1).remove(),t.ends[g]=t.ends[1]=0,delete r.selection,r.show().insAtRightEnd(t);var n=G.regex,i=G.string,o=G.eof,a=G.all,s=i("$").then(de).skip(i("$").or(o)).map((function(e){var t=RootMathCommand(r);t.createBlocks();var n=t.ends[g];return e.children().adopt(n,0,0),t})),l=i("\\$").result("$").or(n(/^[^$]/)).map(me),c=s.or(l).many().skip(o).or(a.result(!1)).parse(e);if(c){for(var u=0;u<c.length;u+=1)c[u].adopt(t,t.ends[1],0);t.jQize().appendTo(t.jQ),t.finalizeInsert(r.options)}}})),P.open((function(t){var r;A.p.ignoreNextMousedown=i,this.onNotify((function(e){"edit"!==e&&"replace"!==e||r&&r.cursor===this&&r.cb()})),t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",(function(n){var o,a,s=m(n.target).closest(".dcg-mq-root-block"),l=(E.getNodeOfElement(s[0])||E.getNodeOfElement(t[0])).controller,c=l.cursor,u=c.blink,d=l.textareaSpan,p=l.textarea;function h(e){o=m(e.target)}function g(t){c.anticursor||c.startSelection(),l.seek(o,t.pageX,t.pageY).cursor.select(),c.selection&&W.clear().queue(c.selection.join("mathspeak")+" selected").alert(),o=e}function f(t){s.unbind("mousemove",h),m(t.target.ownerDocument).unbind("mousemove",g).unbind("mouseup",v),r=e}function y(){l.editable?(c.show(),W.queue(c.parent).alert()):d.detach()}function v(e){c.blink=u,c.selection||y(),f(e)}n.preventDefault(),n.target.unselectable=!0,c.options.ignoreNextMousedown(n)||(c.options.ignoreNextMousedown=i,r={cursor:c,cb:function(){a=!0,c.blink=u,c.clearSelection(),y(),f(n)}},l.blurred&&(l.editable||s.prepend(d),p[0].focus(),a)||(c.blink=i,l.seek(m(n.target),n.pageX,n.pageY).cursor.startSelection(),s.mousemove(h),m(n.target.ownerDocument).mousemove(g).mouseup(v)))}))}})),P.open((function(e){e.seek=function(e,t,r){for(var n,i=this.notify("select").cursor,o=e&&e[0];o&&!(n=E.getNodeOfElement(o));)o=o.parentElement;return n=n||this.root,i.clearSelection().show(),n.seek(t,i),this.scrollHoriz(),this}})),P.open((function(e){e.setOverflowClasses=function(){var e,t,r,n=this.root.jQ[0],i=!1,o=!1;this.blurred||(e=n.getBoundingClientRect().width,t=n.scrollWidth,i=e+(r=n.scrollLeft)<t,o=0<r),n.classList.contains("dcg-mq-editing-overflow-right")!==i&&n.classList.toggle("dcg-mq-editing-overflow-right"),n.classList.contains("dcg-mq-editing-overflow-left")!==o&&n.classList.toggle("dcg-mq-editing-overflow-left")},e.scrollHoriz=function(){var e=this.cursor,t=e.selection,r=this.root.jQ[0].getBoundingClientRect();if(e.jQ[0]||t){if(t){var n=t.jQ[0].getBoundingClientRect(),i=n.left-(r.left+20),o=n.right-(r.right-20);if(t.ends[g]===e[1])if(i<0)var a=i;else{if(!(0<o))return;a=n.left-o<r.left+20?i:o}else if(0<o)a=o;else{if(!(i<0))return;a=n.right-i>r.right-20?o:i}}else{var s=e.jQ[0].getBoundingClientRect().left;if(s>r.right-20)a=s-(r.right-20);else{if(!(s<r.left+20))return;a=s-(r.left+20)}}var l=this.root.jQ[0];a<0&&0===l.scrollLeft||0<a&&l.scrollWidth<=l.scrollLeft+r.width||this.root.jQ.stop().animate({scrollLeft:"+="+a},100,function(){this.setOverflowClasses()}.bind(this))}else this.root.jQ.stop().animate({scrollLeft:0},100,function(){this.setOverflowClasses()}.bind(this))}})),P.open((function(t){A.p.substituteTextarea=function(){return m("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]},t.createTextarea=function(){var e=this.textareaSpan=m('<span class="dcg-mq-textarea"></span>'),t=this.options.substituteTextarea();if(!t.nodeType)throw"substituteTextarea() must return a DOM element, got "+t;t=this.textarea=m(t).appendTo(e);var r=this;r.cursor.selectionChanged=function(){r.selectionChanged()}},t.selectionChanged=function(){var t=this;t.textareaSelectionTimeout===e&&(t.textareaSelectionTimeout=setTimeout((function(){t.setTextareaSelection()})))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=e;var t="";this.cursor.selection&&(t=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(t="$"+t+"$")),this.selectFn(t)},t.staticMathTextareaEvents=function(){var e=this,t=e.root,r=e.cursor,n=e.textarea,i=e.textareaSpan;function o(){i.detach(),e.blurred=!0}this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$'+e.exportLatex()+"$</span>"),e.blurred=!0,n.bind("cut paste",!1),e.options.disableCopyPaste?n.bind("copy",!1):n.bind("copy",(function(){e.setTextareaSelection()})),n.focus((function(){e.blurred=!1})).blur((function(){r.selection&&r.selection.clear(),setTimeout(o)})),e.selectFn=function(e){n.val(e),e&&n.select()};var a=e&&"Math Input"!==e.ariaLabel?e.ariaLabel+": ":"";e.container.attr("aria-label",a+t.mathspeak().trim());var s=navigator.userAgent||navigator.vendor||window.opera,l=(/iPad|iPhone|iPod/.test(s)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&!window.Stream;-1!==navigator.appVersion.indexOf("Mac")&&!l||e.container.attr("role","math")},A.p.substituteKeyboardEvents=K,t.editablesTextareaEvents=function(){var e=this.textarea,t=this.textareaSpan,r=this.options.substituteKeyboardEvents(e,this);this.selectFn=function(e){r.select(e)},this.container.prepend(t),this.focusBlurEvents()},t.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.write(t,e),this.scrollHoriz()},t.cut=function(){var e=this,t=e.cursor;t.selection&&setTimeout((function(){e.notify("edit"),t.parent.bubble((function(e){e.reflow()})),e.options&&e.options.onCut&&e.options.onCut()}))},t.copy=function(){this.setTextareaSelection()},t.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()}}));var he=u(E,(function(e,t){e.finalizeInsert=function(e,t){var r=this;r.postOrder((function(t){t.finalizeTree(e)})),r.postOrder((function(e){e.contactWeld(t)})),r.postOrder((function(e){e.blur()})),r.postOrder((function(e){e.reflow()})),r[1].siblingCreated&&r[1].siblingCreated(e,g),r[g].siblingCreated&&r[g].siblingCreated(e,1),r.bubble((function(e){e.reflow()}))}})),ge=u(he,(function(e,t){e.init=function(e,r,n){var i=this;t.init.call(i),i.ctrlSeq||(i.ctrlSeq=e),r&&(i.htmlTemplate=r),n&&(i.textTemplate=n)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,(function(e,t){return e&&t.isEmpty()}))},e.parser=function(){var e=de.block,t=this;return e.times(t.numBlocks()).map((function(e){t.blocks=e;for(var r=0;r<e.length;r+=1)e[r].adopt(t,t.ends[1],0);return t}))},e.createLeftOf=function(e){var r=this,n=r.replacedFragment;r.createBlocks(),t.createLeftOf.call(r,e),n&&(n.adopt(r.ends[g],0,0),n.jQ.appendTo(r.ends[g].jQ)),r.finalizeInsert(e.options),r.placeCursor(e)},e.createBlocks=function(){for(var e=this.numBlocks(),t=this.blocks=Array(e),r=0;r<e;r+=1)(t[r]=ve()).adopt(this,this.ends[1],0)},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[g],(function(e,t){return e.isEmpty()?e:t})))},e.moveTowards=function(e,t,r){var n=r&&this[r+"Into"];t.insAtDirEnd(-e,n||this.ends[-e]),W.queueDirEndOf(-e).queue(t.parent,!0)},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return L(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function r(e){var t={};return t[g]=e.jQ.offset().left,t[1]=t[g]+e.jQ.outerWidth(),t}var n=this,i=r(n);if(e<i[g])return t.insLeftOf(n);if(e>i[1])return t.insRightOf(n);var o=i[g];n.eachChild((function(a){var s=r(a);return e<s[g]?(e-o<s[g]-e?a[g]?t.insAtRightEnd(a[g]):t.insLeftOf(n):t.insAtLeftEnd(a),!1):e>s[1]?void(a[1]?o=s[1]:i[1]-e<e-s[1]?t.insRightOf(n):t.insAtRightEnd(a)):(a.seek(e,t),!1)}))},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e=this.blocks,t=" mathquill-command-id="+this.id,r=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);s("no unmatched angle brackets",r.join("")===this.htmlTemplate);for(var n=0,i=r[0];i;i=r[n+=1])if("/>"===i.slice(-2))r[n]=i.slice(0,-2)+t+' aria-hidden="true"/>';else if("<"===i.charAt(0)){s("not an unmatched top-level close tag","/"!==i.charAt(1)),r[n]=i.slice(0,-1)+t+' aria-hidden="true">';for(var o=1;s("no missing close tags",i=r[n+=1]),"</"===i.slice(0,2)?--o:"<"===i.charAt(0)&&"/>"!==i.slice(-2)&&(o+=1),0<o;);}return r.join("").replace(/>&(\d+)/g,(function(t,r){return" mathquill-block-id="+e[r].id+' aria-hidden="true">'+e[r].join("html")}))},e.latex=function(){return this.foldChildren(this.ctrlSeq,(function(e,t){return e+"{"+(t.latex()||" ")+"}"}))},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],(function(r,n){t+=1;var i=n.text();return r&&"("===e.textTemplate[t]&&"("===i[0]&&")"===i.slice(-1)?r+i.slice(1,-1)+e.textTemplate[t]:r+i+(e.textTemplate[t]||"")}))},e.mathspeakTemplate=[],e.mathspeak=function(){var e=this,t=0;return e.foldChildren(e.mathspeakTemplate[t]||"Start"+e.ctrlSeq+" ",(function(r,n){return t+=1,r+" "+n.mathspeak()+" "+(e.mathspeakTemplate[t]+" "||"End"+e.ctrlSeq+" ")}))}})),fe=u(ge,(function(e,t){e.init=function(e,r,n,i){!n&&e&&(n=e.replace(/^\\/,"")),this.mathspeakName=i||n,t.init.call(this,e,r,[n])},e.parser=function(){return G.succeed(this)},e.numBlocks=function(){return 0},e.replaces=function(e){e.remove()},e.createBlocks=i,e.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e],W.queue(this)},e.deleteTowards=function(e,t){t[e]=this.remove()[e]},e.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},e.latex=function(){return this.ctrlSeq},e.text=function(){return this.textTemplate.join("")},e.mathspeak=function(){return this.mathspeakName},e.placeCursor=i,e.isEmpty=function(){return!0}})),me=u(fe,(function(t,r){t.init=function(t,n,i){r.init.call(this,t,"<span>"+(n||t)+"</span>",e,i)}})),ye=u(fe,(function(e,t){e.init=function(e,r,n,i){t.init.call(this,e,'<span class="dcg-mq-binary-operator">'+r+"</span>",n,i)}})),ve=u(he,(function(e,t){e.join=function(e){return this.foldChildren("",(function(t,r){return t+r[e]()}))},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[g]===this.ends[1]&&0!==this.ends[g]?this.ends[g].text():this.join("text")},e.mathspeak=function(){var e="",t={};return this.controller&&(t=this.controller.options.autoOperatorNames),this.foldChildren([],(function(r,n){var i,o,a;return n.isPartOfOperator?e+=n.mathspeak():(""!==e&&(t!=={}&&0<t._maxLength&&"string"==typeof(i=t[e.toLowerCase()])&&(e=i),r.push(e+" "),e=""),o=n.mathspeak(),a=n.ctrlSeq,isNaN(a)&&"."!==a&&(o=" "+o+" "),r.push(o)),r})).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,(function(e,t,r){return t+r.split("").join(" ").trim()}))},e.ariaLabel="block",e.keystroke=function(e,r,n){return!n.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(r.preventDefault(),void n.escapeDir("Shift-Spacebar"===e?g:1,e,r))},e.moveOutOf=function(e,t,r){r&&this.parent[r+"Into"]||!this[e]?(t.insDirOf(e,this.parent),W.queueDirOf(e).queue(this.parent)):(t.insAtDirEnd(-e,this[e]),W.queueDirEndOf(-e).queue(t.parent,!0))},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var r=this.ends[1];if(!r||r.jQ.offset().left+r.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[g].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<r.jQ.offset().left;)r=r[g];return r.seek(e,t)},e.chToCmd=function(e,t){var r;return e.match(/^[a-eg-zA-Z]$/)?Ee(e):/^\d$/.test(e)?we(e):t&&t.typingSlashWritesDivisionSymbol&&"/"===e?M["Ã·"](e):t&&t.typingAsteriskWritesTimesSymbol&&"*"===e?M["Ã"](e):t&&t.typingPercentWritesPercentOf&&"%"===e?M.percentof(e):((r=I[e]||M[e])?r:me)(e)},e.write=function(e,t){var r=this.chToCmd(t,e.options);e.selection&&r.replaces(e.replaceSelection()),r.createLeftOf(e.show()),"/"===t?W.alert("over"):W.alert(r.mathspeak({createdLeftOf:e}))},e.focus=function(){return this.jQ.addClass("dcg-mq-hasCursor"),this.jQ.removeClass("dcg-mq-empty"),this},e.blur=function(){return this.jQ.removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.jQ.addClass("dcg-mq-empty"),this.isEmptyParens()?this.jQ.addClass("dcg-mq-empty-parens"):this.isEmptySquareBrackets()&&this.jQ.addClass("dcg-mq-empty-square-brackets")),this}}));T.StaticMath=function(e){return u(e.AbstractMathQuill,(function(t,r){this.RootBlock=ve,t.__mathquillify=function(e,t){return this.config(e),r.__mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){r.init.apply(this,arguments);var t=this.innerFields=[];this.__controller.root.postOrder((function(r){r.registerInnerField(t,e.MathField)}))},t.latex=function(){var t,n=r.latex.apply(this,arguments);return 0<arguments.length&&(t=this.innerFields=[],this.__controller.root.postOrder((function(r){r.registerInnerField(t,e.MathField)}))),n},t.setAriaLabel=function(e){this.__controller.ariaLabel="string"==typeof e?e:"";var t="Math Input"!==this.__controller.ariaLabel?this.__controller.ariaLabel+": ":"";return this.__controller.container.attr("aria-label",t+this.__controller.root.mathspeak().trim()),this},t.getAriaLabel=function(){return this.__controller.ariaLabel||""}}))};var be=u(ve,z);T.MathField=function(e){return u(e.EditableField,(function(e,t){this.RootBlock=be,e.__mathquillify=function(e,r){return this.config(e),1<r&&(this.__controller.root.reflow=i),t.__mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this}}))};var xe=u(fe,(function(t,r){t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(e,t){t!==g&&this[1]instanceof xe||this.fixDigitGrouping(e)},t.fixDigitGrouping=function(e){if(e.enableDigitGrouping){var t=this,r=this,n=0,i=[],o="\\ ",a=t;do{if(/^[0-9]$/.test(a.ctrlSeq))t=a;else if(a.ctrlSeq===o)t=a,n+=1;else{if("."!==a.ctrlSeq)break;t=a,i.push(a)}}while(a=t[g]);for(;a=r[1];)if(/^[0-9]$/.test(a.ctrlSeq))r=a;else if(a.ctrlSeq===o)r=a,n+=1;else{if("."!==a.ctrlSeq)break;r=a,i.push(a)}for(;r!==t&&t.ctrlSeq===o;)t=t[1],--n;for(;r!==t&&r.ctrlSeq===o;)r=r[g],--n;t===r&&t.ctrlSeq===o||(0<n||1<i.length?this.removeGroupingBetween(t,r):i[0]?(i[0]!==t&&this.addGroupingBetween(i[0][g],t),i[0]!==r&&this.removeGroupingBetween(i[0][1],r)):this.addGroupingBetween(r,t))}},t.removeGroupingBetween=function(t,r){var n=t;do{if(n.setGroupingClass(e),n===r)break}while(n=n[1])},t.addGroupingBetween=function(t,r){var n=t,i=0,o=0;for(n=t;n&&(o+=1,n!==r);)n=n[g];var a=o%3;for(0===a&&(a=3),n=t;n;){i+=1;var s=e;if(4<=o&&(i===o?s="dcg-mq-group-leading-"+a:i%3==0&&i!==o&&(s="dcg-mq-group-start"),s=s||"dcg-mq-group-other"),n.setGroupingClass(s),n===r)break;n=n[g]}},t.setGroupingClass=function(e){this._groupingClass!==e&&(this._groupingClass&&this.jQ.removeClass(this._groupingClass),e&&this.jQ.addClass(e),this._groupingClass=e)}})),we=u(xe,(function(t,r){t.init=function(t,n,i){r.init.call(this,t,'<span class="dcg-mq-digit">'+(n||t)+"</span>",e,i)},t.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[g]instanceof Se&&!1!==e[g].isItalic||e[g]instanceof je&&e[g][g]instanceof Se&&!1!==e[g][g].isItalic)?(M._().createLeftOf(e),r.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):r.createLeftOf.call(this,e)},t.mathspeak=function(e){if(e&&e.createdLeftOf){var t=e.createdLeftOf;if(t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[g]instanceof Se&&!1!==t[g].isItalic||t[g]instanceof je&&t[g][g]instanceof Se&&!1!==t[g][g].isItalic))return"Subscript "+r.mathspeak.call(this)+" Baseline"}return r.mathspeak.apply(this,arguments)}})),Se=u(fe,(function(e,t){e.init=function(e,r){t.init.call(this,e,"<var>"+(r||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return this.isPartOfOperator?"\\"==e[0]?e=e.slice(1,e.length):" "==e[e.length-1]&&(e=e.slice(0,-1)):(!this[g]||this[g]instanceof Se||this[g]instanceof ye||"\\ "===this[g].ctrlSeq||(e="*"+e),!this[1]||this[1]instanceof ye||this[1]instanceof je||(e+="*")),e},e.mathspeak=function(){var e=this.ctrlSeq;return this.isPartOfOperator||1!==e.length?t.mathspeak.call(this):'"'+e+'"'}}));A.p.autoCommands={_maxLength:0},O.autoCommands=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),r={},i=0,o=0;o<t.length;o+=1){var a=t[o];if(a.length<2)throw'autocommand "'+a+'" not minimum length of 2';if(M[a]===Ie)throw'"'+a+'" is a built-in operator name';r[a]=1,i=n(i,a.length)}return r._maxLength=i,r},A.p.autoParenthesizedFunctions={_maxLength:0},O.autoParenthesizedFunctions=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),r={},i=0,o=0;o<t.length;o+=1){var a=t[o];if(a.length<2)throw'autocommand "'+a+'" not minimum length of 2';r[a]=1,i=n(i,a.length)}return r._maxLength=i,r};var Ee=u(Se,(function(e,t){function n(e){return!e||"."===e.ctrlSeq||e instanceof ye||e instanceof ze}e.init=function(e){return t.init.call(this,this.letter=e)},e.checkAutoCmds=function(e){var t=e.options.autoCommands,r=t._maxLength;if(0<r){for(var n="",i=this,o=0;i instanceof Ee&&i.ctrlSeq===i.letter&&o<r;)n=i.letter+n,i=i[g],o+=1;for(;n.length;){if(t.hasOwnProperty(n)){for(o=1,i=this;o<n.length;o+=1,i=i[g]);return k(i,this).remove(),e[g]=i[g],M[n](n).createLeftOf(e)}n=n.slice(1)}}},e.autoParenthesize=function(e){var t=e.parent.ends[1];if(!(t&&t instanceof Ye&&"\\left("===t.ctrlSeq||this.isParentSimpleSubscript())){for(var r="",n=this,i=0,o=e.options.autoParenthesizedFunctions,a=o._maxLength,s=e.options.autoOperatorNames;n instanceof Ee&&i<a;)r=n.letter+r,n=n[g],i+=1;for(;r.length;){if(o.hasOwnProperty(r)&&s.hasOwnProperty(r))return e.parent.write(e,"(");r=r.slice(1)}}},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),this.checkAutoCmds(e),this.autoParenthesize(e)},e.italicize=function(e){return this.isItalic=e,this.isPartOfOperator=!e,this.jQ.toggleClass("dcg-mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==g&&this[1]instanceof Ee||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t=e.autoOperatorNames;if(0!==t._maxLength&&!this.isParentSimpleSubscript()){for(var i=this.letter,o=this[g];o instanceof Ee;o=o[g])i=o.letter+i;for(var a=this[1];a instanceof Ee;a=a[1])i+=a.letter;k(o[1]||this.parent.ends[g],a[g]||this.parent.ends[1]).each((function(e){e.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),e.ctrlSeq=e.letter}));e:for(var s=0,l=o[1]||this.parent.ends[g];s<i.length;s+=1,l=l[1])for(var c=r(t._maxLength,i.length-s);0<c;--c){var u=i.slice(s,s+c);if(t.hasOwnProperty(u)){for(var d=0,p=l;d<c;d+=1,p=p[1]){p.italicize(!1);var h=p}var f,m=_e.hasOwnProperty(u);l.ctrlSeq=(m?"\\":"\\operatorname{")+l.ctrlSeq,h.ctrlSeq+=m?" ":"}",Me.hasOwnProperty(u)&&h[g][g][g].jQ.addClass("dcg-mq-last"),n(l[g])||l.jQ.addClass("dcg-mq-first"),n(h[1])||(h[1]instanceof je?((f=h[1]).siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("dcg-mq-after-operator-name",!(f[1]instanceof Ye))})():h.jQ.toggleClass("dcg-mq-last",!(h[1]instanceof Ye))),s+=c-1,l=h;continue e}}}}})),_e={},ke=A.p.autoOperatorNames={_maxLength:9},Me={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var e="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),t=0;t<e.length;t+=1)_e[e[t]]=ke[e[t]]=1;var r="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" ");for(t=0;t<r.length;t+=1)_e[r[t]]=1;var n="sin cos tan sec cosec csc cotan cot ctg".split(" ");for(t=0;t<n.length;t+=1)ke[n[t]]=ke["arc"+n[t]]=ke[n[t]+"h"]=ke["ar"+n[t]+"h"]=ke["arc"+n[t]+"h"]=1;var i="gcf hcf lcm proj span".split(" ");for(t=0;t<i.length;t+=1)ke[i[t]]=1}(),O.autoOperatorNames=function(e){if("string"!=typeof e)throw'"'+e+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of letters or "|"';for(var t=e.split(" "),r={},i=0,o=0;o<t.length;o+=1){var a=t[o];if(a.length<2)throw'"'+a+'" not minimum length of 2';if(a.indexOf("|")<0)r[a]=a,i=n(i,a.length);else{var s=a.split("|");if(2<s.length)throw'"'+a+'" has more than 1 mathspeak delimiter';if(s[0].length<2)throw'"'+a[0]+'" not minimum length of 2';r[s[0]]=s[1].replace(/-/g," "),i=n(i,s[0].length)}}return r._maxLength=i,r};var Ie=u(fe,(function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){for(var t=this.ctrlSeq,r=0;r<t.length;r+=1)Ee(t.charAt(r)).createLeftOf(e)},e.parser=function(){for(var e=this.ctrlSeq,t=ve(),r=0;r<e.length;r+=1)Ee(e.charAt(r)).adopt(t,t.ends[1],0);return G.succeed(t.children())}}));for(var Ce in ke)ke.hasOwnProperty(Ce)&&(M[Ce]=Ie);M.operatorname=u(ge,(function(e){e.createLeftOf=i,e.numBlocks=function(){return 1},e.parser=function(){return de.block.map((function(e){var t=!0,r="",n=e.children();return n.each((function(e){e instanceof Ee?r+=e.letter:t=!1})),t&&"ans"===r?M[r](r):n}))}})),M.f=u(Ee,(function(e,t){e.init=function(){fe.p.init.call(this,this.letter="f",'<var class="dcg-mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("dcg-mq-f",e),t.italicize.apply(this,arguments)}})),M[" "]=M.space=u(xe,(function(e,t){e.init=function(){t.init.call(this,"\\ ","<span>&nbsp;</span>"," ")}})),M["."]=u(xe,(function(e,t){e.init=function(){t.init.call(this,".",'<span class="dcg-mq-digit">.</span>',".")}})),M["'"]=M.prime=a(me,"'","&prime;","prime"),M["â³"]=M.dprime=a(me,"â³","&Prime;","double prime"),M.backslash=a(me,"\\backslash ","\\","backslash"),I["\\"]||(I["\\"]=M.backslash),M.$=a(me,"\\$","$","dollar"),M.square=a(me,"\\square ","â¡","square"),M.mid=a(me,"\\mid ","â£","mid");var Le=u(fe,(function(e,t){e.init=function(e,r){t.init.call(this,e,'<span class="dcg-mq-nonSymbola">'+(r||e)+"</span>")}}));M["@"]=Le,M["&"]=a(Le,"\\&","&amp;","and"),M["%"]=u(Le,(function(e,t){e.init=function(){t.init.call(this,"\\%","%","percent")},e.parser=function(){var e=G.optWhitespace,r=G.string;return e.then(r("\\operatorname{of}").map((function(){return M.percentof()}))).or(t.parser.call(this))}})),M["â¥"]=M.parallel=a(me,"\\parallel ","&#x2225;","parallel"),M["â¦"]=M.nparallel=a(me,"\\nparallel ","&#x2226;","not parallel"),M["â"]=M.perp=a(me,"\\perp ","&#x27C2;","perpendicular"),M.alpha=M.beta=M.gamma=M.delta=M.zeta=M.eta=M.theta=M.iota=M.kappa=M.mu=M.nu=M.xi=M.rho=M.sigma=M.tau=M.chi=M.psi=M.omega=u(Se,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}})),M.phi=a(Se,"\\phi ","&#981;","phi"),M.phiv=M.varphi=a(Se,"\\varphi ","&phi;","phi"),M.epsilon=a(Se,"\\epsilon ","&#1013;","epsilon"),M.epsiv=M.varepsilon=a(Se,"\\varepsilon ","&epsilon;","epsilon"),M.piv=M.varpi=a(Se,"\\varpi ","&piv;","piv"),M.sigmaf=M.sigmav=M.varsigma=a(Se,"\\varsigma ","&sigmaf;","sigma"),M.thetav=M.vartheta=M.thetasym=a(Se,"\\vartheta ","&thetasym;","theta"),M.upsilon=M.upsi=a(Se,"\\upsilon ","&upsilon;","upsilon"),M.gammad=M.Gammad=M.digamma=a(Se,"\\digamma ","&#989;","gamma"),M.kappav=M.varkappa=a(Se,"\\varkappa ","&#1008;","kappa"),M.rhov=M.varrho=a(Se,"\\varrho ","&#1009;","rho"),M.pi=M["Ï"]=a(Le,"\\pi ","&pi;","pi"),M.lambda=a(Le,"\\lambda ","&lambda;","lambda"),M.Upsilon=M.Upsi=M.upsih=M.Upsih=a(fe,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>',"capital upsilon"),M.Gamma=M.Delta=M.Theta=M.Lambda=M.Xi=M.Pi=M.Sigma=M.Phi=M.Psi=M.Omega=M.forall=u(me,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}}));var Pe=u(ge,(function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=de.parse(this.latex);t.children().adopt(e.parent,e[g],e[1]),e[g]=t.ends[1],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[1][1].siblingCreated&&t.ends[1][1].siblingCreated(e.options,g),t.ends[g][g].siblingCreated&&t.ends[g][g].siblingCreated(e.options,1),e.parent.bubble((function(e){e.reflow()}))},e.mathspeak=function(){return de.parse(this.latex).mathspeak()},e.parser=function(){var e=de.parse(this.latex).children();return G.succeed(e)}}));M["â°"]=a(Pe,"^0"),M["Â¹"]=a(Pe,"^1"),M["Â²"]=a(Pe,"^2"),M["Â³"]=a(Pe,"^3"),M["â´"]=a(Pe,"^4"),M["âµ"]=a(Pe,"^5"),M["â¶"]=a(Pe,"^6"),M["â·"]=a(Pe,"^7"),M["â¸"]=a(Pe,"^8"),M["â¹"]=a(Pe,"^9"),M["Â¼"]=a(Pe,"\\frac14"),M["Â½"]=a(Pe,"\\frac12"),M["Â¾"]=a(Pe,"\\frac34"),M["â"]=a(Pe,"\\sqrt{}");var Te=u(ye,(function(e){e.init=me.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){if(1!==t)return this.jQ[0].className=function e(t){return t[g]?t[g]instanceof ye||/^(\\ )|[,;:\(\[]$/.test(t[g].ctrlSeq)?"":"dcg-mq-binary-operator":t.parent&&t.parent.parent&&t.parent.parent.isStyleBlock()?e(t.parent.parent):""}(this),this}}));M["+"]=a(Te,"+","+","plus"),M["â"]=M["â"]=M["â"]=M["-"]=a(Te,"-","&minus;","minus"),M["Â±"]=M.pm=M.plusmn=M.plusminus=a(Te,"\\pm ","&plusmn;","plus-or-minus"),M.mp=M.mnplus=M.minusplus=a(Te,"\\mp ","&#8723;","minus-or-plus"),I["*"]=M.sdot=M.cdot=a(ye,"\\cdot ","&middot;","*","times");var Ae=u(ye,(function(e,t){e.init=function(e,r){this.data=e;var n=(this.strict=r)?"Strict":"";t.init.call(this,e["ctrlSeq"+n],e["html"+n],e["text"+n],e["mathspeak"+n])},e.swap=function(e){var t=(this.strict=e)?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]],this.mathspeakName=this.data["mathspeak"+t]},e.deleteTowards=function(e,r){if(e===g&&!this.strict)return this.swap(!0),void this.bubble((function(e){e.reflow()}));t.deleteTowards.apply(this,arguments)}})),Oe={ctrlSeq:"\\le ",html:"&le;",text:"â¤",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},De={ctrlSeq:"\\ge ",html:"&ge;",text:"â¥",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"};M["<"]=M.lt=a(Ae,Oe,!0),M[">"]=M.gt=a(Ae,De,!0),M["â¤"]=M.le=M.leq=a(Ae,Oe,!1),M["â¥"]=M.ge=M.geq=a(Ae,De,!1),M.infty=M.infin=M.infinity=a(me,"\\infty ","&infin;","infinity"),M["â "]=M.ne=M.neq=a(ye,"\\ne ","&ne;","not equal");var Fe=u(ye,(function(e,t){e.init=function(){t.init.call(this,"=","=","=","equals")},e.createLeftOf=function(e){if(e[g]instanceof Ae&&e[g].strict)return e[g].swap(!1),void e[g].bubble((function(e){e.reflow()}));t.createLeftOf.apply(this,arguments)}}));M["="]=Fe,M["Ã"]=M.times=a(ye,"\\times ","&times;","[x]","times"),M["Ã·"]=M.div=M.divide=M.divides=a(ye,"\\div ","&divide;","[/]","over");var qe=u(ye,(function(e,t){e.init=function(){t.init.call(this,"\\sim ","~","~","tilde")},e.createLeftOf=function(e){if(e[g]instanceof qe){var r=e[g];return e[g]=r[g],r.remove(),Ne().createLeftOf(e),void e[g].bubble((function(e){e.reflow()}))}t.createLeftOf.apply(this,arguments)}})),Ne=u(ye,(function(e,t){e.init=function(){t.init.call(this,"\\approx ","&approx;","â","approximately equal")},e.deleteTowards=function(e,r){if(e===g){var n=r[g];return k(n,this).remove(),r[g]=n[g],qe().createLeftOf(r),void r[g].bubble((function(e){e.reflow()}))}t.deleteTowards.apply(this,arguments)}}));I["~"]=M.sim=qe,M["â"]=M.approx=Ne;var Re={sqrt:{html:'<svg preserveAspectRatio="none" viewBox="0 0 32 54"><path d="M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33" /></svg>'},"|":{width:".4em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M4.4 0 L4.4 54 L5.6 54 L5.6 0" /></svg>'},"[":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1" /></svg>'},"]":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1" /></svg>'},"(":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0" /></svg>'},")":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0" /></svg>'},"{":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0" /></svg>'},"}":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0" /></svg>'},"&#8741;":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0" /></svg>'},"&lang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0" /></svg>'},"&rang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0" /></svg>'}},Be=u(ge,(function(e,t){e.init=function(r,n,i,o){t.init.call(this,r,"<"+n+" "+i+">&0</"+n+">"),e.ariaLabel=o||r.replace(/^\\/,""),e.mathspeakTemplate=["Start"+e.ariaLabel+",","End"+e.ariaLabel]}}));M.mathrm=a(Be,"\\mathrm","span",'class="dcg-mq-roman dcg-mq-font"',"Roman Font"),M.mathit=a(Be,"\\mathit","i",'class="dcg-mq-font"',"Italic Font"),M.mathbf=a(Be,"\\mathbf","b",'class="dcg-mq-font"',"Bold Font"),M.mathsf=a(Be,"\\mathsf","span",'class="dcg-mq-sans-serif dcg-mq-font"',"Serif Font"),M.mathtt=a(Be,"\\mathtt","span",'class="dcg-mq-monospace dcg-mq-font"',"Math Text"),M.underline=a(Be,"\\underline","span",'class="dcg-mq-non-leaf dcg-mq-underline"',"Underline"),M.overline=M.bar=a(Be,"\\overline","span",'class="dcg-mq-non-leaf dcg-mq-overline"',"Overline"),M.overrightarrow=a(Be,"\\overrightarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"',"Over Right Arrow"),M.overleftarrow=a(Be,"\\overleftarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"',"Over Left Arrow"),M.overleftrightarrow=a(Be,"\\overleftrightarrow ","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"',"Over Left and Right Arrow"),M.overarc=a(Be,"\\overarc","span",'class="dcg-mq-non-leaf dcg-mq-overarc"',"Over Arc"),M.textcolor=u(ge,(function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="dcg-mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,r=G.optWhitespace,n=G.string,i=G.regex;return r.then(n("{")).then(i(/^[#\w\s.,()%-]*/)).skip(n("}")).then((function(r){return e.setColor(r),t.parser.call(e)}))},e.isStyleBlock=function(){return!0}})),M.class=u(ge,(function(e,t){e.parser=function(){var e=this,r=G.string,n=G.regex;return G.optWhitespace.then(r("{")).then(n(/^[-\w\s\\\xA0-\xFF]*/)).skip(r("}")).then((function(r){return e.cls=r||"",e.htmlTemplate='<span class="dcg-mq-class '+r+'">&0</span>',t.parser.call(e)}))},e.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},e.isStyleBlock=function(){return!0}}));var je=u(ge,(function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){if(this.replacedFragment||e[g]||!e.options.supSubsRequireOperand)return t.createLeftOf.apply(this,arguments)},e.contactWeld=function(e){for(var t=g;t;t=t===g&&1)if(this[t]instanceof je){for(var r="sub";r;r="sub"===r&&"sup"){var n,i,o=this[r],a=this[t][r];o&&(a?o.isEmpty()?i=y(a,0,a.ends[g]):(o.jQ.children().insAtDirEnd(-t,a.jQ),n=o.children().disown(),i=y(a,n.ends[1],a.ends[g]),t===g?n.adopt(a,a.ends[1],0):n.adopt(a,0,a.ends[g])):this[t].addBlock(o.disown()),this.placeCursor=function(e,r){return function(n){n.insAtDirEnd(-t,e||r)}}(a,o))}this.remove(),e&&e[g]===this&&(1===t&&i?i[g]?e.insRightOf(i[g]):e.insAtLeftEnd(i.parent):e.insRightOf(this[t]));break}},A.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[g].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var r=this.chToCmd(t,e.options);return r instanceof fe?e.deleteSelection():e.clearSelection().insRightOf(this.parent),r.createLeftOf(e.show()),void W.queue("Baseline").alert(r.mathspeak({createdLeftOf:e}))}e[g]&&!e[1]&&!e.selection&&-1<e.options.charsThatBreakOutOfSupSub.indexOf(t)&&(e.insRightOf(this.parent),W.queue("Baseline")),ve.p.write.apply(this,arguments)}},e.moveTowards=function(e,r,n){r.options.autoSubscriptNumerals&&!this.sup?r.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,r){var n;r.options.autoSubscriptNumerals&&this.sub?((n=this.sub.ends[-e])instanceof fe?n.remove():n&&n.deleteTowards(e,r.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(g,r.insAtLeftEnd(this.sub)),this.sup&&r.insDirOf(-e,this))):t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var r=t&&t.latex();return t?e+"{"+(r||" ")+"}":""}return e("_",this.sub)+e("^",this.sup)},e.addBlock=function(e){"sub"===this.supsub?((this.sup=this.upInto=this.sub.upOutOf=e).adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=m('<span class="dcg-mq-sup"/>').append(e.jQ.children()).prependTo(this.jQ),E.linkElementByBlockNode(e.jQ[0],e)):((this.sub=this.downInto=this.sup.downOutOf=e).adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=m('<span class="dcg-mq-sub"></span>').append(e.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")),E.linkElementByBlockNode(e.jQ[0],e),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;t<2;t+=1)!function(e,t,r,n){e[t].deleteOutOf=function(i,o){var a;o.insDirOf(this[i]?-i:i,this.parent),this.isEmpty()||(a=this.ends[i],this.children().disown().withDirAdopt(i,o.parent,o[i],o[-i]).jQ.insDirOf(-i,o.jQ),o[-i]=a),e.supsub=r,delete e[t],delete e[n+"Into"],e[r][n+"OutOf"]=Ve,delete e[r].deleteOutOf,"sub"===t&&m(e.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}}));function Ve(e){var t=this.parent,r=e;do{if(r[1])return e.insLeftOf(t);r=r.parent.parent}while(r!==t);e.insRightOf(t)}M.subscript=M._=u(je,(function(e,t){e.supsub="sub",e.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.mathspeakTemplate=["Subscript,",", Baseline"],e.ariaLabel="subscript",e.finalizeTree=function(){this.downInto=this.sub=this.ends[g],this.sub.upOutOf=Ve,t.finalizeTree.call(this)}})),M.superscript=M.supscript=M["^"]=u(je,(function(e,t){e.supsub="sup",e.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>',e.textTemplate=["^"],e.mathspeakTemplate=["Superscript,",", Baseline"],e.ariaLabel="superscript",e.finalizeTree=function(){this.upInto=this.sup=this.ends[1],this.sup.downOutOf=Ve,t.finalizeTree.call(this)}}));var ze=u(ge,(function(e,t){e.init=function(t,r,n){e.ariaLabel=n||ctrlSeq.replace(/^\\/,"");var i='<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>'+r+'</big><span class="dcg-mq-from"><span>&0</span></span></span>';fe.prototype.init.call(this,t,i)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(Ee("n").createLeftOf(e),Fe().createLeftOf(e))},e.latex=function(){function e(e){return"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[g].latex())+"^"+e(this.ends[1].latex())},e.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.ends[g].mathspeak()+" to "+this.ends[1].mathspeak()+", end "+this.ariaLabel+", "},e.parser=function(){for(var e=G.string,t=G.optWhitespace,r=G.succeed,n=de.block,i=this,o=i.blocks=[ve(),ve()],a=0;a<o.length;a+=1)o[a].adopt(i,i.ends[1],0);return t.then(e("_").or(e("^"))).then((function(e){var t=o["_"===e?0:1];return n.then((function(e){return e.children().adopt(t,t.ends[1],0),r(i)}))})).many().result(i)},e.finalizeTree=function(){this.ends[g].ariaLabel="lower bound",this.ends[1].ariaLabel="upper bound",this.downInto=this.ends[g],this.upInto=this.ends[1],this.ends[g].upOutOf=this.ends[1],this.ends[1].downOutOf=this.ends[g]}}));M["â"]=M.sum=M.summation=a(ze,"\\sum ","&sum;","sum"),M["â"]=M.prod=M.product=a(ze,"\\prod ","&prod;","product"),M.coprod=M.coproduct=a(ze,"\\coprod ","&#8720;","co product"),M["â«"]=M.int=M.integral=u(ze,(function(e,t){e.init=function(){e.ariaLabel="integral",fe.prototype.init.call(this,"\\int ",'<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>',"integral")},e.createLeftOf=ge.p.createLeftOf}));var Ue=M.frac=M.dfrac=M.cfrac=M.fraction=u(ge,(function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[1].upOutOf=this.ends[g],this.downInto=this.ends[g].downOutOf=this.ends[1],this.ends[g].ariaLabel="numerator",this.ends[1].ariaLabel="denominator",1<this.getFracDepth()?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},e.mathspeak=function(e){return e&&e.createdLeftOf?e.createdLeftOf.parent.mathspeak():t.mathspeak.apply(this,arguments)},e.getFracDepth=function(){var e=function(t,r){return t instanceof E&&t.ctrlSeq&&0<=t.ctrlSeq.toLowerCase().search("frac")&&(r+=1),t.parent?e(t.parent,r):r};return e(this,0)}})),Ge=M.over=I["/"]=u(Ue,(function(e,t){e.createLeftOf=function(e){if(!this.replacedFragment){var r=e[g];if(!e.options.typingSlashCreatesNewFraction)for(;r&&!(r instanceof ye||r instanceof(M.text||i)||r instanceof ze||"\\ "===r.ctrlSeq||/^[,;:]$/.test(r.ctrlSeq));)r=r[g];r instanceof ze&&r[1]instanceof je&&(r=r[1])[1]instanceof je&&r[1].ctrlSeq!=r.ctrlSeq&&(r=r[1]),r!==e[g]&&(this.replaces(k(r[1]||e.parent.ends[g],e[g])),e[g]=r)}t.createLeftOf.call(this,e)}}));M.ans=u(fe,(function(e,t){e.init=function(e){t.init.call(this,"\\operatorname{ans}",'<span class="dcg-mq-ans">ans</span>',"ans")}})),M.percent=M.percentof=u(fe,(function(e,t){e.init=function(){t.init.call(this,"\\%\\operatorname{of}",'<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>',"percent of")}}));var Ke=M.sqrt=u(ge,(function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-sqrt-container"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">'+Re.sqrt.html+'</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.mathspeakTemplate=["StartRoot,",", EndRoot"],e.ariaLabel="root",e.parser=function(){return de.optBlock.then((function(e){return de.block.map((function(t){var r=He();return r.blocks=[e,t],e.adopt(r,0,0),t.adopt(r,e,0),r}))})).or(t.parser.call(this))}})),He=(M.hat=u(ge,(function(e,t){e.ctrlSeq="\\hat",e.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>',e.textTemplate=["hat(",")"]})),M.nthroot=u(Ke,(function(e,t){e.htmlTemplate='<span class="dcg-mq-nthroot-container dcg-mq-non-leaf"><sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled dcg-mq-sqrt-container"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">'+Re.sqrt.html+'</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[g].latex()+"]{"+this.ends[1].latex()+"}"},e.mathspeak=function(){var e=this.ends[g].mathspeak(),t=this.ends[1].mathspeak();return this.ends[g].ariaLabel="Index",this.ends[1].ariaLabel="Radicand","3"===e?"Start Cube Root, "+t+", End Cube Root":"Root Index "+e+", Start Root, "+t+", End Root"}}))),We=(M.cbrt=u(He,(function(e,t){e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),we("3").createLeftOf(e),e.controller.moveRight()}})),u(ge,(function(e,t){e.init=function(e,r,n){var i='<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">'+r+'</span><span class="dcg-mq-diacritic-stem">&0</span></span>';t.init.call(this,e,i,n)}})));function $e(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")}}M.vec=a(We,"\\vec","&rarr;",["vec(",")"]),M.tilde=a(We,"\\tilde","~",["tilde(",")"]);var Ye=u(u(ge,$e),(function(t,r){t.init=function(t,n,i,o,a){r.init.call(this,"\\left"+o,e,[n,i]),this.side=t,this.sides={},this.sides[g]={ch:n,ctrlSeq:o},this.sides[1]={ch:i,ctrlSeq:a}},t.numBlocks=function(){return 1},t.html=function(){var e=this.getSymbol(g),t=this.getSymbol(1);return this.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+e.width+'" class="dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren'+(1===this.side?" dcg-mq-ghost":"")+'">'+e.html+'</span><span style="margin-left:'+e.width+";margin-right:"+t.width+'" class="dcg-mq-bracket-middle dcg-mq-non-leaf">&0</span><span style="width:'+t.width+'" class="dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren'+(this.side===g?" dcg-mq-ghost":"")+'">'+t.html+"</span></span>",r.html.call(this)},t.getSymbol=function(e){return Re[this.sides[e||1].ch]||{width:"0",html:""}},t.latex=function(){return"\\left"+this.sides[g].ctrlSeq+this.ends[g].latex()+"\\right"+this.sides[1].ctrlSeq},t.mathspeak=function(e){var t=this.sides[g].ch,n=this.sides[1].ch;if("|"===t&&"|"===n)this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else{if(e&&e.createdLeftOf&&this.side){var i="";return this.side===g?i=this.textTemplate[0]:1===this.side&&(i=this.textTemplate[1]),(this.side===g?"left ":"right ")+Xe[i]}this.mathspeakTemplate=["left "+Xe[t]+",",", right "+Xe[n]],this.ariaLabel=Xe[t]+" block"}return r.mathspeak.call(this)},t.matchBrack=function(e,t,r){return r instanceof Ye&&r.side&&r.side!==-t&&(!e.restrictMismatchedBrackets||Qe[this.sides[this.side].ch]===r.sides[r.side].ch||{"(":"]","[":")"}[this.sides[g].ch]===r.sides[1].ch)&&r},t.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side];var t=e.delimjQs.eq(this.side===g?0:1).removeClass("dcg-mq-ghost");this.replaceBracket(t,this.side)},t.createLeftOf=function(e){var t,n,i;this.replacedFragment||(t=e.options,n="|"===this.sides[g].ch?this.matchBrack(t,1,e[1])||this.matchBrack(t,g,e[g])||this.matchBrack(t,0,e.parent.parent):this.matchBrack(t,-this.side,e[-this.side])||this.matchBrack(t,-this.side,e.parent.parent)),n?(i=this.side=-n.side,this.closeOpposing(n),n===e.parent.parent&&e[i]&&k(e[i],e.parent.ends[i],-i).disown().withDirAdopt(-i,n.parent,n,n[i]).jQ.insDirOf(i,n.jQ),n.bubble((function(e){e.reflow()}))):(i=(n=this).side,n.replacedFragment?n.side=0:e[-i]&&(n.replaces(k(e[-i],e.parent.ends[-i],i)),e[-i]=0),r.createLeftOf.call(n,e)),i===g?e.insAtLeftEnd(n.ends[g]):e.insRightOf(n)},t.placeCursor=i,t.unwrap=function(){this.ends[g].children().disown().adopt(this.parent,this,this[1]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(e,t,r){var n=this.parent,i=this[e],o=n.ends[e];if(e===this.side)return this.unwrap(),void(i?r.insDirOf(-e,i):r.insAtDirEnd(e,n));var a=r.options,s=!this.side;if(this.side=-e,this.matchBrack(a,e,this.ends[g].ends[this.side])){this.closeOpposing(this.ends[g].ends[this.side]);var l=this.ends[g].ends[e];this.unwrap(),l.siblingCreated&&l.siblingCreated(r.options,e),i?r.insDirOf(-e,i):r.insAtDirEnd(e,n)}else{if(this.matchBrack(a,e,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&s)return this.unwrap(),void(i?r.insDirOf(-e,i):r.insAtDirEnd(e,n));this.sides[e]={ch:Qe[this.sides[this.side].ch],ctrlSeq:Qe[this.sides[this.side].ctrlSeq]};var c=this.delimjQs.removeClass("dcg-mq-ghost").eq(e===g?0:1).addClass("dcg-mq-ghost");this.replaceBracket(c,e)}i?(l=this.ends[g].ends[e],k(i,o,-e).disown().withDirAdopt(-e,this.ends[g],l,0).jQ.insAtDirEnd(e,this.ends[g].jQ.removeClass("dcg-mq-empty")),l.siblingCreated&&l.siblingCreated(r.options,e),r.insDirOf(-e,i)):t?r.insDirOf(e,this):r.insAtDirEnd(e,this.ends[g])}},t.replaceBracket=function(e,t){var r=this.getSymbol(t);e.html(r.html).css("width",r.width),t===g?e.next().css("margin-left",r.width):e.prev().css("margin-right",r.width)},t.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},t.finalizeTree=function(){this.ends[g].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===g?1:0).removeClass("dcg-mq-ghost"),this.side=0}},t.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}})),Qe={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Xe={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function Ze(e,t,r){t=t||e;var n=Qe[e],i=Qe[t];I[e]=a(Ye,g,e,n,t,i),I[n]=a(Ye,1,e,n,t,i),Xe[e]=Xe[n]=r}Ze("(",null,"parenthesis"),Ze("[",null,"bracket"),Ze("{","\\{","brace"),M.langle=a(Ye,g,"&lang;","&rang;","\\langle ","\\rangle "),M.rangle=a(Ye,1,"&lang;","&rang;","\\langle ","\\rangle "),I["|"]=a(Ye,g,"|","|","|","|"),M.lVert=a(Ye,g,"&#8741;","&#8741;","\\lVert ","\\rVert "),M.rVert=a(Ye,1,"&#8741;","&#8741;","\\lVert ","\\rVert "),M.left=u(ge,(function(e){e.parser=function(){var e=G.regex,t=G.string,r=(G.succeed,G.optWhitespace);return r.then(e(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then((function(n){var i=n.replace(/^\\/,"");return"\\langle"==n&&(i="&lang;",n+=" "),"\\lVert"==n&&(i="&#8741;",n+=" "),de.then((function(o){return t("\\right").skip(r).then(e(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map((function(e){var t=e.replace(/^\\/,"");"\\rangle"==e&&(t="&rang;",e+=" "),"\\rVert"==e&&(t="&#8741;",e+=" ");var r=Ye(0,i,t,n,e);return r.blocks=[o],o.adopt(r,0,0),r}))}))}))}})),M.right=u(ge,(function(e){e.parser=function(){return G.fail("unmatched \\right")}}));var Je=M.binom=M.binomial=u(u(ge,$e),(function(e,t){var r=Re["("],n=Re[")"];e.ctrlSeq="\\binom",e.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+r.width+'" class="dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled">'+r.html+'</span><span style="margin-left:'+r.width+"; margin-right:"+n.width+';" class="dcg-mq-non-leaf dcg-mq-bracket-middle"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span style="width:'+n.width+'" class="dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled">'+n.html+"</span></span>",e.textTemplate=["choose(",",",")"],e.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],e.ariaLabel="binomial"}));M.choose=u(Je,(function(e){e.createLeftOf=Ge.prototype.createLeftOf})),M.editable=M.MathQuillMathField=u(ge,(function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>',e.parser=function(){var e=this,r=G.string,n=G.regex,i=G.succeed;return r("[").then(n(/^[a-z][a-z0-9]*/i)).skip(r("]")).map((function(t){e.name=t})).or(i()).then(t.parser.call(e))},e.finalizeTree=function(e){var t=P(this.ends[g],this.jQ,e);t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),z(t.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[g].controller))},e.latex=function(){return this.ends[g].latex()},e.text=function(){return this.ends[g].text()}}));var et=M.embed=u(fe,(function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){var e=this,t=G.string,r=G.regex,n=G.succeed;return t("{").then(r(/^[a-z][a-z0-9]*/i)).skip(t("}")).then((function(i){return t("[").then(r(/^[-\w\s]*/)).skip(t("]")).or(n()).map((function(t){return e.setOptions(F[i](t))}))}))}})),tt=j(1);for(var rt in tt)!function(e,t){"function"==typeof t?(N[e]=function(){return q(),t.apply(this,arguments)}).prototype=t.prototype:N[e]=t}(rt,tt[rt])}(),i("mathquill_src",["jquery"],(function(){})),i("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),i("lib/inject-css",["require","underscore"],(function(e){"use strict";var t=e("underscore"),r={},n=[];return function(e,i){var o,a,s=r[e];s||(s=document.createElement("style"),r[e]=s,o=t.sortedIndex(n,e),(a=r[n[o]])?document.head.insertBefore(s,a):document.head.appendChild(s),n.splice(o,0,e)),s.textContent=i}})),i("vendor/css",{}),i("lib/prefix-css",["require","vendor/css"],(function(e){"use strict";var t=e("vendor/css");function r(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];if("html"===i)r.push(i);else if(/dcg(-mq)?-aria-alert/.test(i))r.push(i);else if(/^html body( |$)/.test(i))r.push("html"+t+" body"+i.slice("html body".length)),r.push("html body "+t+i.slice("html body".length));else{if(/^html/.test(i))throw new Error("Cannot correctly prefix selector "+i);r.push(t+" "+i)}}return r}return function(e,n){if(n){var i="."+n;return function(e){if(!/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/.test(e))throw new Error("Illegal css selector prefix "+e)}(i),o=e,a=i,s=t.parse(o),l=Object.assign({},s,{stylesheet:function(e,t){return Object.assign({},e,{rules:function e(t,n){return t.map((function(t){return t.rules?Object.assign({},t,{rules:e(t.rules,n)}):t.selectors?Object.assign({},t,{selectors:r(t.selectors,n)}):t}))}(e.rules,t)})}(s.stylesheet,a)}),t.stringify(l)}return e;var o,a,s,l}})),i("loadcss",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),i("loadcss!Symbola-basic",(function(){})),i("loadcss!vendor/mathquill/mathquill-basic",(function(){})),i("toplevel/mathquill",["require","testbridge","mathquill_src","loadcss!Symbola-basic","loadcss!vendor/mathquill/mathquill-basic"],(function(e){"use strict";return e("testbridge"),e("mathquill_src"),e("loadcss!Symbola-basic"),e("loadcss!vendor/mathquill/mathquill-basic"),window.MathQuill.noConflict()})),i("lib/parse-query-params",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParams=void 0,t.getQueryParams=function(){var e="";try{"?"==(e=location.search)[0]&&(e=e.slice(1))}catch(e){}for(var t={},r=0,n=e.split("&");r<n.length;r++){var i=n[r].split("=");2==i.length?t[i[0]]=decodeURIComponent(i[1]):t[i[0]]=!0}return t}})),i("config",["require","exports","core/lib/deepCopy","lib/parse-query-params"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.all=t.get=void 0;var o={},a=i.getQueryParams();if(void 0!==r&&r.config)for(var s in r.config)r.config.hasOwnProperty(s)&&(a[s]=r.config[s]);function l(e){return a.hasOwnProperty(e)}function c(e){o[e]=l(e)}function u(e){o[e]=!l("no"+e)}c("testing"),c("maintenance"),c("disableScrollFix"),c("nativeOnscreenKeypad"),c("hidden"),c("disableMouseInteractions"),c("advancedStyling"),c("clickableObjects"),c("outofdom"),a.lang&&(o.language=a.lang),a.fontSize&&(o.fontSize=a.fontSize),a.backgroundColor&&(o.backgroundColor="#"+a.backgroundColor),a.textColor&&(o.textColor="#"+a.textColor),o.no_navigation_warning=l("noconcat")||l("testing"),o.previewMessage="You're previewing some new accessibility features.",o.previewFeedbackUrl="mailto:feedback@desmos.com";var d=location&&"preview.desmos.com"===location.hostname;o.previewMode=l("previewMode")||d,c("lockViewport"),c("administerSecretFolders"),c("clickableObjects"),c("degreeMode"),c("clearIntoDegreeMode"),c("plaidMode"),c("editOnWeb"),c("crossOriginSaveTest"),c("showResetButtonOnGraphpaper"),c("transparentBackground"),c("forceLogModeRegressions"),u("links"),u("trace"),u("zoomFit"),c("expressionsCollapsed"),c("invertedColors"),c("projectorMode"),u("images"),u("folders"),u("settingsMenu"),u("expressionsTopbar"),u("zoomButtons"),u("keypad"),u("graphpaper"),u("expressions"),u("branding"),u("pointsOfInterest"),u("plotSingleVariableImplicitEquations"),u("plotImplicits"),u("plotInequalities"),u("notes"),u("sliders"),c("pauseWhenOffscreen"),c("worksheetSVG"),u("brailleControls"),c("audioTraceKeypad"),c("sciKeypad"),c("4fnKeypad"),c("ans"),l("braille")&&(o.braille=!0),u("qwertyKeyboard"),c("restrictedFunctions"),c("forceEnableGeometryFunctions"),u("functionDefinition"),c("singleExpression"),c("restrictedEditing"),c("replaceCommaWith10Exp"),c("replaceRoundWithReciprocal"),l("typingAsteriskWritesTimesSymbol")&&(o.typingAsteriskWritesTimesSymbol=!0),u("labels"),u("distributions"),(o["4fnKeypad"]?c:u)("decimalToFraction"),c("3d"),l("exponentButtonForSquareRoot")?o.additionalFunctions=["exponent"]:a.additionalFunctions&&"string"==typeof a.additionalFunctions&&(o.additionalFunctions=a.additionalFunctions.split(",")),t.get=function(e){return o[e]},t.all=function(){return n.default(o)}})),i("main/mathquill-operators",["require","exports","config"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoOperators=t.getAutoCommands=void 0;var n=["exp|exponent ln|natural-log log","total length mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum sgn","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join","erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","rgb hsv"].join(" "),i=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" ");n+=" "+i,r.get("3d")&&(n+=" cube sphere cone dodecahedron octahedron tetrahedron");var o="alpha beta sqrt theta phi pi tau nthroot cbrt sum prod int ans percent infinity infty";t.getAutoCommands=function(e){return e&&e.disallowFrac?o:o+" frac"},t.getAutoOperators=function(e){return n}})),i("mathquill",["require","browser","jquery","toplevel/mathquill","main/mathquill-operators"],(function(e){"use strict";var t=e("browser"),r=e("jquery"),n=e("toplevel/mathquill").getInterface(1),i=e("main/mathquill-operators");return n.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:i.getAutoCommands(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){return t.IS_IOS||t.IS_ANDROID?r('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">')[0]:t.IS_WINDOWS&&t.IS_TOUCH?r("<textarea readonly>").on("keydown",(function(){this.readOnly=!1,this.select()})).on("blur",(function(){this.readOnly=!0}))[0]:r("<textarea>")[0]},autoOperatorNames:i.getAutoOperators(),resetCursorOnBlur:!0,enableDigitGrouping:!0})})),i("graphing/clipping",["require","exports","core/types/graphmode"],(function(e,t,r){"use strict";function n(e,t,r,n){var i,o=[];n?(i=2,(c=t(s=e[0],l=e[1]))&&o.push(s,l)):(i=0,c=t(s=e[e.length-2],l=e[e.length-1]));for(var a=i;a<e.length;a+=2){var s,l,c,u=s,d=l,p=c;((c=t(s=e[a],l=e[a+1]))||p)&&(c&&p&&o.push(s,l),c&&!p&&(Array.prototype.push.apply(o,r(s,l,u,d)),o.push(s,l)),!c&&p&&Array.prototype.push.apply(o,r(u,d,s,l)))}return o}function i(e,r,i,o){var a=r.xmin,s=r.xmax,l=r.ymin,c=r.ymax,u=e;return i&t.LEFT&&(u=n(e,(function(e,t){return a<=e}),(function(e,t,r,n){return[a,t+(n-t)*(a-e)/(r-e)]}),o)),i&t.BOTTOM&&(u=n(u,(function(e,t){return l<=t}),(function(e,t,r,n){return[e+(r-e)*(l-t)/(n-t),l]}),o)),i&t.RIGHT&&(u=n(u,(function(e,t){return e<=s}),(function(e,t,r,n){return[s,t+(n-t)*(s-e)/(r-e)]}),o)),i&t.TOP&&(u=n(u,(function(e,t){return t<=c}),(function(e,t,r,n){return[e+(r-e)*(c-t)/(n-t),c]}),o)),u}Object.defineProperty(t,"__esModule",{value:!0}),t.getClippingGraphType=t.computeCartesianFill=t.computePolarFill=t.clipAllFillEdges=t.clipFillEdges=t.clipFillEdge=t.clipStrokeEdges=t.mapSegmentToCanvas=t.X_EQUALS=t.Y_EQUALS=t.POLAR_DEGREE_INEQUALITY=t.POLAR_DEGREE_EQUALITY=t.POLAR_RADIAN_INEQUALITY=t.POLAR_RADIAN_EQUALITY=t.Y=t.X=t.ALL=t.RIGHT=t.LEFT=t.BOTTOM=t.TOP=void 0,t.TOP=1,t.BOTTOM=2,t.LEFT=4,t.RIGHT=8,t.ALL=15,t.X=12,t.Y=3,t.POLAR_RADIAN_EQUALITY=1,t.POLAR_RADIAN_INEQUALITY=2,t.POLAR_DEGREE_EQUALITY=3,t.POLAR_DEGREE_INEQUALITY=4,t.Y_EQUALS=5,t.X_EQUALS=6,t.mapSegmentToCanvas=function(e,r,n,i){var o=[],a=r.xmin,s=r.ymin,l=r.xmax-r.xmin,c=r.ymax-r.ymin,u=n.width,d=n.height,p=u/l,h=-d/c,g=e.length;if(i===t.Y_EQUALS)for(var f=0;f<g;f+=2){var m=(e[f]-a)*p-.5,y=(e[f+1]-s)*h+d-.5;o.push(m,y)}else if(i===t.X_EQUALS)for(f=0;f<g;f+=2)m=(e[f+1]-a)*p-.5,y=(e[f]-s)*h+d-.5,o.push(m,y);else if(i===t.POLAR_RADIAN_EQUALITY)for(f=0;f<e.length;f+=2){var v=e[f];m=((b=e[f+1])*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5,o.push(m,y)}else if(i===t.POLAR_RADIAN_INEQUALITY)for(f=0;f<e.length;f+=2)v=e[f],(b=e[f+1])<0&&(b=0),m=(b*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5,o.push(m,y);else if(i===t.POLAR_DEGREE_EQUALITY)for(f=0;f<e.length;f+=2)v=e[f]*Math.PI/180,m=((b=e[f+1])*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5,o.push(m,y);else if(i===t.POLAR_DEGREE_INEQUALITY)for(f=0;f<e.length;f+=2){var b;v=e[f]*Math.PI/180,(b=e[f+1])<0&&(b=0),m=(b*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5,o.push(m,y)}return o},t.clipStrokeEdges=function(e,r){return i(e,r,t.ALL,!0)},t.clipFillEdge=n,t.clipFillEdges=i,t.clipAllFillEdges=function(e,r){return i(e,r,t.ALL,!1)},t.computePolarFill=function(e,t,r){var n=[],i=(p=e[0])+r,o=[];n.push(o);for(var a=0;a<e.length;a+=2){var s=e[a],l=e[a+1];if(l<0&&(l=0),i<=s){for(o=[],n.push(o),i=p=e[a-2];i<=s;)i+=r;a-=4}else o.push(s,l)}if(0===t)for(a=0;a<n.length;a++)n[a].push(0,0);else{var c=r/16,u=t;for(a=0;a<n.length;a++){var d=n[a],p=d[0];for(s=i=d[d.length-2];p<s;s-=c)d.push(s,u);d.push(p,u)}}return n},t.computeCartesianFill=function(e,t){return(e=e.slice()).push(e[e.length-2],t),e.push(e[0],t),[e]},t.getClippingGraphType=function(e,n,i){switch(e){case r.X:return t.X_EQUALS;case r.IMPLICIT:case r.PARAMETRIC:case r.Y:return t.Y_EQUALS;case r.POLAR:return i.degreeMode?n?t.POLAR_DEGREE_INEQUALITY:t.POLAR_DEGREE_EQUALITY:n?t.POLAR_RADIAN_INEQUALITY:t.POLAR_RADIAN_EQUALITY}}})),i("core/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_API_VERSION=void 0,t.CURRENT_API_VERSION="v1.6"})),i("expressions/colors",["require","exports","core/lib/color-helpers"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColorName=t.all=t.BLACK=t.ORANGE=t.PURPLE=t.GREEN=t.BLUE=t.RED=void 0,t.RED=r.colors.RED,t.BLUE=r.colors.BLUE,t.GREEN=r.colors.GREEN,t.PURPLE=r.colors.PURPLE,t.ORANGE=r.colors.ORANGE,t.BLACK=r.colors.BLACK,t.all=[t.RED,t.BLUE,t.GREEN,t.PURPLE,t.ORANGE,t.BLACK],t.getColorName=function(e,t){switch(t){case r.colors.RED:return e.s("graphing-calculator-text-color-red");case r.colors.BLUE:return e.s("graphing-calculator-text-color-blue");case r.colors.GREEN:return e.s("graphing-calculator-text-color-green");case r.colors.PURPLE:return e.s("graphing-calculator-text-color-purple");case r.colors.ORANGE:return e.s("graphing-calculator-text-color-orange");case r.colors.BLACK:return e.s("graphing-calculator-text-color-black");case r.colors.GRAY:return e.s("graphing-calculator-text-color-gray");default:return e.s("graphing-calculator-text-color-unknown")}}})),i("lib/console",["require","exports","console"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=void 0,t.log=r.log,t.warn=r.warn})),i("graphing-calc/api/sanitize-expression",["require","exports","core/types/styles","core/lib/dragmode","core/types/label-sizes","core/types/label-orientations","core/lib/number-to-latex","lib/console"],(function(e,t,r,n,i,o,a,s){"use strict";function l(e,t){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e)return!0;return!1}function c(e){return l(e,t.SanitizedPointStyle)}function u(e){return l(e,t.SanitizedLineStyle)}function d(e){return l(e,t.SanitizedDragMode)}function p(e){return{id:e.id,latex:e.latex,color:e.color,hidden:e.hidden,pointStyle:e.pointStyle,pointSize:e.pointSize,pointOpacity:e.pointOpacity,lineStyle:e.lineStyle,lineWidth:e.lineWidth,lineOpacity:e.lineOpacity,points:e.points,lines:e.lines,dragMode:e.dragMode,values:e.values.slice()}}function h(e,t){return e.hasOwnProperty("id")?e.id+"":t.generateId()}function g(e,r){var n={type:"expression",id:h(e,r)};return n.type="expression",n.id=h(e,r),e.hasOwnProperty("latex")&&(n.latex=e.latex+""),e.hasOwnProperty("color")&&(n.color=e.color+""),e.hasOwnProperty("points")&&(n.points=!!e.points),e.hasOwnProperty("lines")&&(n.lines=!!e.lines),e.hasOwnProperty("style")&&(s.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),c(e.style)?n.pointStyle=e.style:u(e.style)?n.lineStyle=e.style:s.warn("Invalid style: '"+e.style+"'.")),e.hasOwnProperty("pointStyle")&&(c(e.pointStyle)?n.pointStyle=e.pointStyle:s.warn("Invalid pointStyle: '"+e.pointStyle+"'.")),e.hasOwnProperty("pointSize")&&(n.pointSize=""+e.pointSize),e.hasOwnProperty("pointOpacity")&&(n.pointOpacity=""+e.pointOpacity),e.hasOwnProperty("lineStyle")&&(u(e.lineStyle)?n.lineStyle=e.lineStyle:s.warn("Invalid lineStyle: '"+e.lineStyle+"'.")),e.hasOwnProperty("lineWidth")&&(n.lineWidth=""+e.lineWidth),e.hasOwnProperty("lineOpacity")&&(n.lineOpacity=""+e.lineOpacity),e.hasOwnProperty("hidden")&&(n.hidden=!!e.hidden),e.hasOwnProperty("secret")&&(n.secret=!!e.secret),e.hasOwnProperty("sliderBounds")&&e.sliderBounds&&(n.slider={min:a.default(e.sliderBounds.min),max:a.default(e.sliderBounds.max),step:a.default(e.sliderBounds.step)},n.slider.min&&(n.slider.hardMin=!0),n.slider.max&&(n.slider.hardMax=!0)),e.hasOwnProperty("parametricDomain")&&e.parametricDomain?(n.parametricDomain={min:a.default(e.parametricDomain.min),max:a.default(e.parametricDomain.max)},e.hasOwnProperty("domain")&&s.warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")):e.hasOwnProperty("domain")&&(s.warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),n.parametricDomain={min:a.default(e.domain.min),max:a.default(e.domain.max)}),e.hasOwnProperty("polarDomain")&&e.polarDomain&&(n.polarDomain={min:a.default(e.polarDomain.min),max:a.default(e.polarDomain.max)}),e.hasOwnProperty("dragMode")&&(d(e.dragMode)?n.dragMode=e.dragMode:s.warn("Invalid dragMode: '"+e.dragMode+"'.")),e.hasOwnProperty("label")&&(n.label=e.label+""),e.hasOwnProperty("showLabel")&&(n.showLabel=!!e.showLabel),e.hasOwnProperty("labelSize")&&("string"==typeof e.labelSize?n.labelSize=e.labelSize:s.warn("Invalid labelSize: "+e.labelSize)),e.hasOwnProperty("labelOrientation")&&(l(e.labelOrientation,t.SanitizedLabelOrientation)?n.labelOrientation=e.labelOrientation:s.warn("Invalid labelOrientation: "+e.labelOrientation)),e.hasOwnProperty("fill")&&(n.fill=!!e.fill),e.hasOwnProperty("fillOpacity")&&(n.fillOpacity=""+e.fillOpacity),n}function f(e,r){var i={id:h(e,r)};return e.hasOwnProperty("latex")&&(i.latex=e.latex+""),e.hasOwnProperty("color")&&(i.color=e.color+""),e.hasOwnProperty("hidden")&&(i.hidden=!!e.hidden),e.hasOwnProperty("points")&&(i.points=!!e.points),e.hasOwnProperty("lines")&&(i.lines=!!e.lines),e.hasOwnProperty("values")&&e.values&&(i.values=e.values.map((function(e){return e+""}))),e.hasOwnProperty("pointStyle")&&(c(e.pointStyle)?i.pointStyle=e.pointStyle:s.warn("Invalid pointStyle: '"+e.pointStyle+"'.")),e.hasOwnProperty("pointSize")&&(i.pointSize=""+e.pointSize),e.hasOwnProperty("pointOpacity")&&(i.pointOpacity=""+e.pointOpacity),e.hasOwnProperty("lineStyle")&&(u(e.lineStyle)?i.lineStyle=e.lineStyle:s.warn("Invalid lineStyle: '"+e.lineStyle+"'.")),e.hasOwnProperty("lineWidth")&&(i.lineWidth=""+e.lineWidth),e.hasOwnProperty("lineOpacity")&&(i.lineOpacity=""+e.lineOpacity),e.hasOwnProperty("columnMode")&&(s.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),e.columnMode===t.SanitizedColumnMode.POINTS_AND_LINES?(i.points=!0,i.lines=!0):e.columnMode===t.SanitizedColumnMode.LINES?(i.points=!1,i.lines=!0):(i.points=!0,i.lines=!1),i.lines&&!i.points&&e.hasOwnProperty("dragMode")&&e.dragMode!==n.DragMode.NONE&&(s.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),i.points=!0),l(e.columnMode,t.SanitizedColumnMode)&&s.warn("Invalid columnMode: '"+e.columnMode+"'.")),e.hasOwnProperty("dragMode")&&(d(e.dragMode)?i.dragMode=e.dragMode===n.DragMode.AUTO?n.DragMode.NONE:e.dragMode:s.warn("Invalid dragMode: '"+e.dragMode+"'.")),i}Object.defineProperty(t,"__esModule",{value:!0}),t.validateItem=t.sanitizeItem=t.SanitizedLabelOrientation=t.SanitizedLabelSize=t.SanitizedColumnMode=t.SanitizedDragMode=t.SanitizedLineStyle=t.SanitizedPointStyle=void 0,t.SanitizedPointStyle={OPEN:r.PointStyle.OPEN,CROSS:r.PointStyle.CROSS,POINT:r.PointStyle.POINT},t.SanitizedLineStyle={SOLID:r.LineStyle.SOLID,DASHED:r.LineStyle.DASHED,DOTTED:r.LineStyle.DOTTED},t.SanitizedDragMode={NONE:n.DragMode.NONE,AUTO:n.DragMode.AUTO,X:n.DragMode.X,Y:n.DragMode.Y,XY:n.DragMode.XY},t.SanitizedColumnMode={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},t.SanitizedLabelSize={SMALL:i.LabelSize.SMALL,MEDIUM:i.LabelSize.MEDIUM,LARGE:i.LabelSize.LARGE},t.SanitizedLabelOrientation={DEFAULT:o.LabelOrientation.DEFAULT,CENTER:o.LabelOrientation.CENTER,CENTER_AUTO:o.LabelOrientation.CENTER_AUTO,AUTO_CENTER:o.LabelOrientation.AUTO_CENTER,ABOVE:o.LabelOrientation.ABOVE,ABOVE_LEFT:o.LabelOrientation.ABOVE_LEFT,ABOVE_RIGHT:o.LabelOrientation.ABOVE_RIGHT,ABOVE_AUTO:o.LabelOrientation.ABOVE_AUTO,BELOW:o.LabelOrientation.BELOW,BELOW_LEFT:o.LabelOrientation.BELOW_LEFT,BELOW_RIGHT:o.LabelOrientation.BELOW_RIGHT,BELOW_AUTO:o.LabelOrientation.BELOW_AUTO,LEFT:o.LabelOrientation.LEFT,AUTO_LEFT:o.LabelOrientation.AUTO_LEFT,RIGHT:o.LabelOrientation.RIGHT,AUTO_RIGHT:o.LabelOrientation.AUTO_RIGHT},t.sanitizeItem=function(e){switch(e.type){case"expression":return s={id:(a=e).id,type:a.type},["latex","color","lineStyle","lineWidth","lineOpacity","pointStyle","pointSize","pointOpacity","points","lines","fill","fillOpacity","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","interactiveLabel"].forEach((function(e){a.hasOwnProperty(e)&&(s[e]=a[e])})),a.hasOwnProperty("parametricDomain")&&(s.parametricDomain={min:a.parametricDomain.min,max:a.parametricDomain.max}),a.hasOwnProperty("polarDomain")&&(s.polarDomain={min:a.polarDomain.min,max:a.polarDomain.max}),a.hasOwnProperty("domain")&&(s.domain={min:a.domain.min,max:a.domain.max}),a.slider&&(a.slider.hardMin&&(s.sliderBounds=s.sliderBounds||{},s.sliderBounds.min=a.slider.min),a.slider.hardMax&&(s.sliderBounds=s.sliderBounds||{},s.sliderBounds.max=a.slider.max),a.slider.step&&(s.sliderBounds=s.sliderBounds||{},s.sliderBounds.step=a.slider.step)),s;case"table":return{id:(o=e).id,type:o.type,columns:o.columns.map(p)};case"folder":return{id:(i=e).id,type:i.type,hidden:i.hidden,secret:i.secret};case"image":return{id:(n=e).id,type:n.type,hidden:n.hidden,secret:n.secret};case"text":return{id:(r=e).id,type:r.type,secret:r.secret};case"simulation":return{id:(t=e).id,type:t.type,secret:t.secret};default:return e}var t,r,n,i,o,a,s},t.validateItem=function(e,t,r){var n,i,o,a,l,c,u,d=e.type;if(t&&d&&d!==t)s.warn("Cannot change type of expression from '"+t+"' to '"+d+"'.");else switch(d){case void 0:case"expression":return g(e,r);case"image":return u={type:"image",id:h(c=e,r)},c.hasOwnProperty("hidden")&&(u.hidden=!!c.hidden),u;case"table":return l={type:"table",id:h(o=e,a=r)},o.hasOwnProperty("columns")&&o.columns&&(l.columns=o.columns.map((function(e){return f(e,a)}))),l;case"folder":return i={type:"folder",id:h(n=e,r)},n.hasOwnProperty("hidden")&&(i.hidden=!!n.hidden),i;default:return t?void s.warn("Cannot modify expressions of type: '"+t+"' through the API."):void s.warn("Invalid expression type: '"+d+"'.")}}})),i("core/graphing-calc/json/graph-settings",["require","exports","tslib"],(function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphSetting=t.publicGraphSettings=t.DefaultGraphSettings=t.AxisArrowModes=void 0,(i=n=t.AxisArrowModes||(t.AxisArrowModes={})).NONE="NONE",i.POSITIVE="POSITIVE",i.BOTH="BOTH";var o={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:n.NONE,yAxisArrowMode:n.NONE,xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1};t.DefaultGraphSettings=r.__assign(r.__assign({},o),{squareAxes:!0}),t.publicGraphSettings=Object.keys(o),t.isGraphSetting=function(e){return e in o}})),i("main/font_sizes",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERY_LARGE=t.LARGE=t.MEDIUM=t.SMALL=t.VERY_SMALL=void 0,t.VERY_SMALL=9,t.SMALL=12,t.MEDIUM=16,t.LARGE=20,t.VERY_LARGE=24})),function(e){"use strict";var t=function(e,r,n){var i,o,a=document.createElement("img");if(a.onerror=r,a.onload=function(){!o||n&&n.noRevoke||t.revokeObjectURL(o),r&&r(t.scale(a,n))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))i=o=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;i=e,n&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin)}return i?(a.src=i,a):t.readFile(e,(function(e){var t=e.target;t&&t.result?a.src=t.result:r&&r(e)}))},r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,r,n,i,o,a,s,l,c){return e.getContext("2d").drawImage(t,r,n,i,o,a,s,l,c),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,r){function n(){var e=Math.max((s||v)/v,(l||b)/b);1<e&&(v=Math.ceil(v*e),b=Math.ceil(b*e))}function i(){var e=Math.min((o||v)/v,(a||b)/b);e<1&&(v=Math.ceil(v*e),b=Math.ceil(b*e))}r=r||{};var o,a,s,l,c,u,d,p,h,g=document.createElement("canvas"),f=e.getContext||t.hasCanvasOption(r)&&g.getContext,m=e.naturalWidth||e.width,y=e.naturalHeight||e.height,v=m,b=y;return f&&(d=(r=t.getTransformedOptions(r)).left||0,p=r.top||0,r.sourceWidth?(c=r.sourceWidth,void 0!==r.right&&void 0===r.left&&(d=m-c-r.right)):c=m-d-(r.right||0),r.sourceHeight?(u=r.sourceHeight,void 0!==r.bottom&&void 0===r.top&&(p=y-u-r.bottom)):u=y-p-(r.bottom||0),v=c,b=u),o=r.maxWidth,a=r.maxHeight,s=r.minWidth,l=r.minHeight,f&&o&&a&&r.crop?(h=c/u-(v=o)/(b=a))<0?(u=a*c/o,void 0===r.top&&void 0===r.bottom&&(p=(y-u)/2)):0<h&&(c=o*u/a,void 0===r.left&&void 0===r.right&&(d=(m-c)/2)):((r.contain||r.cover)&&(s=o=o||s,l=a=a||l),r.cover?(i(),n()):(n(),i())),f?(g.width=v,g.height=b,t.transformCoordinates(g,r),t.renderImageToCanvas(g,e,d,p,c,u,0,0,v,b)):(e.width=v,e.height=b,e)},t.createObjectURL=function(e){return!!r&&r.createObjectURL(e)},t.revokeObjectURL=function(e){return!!r&&r.revokeObjectURL(e)},t.readFile=function(e,t,r){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=t,n[r=r||"readAsDataURL"])return n[r](e),n}return!1},"function"==typeof i&&i.amd?i("vendor/load-image/load-image",[],(function(){return t})):e.loadImage=t}(this),function(e){"use strict";"function"==typeof i&&i.amd?i("vendor/load-image/load-image-orientation",["./load-image"],e):e(window.loadImage)}((function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var r=e.getContext("2d"),n=e.width,i=e.height,o=t.orientation;if(o)switch(4<o&&(e.width=i,e.height=n),o){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,i),r.rotate(Math.PI);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i);break;case 7:r.rotate(.5*Math.PI),r.translate(n,-i),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-n,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);switch(e.orientation){case 2:r.left=e.right,r.right=e.left;break;case 3:r.left=e.right,r.top=e.bottom,r.right=e.left,r.bottom=e.top;break;case 4:r.top=e.bottom,r.bottom=e.top;break;case 5:r.left=e.top,r.top=e.left,r.right=e.bottom,r.bottom=e.right;break;case 6:r.left=e.top,r.top=e.right,r.right=e.bottom,r.bottom=e.left;break;case 7:r.left=e.bottom,r.top=e.right,r.right=e.top,r.bottom=e.left;break;case 8:r.left=e.bottom,r.top=e.left,r.right=e.top,r.bottom=e.right}return 4<e.orientation&&(r.maxWidth=e.maxHeight,r.maxHeight=e.maxWidth,r.minWidth=e.minHeight,r.minHeight=e.minWidth,r.sourceWidth=e.sourceHeight,r.sourceHeight=e.sourceWidth),r}})),function(e){"use strict";"function"==typeof i&&i.amd?i("vendor/load-image/load-image-meta",["./load-image"],e):e(window.loadImage)}((function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,r,n){var i=this,o=(n=n||{}).maxMetaDataSize||262144,a={};window.DataView&&t&&12<=t.size&&"image/jpeg"===t.type&&e.blobSlice&&e.readFile(e.blobSlice.call(t,0,o),(function(t){var o,s,l,c,u=t.target.result,d=new DataView(u),p=2,h=d.byteLength-4,g=p;if(65496===d.getUint16(0)){for(;p<h&&(65504<=(o=d.getUint16(p))&&o<=65519||65534===o);){if(p+(s=d.getUint16(p+2)+2)>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(l=e.metaDataParsers.jpeg[o])for(c=0;c<l.length;c+=1)l[c].call(i,d,p,s,a,n);g=p+=s}!n.disableImageHead&&6<g&&(u.slice?a.imageHead=u.slice(0,g):a.imageHead=new Uint8Array(u).subarray(0,g))}else console.log("Invalid JPEG file: Missing JPEG marker.");r(a)}),"readAsArrayBuffer")||r(a)}})),function(e){"use strict";"function"==typeof i&&i.amd?i("vendor/load-image/load-image-ios",["./load-image"],e):e(window.loadImage)}((function(e){"use strict";var t;window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)&&(t=e.renderImageToCanvas,e.detectSubsampling=function(e){var t,r;return 1048576<e.width*e.height&&((t=document.createElement("canvas")).width=t.height=1,(r=t.getContext("2d")).drawImage(e,1-e.width,0),0===r.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var r,n,i,o,a=e.naturalHeight||e.height,s=document.createElement("canvas"),l=s.getContext("2d");for(t&&(a/=2),s.width=1,s.height=a,l.drawImage(e,0,0),r=l.getImageData(0,0,1,a).data,n=0,o=i=a;n<o;)0===r[4*(o-1)+3]?i=o:n=o,o=i+n>>1;return o/a||1},e.renderImageToCanvas=function(r,n,i,o,a,s,l,c,u,d){if("image/jpeg"===n._type){var p,h,g,f,m=r.getContext("2d"),y=document.createElement("canvas"),v=1024,b=y.getContext("2d");if(y.width=v,y.height=v,m.save(),(p=e.detectSubsampling(n))&&(i/=2,o/=2,a/=2,s/=2),h=e.detectVerticalSquash(n,p),p||1!==h){for(o*=h,u=Math.ceil(v*u/a),d=Math.ceil(v*d/s/h),f=c=0;f<s;){for(g=l=0;g<a;)b.clearRect(0,0,v,v),b.drawImage(n,i,o,a,s,-g,-f,a,s),m.drawImage(y,0,0,v,v,l,c,u,d),g+=v,l+=u;f+=v,c+=d}return m.restore(),r}}return t(r,n,i,o,a,s,l,c,u,d)})})),function(e){"use strict";"function"==typeof i&&i.amd?i("vendor/load-image/load-image-exif",["./load-image","./load-image-meta"],e):e(window.loadImage)}((function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,r){var n,i,o;if(r&&!(t+r>e.byteLength)){for(n=[],i=0;i<r;i+=1)o=e.getUint8(t+i),n.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+n.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,r){return e.getUint16(t,r)},size:2},4:{getValue:function(e,t,r){return e.getUint32(t,r)},size:4},5:{getValue:function(e,t,r){return e.getUint32(t,r)/e.getUint32(t+4,r)},size:8},9:{getValue:function(e,t,r){return e.getInt32(t,r)},size:4},10:{getValue:function(e,t,r){return e.getInt32(t,r)/e.getInt32(t+4,r)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,r,n,i,o,a){var s,l,c,u,d,p,h=e.exifTagTypes[i];if(h){if(!((l=4<(s=h.size*o)?r+t.getUint32(n+8,a):n+8)+s>t.byteLength)){if(1===o)return h.getValue(t,l,a);for(c=[],u=0;u<o;u+=1)c[u]=h.getValue(t,l+u*h.size,a);if(h.ascii){for(d="",u=0;u<c.length&&"\0"!==(p=c[u]);u+=1)d+=p;return d}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,r,n,i,o){var a=t.getUint16(n,i);o.exif[a]=e.getExifValue(t,r,n,t.getUint16(n+2,i),t.getUint32(n+4,i),i)},e.parseExifTags=function(e,t,r,n,i){var o,a,s;if(r+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((a=r+2+12*(o=e.getUint16(r,n)))+4>e.byteLength)){for(s=0;s<o;s+=1)this.parseExifTag(e,t,r+2+12*s,n,i);return e.getUint32(a,n)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,r,n,i,o){if(!o.disableExif){var a,s,l,c=r+10;if(1165519206===t.getUint32(r+4))if(c+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(r+8)){switch(t.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(c+2,a)?(s=t.getUint32(c+4,a),i.exif=new e.ExifMap,(s=e.parseExifTags(t,c,c+s,a,i))&&!o.disableExifThumbnail&&(l={exif:{}},e.parseExifTags(t,c,c+s,a,l),l.exif[513]&&(i.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),i.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,c,c+i.exif[34665],a,i),i.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,c,c+i.exif[34853],a,i)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})),function(e){"use strict";"function"==typeof i&&i.amd?i("vendor/load-image/load-image-exif-map",["./load-image","./load-image-exif"],e):e(window.loadImage)}((function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,r=e.tags,n=e.map;for(t in r)r.hasOwnProperty(t)&&(n[r[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,r={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e])&&(r[t]=this.getText(t));return r}})),i("loadImage",["require","vendor/load-image/load-image-orientation","vendor/load-image/load-image-meta","vendor/load-image/load-image-ios","vendor/load-image/load-image-exif","vendor/load-image/load-image-exif-map","vendor/load-image/load-image"],(function(e){"use strict";return e("vendor/load-image/load-image-orientation"),e("vendor/load-image/load-image-meta"),e("vendor/load-image/load-image-ios"),e("vendor/load-image/load-image-exif"),e("vendor/load-image/load-image-exif-map"),e("vendor/load-image/load-image")})),i("expressions/image_file_to_data_url",["require","exports","loadImage"],(function(e,t,r){"use strict";function n(e,t){for(var r,n=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],i=0;i<n.length;i++)if((r=e.toDataURL("image/jpeg",n[i])).length<t)return r;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.imageFileToDataURL=void 0,t.imageFileToDataURL=function(e,t){r(e,(function(r){var i,o;r.toDataURL?(i=2e5,"image/jpeg"===e.type?o=n(r,i):(o=r.toDataURL()).length>i&&(o=(o.length>.75*r.width*r.height&&!function(e){for(var t=e.getContext("2d").getImageData(0,0,e.width,e.height).data,r=3;r<t.length;r+=4)if(255!==t[r])return 1}(r)?n:function(e,t){for(var r,n=e.toDataURL().length,i=e.width,o=e.height,a=document.createElement("canvas"),s=0;s<2;s++){var l=Math.sqrt(t/n);if(i=Math.round(l*i),o=Math.round(l*o),a.height=o,a.width=i,a.getContext("2d").drawImage(e,0,0,i,o),(n=(r=a.toDataURL()).length)<t)return r}return r})(r,i)),t(null,o)):t(!0)}),{orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600})}})),i("lib/enabled-languages",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENABLED_LANGUAGES=t.buildSupportedLanguagesMap=t.expandLocaleOptionsThoroughly=void 0,t.expandLocaleOptionsThoroughly=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];if(o&&"string"==typeof o){var a=o.split("-")[0];for(var s in r.push(o),r.push(a),t.ENABLED_LANGUAGES){var l=t.ENABLED_LANGUAGES[s];s.split("-")[0]===a&&l.useAsRoot&&r.push(s)}}}return r},t.buildSupportedLanguagesMap=function(){var e={},r=Object.keys(t.ENABLED_LANGUAGES);for(var n in r){var i=r[n];e[i]={code:i,display_name:t.ENABLED_LANGUAGES[i].displayName}}return e},t.ENABLED_LANGUAGES={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},es:{displayName:"EspaÃ±ol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"Ð ÑÑÑÐºÐ¸Ð¹",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"PortuguÃªs (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"PortuguÃªs (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"CatalÃ ",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"FranÃ§ais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"Ãslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"ÄeÅ¡tina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Tiáº¿ng Viá»t",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"ÎÎ»Î»Î·Î½Î¹ÎºÎ¬",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"Ð£ÐºÑÐ°ÑÐ½ÑÑÐºÐ°",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"á¥áá áá£áá",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"à¸ à¸²à¸©à¸²à¹à¸à¸¢",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"TÃ¼rkÃ§e",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"ç®ä½ä¸­æ",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"ç¹é«ä¸­æ",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"íêµ­ì´",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"æ¥æ¬èª",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}}})),i("text!l10n/all-en-strings.ftl",[],(function(){return"### Strings shared among tools and homepage\n\n\n### 4425 English words, 828 English strings\n\naccount-shell-button-braille-nemeth = Nemeth\naccount-shell-button-braille-ueb = UEB\naccount-shell-button-cancel = Cancel\naccount-shell-button-clear = Clear\naccount-shell-button-download-braille = Download Braille Equations\naccount-shell-button-download-png = Download PNG\naccount-shell-button-download-svg = Download SVG\naccount-shell-button-duplicate-mac = Duplicate or Rename (cmd+shift+s)\naccount-shell-button-duplicate-pc = Duplicate or Rename (ctrl+shift+s)\naccount-shell-button-embed = Embed\naccount-shell-button-export-image = Export Image\naccount-shell-button-hide-browser-warning = Hide this warning.\naccount-shell-button-join-contest = Join In!\naccount-shell-button-line-medium = Medium\naccount-shell-button-line-thick = Thick\naccount-shell-button-line-thin = Thin\naccount-shell-button-log-in = Log In\naccount-shell-button-mygraphs-attempt-recovery = Attempt recovery.\naccount-shell-button-mygraphs-cancel = Cancel\naccount-shell-button-mygraphs-close-graph-list = Close Graph List\naccount-shell-button-mygraphs-close-graph-preview = Close Graph Preview\naccount-shell-button-mygraphs-delete-graph = Delete Graph\naccount-shell-button-mygraphs-delete-title = Delete { $graphTitle }\naccount-shell-button-mygraphs-offline-try-again = offline. click to try again.\naccount-shell-button-mygraphs-save = Save\naccount-shell-button-mygraphs-sign-out = Sign Out\naccount-shell-button-mygraphs-try-again = Try again\naccount-shell-button-open-construction = Open Construction\naccount-shell-button-open-graph = Open Graph\naccount-shell-button-print = Print\naccount-shell-button-retry-now = Retry now\naccount-shell-button-save = Save\naccount-shell-button-send-feedback = Send Feedback\naccount-shell-button-sign-up = Sign Up\naccount-shell-button-submit-for-others = Submit here.\naccount-shell-button-submit-graph = Submit This Graph\naccount-shell-button-svg-options = SVG Options\naccount-shell-error-art-contest-logged-out = You must be logged in to enter the art contest.\naccount-shell-error-change-email-logged-out = You must be logged in to change your email.\naccount-shell-error-change-name-logged-out = You must be logged in to change your name.\naccount-shell-error-changing-name = There was an error changing your user name.\naccount-shell-error-consent-error = There was an error accepting your consent.\naccount-shell-error-consent-logged-out = You must be logged in to consent to data collection.\naccount-shell-error-create-account-unexpected = Sorry, there was an error creating your account.\naccount-shell-error-delete-graph-logged-out = You must be logged in to delete graphs.\naccount-shell-error-delete-graph-logged-out-2 = You must be logged in to delete a graph.\naccount-shell-error-delete-unexpected = Sorry, there was an unexpected error deleting this graph. Error { $code }.\naccount-shell-error-deletion-error = There was an error. Try again later?\naccount-shell-error-deletion-error-2 = Error while deleting your account.\naccount-shell-error-deletion-link-not-found = We can't find that deletion token. Perhaps it's been used already?\naccount-shell-error-email-already-registered = Sorry, someone has already registered with this email address.\naccount-shell-error-email-invalid = Please enter a valid email address.\naccount-shell-error-email-password-mismatch = Sorry, your email and password did not match.\naccount-shell-error-email-too-short = Please enter an email address that is at most { $num } characters.\naccount-shell-error-feedback-empty = Please enter your feedback\naccount-shell-error-feedback-unexpected = Sorry, there was an unexpected problem sending feedback. Error { $code }.\naccount-shell-error-invalid-deletion-link = This is not a valid deletion link.\naccount-shell-error-invalid-recovery-link = This is not a valid recovery link.\naccount-shell-error-logged-in-register = You are already logged in. You must first log out to register as a different user.\naccount-shell-error-logging-in = Error logging in.\naccount-shell-error-logging-out = Error logging out.\naccount-shell-error-missing-email = Please enter your email address.\naccount-shell-error-missing-name = Please enter your name.\naccount-shell-error-missing-new-password = Please enter your new password.\naccount-shell-error-missing-password = Please enter your password.\naccount-shell-error-mygraphs-check-connection = Check your internet connection?\naccount-shell-error-mygraphs-error-deleting = Error deleting.\naccount-shell-error-mygraphs-error-loading = Error loading graph\naccount-shell-error-name-too-long = Please enter a name that is at most { $num } characters.\naccount-shell-error-new-password-too-long = Please enter a new password that is at most { $num } characters.\naccount-shell-error-new-password-too-short = Please enter a new password that is at least { $num } characters.\naccount-shell-error-password-same-as-old = New password cannot match old password.\naccount-shell-error-password-too-long = Please enter a password that is at most { $num } characters.\naccount-shell-error-password-too-short = Please enter a password that is at least { $num } characters.\naccount-shell-error-passwords-do-not-match = The passwords that you entered did not match. Please try again.\naccount-shell-error-problem-resetting-password = Problem resetting your password. Please try again.\naccount-shell-error-recover-link-not-found = Sorry, we can't find that recovery link. Perhaps it's been used already?\naccount-shell-error-recover-password-too-short = Passwords must be at least { $num } characters long\naccount-shell-error-recover-unrecognized-email = Sorry, we could not find any users registered with this email address.\naccount-shell-error-request-error = Error while making request.\naccount-shell-error-save-art-contest = Error saving. Please try again later.\naccount-shell-error-save-graph = Sorry, there was an unexpected error saving your graph. Error { $code }.\naccount-shell-error-save-graph-logged-out = You must be logged in to save graphs.\naccount-shell-error-setting-email = Error setting new email.\naccount-shell-error-sharing-link = Sorry, there was an error generating a link to your graph. Check your internet connection.\naccount-shell-error-something-went-wrong = Something went wrong, please report this to desmos.com support. (Error { $error_num })\naccount-shell-error-submitting = Error submitting. Please try again later.\naccount-shell-error-unexpected-error = Unexpected error.\naccount-shell-error-unknown = Sorry! Something went wrong. Please try again later.\naccount-shell-error-update-graph-logged-out = You must be logged in to update graphs.\naccount-shell-error-user-info-logged-out = You must be logged in to retrieve user information.\naccount-shell-error-verifying-email = Sorry, there was a problem verifying your email.\naccount-shell-error-view-graphs-logged-out = You must be logged in to view saved graphs.\naccount-shell-heading-3dcalc-page-title = Desmos | 3D Graphing Calculator\naccount-shell-heading-age-bracket = Your Age Bracket\naccount-shell-heading-braille-mode = Braille Mode\naccount-shell-heading-country = Your Country\naccount-shell-heading-download-instructions = Download Instructions\naccount-shell-heading-duplicate-construction = Duplicate This Construction\naccount-shell-heading-duplicate-graph = Duplicate This Graph\naccount-shell-heading-embossers = Tactile Graphics Embossers\naccount-shell-heading-embossing-instructions = Embossing Instructions\naccount-shell-heading-export-graph = Export Your Graph\naccount-shell-heading-export-size = Size\naccount-shell-heading-feedback = Feedback\naccount-shell-heading-geometry-page-title = Desmos | Geometry\naccount-shell-heading-graphingcalc-page-title = Desmos | Graphing Calculator\naccount-shell-heading-line-thickness = Line Thickness\naccount-shell-heading-math-art-contest = Global Math Art Contest\naccount-shell-heading-mygraphs-examples = Examples\naccount-shell-heading-mygraphs-recovered-work = Recovered Work\naccount-shell-heading-mygraphs-saved-constructions = Saved Constructions\naccount-shell-heading-mygraphs-saved-graphs = Saved Graphs\naccount-shell-heading-name-email = Your Name & Email\naccount-shell-heading-resources = Resources\naccount-shell-heading-save-construction = Save This Construction\naccount-shell-heading-save-graph = Save This Graph\naccount-shell-heading-share-graph = Share Your Graph\naccount-shell-heading-submit-graph = Submit This Graph\naccount-shell-heading-title-mygraphs-account-settings = Account Settings\naccount-shell-heading-title-mygraphs-search = Search\naccount-shell-heading-tours = Tours\naccount-shell-heading-unsupported-browser = Unsupported Browser\naccount-shell-label-account-information = Account Information\naccount-shell-label-age-13-14 = Age 13â14\naccount-shell-label-age-15-16 = Age 15â16\naccount-shell-label-age-17-18 = Age 17â18\naccount-shell-label-beta = Beta\naccount-shell-label-betchacant-loading = Challenge accepted...\naccount-shell-label-country-placeholder = Your Country\naccount-shell-label-created-days-ago = { $number } days ago\naccount-shell-label-created-hours-ago = { $number } hours ago\naccount-shell-label-created-last-week = last week\naccount-shell-label-created-minutes-ago = { $number } minutes ago\naccount-shell-label-created-on-date = on { $month } { $day }, { $year }\naccount-shell-label-created-one-hour-ago = one hour ago\naccount-shell-label-created-one-minute-ago = one minute ago\naccount-shell-label-created-seconds-ago = less than a minute ago\naccount-shell-label-created-weeks-ago = { $number } weeks ago\naccount-shell-label-created-yesterday = yesterday\naccount-shell-label-email-address = Email Address\naccount-shell-label-export-size-large-rectangle = Large Rectangle\naccount-shell-label-export-size-large-square = Large Square\naccount-shell-label-export-size-medium-rectangle = Medium Rectangle\naccount-shell-label-export-size-medium-square = Medium Square\naccount-shell-label-export-size-small-square = Small Square\naccount-shell-label-feedback-email = Please provide an email so we can write back.\naccount-shell-label-feedback-placeholder = Send us your question or suggestion...\naccount-shell-label-feedback-sending = sending...\naccount-shell-label-full-name = Full Name\naccount-shell-label-graph-title = Title\naccount-shell-label-help = Help\naccount-shell-label-help-menu = Help Menu\naccount-shell-label-language = Language\naccount-shell-label-loading = Loading...\naccount-shell-label-math-art-contest = Global Math Art Contest\naccount-shell-label-month-apr = Apr\naccount-shell-label-month-aug = Aug\naccount-shell-label-month-dec = Dec\naccount-shell-label-month-feb = Feb\naccount-shell-label-month-jan = Jan\naccount-shell-label-month-jul = Jul\naccount-shell-label-month-jun = Jun\naccount-shell-label-month-mar = Mar\naccount-shell-label-month-may = May\naccount-shell-label-month-nov = Nov\naccount-shell-label-month-oct = Oct\naccount-shell-label-month-sep = Sep\naccount-shell-label-mygraphs-example = example\naccount-shell-label-mygraphs-last-saved = last saved: { $date }\naccount-shell-label-mygraphs-no-unsaved-changes = no unsaved changes\naccount-shell-label-mygraphs-unsaved-graph = unsaved graph\naccount-shell-label-no-unsaved-changes = No Unsaved Changes\naccount-shell-label-open-graph-mac = { $open_graph } (cmd+o)\naccount-shell-label-open-graph-pc = { $open_graph } (ctrl+o)\naccount-shell-label-optional = optional\naccount-shell-label-save-changes-mac = Save Changes (cmd+s)\naccount-shell-label-save-changes-pc = Save Changes (ctrl+s)\naccount-shell-label-saving-graph = Saving graph...\naccount-shell-label-share = share\naccount-shell-label-share-graph = Share Graph\naccount-shell-label-share-link = Share this link:\naccount-shell-label-submitting = Submitting...\naccount-shell-label-success = Success!\naccount-shell-label-zoom = Zoom: { $value }%\naccount-shell-link-account-settings = Account Settings\naccount-shell-link-download-chrome = Click here to download Google Chrome.\naccount-shell-link-getting-started = Getting Started\naccount-shell-link-help = Help\naccount-shell-link-help-center = Help Center\naccount-shell-link-keyboard-shortcuts = Keyboard Shortcuts\naccount-shell-link-learn-more = Learn More\naccount-shell-link-learn-more-art-contest = Learn more.\naccount-shell-link-mygraphs-log-in = Log In\naccount-shell-link-mygraphs-sign-up = Sign Up\naccount-shell-link-privacy = Privacy Policy\naccount-shell-link-share-thoughts = Share your thoughts!\naccount-shell-link-sign-out = Sign Out\naccount-shell-link-terms = Terms of Service\naccount-shell-link-user-guide = Desmos User Guide\naccount-shell-link-video-tutorials = Video Tutorials\naccount-shell-narration-back = Back\naccount-shell-narration-clear-selected-country = Clear Selected Country\naccount-shell-narration-graph-preview = Graph Preview\naccount-shell-narration-image-download = Image Download\naccount-shell-narration-language-menu = Language Options Menu\naccount-shell-narration-mygraphs-open-graph = Open graph\naccount-shell-narration-share-options = Share Options\naccount-shell-narration-size-options = Size Options\naccount-shell-text-3d-confirm-leave = Are you sure you want to leave this construction? Your unsaved work will be lost.\naccount-shell-text-art-contest-about = Want to share your awesome graph with the world? Students ages 13-18 can enter our Global Math Art Contest before April 30th for a chance to be featured on our website and win other prizes!\naccount-shell-text-art-contest-copyright-agreement = This is my original work and doesn't use copyrighted material.\naccount-shell-text-art-contest-notice-default = Open one of your saved graphs or create a new one, and then submit it here! Max one entry per person.\naccount-shell-text-art-contest-notice-login = If you want to submit a graph you've made, please sign in and open your graph.\naccount-shell-text-art-contest-success = Submission received. If you'd like to revise your submission, feel free to resubmit anytime before April 30th. We'll only look at the most recent submission. Congratulations, and keep graphing!\naccount-shell-text-check-recovery-link = Please check your email for a password recovery link.\naccount-shell-text-confirm-leave = Are you sure you want to leave this graph? Your unsaved work will be lost.\naccount-shell-text-construction-cleared = Construction Cleared.\naccount-shell-text-contest-submit-for-others = Are you a teacher or guardian looking to submit your student's graph?\naccount-shell-text-download-instructions = To download, right click on the image of the graph select \"Save As.\" You might also be able to click and drag the image onto your desktop.\naccount-shell-text-embossing-etc-print = Set paper size to { $size }. Then click \"Edit\" and select File > Emboss.\naccount-shell-text-embossing-etc-save = Save this image. Open Firebird, select File > Open > Image File, and open the image.\naccount-shell-text-embossing-vpmax-print = Right click image and select \"print\". Set paper size to { $size }.\naccount-shell-text-embossing-vpmax-save = Right click graph image and save to desktop.\naccount-shell-text-error = error\naccount-shell-text-feedback-sent = Thanks for the feedbackâyou'll hear from us soon!\naccount-shell-text-geometry-confirm-leave = Are you sure you want to leave this construction? Your unsaved work will be lost.\naccount-shell-text-graph-cleared = Graph cleared.\naccount-shell-text-local-regulations-notice = Local regulations require you to submit your graph through your teacher or guardian. Share this link with them:\naccount-shell-text-logged-in = Logged in successfully!\naccount-shell-text-login-window-blocked-apple = Login window blocked. Please allow popups from desmos.com to sign in with Apple\naccount-shell-text-login-window-blocked-google = Login window blocked. Please allow popups from desmos.com to sign in with Google.\naccount-shell-text-maintenance-mode = Desmos is in Maintenance Mode.\naccount-shell-text-mygraphs-attempting-recovery = Attempting recovery...\naccount-shell-text-mygraphs-count-more = { $count } more...\naccount-shell-text-mygraphs-current-construction = Current Construction\naccount-shell-text-mygraphs-current-graph = Current Graph\naccount-shell-text-mygraphs-deleting = Deleting...\naccount-shell-text-mygraphs-loading = Loading...\naccount-shell-text-mygraphs-lost-work = Lost work?\naccount-shell-text-mygraphs-maintenance-mode = Desmos is temporarily in maintenance mode. You can open example graphs, but won't be able to sign in, open your graphs, or save any changes. We're so sorry for the inconvenience.\naccount-shell-text-mygraphs-new-blank-graph = New Blank Graph\naccount-shell-text-mygraphs-new-construction = New Construction\naccount-shell-text-mygraphs-no-examples-match-search = No examples match your search.\naccount-shell-text-mygraphs-no-saved-graphs = No saved graphs yet.\naccount-shell-text-mygraphs-no-search-results = No saved graphs match your search.\naccount-shell-text-mygraphs-no-unsaved-graphs = Couldn't find any unsaved graphs.\naccount-shell-text-mygraphs-opened-graph = Opened '{ $graphTitle }'\naccount-shell-text-mygraphs-opening = Opening...\naccount-shell-text-mygraphs-or = or\naccount-shell-text-mygraphs-search-by-title = search by title\naccount-shell-text-mygraphs-share-thoughts = Share your thoughts!\naccount-shell-text-mygraphs-slow-big-constructions = This can take a little while for big constructions...\naccount-shell-text-mygraphs-slow-big-graphs = This can take a little while for big graphs...\naccount-shell-text-mygraphs-synced = synced!\naccount-shell-text-mygraphs-to-save-constructions = to save your constructions!\naccount-shell-text-mygraphs-to-save-graphs = to save your graphs!\naccount-shell-text-mygraphs-updating-graphs = updating graphs...\naccount-shell-text-mygraphs-version = Version\naccount-shell-text-new-construction-created = New construction created.\naccount-shell-text-new-graph-created = New graph created.\naccount-shell-text-or = or\naccount-shell-text-saved = saved\naccount-shell-text-unsupported-browser-android = Desmos works best on your version of Android if you use the Chrome Browser.\naccount-shell-text-untitled = Untitled\naccount-shell-text-untitled-graph = Untitled Graph\nshared-button-accept = Accept\nshared-button-cancel = Cancel\nshared-button-change-email-address = Change Email Address\nshared-button-change-email-and-password = Change Email and Password\nshared-button-close-dialog = Close Dialog\nshared-button-continue-to-desmos = Continue to Desmos\nshared-button-create-account = Create Account\nshared-button-delete-account-question = Delete your Desmos account?\nshared-button-email-address-narrow = Email\nshared-button-email-address-wide = Email Address\nshared-button-external-account-narrow = External\nshared-button-external-account-wide = External Account\nshared-button-go-to-account-settings = Go to Account Settings\nshared-button-google-account-narrow = Google\nshared-button-google-account-wide = Google Account\nshared-button-i-am-not-a-teacher = I am not a teacher.\nshared-button-learn-more-capitalized = Learn More\nshared-button-login = Log in\nshared-button-login-capitalized = Log In\nshared-button-login-with-apple = Log in with Apple\nshared-button-login-with-google = Log in with Google\nshared-button-more-options-menu = More Options\nshared-button-recover-password = Recover Password\nshared-button-save = Save\nshared-button-send-delete-account-email = Send Delete Account Email\nshared-button-send-email = Send Email\nshared-button-sign-up-as-a-teacher = Sign up as a teacher.\nshared-button-try-again = Didn't work? Try again!\nshared-calculator-button-braille-mode-nemeth = Nemeth\nshared-calculator-button-braille-mode-ueb = UEB\nshared-calculator-button-clear = clear\nshared-calculator-button-clear-all = clear all\nshared-calculator-button-controlbar-functions = functions\nshared-calculator-button-language = Language\nshared-calculator-button-mac = Mac Shortcuts\nshared-calculator-button-print = Print\nshared-calculator-button-projector-mode = Projector Mode\nshared-calculator-button-reverse-contrast = Reverse Contrast\nshared-calculator-button-windows-chrome = Windows / ChromeOS Shortcuts\nshared-calculator-error-add-arguments-to-definition-many = Try including '{ $symbols }' and '{ $lastSymbol }' as arguments by defining the function as '{ $newSignature }'.\nshared-calculator-error-add-arguments-to-definition-one = Try including '{ $lastSymbol }' as an argument by defining the function as '{ $newSignature }'.\nshared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.\nshared-calculator-error-adjacent-numbers = Sorry, I don't know what to do with adjacent numbers '{ $left }' and '{ $right }'. Try using parentheses or a '*' symbol.\nshared-calculator-error-and-type-error = Cannot apply { $symbol } to { $symbol1 } and { $symbol2 }.\nshared-calculator-error-ans-undefined = The previous expression didn't define any value for ans.\nshared-calculator-error-assignments-unsupported = This calculator does not support defining variables.\nshared-calculator-error-bad-ans-context = You can't use 'ans' in this context.\nshared-calculator-error-bad-implicit-call = Use parentheses around the argument of '{ $symbol }'.\nshared-calculator-error-bad-integral-bound-dependency = Integration bounds can't depend on integration variable '{ $symbol }'.\nshared-calculator-error-bad-log-exponent = Only { $form } is supported. Otherwise, use parens.\nshared-calculator-error-bad-product-bound-dependency = Product bounds can't depend on product index '{ $symbol }'.\nshared-calculator-error-bad-sample-size = Sample size must be at least 1.\nshared-calculator-error-bad-sum-bound-dependency = Summation bounds can't depend on summation index '{ $symbol }'.\nshared-calculator-error-bad-trig-exponent = Only { $form1 } and { $form2 } are supported. Otherwise, use parens.\nshared-calculator-error-bad-tuple-dimensions = Points may only have { $symbol } coordinates.\nshared-calculator-error-binary-operator-missing-operand = You need something on both sides of the '{ $symbol }' symbol.\nshared-calculator-error-blank-expression = You haven't written anything yet.\nshared-calculator-error-boxplot-breadth-invalid = Invalid height. Try using any number.\nshared-calculator-error-boxplot-offset-invalid = Invalid offset. Try using any number.\nshared-calculator-error-cannot-redefine = You can't redefine '{ $symbol }' because it's already defined.\nshared-calculator-error-cannot-redefine-root = You can't define '{ $symbol }' because '{ $symbolRoot }' is already defined.\nshared-calculator-error-cannot-subscript = '{ $symbol }' cannot have a subscript.\nshared-calculator-error-cdf-max-invalid = Invalid cdf max. Try using any number.\nshared-calculator-error-cdf-max-less-than-min = Invalid cdf limits. Min should be less than max.\nshared-calculator-error-cdf-min-invalid = Invalid cdf min. Try using any number.\nshared-calculator-error-cdf-too-many-arguments = 'cdf' should be called on a distribution with at most two numbers. { $recommendation }\nshared-calculator-error-cdf-too-many-arguments-recommendation = For example, try typing: D.cdf(-1,1) where D=normaldist().\nshared-calculator-error-cdf-wrong-arity = 'cdf' should be called on a distribution with at least one number. { $recommendation }\nshared-calculator-error-cdf-wrong-arity-recommendation = For example, try typing: D.cdf(x) where D=normaldist().\nshared-calculator-error-clickable-object-assignment-not-defined = \"{ $symbol }\" is not defined. Try using a different variable or adding a slider.\nshared-calculator-error-clickable-object-assignment-not-identifier = Invalid symbol. Try using a single letter.\nshared-calculator-error-clickable-object-invalid-expression = Can't evaluate this. Try a number or simple expression.\nshared-calculator-error-colon-missing-condition = The left side of a ':' must be a condition, like 'x>1'.\nshared-calculator-error-color-arity = '{ $symbol }' should be called with 3 arguments. { $recommendation }\nshared-calculator-error-color-arity-recommendation = For example, try typing: { $recommendation }.\nshared-calculator-error-color-not-assigned = To use a color, you must assign it to a variable.\nshared-calculator-error-colors-unsupported = This calculator does not support colors.\nshared-calculator-error-comparator-type-error = Cannot compare { $symbol1 } to { $symbol2 }.\nshared-calculator-error-complicated-double-inequality = We only support solved double inequalities. Try deleting one side of the inequality.\nshared-calculator-error-complicated-polar-implicit = Polar equations must be linear in r.\nshared-calculator-error-constant-unsupported = This calculator does not support the constant '{ $symbol }'.\nshared-calculator-error-deeply-nested = Definitions are nested too deeply.\nshared-calculator-error-dependency-cycle = '{ $symbols }' and '{ $lastSymbol }' can't be defined in terms of each other.\nshared-calculator-error-derivative-missing-body = What do you want to take the derivative of?\nshared-calculator-error-derivative-type-error = Cannot take the derivative of { $symbol }.\nshared-calculator-error-derivative-variable-type-error = Cannot take derivative with respect to '{ $symbol1 }' because it is { $symbol2 }.\nshared-calculator-error-differential-with-superscript = Integration variable cannot have a superscript.\nshared-calculator-error-distribution-as-function = Cannot call distribution '{ $symbol }' as a function. Try '{ $symbol }.pdf(x)'.\nshared-calculator-error-divide-type-error = Cannot divide { $symbol1 } by { $symbol2 }.\nshared-calculator-error-domain-max-invalid = Invalid domain max. Try using any number.\nshared-calculator-error-domain-max-less-than-min = Invalid domain limits. Min should be less than max.\nshared-calculator-error-domain-min-invalid = Invalid domain min. Try using any number.\nshared-calculator-error-dot-lhs-type-error = Cannot call '{ $symbol }' on { $type }.\nshared-calculator-error-empty-paren = Parentheses cannot be empty.\nshared-calculator-error-empty-pipe = Absolute value symbol cannot be empty.\nshared-calculator-error-empty-radical = Radical cannot be empty.\nshared-calculator-error-empty-radical-index = Radical index cannot be empty.\nshared-calculator-error-empty-square-bracket = Square brackets cannot be empty.\nshared-calculator-error-empty-subscript = Subscripts cannot be empty.\nshared-calculator-error-empty-superscript = Superscripts cannot be empty.\nshared-calculator-error-equation-required = Try adding an equals sign to turn this into an equation.\nshared-calculator-error-equation-required-symbol = Try adding '{ $lhs }' to the beginning of this equation.\nshared-calculator-error-equations-unsupported = This calculator does not support this type of equation.\nshared-calculator-error-exponent-type-error = Cannot raise { $symbol1 } to { $symbol2 }.\nshared-calculator-error-feature-unavailable = This feature is not available in the current calculator.\nshared-calculator-error-fraction-empty = You need a numerator and denominator for your fraction.\nshared-calculator-error-fraction-missing-denominator = You need a denominator for the bottom of your fraction.\nshared-calculator-error-fraction-missing-numerator = You need a numerator for the top of your fraction.\nshared-calculator-error-function-definition-unsupported = This calculator does not support function definitions.\nshared-calculator-error-function-not-defined = Function '{ $dependency }' is not defined.\nshared-calculator-error-function-type-error-1 = Function '{ $fn }' cannot be applied to { $arg }.\nshared-calculator-error-function-type-error-2 = Function '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.\nshared-calculator-error-function-type-error-many = Function '{ $fn }' cannot be applied to these arguments.\nshared-calculator-error-function-unsupported = This calculator does not support the '{ $symbol }' function.\nshared-calculator-error-heterogeneous-list = All elements of a list must have the same type.\nshared-calculator-error-identifier-as-function = '{ $symbol }' is a function. Try using parentheses.\nshared-calculator-error-illegal-bin-width = The second argument to '{ $symbol }' must be a positive number.\nshared-calculator-error-illegal-dot-call = Function '{ $symbol }' cannot be called with dot notation.\nshared-calculator-error-implicits-disabled = Plotting implicit equations and inequalities is disabled.\nshared-calculator-error-incorrect-product-lower-bound = Lower bound of a product must set a variable equal to a number. Try n=1.\nshared-calculator-error-incorrect-sum-lower-bound = Lower bound of a sum must set a variable equal to a number. Try n=1.\nshared-calculator-error-index-type-error = Cannot index { $symbol1 } with { $symbol2 }.\nshared-calculator-error-inequalities-disabled = Plotting inequalities is disabled.\nshared-calculator-error-inequalities-unsupported = This calculator does not support inequalities.\nshared-calculator-error-inequality-chain-too-long = Cannot chain more than 2 inequalities.\nshared-calculator-error-integral-argument-type-error = Cannot take the integral of { $symbol }.\nshared-calculator-error-integral-lower-bound-type-error = Lower bound of an integral cannot be { $symbol }.\nshared-calculator-error-integral-missing-body = What do you want to take the integral of?\nshared-calculator-error-integral-missing-bound = Integrals must have upper and lower bounds.\nshared-calculator-error-integral-missing-differential = Integrand must end with an integration variable, like dx.\nshared-calculator-error-integral-upper-bound-type-error = Upper bound of an integral cannot be { $symbol }.\nshared-calculator-error-invalid-dependent-first-table-column = This column header can't be defined elsewhere in the calculator.\nshared-calculator-error-invalid-double-inequality-variables = We only plot double inequalities of x and y.\nshared-calculator-error-invalid-first-table-column = First column may not be { $most } or { $last }.\nshared-calculator-error-invalid-half-empty-range = Range must have an upper and lower bound.\nshared-calculator-error-invalid-implicit-variables = We only support implicit equations of x and y.\nshared-calculator-error-invalid-inequality-variables = We only plot inequalities of x and y, or r and Î¸.\nshared-calculator-error-invalid-lhs = Sorry, you can't graph { $symbol } as a function of anything yet.\nshared-calculator-error-invalid-operator-name = Operator names may only contain letters.\nshared-calculator-error-invalid-regression-parameter = '{ $symbol }' may not be used as a regression parameter. Try using a list.\nshared-calculator-error-invalid-subscript = Subscripts may only contain letters and digits. '{ $symbol }' is not allowed.\nshared-calculator-error-invalid-table-entry = Table entries must be simple expressions. { $supplement }\nshared-calculator-error-invalid-table-header = Table headers must be simple expressions. { $supplement }\nshared-calculator-error-list-type-error = Cannot store { $symbol1 } in a list.\nshared-calculator-error-logbase-unsupported = This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'.\nshared-calculator-error-malformed-point = Points are written like this: (1, 2).\nshared-calculator-error-matrix-add-dimensions = Cannot add matrices with different dimensions.\nshared-calculator-error-matrix-assignment = This calculator does not support this type of variable definition. Try using 'New Matrix'.\nshared-calculator-error-matrix-element-type-error = Cannot use { $arg } as an element of a matrix.\nshared-calculator-error-matrix-fractional-power = A matrix can only be raised to integer powers.\nshared-calculator-error-matrix-invalid-variable = Cannot use '{ $symbol }' as a variable.\nshared-calculator-error-matrix-multiply-dimensions = Cannot multiply matrices with incompatible dimensions.\nshared-calculator-error-matrix-power-dimensions = Only square matrices can be raised to a power.\nshared-calculator-error-matrix-subtract-dimensions = Cannot subtract matrices with different dimensions.\nshared-calculator-error-method-requires-list = '{ $symbol }' requires a list. For example, try typing: { $recommendation }.\nshared-calculator-error-mismatched-braces = Expected '{ $symbol1 }' to match '{ $symbol2 }'.\nshared-calculator-error-mismatched-double-inequality = Double inequalities must both go the same way, e.g. { $example }.\nshared-calculator-error-multiply-defined = You've defined '{ $dependency }' in more than one place. Try deleting some of the definitions of '{ $dependency }'.\nshared-calculator-error-multiply-type-error = Cannot multiply { $symbol1 } by { $symbol2 }.\nshared-calculator-error-negative-type-error = Cannot negate { $symbol }.\nshared-calculator-error-non-arithmetic-range = Ranges must be arithmetic sequences.\nshared-calculator-error-non-list-double-reducer = Both arguments of '{ $symbol }' must be lists. For example, try typing: { $recommendation }.\nshared-calculator-error-non-list-parameterized-reducer = The first argument of '{ $symbol }' must be a list. For example, try typing: { $recommendation }.\nshared-calculator-error-non-singular-inverse = Singular matrices do not have an inverse.\nshared-calculator-error-non-square-determinant = Only square matrices have a determinant.\nshared-calculator-error-non-square-inverse = Only square matrices have an inverse.\nshared-calculator-error-non-square-trace = Only square matrices have a trace.\nshared-calculator-error-optimization-error = We couldn't find any region where this model is defined.\nshared-calculator-error-ordered-pair-access-type-error = Cannot access a coordinate of { $symbol }.\nshared-calculator-error-parameter-already-defined = You can't use '{ $dependency }' as a parameter of this function because '{ $dependency }' is already defined.\nshared-calculator-error-parse-error = Sorry, I don't understand this.\nshared-calculator-error-pdf-wrong-arity = 'pdf' should be called on a distribution with a number. { $recommendation }\nshared-calculator-error-pdf-wrong-arity-recommendation = For example, try typing: D.pdf(x) where D=normaldist().\nshared-calculator-error-percent-missing-of = '%' must be used with 'of'. Try '25% of 12'.\nshared-calculator-error-piecewise-branch-length-error = When a piecewise condition depends on a free variable (like \"{ $symbol }\") and its branches are lists, the lists must have the same length.\nshared-calculator-error-piecewise-branch-type-error = Cannot use { $symbol1 } and { $symbol2 } as the branches in a piecewise. Every branch must have the same type.\nshared-calculator-error-piecewise-condition-type-error = The condition in a piecewise expression must be { $symbol1 } but was { $symbol2 }.\nshared-calculator-error-piecewise-missing-condition = A piecewise expression must have at least one condition.\nshared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.\nshared-calculator-error-point-type-error = Cannot use { $symbol1 } as a coordinate of { $symbol2 }.\nshared-calculator-error-points-unsupported = This calculator does not support points.\nshared-calculator-error-polygon-list-type-error = A single argument to polygon should be a point list, not { $type }.\nshared-calculator-error-polygon-point-args-error = Some of your arguments are not points.\nshared-calculator-error-prime-without-paren = Primed function calls must use parentheses.\nshared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.\nshared-calculator-error-product-argument-type-error = Cannot take the product of { $symbol }.\nshared-calculator-error-product-infinite-bound-type-error = Product bounds must be finite numbers.\nshared-calculator-error-product-lower-bound-type-error = Lower bound of a product cannot be { $symbol }.\nshared-calculator-error-product-missing-body = What do you want to take the product of?\nshared-calculator-error-product-missing-bound = Products must have upper and lower bounds.\nshared-calculator-error-product-upper-bound-type-error = Upper bound of a product cannot be { $symbol }.\nshared-calculator-error-random-arity = 'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).\nshared-calculator-error-random-from-broadcast-distribution = Cannot sample from a list of distributions\nshared-calculator-error-regression-type-error = Cannot regress { $symbol1 } against { $symbol2 }.\nshared-calculator-error-regressions-unsupported = This calculator does not support regressions.\nshared-calculator-error-self-referential-function = The definition of function '{ $symbol }' cannot depend on '{ $symbol }'.\nshared-calculator-error-shadowed-index = You can't use '{ $symbol }' as an index because it's already defined.\nshared-calculator-error-shadowed-integration-variable = You can't use '{ $symbol }' as an integration variable because it's already defined.\nshared-calculator-error-simulation-fps-nonnegative = FPS must evaluate to a non-negative number\nshared-calculator-error-single-variable-implicit-equations-disabled = Plotting single-variable implicit equations is disabled.\nshared-calculator-error-slider-limit-references-export = Slider limits cannot depend on the slider variable '{ $symbol }'.\nshared-calculator-error-slider-max-invalid = Invalid slider max. Try using any number.\nshared-calculator-error-slider-max-less-than-min = Invalid slider limits. Min should be less than max.\nshared-calculator-error-slider-min-invalid = Invalid slider min. Try using any number.\nshared-calculator-error-slider-step-invalid = Invalid slider step. Try using any number.\nshared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.\nshared-calculator-error-sum-argument-type-error = Cannot take the sum of { $symbol }.\nshared-calculator-error-sum-infinite-bound-type-error = Summation bounds must be finite numbers.\nshared-calculator-error-sum-lower-bound-type-error = Lower bound of a sum cannot be { $symbol }.\nshared-calculator-error-sum-missing-body = What do you want to take the sum of?\nshared-calculator-error-sum-missing-bound = Sums must have upper and lower bounds.\nshared-calculator-error-sum-upper-bound-type-error = Upper bound of a sum cannot be { $symbol }.\nshared-calculator-error-superscript-with-prime = Superscripts and primes cannot be combined.\nshared-calculator-error-table-entry-type-error = Table entry cannot be { $symbol }.\nshared-calculator-error-table-equation-supplement = Equations are not allowed.\nshared-calculator-error-table-function-definition-supplement = Function definitions are not allowed.\nshared-calculator-error-table-generic-supplement = This type of expression is not allowed.\nshared-calculator-error-table-header-type-error = Table header cannot be { $symbol }.\nshared-calculator-error-table-inequality-supplement = Inequalities are not allowed.\nshared-calculator-error-table-list-supplement = Lists are not allowed.\nshared-calculator-error-table-regression-supplement = Regressions are not allowed.\nshared-calculator-error-tdist-wrong-arity = 'tdist' requires 1 argument. For example, try typing: tdist(1).\nshared-calculator-error-too-many-arguments = '{ $symbol }' accepts at most { $max } arguments.\nshared-calculator-error-too-many-variables-many-symbols = Too many variables. Try defining '{ $variables }' or '{ $lastVariable }'.\nshared-calculator-error-too-many-variables-no-symbols = Too many variables, I don't know what to do with this.\nshared-calculator-error-too-many-variables-one-symbol = Too many variables. Try defining '{ $variable }'.\nshared-calculator-error-ttest-list-too-short = Lists for '{ $symbol }' must have at least 2 elements.\nshared-calculator-error-two-numbers-error = Cannot make a polygon from two numbers.\nshared-calculator-error-unary-operator-missing-left = You need something before the '{ $symbol }' symbol.\nshared-calculator-error-unary-operator-missing-right = You need something after the '{ $symbol }' symbol.\nshared-calculator-error-unexpected-inequality = Cannot use an inequality here.\nshared-calculator-error-unexpected-prime = Sorry, I don't understand this use of prime notation.\nshared-calculator-error-unexpected-subscript = Only functions and variables may have subscripts.\nshared-calculator-error-unexpected-symbol = Sorry, I don't understand the way that '{ $symbol }' is used here.\nshared-calculator-error-unknown = Unknown Error\nshared-calculator-error-unplottable-polar-function = We can't plot Î¸ as a function of r. Try plotting r(Î¸) instead.\nshared-calculator-error-unrecognized-symbol = Sorry, I don't understand the '{ $symbol }' symbol.\nshared-calculator-error-variable-as-function = Variable '{ $dependency }' can't be used as a function.\nshared-calculator-error-variable-filter = List filters cannot depend on free variable '{ $symbol }'.\nshared-calculator-error-variable-function-free-variable = Function '{ $functionSymbol }' cannot depend on free variable '{ $variableSymbol }'.\nshared-calculator-error-variable-list-indices = List indices cannot depend on free variable '{ $symbol }'.\nshared-calculator-error-variable-range = Range cannot depend on free variable '{ $symbol }'.\nshared-calculator-error-variable-sample-size = Sample size cannot depend on free variable '{ $symbol }'.\nshared-calculator-error-variable-seed = Random seed cannot depend on free variable '{ $symbol }'.\nshared-calculator-error-variables-unsupported = This calculator does not support variables like '{ $variable }'.\nshared-calculator-error-wrong-arity-many-arg = Function '{ $dependency }' requires { $assignment_arity } arguments. { $supplement }\nshared-calculator-error-wrong-arity-single-arg-too-few = Function '{ $dependency }' requires an argument. { $supplement }\nshared-calculator-error-wrong-arity-single-arg-too-many = Function '{ $dependency }' requires only 1 argument. { $supplement }\nshared-calculator-error-wrong-arity-supplement = For example, try typing: { $recommendation }.\nshared-calculator-error-wrong-two-arg-arity = Function '{ $symbol }' requires 2 arguments. For example, try typing: { $recommendation }.\nshared-calculator-error-zero-arg-reducer = Function '{ $symbol }' requires at least one argument. For example, try typing: { $symbol }(1, 2).\nshared-calculator-heading-function-table-column-header = Function\nshared-calculator-heading-keyboard-shortcuts = Keyboard Shortcuts\nshared-calculator-heading-keyboard-shortcuts-audio-tracing = Audio Tracing\nshared-calculator-heading-keyboard-shortcuts-braille = Braille\nshared-calculator-heading-keyboard-shortcuts-common-actions = Common Actions\nshared-calculator-heading-keyboard-shortcuts-expression-entry-and-navigation = Expression Entry and Navigation\nshared-calculator-heading-keyboard-shortcuts-graphs-with-interactive-points = Graphs with Interactive Points\nshared-calculator-heading-keyboard-shortcuts-sliders = Sliders\nshared-calculator-heading-keyboard-shortcuts-symbols = Symbols\nshared-calculator-heading-keyboard-shortcuts-tables = Tables\nshared-calculator-heading-mac-table-column-header = Mac Shortcut\nshared-calculator-heading-shortcut-table-column-header = Shortcut\nshared-calculator-heading-windows-chrome-table-column-header = Windows / ChromeOS Shortcut\nshared-calculator-label-saved = Saved!\nshared-calculator-label-saving = Saving...\nshared-calculator-label-settings-display = Display\nshared-calculator-label-toast-learn-more = Learn more\nshared-calculator-label-toast-undo = Undo\nshared-calculator-label-tooltip-convert-to-decimal = Convert to decimal.\nshared-calculator-label-tooltip-convert-to-fraction = Convert to fraction.\nshared-calculator-label-value-type-any = an unknown object\nshared-calculator-label-value-type-bool = a true/false value\nshared-calculator-label-value-type-color = a color\nshared-calculator-label-value-type-distribution = a distribution\nshared-calculator-label-value-type-empty-list = an empty list\nshared-calculator-label-value-type-error = an error object\nshared-calculator-label-value-type-list-of-any = a list of unknown objects\nshared-calculator-label-value-type-list-of-bool = a list of true/false values\nshared-calculator-label-value-type-list-of-colors = a list of colors\nshared-calculator-label-value-type-list-of-distributions = a list of distributions\nshared-calculator-label-value-type-list-of-numbers = a list of numbers\nshared-calculator-label-value-type-list-of-points = a list of points\nshared-calculator-label-value-type-matrix = a matrix\nshared-calculator-label-value-type-number = a number\nshared-calculator-label-value-type-point = a point\nshared-calculator-label-value-type-seed = a string\nshared-calculator-narration-braille-mode = Braille Mode\nshared-calculator-narration-braille-mode-nemeth = Braille mode Nemeth\nshared-calculator-narration-braille-mode-off = Braille mode off\nshared-calculator-narration-braille-mode-ueb = Braille mode UEB\nshared-calculator-narration-control-toggle-switch-to-default = { $toggled } selected. Press Enter to switch to { $default }.\nshared-calculator-narration-control-toggle-switch-to-toggled = { $default } selected. Press Enter to switch to { $toggled }.\nshared-calculator-narration-display-as-decimal = Displaying as fraction. Press Enter to display as Decimal\nshared-calculator-narration-display-as-fraction = Displaying as decimal. Press Enter to display as Fraction\nshared-calculator-narration-evaluation = equals { $answer }\nshared-calculator-narration-expression = Expression\nshared-calculator-narration-expression-index = Expression { $index }\nshared-calculator-narration-input-error = input has an error\nshared-calculator-narration-keypad = keypad\nshared-calculator-narration-keypad-controlbar = Control Bar\nshared-calculator-narration-keypad-key-10-n = Times ten to the power of\nshared-calculator-narration-keypad-key-abs = Absolute Value\nshared-calculator-narration-keypad-key-alpha = Alpha\nshared-calculator-narration-keypad-key-ans = Answer\nshared-calculator-narration-keypad-key-arccos = Inverse Cosine\nshared-calculator-narration-keypad-key-arccot = Inverse Cotangent\nshared-calculator-narration-keypad-key-arccsc = Inverse Cosecant\nshared-calculator-narration-keypad-key-arcsec = Inverse Secant\nshared-calculator-narration-keypad-key-arcsin = Inverse Sine\nshared-calculator-narration-keypad-key-arctan = Inverse Tangent\nshared-calculator-narration-keypad-key-backspace = Backspace\nshared-calculator-narration-keypad-key-beta = Beta\nshared-calculator-narration-keypad-key-binomialdist = Binomial Distribution\nshared-calculator-narration-keypad-key-boxplot = Box Plot\nshared-calculator-narration-keypad-key-cdf = Cumulative Density Function\nshared-calculator-narration-keypad-key-ceil = Ceiling\nshared-calculator-narration-keypad-key-corr = Correlation\nshared-calculator-narration-keypad-key-cos = Cosine\nshared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine\nshared-calculator-narration-keypad-key-cot = Cotangent\nshared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent\nshared-calculator-narration-keypad-key-cov = Co Variance\nshared-calculator-narration-keypad-key-csc = Cosecant\nshared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant\nshared-calculator-narration-keypad-key-cubed = Cubed\nshared-calculator-narration-keypad-key-decimal = Decimal\nshared-calculator-narration-keypad-key-distance = Distance\nshared-calculator-narration-keypad-key-divide = Divide\nshared-calculator-narration-keypad-key-dotplot = Dot Plot\nshared-calculator-narration-keypad-key-enter = Enter\nshared-calculator-narration-keypad-key-erf = Error Function\nshared-calculator-narration-keypad-key-exp = Exponent\nshared-calculator-narration-keypad-key-factorial = Factorial\nshared-calculator-narration-keypad-key-floor = Floor\nshared-calculator-narration-keypad-key-fraction = A over B\nshared-calculator-narration-keypad-key-histogram = Histogram\nshared-calculator-narration-keypad-key-int = Integral\nshared-calculator-narration-keypad-key-inversecdf = Inverse CDF function\nshared-calculator-narration-keypad-key-ittest = Independent T Test\nshared-calculator-narration-keypad-key-left-arrow = Left Arrow\nshared-calculator-narration-keypad-key-left-bracket = Left Bracket\nshared-calculator-narration-keypad-key-left-paren = Left Parenthesis\nshared-calculator-narration-keypad-key-ln = Natural Log\nshared-calculator-narration-keypad-key-log = Log\nshared-calculator-narration-keypad-key-loga = Log A\nshared-calculator-narration-keypad-key-mean = Mean\nshared-calculator-narration-keypad-key-median = Median\nshared-calculator-narration-keypad-key-midpoint = Midpoint\nshared-calculator-narration-keypad-key-minus = Minus\nshared-calculator-narration-keypad-key-normaldist = Normal Distribution\nshared-calculator-narration-keypad-key-nthroot = Nth Root\nshared-calculator-narration-keypad-key-pdf = Probability Density Function\nshared-calculator-narration-keypad-key-percent-of = Percent Of\nshared-calculator-narration-keypad-key-pi = Pi\nshared-calculator-narration-keypad-key-plus = Plus\nshared-calculator-narration-keypad-key-poissondist = Poisson Distribution\nshared-calculator-narration-keypad-key-polygon = Polygon\nshared-calculator-narration-keypad-key-product = Product\nshared-calculator-narration-keypad-key-quantile = Quantile\nshared-calculator-narration-keypad-key-quartile = Quartile\nshared-calculator-narration-keypad-key-random = Random Number\nshared-calculator-narration-keypad-key-reciprocal = Reciprocal\nshared-calculator-narration-keypad-key-right-arrow = Right Arrow\nshared-calculator-narration-keypad-key-right-bracket = Right Bracket\nshared-calculator-narration-keypad-key-right-paren = Right Parenthesis\nshared-calculator-narration-keypad-key-round = Round\nshared-calculator-narration-keypad-key-sec = Secant\nshared-calculator-narration-keypad-key-sech = Hyperbolic Secant\nshared-calculator-narration-keypad-key-shift = Shift\nshared-calculator-narration-keypad-key-sin = Sine\nshared-calculator-narration-keypad-key-sinh = Hyperbolic Sine\nshared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation\nshared-calculator-narration-keypad-key-sqrt = Square Root\nshared-calculator-narration-keypad-key-squared = Squared\nshared-calculator-narration-keypad-key-stats = Summary statistics\nshared-calculator-narration-keypad-key-stdev = Standard Deviation\nshared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population\nshared-calculator-narration-keypad-key-subscript = Subscript\nshared-calculator-narration-keypad-key-sum = Sum\nshared-calculator-narration-keypad-key-superscript = Superscript\nshared-calculator-narration-keypad-key-tan = Tangent\nshared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent\nshared-calculator-narration-keypad-key-tau = Tau\nshared-calculator-narration-keypad-key-tdist = Student-t Distribution\nshared-calculator-narration-keypad-key-theta = Theta\nshared-calculator-narration-keypad-key-times = Times\nshared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace\nshared-calculator-narration-keypad-key-toggle-letters = Toggle Letters\nshared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers\nshared-calculator-narration-keypad-key-tscore = T Score\nshared-calculator-narration-keypad-key-ttest = T Test\nshared-calculator-narration-keypad-key-uniformdist = Uniform Distribution\nshared-calculator-narration-keypad-key-ythroot = Yth Root\nshared-calculator-narration-redo = redo\nshared-calculator-narration-settings-display-size = Display Size\nshared-calculator-narration-settings-display-size-default = Display size: default\nshared-calculator-narration-settings-display-size-large = Display size: large\nshared-calculator-narration-six-key-mode-off = Six Key Braille Input off\nshared-calculator-narration-six-key-mode-on = Six Key Braille Input on\nshared-calculator-narration-table-cell-coordinates = Row { $rowNumber } Column { $columnNumber }\nshared-calculator-narration-undo = undo\nshared-calculator-text-keyboard-shortcut-add-expression = Add an Expression\nshared-calculator-text-keyboard-shortcut-add-folder = Add a Folder\nshared-calculator-text-keyboard-shortcut-add-image = Add an Image\nshared-calculator-text-keyboard-shortcut-add-note = Add a Note\nshared-calculator-text-keyboard-shortcut-add-table = Add a Table\nshared-calculator-text-keyboard-shortcut-adjust-playback-speed = Adjust Playback Speed (1 = slowest, 5 = fastest)\nshared-calculator-text-keyboard-shortcut-announce-slider-animations = Announce Active Slider Animations\nshared-calculator-text-keyboard-shortcut-beginning-of-block = Beginning of Current Block\nshared-calculator-text-keyboard-shortcut-beginning-of-expression = Beginning of Current Expression\nshared-calculator-text-keyboard-shortcut-close-a-dialog = Close a Dialog (like this one!)\nshared-calculator-text-keyboard-shortcut-collapse-expand-folder = Collapse / Expand Selected Folder\nshared-calculator-text-keyboard-shortcut-decrease-volume = Decrease Volume\nshared-calculator-text-keyboard-shortcut-decrease-x = Decrease X\nshared-calculator-text-keyboard-shortcut-decrease-x-larger = Decrease X by Larger Amount\nshared-calculator-text-keyboard-shortcut-decrease-y = Decrease Y\nshared-calculator-text-keyboard-shortcut-decrease-y-larger = Decrease Y by Larger Amount\nshared-calculator-text-keyboard-shortcut-delete-expression = Delete the Focused Expression\nshared-calculator-text-keyboard-shortcut-delete-selection = Delete Selection\nshared-calculator-text-keyboard-shortcut-end-of-block = End of Current Block\nshared-calculator-text-keyboard-shortcut-end-of-expression = End of Current Expression\nshared-calculator-text-keyboard-shortcut-exit-block = Exit Current Block\nshared-calculator-text-keyboard-shortcut-first-point = First Point\nshared-calculator-text-keyboard-shortcut-focus-expression-list = Focus the Expression List\nshared-calculator-text-keyboard-shortcut-focus-first-interactive-point = Focus First Interactive Point On Screen\nshared-calculator-text-keyboard-shortcut-hear-graph = Hear Graph\nshared-calculator-text-keyboard-shortcut-hear-specific-branch = Hear Only Branch 1 Through 10\nshared-calculator-text-keyboard-shortcut-increase-selection-left = Increase Selection Left\nshared-calculator-text-keyboard-shortcut-increase-selection-right = Increase Selection Right\nshared-calculator-text-keyboard-shortcut-increase-volume = Increase Volume\nshared-calculator-text-keyboard-shortcut-increase-x = Increase X\nshared-calculator-text-keyboard-shortcut-increase-x-larger = Increase X by Larger Amount\nshared-calculator-text-keyboard-shortcut-increase-y = Increase Y\nshared-calculator-text-keyboard-shortcut-increase-y-larger = Increase Y by Larger Amount\nshared-calculator-text-keyboard-shortcut-last-point = Last Point\nshared-calculator-text-keyboard-shortcut-move-to-denominator = Move to Denominator Within Fraction\nshared-calculator-text-keyboard-shortcut-move-to-numerator = Move to Numerator Within Fraction\nshared-calculator-text-keyboard-shortcut-move-to-origin = Move to Origin\nshared-calculator-text-keyboard-shortcut-nemeth-mode = Switch to Nemeth\nshared-calculator-text-keyboard-shortcut-next-character = Next Character\nshared-calculator-text-keyboard-shortcut-next-curve = Move to Next Curve\nshared-calculator-text-keyboard-shortcut-next-expression = Move to Next Expression\nshared-calculator-text-keyboard-shortcut-next-interactive-point = Go to Next Interactive Point\nshared-calculator-text-keyboard-shortcut-next-poi = Next Point of Interest\nshared-calculator-text-keyboard-shortcut-next-point = Next Point\nshared-calculator-text-keyboard-shortcut-open-a-graph = Open a Graph\nshared-calculator-text-keyboard-shortcut-open-expression-options = Open Options for the Focused Expression\nshared-calculator-text-keyboard-shortcut-previous-character = Previous Character\nshared-calculator-text-keyboard-shortcut-previous-curve = Move to Previous Curve\nshared-calculator-text-keyboard-shortcut-previous-expression = Move to Previous Expression\nshared-calculator-text-keyboard-shortcut-previous-interactive-point = Go to Previous Interactive Point\nshared-calculator-text-keyboard-shortcut-previous-poi = Previous Point of Interest\nshared-calculator-text-keyboard-shortcut-previous-point = Previous Point\nshared-calculator-text-keyboard-shortcut-print-a-graph = Print a Graph\nshared-calculator-text-keyboard-shortcut-print-mode = Switch to Print\nshared-calculator-text-keyboard-shortcut-redo = Redo\nshared-calculator-text-keyboard-shortcut-remove-empty-expression = Remove Selected Empty Expression\nshared-calculator-text-keyboard-shortcut-save-a-graph = Save a Graph\nshared-calculator-text-keyboard-shortcut-select-all = Select All\nshared-calculator-text-keyboard-shortcut-show-answer-as-decimal-or-fraction = Show Answer as Decimal or Fraction\nshared-calculator-text-keyboard-shortcut-show-or-hide-expression-list = Show or Hide the Expression List\nshared-calculator-text-keyboard-shortcut-slider-decrease = Decrease Value\nshared-calculator-text-keyboard-shortcut-slider-decrease-larger = Decrease Value by Larger Increment\nshared-calculator-text-keyboard-shortcut-slider-increase = Increase Value\nshared-calculator-text-keyboard-shortcut-slider-increase-larger = Increase Value by Larger Increment\nshared-calculator-text-keyboard-shortcut-slider-maximum = Highest Value\nshared-calculator-text-keyboard-shortcut-slider-minimum = Lowest Value\nshared-calculator-text-keyboard-shortcut-slider-trace-decrease = Decrease Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-decrease-larger = Decrease Value of Selected Slider by Larger Increment When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-increase = Increase Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-increase-larger = Increase Value of Selected Slider by Larger Increment When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-maximum = Move to Highest Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-minimum = Move to Lowest Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-next-slider = Select Next Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-previous-slider = Select Previous Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-speak-answer = Speak Answer\nshared-calculator-text-keyboard-shortcut-speak-branch = Speak Branch\nshared-calculator-text-keyboard-shortcut-speak-color = Speak Color\nshared-calculator-text-keyboard-shortcut-speak-focused-block = Speak Focused Block\nshared-calculator-text-keyboard-shortcut-speak-label = Speak Label\nshared-calculator-text-keyboard-shortcut-speak-left-adjacent-block = Speak Left-Adjacent Block\nshared-calculator-text-keyboard-shortcut-speak-parent-block = Speak Parent Block\nshared-calculator-text-keyboard-shortcut-speak-poi-count = Speak Point of Interest Count\nshared-calculator-text-keyboard-shortcut-speak-point-type = Speak Type of Selected Point\nshared-calculator-text-keyboard-shortcut-speak-right-adjacent-block = Speak Right-Adjacent Block\nshared-calculator-text-keyboard-shortcut-speak-selection = Speak Selection\nshared-calculator-text-keyboard-shortcut-speak-x = Speak X Coordinate\nshared-calculator-text-keyboard-shortcut-speak-y = Speak Y Coordinate\nshared-calculator-text-keyboard-shortcut-summarize-graph = Summarize Graph\nshared-calculator-text-keyboard-shortcut-table-first-column = First Column in Row\nshared-calculator-text-keyboard-shortcut-table-first-row = First Row in Column\nshared-calculator-text-keyboard-shortcut-table-last-column = Last Column in Row\nshared-calculator-text-keyboard-shortcut-table-last-row = Last Row in Column\nshared-calculator-text-keyboard-shortcut-table-next-cell = Next Cell\nshared-calculator-text-keyboard-shortcut-table-next-column = Next Column\nshared-calculator-text-keyboard-shortcut-table-next-row = Next Row\nshared-calculator-text-keyboard-shortcut-table-previous-cell = Previous Cell\nshared-calculator-text-keyboard-shortcut-table-previous-column = Previous Column\nshared-calculator-text-keyboard-shortcut-table-previous-row = Previous Row\nshared-calculator-text-keyboard-shortcut-table-speak-column-header = Speak Column Header\nshared-calculator-text-keyboard-shortcut-toggle-account-menu = Open or Close the Account Menu\nshared-calculator-text-keyboard-shortcut-toggle-audio-trace = Enable or Disable Audio Trace Mode\nshared-calculator-text-keyboard-shortcut-toggle-braille-typing = Turn Braille Typing On or Off\nshared-calculator-text-keyboard-shortcut-toggle-edit-list-mode = Turn Edit List Mode On or Off\nshared-calculator-text-keyboard-shortcut-toggle-graph-settings-menu = Open or Close the Graph Settings Menu\nshared-calculator-text-keyboard-shortcut-toggle-help-menu = Open or Close the Help Menu\nshared-calculator-text-keyboard-shortcut-toggle-language-menu = Open or Close the Language Menu\nshared-calculator-text-keyboard-shortcut-toggle-share-menu = Open or Close the Share Menu\nshared-calculator-text-keyboard-shortcut-toggle-slider-trace = Toggle Slider Trace Mode\nshared-calculator-text-keyboard-shortcut-ueb-mode = Switch to UEB\nshared-calculator-text-keyboard-shortcut-undo = Undo\nshared-calculator-text-keyboard-shortcut-usually = usually\nshared-label-email = Email\nshared-label-name = Name\nshared-label-name-or-nickname = Name or Nickname\nshared-label-new-email-address = New Email Address\nshared-label-password = Password\nshared-message-account-reactivated = You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!\nshared-message-change-password-email-sent = We will send a link to your email address ({ $emailAddress }) so you can change your password.\nshared-message-check-email-for-delete-link = Please check your email ({ $emailAddress }) for the link to delete your account.\nshared-message-check-email-for-link = Please check { $emailAddress } for the Change Email link.\nshared-message-check-email-for-password-link = Please check your email ({ $emailAddress }) for the link to change your password.\nshared-message-check-email-for-password-recovery-link = Message sent. Please check your email for a password recovery link.\nshared-message-consent-delete-information = If you don't want Desmos to hold onto this information, you may delete your account from the Account Settings menu at any time.\nshared-message-consent-information = When you created your Desmos account, you gave us your name, email address, and password (unless you signed in with Google, in which case you gave us access to the name and email address associated with that account). You also gave us access to your saved work. To continue using your Desmos account, please consent below to the collection of this information.\nshared-message-consent-text = I agree to let Desmos store and maintain the information I provide (e.g. login credentials, saved work) in order to provide and improve its service. To withdraw consent, you may delete your account at any time.\nshared-message-cookie-notice = <1>Note:</1> Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in. <2>Learn More.</2>\nshared-message-delete-account-notice = When you delete your account, <1>we will retain your data for 30 days.</1> You can reactivate your account at any time during those 30 days by logging back in. If there's something about Desmos we can improve, please <2>let us know.</2>\nshared-message-delete-account-will-send-email = We will send you a link to your email address ({ $email }) so you can delete your account.\nshared-message-email-sent = Email sent\nshared-message-email-settings-will-send-email = We will send a Change Email link to { $emailAddress }.\nshared-message-google-login-not-available = Google Login is not available on this device.\nshared-message-information-saved = Saved!\nshared-message-or-login-with-desmos = Or log in with Desmos\nshared-message-privacy-notice = I have read, understand, and accept the <1>Terms of Service</1> and <2>Privacy Policy</2>{\".\"}\nshared-message-set-new-email-address = Set a new email address and password.\nshared-narration-privacy-policy-agreement = Checkbox to indicate agreement to privacy policy (desmos.com/privacy) and terms of service (desmos.com/terms).\nshared-prompt-already-have-account = Already have a Desmos account?\nshared-prompt-enter-email-for-password-recovery-link = Enter your email address to get a password recovery link.\nshared-prompt-forgot-your-password = Forgot your password?\nshared-prompt-new-to-desmos-sign-up-here = New to Desmos? <1>Sign up</1>{\".\"}\nshared-prompt-new-to-desmos-teacher-or-student = New to Desmos? Sign up as a <1>teacher</1> or <2>student.</2>\nshared-prompt-please-consent-to-sign-up-with-apple = Please consent above to sign up with Apple\nshared-prompt-please-consent-to-sign-up-with-google = Please consent above to sign up with Google\nshared-prompt-sign-up-with-apple = Sign up with Apple\nshared-prompt-sign-up-with-google = Sign up with Google\nshared-title-account-reactivated = Your account has been reactivated.\nshared-title-account-settings = Account Settings\nshared-title-change-email-address = Change your Desmos email address\nshared-title-change-password-narrow = Password\nshared-title-change-password-wide = Change Password\nshared-title-consent = We value your privacy\nshared-title-delete-account = Are you sure you want to delete your account?\nshared-title-email-settings = Email\nshared-title-language-menu = Language\nshared-title-login = Log In\nshared-title-profile-information-narrow = Profile\nshared-title-profile-information-wide = Profile Information\nshared-title-recover-password = Recover Password\nshared-title-signup = Sign-Up\nshared-title-teacher-signup = Teacher Sign-Up\n### Strings for the graphing calculator and other tools\n\n\n### 2442 English words, 741 English strings\n\nbasic-calculator-button-braille-off = Off\nbasic-calculator-button-controlbar-abc = abc\nbasic-calculator-button-controlbar-clear = clear\nbasic-calculator-button-controlbar-clear-all = clear all\nbasic-calculator-button-controlbar-func = func\nbasic-calculator-button-controlbar-main = main\nbasic-calculator-button-nemeth = Nemeth\nbasic-calculator-button-turn-braille-mode-off = Turn { $mode } off\nbasic-calculator-button-ueb = UEB\nbasic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.\nbasic-calculator-heading-braille-table-type-this = Type this\nbasic-calculator-heading-braille-table-typeset = Typeset\nbasic-calculator-heading-page-title-florida = Desmos | Florida Calculator\nbasic-calculator-heading-page-title-four-function = Desmos | 4-Function Calculator\nbasic-calculator-heading-title-scientific = Desmos | Scientific Calculator\nbasic-calculator-label-answer-hint = Your answers show up on this side.\nbasic-calculator-label-braille-mode = Braille Mode\nbasic-calculator-label-controlbar-deg = deg\nbasic-calculator-label-controlbar-rad = rad\nbasic-calculator-label-convert-to-decimal = Convert to decimal.\nbasic-calculator-label-convert-to-fraction = Convert to fraction.\nbasic-calculator-label-reverse-contrast = Reverse Contrast\nbasic-calculator-label-six-key-input = Six Key Braille Input\nbasic-calculator-link-download-braille-equations = Download Braille Equations\nbasic-calculator-link-help = Help\nbasic-calculator-link-privacy-policy = Privacy Policy\nbasic-calculator-link-terms-of-service = Terms of Service\nbasic-calculator-link-view-braille-examples = View more examples\nbasic-calculator-narration-braille-mode = Braille Mode\nbasic-calculator-narration-braille-off = Off\nbasic-calculator-narration-calc-description-fourfunction = Desmos Four-Function Calculator\nbasic-calculator-narration-calc-description-scientific = Desmos Scientific Calculator\nbasic-calculator-narration-controlbar-abc = A B C\nbasic-calculator-narration-controlbar-backspace = backspace\nbasic-calculator-narration-controlbar-clear = clear\nbasic-calculator-narration-controlbar-clear-all = clear all\nbasic-calculator-narration-controlbar-degrees = Degrees\nbasic-calculator-narration-controlbar-functions = Functions\nbasic-calculator-narration-controlbar-main = main\nbasic-calculator-narration-controlbar-radians = Radians\nbasic-calculator-narration-controlbar-redo = Redo\nbasic-calculator-narration-controlbar-settings = settings\nbasic-calculator-narration-controlbar-undo = Undo\nbasic-calculator-narration-convert-to-decimal = Displaying as fraction. Press Enter to display as Decimal\nbasic-calculator-narration-convert-to-fraction = Displaying as decimal. Press Enter to display as Fraction\nbasic-calculator-narration-expression-list = Expression List\nbasic-calculator-narration-hotkey-braille-off = Braille mode off\nbasic-calculator-narration-hotkey-nemeth = Braille mode Nemeth\nbasic-calculator-narration-hotkey-six-key-input-off = Six Key Braille Input off\nbasic-calculator-narration-hotkey-six-key-input-on = Six Key Braille Input on\nbasic-calculator-narration-hotkey-ueb = Braille mode UEB\nbasic-calculator-narration-keypad = keypad\nbasic-calculator-narration-nemeth = Nemeth\nbasic-calculator-narration-reverse-contrast = Reverse Contrast\nbasic-calculator-narration-six-key-input = Six Key Braille Input\nbasic-calculator-narration-ueb = UEB\nbasic-calculator-text-4fn-page-description = A beautiful, free 4-Function Calculator from Desmos.com.\nbasic-calculator-text-braille-mode-is-on = { $mode } is on!\nbasic-calculator-text-how-to-type-braille = Use a Refreshable Braille display, or just type Braille with a keyboard.\nbasic-calculator-text-scientific-page-description = A beautiful, free online scientific calculator with advanced features for evaluating percentages, fractions, exponential functions, logarithms, trigonometry, statistics, and more.\ngraphing-calculator-button-audio-trace-describe-curve = Describe Curve\ngraphing-calculator-button-audio-trace-describe-curve-short = Curve\ngraphing-calculator-button-audio-trace-describe-point = Describe Point\ngraphing-calculator-button-audio-trace-describe-point-short = Point\ngraphing-calculator-button-audio-trace-hear-graph = Hear Graph\ngraphing-calculator-button-audio-trace-stop-graph = Stop Graph\ngraphing-calculator-button-change-image = Change Image\ngraphing-calculator-button-clear-graph = Delete All\ngraphing-calculator-button-clickable = Clickable\ngraphing-calculator-button-done = Done\ngraphing-calculator-button-draggable = Draggable\ngraphing-calculator-button-edit-graph-on-desmos-logo = edit graph on\ngraphing-calculator-button-editable-math = Editable Math\ngraphing-calculator-button-editable-text = Editable Text\ngraphing-calculator-button-expression-search-clear = clear\ngraphing-calculator-button-fill = Fill\ngraphing-calculator-button-find-cdf = Find Cumulative Probability (CDF)\ngraphing-calculator-button-funcs = funcs\ngraphing-calculator-button-functions = functions\ngraphing-calculator-button-functions-menu-dist = dist\ngraphing-calculator-button-functions-menu-misc = misc\ngraphing-calculator-button-functions-menu-stats = stats\ngraphing-calculator-button-functions-menu-trig = trig\ngraphing-calculator-button-hide-folder-from-students = Hide this folder from students\ngraphing-calculator-button-hide-folder-from-students-2 = Hide this folder from students.\ngraphing-calculator-button-keypad-audio-trace-off = Audio Trace Off\ngraphing-calculator-button-keypad-describe-curve = Describe Curve\ngraphing-calculator-button-keypad-describe-point = Describe Point\ngraphing-calculator-button-label = Label\ngraphing-calculator-button-label-orientation-vertical = Vertical\ngraphing-calculator-button-load-image-retry = Retry.\ngraphing-calculator-button-make-draggable = Make Draggable\ngraphing-calculator-button-place-image-behind-graphs = Place behind graphs\ngraphing-calculator-button-regression-log-mode = Log Mode\ngraphing-calculator-button-regression-plot-residuals = plot\ngraphing-calculator-button-reset-graph = Reset\ngraphing-calculator-button-settings-braille-mode-nemeth = Nemeth\ngraphing-calculator-button-settings-braille-mode-off = Off\ngraphing-calculator-button-settings-braille-mode-ueb = UEB\ngraphing-calculator-button-settings-degrees = Degrees\ngraphing-calculator-button-settings-radians = Radians\ngraphing-calculator-button-settings-zoom-square = Zoom Square\ngraphing-calculator-button-share-graph-link-copy = Copy\ngraphing-calculator-button-show-all-table-rows = Show all\ngraphing-calculator-button-slider-add-all-variables = all\ngraphing-calculator-button-table-column-menu-toggle-color = Color\ngraphing-calculator-button-table-column-menu-toggle-drag = Drag\ngraphing-calculator-button-table-column-menu-toggle-lines = Lines\ngraphing-calculator-button-table-column-menu-toggle-points = Points\ngraphing-calculator-button-visual-parameters-binned = Binned\ngraphing-calculator-button-visual-parameters-center = Center\ngraphing-calculator-button-visual-parameters-count = Count\ngraphing-calculator-button-visual-parameters-density = Density\ngraphing-calculator-button-visual-parameters-exact = Exact\ngraphing-calculator-button-visual-parameters-exclude-outliers = Exclude Outliers\ngraphing-calculator-button-visual-parameters-left = Left\ngraphing-calculator-button-visual-parameters-relative = Relative\ngraphing-calculator-error-equation-contains-unresolved-details = This equation contains fine detail that has not been fully resolved.\ngraphing-calculator-error-failed-to-load-image = Failed to load image.\ngraphing-calculator-error-image-invalid-angle = Invalid angle. Try using any number.\ngraphing-calculator-error-image-invalid-center = Invalid center. Try, for example, (0,0).\ngraphing-calculator-error-image-invalid-file = The file \"{ $file }\" is not an image\ngraphing-calculator-error-image-invalid-height = Invalid height. Try using any number.\ngraphing-calculator-error-image-invalid-opacity = Invalid opacity. Try using any number.\ngraphing-calculator-error-image-invalid-width = Invalid width. Try using any number.\ngraphing-calculator-heading-advanced = Advanced\ngraphing-calculator-heading-audio-trace-describe = Describe\ngraphing-calculator-heading-audio-trace-navigation = Navigation\ngraphing-calculator-heading-audio-trace-screen-reader = Screen Reader\ngraphing-calculator-heading-color = Color\ngraphing-calculator-heading-dist-tab-distributions = Distributions\ngraphing-calculator-heading-dist-tab-visualizations = Visualizations\ngraphing-calculator-heading-drag = Drag\ngraphing-calculator-heading-fill = Fill\ngraphing-calculator-heading-font-size = Font Size\ngraphing-calculator-heading-image-opacity = Opacity\ngraphing-calculator-heading-keypad-audio-trace-point-of-interest = <1>Point</1><2>of Interest</2>\ngraphing-calculator-heading-label = Label\ngraphing-calculator-heading-label-orientation = Orientation\ngraphing-calculator-heading-label-position = Label Position\ngraphing-calculator-heading-lines = Lines\ngraphing-calculator-heading-mygraphs-examples = Examples\ngraphing-calculator-heading-on-every-update = On Every Update:\ngraphing-calculator-heading-points = Points\ngraphing-calculator-heading-regression-parameters = Parameters\ngraphing-calculator-heading-regression-residuals = Residuals\ngraphing-calculator-heading-regression-statistics = Statistics\ngraphing-calculator-heading-size = Size\ngraphing-calculator-heading-slider-animation-mode = Animation Mode\ngraphing-calculator-heading-slider-speed = Speed\ngraphing-calculator-heading-style = Style\ngraphing-calculator-heading-title = Graphing Calculator\ngraphing-calculator-heading-title-desmos = Desmos | Graphing Calculator\ngraphing-calculator-heading-title-untitled = Untitled Graph\ngraphing-calculator-heading-visual-parameters-bar-heights = Bar Heights\ngraphing-calculator-heading-visual-parameters-bin-alignment = Bin Alignment\ngraphing-calculator-heading-visual-parameters-display-properties = Display Properties\ngraphing-calculator-heading-visual-parameters-x-values = X Values\ngraphing-calculator-heading-when-clicked = When Clicked:\ngraphing-calculator-label-add-depressed-image-tooltip = Add Depressed Image\ngraphing-calculator-label-add-hovered-image-tooltip = Add Hovered Image\ngraphing-calculator-label-add-item-tooltip = Add Item\ngraphing-calculator-label-add-slider = add slider:\ngraphing-calculator-label-add-update-rule = Add update rule\ngraphing-calculator-label-angle-tooltip = Angle\ngraphing-calculator-label-animation-properties-tooltip = Animation Properties\ngraphing-calculator-label-assignment = Assignment\ngraphing-calculator-label-audio-trace-curve = Curve\ngraphing-calculator-label-audio-trace-need-screen-reader = Your Screen Reader needs to be on to hear these.\ngraphing-calculator-label-audio-trace-point = Point\ngraphing-calculator-label-audio-trace-speed = Speed\ngraphing-calculator-label-audio-trace-volume = Volume\ngraphing-calculator-label-braille-size-etc11 = ETC Romeo/Juliet (11.5 x 11 in)\ngraphing-calculator-label-braille-size-etc8 = ETC Romeo/Juliet (8.5 x 11 in)\ngraphing-calculator-label-braille-size-vpmax11 = VP Max (11.5 x 11 in)\ngraphing-calculator-label-braille-size-vpmax8 = VP Max (8.5 x 11 in)\ngraphing-calculator-label-cdf-maximum = Max:\ngraphing-calculator-label-cdf-minimum = Min:\ngraphing-calculator-label-change-depressed-image-tooltip = Change Depressed Image\ngraphing-calculator-label-change-hovered-image-tooltip = Change Hovered Image\ngraphing-calculator-label-clickable-object-set-property = Set <assignment/>to <expression/>\ngraphing-calculator-label-convert-to-table-tooltip = Convert to Table\ngraphing-calculator-label-drop-image-here = Drop Image Here\ngraphing-calculator-label-duplicate-expression-tooltip = Duplicate\ngraphing-calculator-label-edit-list-tooltip = Edit List\ngraphing-calculator-label-evaluation-list = { $count } element list\ngraphing-calculator-label-example-graph-3d-world = 3D World\ngraphing-calculator-label-example-graph-calculus-derivatives = Calculus: Derivatives\ngraphing-calculator-label-example-graph-calculus-fundamental-theorem-of-calculus = Calculus: Fundamental Theorem of Calculus\ngraphing-calculator-label-example-graph-calculus-integral-with-adjustable-bounds = Calculus: Integral with adjustable bounds\ngraphing-calculator-label-example-graph-calculus-integrals = Calculus: Integrals\ngraphing-calculator-label-example-graph-calculus-secant-line = Calculus: Secant Line\ngraphing-calculator-label-example-graph-calculus-tangent-line = Calculus: Tangent Line\ngraphing-calculator-label-example-graph-calculus-taylor-expansion-of-sin-x = Calculus: Taylor Expansion of sin(x)\ngraphing-calculator-label-example-graph-checkerboard-inversion = Checkerboard Inversion\ngraphing-calculator-label-example-graph-conic-sections-circle = Conic Sections: Circle\ngraphing-calculator-label-example-graph-conic-sections-ellipse-with-foci = Conic Sections: Ellipse with Foci\ngraphing-calculator-label-example-graph-conic-sections-hyperbola = Conic Sections: Hyperbola\ngraphing-calculator-label-example-graph-conic-sections-parabola-and-focus = Conic Sections: Parabola and Focus\ngraphing-calculator-label-example-graph-fastest-path-to-a-point = Fastest Path to a Point\ngraphing-calculator-label-example-graph-fireworks = Fireworks!\ngraphing-calculator-label-example-graph-fractal-valentine = Fractal Valentine\ngraphing-calculator-label-example-graph-lines-point-slope-form = Lines: Point Slope Form\ngraphing-calculator-label-example-graph-lines-slope-intercept-form = Lines: Slope Intercept Form\ngraphing-calculator-label-example-graph-lines-two-point-form = Lines: Two Point Form\ngraphing-calculator-label-example-graph-lists-curve-stitching = Lists: Curve Stitching\ngraphing-calculator-label-example-graph-lists-family-of-sin-curves = Lists: Family of sin Curves\ngraphing-calculator-label-example-graph-lists-plotting-a-list-of-points = Lists: Plotting a List of Points\ngraphing-calculator-label-example-graph-outstretched-arm = Outstretched Arm\ngraphing-calculator-label-example-graph-pac-man = Pac Man\ngraphing-calculator-label-example-graph-parabolas-standard-form = Parabolas: Standard Form\ngraphing-calculator-label-example-graph-parabolas-standard-form-plus-tangent = Parabolas: Standard Form + Tangent\ngraphing-calculator-label-example-graph-parabolas-vertex-form = Parabolas: Vertex Form\ngraphing-calculator-label-example-graph-parametric-cycloid = Parametric: Cycloid\ngraphing-calculator-label-example-graph-parametric-introduction = Parametric: Introduction\ngraphing-calculator-label-example-graph-polar-conic-sections = Polar: Conic Sections\ngraphing-calculator-label-example-graph-polar-limacon = Polar: Limacon\ngraphing-calculator-label-example-graph-polar-logarithmic-spiral = Polar: Logarithmic Spiral\ngraphing-calculator-label-example-graph-polar-rose = Polar: Rose\ngraphing-calculator-label-example-graph-pride-flag = PRIDE flag\ngraphing-calculator-label-example-graph-regular-sine-wave = Regular Sine Wave?\ngraphing-calculator-label-example-graph-stats-anscombes-quartet = Statistics: Anscombe's Quartet\ngraphing-calculator-label-example-graph-stats-fourth-order-polynomial = Statistics: 4th Order Polynomial\ngraphing-calculator-label-example-graph-stats-linear-regression = Statistics: Linear Regression\ngraphing-calculator-label-example-graph-transformations-inverse-of-a-function = Transformations: Inverse of a Function\ngraphing-calculator-label-example-graph-transformations-scaling-a-function = Transformations: Scaling a Function\ngraphing-calculator-label-example-graph-transformations-translating-a-function = Transformations: Translating a Function\ngraphing-calculator-label-example-graph-trig-period-and-amplitude = Trigonometry: Period and Amplitude\ngraphing-calculator-label-example-graph-trig-phase = Trigonometry: Phase\ngraphing-calculator-label-example-graph-trig-unit-circle = Trigonometry: Unit Circle\ngraphing-calculator-label-example-graph-trig-wave-interference = Trigonometry: Wave Interference\ngraphing-calculator-label-expression = Expression\ngraphing-calculator-label-expression-delete-tooltip = Delete\ngraphing-calculator-label-expression-lowercase = expression\ngraphing-calculator-label-folder-lowercase = folder\ngraphing-calculator-label-hide-expression-list-tooltip = Hide Expression List\ngraphing-calculator-label-hide-keypad = Hide Keypad\ngraphing-calculator-label-image-angle = Angle:\ngraphing-calculator-label-image-center = Center:\ngraphing-calculator-label-image-height = Height:\ngraphing-calculator-label-image-lowercase = image\ngraphing-calculator-label-image-opacity = Opacity:\ngraphing-calculator-label-image-width = Width:\ngraphing-calculator-label-label-size-tooltip = Label Scale Factor\ngraphing-calculator-label-line-thickness-tooltip = Line Thickness (px)\ngraphing-calculator-label-note-lowercase = note\ngraphing-calculator-label-opacity-tooltip = Opacity (0 to 1)\ngraphing-calculator-label-open-graph-tooltip = Open Graph (ctrl+o)\ngraphing-calculator-label-poi-unknown = unknown coordinates\ngraphing-calculator-label-point-size-tooltip = Point Size (px)\ngraphing-calculator-label-randomize-tooltip = Randomize\ngraphing-calculator-label-redo-tooltip = Redo (ctrl+y)\ngraphing-calculator-label-regression-log-mode-help-tooltip = Log mode help\ngraphing-calculator-label-regression-parameters-not-exact = Parameters might not be exact. Click to learn more.\ngraphing-calculator-label-regression-what-is-rmse-tooltip = What is RMSE? Click to learn more.\ngraphing-calculator-label-regression-why-is-negative-tooltip = Why is this negative? Click to learn more.\ngraphing-calculator-label-settings-add-label = add a label\ngraphing-calculator-label-settings-arrows = Arrows\ngraphing-calculator-label-settings-axis-numbers = Axis Numbers\ngraphing-calculator-label-settings-braille-mode = Braille Mode\ngraphing-calculator-label-settings-grid = Grid\ngraphing-calculator-label-settings-minor-gridlines = Minor Gridlines\ngraphing-calculator-label-settings-reverse-contrast = Reverse Contrast\ngraphing-calculator-label-settings-six-key-braille = Six Key Braille Input\ngraphing-calculator-label-settings-step = Step:\ngraphing-calculator-label-settings-x-axis = X-Axis\ngraphing-calculator-label-settings-y-axis = Y-Axis\ngraphing-calculator-label-show-keypad = Show Keypad\ngraphing-calculator-label-simulation-lowercase = simulation\ngraphing-calculator-label-simulation-step-once-tooltip = Step Once\ngraphing-calculator-label-slider-step = Step:\ngraphing-calculator-label-table-lowercase = table\ngraphing-calculator-label-tooltip-graph-settings = Graph Settings\ngraphing-calculator-label-tooltip-open-graph = Open Graph\ngraphing-calculator-label-tooltip-reset = Reset\ngraphing-calculator-label-tooltip-show-list = Show List\ngraphing-calculator-label-tooltip-zoom-default = Default Zoom\ngraphing-calculator-label-tooltip-zoom-in = Zoom In\ngraphing-calculator-label-tooltip-zoom-out = Zoom Out\ngraphing-calculator-label-undo-tooltip = Undo (ctrl+z)\ngraphing-calculator-link-audio-trace-keyboard-shortcuts = Keyboard Shortcuts\ngraphing-calculator-link-audio-trace-shortcuts = Shortcuts\ngraphing-calculator-link-edit-on-desmos = edit graph on\ngraphing-calculator-link-learn-more = Learn more.\ngraphing-calculator-link-view-braille-examples = View examples\ngraphing-calculator-narration-add-expression = Add expression\ngraphing-calculator-narration-add-folder = Add folder\ngraphing-calculator-narration-add-image = Add image\ngraphing-calculator-narration-add-item-menu = Add Item Menu\ngraphing-calculator-narration-add-note = Add note\ngraphing-calculator-narration-add-simulation = Add Simulation\ngraphing-calculator-narration-add-slider-prompt = Add slider for { $vars }\ngraphing-calculator-narration-add-table = Add table\ngraphing-calculator-narration-audio-instructions-enter-audio-trace-mac = Press OPTION+T for audio trace.\ngraphing-calculator-narration-audio-instructions-enter-audio-trace-windows = Press ALT+T for audio trace.\ngraphing-calculator-narration-audio-trace-branch-not-found = Branch { $branch } does not exist.\ngraphing-calculator-narration-audio-trace-cannot-change-slider-value = Unable to adjust slider\ngraphing-calculator-narration-audio-trace-description-branch-count = Branches: { $branches }.\ngraphing-calculator-narration-audio-trace-description-color = Color: { $color }.\ngraphing-calculator-narration-audio-trace-description-multiple-extrema = { $count } extrema.\ngraphing-calculator-narration-audio-trace-description-multiple-intercepts = { $count } intercepts.\ngraphing-calculator-narration-audio-trace-description-multiple-intersections = { $count } intersections.\ngraphing-calculator-narration-audio-trace-description-multiple-labels = { $count } point labels.\ngraphing-calculator-narration-audio-trace-description-multiple-roots = { $count } zero crossings.\ngraphing-calculator-narration-audio-trace-description-one-extremum = 1 extremum.\ngraphing-calculator-narration-audio-trace-description-one-intercept = 1 intercept.\ngraphing-calculator-narration-audio-trace-description-one-intersection = 1 intersection.\ngraphing-calculator-narration-audio-trace-description-one-label = 1 point label.\ngraphing-calculator-narration-audio-trace-description-one-root = 1 zero crossing.\ngraphing-calculator-narration-audio-trace-description-unavailable = No information available.\ngraphing-calculator-narration-audio-trace-expression-with-column = Expression { $index } column { $column }\ngraphing-calculator-narration-audio-trace-first-point = First point\ngraphing-calculator-narration-audio-trace-first-slider = First slider.\ngraphing-calculator-narration-audio-trace-instructions-disable-mac = To disable audio trace, press OPTION+T.\ngraphing-calculator-narration-audio-trace-instructions-disable-windows = To disable audio trace, press ALT+T.\ngraphing-calculator-narration-audio-trace-instructions-expression-navigation-mac = To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.\ngraphing-calculator-narration-audio-trace-instructions-expression-navigation-windows = To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow.\ngraphing-calculator-narration-audio-trace-instructions-hear-graph = To hear the graph, press H.\ngraphing-calculator-narration-audio-trace-instructions-use-arrow-keys = Use Arrow keys to navigate.\ngraphing-calculator-narration-audio-trace-last-point = Last point\ngraphing-calculator-narration-audio-trace-last-slider = Last slider.\ngraphing-calculator-narration-audio-trace-multiple-sliders-paused = { $sliders } animating sliders were paused.\ngraphing-calculator-narration-audio-trace-no-graph-selected = No graph selected.\ngraphing-calculator-narration-audio-trace-no-more-pois = No more points of interest\ngraphing-calculator-narration-audio-trace-no-sliders-paused = No animating sliders were paused.\ngraphing-calculator-narration-audio-trace-one-slider-paused = One animating slider was paused.\ngraphing-calculator-narration-audio-trace-playback-speed = Graph playback speed { $speed }\ngraphing-calculator-narration-audio-trace-poi-count = Points of interest, { $x }.\ngraphing-calculator-narration-audio-trace-point-type-definition = Definition\ngraphing-calculator-narration-audio-trace-point-type-extremum = Extremum\ngraphing-calculator-narration-audio-trace-point-type-intercept = Intercept\ngraphing-calculator-narration-audio-trace-point-type-intersection = Intersection\ngraphing-calculator-narration-audio-trace-point-type-intersection-with-curves = Intersection with { $curves }\ngraphing-calculator-narration-audio-trace-point-type-label = Label\ngraphing-calculator-narration-audio-trace-point-type-not-a-poi = Not a P O I\ngraphing-calculator-narration-audio-trace-point-type-root = Zero\ngraphing-calculator-narration-audio-trace-point-type-trace = Trace\ngraphing-calculator-narration-audio-trace-property-branch-number = Branch { $branch }.\ngraphing-calculator-narration-audio-trace-property-type-before-coordinates = { $type } at\ngraphing-calculator-narration-audio-trace-property-x = X: { $x }.\ngraphing-calculator-narration-audio-trace-property-y = Y: { $y }.\ngraphing-calculator-narration-audio-trace-secret-expression = Secret expression { $index }\ngraphing-calculator-narration-audio-trace-slider-value-unknown = Unable to determine slider value\ngraphing-calculator-narration-audio-trace-tracing-different-expression = Tracing { $expression }.\ngraphing-calculator-narration-audio-trace-unable-to-play = Unable to play audio.\ngraphing-calculator-narration-audio-trace-unable-to-play-audio = Unable to play audio.\ngraphing-calculator-narration-audio-trace-unable-to-trace-this-expression = Unable to audio trace this expression.\ngraphing-calculator-narration-audio-trace-unsupported-expression = { $expression } cannot be audio traced.\ngraphing-calculator-narration-audio-trace-volume = Volume { $volume } percent\ngraphing-calculator-narration-cdf-maximum = Max\ngraphing-calculator-narration-cdf-minimum = Min\ngraphing-calculator-narration-clickable-image-options = Clickable Image Options\ngraphing-calculator-narration-clickable-object-description = clickable object\ngraphing-calculator-narration-clickable-properties = Clickable Properties\ngraphing-calculator-narration-collapse-folder = Collapse Folder\ngraphing-calculator-narration-color-menu-label = Color:\ngraphing-calculator-narration-color-options = Color Options\ngraphing-calculator-narration-color-unknown = unknown\ngraphing-calculator-narration-description-collapsed-folder = Collapsed Folder\ngraphing-calculator-narration-description-collapsed-secret-folder = Collapsed Secret Folder\ngraphing-calculator-narration-description-folder = Folder\ngraphing-calculator-narration-description-hidden-collapsed-folder = Hidden Collapsed Folder\ngraphing-calculator-narration-description-hidden-collapsed-secret-folder = Hidden Collapsed Secret Folder\ngraphing-calculator-narration-description-hidden-folder = Hidden Folder\ngraphing-calculator-narration-description-hidden-secret-folder = Hidden Secret Folder\ngraphing-calculator-narration-description-secret-folder = Secret Folder\ngraphing-calculator-narration-dist-tab-distributions = Distributions\ngraphing-calculator-narration-dist-tab-visualizations = Visualizations\ngraphing-calculator-narration-domain-maximum = domain Maximum:\ngraphing-calculator-narration-domain-minimum = domain Minimum:\ngraphing-calculator-narration-drag-mode-x = X\ngraphing-calculator-narration-drag-mode-xy = X and Y\ngraphing-calculator-narration-drag-mode-y = Y\ngraphing-calculator-narration-drag-options = Drag Options\ngraphing-calculator-narration-drag-toggle = Drag\ngraphing-calculator-narration-draggable-image-description = draggable image\ngraphing-calculator-narration-draggable-image-off-screen-prompt = { \" \" }not completely visible on screen\ngraphing-calculator-narration-edit-expression-list = Edit Expression List\ngraphing-calculator-narration-edit-graph-on-desmos = Edit graph on Desmos\ngraphing-calculator-narration-edit-list-mode-off = Edit list mode off.\ngraphing-calculator-narration-edit-list-mode-on = Edit list mode on.\ngraphing-calculator-narration-edit-on-desmos = Edit graph on Desmos\ngraphing-calculator-narration-edit-slider-variable-limits = Edit { $variable } Limits\ngraphing-calculator-narration-editable-label-mode-editable-math = Editable label mode: Editable Math\ngraphing-calculator-narration-editable-label-mode-editable-text = Editable label mode: Editable Text\ngraphing-calculator-narration-editable-point-label-at-coordinates = Editable point label at { $coordinates }\ngraphing-calculator-narration-empty-graphpaper = Empty graph paper.\ngraphing-calculator-narration-expression-audio-trace-mac = To audio trace, press OPTION+T.\ngraphing-calculator-narration-expression-audio-trace-windows = To audio trace, press ALT+T.\ngraphing-calculator-narration-expression-bar = Expression Bar\ngraphing-calculator-narration-expression-evaluation-has-graph = Has graph.\ngraphing-calculator-narration-expression-evaluation-has-graph-and-regression = Has graph and regression. To access statistics, press Tab.\ngraphing-calculator-narration-expression-evaluation-has-regression = Has regression. To access statistics, press Tab.\ngraphing-calculator-narration-expression-evaluation-is-distribution = is distribution.\ngraphing-calculator-narration-expression-evaluation-is-t-test = is T test. To access statistics, press Tab.\ngraphing-calculator-narration-expression-hidden-label = Hidden { $label }\ngraphing-calculator-narration-expression-index-table = Expression { $index } table\ngraphing-calculator-narration-expression-index-table-braille = eq{ $index } table\ngraphing-calculator-narration-expression-label = Label\ngraphing-calculator-narration-expression-list = Expression list\ngraphing-calculator-narration-fill-opacity = Fill Opacity:\ngraphing-calculator-narration-fill-visible = Fill visible\ngraphing-calculator-narration-folder-collapsed = folder collapsed\ngraphing-calculator-narration-folder-expanded = folder expanded\ngraphing-calculator-narration-folder-has-items = { $folder } has { $count } items\ngraphing-calculator-narration-functions = Functions\ngraphing-calculator-narration-graph-settings-controls = Graph Settings Controls\ngraphing-calculator-narration-graphpaper-label = graph paper\ngraphing-calculator-narration-graphpaper-multiple-graphs = Graph paper showing { $count } graphs.\ngraphing-calculator-narration-graphpaper-one-graph = Graph paper showing 1 graph.\ngraphing-calculator-narration-hide-animation-properties = Hide Animation Properties\ngraphing-calculator-narration-hide-expression = Hide Expression\ngraphing-calculator-narration-hide-expression-list = Hide expression list\ngraphing-calculator-narration-hide-folder = Hide Folder\ngraphing-calculator-narration-hide-image = Hide Image\ngraphing-calculator-narration-hide-keypad = Hide Keypad\ngraphing-calculator-narration-hide-options = Hide Options\ngraphing-calculator-narration-hide-table-column = Hide Column\ngraphing-calculator-narration-image-styles = Styles\ngraphing-calculator-narration-keypad-key-next-curve = Next Curve\ngraphing-calculator-narration-keypad-key-next-poi = Next Point of Interest\ngraphing-calculator-narration-keypad-key-next-point = Next Point\ngraphing-calculator-narration-keypad-key-previous-curve = Previous Curve\ngraphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest\ngraphing-calculator-narration-keypad-key-previous-point = Previous Point\ngraphing-calculator-narration-keypad-key-speed-down = Speed Down\ngraphing-calculator-narration-keypad-key-speed-up = Speed Up\ngraphing-calculator-narration-keypad-key-volume-down = Volume Down\ngraphing-calculator-narration-keypad-key-volume-up = Volume Up\ngraphing-calculator-narration-label-align-center = align center\ngraphing-calculator-narration-label-align-left = align left\ngraphing-calculator-narration-label-align-right = align right\ngraphing-calculator-narration-label-angle = Label Angle:\ngraphing-calculator-narration-label-options = Label Options\ngraphing-calculator-narration-label-settings = Label Settings\ngraphing-calculator-narration-label-size = Label Size:\ngraphing-calculator-narration-label-text = Label Text\ngraphing-calculator-narration-label-toggle = Label\ngraphing-calculator-narration-label-vertical-align-above = vertical align above\ngraphing-calculator-narration-label-vertical-align-below = vertical align below\ngraphing-calculator-narration-label-vertical-align-middle = vertical align middle\ngraphing-calculator-narration-label-visible = Label visible\ngraphing-calculator-narration-line-opacity = Line Opacity:\ngraphing-calculator-narration-line-style-dashed = Dashed\ngraphing-calculator-narration-line-style-dotted = Dotted\ngraphing-calculator-narration-line-style-options = Line Style Options\ngraphing-calculator-narration-line-style-solid = Solid\ngraphing-calculator-narration-line-width = Line Width:\ngraphing-calculator-narration-lines-toggle = Lines\ngraphing-calculator-narration-lines-visible = Lines visible\ngraphing-calculator-narration-main-desmos-graphing-calculator = Desmos Graphing Calculator\ngraphing-calculator-narration-menu-drag-enabled = Drag Enabled\ngraphing-calculator-narration-movable-point-description = movable point\ngraphing-calculator-narration-movable-point-off-screen-prompt = { \" \" }not visible on screen\ngraphing-calculator-narration-movable-point-prefix = Graph point\ngraphing-calculator-narration-movable-point-suffix-usage-instructions = { \" \" }is movable. Press Arrows or Shift+Arrows to adjust.\ngraphing-calculator-narration-no-interactive-points = No interactive points on screen\ngraphing-calculator-narration-open-graph = Open Graph\ngraphing-calculator-narration-options-menu = Options Menu\ngraphing-calculator-narration-options-menu-closed = Options menu closed.\ngraphing-calculator-narration-options-menu-open = Options menu open.\ngraphing-calculator-narration-pause-simulation = Pause Simulation\ngraphing-calculator-narration-pause-variable-animation = Pause { $variable } Animation\ngraphing-calculator-narration-play-simulation = Play Simulation\ngraphing-calculator-narration-play-variable-animation = Play { $variable } Animation\ngraphing-calculator-narration-poi-graph-point = Graph point\ngraphing-calculator-narration-point-description = point\ngraphing-calculator-narration-point-opacity = Point Opacity:\ngraphing-calculator-narration-point-size = Point Size:\ngraphing-calculator-narration-point-style-cross = Cross\ngraphing-calculator-narration-point-style-open = Open\ngraphing-calculator-narration-point-style-options = Point Style Options\ngraphing-calculator-narration-point-style-point = Point\ngraphing-calculator-narration-points-toggle = Points\ngraphing-calculator-narration-points-visible = Points visible\ngraphing-calculator-narration-powered-by-desmos = Powered by Desmos\ngraphing-calculator-narration-redo = Redo\ngraphing-calculator-narration-screen-reader-label = Screen reader label\ngraphing-calculator-narration-settings-angle = Angle Settings\ngraphing-calculator-narration-settings-cartesian-grid = Cartesian Grid\ngraphing-calculator-narration-settings-polar-grid = Polar Grid\ngraphing-calculator-narration-settings-show-both = Show Both\ngraphing-calculator-narration-settings-show-positive = Show Positive\ngraphing-calculator-narration-settings-x-axis-label = add x-axis label\ngraphing-calculator-narration-settings-x-axis-max = X Axis Maximum:{ \" \" }\ngraphing-calculator-narration-settings-x-axis-min = X Axis Minimum:{ \" \" }\ngraphing-calculator-narration-settings-x-axis-step = X Axis Step Size:{ \" \" }\ngraphing-calculator-narration-settings-y-axis-label = add y-axis label\ngraphing-calculator-narration-settings-y-axis-max = Y Axis Maximum:{ \" \" }\ngraphing-calculator-narration-settings-y-axis-min = Y Axis Minimum:{ \" \" }\ngraphing-calculator-narration-settings-y-axis-step = Y Axis Step Size:{ \" \" }\ngraphing-calculator-narration-share-graph-link = Link to this graph\ngraphing-calculator-narration-share-graph-link-copied = Link copied\ngraphing-calculator-narration-share-graph-link-unable-to-copy = Unable to copy link\ngraphing-calculator-narration-show-animation-properties = Show Animation Properties\ngraphing-calculator-narration-show-as-decimal = Show as Decimal\ngraphing-calculator-narration-show-as-fraction = Show as Fraction\ngraphing-calculator-narration-show-expression = Show Expression\ngraphing-calculator-narration-show-expression-list = Show expression list\ngraphing-calculator-narration-show-image = Show Image\ngraphing-calculator-narration-show-keypad = Show Keypad\ngraphing-calculator-narration-show-options = Show Options\ngraphing-calculator-narration-show-table-column = Show Column\ngraphing-calculator-narration-simulation-paused = simulation paused\ngraphing-calculator-narration-simulation-playing = simulation playing\ngraphing-calculator-narration-size-options = Size Options\ngraphing-calculator-narration-slider-animate-faster = Animate Faster\ngraphing-calculator-narration-slider-animate-slower = Animate Slower\ngraphing-calculator-narration-slider-animating-at-speed = Animating at { $speed }x\ngraphing-calculator-narration-slider-loop-forwards-and-backwards = Loop forwards and backwards\ngraphing-calculator-narration-slider-maximum = Slider Maximum:\ngraphing-calculator-narration-slider-minimum = Slider Minimum:\ngraphing-calculator-narration-slider-play-indefinitely = Play indefinitely\ngraphing-calculator-narration-slider-play-once = Play once\ngraphing-calculator-narration-slider-repeat-one-direction = Repeat in one direction\ngraphing-calculator-narration-slider-step = Slider Step Size:\ngraphing-calculator-narration-slider-trace-no-sliders = No sliders to trace.\ngraphing-calculator-narration-slider-trace-off = Slider trace off.\ngraphing-calculator-narration-slider-trace-on = Slider trace on.\ngraphing-calculator-narration-slider-variable-paused = { $variable } paused\ngraphing-calculator-narration-slider-variable-playing = { $variable } playing\ngraphing-calculator-narration-slider-variable-restarted = { $variable } restarted\ngraphing-calculator-narration-table-column-header = Column header { $column }\ngraphing-calculator-narration-table-no-column-header = No column header\ngraphing-calculator-narration-table-row-column = Row { $row } Col { $column }\ngraphing-calculator-narration-toggle-audio-trace = Toggle Audio Trace\ngraphing-calculator-narration-toggle-letters = Toggle Letters\ngraphing-calculator-narration-unable-to-activate-account-menu = Unable to activate account menu\ngraphing-calculator-narration-unable-to-activate-help-menu = Unable to activate help menu\ngraphing-calculator-narration-unable-to-activate-language-menu = Unable to activate language menu\ngraphing-calculator-narration-unable-to-activate-share-menu = Unable to activate share menu\ngraphing-calculator-narration-unable-to-add-expression = Unable to add expression\ngraphing-calculator-narration-unable-to-add-note = Unable to add note\ngraphing-calculator-narration-unable-to-add-table = Unable to add table\ngraphing-calculator-narration-unable-to-focus-expression-list = Unable to focus expression list\ngraphing-calculator-narration-undo = Undo\ngraphing-calculator-narration-viewport-updated = Graph viewport updated.\ngraphing-calculator-narration-viewport-zoom-default = Graph zoom default\ngraphing-calculator-narration-viewport-zoom-in = Graph zoom in\ngraphing-calculator-narration-viewport-zoom-out = Graph zoom out\ngraphing-calculator-narration-viewport-zoom-square = Graph zoom square\ngraphing-calculator-narration-visual-parameters-height = Height\ngraphing-calculator-narration-visual-parameters-offset = Offset\ngraphing-calculator-narration-visual-parameters-width = Width\ngraphing-calculator-narration-zoom-default = Restore Default Zoom\ngraphing-calculator-text-add-screen-reader-label-placeholder = Add screen reader label\ngraphing-calculator-text-audio-trace-no-graph-to-trace = No graph to trace.\ngraphing-calculator-text-audio-trace-no-implicit-support = Sorry, but I can't trace implicit curves yet.\ngraphing-calculator-text-audio-trace-no-parametric-support = Sorry, but I can't trace parametric curves yet.\ngraphing-calculator-text-audio-trace-no-polar-support = Sorry, but I can't trace polar curves yet.\ngraphing-calculator-text-audio-trace-off = Audio trace off.\ngraphing-calculator-text-audio-trace-on = Audio trace on.\ngraphing-calculator-text-color-black = black\ngraphing-calculator-text-color-blue = blue\ngraphing-calculator-text-color-gray = gray\ngraphing-calculator-text-color-green = green\ngraphing-calculator-text-color-orange = orange\ngraphing-calculator-text-color-purple = purple\ngraphing-calculator-text-color-red = red\ngraphing-calculator-text-color-unknown = color unknown\ngraphing-calculator-text-enter-note-placeholder = Enter a note...\ngraphing-calculator-text-enter-pareneter = Enter the { $param }.\ngraphing-calculator-text-export-braille-email-accessibility = Feedback? Email <1>accessibility@desmos.com</1>{\".\"}\ngraphing-calculator-text-image-enter-note-placeholder = Enter a note...\ngraphing-calculator-text-label-orientation-above = Above\ngraphing-calculator-text-label-orientation-below = Below\ngraphing-calculator-text-label-orientation-default = Default\ngraphing-calculator-text-label-orientation-left = Left\ngraphing-calculator-text-label-orientation-right = Right\ngraphing-calculator-text-label-size-large = Large\ngraphing-calculator-text-label-size-medium = Medium\ngraphing-calculator-text-label-size-small = Small\ngraphing-calculator-text-loading-image = Loading image...\ngraphing-calculator-text-note-placeholder = Enter a note...\ngraphing-calculator-text-page-description = Explore math with our beautiful, free online graphing calculator. Graph functions, plot points, visualize algebraic equations, add sliders, animate graphs, and more.\ngraphing-calculator-text-parameter-name-binwidth = Bin Width\ngraphing-calculator-text-parameter-name-data = Data Set\ngraphing-calculator-text-parameter-name-dof = Degrees of Freedom\ngraphing-calculator-text-parameter-name-height = Height\ngraphing-calculator-text-parameter-name-max = Maximum\ngraphing-calculator-text-parameter-name-mean = Mean\ngraphing-calculator-text-parameter-name-min = Minimum\ngraphing-calculator-text-parameter-name-offset = Offset\ngraphing-calculator-text-parameter-name-probsuccess = Success Probability\ngraphing-calculator-text-parameter-name-stddev = Standard Deviation\ngraphing-calculator-text-parameter-name-trials = Trials\ngraphing-calculator-text-refreshable-braille-display-note = Use a refreshable Braille display, or just type Braille with a keyboard.\ngraphing-calculator-text-regression-potentially-inaccurate-parameters = Some parameters may be too large or small to represent accurately.\ngraphing-calculator-text-share-graph-link = Link to this graph\ngraphing-calculator-text-table-created = Table created.\ngraphing-calculator-text-table-more-rows = { $rowCount } more rows\ngraphing-calculator-text-toast-choose-one-file = You can only choose one file as a replacement\ngraphing-calculator-text-toast-error-importing-graph = Error importing graph. Check the URL?\ngraphing-calculator-text-toast-error-no-folders = Only graphs without folders can be inserted into a folder.\ngraphing-calculator-text-toast-expression-size-limit = Expression size cannot exceed 100 characters.\ngraphing-calculator-text-toast-graph-cleared = Graph cleared.\ngraphing-calculator-text-toast-graph-reset = Graph reset.\ngraphing-calculator-text-toast-image-upload-failed = Image upload failed.\ngraphing-calculator-text-toast-imported-graph = Graph imported!\ngraphing-calculator-text-toast-importing-graph = Importing graph...\ngraphing-calculator-text-toast-no-file-selected = You did not select a file\ngraphing-calculator-text-toast-undo-cmd-z = Press CMD+Z to undo.\ngraphing-calculator-text-toast-undo-ctrl-z = Press CTRL+Z to undo.\ngraphing-calculator-text-toast-uploading-images = Uploading images...\ngraphing-calculator-text-toast-zoom-to-fit = We zoomed to fit your data.\ngraphing-calculator-text-zoom-fit = Zoom Fit\ngraphing-tours-heading-advanced-tables = Advanced Tables\ngraphing-tours-heading-derivatives = Derivatives\ngraphing-tours-heading-folders = Folders\ngraphing-tours-heading-lists = Lists\ngraphing-tours-heading-regressions = Regressions\ngraphing-tours-heading-restrictions = Restrictions\ngraphing-tours-heading-sliders = Sliders\ngraphing-tours-heading-tables = Tables\ngraphing-tours-label-advanced-tables-continue = Click here to continue editing this table.\ngraphing-tours-label-advanced-tables-convert = Convert this to a table.\ngraphing-tours-label-advanced-tables-create = Click here to generate a table.\ngraphing-tours-label-advanced-tables-dots = Click here to only show the dots.\ngraphing-tours-label-advanced-tables-edit-list = Click the \"Edit List\" button.\ngraphing-tours-label-advanced-tables-graph = Start by graphing a function.\ngraphing-tours-label-advanced-tables-new-column = Move right to add a new column.\ngraphing-tours-label-advanced-tables-options = Click and hold on this icon until the options menu opens up.\ngraphing-tours-label-advanced-tables-start = Let's make a function. First: click here to create a new blank expression.\ngraphing-tours-label-advanced-tables-type-function = Try typing { $sample_expression }\ngraphing-tours-label-advanced-tables-wizard = You're a table wizard!\ngraphing-tours-label-awesome = Awesome!\ngraphing-tours-label-brilliant = Brilliant!\ngraphing-tours-label-derivative-graph-derivative = To graph its derivative: { $equation }\ngraphing-tours-label-derivative-hint-type-derivative = Hint: To get the derivative operator, just type d/dx.\ngraphing-tours-label-derivative-one-more = Let's try one more: { $equation }\ngraphing-tours-label-derivative-start-function = Start with a function: { $equation }\ngraphing-tours-label-derivative-start-graph = Let's graph a derivative!\ngraphing-tours-label-folders-collapse = Now weâll explore some folder functionality. Click here to collapse the folder.\ngraphing-tours-label-folders-did-you-know = Did You Know...\ngraphing-tours-label-folders-grab = Now grab this equation by its left edge and drag it into the folder.\ngraphing-tours-label-folders-great-start = Thatâs a great start!\ngraphing-tours-label-folders-hide = You can hide everything in the folder with one click. Click here to try.\ngraphing-tours-label-folders-indicator = Hint: The gray line will show you if the expression is in the folder.\ngraphing-tours-label-folders-name = Give your folder a name.\ngraphing-tours-label-folders-new-equation = Let's make a new equation. For example, type: { $equation }\ngraphing-tours-label-folders-option = ... and select the \"folder\" option.\ngraphing-tours-label-folders-start = Let's make a folder!\ngraphing-tours-label-great-job = Great job!\ngraphing-tours-label-last-thing = Last thing!\ngraphing-tours-label-list-computation = You can do a computation on a list. For example: { $equation }\ngraphing-tours-label-lists-are-powerful = Lists are powerful. Let's see.\ngraphing-tours-label-lists-begin-equation = Begin by typing { $equation }\ngraphing-tours-label-lists-count-by = If you want to count by 5 instead, just write something like this: { $equation }\ngraphing-tours-label-lists-create-range = You can create lists of integers even more easily. Try this: { $equation }\ngraphing-tours-label-lists-graph-equation = Graph: { $equation }\ngraphing-tours-label-lists-graph-points = Let's graph a few points.\ngraphing-tours-label-lists-hint-abc = Hint: press the 'A B C' button on the keypad to find the [ ] buttons\ngraphing-tours-label-lists-hint-plot-points = Hint: this will plot a point for each item of b.\ngraphing-tours-label-lists-hint-superscript = Hint: you can type { $suggestion1 } or use the { $suggestion2 } button on the keypad below.\ngraphing-tours-label-lists-point-equation = Try this: { $equation }\ngraphing-tours-label-lists-put-to-work = Nice. Let's put that list to work.\ngraphing-tours-label-new-item = Click here to add a new item.\ngraphing-tours-label-nice = Nice!\ngraphing-tours-label-regressions-better-fit = Edit this equation to find a better fit. Try, for example:<br>{ $equation }\ngraphing-tours-label-regressions-check-model = Nice. Let's check the model.\ngraphing-tours-label-regressions-data = First, let's get some data.\ngraphing-tours-label-regressions-data-2 = Let's start with some data!\ngraphing-tours-label-regressions-docs = Head over to Google Docs and copy and paste this { $sample_data_link }.\ngraphing-tours-label-regressions-equation = Now type: { $equation }\ngraphing-tours-label-regressions-expression-option = ... and select the \"expression\" option.\ngraphing-tours-label-regressions-fill-sample-data = Fill in the sample data:\ngraphing-tours-label-regressions-hint-1 = Hint #1: to get { $y_1 } type { $y1 }.\ngraphing-tours-label-regressions-hint-2 = Hint #2: { $twiddle } is in our onscreen keypad in the 'A B C' section.\ngraphing-tours-label-regressions-keep-exploring = Nice work &ndash; Keep exploring!\ngraphing-tours-label-regressions-new-model = Now, let's try a new model.\ngraphing-tours-label-regressions-new-table = Click here to add a new table.\ngraphing-tours-label-regressions-own-data = Note: you can add your own data instead by clicking the { $plus_icon } button.\ngraphing-tours-label-regressions-residuals = Residuals are the difference between your data and your model. Click here to add them to your table and plot them on the graph.\ngraphing-tours-label-regressions-sample-data = sample data\ngraphing-tours-label-require-expressions-visible = Click to show the list of expressions.\ngraphing-tours-label-require-not-edit-list-mode = Click to return to your expressions.\ngraphing-tours-label-require-resources-not-open = Click to return to this graph.\ngraphing-tours-label-restrictions-abc = Hint: press the 'A B C' button on the keypad to find the { $buttons } buttons\ngraphing-tours-label-restrictions-blank-expression = Click here to make a new blank expression.\ngraphing-tours-label-restrictions-change-equation = Change this equation to { $sample_expression }\ngraphing-tours-label-restrictions-domain = Restrict the domain of this line by adding { $sample_expression } to the end.\ngraphing-tours-label-restrictions-dont-forget = Don't forget the \"y=\"!\ngraphing-tours-label-restrictions-graph-parabola = Now graph: { $sample_expression }\ngraphing-tours-label-restrictions-move-parabola = Move the parabola.\ngraphing-tours-label-restrictions-new-expression = Click here to create a new expression.\ngraphing-tours-label-restrictions-range = Now let's restrict the range. Add { $sample_expression } to the end.\ngraphing-tours-label-restrictions-star = You're a restrictions star!\ngraphing-tours-label-restrictions-start = Let's get started!\ngraphing-tours-label-restrictions-straight-line = Try graphing a straight line, like { $sample_expression }\ngraphing-tours-label-restrictions-type-all = Try typing all of { $sample_expression }\ngraphing-tours-label-restrictions-typing-hint = Hint: you can type { $suggestion1 }, or use the { $suggestion2 } button on the keypad below.\ngraphing-tours-label-self-destruct = This message will self-destruct in { $seconds }...\ngraphing-tours-label-sliders-add = Now click here to add the sliders.\ngraphing-tours-label-sliders-blank-expression = Click here to create a new blank expression.\ngraphing-tours-label-sliders-change-value = Type in here to change the value.\ngraphing-tours-label-sliders-drag-handle = Drag the handle to change the value.\ngraphing-tours-label-sliders-hands-free = Go \"Hands-free\"\ngraphing-tours-label-sliders-make-sliders = Let's make some sliders!\ngraphing-tours-label-sliders-press-play = Press play to animate the slider.\ngraphing-tours-label-sliders-pro = You're a slider pro!\ngraphing-tours-label-sliders-try-typing = Try typing { $sample_expression }\ngraphing-tours-label-tables-back = Click back to continue editing.\ngraphing-tours-label-tables-close-options = Click anywhere to close the drawing options.\ngraphing-tours-label-tables-dots = Click here to connect the dots.\ngraphing-tours-label-tables-enter = Now try pressing Enter.\ngraphing-tours-label-tables-fill-another = Just fill in one more...\ngraphing-tours-label-tables-fill-cell = Fill it in.\ngraphing-tours-label-tables-fill-row = Fill in this whole row.\ngraphing-tours-label-tables-last-trick = Last trick!\ngraphing-tours-label-tables-next-row = Go down to the next row to add more data.\ngraphing-tours-label-tables-open-options = Click and hold on this icon until the options menu opens up.\ngraphing-tours-label-tables-select-table = ... and select the \"table\" option.\ngraphing-tours-label-tables-start = Let's make a table!\ngraphing-tours-label-tables-type-number = Type any number here.\ngraphing-tours-label-tables-valid-number = Uh-oh! Type a valid number here.\ngraphing-tours-label-tables-whiz = You're a tables whiz!\nmatrix-calculator-button-new = New Matrix\nmatrix-calculator-button-settings = settings\nmatrix-calculator-heading-edit-matrix = Edit Matrix { $variable }\nmatrix-calculator-label-columns = Columns\nmatrix-calculator-label-rows = Rows\nmatrix-calculator-narration-add-column = Add Column\nmatrix-calculator-narration-add-row = Add Row\nmatrix-calculator-narration-evaluation = equals { $rowCount } by { $columnCount } matrix.\nmatrix-calculator-narration-evaluation-row = Row { $rowNumber }: { $values }.\nmatrix-calculator-narration-keypad-key-det = Determinant\nmatrix-calculator-narration-keypad-key-inverse = Inverse\nmatrix-calculator-narration-keypad-key-rref = Reduced row echelon form\nmatrix-calculator-narration-keypad-key-trace = Trace\nmatrix-calculator-narration-keypad-key-transpose = Transpose\nmatrix-calculator-narration-matrix-with-variable = Matrix { $variable }\nmatrix-calculator-narration-matrix-without-variable = Matrix\nmatrix-calculator-narration-new-dimensions = Matrix size: { $rows } by { $cols }\nmatrix-calculator-narration-remove-column = Remove Column\nmatrix-calculator-narration-remove-row = Remove Row\nmatrix-calculator-narration-resize-controls = Resize Matrix Controls\nmatrix-calculator-narration-settings-menu = Settings Menu\nmatrix-calculator-narration-title = Desmos Matrix Calculator\nmatrix-calculator-text-node-type-matrix = a matrix\nmatrix-calculator-text-node-type-number = a number\n### Strings for desmos.com homepage\n\n\n### 3835 English words, 352 English strings\n\nfrontpage-button-braille-print-examples = Print these examples\nfrontpage-button-main-join-class = Join\nfrontpage-error-something-went-wrong-try-again-later = Sorry! Something went wrong. Please try again later.\nfrontpage-heading-about-what-we-do = What We Do\nfrontpage-heading-about-who-we-are = Who We Are\nfrontpage-heading-art-contest = <1>Desmos Global</1> Math Art Contest\nfrontpage-heading-art-contest-guest-judges = Guest Judges\nfrontpage-heading-braille-examples = Braille Examples\nfrontpage-heading-braille-table-type-this = Type this\nfrontpage-heading-braille-table-typeset = Typeset\nfrontpage-heading-braille-view-examples-in = View examples in:\nfrontpage-heading-equity-as-we-do-this-work = As we do this work, we ask ourselves...\nfrontpage-heading-equity-disrupt-systemic-inequities = III.  We want to disrupt systemic inequities and conditions of marginalization in education.\nfrontpage-heading-equity-more-equitable-workplace = II. We want to work continuously towards an equitable workplace.\nfrontpage-heading-equity-next-steps = Next Steps and an Invitation\nfrontpage-heading-equity-principles = Desmos Equity Principles\nfrontpage-heading-equity-serve-all-students-and-teachers = I.  We want our products to serve all students and teachers.\nfrontpage-heading-footer-company = Company\nfrontpage-heading-footer-legal = Legal\nfrontpage-heading-footer-products = Products\nfrontpage-heading-footer-resources = Resources\nfrontpage-heading-header-maintenance-mode = Desmos is currently undergoing scheduled maintenance, and accounts are temporarily unavailable.\nfrontpage-heading-main-desmos-plus-partners = Desmos + Partners\nfrontpage-heading-main-global-art-contest-finalists = Global Math Art Contest Finalists\nfrontpage-heading-main-lets-learn-together = Let's learn together.\nfrontpage-heading-main-students = Students\nfrontpage-heading-main-teachers = Teachers\nfrontpage-heading-main-using-desmos-in-a-classroom = Using Desmos in a classroom?\nfrontpage-heading-partners-accessibility-out-of-box = Accessibility Out of the Box\nfrontpage-heading-partners-anywhere-any-device = Anywhere, Any Device\nfrontpage-heading-partners-constant-improvements = Constant Improvements\nfrontpage-heading-partners-global-scale = Global Scale\nfrontpage-heading-partners-rock-solid-reliability = Rock-Solid Reliability\nfrontpage-heading-partners-want-to-embed = Want to embed the power of Desmos right into your website or app?\nfrontpage-heading-shared-contact-us = Contact Us\nfrontpage-heading-team-job-title-ceo = CEO\nfrontpage-heading-team-job-title-copy-editing = Copy Editing\nfrontpage-heading-team-job-title-data = Data\nfrontpage-heading-team-job-title-engineering = Engineering\nfrontpage-heading-team-job-title-faculty = Faculty\nfrontpage-heading-team-job-title-interaction-developer = Interaction Developer\nfrontpage-heading-team-job-title-localization = Localization\nfrontpage-heading-team-job-title-new-markets = New Markets\nfrontpage-heading-team-job-title-operations = Operations\nfrontpage-heading-team-job-title-partnerships = Partnerships\nfrontpage-heading-team-job-title-product = Product\nfrontpage-heading-team-job-title-programs = Programs\nfrontpage-heading-team-job-title-support = Support\nfrontpage-heading-team-meet-the-team = Meet the Team\nfrontpage-heading-team-partnerships-programs-and-operations = Partnerships, Programs, and Operations\nfrontpage-heading-team-product-and-engineering = Product and Engineering\nfrontpage-heading-team-teaching = Teaching\nfrontpage-heading-testmode-about-desmos-test-mode = About Desmos Test Mode\nfrontpage-heading-testmode-about-tab = About\nfrontpage-heading-testmode-android-tab = Android (Beta)\nfrontpage-heading-testmode-chromebooks-tab = Chromebooks\nfrontpage-heading-testmode-feedback-tab = Feedback\nfrontpage-heading-testmode-ipads-and-iphones-tab = iPads and iPhones\nfrontpage-heading-testmode-practice-tab = Practice\nfrontpage-heading-title-about = About Us\nfrontpage-heading-title-art-contest = Art Contest Finalists\nfrontpage-heading-title-curriculum = Curriculum\nfrontpage-heading-title-equity = Equity Principles\nfrontpage-heading-title-frontpage = Beautiful, Free Math\nfrontpage-heading-title-partners = Partners\nfrontpage-heading-title-team = Team\nfrontpage-label-about-meet-the-team = Meet the Team\nfrontpage-label-art-contest-finalists = Finalists\nfrontpage-label-art-contest-from-artist = From the artist:\nfrontpage-label-art-contest-from-judges = From the judges:\nfrontpage-label-art-contest-photo-vernon-1st = 1st Place\nfrontpage-label-art-contest-photo-vernon-2nd = 2nd Place\nfrontpage-label-art-contest-photo-vernon-3rd = 3rd Place\nfrontpage-label-main-classcode-placeholder = Code\nfrontpage-label-shared-contact-us = Contact Us\nfrontpage-link-art-contest-age-range-13-14 = Ages 13-14\nfrontpage-link-art-contest-age-range-15-16 = Ages 15-16\nfrontpage-link-art-contest-age-range-17-18 = Ages 17-18\nfrontpage-link-footer-classroom-activities = Classroom Activities\nfrontpage-link-footer-contact-twitter = Twitter\nfrontpage-link-footer-help-center = Help Center\nfrontpage-link-footer-partnerships = Partnerships\nfrontpage-link-footer-terms-of-service = Terms of Service\nfrontpage-link-header-about = About\nfrontpage-link-header-math-tools = Math Tools\nfrontpage-link-header-resources = Resources\nfrontpage-link-header-team-desmos = Team Desmos\nfrontpage-link-main-browse-activities = Browse Activities\nfrontpage-link-main-go-to-student-homepage = Go to Student Homepage\nfrontpage-link-main-student-homepage = Student Homepage\nfrontpage-link-main-teacher-sign-up = Teacher Sign-Up\nfrontpage-link-main-view-all-finalists = View all finalists\nfrontpage-link-shared-about-us = About Us\nfrontpage-link-shared-accessibility = Accessibility\nfrontpage-link-shared-account-settings = Account Settings\nfrontpage-link-shared-api-documentation = API Docs\nfrontpage-link-shared-assessments = Assessments\nfrontpage-link-shared-blog = Blog\nfrontpage-link-shared-careers = Careers\nfrontpage-link-shared-contact-us = Contact Us\nfrontpage-link-shared-curriculum = Desmos Curriculum\nfrontpage-link-shared-equity-principles = Equity Principles\nfrontpage-link-shared-four-function-calculator = Four Function Calculator\nfrontpage-link-shared-geometry-tool = Geometry Tool\nfrontpage-link-shared-graphing-calculator = Graphing Calculator\nfrontpage-link-shared-learn-desmos = Learn Desmos\nfrontpage-link-shared-log-in = Log In\nfrontpage-link-shared-log-out = Log Out\nfrontpage-link-shared-matrix-calculator = Matrix Calculator\nfrontpage-link-shared-scientific-calculator = Scientific Calculator\nfrontpage-link-shared-sign-up = Sign Up\nfrontpage-link-shared-test-practice = Test Practice\nfrontpage-link-testmode-learn-more-screen-pinning-mode = Learn more about using Screen Pinning on your Android device.\nfrontpage-narration-art-contest-image-of-graph = Image of { $graphTitle }\nfrontpage-narration-art-contest-image-of-graph-by = Image of graph by { $name }\nfrontpage-narration-art-contest-photo-boaler = Photo of Jo Boaler\nfrontpage-narration-art-contest-photo-bousso = Photo of Diarra Bousso\nfrontpage-narration-art-contest-photo-sanderson = Photo of Grant Sanderson\nfrontpage-narration-art-contest-photo-vernon = Photo of Natalie Vernon\nfrontpage-narration-art-contest-photo-woo = Photo of Eddie Woo\nfrontpage-narration-main-partner-logo = { $name } logo\nfrontpage-narration-shared-desmos-logo = Desmos Logo\nfrontpage-narration-shared-image-of-graph = Image of { $graphTitle }\nfrontpage-narration-team-collapse-biography = Collapse Biography\nfrontpage-narration-team-picture-of-name = Picture of { $name }\nfrontpage-narration-testmode-im-done-timer-ios = The I'm Done button and timer on the iOS closing screen\nfrontpage-narration-testmode-ipad-opening-screen = The Start Test button on the iPad opening screen\nfrontpage-narration-testmode-opening-screen = The opening screen of Test Mode\nfrontpage-text-about-build-a-world = Desmos wants to build a world where every student learns math and loves learning math, where a studentâs access to the power and beauty of math doesn't depend on their place of birth, race, ethnicity, gender, or any other aspect of their identity.\nfrontpage-text-about-careers = We're a small but growing team. Interested in joining? <1><2>We're hiring!</2> <3/></1>\nfrontpage-text-about-curriculum = In 2020, we launched our core <1>middle school math program</1>, which pairs the open-source U.S. middle school curriculum from Illustrative Mathematics and Open Up Resources with Desmosâ powerful technology, humanizing pedagogy, and intuitive design. We are working with an incredible cohort of schools and districts to implement and further improve this program over the years to come.\nfrontpage-text-about-join-us = Come join us on our journey! <1>Play with the calculator</1>, <2>check out our classroom activities</2>, or <3>find a career</3> on our growing team. Stay in touch with us on <4>Twitter</4>, <5>Facebook</5>, <6>Instagram</6>, or <7>email</7>{\".\"} Teachers and school leaders are also welcome to join our <8>Educators Community</8>{\".\"}\nfrontpage-text-about-our-story = Our free suite of math software tools, including the renowned Desmos Graphing Calculator and Scientific Calculator, are used annually by over 40 million teachers and students around the world. Our tools power core math curricula for many of the worldâs largest publishers, and our calculators are built into the majority of U.S. state-level assessments and digital college entrance exams. Desmos is also partnered with the Smarter Balanced Assessment Consortium, the International Baccalaureate MYP, and NWEA (view the full list of assessments <1>here</1>).\nfrontpage-text-about-student-activities = Our cutting-edge technology also powers our free <1>digital classroom activities</1>, thoughtfully designed by teachers for teachers to support and celebrate the different ways students come to know mathematics. These activities are guided by our <2>pedagogical philosophy</2> and open up a world of possibilities for students to explore concepts more deeply, collaborate with their peers on problem-solving, and apply knowledge creatively as mathematicians.\nfrontpage-text-art-contest-about-diarra-bousso = <1>Diarra Bousso</1> is a Serial Entrepreneur, Creative Mathematician and Multidisciplinary Artist born in Dakar, Senegal. She is the founder of the fashion and lifestyle company Dakar Boutique Group which houses her label DIARRABLU. She has built a global fashion business through her innovative design concept merging algorithms, tradition and sustainability. Diarra has showcased her collections during New York and Paris Fashion weeks, and is a designer in residence at the Fashion Incubator San Francisco at Bloomingdale's. She is an activist for the global celebration of the African cultural legacy and represents Senegal at the United Nationsâ new platform for art and heritage. Diarra recently completed her Masterâs degree in Mathematics Education at Stanford University.\nfrontpage-text-art-contest-about-eddie-woo = <1>Eddie Woo</1> teaches mathematics at Cherrybrook Technology High School in Sydney, Australia. He uploads his everyday classroom lessons to his Youtube channel, <2>Wootube</2>, which has over 900,000 subscribers and 50 million views. He's the author of <3>It's A Numberful World</3>{\".\"}\nfrontpage-text-art-contest-about-grant-sanderson = <1>Grant Sanderson</1> is the author of the YouTube channel <2>3blue1brown</2>{\".\"} Reaching several million subscribers, the channel is devoted to providing visual explanations of many different topics in math including calculus, geometry, linear algebra, quantum mechanics, machine learning and more.\nfrontpage-text-art-contest-about-jo-boaler = <1>Dr. Jo Boaler</1> is the Nomellini & Olivier Professor of Education at Stanford University, a renowned education researcher and author, and the co-founder of <2>youcubed.org</2>{\".\"} She's devoted her career to mathematics education reform and equitable mathematics classrooms. Her latest book is <3>Limitless Mind: Learn, Lead & Live without Barriers</3> & she is co-leading a <4>K-12 data science initiative</4>{\".\"}\nfrontpage-text-art-contest-about-natalie-vernon = <1>Natalie Vernon</1> works for MEI, an independent charity in England that develops and delivers national professional development for mathematics teachers across the country. Natalie focuses primarily on working with KS4 and KS5 teachers. Prior to joining MEI, Natalie was a head of department in a comprehensive secondary school in England and had taught in this sector for 12 years. She is particularly interested in how technology and cognitive learning theory can help to improve understanding and engagement in maths classrooms.\nfrontpage-text-art-contest-description = Desmos's first Global Math Art Contest featured over 4,000 graphs from over 100 countries around the world. Here are the winners and finalists, chosen from countless examples of incredible effort, artistry, ingenuity, and creativity.\nfrontpage-text-braille-examples-calculator-information = Use a Braille display? You can read and write equations in the <1>Four-Function</1> <2>(www.desmos.com/fourfunction)</2> and <3>Scientific</3> <4>(www.desmos.com/scientific)</4> calculators using the two most common mathematical Braille codes in North America: Nemeth and Unified English Braille (UEB).\nfrontpage-text-braille-examples-page-screen-reader-information = Your screen reader should be set for Computer Braille input and output to minimize the risk of translation errors. Check out <1>learn.desmos.com/braille</1> for more information about using Braille in the Desmos calculators.\nfrontpage-text-description-about = Desmos is a math ed tech company building calculators, digital classroom tools, math activities, and curriculum for classrooms around the world.\nfrontpage-text-description-art-contest = The Desmos Math Art Contest is open yearly to students ages 13â ââ 18 to showcase their graphing calculator skills, creativity, and love of math.\nfrontpage-text-description-equity = Our goal is to support the development of a more equitable math education system and tech industry. We use these principles as our guide.\nfrontpage-text-description-frontpage = Desmos offers best-in-class calculators, digital math activities, and curriculum to help every student love math and love learning math.\nfrontpage-text-description-partners = Desmos runs on any modern device with no downloads or installs. Partner with us to embed the power of Desmos right into your website or app.\nfrontpage-text-description-team = Our team works across 7 time zones, 2 hemispheres, and 18 states with 1 goal: to help every student learn math and love learning math.\nfrontpage-text-equity-as-a-us-based-team = As a primarily U.S.-based team, our focus for applying these principles has typically centered on injustices within our country. However, as our team, community of users, and partnerships continue to expand internationally, we seek to learn how we can apply these principles to strive for equitable math education worldwide.\nfrontpage-text-equity-everyone-understands = Our workplace should be one where everyone understands how they contribute to the companyâs mission and feels valued in their contribution. If we donât intentionally foster diversity and inclusion internally, we remain a part of the broader systemic inequities driving the need for these principles. Equally important, having a diverse group of colleagues is essential to serving a diverse external community. To do this, we must critically examine and address bias in our own processes and interactions.\nfrontpage-text-equity-goal-more-equitable-math-education-system = Our goal is to support the development of a more equitable math education system and tech industry. We use these principles as guides towards achieving this goal.\nfrontpage-text-equity-gratitude = We also want to express our gratitude to the many folks who have influenced and pushed our thinking in this area, especially but certainly not limited to <1>Lauren Baucom</1>, <2>Christelle Rocha</2>, <3>Ayanna Perry</3>, and Rochelle Gutierrez.\nfrontpage-text-equity-how-can-we-measure-impact = How can we measure the impact of our work on communities we aim to serve?\nfrontpage-text-equity-how-can-we-uphold-values = How can we uphold our values when selecting partners and services?\nfrontpage-text-equity-how-might-we-attend-to-safety = How might we attend to the mental, emotional, and physical safety of our employees?\nfrontpage-text-equity-how-might-we-continue-to-prioritize-equity = How might we continue to prioritize a drive for equity as our company changes over time?\nfrontpage-text-equity-how-might-we-examine-biases = How might we examine and reduce our individual biases?\nfrontpage-text-equity-how-might-we-share-our-thinking = How might we share our current thinking and get feedback?\nfrontpage-text-equity-how-might-we-support-access = How might we support the ACCESS and ACHIEVEMENT of the communities we serve?\nfrontpage-text-equity-how-might-we-support-identity = How might we support the IDENTITY and POWER of the communities we serve?\nfrontpage-text-equity-how-might-we-sustain-ourselves = How might we sustain ourselves in our day-to-day work at Desmos?\nfrontpage-text-equity-how-might-work-disrupt-white-supremacy = How might our work disrupt white supremacy and the oppressive results of dominant culture?\nfrontpage-text-equity-how-will-it-help = How might this work help the communities we aim to serve? How might it harm these communities?\nfrontpage-text-equity-on-a-mission = We're on a mission to help every student learn math and love learning math. To achieve our mission, we must acknowledge past and present injustices in our communities and take intentional action to make change.\nfrontpage-text-equity-tag-or-email = We would love to hear ways these principles may be underdeveloped or ways in which these principles shifted your thinking. If you want to respond publicly, tag us <1>@desmos</1>{\".\"} If you want to respond privately, feel free to email <2>equity@desmos.com</2>{\".\"}\nfrontpage-text-equity-we-have-a-responsibility = We have a responsibility to continuously learn about how systemic inequity is embedded in education and to use this knowledge to drive our decision-making. As we learn and put our learning into practice, we share our work with the hope that others will listen, learn, and push us further.\nfrontpage-text-equity-we-recognize-creating-adopting = We recognize that creating and adopting a set of equity principles is just one foundational step that helps us orient the work that comes next. We are also aware that our team membersâ identities, experiences, and biases limit our ability to help every student or to see ways in which our systems and structures bias some groups over others.\nfrontpage-text-equity-what-voices-can-we-amplify = What underrepresented voices can we learn from and amplify?\nfrontpage-text-equity-which-communities-to-learn-from = Which communities do we need to learn from and serve?\nfrontpage-text-equity-who-serves-harms = Who might each internal process serve? Who might this process harm?\nfrontpage-text-equity-without-taking-intentional-steps = Without taking intentional steps, our work will not serve all groups well. Therefore, we must focus on identifying and attending to the needs of marginalized and excluded communities. This means learning from and with these teachers and students, and using their needs to shape our work and measure our success.\nfrontpage-text-footer-copyright = Copyright { $copyrightSign } { $year } Desmos, Inc.\nfrontpage-text-header-app-links = Download our apps in the <1>Google Play Store</1> and <2>iOS App Store</2>{\".\"}\nfrontpage-text-main-have-a-code = Have a code from your teacher? Head to the student homepage to enter it.\nfrontpage-text-main-interactive-and-creative-activities = Interactive and creative activities for your math class.\nfrontpage-text-main-join-your-classmates = Join your classmates!\nfrontpage-text-main-on-a-mission = We're on a mission to help every student learn math and love learning math.\nfrontpage-text-main-partners-benefits = As a partner of Desmos, you benefit from our continual work to make Desmos more powerful, faster, and easier to use. We release a new version of the API annually in April as a free upgrade for all of our partners. <1>Read our Changelog</1>{\".\"}\nfrontpage-text-main-partners-information = Our tools power <1>assessments</1> and major curricula. <2>Learn more</2>\nfrontpage-text-partners-accessible-api = We believe in interactive math for every student, including students who are blind or visually impaired. Desmos's API is WCAG 2.0 compliant at the AA level. We support fully blind students by converting graphs to sound and connecting with screen readers. <1>Learn More</1>{\".\"}\nfrontpage-text-partners-desmos-runs-on-modern-browser = Desmos runs on any modern browser with no downloads or installs. We also run seamlessly on iPhones, iPads, Android phones, and Windows touch devices. Chromebook attached to a Smartboard? No problem! We've seen just about every combination a classroom has to offer, and we make sure our software runs on any modern browser, in nearly any configuration.\nfrontpage-text-partners-desmos-used-by-millions = Desmos is used by millions of students and teachers in nearly every country in the world and has been translated into 30 languages.\nfrontpage-text-partners-uptime = One of our values is \"Works every time.\" This extends to our API. With greater than 99.99% uptime over the last 3 years, we provide the reliability your app or website needs. We also offer self-hosting for partners who need it.\nfrontpage-text-team-about-us = Our team works across 7 time zones, 2 hemispheres, and 18 states with 1 goal: to help every student learn math and love learning math. Want to join us? <1>We're hiring!</1>\nfrontpage-text-testmod-administer-test = <1>To administer a Secure Test:</1><2><3>Have students pin the app.</3><4>Tell the students not unpin the app.</4><5>At the end of the test, confirm that the screen was pinned for the entire test by checking the in-app clock.</5></2>\nfrontpage-text-testmod-feedback = We are excited about our recent app updates, and we are continuously making improvements. We would love your feedback on how we can support the best possible experience for your students and colleagues. Please email us at <1>feedback@desmos.com</1> with any questions or comments!\nfrontpage-text-testmode-android = Our <1>Android app</1> (currently in Beta testing) allows for offline practice.\nfrontpage-text-testmode-app-self-lock-mode-colors = While in App Self-Lock mode, the top bar of the calculator will change color according to the calculator in use: green for graphing, purple for scientific, blue for four function. There will also be a badge next to the Desmos logo.\nfrontpage-text-testmode-chromebooks = Our Chrome app allows for offline practice. You can download the Chrome app by visiting <1>bit.ly/desmos-test-mode-chrome-app</1> on the device. The <2>Chrome browser</2> must be installed on the device to use the Chrome Test Mode app.\nfrontpage-text-testmode-enable-guided-access = <1>To enable Guided Access:</1><2><3>Go to Settings > General > Accessibility > Guided Access.</3><4>Pick a passcode that needs to be entered.</4><5>Open up the Test Mode app.</5><6>Triple-click the Side or Home button.</6></2><7>This will lock the device to that app and won't allow the student to leave it without a code.</7>\nfrontpage-text-testmode-enable-screen-pinning = <1>To enter Screen Pinning:</1><2><3>Disable WiFi on your phone.</3><4>Enter Airplane Mode on your phone.</4><5>A \"Start Test\" button will appear. Click it.</5></2>\nfrontpage-text-testmode-exit-guided-access = <1>To exit Guided Access:</1><2><3>Triple-click the Side or Home button.</3><4>Enter the passcode that you chose.</4></2>\nfrontpage-text-testmode-four-function-calculator-app-self-lock-mode-caption = Four function calculator in App Self-Lock mode with a blue top bar.\nfrontpage-text-testmode-four-function-calculator-blue-top-bar = The secure four function calculator has a blue top bar.\nfrontpage-text-testmode-four-function-calculator-caption = Four function calculator in kiosk mode with a blue top bar.\nfrontpage-text-testmode-graphing-calculator-app-self-lock-mode-caption = Graphing calculator in App Self-Lock mode with a green top bar.\nfrontpage-text-testmode-graphing-calculator-kiosk-mode-caption = Graphing calculator in kiosk mode with a green top bar.\nfrontpage-text-testmode-guided-access = For additional security, you can lock the student into the app using <1>Guided Access</1>{\".\"}\nfrontpage-text-testmode-ipads-and-iphones = Our <1>iPad and iPhone app</1> allows for offline practice. The app also supports additional levels of security.\nfrontpage-text-testmode-kiosk-mode = Kiosk mode provides an extra level of security by preventing other apps from being used while the calculator is open. Students will be locked into the calculator configuration they choose before pressing \"Start Test\". Before you sign in, click âAppsâ on the bottom bar and then select Desmos Test Mode. To exit kiosk mode, turn the Chromebook off.\nfrontpage-text-testmode-kiosk-mode-colors = While in kiosk mode, the top bar of the calculator will change color according to the calculator in use: green for graphing, purple for scientific, blue for four function. There will also be a badge next to the Desmos logo.\nfrontpage-text-testmode-levels-of-security = This page describes the various levels of security available through our apps, along with instructions for installation and usage.\nfrontpage-text-testmode-low-stakes-assessments = Each app lets you administer low-stakes, proctored assessments with security features to help enforce your school's or classroom's policies. We also partner with Mobile Device Management (MDM) companies to provide an even more secure test-day experience.\nfrontpage-text-testmode-partners = Desmos partners with high-stakes test providers in <1>over 30 states and on several national exams</1> to provide access to our calculators on testing day.\nfrontpage-text-testmode-practice = Students can practice using the calculators on our <1>Practice Page</1>{\".\"} We also provide free apps for <2>Chromebooks,</2> <3>iPads, and iPhones</3> to support practice.\nfrontpage-text-testmode-practice-apps-match-test-day = Our practice apps match the configuration that students will encounter on test day. Students can practice for a specific assessment by selecting \"Choose Assessment\" on the opening screen.\nfrontpage-text-testmode-scientific-calculator-app-self-lock-mode-caption = Scientific calculator in App Self-Lock mode with a purple top bar.\nfrontpage-text-testmode-scientific-calculator-caption = Scientific calculator in kiosk mode with a purple top bar.\nfrontpage-text-testmode-scientific-calculator-purple-top-bar = The secure scientific calculator has a purple top bar.\nfrontpage-text-testmode-screen-pinning-mode = Screen Pinning mode provides an extra level of security by preventing other apps from being used while the calculator is open.\nfrontpage-text-testmode-secure-graphing-calculator-green-top-bar = The secure graphing calculator has a green top bar.\nfrontpage-text-testmode-students-can-leave-app-self-lock-mode = Please note that students can leave App Self-Lock by clicking \"I'm Done\" before the end of the test. You can monitor appropriate usage by looking at the log at the conclusion of the test. It will show how long the student was continuously in the application.\nfrontpage-text-testmode-students-can-leave-chromebook-app = Please note that students can leave the app by powering down their Chromebook and restarting it. You can monitor appropriate usage by looking at the log at the conclusion of the test. It will show how long the student was continuously in the application.\nfrontpage-text-testmode-students-can-opt-into-app-self-lock = Students can opt into App Self-Lock by pressing the \"Start Test\" button. While in App Self-Lock, students will be locked into the calculator they selected before pressing \"Start Test\". They will not be able to switch calculators nor leave the app until they leave App Self-Lock.\nfrontpage-text-testmode-to-help-teachers-and-students-prepare = To help students and teachers prepare for these assessmentsâand to support delivery of lower-stakes tests and quizzes in classroomsâwe've developed a suite of \"Test Mode\" apps.\npractice-button-sc-info-pdf = { $stateName } PDF\npractice-button-state-info-pdf = { $stateName } Information PDF\npractice-heading-accessibility = Accessibility\npractice-heading-is-desmos-on-test = Is Desmos on your test?\npractice-heading-national-international-assessments = National and International Assessments\npractice-heading-practice = Practice\npractice-heading-privacy = Privacy\npractice-heading-questions-and-feedback = Additional Questions and Feedback\npractice-heading-state-assessments = State Assessments\npractice-heading-title-test-mode = Test Mode\npractice-heading-title-testing = Testing\npractice-label-desmos-on-test = Desmos is on the test!\npractice-label-desmos-on-test-apply-nysed = Apply to NYSED to use Desmos!\npractice-label-desmos-on-test-partial = Desmos can be used on the test\npractice-label-desmos-on-tests = Desmos is on the tests!\npractice-label-ib-middle-years = International BaccalaureateÂ® (IB) Middle Years Programme (MYP)\npractice-label-nwea-map-growth = NWEA MAPÂ® Growthâ¢\npractice-label-sample = Sample\npractice-label-sbac = Smarter Balanced\npractice-label-state-test = State Test:\npractice-label-state-tests = State Tests:\npractice-label-states-al-four-function-grades = Grades 6-8\npractice-label-states-al-scientific-grades = Grades 6-8\npractice-label-states-az-graphing-grades = High School\npractice-label-states-az-scientific-grades = Grades 7-8\npractice-label-states-ca-four-function-grades = Grade 5 (Science, CAST), Grade 6 (Mathematics)\npractice-label-states-ca-graphing-grades = Grade 11 (Mathematics)\npractice-label-states-ca-scientific-grades = Grades 7-8 (Mathematics), Grades 8-12 (Science, CAST)\npractice-label-states-ct-four-function-grades = Grade 6\npractice-label-states-ct-scientific-grades = Grades 7-8\npractice-label-states-de-four-function-grades = Grade 6\npractice-label-states-de-graphing-grades = High School\npractice-label-states-de-scientific-grades = Grades 7-8\npractice-label-states-fl-scientific-grades = Grades 7-8\npractice-label-states-ga-four-function-grades = Grade 6\npractice-label-states-ga-graphing-grades = High School\npractice-label-states-ga-scientific-grades = Grades 7-8 & High School\npractice-label-states-hi-four-function-grades = Grade 6\npractice-label-states-hi-graphing-grades = High School\npractice-label-states-hi-scientific-grades = Grades 7-8\npractice-label-states-ia-four-function-grades = Grades 3-6 (Mathematics), Grade 5 (Science)\npractice-label-states-ia-scientific-grades = Grades 7-11 (Mathematics), Grades 8 & 10 (Science)\npractice-label-states-id-four-function-grades = Grade 6\npractice-label-states-id-graphing-grades = High School\npractice-label-states-id-scientific-grades = Grades 7-8\npractice-label-states-in-four-function-grades = Grade 6 (ILEARN and IAM)\npractice-label-states-in-graphing-grades = High School (ISTEP+)\npractice-label-states-in-scientific-grades = Grades 7-8 (ILEARN)\npractice-label-states-ky-four-function-grades = High School (Mathematics)\npractice-label-states-ky-graphing-grades = High School (Mathematics and Science)\npractice-label-states-ky-scientific-grades = High School (Mathematics)\npractice-label-states-la-graphing-grades = High School\npractice-label-states-ma-graphing-grades = Grades 8 & 10 (Mathematics)\npractice-label-states-ma-scientific-grades = High School (Introductory Physics)\npractice-label-states-md-four-function-grades = Grade 5 (Science), Grades 3-7 (Mathematics)\npractice-label-states-md-graphing-grades = High School (Mathematics)\npractice-label-states-md-scientific-grades = Grade 8 (Mathematics), Grade 8 (Science)\npractice-label-states-mi-four-function-grades = Grade 6\npractice-label-states-mi-scientific-grades = Grade 7\npractice-label-states-mo-four-function-grades = Grade 5 & 8 (Science), Grades 6-8 (Mathematics)\npractice-label-states-mo-graphing-grades = Grades 6-8 (Mathematics), Algebra I, Algebra II, Geometry, Grade 8 (Science), Physical Science, and Biology\npractice-label-states-mo-scientific-grades = Grades 6-8 (Mathematics), Grade 8 (Science)\npractice-label-states-ms-graphing-grades = Algebra 1\npractice-label-states-mt-four-function-grades = Grade 6\npractice-label-states-mt-graphing-grades = High School\npractice-label-states-mt-scientific-grades = Grades 7-8\npractice-label-states-nc-four-function-grades = Grades 3-5\npractice-label-states-nc-graphing-grades = Grade 8, Math 1, and above\npractice-label-states-nc-scientific-grades = Grades 6-8\npractice-label-states-nd-four-function-grades = Grade 6\npractice-label-states-nd-graphing-grades = High School-Grade 11\npractice-label-states-nd-scientific-grades = Grades 7-8\npractice-label-states-ne-four-function-grades = Grade 6\npractice-label-states-ne-scientific-grades = Grades 7-8\npractice-label-states-nh-four-function-grades = Grade 6\npractice-label-states-nh-graphing-grades = High School\npractice-label-states-nh-scientific-grades = Grades 7-8\npractice-label-states-nv-four-function-grades = Grade 5 (Science), Grade 6 (Mathematics)\npractice-label-states-nv-scientific-grades = Grades 7-8 (Mathematics), Grade 8, High School (Science)\npractice-label-states-ny-graphing-grades = High School (Mathematics)\npractice-label-states-oh-graphing-grades = High School\npractice-label-states-oh-scientific-grades = Grades 3-8\npractice-label-states-or-four-function-grades = Grade 6 (Mathematics), Grade 5 (Science)\npractice-label-states-or-graphing-grades = Grades 8, 11 (Science), High School (Mathematics)\npractice-label-states-or-scientific-grades = Grades 7-8 (Mathematics)\npractice-label-states-ri-graphing-grades = Grade 8 (Mathematics), Grade 11 (Science)\npractice-label-states-sc-alt-four-function-grades = Grade 6, Alternate Assessments\npractice-label-states-sc-alt-scientific-grades = Grades 7, 8, 11, Alternate Assessments\npractice-label-states-sc-std-four-function-grades = Grades 6 (Math, Science)\npractice-label-states-sc-std-graphing-grades = Grades 7-8 (Math), Algebra 1, Biology\npractice-label-states-sc-std-scientific-grades = Grades 6 (Math, Science), 7-8 (Math), Algebra 1, Biology\npractice-label-states-sd-four-function-grades = Grade 6\npractice-label-states-sd-graphing-grades = High School\npractice-label-states-sd-scientific-grades = Grades 7-8\npractice-label-states-tx-four-function-grades = Grade 8 Science, Biology\npractice-label-states-tx-graphing-grades = Grade 8 Science, Biology, Grade 8 Math, Algebra 1, Algebra 2\npractice-label-states-tx-scientific-grades = Grade 8 Science, Biology\npractice-label-states-ut-graphing-grades = Grades 9-10 (Mathematics)\npractice-label-states-ut-scientific-grades = Grades 9-10 (Science)\npractice-label-states-va-four-function-grades = Grades 4-5\npractice-label-states-va-graphing-grades = High School\npractice-label-states-va-scientific-grades = Grades 6-8\npractice-label-states-vi-four-function-grades = Grade 6\npractice-label-states-vi-graphing-grades = Grades 10-11\npractice-label-states-vi-scientific-grades = Grades 7-8\npractice-label-states-vt-four-function-grades = Grade 6\npractice-label-states-vt-graphing-grades = High School\npractice-label-states-vt-scientific-grades = Grades 7-8\npractice-label-states-wa-four-function-grades = Grade 5 (Science), Grade 6 (Mathematics)\npractice-label-states-wa-graphing-grades = High School (Mathematics)\npractice-label-states-wa-scientific-grades = Grades 7-8 (Mathematics), Grade 8 & High School (Science)\npractice-label-states-wv-four-function-grades = Grade 6\npractice-label-states-wv-graphing-grades = High School\npractice-label-states-wv-scientific-grades = Grades 7-8\npractice-label-states-wy-four-function-grades = Grade 6\npractice-label-states-wy-graphing-grades = High School\npractice-label-states-wy-scientific-grades = Grades 7-8\npractice-link-four-function = Four Function Calculator\npractice-link-graphing = Graphing Calculator\npractice-link-scientific = Scientific Calculator\npractice-narration-close-details = Close Details About { $stateName }\npractice-text-accessibility-information = Desmos is committed to helping every student love learning math. We are proud to say that the Desmos calculators are <1>WCAG 2.1 AA compliant. </1>The accessibility improvements we've made ensure students who are blind or visually impaired have the same opportunities as their peers to discover the joy of learning math. Please read more about this at <2>www.desmos.com/accessibility</2>{\".\"}\npractice-text-calculator-note = These calculators differ from the ones on our site. You can find more information in the PDF.\npractice-text-data-privacy = Additional rules apply for data privacy when dealing with children under 13. The <1>Four-Function</1> and <2>Scientific</2> calculators, which will be used by students under the age of 13, never request student data as there is no way to log in.\npractice-text-description-test-mode = Learn how to configure Test Mode to use Desmos calculators on assessments.\npractice-text-description-testing = Is Desmos on your test? Find out if the Desmos calculators are on your state assessments.\npractice-text-different-calculators-ib = Please note that these calculators differ from the ones on our site. You can find more information in <1>our overview PDF</1>{\".\"} Students can practice on the sample <2>Scientific Calculator</2>{\".\"}\npractice-text-different-calculators-nwea = Please note that these calculators differ from the ones on our site. You can find more information in <1>our overview PDF</1>{\".\"} Students can practice on the sample <2>Four Function</2> or <3>Scientific Calculator</3>{\".\"}\npractice-text-different-calculators-sbac = Desmos calculators are available on Smarter Balanced assessments. Please note that these calculators differ from the standard ones on our site. Students who reside in a Smarter Balanced member state or U.S. territory can practice with the calculators configured for specific test settings available below.\npractice-text-more-information = Interested in learning more about Desmos calculator found on your state or national assessment? Check out our <1>professional learning and development offerings</1>{\".\"}\npractice-text-national-international-assessments = Desmos is now available on national and international assessments! These assessments include:\npractice-text-practice-information = To help students and teachers prepare for these assessmentsâand to support delivery of lower-stakes tests and quizzes in classrooms âwe've developed a suite of \"Test Mode\" apps. Our practice apps match the configuration that students will encounter on test day. You can learn more at <1>www.desmos.com/test-mode</1>{\".\"}\npractice-text-privacy = During test administrations, Desmos will not receive any data about students. Vendors will host the Desmos technology directly on their servers and will not exchange any data with Desmos's servers. Furthermore, students do not need to sign in or provide any personal information about themselves to be able to practice with Desmos calculators before the test.\npractice-text-questions = We know this change may prompt additional questions from teachers, parents, and administrators. Please don't hesitate to email questions or feedback to <1>support@desmos.com</1>{\".\"}\npractice-text-state-assessments = Desmos is also available on a range of state assessments! Find your state below to learn more.\npractice-text-state-not-listed = If Desmos isn't on your state assessment yet, and you're interested in changing that, <1>please let us know!</1>\npractice-text-students-create-accounts = While practicing for the test, some 11th-grade students using <1>desmos.com/calculator</1> may choose to create accounts to be able to save work for a later time. We encourage everyone to review the <2>Desmos Privacy Policy</2>, which describes what information we collect from these users who are over the age of 13 and what we do with that information.\n"})),i("lib/i18n-homepage-langs",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHomepageLanguage=t.homepage_languages=void 0,t.homepage_languages={ar:!0,de:!0,en:!0,es:!0,et:!0,fr:!0,id:!0,it:!0,ja:!0,ko:!0,nl:!0,pl:!0,"pt-BR":!0,ru:!0,"sv-SE":!0,th:!0,tr:!0,vi:!0,"zh-CN":!0,"zh-TW":!0},t.isHomepageLanguage=function(e){return!!t.homepage_languages[e]}})),i("@fluent/bundle",["exports"],(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e){if(!e)return[];Array.isArray(e)||(e=[e]);for(var r={},n=0;n<e.length;++n){var i=e[n];if(i&&"object"===t(i)&&(i=String(i)),"string"!=typeof i){var o="Locales should be strings, ".concat(JSON.stringify(i)," isn't.");throw new TypeError(o)}if("*"!==i[0]){if(!i.split("-").every((function(e){return/[a-z0-9]+/i.test(e)}))){var a=JSON.stringify(i),s="The locale ".concat(a," is not a structurally valid BCP 47 language tag.");throw new RangeError(s)}r[i]=!0}}return Object.keys(r)}var o,a=Object.freeze({__proto__:null,default:function(e,t,r){function o(e){do{if(t(e))return e;e=e.replace(/-?[^-]*$/,"")}while(e);return null}var a=function(e){for(var t=i(e),r=0;r<t.length;++r){var n=o(t[r]);if(n)return n}return o("undefined"!=typeof navigator&&navigator&&(navigator.userLanguage||navigator.language)||"en-US")},s=function(){function s(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this._locale=a(r),this._select=t(this._locale),this._type=function(e){if(!e)return"cardinal";if("cardinal"===e||"ordinal"===e)return e;throw new RangeError("Not a valid plural type: "+JSON.stringify(e))}(n.type),this._nf=new e("en",n)}return n(s,null,[{key:"supportedLocalesOf",value:function(e){return i(e).filter(o)}}]),n(s,[{key:"resolvedOptions",value:function(){var e=this._nf.resolvedOptions(),t=e.minimumIntegerDigits,n=e.minimumFractionDigits,i=e.maximumFractionDigits,o=e.minimumSignificantDigits,a=e.maximumSignificantDigits,s={locale:this._locale,minimumIntegerDigits:t,minimumFractionDigits:n,maximumFractionDigits:i,pluralCategories:r(this._locale,"ordinal"===this._type),type:this._type};return"number"==typeof o&&(s.minimumSignificantDigits=o,s.maximumSignificantDigits=a),s}},{key:"select",value:function(e){if(!(this instanceof s))throw new TypeError("select() called on incompatible ".concat(this));if("number"!=typeof e&&(e=Number(e)),!isFinite(e))return"other";var t=this._nf.format(Math.abs(e));return this._select(t,"ordinal"===this._type)}}]),s}();return Object.defineProperty(s,"prototype",{writable:!1}),s}}),s=function(){function e(t,r){var n=r.minimumIntegerDigits,i=r.minimumFractionDigits,o=r.maximumFractionDigits,a=r.minimumSignificantDigits,s=r.maximumSignificantDigits;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._minID="number"==typeof n?n:1,this._minFD="number"==typeof i?i:0,this._maxFD="number"==typeof o?o:Math.max(this._minFD,3),"number"!=typeof a&&"number"!=typeof s||(this._minSD="number"==typeof a?a:1,this._maxSD="number"==typeof s?s:21)}var t;return(t=[{key:"resolvedOptions",value:function(){var e={minimumIntegerDigits:this._minID,minimumFractionDigits:this._minFD,maximumFractionDigits:this._maxFD};return"number"==typeof this._minSD&&(e.minimumSignificantDigits=this._minSD,e.maximumSignificantDigits=this._maxSD),e}},{key:"format",value:function(e){if(this._minSD){for(var t=String(e),r=0,n=0;n<t.length;++n){var i=t[n];"0"<=i&&i<="9"&&++r}return r<this._minSD?e.toPrecision(this._minSD):r>this._maxSD?e.toPrecision(this._maxSD):t}return 0<this._minFD?e.toFixed(this._minFD):0===this._maxFD?e.toFixed(0):String(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),l=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}(a),c=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(l),n=t(s);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}function c(e){return"in"===e?"_in":"pt-PT"===e?"pt_PT":e}var u=a((function(e,t){function r(e,t){return t||1!=e?"other":"one"}function n(e,t){return t||0!=e&&1!=e?"other":"one"}function i(e,t){var r=!String(e).split(".")[1];return!t&&1==e&&r?"one":"other"}function o(e,t){return"other"}function a(e,t){return t?"other":1==e?"one":2==e?"two":"other"}var s;s={_in:o,af:r,ak:n,am:function(e,t){return!t&&0<=e&&e<=1?"one":"other"},an:r,ar:function(e,t){var r=String(e).split("."),n=Number(r[0])==e&&r[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":3<=n&&n<=10?"few":11<=n&&n<=99?"many":"other"},ars:function(e,t){var r=String(e).split("."),n=Number(r[0])==e&&r[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":3<=n&&n<=10?"few":11<=n&&n<=99?"many":"other"},as:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},asa:r,ast:i,az:function(e,t){var r=String(e).split(".")[0],n=r.slice(-1),i=r.slice(-2),o=r.slice(-3);return t?1==n||2==n||5==n||7==n||8==n||20==i||50==i||70==i||80==i?"one":3==n||4==n||100==o||200==o||300==o||400==o||500==o||600==o||700==o||800==o||900==o?"few":0==r||6==n||40==i||60==i||90==i?"many":"other":1==e?"one":"other"},be:function(e,t){var r=String(e).split("."),n=Number(r[0])==e,i=n&&r[0].slice(-1),o=n&&r[0].slice(-2);return t?2!=i&&3!=i||12==o||13==o?"other":"few":1==i&&11!=o?"one":2<=i&&i<=4&&(o<12||14<o)?"few":n&&0==i||5<=i&&i<=9||11<=o&&o<=14?"many":"other"},bem:r,bez:r,bg:r,bho:n,bm:o,bn:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},bo:o,br:function(e,t){var r=String(e).split("."),n=Number(r[0])==e,i=n&&r[0].slice(-1),o=n&&r[0].slice(-2),a=n&&r[0].slice(-6);return t?"other":1==i&&11!=o&&71!=o&&91!=o?"one":2==i&&12!=o&&72!=o&&92!=o?"two":(3==i||4==i||9==i)&&(o<10||19<o)&&(o<70||79<o)&&(o<90||99<o)?"few":0!=e&&n&&0==a?"many":"other"},brx:r,bs:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=n.slice(-2),l=i.slice(-1),c=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==l&&11!=c?"one":o&&2<=a&&a<=4&&(s<12||14<s)||2<=l&&l<=4&&(c<12||14<c)?"few":"other"},ca:function(e,t){var r=!String(e).split(".")[1];return t?1==e||3==e?"one":2==e?"two":4==e?"few":"other":1==e&&r?"one":"other"},ce:r,ceb:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=i.slice(-1);return!t&&(o&&(1==n||2==n||3==n)||o&&4!=a&&6!=a&&9!=a||!o&&4!=s&&6!=s&&9!=s)?"one":"other"},cgg:r,chr:r,ckb:r,cs:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1];return t?"other":1==e&&i?"one":2<=n&&n<=4&&i?"few":i?"other":"many"},cy:function(e,t){return t?0==e||7==e||8==e||9==e?"zero":1==e?"one":2==e?"two":3==e||4==e?"few":5==e||6==e?"many":"other":0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e,t){var r=String(e).split("."),n=r[0],i=Number(r[0])==e;return t||1!=e&&(i||0!=n&&1!=n)?"other":"one"},de:i,dsb:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-2),s=i.slice(-2);return t?"other":o&&1==a||1==s?"one":o&&2==a||2==s?"two":o&&(3==a||4==a)||3==s||4==s?"few":"other"},dv:r,dz:o,ee:r,el:r,en:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&n?"one":"other"},eo:r,es:r,et:i,eu:r,fa:function(e,t){return!t&&0<=e&&e<=1?"one":"other"},ff:function(e,t){return!t&&0<=e&&e<2?"one":"other"},fi:i,fil:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=i.slice(-1);return t?1==e?"one":"other":o&&(1==n||2==n||3==n)||o&&4!=a&&6!=a&&9!=a||!o&&4!=s&&6!=s&&9!=s?"one":"other"},fo:r,fr:function(e,t){return t?1==e?"one":"other":0<=e&&e<2?"one":"other"},fur:r,fy:i,ga:function(e,t){var r=String(e).split("."),n=Number(r[0])==e;return t?1==e?"one":"other":1==e?"one":2==e?"two":n&&3<=e&&e<=6?"few":n&&7<=e&&e<=10?"many":"other"},gd:function(e,t){var r=String(e).split("."),n=Number(r[0])==e;return t?1==e||11==e?"one":2==e||12==e?"two":3==e||13==e?"few":"other":1==e||11==e?"one":2==e||12==e?"two":n&&3<=e&&e<=10||n&&13<=e&&e<=19?"few":"other"},gl:i,gsw:r,gu:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},guw:n,gv:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=n.slice(-1),a=n.slice(-2);return t?"other":i&&1==o?"one":i&&2==o?"two":!i||0!=a&&20!=a&&40!=a&&60!=a&&80!=a?i?"other":"many":"few"},ha:r,haw:r,he:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=Number(r[0])==e,a=o&&r[0].slice(-1);return t?"other":1==e&&i?"one":2==n&&i?"two":i&&(e<0||10<e)&&o&&0==a?"many":"other"},hi:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":0<=e&&e<=1?"one":"other"},hr:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=n.slice(-2),l=i.slice(-1),c=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==l&&11!=c?"one":o&&2<=a&&a<=4&&(s<12||14<s)||2<=l&&l<=4&&(c<12||14<c)?"few":"other"},hsb:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-2),s=i.slice(-2);return t?"other":o&&1==a||1==s?"one":o&&2==a||2==s?"two":o&&(3==a||4==a)||3==s||4==s?"few":"other"},hu:function(e,t){return t?1==e||5==e?"one":"other":1==e?"one":"other"},hy:function(e,t){return t?1==e?"one":"other":0<=e&&e<2?"one":"other"},ia:i,id:o,ig:o,ii:o,io:i,is:function(e,t){var r=String(e).split("."),n=r[0],i=Number(r[0])==e,o=n.slice(-1),a=n.slice(-2);return t||(!i||1!=o||11==a)&&i?"other":"one"},it:function(e,t){var r=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&r?"one":"other"},iu:a,iw:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=Number(r[0])==e,a=o&&r[0].slice(-1);return t?"other":1==e&&i?"one":2==n&&i?"two":i&&(e<0||10<e)&&o&&0==a?"many":"other"},ja:o,jbo:o,jgo:r,ji:i,jmc:r,jv:o,jw:o,ka:function(e,t){var r=String(e).split(".")[0],n=r.slice(-2);return t?1==r?"one":0==r||2<=n&&n<=20||40==n||60==n||80==n?"many":"other":1==e?"one":"other"},kab:function(e,t){return!t&&0<=e&&e<2?"one":"other"},kaj:r,kcg:r,kde:o,kea:o,kk:function(e,t){var r=String(e).split("."),n=Number(r[0])==e,i=n&&r[0].slice(-1);return t?6==i||9==i||n&&0==i&&0!=e?"many":"other":1==e?"one":"other"},kkj:r,kl:r,km:o,kn:function(e,t){return!t&&0<=e&&e<=1?"one":"other"},ko:o,ks:r,ksb:r,ksh:function(e,t){return t?"other":0==e?"zero":1==e?"one":"other"},ku:r,kw:function(e,t){var r=String(e).split("."),n=Number(r[0])==e,i=n&&r[0].slice(-2),o=n&&r[0].slice(-3),a=n&&r[0].slice(-5),s=n&&r[0].slice(-6);return t?n&&1<=e&&e<=4||1<=i&&i<=4||21<=i&&i<=24||41<=i&&i<=44||61<=i&&i<=64||81<=i&&i<=84?"one":5==e||5==i?"many":"other":0==e?"zero":1==e?"one":2==i||22==i||42==i||62==i||82==i||n&&0==o&&(1e3<=a&&a<=2e4||4e4==a||6e4==a||8e4==a)||0!=e&&1e5==s?"two":3==i||23==i||43==i||63==i||83==i?"few":1==e||1!=i&&21!=i&&41!=i&&61!=i&&81!=i?"other":"many"},ky:r,lag:function(e,t){var r=String(e).split(".")[0];return t?"other":0==e?"zero":0!=r&&1!=r||0==e?"other":"one"},lb:r,lg:r,lkt:o,ln:n,lo:function(e,t){return t&&1==e?"one":"other"},lt:function(e,t){var r=String(e).split("."),n=r[1]||"",i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?"other":1==o&&(a<11||19<a)?"one":2<=o&&o<=9&&(a<11||19<a)?"few":0!=n?"many":"other"},lv:function(e,t){var r=String(e).split("."),n=r[1]||"",i=n.length,o=Number(r[0])==e,a=o&&r[0].slice(-1),s=o&&r[0].slice(-2),l=n.slice(-2),c=n.slice(-1);return t?"other":o&&0==a||11<=s&&s<=19||2==i&&11<=l&&l<=19?"zero":1==a&&11!=s||2==i&&1==c&&11!=l||2!=i&&1==c?"one":"other"},mas:r,mg:n,mgo:r,mk:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=n.slice(-2),l=i.slice(-1),c=i.slice(-2);return t?1==a&&11!=s?"one":2==a&&12!=s?"two":7!=a&&8!=a||17==s||18==s?"other":"many":o&&1==a&&11!=s||1==l&&11!=c?"one":"other"},ml:r,mn:r,mo:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e&&r[0].slice(-2);return t?1==e?"one":"other":1==e&&n?"one":!n||0==e||2<=i&&i<=19?"few":"other"},mr:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":"other":1==e?"one":"other"},ms:function(e,t){return t&&1==e?"one":"other"},mt:function(e,t){var r=String(e).split("."),n=Number(r[0])==e&&r[0].slice(-2);return t?"other":1==e?"one":0==e||2<=n&&n<=10?"few":11<=n&&n<=19?"many":"other"},my:o,nah:r,naq:a,nb:r,nd:r,ne:function(e,t){var r=String(e).split("."),n=Number(r[0])==e;return t?n&&1<=e&&e<=4?"one":"other":1==e?"one":"other"},nl:i,nn:r,nnh:r,no:r,nqo:o,nr:r,nso:n,ny:r,nyn:r,om:r,or:function(e,t){var r=String(e).split("."),n=Number(r[0])==e;return t?1==e||5==e||n&&7<=e&&e<=9?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":1==e?"one":"other"},os:r,osa:o,pa:n,pap:r,pl:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=n.slice(-1),a=n.slice(-2);return t?"other":1==e&&i?"one":i&&2<=o&&o<=4&&(a<12||14<a)?"few":i&&1!=n&&(0==o||1==o)||i&&5<=o&&o<=9||i&&12<=a&&a<=14?"many":"other"},prg:function(e,t){var r=String(e).split("."),n=r[1]||"",i=n.length,o=Number(r[0])==e,a=o&&r[0].slice(-1),s=o&&r[0].slice(-2),l=n.slice(-2),c=n.slice(-1);return t?"other":o&&0==a||11<=s&&s<=19||2==i&&11<=l&&l<=19?"zero":1==a&&11!=s||2==i&&1==c&&11!=l||2!=i&&1==c?"one":"other"},ps:r,pt:function(e,t){var r=String(e).split(".")[0];return t||0!=r&&1!=r?"other":"one"},pt_PT:i,rm:r,ro:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e&&r[0].slice(-2);return t?1==e?"one":"other":1==e&&n?"one":!n||0==e||2<=i&&i<=19?"few":"other"},rof:r,root:o,ru:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=n.slice(-1),a=n.slice(-2);return t?"other":i&&1==o&&11!=a?"one":i&&2<=o&&o<=4&&(a<12||14<a)?"few":i&&0==o||i&&5<=o&&o<=9||i&&11<=a&&a<=14?"many":"other"},rwk:r,sah:o,saq:r,sc:function(e,t){var r=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&r?"one":"other"},scn:function(e,t){var r=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&r?"one":"other"},sd:r,sdh:r,se:a,seh:r,ses:o,sg:o,sh:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=n.slice(-2),l=i.slice(-1),c=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==l&&11!=c?"one":o&&2<=a&&a<=4&&(s<12||14<s)||2<=l&&l<=4&&(c<12||14<c)?"few":"other"},shi:function(e,t){var r=String(e).split("."),n=Number(r[0])==e;return t?"other":0<=e&&e<=1?"one":n&&2<=e&&e<=10?"few":"other"},si:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"";return t||0!=e&&1!=e&&(0!=n||1!=i)?"other":"one"},sk:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1];return t?"other":1==e&&i?"one":2<=n&&n<=4&&i?"few":i?"other":"many"},sl:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=n.slice(-2);return t?"other":i&&1==o?"one":i&&2==o?"two":i&&(3==o||4==o)||!i?"few":"other"},sma:a,smi:a,smj:a,smn:a,sms:a,sn:r,so:r,sq:function(e,t){var r=String(e).split("."),n=Number(r[0])==e,i=n&&r[0].slice(-1),o=n&&r[0].slice(-2);return t?1==e?"one":4==i&&14!=o?"many":"other":1==e?"one":"other"},sr:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=n.slice(-2),l=i.slice(-1),c=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==l&&11!=c?"one":o&&2<=a&&a<=4&&(s<12||14<s)||2<=l&&l<=4&&(c<12||14<c)?"few":"other"},ss:r,ssy:r,st:r,su:o,sv:function(e,t){var r=String(e).split("."),n=!r[1],i=Number(r[0])==e,o=i&&r[0].slice(-1),a=i&&r[0].slice(-2);return t?1!=o&&2!=o||11==a||12==a?"other":"one":1==e&&n?"one":"other"},sw:i,syr:r,ta:r,te:r,teo:r,th:o,ti:n,tig:r,tk:function(e,t){var r=String(e).split("."),n=Number(r[0])==e&&r[0].slice(-1);return t?6==n||9==n||10==e?"few":"other":1==e?"one":"other"},tl:function(e,t){var r=String(e).split("."),n=r[0],i=r[1]||"",o=!r[1],a=n.slice(-1),s=i.slice(-1);return t?1==e?"one":"other":o&&(1==n||2==n||3==n)||o&&4!=a&&6!=a&&9!=a||!o&&4!=s&&6!=s&&9!=s?"one":"other"},tn:r,to:o,tr:r,ts:r,tzm:function(e,t){var r=String(e).split("."),n=Number(r[0])==e;return!t&&(0==e||1==e||n&&11<=e&&e<=99)?"one":"other"},ug:r,uk:function(e,t){var r=String(e).split("."),n=r[0],i=!r[1],o=Number(r[0])==e,a=o&&r[0].slice(-1),s=o&&r[0].slice(-2),l=n.slice(-1),c=n.slice(-2);return t?3==a&&13!=s?"few":"other":i&&1==l&&11!=c?"one":i&&2<=l&&l<=4&&(c<12||14<c)?"few":i&&0==l||i&&5<=l&&l<=9||i&&11<=c&&c<=14?"many":"other"},ur:i,uz:r,ve:r,vi:function(e,t){return t&&1==e?"one":"other"},vo:r,vun:r,wa:n,wae:r,wo:o,xh:r,xog:r,yi:i,yo:o,yue:o,zh:o,zu:function(e,t){return!t&&0<=e&&e<=1?"one":"other"}},Object.defineProperty(s,"__esModule",{value:!0}),e.exports=s})),d=o(u),p=Object.freeze(Object.assign(Object.create(null),u,{default:d})),h=a((function(e,t){var r,n="zero",i="one",o="two",a="few",s="many",l="other",c={cardinal:[i,l],ordinal:[l]},u={cardinal:[l],ordinal:[l]},d={cardinal:[i,a,s,l],ordinal:[l]},p={cardinal:[i,l],ordinal:[i,l]},h={cardinal:[i,o,l],ordinal:[l]};r={_in:u,af:c,ak:c,am:c,an:c,ar:{cardinal:[n,i,o,a,s,l],ordinal:[l]},ars:{cardinal:[n,i,o,a,s,l],ordinal:[l]},as:{cardinal:[i,l],ordinal:[i,o,a,s,l]},asa:c,ast:c,az:{cardinal:[i,l],ordinal:[i,a,s,l]},be:{cardinal:[i,a,s,l],ordinal:[a,l]},bem:c,bez:c,bg:c,bho:c,bm:u,bn:{cardinal:[i,l],ordinal:[i,o,a,s,l]},bo:u,br:{cardinal:[i,o,a,s,l],ordinal:[l]},brx:c,bs:{cardinal:[i,a,l],ordinal:[l]},ca:{cardinal:[i,l],ordinal:[i,o,a,l]},ce:c,ceb:c,cgg:c,chr:c,ckb:c,cs:d,cy:{cardinal:[n,i,o,a,s,l],ordinal:[n,i,o,a,s,l]},da:c,de:c,dsb:{cardinal:[i,o,a,l],ordinal:[l]},dv:c,dz:u,ee:c,el:c,en:{cardinal:[i,l],ordinal:[i,o,a,l]},eo:c,es:c,et:c,eu:c,fa:c,ff:c,fi:c,fil:p,fo:c,fr:p,fur:c,fy:c,ga:{cardinal:[i,o,a,s,l],ordinal:[i,l]},gd:{cardinal:[i,o,a,l],ordinal:[i,o,a,l]},gl:c,gsw:c,gu:{cardinal:[i,l],ordinal:[i,o,a,s,l]},guw:c,gv:{cardinal:[i,o,a,s,l],ordinal:[l]},ha:c,haw:c,he:{cardinal:[i,o,s,l],ordinal:[l]},hi:{cardinal:[i,l],ordinal:[i,o,a,s,l]},hr:{cardinal:[i,a,l],ordinal:[l]},hsb:{cardinal:[i,o,a,l],ordinal:[l]},hu:p,hy:p,ia:c,id:u,ig:u,ii:u,io:c,is:c,it:{cardinal:[i,l],ordinal:[s,l]},iu:h,iw:{cardinal:[i,o,s,l],ordinal:[l]},ja:u,jbo:u,jgo:c,ji:c,jmc:c,jv:u,jw:u,ka:{cardinal:[i,l],ordinal:[i,s,l]},kab:c,kaj:c,kcg:c,kde:u,kea:u,kk:{cardinal:[i,l],ordinal:[s,l]},kkj:c,kl:c,km:u,kn:c,ko:u,ks:c,ksb:c,ksh:{cardinal:[n,i,l],ordinal:[l]},ku:c,kw:{cardinal:[n,i,o,a,s,l],ordinal:[i,s,l]},ky:c,lag:{cardinal:[n,i,l],ordinal:[l]},lb:c,lg:c,lkt:u,ln:c,lo:{cardinal:[l],ordinal:[i,l]},lt:d,lv:{cardinal:[n,i,l],ordinal:[l]},mas:c,mg:c,mgo:c,mk:{cardinal:[i,l],ordinal:[i,o,s,l]},ml:c,mn:c,mo:{cardinal:[i,a,l],ordinal:[i,l]},mr:{cardinal:[i,l],ordinal:[i,o,a,l]},ms:{cardinal:[l],ordinal:[i,l]},mt:d,my:u,nah:c,naq:h,nb:c,nd:c,ne:p,nl:c,nn:c,nnh:c,no:c,nqo:u,nr:c,nso:c,ny:c,nyn:c,om:c,or:{cardinal:[i,l],ordinal:[i,o,a,s,l]},os:c,osa:u,pa:c,pap:c,pl:d,prg:{cardinal:[n,i,l],ordinal:[l]},ps:c,pt:c,pt_PT:c,rm:c,ro:{cardinal:[i,a,l],ordinal:[i,l]},rof:c,root:u,ru:d,rwk:c,sah:u,saq:c,sc:{cardinal:[i,l],ordinal:[s,l]},scn:{cardinal:[i,l],ordinal:[s,l]},sd:c,sdh:c,se:h,seh:c,ses:u,sg:u,sh:{cardinal:[i,a,l],ordinal:[l]},shi:{cardinal:[i,a,l],ordinal:[l]},si:c,sk:d,sl:{cardinal:[i,o,a,l],ordinal:[l]},sma:h,smi:h,smj:h,smn:h,sms:h,sn:c,so:c,sq:{cardinal:[i,l],ordinal:[i,s,l]},sr:{cardinal:[i,a,l],ordinal:[l]},ss:c,ssy:c,st:c,su:u,sv:p,sw:c,syr:c,ta:c,te:c,teo:c,th:u,ti:c,tig:c,tk:{cardinal:[i,l],ordinal:[a,l]},tl:p,tn:c,to:u,tr:c,ts:c,tzm:c,ug:c,uk:{cardinal:[i,a,s,l],ordinal:[a,l]},ur:c,uz:c,ve:c,vi:{cardinal:[l],ordinal:[i,l]},vo:c,vun:c,wa:c,wae:c,wo:u,xh:c,xog:c,yi:c,yo:u,yue:u,zh:u,zu:c},Object.defineProperty(r,"__esModule",{value:!0}),e.exports=r})),g=o(h),f=d||p,m=g||Object.freeze(Object.assign(Object.create(null),h,{default:g})),y="object"===("undefined"==typeof Intl?"undefined":i(Intl))&&Intl.NumberFormat||n.default,v=r.default(y,(function(e){return f[c(e)]}),(function(e,t){return m[c(e)][t?"ordinal":"cardinal"]}));e.exports=v}(o={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports)),u=Intl.PluralRules||c,d=function(e){this.value=e};d.prototype.valueOf=function(){return this.value};var p=function(e){function t(t){void 0===t&&(t="???"),e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.toString=function(){return"{"+this.value+"}"},t}(d),h=function(e){function t(t,r){void 0===r&&(r={}),e.call(this,t),this.opts=r}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.toString=function(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}},t}(d),g=function(e){function t(t,r){void 0===r&&(r={}),e.call(this,t),this.opts=r}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.toString=function(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}},t}(d);function f(e,t,r){return t[r]?b(e,t[r].value):(e.reportError(new RangeError("No default")),new p)}function m(e,t){for(var r=[],n=Object.create(null),i=0,o=t;i<o.length;i+=1){var a=o[i];"narg"===a.type?n[a.name]=y(e,a.value):r.push(y(e,a))}return{positional:r,named:n}}function y(e,t){switch(t.type){case"str":return t.value;case"num":return new h(t.value,{minimumFractionDigits:t.precision});case"var":return function(e,t){var r,n=t.name;if(e.params){if(!Object.prototype.hasOwnProperty.call(e.params,n))return new p("$"+n);r=e.params[n]}else{if(!e.args||!Object.prototype.hasOwnProperty.call(e.args,n))return e.reportError(new ReferenceError("Unknown variable: $"+n)),new p("$"+n);r=e.args[n]}if(r instanceof d)return r;switch(typeof r){case"string":return r;case"number":return new h(r);case"object":if(r instanceof Date)return new g(r.getTime());default:return e.reportError(new TypeError("Variable type not supported: $"+n+", "+typeof r)),new p("$"+n)}}(e,t);case"mesg":return function(e,t){var r=t.name,n=t.attr,i=e.bundle._messages.get(r);if(!i)return e.reportError(new ReferenceError("Unknown message: "+r)),new p(r);if(n){var o=i.attributes[n];return o?b(e,o):(e.reportError(new ReferenceError("Unknown attribute: "+n)),new p(r+"."+n))}return i.value?b(e,i.value):(e.reportError(new ReferenceError("No value: "+r)),new p(r))}(e,t);case"term":return function(e,t){var r=t.name,n=t.attr,i=t.args,o="-"+r,a=e.bundle._terms.get(o);if(!a)return e.reportError(new ReferenceError("Unknown term: "+o)),new p(o);if(n){var s=a.attributes[n];if(s){e.params=m(e,i).named;var l=b(e,s);return e.params=null,l}return e.reportError(new ReferenceError("Unknown attribute: "+n)),new p(o+"."+n)}e.params=m(e,i).named;var c=b(e,a.value);return e.params=null,c}(e,t);case"func":return function(e,t){var r=t.name,n=t.args,i=e.bundle._functions[r];if(!i)return e.reportError(new ReferenceError("Unknown function: "+r+"()")),new p(r+"()");if("function"!=typeof i)return e.reportError(new TypeError("Function "+r+"() is not callable")),new p(r+"()");try{var o=m(e,n);return i(o.positional,o.named)}catch(t){return e.reportError(t),new p(r+"()")}}(e,t);case"select":return function(e,t){var r=t.selector,n=t.variants,i=t.star,o=y(e,r);if(o instanceof p)return f(e,n,i);for(var a=0,s=n;a<s.length;a+=1){var l=s[a];if(function(e,t,r){return r===t||r instanceof h&&t instanceof h&&r.value===t.value||t instanceof h&&"string"==typeof r&&r===e.memoizeIntlObject(u,t.opts).select(t.value)?1:void 0}(e,o,y(e,l.key)))return b(e,l.value)}return f(e,n,i)}(e,t);default:return new p}}function v(e,t){if(e.dirty.has(t))return e.reportError(new RangeError("Cyclic reference")),new p;e.dirty.add(t);for(var r=[],n=e.bundle._useIsolating&&1<t.length,i=0,o=t;i<o.length;i+=1){var a=o[i];if("string"!=typeof a){if(e.placeables++,e.placeables>100)throw e.dirty.delete(t),new RangeError("Too many placeables expanded: "+e.placeables+", max allowed is 100");n&&r.push("â¨"),r.push(y(e,a).toString(e)),n&&r.push("â©")}else r.push(e.bundle._transform(a))}return e.dirty.delete(t),r.join("")}function b(e,t){return"string"==typeof t?e.bundle._transform(t):v(e,t)}function x(e,t,r){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=r}function w(e,t){for(var r=Object.create(null),n=0,i=Object.entries(e);n<i.length;n+=1){var o=i[n],a=o[0],s=o[1];t.includes(a)&&(r[a]=s.valueOf())}return r}x.prototype.reportError=function(e){if(!this.errors)throw e;this.errors.push(e)},x.prototype.memoizeIntlObject=function(e,t){var r=this.bundle._intls.get(e);r||(r={},this.bundle._intls.set(e,r));var n=JSON.stringify(t);return r[n]||(r[n]=new e(this.bundle.locales,t)),r[n]};var S=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function E(e,t){var r=e[0];if(r instanceof p)return new p("NUMBER("+r.valueOf()+")");if(r instanceof h||r instanceof g)return new h(r.valueOf(),Object.assign({},r.opts,w(t,S)));throw new TypeError("Invalid argument to NUMBER")}var _=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function k(e,t){var r=e[0];if(r instanceof p)return new p("DATETIME("+r.valueOf()+")");if(r instanceof h||r instanceof g)return new g(r.valueOf(),Object.assign({},r.opts,w(t,_)));throw new TypeError("Invalid argument to DATETIME")}function M(e,t){void 0===t&&(t={});var r=t.functions,n=t.useIsolating;void 0===n&&(n=!0);var i=t.transform;void 0===i&&(i=function(e){return e}),this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(e)?e:[e],this._functions=Object.assign({},{NUMBER:E,DATETIME:k},r),this._useIsolating=n,this._transform=i}M.prototype.hasMessage=function(e){return this._messages.has(e)},M.prototype.getMessage=function(e){return this._messages.get(e)},M.prototype.addResource=function(e,t){void 0===t&&(t={});var r=t.allowOverrides;void 0===r&&(r=!1);for(var n=[],i=0;i<e.body.length;i++){var o=e.body[i];if(o.id.startsWith("-")){if(!1===r&&this._terms.has(o.id)){n.push(new Error('Attempt to override an existing term: "'+o.id+'"'));continue}this._terms.set(o.id,o)}else{if(!1===r&&this._messages.has(o.id)){n.push(new Error('Attempt to override an existing message: "'+o.id+'"'));continue}this._messages.set(o.id,o)}}return n},M.prototype.formatPattern=function(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=null),"string"==typeof e)return this._transform(e);var n=new x(this,r,t);try{return v(n,e).toString(n)}catch(e){if(n.errors)return n.errors.push(e),(new p).toString(n);throw e}};var I=/^(-?[a-zA-Z][\w-]*) *= */gm,C=/\.([a-zA-Z][\w-]*) *= */y,L=/\*?\[/y,P=/(-?[0-9]+(?:\.([0-9]+))?)/y,T=/([a-zA-Z][\w-]*)/y,A=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,O=/^[A-Z][A-Z0-9_-]*$/,D=/([^{}\n\r]+)/y,F=/([^\\"\n\r]*)/y,q=/\\([\\"])/y,N=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,R=/^\n+/,B=/ +$/,j=/ *\r?\n/g,V=/( *)$/,z=/{\s*/y,U=/\s*}/y,G=/\[\s*/y,K=/\s*] */y,H=/\s*\(\s*/y,W=/\s*->\s*/y,$=/\s*:\s*/y,Y=/\s*,?\s*/y,Q=/\s+/y,X=function(e,t){this.value=e,this.length=t};e.FluentBundle=M,e.FluentDateTime=g,e.FluentNumber=h,e.FluentResource=function(e){this.body=[];for(var t=I.lastIndex=0;;){var r=I.exec(e);if(null===r)break;t=I.lastIndex;try{this.body.push(function(e){var t=l(),r=function(){for(var e=Object.create(null);n(C);){var t=s(C),r=l();if(null===r)throw new SyntaxError("Expected attribute value");e[t]=r}return e}();if(null!==t||0!==Object.keys(r).length)return{id:e,value:t,attributes:r};throw new SyntaxError("Expected message value or attributes")}(r[1]))}catch(r){if(r instanceof SyntaxError)continue;throw r}}function n(r){return r.lastIndex=t,r.test(e)}function i(r,n){if(e[t]===r)return t++,1;if(n)throw new n("Expected "+r)}function o(e,r){if(n(e))return t=e.lastIndex,1;if(r)throw new r("Expected "+e.toString())}function a(r){r.lastIndex=t;var n=r.exec(e);if(null===n)throw new SyntaxError("Expected "+r.toString());return t=r.lastIndex,n}function s(e){return a(e)[1]}function l(){var r;if(n(D)&&(r=s(D)),"{"===e[t]||"}"===e[t])return c(r?[r]:[],1/0);var i=g();return i?r?c([r,i],i.length):(i.value=f(i.value,R),c([i],i.length)):r?f(r,B):null}function c(r,i){for(void 0===r&&(r=[]);;)if(n(D))r.push(s(D));else if("{"!==e[t]){if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");var o=g();if(!o)break;r.push(o),i=Math.min(i,o.length)}else r.push(u());var a=r.length-1,l=r[a];"string"==typeof l&&(r[a]=f(l,B));for(var c=[],d=0,p=r;d<p.length;d+=1){var h=p[d];h instanceof X&&(h=h.value.slice(0,h.value.length-i)),h&&c.push(h)}return c}function u(){o(z,SyntaxError);var e=d();if(o(U))return e;if(o(W)){var t=function(){for(var e,t=[],r=0;n(L);){i("*")&&(e=r);var a=function(){var e;return o(G,SyntaxError),e=n(P)?h():{type:"str",value:s(T)},o(K,SyntaxError),e}(),c=l();if(null===c)throw new SyntaxError("Expected variant value");t[r++]={key:a,value:c}}if(0===r)return null;if(void 0!==e)return{variants:t,star:e};throw new SyntaxError("Expected default variant")}();return o(U,SyntaxError),Object.assign({},{type:"select",selector:e},t)}throw new SyntaxError("Unclosed placeable")}function d(){if("{"===e[t])return u();if(n(A)){var r=a(A),i=r[1],s=r[2],l=r[3];if(void 0===l&&(l=null),"$"===i)return{type:"var",name:s};if(o(H)){var c=function(){for(var r=[];;){switch(e[t]){case")":return t++,r;case void 0:throw new SyntaxError("Unclosed argument list")}r.push(function(){var e=d();return"mesg"!==e.type?e:o($)?{type:"narg",name:e.name,value:p()}:e}()),o(Y)}}();if("-"===i)return{type:"term",name:s,attr:l,args:c};if(O.test(s))return{type:"func",name:s,args:c};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:s,attr:l,args:[]}:{type:"mesg",name:s,attr:l}}return p()}function p(){if(n(P))return h();if('"'===e[t])return function(){i('"',SyntaxError);for(var r="";;){if(r+=s(F),"\\"!==e[t]){if(i('"'))return{type:"str",value:r};throw new SyntaxError("Unclosed string literal")}r+=function(){if(n(q))return s(q);if(n(N)){var e=a(N),t=e[1],r=e[2],i=parseInt(t||r,16);return i<=55295||57344<=i?String.fromCodePoint(i):"ï¿½"}throw new SyntaxError("Unknown escape sequence")}()}}();throw new SyntaxError("Invalid expression")}function h(){var e=a(P),t=e[1],r=e[2];void 0===r&&(r="");var n=r.length;return{type:"num",value:parseFloat(t),precision:n}}function g(){var r=t;switch(o(Q),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return m(e.slice(r,t))}return" "===e[t-1]&&m(e.slice(r,t))}function f(e,t){return e.replace(t,"")}function m(e){var t=e.replace(j,"\n"),r=V.exec(e)[1].length;return new X(t,r)}},e.FluentType=d,Object.defineProperty(e,"__esModule",{value:!0})})),i("lib/fluent-bundle-sequence",["require","exports","tslib","@fluent/bundle"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FluentBundleSequence=t.RTL_LANGUAGES=void 0,t.RTL_LANGUAGES=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"];var i=(o.fromSources=function(e,i,a){for(var s=[],l=0,c=e;l<c.length;l++){var u=c[l],d=u.lang,p=u.source,h=d.split("-")[0],g=new n.FluentBundle(d,r.__assign(r.__assign({},a),{useIsolating:0<=t.RTL_LANGUAGES.indexOf(h)}));g.addResource(new n.FluentResource(p),{allowOverrides:!1}),g.addResource(new n.FluentResource('\nl10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}\nl10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}\nl10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}\n      '),{allowOverrides:!1}),s.push(g)}return new o(s,i)},o.prototype.format=function(e,t){for(var r=0,n=this.bundles;r<n.length;r++){var i=n[r];if(i.hasMessage(e)){var o=i.getMessage(e);if(null==o||!o.value)return;for(var a=[],s=i.formatPattern(o.value,this.coerceNumericVariables(t),a),l=0,c=a;l<c.length;l++){var u=c[l];this.onError("Error formatting "+e+" for locale "+i.locales.join(",")+": "+u)}return s}}this.onError("Couldn't find message for key "+e+" for locales "+this.getLocales().join(","))},o.prototype.formatDate=function(e,t){return t.showYear?this.format("l10n-internal-date-day-month-year",{d:e}):this.format("l10n-internal-date-day-month",{d:e})},o.prototype.formatTime=function(e){var t=this.format("l10n-internal-time",{d:e});return"en"===this.getLocales()[0]?null==t?void 0:t.toLowerCase():t},o.prototype.hasTranslation=function(e,t){for(var r=0,n=this.bundles;r<n.length;r++){var i=n[r];if(0<=i.locales.indexOf(t))return i.hasMessage(e)}return!1},o.prototype.coerceNumericVariables=function(e){var t={};for(var r in e){var n=e[r];t[r]="number"==typeof n?""+n:n}return t},o.prototype.getLocales=function(){return this.bundles.reduce((function(e,t){return e.concat(t.locales)}),[])},o);function o(e,t){this.bundles=e,this.onError=t}t.FluentBundleSequence=i})),i("lib/i18n-core",["require","exports","text!l10n/all-en-strings.ftl","tslib","underscore","lib/console","./i18n-homepage-langs","./enabled-languages","./fluent-bundle-sequence"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.isSupportedLanguage=t.currentLanguage=t.formatWithFluent=t.createDictionaryLookupFunction=t.s=t.raw=t.hasTranslation=t.restrictToHomepageLanguages=t.initFluentData=t.setLanguage=t.locale_dict=void 0;var c="";t.locale_dict={};var u={},d={},p=["ar","hy-AM","hi","tr","xx-XX"];function h(e,t,r){return g(e,null!=t?t:{},null!=r?r:c)}function g(e,t,r){var n=f(r).format(e,function(e){var t={};for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}return t}(t));return null==n?(o.warn("Could not format string "+e),""):n}function f(e){var i=d[e];if(!i){t.locale_dict[e]||(t.locale_dict[e]=s.expandLocaleOptionsThoroughly([e]));for(var a=[],c=0,p=t.locale_dict[e];c<p.length;c++){var h=p[c],g=u[h];g&&a.push({lang:h,source:g})}var f={};"xx-XX"===e&&(f.transform=function(e){return e.replace(/[a-z]/gi,"â¦")}),i=d[e]=l.FluentBundleSequence.fromSources(n.__spreadArray(n.__spreadArray([],a),[{lang:"en",source:r}]),(function(e){o.warn(e)}),f)}return i}t.setLanguage=function(e){c=e||""},t.initFluentData=function(e){for(var t in e)delete d[t],u[t]=e[t]},t.restrictToHomepageLanguages=function(){for(var e in s.ENABLED_LANGUAGES)a.isHomepageLanguage(e)||delete s.ENABLED_LANGUAGES[e]},t.hasTranslation=function(e,t){var r=null!=t?t:c;return f(r).hasTranslation(e,r)},t.raw=function(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&(e=e.split("__"+r+"__").join(t[r]));return e},t.s=h,t.createDictionaryLookupFunction=function(e){return function(t,r){return g(t,null!=r?r:{},e())}},t.formatWithFluent=g,t.currentLanguage=function(){return c},t.isSupportedLanguage=function(e){return s.ENABLED_LANGUAGES.hasOwnProperty(e)||i.contains(p,e)},t.unpack=function e(t,r){if(null==t)return"";if("string"==typeof t)return t;if("number"==typeof t)return""+t;var n,i=t.vars;if(i)for(var o in n={},i)i.hasOwnProperty(o)&&(n[o]=e(i[o],r));return h(t.key,n,r)}})),i("lib/i18n",["require","exports","config","jquery","lib/console","./enabled-languages","./i18n-core","./i18n-core"],(function(e,t,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchLanguage=t.detectLanguage=t.locale_dict=t.unpack=t.currentLanguage=t.createDictionaryLookupFunction=t.s=t.raw=t.hasTranslation=t.restrictToHomepageLanguages=void 0,Object.defineProperty(t,"restrictToHomepageLanguages",{enumerable:!0,get:function(){return l.restrictToHomepageLanguages}}),Object.defineProperty(t,"hasTranslation",{enumerable:!0,get:function(){return l.hasTranslation}}),Object.defineProperty(t,"raw",{enumerable:!0,get:function(){return l.raw}}),Object.defineProperty(t,"s",{enumerable:!0,get:function(){return l.s}}),Object.defineProperty(t,"createDictionaryLookupFunction",{enumerable:!0,get:function(){return l.createDictionaryLookupFunction}}),Object.defineProperty(t,"currentLanguage",{enumerable:!0,get:function(){return l.currentLanguage}}),Object.defineProperty(t,"unpack",{enumerable:!0,get:function(){return l.unpack}});var c=void 0!==r&&r.localeData?r.localeData:{};function u(){for(var e=a.expandLocaleOptionsThoroughly([n.get("language"),navigator.userLanguage,navigator.language]),t=0;t<e.length;t++){var r=e[t];if(s.isSupportedLanguage(r))return r}return"en"}t.locale_dict={},t.detectLanguage=u,t.fetchLanguage=function(e){var t=i.Deferred();if(void 0===r)return t.reject(),t.promise();if(r.supportedLanguages||(r.supportedLanguages=[]),0<=r.supportedLanguages.indexOf(e)||"en"===e||"xx-XX"===e)return s.setLanguage(e),t.resolve(!0),t.promise();if(!s.isSupportedLanguage(e)){var n=-1!==e.indexOf("-")?e.split("-")[0]:e;for(var l in a.ENABLED_LANGUAGES)if(n===l.split("-")[0]&&a.ENABLED_LANGUAGES[l].useAsRoot){e=l;break}}return i.get("/api/v1/calculator/language/"+e+".ftl",(function(n){r.localeData||(r.localeData={}),r.supportedLanguages||(r.supportedLanguages=[]),r.localeData[e]=n[e],r.supportedLanguages.push(e),s.initFluentData(r.localeData),s.setLanguage(e),t.resolve(!0)})).fail((function(r){404===r.status&&o.warn(e+" is not an available language."),t.reject()})),t.promise()},s.initFluentData(c),s.setLanguage(u())})),i("underscore_model",["require","underscore","pjs"],(function(e){var t=e("underscore");return{UnderscoreModel:e("pjs")((function(e){var r=0,n="guid_"+Math.round(1e6*Math.random())+"_"+(new Date).getTime()+"_";e.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=n+ ++r},e.unobserveAll=function(){this.__observers={},this.__eventObservers={}},e.getProperty=function(e){return this[e]},e.getOldProperty=function(e){return this.__oldProperties[e]},e.setProperty=function(e,r){var n=this[e];this[e]=r;var i=this.__propertyComparators[e];if(i){if(i(n,r))return}else if(t.isEqual(n,r))return;this.__oldProperties[e]=n,this.notifyPropertyChange(e)},e.setProperties=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setProperty(t,e[t])},e.setPropertyComparator=function(e,t){this.__propertyComparators[e]=t},e.notifyPropertyChange=function(e){this.__callObservers(this.__observers,e,this)},e.observe=function(e,t){this.__addObservers(this.__observers,e,t)},e.unobserve=function(e){this.__removeObservers(this.__observers,e)},e.observeAndSync=function(e,t){this.observe(e,t);for(var r=e.split(" "),n=0;n<r.length;n++){var i=r[n].split(".")[0];this.hasOwnProperty(i)&&t(i,this)}},e.triggerEvent=function(e,t){this.__callObservers(this.__eventObservers,e,t)},e.observeEvent=function(e,t){this.__addObservers(this.__eventObservers,e,t)},e.unobserveEvent=function(e){this.__removeObservers(this.__eventObservers,e)},e.__callObservers=function(e,t,r){var n=e[t];if(n)for(var i=0;i<n.length;i++)n[i].callback(t,r)},e.__removeObservers=function(e,t){for(var r=t.split(" "),n=0;n<r.length;n++){var i=r[n].split("."),o=i[0],a=i[1];if(o&&a){var s=e[o],l=[];if(!s)continue;for(var c=0;c<s.length;c++){var u=s[c];u.namespace!==a&&l.push(u)}e[o]=l}else if(o)delete e[o];else if(a)for(o in e)e.hasOwnProperty(o)&&this.__removeObservers(e,o+"."+a)}},e.__addObservers=function(e,t,r){for(var n=t.split(" "),i=0;i<n.length;i++){var o=n[i].split("."),a=o[0];if(!a)throw"Must supply a property to observe";var s={namespace:o[1],callback:r},l=e[a];l?l.push(s):e[a]=[s]}}}))}})),i("main/graph_settings",["require","pjs","underscore","underscore_model","core/graphing-calc/json/graph-settings","console","core/graphing-calc/json/graph-settings","core/lib/color-helpers"],(function(e){"use strict";var t=e("pjs"),n=e("underscore"),i=e("underscore_model").UnderscoreModel,o=e("core/graphing-calc/json/graph-settings").AxisArrowModes,a=e("console"),s=e("core/graphing-calc/json/graph-settings").DefaultGraphSettings,l=e("core/lib/color-helpers"),c=t(i,(function(e,t,u){e.init=function(){for(var e in t.init.call(this),this.stateProperties=[],this.cloneProperties=[],this.config=new i,s)s.hasOwnProperty(e)&&this.addStateProperty(e,s[e]);this.labelHangingColor="rgba(150,150,150,1)",this.lastChangedAxis="x";var r=this;function n(e,t,n){function i(){r.setProperty(e,r.config.projectorMode?n:t)}r.cloneProperties.push(e),r.config.observe("projectorMode",i),i()}function o(e,t,n,i,o){function a(){var a=r.config.projectorMode?r.highlight?o:i:r.highlight?n:t;r.setProperty(e,a)}r.cloneProperties.push(e),r.observe("highlight",a),r.config.observe("projectorMode",a),a()}n("labelSize",14,19),n("majorAxisOpacity",.4,1),n("minorAxisOpacity",.12,.25),n("axisOpacity",.9,.9),n("axisLineWidth",1.5,2),n("axisLineOffset",.25,0),n("pixelsPerLabel",80,120),o("curveOpacity",.7,1,.7,1),n("globalCurveColor",void 0,void 0),n("disableFill",!1,!1),o("graphLineWidth",2.5,3.5,5,7),o("pointLineWidth",9,11,15,17)},e.addStateProperty=function(e,t){this[e]=t,this.stateProperties.push(e),this.cloneProperties.push(e)},u.fromObject=function(e){var t=c();return t.cloneProperties.forEach((function(r){e.hasOwnProperty(r)&&t.setProperty(r,e[r])})),t},e.registerCallbacks=function(e,t){function r(){e.redrawAllLayers()}var n=this;this.stateProperties.forEach((function(e){n.observe(e,r)})),this.config.observe("backgroundColor",r),this.config.observe("textColor",r),this.config.observe("invertedColors",r),this.observe("squareAxes",(function(){e.viewportController.enforceSquareAxes()})),this.observe("backgroundColor",(function(){e.redrawAllLayers()})),this.observe("textColor",(function(){e.redrawAllLayers()})),this.config.observe("enableTabindex",(function(){e.redrawAllLayers()})),this.config.observeAndSync("projectorMode",(function(){e.redrawAllLayers()}))},e._validateSettings=function(e){var t={},i=!1;for(var s in e)0<=this.stateProperties.indexOf(s)?t[s]=function(e,t){var i;switch(e){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":case"yAxisMinorSubdivisions":t!==(i=Math.round(Math.min(Math.max(0,t),5)))&&a.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+i+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":t!==(i="false"!==t&&!!t)&&a.warn(e+" must be a Boolean. You provided "+t+" ("+typeof t+"), which we changed to "+i+" ("+typeof i+").");break;case"xAxisStep":case"yAxisStep":i=parseFloat(t),isFinite(t)||(i=0,a.warn(e+" must be a number. You provided "+t+", which we changed to "+i+"."));break;case"xAxisArrowMode":case"yAxisArrowMode":(i=o[t])!==t&&(i=o.NONE,a.warn("unknown AxisArrowMode. Allowed values are: \n"+n.keys(o).join("\n")));break;case"xAxisLabel":case"yAxisLabel":"string"!=typeof(i=t)&&(i="",a.warn(e+" must be a string. you provided a "+typeof t+"."));break;case"randomSeed":"string"!=typeof(i=t)&&(i=""+t,a.warn("randomSeed must be a string. you provided a "+typeof t+"."));break;case"backgroundColor":"string"!=typeof(i=t)&&(i="",a.warn(e+" must be a string. you provided a "+typeof t+".")),"#"!==(i=i||"#fff")[0]&&(i="#"+i);break;case"textColor":"string"!=typeof(i=t)&&(i="",a.warn(e+" must be a string. you provided a "+typeof t+".")),"#"!==(i=i||"#000")[0]&&(i="#"+i);break;case"fontSize":"number"!=typeof(i=t)&&(i=parseInt(i,10),a.warn("fontSize must be a number. Attempted to convert "+t+" to "+i+"."));break;case"language":"string"!=typeof(i=t)&&(i="",a.warn(e+" must be a string. you provided a "+typeof t+".")),void 0!==r&&r.supportedLanguages.indexOf(t)<0&&"en"!==t&&(i="en",a.warn(t+" is not currently an available language."));break;default:i=t}return i}(s,e[s]):(a.warn('Invalid graph setting "'+s+'".'),i=!0);return i&&a.warn("Available graph settings are: \n"+this.stateProperties.join("\n")),t},e.getBackgroundColor=function(){var e=l.normalizeColor(this.config.backgroundColor||"#fff");return this.config.invertedColors&&"#ffffff"!==e?l.invertColor(e):e},e.getTextColor=function(){var e=l.normalizeColor(this.config.textColor||"#000");return this.config.invertedColors&&"#000000"!==e?l.invertColor(e):e},e.setGraphSettings=function(e){var t=this._validateSettings(e);for(var r in t)t.hasOwnProperty(r)&&("projectorMode"===r||"invertedColors"===r||"fontSize"===r||"language"===r||"backgroundColor"===r||"textColor"===r?this.config.setProperty(r,t[r]):this.setProperty(r,t[r]))}}));return c})),i("scroll_helpers",["require"],(function(e){return{scrollVisible:function(e,t,r){var n=t.height(),i=e.outerHeight(),o=e.offset(),a=t.offset();if(!o||!a)return!1;var s,l=t[0].scrollTop,c=o.top+l-a.top,u=c-r,d=i+c+r-n;return(s=d<=u?Math.min(Math.max(l,d),u):.5*(u+d))!==l&&(t[0].scrollTop=s,t[0].scrollTop!=l)}}})),i("bugsnag",["require","exports","tslib"],(function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.setBeforeSendCB=t.leaveBreadcrumb=t.notify=t.init=void 0;var o=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier 'script'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can't find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can't find variable: didEnterViewPort","tinyMCE is not defined"];t.init=function(e){var t,r,a,s,l;n||(t=0,r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n=e({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:window.Desmos&&window.Desmos.commit,releaseStage:(l="production",location&&location.hostname&&(s=(a=location.hostname.split(".")).slice(0,a.length-2).join("."),"desmos.com"===a.slice(a.length-2).join(".")&&(l=s&&"www"!==s?s:"production")),l),consoleBreadcrumbsEnabled:!1,beforeSend:function(e){if(e.errorClass)for(var n=0,a=o;n<a.length;n++){var s=a[n];if(-1!==e.errorClass.indexOf(s))return void e.ignore()}if(e.errorMessage)for(var l=0,c=o;l<c.length;l++)if(s=c[l],-1!==e.errorMessage.indexOf(s))return void e.ignore();i&&i(e),e.isIgnored()||(t+=1,e.metaData.errorNumber=t,e.metaData.pageLoadId=r)}}))},t.notify=function(e,t){n&&n.notify(e,t)},t.leaveBreadcrumb=function(e,t,i,o){if(t)for(var a in t=r.__assign({},t))try{t[a]=JSON.stringify(t[a],null,2)}catch(e){t[a]="[[could not stringify]]"}n&&n.leaveBreadcrumb(e,t,i,o)},t.setBeforeSendCB=function(e){i=e}})),i("tours/trip",["require","jquery","pjs","mathquill","scroll_helpers","bugsnag"],(function(e){"use strict";var t=e("jquery"),r=e("pjs"),n=e("mathquill"),i=e("scroll_helpers"),o=e("bugsnag");return r({init:function(e){this.settings=e,this.__cachedStepName=null},ensureTripBlock:function(){var e,r,n;this.$tripBlock||(e=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),(n=(r=this).$tripBlock=t(e)).css({top:"-100px"}),t("body").append(n),n.find(".trip-close").on("dcg-tap",(function(e){e.preventDefault(),r.stop()})),this.bindKeyEvents())},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var e=this;t(document).on({"keydown.Trip":function(t){e.keyEvent.call(e,t)}})},unbindKeyEvents:function(){t(document).off("keydown.Trip")},keyEvent:function(e){27===e.which&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop()},exitTourBecauseOfError:function(e,t){for(var r="",n=t;r=n.selector+r,n=n.prevObject;);this.stop(),o.notify("TourError: could not find $sel.offset()",{metaData:{message:e,selector:r}})},showTripBlock:function(e){this.ensureTripBlock(),"string"==typeof e.sel&&(e.sel=t(e.sel)),e.sel=e.sel.filter(":visible"),e.scrollContainer&&i.scrollVisible(e.sel,e.scrollContainer,0);var r=this.$tripBlock;r.find(".trip-content").html(e.content),r.toggleClass("trip-hidden",!!e.hidden);var o=e.sel,a=o.outerWidth(),s=o.outerHeight(),l=r.outerWidth(),c=r.outerHeight();if(o.offset()){this.__cachedMissingSelTime=void 0,r.removeClass("trip-e trip-s trip-w trip-n");var u=0;switch(e.position){case"e":r.addClass("trip-e"),r.css({left:o.offset().left+a+10,top:o.offset().top-(c-s)/2});break;case"s":r.addClass("trip-s");var d=o.offset().left+(a-l)/2;r.css({left:d,top:o.offset().top+s+10}),d+l>t(window).width()-1&&(u=t(window).width()-1-d-l),d<1&&(u=1-d);break;case"w":r.addClass("trip-w"),r.css({left:o.offset().left-(10+l),top:o.offset().top-(c-s)/2});break;default:r.addClass("trip-n"),r.css({left:o.offset().left+(a-l)/2,top:o.offset().top-10-c})}r.find(".trip-interior").css("transform","translate("+u+"px, 0)"),r.css({display:"inline-block"}),r.find(".trip-math:not(.dcg-mq-math-mode)").each((function(){n.StaticMath(this)}))}else this.__cachedMissingSelTime?1e3<Date.now()-this.__cachedMissingSelTime&&(e.final?this.stop():this.exitTourBecauseOfError(e.content,o)):this.__cachedMissingSelTime=Date.now()},fadeInTripBlock:function(){this.ensureTripBlock();var e=this.$tripBlock;setTimeout((function(){e.addClass("trip-is-loaded")}),0)},hideTripBlock:function(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}})})),i("tours/tour_manager",["require","pjs","./trip"],(function(e){"use strict";var t=e("pjs"),r=e("./trip");return t((function(e,t){e.init=function(){this.tripManager=new r({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0},e._tripLoop=function(){var e;clearTimeout(this.__tripLoopTimeout),this.running&&((e=this)._advanceTrip(),e.__tripLoopTimeout=setTimeout(e._tripLoop.bind(e),200))},e._advanceTrip=function(){var e=this.currentTour.update(),t=(new Date).getTime();if(e&&this.currentStep&&e.content!==this.currentStep.content){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer)return void(this.throttleTimer=t)}e.delayBeforeEnter&&(this.currentStep=e,this.throttleTimer=t)}if(!(e&&this.currentStep&&e.content===this.currentStep.content&&this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,e&&!e.doNotUpdate)){if((this.currentStep=e).final)return void this.finishTour(e,5);this.tripManager.showTripBlock(e)}},e.updateNow=e._advanceTrip,e.startTour=function(e){this.running||(this.currentTour=e,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())},e.closingMsg=function(e,t){return"<b>"+e+"</b><br>This message will self-destruct in "+t+"..."},e.finishTour=function(e,t){clearTimeout(this.__tripLoopTimeout),this.running=!1;var r=this;t<0?r.tripManager.stop():(e.endingMsg&&(e.content=r.closingMsg(e.endingMsg,t)),r.tripManager.showTripBlock(e),setTimeout((function(){r.finishTour(e,t-1)}),1e3))},e.stopTour=function(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}}))})),i("lib/named-colors",["require"],(function(e){"use strict";return{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})),i("lib/color-distance",["require","underscore","lib/named-colors"],(function(e){"use strict";var t=e("underscore"),r=e("lib/named-colors");function n(e){var n,o=[];if("rgb"===(a=e.toLowerCase()).slice(0,3))try{o=a.replace(/[^\d,]/g,"").split(",").slice(0,3),o=t.map(o,(function(e){return parseInt(e,10)}))}catch(n){i(e)}else if("#"===a[0]){var a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/,(function(e,t,r,n){return t+t+r+r+n+n}));try{o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(a).slice(1),o=t.map(o,(function(e){return parseInt(e,16)}))}catch(n){i(e)}}else o=r[a];return n=o,t.isArray(n)&&3===n.length&&t.every(n,(function(e){return Number.isInteger(e)&&0<=e&&e<=255}))||i(e),{R:o[0],G:o[1],B:o[2]}}function i(e){throw new Error("Invalid color string: "+e)}function o(e){var r=e.R,n=e.G,i=e.B,o=[];return o[0]=.49*r+.31*n+.2*i,o[1]=.17697*r+.8124*n+.01063*i,o[2]=.01*n+.99*i,{X:(o=t.map(o,(function(e){return e/.17697})))[0],Y:o[1],Z:o[2]}}function a(e){var t=e.X,r=e.Y,n=e.Z,i=[];return i[0]=116*s(r/100)-16,i[1]=500*(s(t/95.047)-s(r/100)),i[2]=200*(s(r/100)-s(n/108.883)),{L:i[0],a:i[1],b:i[2]}}function s(e){var t=6/29;return e>Math.pow(t,3)?Math.pow(e,1/3):e/(3*t*t)+4/29}function l(e,t){var r,i,s,l,c,u,d,p,h,g,f,m,y,v,b=a(o(n(e)));return i=a(o(n(t))),s=(r=b).L,l=r.a,c=r.b,p=s-i.L,f=l-(u=i.a),m=c-(d=i.b),y=(g=(h=Math.sqrt(l*l+c*c))-Math.sqrt(u*u+d*d))/(1+.045*h),v=Math.sqrt(f*f+m*m-g*g)/(1+.015*h),Math.sqrt(p*p+y*y+v*v)}return{str2rgb:n,difference:l,closestColor:function(e,r){var n=t.map(r,(function(t){return l(e,t)})),i=t.min(n);return r[n.indexOf(i)]},isLightColor:function(e){if("string"!=typeof e||!e)return!1;try{return l(e,"#fff")<20}catch(e){return!1}}}})),i("core/math/evaluate-single-expression",["require","exports","parser","core/math/builtinframe","core/math/parsenode/constant","core/math/policy"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/.test(e))return parseFloat(e);var a=Object.create(n);return a.trigAngleMultiplier=i(t?Math.PI/180:1),+r.parse(e).tryGetConcreteTree(o.defaultPolicy,a).asValue()}})),i("lib/rounding",["require","exports","core/math/distance"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shortestDecimalBetween=void 0,t.shortestDecimalBetween=function(e,t){if(!isFinite(e))return e;if(!isFinite(t))return t;var n=r.mean(e,t);if(0<e!=0<t)return 0;if(0===e||0===t)return 0;var i=0<e?1:-1,o=Math.abs(e).toExponential().split("e"),a=Math.abs(t).toExponential().split("e"),s=o[0],l=a[0],c=o[1],u=a[1];if(u!==c)return i*Math.pow(10,Math.max(parseFloat(c),parseFloat(u)));if(s[0]!==l[0])return parseFloat(n.toPrecision(1));for(var d=1,p=2;p<Math.min(s.length,l.length)&&(d++,s[p]===l[p]);p++);return parseFloat(n.toPrecision(d))}})),i("core/lib/validate-color",["require","exports","core/vendor/d3-color"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r.color;t.default=function(e){return null!==n(e)}})),i("core/graphing-calc/json/simulation",["require","exports","tslib","core/lib/default-spec","core/lib/copy-properties"],(function(e,t,r,n,i){"use strict";function o(e){return i.extractPropertiesLike(e,t.DEFAULTS_DYNAMIC)}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.extractDynamicProperties=t.stripDefaults=t.inflateDefaults=t.DEFAULTS=t.DEFAULTS_DYNAMIC=t.CLICKABLEINFO_DEFAULTS=void 0,t.CLICKABLEINFO_DEFAULTS={enabled:!0,description:"",rules:[{id:"1",expression:"",assignment:""}]},t.DEFAULTS_DYNAMIC={clickableInfo:t.CLICKABLEINFO_DEFAULTS,fps:""},t.DEFAULTS=r.__assign({folderId:"",secret:!1,isPlaying:!1},t.DEFAULTS_DYNAMIC),t.inflateDefaults=function(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},t.stripDefaults=function(e){var r=n.stripDefaults(t.DEFAULTS,e),i=n.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===i?delete r.clickableInfo:r.clickableInfo=i,r},t.extractDynamicProperties=o,t.computeParsableState=function(e){return r.__assign(r.__assign({type:"simulation",id:e.id},o(e)),{guid:"",index:0})}})),i("graphing-calc/models/simulation",["require","exports","tslib","./abstract-item","core/lib/deepCopy","core/lib/copy-properties","core/graphing-calc/json/simulation","underscore","../../core/graphing-calc/json/simulation"],(function(e,t,r,n,i,o,a,s,l){"use strict";function c(e){var t=a.computeParsableState(e);t.index=e.index,t.guid=e.guid,e.cachedParsableState=t}function u(e){e.cachedViewState=r.__assign({type:e.type,id:e.id,folderId:e.folderId,secret:e.secret,isPlaying:e.isPlaying},a.extractDynamicProperties(e))}function d(e){var t=e.cachedViewState;e.cachedUndoRedoDiffState=t,e.cachedUndoRedoFullState=t}Object.defineProperty(t,"__esModule",{value:!0}),t.getFPSPackedError=t.getEvaluatedFPS=t.isIdentifierAnOutput=t.getAllOutputs=t.setFPS=t.setIsPlaying=t.removeClickableInfoRule=t.addClickableInfoRule=t.setClickableInfoRuleProp=t.setClickableInfoProp=t.getClickableInfoRulePackedError=t.getClickableInfoUpdateIdentifier=t.getClickableInfoUpdateLatex=t.getEvaluatedClickableRule=t.getClickableInfoPropLatex=t.isClickableRuleDefined=t.restoreState=t.initModel=t.updateCachedUndoRedoState=t.updateCachedViewState=t.getState=t.getMissingVariables=t.onFormulaUpdate=t.onControllerUpdate=t.updateCachedParsableState=t.setSecret=t.eachLatex=void 0,t.eachLatex=function(e,t){t(e.fps,"simulationFPS")},t.setSecret=function(e,t){e.secret=t},t.updateCachedParsableState=c,t.onControllerUpdate=function(e){n.updateIsHiddenFromUI(e),u(e),d(e),c(e)},t.onFormulaUpdate=function(e,t){e.formula=t},t.getMissingVariables=function(e){return e.formula&&e.formula.variables||[]},t.getState=function(e,t){var r=e.cachedViewState;return t.stripDefaults?a.stripDefaults(r):r},t.updateCachedViewState=u,t.updateCachedUndoRedoState=d,t.initModel=function(e,t){var o=i.default(a.inflateDefaults(e));return r.__assign(r.__assign(r.__assign({},o),n.DEFAULTS(t)),{formula:void 0,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}})};var p=r.__assign({id:!1,type:!1,folderId:!0,secret:!0,isPlaying:!0},o.makeTrueMap(l.DEFAULTS_DYNAMIC));function h(e,t){var r=e.formula.clickableinfo_data;if(r)return r[t]}function g(e,t){if(e.formula){var r=h(e,t);if(r)return r.identifier}}function f(e){for(var t={},r=0,n=e.clickableInfo.rules;r<n.length;r++){var i=g(e,n[r].id);i&&(t[i]=!0)}return t}t.restoreState=function(e,t){o.copyProperties({from:t,to:e,props:p})},t.isClickableRuleDefined=function(e,t){for(var r=0,n=e.clickableInfo.rules;r<n.length;r++)if(n[r].id===t)return!0;return!1},t.getClickableInfoPropLatex=function(e,t,r){for(var n=0,i=e.clickableInfo.rules;n<i.length;n++){var o=i[n];if(o.id===t)return o[r]}return""},t.getEvaluatedClickableRule=h,t.getClickableInfoUpdateLatex=function(e,t){if(e.formula){var r=h(e,t);if(r)return r.latex}},t.getClickableInfoUpdateIdentifier=g,t.getClickableInfoRulePackedError=function(e,t){if(e.formula){var r=h(e,t);if(r)return r.error}},t.setClickableInfoProp=function(e,t,n){var i;e.clickableInfo=r.__assign(r.__assign({},e.clickableInfo),((i={})[t]=n,i))},t.setClickableInfoRuleProp=function(e,t,n,o){for(var a=i.default(e.clickableInfo.rules),s=0,l=a;s<l.length;s++){var c=l[s];c.id===t&&(c[n]=o)}e.clickableInfo=r.__assign(r.__assign({},e.clickableInfo),{rules:a})},t.addClickableInfoRule=function(e,t){e.clickableInfo=i.default(e.clickableInfo),e.clickableInfo.rules.push({id:t,assignment:"",expression:""})},t.removeClickableInfoRule=function(e,t){e.clickableInfo=i.default(e.clickableInfo),e.clickableInfo.rules=s.filter(e.clickableInfo.rules,(function(e){return e.id!==t})),0===e.clickableInfo.rules.length&&(e.clickableInfo.rules=l.CLICKABLEINFO_DEFAULTS.rules,e.clickableInfo.enabled=!1)},t.setIsPlaying=function(e,t){e.isPlaying!==t&&e.controller.invalidatePlayingSimulationCache(),e.isPlaying=t},t.setFPS=function(e,t){e.fps=t},t.getAllOutputs=f,t.isIdentifierAnOutput=function(e,t){return f(e)[t]},t.getEvaluatedFPS=function(e){if(!e.formula)return 0;var t=e.formula.fps;return 0<t?t:0},t.getFPSPackedError=function(e){if(e.formula)return e.formula.fps_error}})),i("core/graphing-calc/extract-slider-value-from-latex",["require","exports","parser","core/math/builtinframe","core/math/policyGraphing"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractSliderValueFromLatex=void 0,t.extractSliderValueFromLatex=function(e){var t=r.parse(e);if("Assignment"!==t.type)return NaN;if("Constant"!==t._expression.type)return NaN;if(!i.PolicyGraphing.validLHS(t._symbol))return NaN;if(n[t._symbol])return NaN;var o=t._expression.asValue();return"number"==typeof o?o:NaN}})),i("graphing-calc/models/expression",["require","exports","tslib","core/lib/dragmode","core/types/slider-loop-modes","core/types/styles","core/types/label-sizes","core/types/label-orientations","core/math/evaluate-single-expression","lib/rounding","core/lib/deepCopy","core/lib/copy-properties","./abstract-item","./list","underscore","core/math/expression-types","core/lib/label","core/lib/number-to-latex","core/math/sliders","core/lib/number-to-latex","core/lib/validate-color","./simulation","core/graphing-calc/json/expression","core/math/distribution-spec","core/graphing-calc/extract-slider-value-from-latex"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_){"use strict";function k(e){return void 0===e?NaN:+e}function M(e){var t=e.formula;return!!t&&e.controller.isDecimalToFractionEnabled()&&t.hasOwnProperty("constant_value")&&m.canDisplayAsFraction(k(t.constant_value))}function I(e){var t=e.formula;if(!t)return!1;var r=t.is_evaluable&&t.zero_values&&0<t.zero_values.length&&"boolean"!=typeof t.zero_values[0].val,n=M(e)&&Y(e),i=!!t.rgb_value&&e.formula.assignment;return r||n||i}function C(e,t){if(!isFinite(t))return e;var r=/=(.*?)([-\.0-9]+)/,n=e.match(r);if(!n)return e;if(parseFloat(n[2])===t)return e;var i=b.numberToDecimalString(t);return e.replace(r,"=$1"+i)}function L(e){var t=e.dragMode===n.DragMode.AUTO&&void 0!==e.formula.default_drag_mode?e.formula.default_drag_mode:e.dragMode;e.dragMode===n.DragMode.AUTO&&e.hidden&&(t=n.DragMode.NONE),e.reconciledDragMode=n.reconcileDragMode(t,e.formula.move_strategy),e.interactiveLabel&&e.reconciledDragMode!==n.DragMode.NONE&&Q(e,!1)}function P(e,t,r){if(!e.sliderExists)return NaN;var n=D(e),i=F(e),o=q(e);if(r&&void 0!==r.overwriteStep&&(o=r.overwriteStep),t=v.constrainSliderValueLikeEvaluator({target:t,hardMin:e.slider.hardMin?n:void 0,hardMax:e.slider.hardMax?i:void 0,step:o}),!r||!r.ignoreSoftLimits){if(!e.slider.hardMin&&t<n)return n;if(!e.slider.hardMax&&i<t)return i}return t}function T(e){var t=h.getParentFolderModel(e);t&&t.hidden||e.formula.expression_type&&X(e)?e.shouldGraph=!1:e.shouldGraph=!e.hidden}function A(e){var t,r,n,i=e.formula&&e.formula.raw_slider_latex;e.sliderExists&&e.latex===i?(t=e.latex,e.cachedDisplayLatex.storedLatex===t?(r=N(e),isFinite(r)&&((n=e.controller.getFocusLocation())&&"expression"===n.type&&n.id===e.id||(e.cachedDisplayLatex.valueLatex=C(e.latex,r)))):e.cachedDisplayLatex={storedLatex:e.latex,valueLatex:e.latex}):e.cachedDisplayLatex={storedLatex:e.latex,valueLatex:e.latex}}function O(e){var t=m.value(e);return t.superscript&&t.mantissa?t.mantissa+"^{"+t.superscript+"}":t.string}function D(e){if(e.slider.hardMin){var t=e.formula.slider_min_number;return isFinite(t)?t:NaN}var r,n=e.controller.isDegreeMode(),i=l.default(e.slider.min,n),o=R(e),a=q(e),s=e.slider.hardMax?e.formula.slider_max_number:void 0,c=-10;return i<c&&(c=i),o<c&&(c=o),s<c&&(c=s),a&&(c=(r=v.constrainSliderValueLikeEvaluator({target:c,hardMin:void 0,hardMax:s,step:a}))<=c?r:r-a),c}function F(e){if(e.slider.hardMax){var t=e.formula.slider_max_number;return isFinite(t)?t:NaN}var r=e.controller.isDegreeMode(),n=l.default(e.slider.max,r),i=R(e),o=q(e),a=e.slider.hardMin?e.formula.slider_min_number:void 0;return v.computeSoftMax({storedMax:n,sliderValue:i,step:o,hardMin:a})}function q(e){return e.formula.slider_step_number}function N(e){if(e.formula&&e.formula.is_slider){var t=e.formula.constant_value;if(void 0!==t)return+t}}function R(e){var t=e.formula&&e.formula.raw_slider_latex;if(e.latex!==t)return _.extractSliderValueFromLatex(e.latex);var r=N(e);return isFinite(r)?r:NaN}function B(e,t){var r=e.formula.clickableinfo_data;if(r)return r[t]}function j(e){var t=e.cachedViewState;t&&S.areDynamicPropertiesStrictEqual(t,e)&&t.folderId===e.folderId&&t.color===e.color&&t.latex===e.latex&&t.showLabel===e.showLabel&&t.label===e.label&&t.hidden===e.hidden&&t.secret===e.secret&&t.fill===e.fill&&t.points===e.points&&t.lines===e.lines&&t.lineStyle===e.lineStyle&&t.pointStyle===e.pointStyle&&t.dragMode===e.dragMode&&t.labelSize===e.labelSize&&t.labelOrientation===e.labelOrientation&&t.suppressTextOutline===e.suppressTextOutline&&t.interactiveLabel===e.interactiveLabel&&t.editableLabelMode===e.editableLabelMode&&t.residualVariable===e.residualVariable&&t.regressionParameters===e.regressionParameters&&t.isLogModeRegression===e.isLogModeRegression&&t.displayEvaluationAsFraction===e.displayEvaluationAsFraction&&t.slider===e.slider||(e.cachedViewState=r.__assign({type:e.type,id:e.id,folderId:e.folderId,color:e.color,latex:e.latex,showLabel:e.showLabel,label:e.label,hidden:e.hidden,secret:e.secret,points:e.points,lines:e.lines,lineStyle:e.lineStyle,pointStyle:e.pointStyle,fill:e.fill,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,displayEvaluationAsFraction:e.displayEvaluationAsFraction,slider:e.slider},S.extractDynamicProperties(e)))}function V(e){var t,n=e.memoizedUndoRedoStateParams,i=e.cachedViewState,o=e.preTransientState;e.cachedUndoRedoFullState=i,n&&n.viewState===i&&n.preTransientState===o||(e.memoizedUndoRedoStateParams={viewState:i,preTransientState:o},delete(t=o?r.__assign(r.__assign({},i),{latex:o.latex,slider:r.__assign(r.__assign({},i.slider),o.slider)}):r.__assign({},i)).regressionParameters,delete t.residualVariable,e.cachedUndoRedoDiffState=t)}function z(e){var t,r=h.getParentFolderModel(e),n=!(!r||!r.hidden),i=e.cachedViewState,o=e.index,a=e.showLabel&&!n,s=e.shouldGraph,l=e.memoizedParsableStateParams;l&&l.viewState===i&&l.index===o&&l.showLabel===a&&l.shouldGraph===s||(e.memoizedParsableStateParams={viewState:i,index:o,showLabel:a,shouldGraph:s},(t=S.computeParsableState(i)).index=o,t.showLabel=a,t.shouldGraph=s,e.cachedParsableState=t)}function U(e){return e.formula&&e.formula.assignment}function G(e){return!(!e.sliderExists||!e.slider.isPlaying&&!e.sliderDragging)||!!e.draggingOnGraphpaper}Object.defineProperty(t,"__esModule",{value:!0}),t.isPotentiallyMovable=t.blankOutExpressionAfterClearingLatex=t.isClickableAllowed=t.getCDFEvaluation=t.getLabelAngleValue=t.getColorLatexValue=t.isColorLatexValid=t.isLineWidthValid=t.isPointSizeValid=t.isLabelAngleValid=t.isLabelSizeValid=t.isPointOpacityValid=t.isLineOpacityValid=t.isFillOpacityValid=t.isCDFMaxValid=t.isCDFMinValid=t.setCDFMax=t.setCDFMin=t.setShowCDF=t.getCDFMaxPlaceholder=t.getCDFMinPlaceholder=t.getCDFMax=t.getCDFMin=t.shouldShowCDFFooter=t.isListValuedDistribution=t.isPrimaryLatexValid=t.shouldShowCDFCheckbox=t.parseToplevelFunction=t.isDiscreteDistribution=t.isToplevelDistribution=t.isToplevelFunction=t.isStats=t.isTTest=t.isVisualization=t.isHistogram=t.isDotPlot=t.isBoxPlot=t.isPointOrPointList=t.isPointList=t.isSinglePoint=t.isPolar=t.isParametric=t.isRegression=t.isInequality=t.isPolygon=t.hasSlider=t.getParametricDomainMax=t.getParametricDomainMin=t.getPolarDomainMax=t.getPolarDomainMin=t.hasDomain=t.areAllVisibilityPropsOff=t.setHidden=t.isDraggableAndHidden=t.hasEditableLabel=t.getEditableLabelMode=t.setEditableLabelMode=t.setInteractiveLabel=t.setSuppressTextOutline=t.setLabelOrientation=t.setLabelAngle=t.setLabelSize=t.setLineStyle=t.setLines=t.setPointStyle=t.setPoints=t.setDragMode=t.setLabelDropdownOpen=t.setColorLatex=t.setLineWidth=t.setPointSize=t.setPointOpacity=t.setLineOpacity=t.setFillOpacity=t.setFill=t.setColor=t.setLogMode=t.setParametricDomainMax=t.setPolarDomainMax=t.setParametricDomainMin=t.setPolarDomainMin=t.setShowLabel=t.setLabel=t.setEvaluationAsFraction=t.shouldEvaluationDisplayAsFraction=t.setSliderAnimationPeriod=t.setSliderStep=t.setSliderDragging=t.setSliderLoopMode=t.setLatex=t.commitSliderSoftLimits=t.setSliderIsPlaying=t.setSliderMax=t.setSliderMin=t.restoreState=t.onControllerUpdate=t.isTransientAndShouldBlockSimulation=t.getAssignment=t.eachLatex=t.updateCachedParsableState=t.initModel=t.updateCachedUndoRedoState=t.setIsDraggingOnGrapher=t.updateCachedViewState=t.getState=t.isDomainMaxValid=t.isDomainMinValid=t.getDomainMax=t.getDomainMin=t.isSliderStepValid=t.isSliderMaxValid=t.isSliderMinValid=t.needsDotplotXMode=t.isClickableObject=t.removeClickableInfoRule=t.addClickableInfoRule=t.setClickableInfoRuleProp=t.setClickableInfoProp=t.getClickableInfoUpdateIdentifier=t.getClickableInfoUpdateLatex=t.getClickableInfoRulePackedError=t.getEvaluatedClickableRule=t.getClickableInfoPropLatex=t.isClickableRuleDefined=t.setVizProp=t.getVizProp=t.isVizPropValid=t.isSliderAtEndOfPlayOnce=t.getSliderValue=t.getRawSliderValue=t.getSliderStep=t.getSliderMax=t.getSliderMin=t.getDisplaySliderMax=t.getDisplaySliderMin=t.getDisplayLatex=t.updateDisplayLatex=t.computeShouldGraph=t.onFormulaUpdate=t.getMissingVariables=t.tickSliderStep=t.adjustSliderByDraggingThumb=t.adjustSliderByKeyboard=t.adjustSliderByMovablePoint=t.updateReconciledDragMode=t.isEmpty=t.computeNewSliderLatex=t.getStatsResults=t.getTTestResults=t.getEvaluationValue=t.shouldShowEvaluation=t.isGraphable=t.isRationalizableConstant=t.EvaluationLabelOptions=void 0,t.EvaluationLabelOptions={smallCutoff:1e-6,bigCutoff:1e9,digits:12},t.isRationalizableConstant=M,t.isGraphable=function(e){return!(!e.formula||!e.formula.is_graphable)},t.shouldShowEvaluation=I,t.getEvaluationValue=function(e){var t=e.formula;return I(e)?t.zero_values&&t.zero_values.length?t.zero_values[0].val:t.rgb_value?t.rgb_value:t.constant_value:M(e)?e.formula.constant_value:NaN},t.getTTestResults=function(e){var t=e.formula.ttest_results;if(t&&isFinite(t.lessThan))return{lessThan:t.lessThan,greaterThan:t.greaterThan,notEqual:t.notEqual}},t.getStatsResults=function(e){var t=e.formula.stats_results;if(t&&isFinite(t.min))return{min:t.min,q1:t.q1,median:t.median,q3:t.q3,max:t.max}},t.computeNewSliderLatex=C,t.isEmpty=function(e){return""===((e.latex||"")+(e.label||"")).split(" ").join("")},t.updateReconciledDragMode=L,t.adjustSliderByMovablePoint=function(e,t){var r;e.sliderExists&&(e.slider.isPlaying&&W(e,!1),r=P(e,t,{ignoreSoftLimits:!0}),e.latex=C(e.latex,r))},t.adjustSliderByKeyboard=function(e,t,r){var n;e.sliderExists&&(e.slider.isPlaying&&W(e,!1),$(e),n=function(e,t,r){if(void 0===r&&(r={}),!e.sliderExists)return NaN;var n=R(e),i=D(e),o=F(e),a=q(e);void 0===r.overwriteStep&&(r.overwriteStep=a||(o-i)/20);var s=0;switch(t){case"min":return P(e,i);case"max":return P(e,o);case"up":s=1;break;case"down":s=-1;break;case"bigup":s=5;break;case"bigdown":s=-5;break;default:return t}for(var l=n,c=0;c<20;c++){var u=c/3*r.overwriteStep,d=n;if(0<s)d<(n=P(e,l+u,r))&&--s;else{if(!(s<0))break;(n=P(e,l-u,r))<d&&(s+=1)}}return n}(e,t,r),e.latex=C(e.latex,n))},t.adjustSliderByDraggingThumb=function(e,t){var r;e.sliderExists&&(e.slider.isPlaying&&W(e,!1),r=P(e,t),e.latex=C(e.latex,r))},t.tickSliderStep=function(e,t){if(e.sliderExists&&!e.resetSliderAnimationTargetValue){var r=e.sliderLastTickTime;if(e.sliderLastTickTime=t,void 0!==r){var n,o=t-r,a=D(e),s=F(e),l=q(e),u=e.slider.animationPeriod,d=e.slider.loopMode;isNaN(e.sliderAnimationTargetValue)&&(n=R(e),isNaN(n)||(e.sliderAnimationTargetValue=n));var p,h,g,f=l?l/2:0;if(d===i.SliderLoopMode.LOOP_FORWARD_REVERSE)e.sliderAnimationTargetValue>=s?H(e,{playDirection:-1}):e.sliderAnimationTargetValue<=a&&H(e,{playDirection:1});else if(d===i.SliderLoopMode.LOOP_FORWARD)H(e,{playDirection:1}),e.sliderAnimationTargetValue>=s+f&&(e.sliderAnimationTargetValue=a-f);else if(d===i.SliderLoopMode.PLAY_ONCE)H(e,{playDirection:1});else{if(d!==i.SliderLoopMode.PLAY_INDEFINITELY)throw new Error("Unexpected slider loop mode: "+d);H(e,{playDirection:1})}isFinite(o)||(o=0),h=d===i.SliderLoopMode.PLAY_INDEFINITELY?(g=o/(u/4),l&&(g*=l),e.sliderAnimationTargetValue+=g,h=e.sliderAnimationTargetValue,l||(h=c.shortestDecimalBetween(h-.1*g,h+.1*g)),P(e,h,{ignoreSoftLimits:!0})):(g=(s-a)*(o=Math.min(o,u/10))/u,e.sliderAnimationTargetValue+=g*e.slider.playDirection,e.sliderAnimationTargetValue=Math.max(a-f,Math.min(s+f,e.sliderAnimationTargetValue)),h=e.sliderAnimationTargetValue,l||(p=g/o*(1e3/60),h=c.shortestDecimalBetween(h-.1*p,h+.1*p)),P(e,h)),e.latex=C(e.latex,h)}}},t.getMissingVariables=function(e){var t=e.formula;return t&&!t.is_single_identifier&&t.variables||[]},t.onFormulaUpdate=function(e,t){e.formula=t,e.error=t.error,e.unresolved=!1,t.is_slider?e.sliderExists&&!e.resetSliderAnimationTargetValue||(e.sliderAnimationTargetValue=R(e),e.sliderDragging=!1,e.sliderExists=!0):e.sliderExists=!1,e.resetSliderAnimationTargetValue=!1;var r={};t.is_regression&&(r=t.regression.parameters,e.residualVariable=t.regression.residualVariable,e.controller.areLogModeRegressionsForced()&&(e.isLogModeRegression=!0)),g.isEqual(e.regressionParameters,r)||(e.regressionParameters=r)},t.computeShouldGraph=T,t.updateDisplayLatex=A,t.getDisplayLatex=function(e){return e.cachedDisplayLatex.valueLatex},t.getDisplaySliderMin=function(e){return e.slider.hardMin?e.slider.min:O(D(e))},t.getDisplaySliderMax=function(e){return e.slider.hardMax?e.slider.max:O(F(e))},t.getSliderMin=D,t.getSliderMax=F,t.getSliderStep=q,t.getRawSliderValue=N,t.getSliderValue=R,t.isSliderAtEndOfPlayOnce=function(e){return e.slider.loopMode===i.SliderLoopMode.PLAY_ONCE&&R(e)>=F(e)},t.isVizPropValid=function(e,t){return!!e.formula.viz_valids&&!!e.formula.viz_valids[t]},t.getVizProp=function(e,t){return e.vizProps[t]},t.setVizProp=function(e,t,n){var i;e.vizProps=r.__assign(r.__assign({},e.vizProps),((i={})[t]=n,i))},t.isClickableRuleDefined=function(e,t){for(var r=0,n=e.clickableInfo.rules;r<n.length;r++)if(n[r].id===t)return!0;return!1},t.getClickableInfoPropLatex=function(e,t,r){for(var n=0,i=e.clickableInfo.rules;n<i.length;n++){var o=i[n];if(o.id===t)return o[r]}return""},t.getEvaluatedClickableRule=B,t.getClickableInfoRulePackedError=function(e,t){if(e.formula){var r=B(e,t);if(r)return r.error}},t.getClickableInfoUpdateLatex=function(e,t){var r=B(e,t);if(r)return r.latex},t.getClickableInfoUpdateIdentifier=function(e,t){var r=B(e,t);if(r)return r.identifier},t.setClickableInfoProp=function(e,t,n){var i;e.clickableInfo=r.__assign(r.__assign({},e.clickableInfo),((i={})[t]=n,i))},t.setClickableInfoRuleProp=function(e,t,n,i){for(var o=u.default(e.clickableInfo.rules),a=0,s=o;a<s.length;a++){var l=s[a];l.id===t&&(l[n]=i)}e.clickableInfo=r.__assign(r.__assign({},e.clickableInfo),{rules:o})},t.addClickableInfoRule=function(e,t){e.clickableInfo=u.default(e.clickableInfo),e.clickableInfo.rules.push({id:t,assignment:"",expression:""})},t.removeClickableInfoRule=function(e,t){e.clickableInfo=u.default(e.clickableInfo),e.clickableInfo.rules=g.filter(e.clickableInfo.rules,(function(e){return e.id!==t})),0===e.clickableInfo.rules.length&&(e.clickableInfo.enabled=!1,e.clickableInfo.rules=S.CLICKABLEINFO_DEFAULTS.rules)},t.isClickableObject=function(e){return e.clickableInfo.enabled&&ce(e)},t.needsDotplotXMode=function(e){return!!e.__workerNeedsDotplotXMode},t.isSliderMinValid=function(e){return!(!e.formula||!e.formula.slider_min_valid)},t.isSliderMaxValid=function(e){return!(!e.formula||!e.formula.slider_max_valid)},t.isSliderStepValid=function(e){return!(!e.formula||!e.formula.slider_step_valid)},t.getDomainMin=function(e){if(!e.formula)return NaN;if(isFinite(e.__workerSampledDomainMin))return e.__workerSampledDomainMin;var t=e.formula.domain_min_number;return isFinite(t)?t:NaN},t.getDomainMax=function(e){if(!e.formula)return NaN;if(isFinite(e.__workerSampledDomainMax))return e.__workerSampledDomainMax;var t=e.formula.domain_max_number;return isFinite(t)?t:NaN},t.isDomainMinValid=function(e){return!(!e.formula||!e.formula.domain_min_valid)},t.isDomainMaxValid=function(e){return!(!e.formula||!e.formula.domain_max_valid)},t.getState=function(e,t){var n=e.cachedViewState;if(t.stripDefaults&&""===e.parametricDomain.min&&""===e.parametricDomain.max||(n=r.__assign(r.__assign({},n),{domain:{min:""===e.parametricDomain.min?"0":e.parametricDomain.min,max:""===e.parametricDomain.max?"1":e.parametricDomain.max}})),t.stripDefaults)return S.stripDefaults(n);if(void 0!==n.points&&void 0!==n.lines&&void 0!==n.fill)return n;var i=u.default(n);return void 0===i.points&&delete i.points,void 0===i.lines&&delete i.lines,void 0===i.fill&&delete i.fill,i},t.updateCachedViewState=j,t.setIsDraggingOnGrapher=function(e,t){t&&$(e),e.draggingOnGraphpaper=t},t.updateCachedUndoRedoState=V,t.initModel=function(e,t){var n=u.default(S.inflateDefaults(e)),i=n.color;return i&&x.default(i)||(i=t.getNextColor()),r.__assign(r.__assign(r.__assign({},n),p.DEFAULTS(t)),{labelDropdownOpen:!1,formula:{error:void 0,operator:"=",variables:[]},error:void 0,unresolved:!1,color:i,pointStyle:n.pointStyle,lineStyle:n.lineStyle,displayEvaluationAsFraction:n.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,resetSliderAnimationTargetValue:!1,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoDiffState:void 0,cachedUndoRedoFullState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}})},t.updateCachedParsableState=z,t.eachLatex=function(e,t){t(e.latex,"latex"),t(e.lineWidth,"lineWidth"),t(e.fillOpacity,"fillOpacity"),t(e.lineOpacity,"lineOpacity"),t(e.pointOpacity,"pointOpacity"),t(e.pointSize,"pointSize"),t(e.labelAngle,"labelAngle"),t(e.labelSize,"labelSize"),J(e)&&(t(e.parametricDomain.min,"parametricDomainMin"),t(e.parametricDomain.max,"parametricDomainMax")),ee(e)&&(t(e.polarDomain.min,"polarDomainMin"),t(e.polarDomain.max,"polarDomainMax")),e.sliderExists&&(t(e.slider.min,"sliderMin"),t(e.slider.max,"sliderMax"),t(e.slider.step,"sliderStep")),e.residualVariable&&t(e.residualVariable,"residualVariable")},t.getAssignment=U,t.isTransientAndShouldBlockSimulation=G,t.onControllerUpdate=function(e){G(e)||function(e){var t=U(e);if(!t)return!1;var r=e.controller.getPlayingSimulation();return!(!r||!w.isIdentifierAnOutput(r,t))}(e)?e.preTransientState||(e.preTransientState={latex:e.latex,slider:{min:e.slider.min,max:e.slider.max,playDirection:e.slider.playDirection}}):delete e.preTransientState,e.sliderExists&&e.slider.isPlaying||(e.sliderLastTickTime=void 0),p.updateIsHiddenFromUI(e),T(e),L(e),j(e),V(e),z(e),A(e)};var K=r.__assign({id:!1,type:!1,color:!0,folderId:!0,latex:!0,showLabel:!0,label:!0,hidden:!0,secret:!0,points:!0,lines:!0,lineStyle:!0,pointStyle:!0,fill:!0,dragMode:!0,labelSize:!0,labelOrientation:!0,suppressTextOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0},d.makeTrueMap(S.DEFAULTS_DYNAMIC));function H(e,t){e.slider=r.__assign(r.__assign({},e.slider),t)}function W(e,t){e&&e.slider.isPlaying!==t&&(H(e,{isPlaying:t}),t&&($(e),e.sliderAnimationTargetValue=R(e)))}function $(e){var t,r;e.slider.hardMin||(t=y.default(D(e)))!==e.slider.min&&H(e,{min:t}),e.slider.hardMax||(r=y.default(F(e)))!==e.slider.max&&H(e,{max:r})}function Y(e){return e.displayEvaluationAsFraction}function Q(e,t){e.interactiveLabel=t}function X(e){if(Z(e))return!1;var t=e.points,r=e.lines,n=e.fill,i=f.getReconciledExpressionProps(e.formula.expression_type,{points:t,lines:r,fill:n});return!i.points&&!i.lines&&!i.fill}function Z(e){return!!e.formula.is_inequality}function J(e){return e.formula.expression_type===f.ExpressionType.PARAMETRIC}function ee(e){return e.formula.expression_type===f.ExpressionType.POLAR}function te(e){var t=oe(e);return!(!t||"visualization"!==t.type||"boxplot"!==t.symbol)}function re(e){var t=oe(e);return!(!t||"visualization"!==t.type||"dotplot"!==t.symbol)}function ne(e){var t=oe(e);return!(!t||"visualization"!==t.type||"histogram"!==t.symbol)}function ie(e){var t=oe(e);return!(!t||"distribution"!==t.type)}function oe(e){if(e.controller.areDistributionsEnabled()&&e.latex)return e.cachedParseToplevelFunction&&e.cachedParseToplevelFunction.latex===e.latex||(e.cachedParseToplevelFunction={latex:e.latex,spec:E.parseToplevelFunction(e.latex)}),e.cachedParseToplevelFunction.spec}function ae(e){return se(e)&&ie(e)}function se(e){return!!e.formula.expression_type}function le(e){return!!e.formula.is_concrete_list}function ce(e){return!(!f.isClickableExpressionType(e.formula.expression_type)||e.reconciledDragMode&&e.reconciledDragMode!==n.DragMode.NONE)}t.restoreState=function(e,t){d.copyProperties({from:t,to:e,props:K}),e.resetSliderAnimationTargetValue=!0,e.sliderAnimationTargetValue=void 0},t.setSliderMin=function(e,t){H(e,t?{hardMin:!0,min:t}:{hardMin:!1,min:"-10"})},t.setSliderMax=function(e,t){H(e,t?{hardMax:!0,max:t}:{hardMax:!1,max:"10"})},t.setSliderIsPlaying=W,t.commitSliderSoftLimits=$,t.setLatex=function(e,t){var r,n=_.extractSliderValueFromLatex(t);isFinite(n)&&((r=v.determineWhichLimitsAreCompatibleWithValue({target:n,step:q(e),hardMin:e.slider.hardMin?D(e):void 0,hardMax:e.slider.hardMax?F(e):void 0})).min||H(e,{hardMin:!1,min:"-10"}),r.max||H(e,{hardMax:!1,max:"10"}),r.step||H(e,{step:""})),e.latex=t},t.setSliderLoopMode=function(e,t){H(e,{loopMode:t,playDirection:1}),t===i.SliderLoopMode.PLAY_INDEFINITELY&&H(e,{hardMin:!1,hardMax:!1,min:"",max:""}),e.sliderAnimationTargetValue=D(e)},t.setSliderDragging=function(e,t){t&&$(e),e.sliderDragging=t},t.setSliderStep=function(e,t){H(e,{step:t})},t.setSliderAnimationPeriod=function(e,t){H(e,{animationPeriod:t})},t.shouldEvaluationDisplayAsFraction=Y,t.setEvaluationAsFraction=function(e,t){e.displayEvaluationAsFraction=t},t.setLabel=function(e,t){e.label=t},t.setShowLabel=function(e,t){e.showLabel=t},t.setPolarDomainMin=function(e,t){e.polarDomain=r.__assign(r.__assign({},e.polarDomain),{min:t})},t.setParametricDomainMin=function(e,t){e.parametricDomain=r.__assign(r.__assign({},e.parametricDomain),{min:t})},t.setPolarDomainMax=function(e,t){e.polarDomain=r.__assign(r.__assign({},e.polarDomain),{max:t})},t.setParametricDomainMax=function(e,t){e.parametricDomain=r.__assign(r.__assign({},e.parametricDomain),{max:t})},t.setLogMode=function(e,t){e.isLogModeRegression=t},t.setColor=function(e,t){x.default(t)&&(e.color=t,e.colorLatex="")},t.setFill=function(e,t){e.fill=t},t.setFillOpacity=function(e,t){e.fillOpacity!==t&&(e.fillOpacity=t)},t.setLineOpacity=function(e,t){e.lineOpacity!==t&&(e.lineOpacity=t)},t.setPointOpacity=function(e,t){e.pointOpacity!==t&&(e.pointOpacity=t)},t.setPointSize=function(e,t){e.pointSize!==t&&(e.pointSize=t)},t.setLineWidth=function(e,t){e.lineWidth!==t&&(e.lineWidth=t)},t.setColorLatex=function(e,t){e.colorLatex!==t&&(e.colorLatex=t)},t.setLabelDropdownOpen=function(e,t){e.labelDropdownOpen=t},t.setDragMode=function(e,t){e.dragMode!==t&&(e.dragMode=t)},t.setPoints=function(e,t){e.points=t},t.setPointStyle=function(e,t){e.pointStyle!==t&&(e.pointStyle=t)!==o.PointStyle.POINT&&(e.dragMode=n.DragMode.NONE)},t.setLines=function(e,t){e.lines=t},t.setLineStyle=function(e,t){e.lineStyle!==t&&(e.lineStyle=t)},t.setLabelSize=function(e,t){e.labelSize=t},t.setLabelAngle=function(e,t){e.labelAngle=t},t.setLabelOrientation=function(e,t){e.labelOrientation=t},t.setSuppressTextOutline=function(e,t){e.suppressTextOutline=t},t.setInteractiveLabel=Q,t.setEditableLabelMode=function(e,t){e.editableLabelMode=t},t.getEditableLabelMode=function(e){return e.editableLabelMode},t.hasEditableLabel=function(e){var t=e.editableLabelMode;return t===S.EditableLabelMode.Math||t===S.EditableLabelMode.Text},t.isDraggableAndHidden=function(e){return!(e.reconciledDragMode===n.DragMode.NONE||!e.hidden)},t.setHidden=function(e,t){!(e.hidden=t)&&X(e)&&(e.lines=e.points=e.fill=void 0)},t.areAllVisibilityPropsOff=X,t.hasDomain=function(e){return J(e)||ee(e)},t.getPolarDomainMin=function(e){return e.polarDomain.min},t.getPolarDomainMax=function(e){return e.polarDomain.max},t.getParametricDomainMin=function(e){return e.parametricDomain.min},t.getParametricDomainMax=function(e){return e.parametricDomain.max},t.hasSlider=function(e){return!!e.sliderExists},t.isPolygon=function(e){return e.formula.expression_type===f.ExpressionType.POLYGON},t.isInequality=Z,t.isRegression=function(e){return!!e.formula.is_regression},t.isParametric=J,t.isPolar=ee,t.isSinglePoint=function(e){return e.formula.expression_type===f.ExpressionType.SINGLE_POINT},t.isPointList=function(e){return e.formula.expression_type===f.ExpressionType.POINT_LIST},t.isPointOrPointList=function(e){return e.formula.expression_type===f.ExpressionType.POINT_LIST||e.formula.expression_type===f.ExpressionType.SINGLE_POINT},t.isBoxPlot=te,t.isDotPlot=re,t.isHistogram=ne,t.isVisualization=function(e){return te(e)||re(e)||ne(e)},t.isTTest=function(e){return e.formula.expression_type===f.ExpressionType.TTEST},t.isStats=function(e){return e.formula.expression_type===f.ExpressionType.STATS},t.isToplevelFunction=function(e){return!!oe(e)},t.isToplevelDistribution=ie,t.isDiscreteDistribution=function(e){var t=e.formula;return!!t&&!!t.is_discrete_distribution},t.parseToplevelFunction=oe,t.shouldShowCDFCheckbox=ae,t.isPrimaryLatexValid=se,t.isListValuedDistribution=le,t.shouldShowCDFFooter=function(e){return!!ae(e)&&!le(e)&&e.cdf.show},t.getCDFMin=function(e){return e.cdf.min},t.getCDFMax=function(e){return e.cdf.max},t.getCDFMinPlaceholder=function(e){var t=k(e.formula.cdf_min_default);return t!==-1/0&&isFinite(t)?t+"":"-\\infty"},t.getCDFMaxPlaceholder=function(e){var t=k(e.formula.cdf_max_default);return t!==1/0&&isFinite(t)?t+"":"\\infty"},t.setShowCDF=function(e,t){e.cdf=r.__assign(r.__assign({},e.cdf),{show:t})},t.setCDFMin=function(e,t){e.cdf=r.__assign(r.__assign({},e.cdf),{min:t})},t.setCDFMax=function(e,t){e.cdf=r.__assign(r.__assign({},e.cdf),{max:t})},t.isCDFMinValid=function(e){return!!e.formula&&!1!==e.formula.cdf_min_valid},t.isCDFMaxValid=function(e){return!!e.formula&&!1!==e.formula.cdf_max_valid},t.isFillOpacityValid=function(e){return!!e.formula&&!1!==e.formula.fill_opacity_valid},t.isLineOpacityValid=function(e){return!!e.formula&&!1!==e.formula.line_opacity_valid},t.isPointOpacityValid=function(e){return!!e.formula&&!1!==e.formula.point_opacity_valid},t.isLabelSizeValid=function(e){return!!e.formula&&!1!==e.formula.label_size_valid},t.isLabelAngleValid=function(e){return!!e.formula&&!1!==e.formula.label_angle_valid},t.isPointSizeValid=function(e){return!!e.formula&&!1!==e.formula.point_size_valid},t.isLineWidthValid=function(e){return!!e.formula&&!1!==e.formula.line_width_valid},t.isColorLatexValid=function(e){return!!e.formula&&!1!==e.formula.color_latex_valid},t.getColorLatexValue=function(e){return e.formula&&e.formula.color_latex_value},t.getLabelAngleValue=function(e){return e.formula&&e.formula.label_angle_value},t.getCDFEvaluation=function(e){var t=e.formula&&e.formula.cdf_evaluation;return isFinite(t)?t:0},t.isClickableAllowed=ce,t.blankOutExpressionAfterClearingLatex=function(e){e.showLabel=S.DEFAULTS.showLabel,e.label=S.DEFAULTS.label,e.hidden=S.DEFAULTS.hidden,e.dragMode=S.DEFAULTS.dragMode,e.fill=S.DEFAULTS.fill,e.points=S.DEFAULTS.points,e.pointStyle=S.DEFAULTS.pointStyle,e.lines=S.DEFAULTS.lines,e.lineStyle=S.DEFAULTS.lineStyle,e.slider=S.SLIDER_DEFAULTS,e.latex="",e.labelSize=a.LabelSize.MEDIUM,e.labelOrientation=s.LabelOrientation.DEFAULT,e.displayEvaluationAsFraction=S.DEFAULTS.displayEvaluationAsFraction,e.suppressTextOutline=!1,e.interactiveLabel=!1,e.editableLabelMode=S.DEFAULTS.editableLabelMode,d.copyAllProperties(S.DEFAULTS_DYNAMIC,e)},t.isPotentiallyMovable=function(e){return!!e.formula.move_strategy}})),i("core/graphing-calc/json/folder",["require","exports","tslib","core/lib/default-spec"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=t.inflateDefaults=t.DEFAULTS=void 0,t.DEFAULTS={collapsed:!1,hidden:!1,secret:!1,title:""},t.inflateDefaults=function(e){return r.__assign(r.__assign({},t.DEFAULTS),e)},t.stripDefaults=function(e){return n.stripDefaults(t.DEFAULTS,e)}})),i("graphing-calc/models/folder",["require","exports","tslib","core/lib/deepCopy","core/lib/copy-properties","./abstract-item","./list","core/graphing-calc/json/folder"],(function(e,t,r,n,i,o,a,s){"use strict";function l(e){e.cachedViewState={type:e.type,id:e.id,title:e.title,hidden:e.hidden,collapsed:e.collapsed,secret:e.secret}}function c(e){e.cachedUndoRedoDiffState=e.cachedViewState,e.cachedUndoRedoFullState=e.cachedViewState}Object.defineProperty(t,"__esModule",{value:!0}),t.setHidden=t.setTitle=t.setCollapsed=t.updateSelectedHiddenChild=t.restoreState=t.onControllerUpdate=t.initModel=t.updateCachedUndoRedoState=t.updateCachedViewState=t.getState=void 0,t.getState=function(e,t){var r=e.cachedViewState;return t.stripDefaults?s.stripDefaults(r):r},t.updateCachedViewState=l,t.updateCachedUndoRedoState=c,t.initModel=function(e,t){var i=n.default(s.inflateDefaults(e));return r.__assign(r.__assign(r.__assign({},i),o.DEFAULTS(t)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})};var u={id:!(t.onControllerUpdate=function(e){d(e),o.updateIsHiddenFromUI(e),l(e),c(e)}),type:!1,hidden:!0,secret:!0,collapsed:!0,title:!0};function d(e){var t=e.controller,r=t.getSelectedItem();e.collapsed?r&&"folder"!==r.type&&r.folderId===e.id&&"none"===o.getDisplayState(r)?(e.selectedHiddenChild=r,a.setSelected(t.getListModel(),e)):r!==e&&(e.selectedHiddenChild=void 0):(r===e&&e.selectedHiddenChild&&a.setSelected(t.getListModel(),e.selectedHiddenChild),e.selectedHiddenChild=void 0)}t.restoreState=function(e,t){i.copyProperties({from:t,to:e,props:u})},t.updateSelectedHiddenChild=d,t.setCollapsed=function(e,t){e.collapsed=t},t.setTitle=function(e,t){e.title=t},t.setHidden=function(e,t){e.hidden=t}})),i("core/graphing-calc/json/text",["require","exports","tslib","core/lib/default-spec"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=t.inflateDefaults=t.DEFAULTS=void 0,t.DEFAULTS={folderId:"",text:"",secret:!1},t.inflateDefaults=function(e){return r.__assign(r.__assign({},t.DEFAULTS),e)},t.stripDefaults=function(e){return n.stripDefaults(t.DEFAULTS,e)}})),i("graphing-calc/models/text",["require","exports","tslib","./abstract-item","core/lib/deepCopy","core/lib/copy-properties","core/graphing-calc/json/text"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCachedUndoRedoState=t.updateCachedViewState=t.getState=t.restoreState=t.onControllerUpdate=t.initModel=t.setText=void 0,t.setText=function(e,t){e.text=t},t.initModel=function(e,t){var o=i.default(a.inflateDefaults(e));return r.__assign(r.__assign(r.__assign({},o),n.DEFAULTS(t)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})};var s={id:!(t.onControllerUpdate=function(e){n.updateIsHiddenFromUI(e),l(e),c(e)}),type:!1,folderId:!0,text:!0,secret:!0};function l(e){e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,text:e.text,secret:e.secret}}function c(e){e.cachedUndoRedoDiffState=e.cachedViewState,e.cachedUndoRedoFullState=e.cachedViewState}t.restoreState=function(e,t){o.copyProperties({from:t,to:e,props:s})},t.getState=function(e,t){var r=e.cachedViewState;return t.stripDefaults?a.stripDefaults(r):r},t.updateCachedViewState=l,t.updateCachedUndoRedoState=c})),i("graphing-calc/models/helper-expression",["require","exports","core/math/evaluationstate","tslib","underscore","core/math/evaluationstate"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFormulaUpdate=t.init=t.getGUID=void 0;var a=0;function s(){return"helper_item_"+a++}t.getGUID=s,t.init=function(e){return n.__assign(n.__assign({},e),{formula:o.defaultEvaluationState(),guid:s(),cachedParsableState:{type:"statement",id:e.id,latex:e.latex,shouldGraph:!1}})},t.onFormulaUpdate=function(e,t,r){t.formula=r;var n,o=t.proxy,a={numericValue:o.numericValue,listValue:o.listValue};r.zero_values&&1===r.zero_values.length&&(n=r.zero_values[0].val),o.numericValue=i.isNumber(n)?n:NaN,o.listValue=i.isArray(n)?n.slice(0):void 0,i.isEqual(o.numericValue,a.numericValue)||e.runAfterDispatch((function(){o.notifyPropertyChange("numericValue")})),i.isEqual(o.listValue,a.listValue)||e.runAfterDispatch((function(){o.notifyPropertyChange("listValue")}))}})),i("core/graphing-calc/json/image",["require","exports","tslib","core/lib/default-spec","../../lib/copy-properties"],(function(e,t,r,n,i){"use strict";function o(e){return i.extractPropertiesLike(e,t.DEFAULTS_DYNAMIC)}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.extractDynamicProperties=t.stripDefaults=t.inflateDefaults=t.DEFAULTS=t.DEFAULTS_DYNAMIC=t.CLICKABLEINFO_DEFAULTS=void 0,t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}],hoveredImage:"",depressedImage:""},t.DEFAULTS_DYNAMIC={center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",clickableInfo:t.CLICKABLEINFO_DEFAULTS,draggable:!1},t.DEFAULTS=r.__assign({folderId:"",hidden:!1,secret:!1,foreground:!1,name:""},t.DEFAULTS_DYNAMIC),t.inflateDefaults=function(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},t.stripDefaults=function(e){var r=n.stripDefaults(t.DEFAULTS,e),i=n.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===i?delete r.clickableInfo:r.clickableInfo=i,r},t.extractDynamicProperties=o,t.computeParsableState=function(e){return r.__assign(r.__assign({type:"image",id:e.id},o(e)),{guid:"",index:0,color:"",shouldGraph:e.hidden,showPoints:!1})}})),i("graphing-calc/models/image",["require","exports","tslib","core/lib/color-helpers","./abstract-item","core/lib/deepCopy","core/lib/copy-properties","./list","jquery","core/graphing-calc/json/image","underscore","core/lib/dragmode","./expression"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p){"use strict";function h(e){if(e.formula){var t=e.formula.center_reference_id,r=e.formula.center_reference_symbol;if(t&&r){var n=e.controller.getItemModel(t);if(n&&"expression"===n.type&&n.formula.assignment===r&&p.isSinglePoint(n))return n}}}function g(e){var t=h(e);if(!t)return!1;var r=t.reconciledDragMode;return!(!r||r===d.DragMode.NONE)}function f(e){return!!e.draggable&&g(e)}function m(e){var t=c.computeParsableState(e);t.color=e.color,t.index=e.index,t.guid=e.guid,t.shouldGraph=e.shouldGraph,t.showPoints=e.showPoints,e.cachedParsableState=t}function y(e){var t,n,i=e.cachedViewState.clickableInfo,o=!0,a=!0;i&&(i.depressedImage===e.clickableInfo.depressedImage&&(a=!1),i.hoveredImage===e.clickableInfo.hoveredImage&&(o=!1)),o&&(e.hoveredImageObj&&(l(e.hoveredImageObj).off("load"),delete e.hoveredImageObj),e.clickableInfo.hoveredImage&&(e.hoveredImageObj=new Image,t=function(){var t=e.controller.getGrapher();t&&t.redrawAllLayers()},n=function(){},b(e.hoveredImageObj,e.clickableInfo.hoveredImage,t,n))),a&&(e.depressedImageObj&&(l(e.depressedImageObj).off("load"),delete e.depressedImageObj),e.clickableInfo.depressedImage&&(e.depressedImageObj=new Image,t=function(){var t=e.controller.getGrapher();t&&t.redrawAllLayers()},n=function(){},b(e.depressedImageObj,e.clickableInfo.depressedImage,t,n))),e.cachedViewState.image_url!==e.image_url&&(l(e.imageObj).off("load"),e.imageObj=new Image,b(e.imageObj,e.image_url,(function(){e.controller.dispatch({type:"image-load-success",id:e.id})}),(function(){e.controller.dispatch({type:"image-load-error",id:e.id})}))),e.cachedViewState=r.__assign({type:e.type,id:e.id,folderId:e.folderId,image_url:e.image_url,name:e.name,hidden:e.hidden,foreground:e.foreground,secret:e.secret},c.extractDynamicProperties(e))}function v(e){var t=e.cachedViewState;e.cachedUndoRedoFullState=e.cachedViewState,e.preTransientState&&(t=r.__assign(r.__assign({},t),e.preTransientState)),e.cachedUndoRedoDiffState=t}function b(e,t,r,n){l(e).on("load.initial-image-load",(function(){var t,n,i=e.width,o=e.height;1===i&&1===o?(l(e).off(".initial-image-load"),l(e).on("load",r),e.src=(t=e,(n=document.createElement("canvas")).width=2,n.height=2,n.getContext("2d").drawImage(t,0,0,2,2),n.toDataURL())):r()})).on("error",n),/^data:/.test(t)||(e.crossOrigin="anonymous"),e.src=t}Object.defineProperty(t,"__esModule",{value:!0}),t.isClickableObject=t.removeClickableInfoRule=t.addClickableInfoRule=t.setClickableInfoRuleProp=t.setClickableInfoProp=t.getClickableInfoRulePackedError=t.getClickableInfoUpdateIdentifier=t.getClickableInfoUpdateLatex=t.getEvaluatedClickableRule=t.getClickableInfoPropLatex=t.isClickableRuleDefined=t.retryLoading=t.setLoadStatus=t.uploadImageAndGenerateToken=t.uploadImages=t.restoreState=t.initModel=t.updateCachedUndoRedoState=t.setIsDraggingOnGrapher=t.updateCachedViewState=t.getState=t.hasInputError=t.getMissingVariables=t.onFormulaUpdate=t.onControllerUpdate=t.updateCachedParsableState=t.eachLatex=t.setImageURL=t.setForeground=t.setOpacity=t.canConvertToDraggableImage=t.isActuallyDraggable=t.doesImageCenterReferenceDraggablePoint=t.doesImageCenterReferenceExternalPoint=t.getCenterExternalReferencedModel=t.setDraggable=t.setName=t.getMQAttribute=t.setMQAttribute=t.setSecret=t.setHidden=void 0,t.setHidden=function(e,t){e.hidden=t},t.setSecret=function(e,t){e.secret=t},t.setMQAttribute=function(e,t,r){e[t]=r},t.getMQAttribute=function(e,t){return e[t]},t.setName=function(e,t){e.name=t},t.setDraggable=function(e,t){e.draggable=t},t.getCenterExternalReferencedModel=h,t.doesImageCenterReferenceExternalPoint=function(e){return!!h(e)},t.doesImageCenterReferenceDraggablePoint=g,t.isActuallyDraggable=f,t.canConvertToDraggableImage=function(e){if(!e.formula)return!1;if(!e.formula.center_is_point_literal)return!1;var t=e.formula.move_strategy;if(!t)return!1;var r=t[2],n=t[3],i=r&&"none"!==r.type,o=n&&"none"!==n.type;return!(!i&&!o)},t.setOpacity=function(e,t){e.opacity=t},t.setForeground=function(e,t){e.foreground=t},t.setImageURL=function(e,t){e.image_url=t},t.eachLatex=function(e,t){t(e.opacity,"imageOpacity"),t(e.center,"imageCenter"),t(e.height,"imageHeight"),t(e.width,"imageWidth"),t(e.angle,"imageAngle")},t.updateCachedParsableState=m,t.onControllerUpdate=function(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={center:e.center,width:e.width,height:e.height}):delete e.preTransientState,i.updateIsHiddenFromUI(e);var t=s.getParentFolderModel(e);e.shouldGraph=!(t&&t.hidden||e.hidden),e.showPoints=e.shouldGraph&&s.isItemSelected(e)&&"loaded"===e.loadStatus&&!f(e),y(e),v(e),m(e)},t.onFormulaUpdate=function(e,t){e.formula=t,e.error=function(e){var t={center:e.controller.s("graphing-calculator-error-image-invalid-center"),angle:e.controller.s("graphing-calculator-error-image-invalid-angle"),width:e.controller.s("graphing-calculator-error-image-invalid-width"),height:e.controller.s("graphing-calculator-error-image-invalid-height"),opacity:e.controller.s("graphing-calculator-error-image-invalid-opacity")};for(var r in e.formula.errorMap)if(e.formula.errorMap[r])return t[r]}(e)},t.getMissingVariables=function(e){return e.formula&&e.formula.variables||[]},t.hasInputError=function(e,t){return!(!e.formula||!e.formula.errorMap||!e.formula.errorMap[t])},t.getState=function(e,t){var r=e.cachedViewState;return t.stripDefaults?c.stripDefaults(r):r},t.updateCachedViewState=y,t.setIsDraggingOnGrapher=function(e,t){e.draggingOnGraphpaper=t},t.updateCachedUndoRedoState=v,t.initModel=function(e,t){var a=o.default(c.inflateDefaults(e));return r.__assign(r.__assign(r.__assign({},a),i.DEFAULTS(t)),{color:n.colors.BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}})};var x=r.__assign({id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,foreground:!0},a.makeTrueMap(c.DEFAULTS_DYNAMIC));t.restoreState=function(e,t){a.copyProperties({from:t,to:e,props:x})},t.uploadImages=function(e){for(var t=e.controller,r=e.files,n=e.id,i={errors:[],tokens:[]},o=0;o<r.length;o++){var a=r[o];a.type.match("image/*")?i.tokens.push(S({controller:t,file:a,id:n})):i.errors.push(t.s("graphing-calculator-error-image-invalid-file",{file:a.name}))}return i};var w=0;function S(e){var t=e.controller,r=e.file,n=e.id,i=""+w++;return t.getGraphSettings().config.imageUploadCallback(r,(function(e,o){setTimeout((function(){var a;e?t.dispatch({type:"image-upload-error",token:i,error:e}):b(a=new Image,o,(function(){var e=a.width,s=a.height,l=Math.max(e,s)/Math.min(e,s);e<s?(s=10,e=Math.round(10*s/l)/10):(e=10,s=Math.round(10*e/l)/10),t.dispatch({type:"image-upload-success",token:i,url:o,width:e+"",height:s+"",name:r.name,id:n})}),(function(){t.dispatch({type:"image-upload-error",token:i,error:""})}))}))})),i}function E(e,t){"loaded"===(e.loadStatus=t)&&(e.failures=0),"failed"===t&&(e.failures+=1)}function _(e,t){var r=e.formula.clickableinfo_data;if(r)return r[t]}t.uploadImageAndGenerateToken=S,t.setLoadStatus=E,t.retryLoading=function(e){e.imageObj.src=e.imageObj.src,E(e,"loading")},t.isClickableRuleDefined=function(e,t){for(var r=0,n=e.clickableInfo.rules;r<n.length;r++)if(n[r].id===t)return!0;return!1},t.getClickableInfoPropLatex=function(e,t,r){for(var n=0,i=e.clickableInfo.rules;n<i.length;n++){var o=i[n];if(o.id===t)return o[r]}return""},t.getEvaluatedClickableRule=_,t.getClickableInfoUpdateLatex=function(e,t){if(e.formula){var r=_(e,t);if(r)return r.latex}},t.getClickableInfoUpdateIdentifier=function(e,t){if(e.formula){var r=_(e,t);if(r)return r.identifier}},t.getClickableInfoRulePackedError=function(e,t){if(e.formula){var r=_(e,t);if(r)return r.error}},t.setClickableInfoProp=function(e,t,n){var i;e.clickableInfo=r.__assign(r.__assign({},e.clickableInfo),((i={})[t]=n,i))},t.setClickableInfoRuleProp=function(e,t,n,i){for(var a=o.default(e.clickableInfo.rules),s=0,l=a;s<l.length;s++){var c=l[s];c.id===t&&(c[n]=i)}e.clickableInfo=r.__assign(r.__assign({},e.clickableInfo),{rules:a})},t.addClickableInfoRule=function(e,t){e.clickableInfo=o.default(e.clickableInfo),e.clickableInfo.rules.push({id:t,assignment:"",expression:""})},t.removeClickableInfoRule=function(e,t){e.clickableInfo=o.default(e.clickableInfo),e.clickableInfo.rules=u.filter(e.clickableInfo.rules,(function(e){return e.id!==t})),0===e.clickableInfo.rules.length&&(e.clickableInfo.rules=c.CLICKABLEINFO_DEFAULTS.rules,e.clickableInfo.enabled=!1)},t.isClickableObject=function(e){return e.clickableInfo.enabled}})),i("lib/latex-search-helpers",["require","exports"],(function(e,t){"use strict";function r(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function n(e){return e.replace(/\\\\right\\(\\*[})\]|])/g,".*\\\\right\\$1").replace(/ ?\\([}\]])/g,".*\\$1")}Object.defineProperty(t,"__esModule",{value:!0}),t.getFuzzyLatexRegExp=t.addFuzzyMatches=t.escapeForRegex=void 0,t.escapeForRegex=r,t.addFuzzyMatches=n,t.getFuzzyLatexRegExp=function(e){var t=n(r(e));return new RegExp(t)}})),i("graphing-calc/models/list",["require","exports","lib/color-distance","tslib","./expression","./folder","./table","./text","./simulation","./helper-expression","./image","core/types/graphmode","core/lib/color-helpers","underscore","core/lib/deepCopy","../../lib/latex-search-helpers"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f){"use strict";function m(e,t){return e.__itemModelArray[t]}function y(e,t){var r;do{if(-1==--t)return;r=m(e,t)}while(r&&!w(r));return r}function v(e,t){var r,n=T(e);do{if(++t===n)return;r=m(e,t)}while(r&&!w(r));return r}function b(e){if("folder"!==e.type&&e.folderId){var t=M(e.controller.getListModel(),e.folderId);if(t&&"folder"===t.type)return t}}function x(e){if(!e)return!1;if(e.secret)return!0;var t=b(e);return!(!t||!t.secret)}function w(e){return!S(e)}function S(e){if(!e)return!0;if(e.filteredBySearch)return!0;if(e.controller.isItemBeingDragged(e.id))return!1;if(!e.controller.canAdministerSecretFolders()&&x(e))return!0;var t=b(e);return!(!t||!t.collapsed||e.controller.getExpressionSearchStr())}function E(e,t){for(var r=0;r<e.__itemModelArray.length;r++)_(e.__itemModelArray[r],t)}function _(e,t){switch(e.type){case"expression":i.eachLatex(e,t);break;case"table":a.eachLatex(e,t);break;case"image":u.eachLatex(e,t);break;case"folder":case"text":break;case"simulation":l.eachLatex(e,t);break;default:return e}}function k(e,t){return e.replace(/([_^])([a-z0-9])/gi,"$1{$2}").match(t)}function M(e,t){return e.__itemIdToModel[t]}function I(e,t){return e.__helperIdToModel[t]}function C(e){e.__anyDependsOnRandomSeed=!1;for(var t=0;t<e.__itemModelArray.length;t++){var r=e.__itemModelArray[t];if(r&&"formula"in r&&r.formula&&r.formula.depends_on_random_seed)return void(e.__anyDependsOnRandomSeed=!0)}}function L(e){for(var t=!e.controller.canAdministerSecretFolders(),r=1,n=1,i=0;i<e.__itemModelArray.length;i++){var o=e.__itemModelArray[i];o.index=i,o.displayIndex=r,x(o)&&(o.secretIndex=n,n+=1),t&&x(o)||(r+=1)}e.nextDisplayIndex=r}function P(e){e.__itemModelArray=[],e.__itemIdToModel={},e.__helperIdToModel={},e.__anyDependsOnRandomSeed=!1}function T(e){return e.__itemModelArray.length}function A(e){return e.selectedItem}function O(e,t){switch(t.type){case"expression":return i.initModel(t,e.controller);case"table":return a.initModel(t,e.controller);case"image":return u.initModel(t,e.controller);case"folder":return o.initModel(t,e.controller);case"text":return s.initModel(t,e.controller);case"simulation":return l.initModel(t,e.controller);default:return t}}function D(e,t){e.selectedItem=t}function F(e,t,r){var n=String(t.id);if(e.__itemIdToModel.hasOwnProperty(n))throw Error("Item with id '"+n+"' is already in list");e.__itemIdToModel[n]=t,e.__itemModelArray.splice(r,0,t),L(e)}function q(e,t){var r=e.__itemModelArray[t];if("folder"===r.type){for(var n=0,i=r.index+1;i<e.__itemModelArray.length;i++){var o=e.__itemModelArray[i];if("folder"===o.type||o.folderId!==r.id)break;n+=1,N(o)&&D(e,void 0),delete e.__itemIdToModel[o.id],delete e.expressionAnalysis[r.id]}e.__itemModelArray.splice(t,1+n)}else e.__itemModelArray.splice(t,1);N(r)&&D(e,void 0),delete e.__itemIdToModel[r.id],delete e.expressionAnalysis[r.id],C(e),L(e)}function N(e){return e.controller.getListModel().selectedItem===e}Object.defineProperty(t,"__esModule",{value:!0}),t.getMissingVariablesForItem=t.setDragState=t.isItemSelected=t.selectNextItem=t.selectPrevItem=t.removeItemById=t.anyItemDependsOnRandomSeed=t.removeItemAtIndex=t.insertItemAtEnd=t.insertItemAtIndex=t.moveItemsTo=t.setSelected=t.onEvaluatorFormulaUpdates=t.onGraphComputed=t.restoreListState=t.modelFromSpec=t.setListState=t.getLargestIntegerId=t.getState=t.getUndoRedoFullState=t.getUndoRedoDiffState=t.getSelected=t.getAllModelsWithSliders=t.hasNoVisibleExpressions=t.getItemCount=t.removeAllItems=t.reindex=t.recomputeAnyItemDependsOnRandomSeed=t.addHelperExpression=t.getHelperExpressionById=t.getItemsByIdentifier=t.getItemById=t.updateDrawOrder=t.findAvailableColumnSubscript=t.filterItemsBySearch=t.eachLatexForItem=t.eachLatex=t.getAllHelperItemModels=t.getAllItemModels=t.isItemHiddenFromUI=t.isItemSelectable=t.isItemSecret=t.getNumberOfItemsInFolder=t.getParentFolderModel=t.findNextSelectableItem=t.findPrevSelectableItem=t.getLastSelectableItem=t.getFirstSelectableItem=t.getItemByIndex=t.getNextColor=t.areAnyImagesLoading=t.init=void 0,t.init=function(e){return{controller:e,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__anyDependsOnRandomSeed:!1,drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1}},t.areAnyImagesLoading=function(e){for(var t=0;t<e.__itemModelArray.length;t++){var r=e.__itemModelArray[t];if("image"===r.type&&"loading"===r.loadStatus)return!0}return!1},t.getNextColor=function(e){var t=h.filter(h.values(e.controller.getColors()),(function(e){return e!=p.colors.ORANGE})),r=t[e.colorIdx];return e.colorIdx=(e.colorIdx+1)%t.length,r},t.getItemByIndex=m,t.getFirstSelectableItem=function(e){for(var t=0;t<e.__itemModelArray.length;t++){var r=e.__itemModelArray[t];if(w(r))return r}},t.getLastSelectableItem=function(e){for(var t=e.__itemModelArray.length-1;0<=t;t--){var r=e.__itemModelArray[t];if(w(r))return r}},t.findPrevSelectableItem=y,t.findNextSelectableItem=v,t.getParentFolderModel=b,t.getNumberOfItemsInFolder=function(e,t){var r=M(e,t);if(!r||"folder"!==r.type)return 0;for(var n=0,i=e.__itemModelArray.length,o=r.index+1;o<i;o++){var a=e.__itemModelArray[o];if("folder"===a.type||a.folderId!==t)break;n+=1}return n},t.isItemSecret=x,t.isItemSelectable=w,t.isItemHiddenFromUI=S,t.getAllItemModels=function(e){return e.__itemModelArray},t.getAllHelperItemModels=function(e){return h.values(e.__helperIdToModel)},t.eachLatex=E,t.eachLatexForItem=_,t.filterItemsBySearch=function(e,t){for(var r=f.getFuzzyLatexRegExp(t),n=0;n<e.__itemModelArray.length;n++)if(t){var o=e.__itemModelArray[n];switch(o.filteredBySearch=!0,o.type){case"expression":i.eachLatex(o,(function(e){k(e,r)&&(o.filteredBySearch=!1)})),o.label&&o.showLabel&&(0==="label".indexOf(t)||k(o.label,r))&&(o.filteredBySearch=!1);break;case"table":a.eachLatex(o,(function(e){k(e,r)&&(o.filteredBySearch=!1)}));break;case"image":u.eachLatex(o,(function(e){k(e,r)&&(o.filteredBySearch=!1)}));break;case"folder":o.title&&0<=o.title.indexOf(t)&&(o.filteredBySearch=!1);break;case"text":0<=o.text.indexOf(t)&&(o.filteredBySearch=!1);break;case"simulation":l.eachLatex(o,(function(e){k(e,r)&&(o.filteredBySearch=!1)}));break;default:return o}!o.filteredBySearch&&"folder"!==o.type&&o.folderId&&(e.__itemIdToModel[o.folderId].filteredBySearch=!1)}else e.__itemModelArray[n].filteredBySearch=!1},t.findAvailableColumnSubscript=function(e){var t=[];E(e,(function(e){if(-1===e.indexOf("~")&&-1===e.indexOf("\\sim"))for(var r=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var n=r.exec(e);if(!n)break;t.push(parseInt(n[1]||n[2],10))}})),t.sort((function(e,t){return e-t}));for(var r=1,n=0;n<t.length;n++)t[n]===r&&r++;return r},t.updateDrawOrder=function(e){var t=[];h.each(e.__itemModelArray,(function(e){"table"===e.type?h.each(e.columnModels,(function(e){t.push(e.id)})):t.push(e.id)})),e.drawOrder=t},t.getItemById=M,t.getItemsByIdentifier=function(e,t){for(var r=[],n=0;n<e.__itemModelArray.length;n++){var o=e.__itemModelArray[n];"expression"===o.type&&i.getAssignment(o)===t&&r.push(o)}return r},t.getHelperExpressionById=I,t.addHelperExpression=function(e,t){var r=c.init(t);e.__helperIdToModel[r.id]=r},t.recomputeAnyItemDependsOnRandomSeed=C,t.reindex=L,t.removeAllItems=P,t.getItemCount=T,t.hasNoVisibleExpressions=function(e){return 1===e.nextDisplayIndex},t.getAllModelsWithSliders=function(e){for(var t=[],r=0;r<e.__itemModelArray.length;r++){var n=e.__itemModelArray[r];"expression"===n.type&&n.sliderExists&&t.push(n)}return t},t.getSelected=A,t.getUndoRedoDiffState=function(e){return{list:e.__itemModelArray.map((function(e){return e.cachedUndoRedoDiffState}))}},t.getUndoRedoFullState=function(e){return{list:e.__itemModelArray.map((function(e){return e.cachedUndoRedoFullState}))}},t.getState=function(e,t){return{list:e.__itemModelArray.map((function(e){switch(e.type){case"expression":return i.getState(e,t);case"image":return u.getState(e,t);case"table":return a.getState(e,t);case"folder":return o.getState(e,t);case"text":return s.getState(e,t);case"simulation":return l.getState(e,t);default:return e}}))}},t.getLargestIntegerId=function(e){for(var t=0,r=/^[0-9]+$/,n=e.list.length-1;0<=n;n--){var i=e.list[n],o=i.id;if(r.test(o)&&t<(s=parseInt(o,10))&&(t=s),"table"===i.type&&i.columns)for(var a=i.columns.length-1;0<=a;a--){var s;o=i.columns[a].id,r.test(o)&&t<(s=parseInt(o,10))&&(t=s)}}return t},t.setListState=function(e,t,n){var i,o;for(n=n||{},e.colorIdx=0,P(e),e.expressionAnalysis={},i=0;i<t.list.length;i++){var a,s=O(e,t.list[i]);n.remapColors&&"color"in s&&s.color&&(a=h.values(e.controller.getColors()),h.contains(a,s.color)||(s.color=r.closestColor(s.color,a))),e.__itemModelArray.push(s),e.__itemIdToModel[s.id]=s}L(e),1===e.nextDisplayIndex&&(o=O(e,{type:"expression",id:e.controller.generateId(),color:e.controller.getNextColor()}),F(e,o,e.__itemModelArray.length))},t.modelFromSpec=O,t.restoreListState=function(e,t){var r,n=e.__itemIdToModel;for(e.__itemModelArray=[],e.__itemIdToModel={},r=0;r<t.list.length;r++){var c,d=t.list[r];if((c=n[d.id])&&c.type===d.type)switch(c.type){case"expression":if(d.type!==c.type)throw new Error("invalid restoration");i.restoreState(c,d);break;case"table":if(d.type!==c.type)throw new Error("invalid restoration");a.restoreState(c,d);break;case"image":if(d.type!==c.type)throw new Error("invalid restoration");u.restoreState(c,d);break;case"folder":if(d.type!==c.type)throw new Error("invalid restoration");o.restoreState(c,d);break;case"text":if(d.type!==c.type)throw new Error("invalid restoration");s.restoreState(c,d);break;case"simulation":if(d.type!==c.type)throw new Error("invalid restoration");l.restoreState(c,d);break;default:return c}else c=O(e,d);e.__itemModelArray.push(c),e.__itemIdToModel[c.id]=c}C(e),L(e)},t.onGraphComputed=function(e,t,r){var n,i=M(e,r[0]&&r[0].tableId||t);if(i)switch(i.type){case"expression":var o=!1;i.__workerNeedsDotplotXMode=!1;for(var s=0;s<r.length;s++)(g=r[s]).graphMode!==d.Z_3D&&g.graphMode!==d.OBJECT3D&&g.graphMode!==d.PARAMETRIC_CURVE_3D&&("resolved"in g&&!g.resolved&&(o=!0),g.boundingBox&&(n=n||[]).push(g.boundingBox),g.needsDotplotXMode&&(i.__workerNeedsDotplotXMode=!0));i.unresolved=o,i.boundingBoxes=n;for(var l,c=1/0,u=-1/0,p=0,h=r;p<h.length;p++)(g=h[p]).graphMode===d.POLAR&&(l=g.sampledDomain)&&(c=Math.min(c,l.min),u=Math.max(u,l.max));return isFinite(c)&&(i.__workerSampledDomainMin=c),void(isFinite(u)&&(i.__workerSampledDomainMax=u));case"table":var g;for(s=0;s<r.length;s++)(g=r[s]).graphMode!==d.Z_3D&&g.graphMode!==d.OBJECT3D&&g.graphMode!==d.PARAMETRIC_CURVE_3D&&g.boundingBox&&(n=n||[]).push(g.boundingBox);return void(n&&a.setColumnBoundingBoxes(i,t,n));default:return}},t.onEvaluatorFormulaUpdates=function(e,t){var r,n,o,s=g.default(e.expressionAnalysis);for(r in t)if(t.hasOwnProperty(r)){o=t[r],n=M(e,r);var d,p={isGraphable:!!o.is_graphable,isError:!!o.error,errorMessage:o.error?e.controller.unpack(o.error):void 0};if(n)switch(n.type){case"expression":i.onFormulaUpdate(n,o),o.zero_values&&1===o.zero_values.length?(d=o.zero_values[0].val,h.isNumber(d)&&(p.evaluation={type:"Number",value:d},p.evaluationDisplayed=!0),h.isArray(d)&&d.every(h.isNumber)&&(p.evaluation={type:"ListOfNumber",value:d.slice()},p.evaluationDisplayed=!0)):o.hasOwnProperty("constant_value")&&h.isNumber(o.constant_value)&&(p.evaluation={type:"Number",value:o.constant_value},p.evaluationDisplayed=!1);break;case"image":u.onFormulaUpdate(n,o);break;case"table":a.onFormulaUpdate(n,o);break;case"folder":case"text":break;case"simulation":l.onFormulaUpdate(n,o);break;default:return n}else{var f=I(e,r);if(!f)continue;c.onFormulaUpdate(e.controller,f,o)}s[r]=p}C(e),e.expressionAnalysis=s},t.setSelected=D,t.moveItemsTo=function(e,t,r,i){var o;t!==r&&(o=e.__itemModelArray.splice(t,i),t<r&&(r=r-i+1),e.__itemModelArray.splice.apply(e.__itemModelArray,n.__spreadArray([r,0],o)),L(e))},t.insertItemAtIndex=F,t.insertItemAtEnd=function(e,t){F(e,t,T(e))},t.removeItemAtIndex=q,t.anyItemDependsOnRandomSeed=function(e){return e.__anyDependsOnRandomSeed},t.removeItemById=function(e,t){var r=M(e,t);r&&q(e,r.index)},t.selectPrevItem=function(e){var t=A(e);if(!t)return!1;var r=y(e,t.index);return!!r&&(D(e,r),r.index===T(e)-1&&"expression"===t.type&&i.isEmpty(t)&&q(e,r.index),!0)},t.selectNextItem=function(e){var t=A(e);if(!t)return!1;var r=v(e,t.index);return!!r&&(D(e,r),!0)},t.isItemSelected=N,t.setDragState=function(e,t){e.dragState=t},t.getMissingVariablesForItem=function(e){switch(e.type){case"expression":return i.getMissingVariables(e);case"image":return u.getMissingVariables(e);case"simulation":return l.getMissingVariables(e);case"table":case"text":case"folder":return[];default:return e}}})),i("graphing-calc/models/abstract-item",["require","exports","./list","graphing-calc/models/expression","graphing-calc/models/table"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMaybeGradientDisplayColor=t.getDisplayColor=t.getDisplayState=t.updateIsHiddenFromUI=t.setFolderId=t.setSecret=t.DEFAULTS=t.getGUID=void 0;var o=0;function a(){return"abstract_item_"+o++}function s(e){return e.colorLatex?("expression"===e.type?(t=n.getColorLatexValue(e),r=n.isColorLatexValid(e)):"header"===e.type&&(t=i.getColorLatexValue(e),r=i.isColorLatexValid(e)),r&&t?t:e.color):e.color;var t,r}t.getGUID=a,t.DEFAULTS=function(e){return{guid:a(),controller:e,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}},t.setSecret=function(e,t){e.secret=t},t.setFolderId=function(e,t){"folder"!==e.type&&(e.folderId=t)},t.updateIsHiddenFromUI=function(e){e.isHiddenFromUI=r.isItemHiddenFromUI(e)},t.getDisplayState=function(e){return e.isHiddenFromUI||e.filteredBySearch?"none":e.renderShell?"shell":"render"},t.getDisplayColor=function(e){var t=s(e);return Array.isArray(t)?t[0]:t},t.getMaybeGradientDisplayColor=s})),i("core/graphing-calc/json/table",["require","exports","tslib","core/lib/default-spec","core/types/styles","core/lib/dragmode"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.stripDefaults=t.inflateDefaults=t.COLUMN_DEFAULTS=t.DEFAULTS=void 0,t.DEFAULTS={folderId:"",secret:!1,columns:[]},t.COLUMN_DEFAULTS={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:o.DragMode.NONE,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:""},t.inflateDefaults=function(e){var n=r.__assign(r.__assign({},t.DEFAULTS),e);return n.columns=n.columns.map((function(e){return r.__assign(r.__assign({},t.COLUMN_DEFAULTS),e)})),n},t.stripDefaults=function(e){return e=r.__assign(r.__assign({},e),{columns:e.columns.map((function(e){return n.stripDefaults(t.COLUMN_DEFAULTS,e)}))}),n.stripDefaults(t.DEFAULTS,e)},t.computeParsableState=function(e){return{type:"table",id:e.id,columns:e.columns.map((function(t){return r.__assign(r.__assign({},t),{tableId:e.id})}))}}})),i("graphing-calc/models/table",["require","exports","core/math/rational-arithmetic-sequence","tslib","core/types/styles","core/lib/dragmode","./abstract-item","underscore","core/lib/label","core/math/evaluate-single-expression","core/math/distance","core/lib/deepCopy","core/lib/copy-properties","graphing-calc/models/list","core/graphing-calc/json/table","core/graphing-calc/json/table","core/graphing-calc/json/table","core/lib/validate-color"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y){"use strict";function v(e,t,r,n){n.row=e.rowModels[t],n.row.cells.splice(r,0,n)}function b(e,t,r){e.rowModels[t].cells.splice(r,1)}function x(e){return isFinite(e)?l.truncatedLatexLabel(e,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function w(e,t,r){var n=e.columnModels[t];n.error=r.error,n.discrete=r.discrete,n.disabled=r.dependent,n.draggable=!r.error&&!r.dependent,n.packedErrors=[],n.computedValues=[];for(var i=r.values,o=i.length-1;0<=o;o--){var a=i[o];n.computedValues[o]="number"==typeof a?x(a):"",n.packedErrors[o]=a&&a.key?a:void 0}}function S(e){if(!e.isExpanded){var t=e.rowModels.length;if(!(t<30))return{min:8,max:t-5}}}function E(e,t){var r=e.columnModels[t];return{values:e.columns[t].values.slice(),dragMode:r.dragMode,hidden:r.hidden,id:r.id,color:r.color,points:r.points,lines:r.lines,pointStyle:r.pointStyle,lineStyle:r.lineStyle,latex:r.latex,colorLatex:r.colorLatex,lineOpacity:r.lineOpacity,lineWidth:r.lineWidth,pointSize:r.pointSize,pointOpacity:r.pointOpacity}}Object.defineProperty(t,"__esModule",{value:!0}),t.isColumnEmpty=t.doesCellExist=t.setCellLatex=t.shouldHideColumn=t.mergeBoundingBoxes=t.setColumnBoundingBoxes=t.setColumnHidden=t.setExpanded=t.setColumnColorLatex=t.setColumnColor=t.setColumnDragMode=t.setColumnPointOpacity=t.setColumnPointSize=t.setColumnLineOpacity=t.setColumnLineWidth=t.setColumnLineStyle=t.setColumnLines=t.setColumnPointStyle=t.setColumnPoints=t.getColumnModel=t.getSelectedCell=t.cloneTableAndExtendWithProperties=t.makeTableState=t.buildEntireColumnStructure=t.initModel=t.restoreState=t.computeTableStructureMutation=t.updateCachedUndoRedoState=t.setIsDraggingOnGrapher=t.updateCachedViewState=t.getState=t.stripBlankRowAndColumn=t.addBlankRowAndColumn=t.updateCachedParsableState=t.eachLatex=t.getRowAutoFillValues=t.removeColumn=t.insertBlankColumn=t.removeRow=t.insertBlankRow=t.onFormulaUpdate=t.onControllerUpdate=t.getColorLatexValue=t.isPointOpacityValid=t.isPointSizeValid=t.isLineWidthValid=t.isLineOpacityValid=t.isColorLatexValid=t.isDynamicPropValid=t.makeColumn=t.removeCellFromColumn=t.insertCellToColumn=t.makeRow=t.makeCell=t.getGUID=t.getColumnState=t.getCollapsedRange=t.updateIsCollapsedByFocusLocation=t.setColumnComputedValues=t.formatValueForDisplay=t.removeCellFromRow=t.insertCellToRow=void 0,t.insertCellToRow=v,t.removeCellFromRow=b,t.formatValueForDisplay=x,t.setColumnComputedValues=w,t.updateIsCollapsedByFocusLocation=function(e){var t,r=K(e);r&&((t=S(e))?r.row>=t.min&&r.row<t.max&&W(e,!0):e.isExpanded||W(e,!0))},t.getCollapsedRange=S,t.getColumnState=E;var _=0;function k(){return"table_guid_"+_++}function M(){return{guid:k(),type:"cell",row:void 0,column:void 0}}function I(e){return{type:"row",index:e,guid:k(),cells:[]}}function C(e,t,r,n){var i=e.columnModels[t];i.cells.splice(r,0,n),n.column=i,e.columns[i.index].values.splice(r,0,"")}function L(e,t,r){var n=e.columnModels[t];n.cells.splice(r,1),e.columns[n.index].values.splice(r,1)}function P(e,t,r){var i=r.color;i&&y.default(i)||(i=e.controller.getNextColor());var o=n.__assign(n.__assign({},r),{type:"header",guid:k(),index:t,error:void 0,table:e,color:i,packedErrors:[],computedValues:[],cells:void 0,row:void 0,discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return o.cells=o.values.map((function(){var e=M();return e.column=o,e})),delete o.values,0===t&&(o.hidden=!0),o}function T(e,t){var r=e.table.formula;if(!r)return!1;var n=r.column_data[e.index];return!!n&&!!n[t]}function A(e,t){var r=I(t+1);e.rowModels.splice(t+1,0,r);for(var n=t+1;n<e.rowModels.length;n++)e.rowModels[n].index=n;for(n=0;n<e.columnModels.length;n++){var i=M();C(e,n,t,i),v(e,t+1,n,i)}}function O(e,t,r){var i=n.__assign(n.__assign(n.__assign({},g.COLUMN_DEFAULTS),r),{values:e.columns[0].values.map((function(){return""}))}),o=P(e,t,i);e.columnModels.splice(t,0,o),e.columns.splice(t,0,i);for(var a=t+1;a<e.columnModels.length;a++)e.columnModels[a].index=a;for(v(e,0,t,o),a=1;a<e.rowModels.length;a++)v(e,a,t,o.cells[a-1])}function D(e){for(var t=m.computeParsableState({type:"table",id:e.id,secret:e.secret,folderId:e.folderId,columns:e.columnModels.map((function(t){return E(e,t.index)}))}),r=0;r<t.columns.length;r++)t.columns[r].hidden=!e.columnModels[r].shouldGraph;e.cachedParsableState=t}function F(e,t){return(e=d.default(e)).push(n.__assign(n.__assign({},g.COLUMN_DEFAULTS),{id:t,values:e[0].values.map((function(){return""}))})),e.forEach((function(e){e.values.push("")})),e}function q(e){return(e=d.default(e)).pop(),e.forEach((function(e){e.values.pop()})),e}function N(e,t){var r=n.__assign(n.__assign({},e.cachedViewState),{columns:q(e.cachedViewState.columns)});return t.stripDefaults?f.stripDefaults(r):r}function R(e){var t=e.columnModels.map((function(t,r){return E(e,r)}));e.cachedViewState={id:e.id,type:e.type,folderId:e.folderId,columns:t,secret:e.secret}}function B(e){var t=n.__assign(n.__assign({},e.cachedViewState),{columns:q(e.cachedViewState.columns)});e.cachedUndoRedoFullState=t,e.preTransientState&&(t=n.__assign(n.__assign({},t),e.preTransientState)),e.cachedUndoRedoDiffState=t}function j(e,t){if(e.columnModels.length-1!==t.length)return{type:"start-fresh"};if(e.columnModels[0].cells.length-1!==t[0].values.length)return{type:"start-fresh"};for(var r=-1,n=t.length-1;0<=n;n--){var i=e.columns[n],o=t[n];if(i.id!==o.id)return{type:"start-fresh"};for(var a=i.values,s=o.values,l=s.length-1;0<=l;l--)if(a[l]!==s[l]&&(-1===r&&(r=l),r!==l))return{type:"start-fresh"}}return-1===r?{type:"none"}:{type:"edit-row",rowIndex:r}}t.getGUID=k,t.makeCell=M,t.makeRow=I,t.insertCellToColumn=C,t.removeCellFromColumn=L,t.makeColumn=P,t.isDynamicPropValid=T,t.isColorLatexValid=function(e){return T(e,"color_latex_valid")},t.isLineOpacityValid=function(e){return T(e,"line_opacity_valid")},t.isLineWidthValid=function(e){return T(e,"line_width_valid")},t.isPointSizeValid=function(e){return T(e,"point_size_valid")},t.isPointOpacityValid=function(e){return T(e,"point_opacity_valid")},t.getColorLatexValue=function(e){var t=e.table.formula;if(t){var r=t.column_data[e.index];if(r)return r.color_latex_value}},t.onControllerUpdate=function(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={columns:N(e,{stripDefaults:!1}).columns}):delete e.preTransientState,a.updateIsHiddenFromUI(e);var t=h.getParentFolderModel(e),r=t&&t.hidden;s.each(e.columnModels,(function(e){e.shouldGraph=!r&&!e.hidden})),R(e),B(e),D(e)},t.onFormulaUpdate=function(e,t){e.formula=t;for(var r=e.formula.column_data,n=e.columnModels[0].cells.length,i=e.columnModels.length,o=0,a=0;a<r.length;a++){var s=r[a].values.length;o<s&&(o=s)}for(a=o-n;0<a;a--)A(e,n),n++;for(a=0;a<r.length&&a<i;a++)w(e,a,r[a]);var l=e.columnModels[e.columnModels.length-1];l.disabled=!0,l.error=void 0},t.insertBlankRow=A,t.removeRow=function(e,t){var r=S(e);r&&t===r.max-1&&W(e,!0);for(var n=0;n<e.columnModels.length;n++)L(e,n,t);for(e.rowModels.splice(t+1,1),n=t+1;n<e.rowModels.length;n++)e.rowModels[n].index=n},t.insertBlankColumn=O,t.removeColumn=function(e,t){e.columns.splice(t,1),e.columnModels.splice(t,1);for(var r=t;r<e.columnModels.length;r++)e.columnModels[r].index=r;for(r=0;r<e.rowModels.length;r++)b(e,r,t)},t.getRowAutoFillValues=function(e,t){var n=e.columnModels.length,i=[];for(g=0;g<n;g++)i.push("");var o=e.columns[0].values;if(1<t){var a=e.controller.isDegreeMode(),s=c.default(o[0],a),l=c.default(o[1],a);if(isFinite(s)&&isFinite(l)){var d=r(s,l);if(d){for(var p=d.nstart,h=p/d.lcm,g=0;g<t;g++){var f=c.default(o[g],a);if(!u.approx(f,h))return i;h=(p+=d.nstep)/d.lcm}i[0]=(""+s).length<8&&(""+l).length<8?""+h:"\\frac{"+p+"}{"+d.lcm+"}"}}}return i},t.eachLatex=function(e,t){for(var r=0;r<e.columnModels.length;r++){t(e.columnModels[r].latex,"tableHeader");for(var n=e.columns[r],i=0;i<n.values.length;i++)n.values[i]&&t(n.values[i],"tableCellValue")}},t.updateCachedParsableState=D,t.addBlankRowAndColumn=F,t.stripBlankRowAndColumn=q,t.getState=N,t.updateCachedViewState=R,t.setIsDraggingOnGrapher=function(e,t){e.draggingOnGraphpaper=t},t.updateCachedUndoRedoState=B,t.computeTableStructureMutation=j;var V={id:!1,type:!1,columns:!1,folderId:!0,secret:!0},z={id:!1,values:!1,color:!0,latex:!0,hidden:!0,points:!0,lines:!0,dragMode:!0,lineStyle:!0,pointStyle:!0,colorLatex:!0,lineOpacity:!0,lineWidth:!0,pointSize:!0,pointOpacity:!0};function U(e){e.columnModels=e.columns.map((function(t,r){return P(e,r,t)})),e.rowModels=[I(0)];for(var t=0;t<e.columnModels.length;t++)v(e,0,t,e.columnModels[t]);for(t=0;t<e.columnModels[0].cells.length;t++){var r=I(t+1);e.rowModels.push(r);for(var n=0;n<e.columnModels.length;n++)v(e,t+1,n,e.columnModels[n].cells[t])}}t.restoreState=function(e,t){var r=j(e,t.columns);if(p.copyProperties({from:t,to:e,props:V}),"start-fresh"===r.type)e.columns=F(t.columns,e.controller.generateId()),U(e);else{switch(r.type){case"none":break;case"edit-row":for(var n=t.columns.length-1;0<=n;n--)Y(e,{column:n,row:r.rowIndex+1},t.columns[n].values[r.rowIndex]);break;default:return r}for(var i=0;i<t.columns.length;i++)p.copyProperties({from:t.columns[i],to:e.columnModels[i],props:z})}},t.initModel=function(e,t){var r=d.default(f.inflateDefaults(e)),i=n.__assign(n.__assign(n.__assign({},r),a.DEFAULTS(t)),{columnModels:void 0,rowModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},isExpanded:!1});i.columns=F(i.columns,t.generateId());for(var o=0,s=0;s<i.columns.length;s++)i.columns[s].values||(i.columns[s].values=[]),i.columns[s].values.length>o&&(o=i.columns[s].values.length);for(s=0;s<i.columns.length;s++)for(var l=o-i.columns[s].values.length;0<l;l--)i.columns[s].values.push("");return U(i),i},t.buildEntireColumnStructure=U;var G=["x","y","z","u","v","w"];function K(e){var t=e.controller.getFocusLocation();return t&&"table"===t.type&&t.id===e.id?t.location:void 0}function H(e,t){for(var r=0;r<e.columnModels.length;r++){var n=e.columnModels[r];if(n.id===t)return n}}function W(e,t){e.isExpanded=t}function $(e){var t=[];e.columnModels.forEach((function(e){e.boundingBoxes&&!e.hidden&&(t=t.concat(e.boundingBoxes))})),e.boundingBoxes=t}function Y(e,t,r){if(0===t.row){var n=H(e,e.columnModels[t.column].id);if(!n)return;return n.latex=r,void(t.column>=e.columnModels.length-1&&O(e,t.column+1,{id:e.controller.generateId(),latex:"",color:e.controller.getNextColor()}))}var i=e.columnModels[t.column];""!==(e.columns[i.index].values[t.row-1]=r)&&t.row>=e.columnModels[0].cells.length&&A(e,t.row)}t.makeTableState=function(e,t,r){for(var n=[],a=Math.min(t.length,G.length),s=0;s<a;s++)n.push({id:r.generateId(),latex:l.identifierToLatex(G[s]+"_"+e),values:t[s],color:r.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:o.DragMode.NONE,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,colorLatex:"",lineWidth:"",lineOpacity:"",pointOpacity:"",pointSize:""});return{id:r.generateId(),type:"table",folderId:"",secret:!1,columns:n}},t.cloneTableAndExtendWithProperties=function(e,t){var r=N(e,{stripDefaults:!1});if(!r.columns||!t.columns)return t;for(var n=0;n<t.columns.length;n++){var i=r.columns[n],o=t.columns[n];if(i)for(var a in i)i.hasOwnProperty(a)&&(o.hasOwnProperty(a)||(o[a]=i[a]))}return t},t.getSelectedCell=K,t.getColumnModel=H,t.setColumnPoints=function(e,t,r){var n=H(e,t);n&&((n.points=r)||(n.dragMode=o.DragMode.NONE))},t.setColumnPointStyle=function(e,t,r){var n=H(e,t);n&&(n.pointStyle=r)},t.setColumnLines=function(e,t,r){var n=H(e,t);n&&(n.lines=r)},t.setColumnLineStyle=function(e,t,r){var n=H(e,t);n&&(n.lineStyle=r)},t.setColumnLineWidth=function(e,t,r){var n=H(e,t);n&&(n.lineWidth=r)},t.setColumnLineOpacity=function(e,t,r){var n=H(e,t);n&&(n.lineOpacity=r)},t.setColumnPointSize=function(e,t,r){var n=H(e,t);n&&(n.pointSize=r)},t.setColumnPointOpacity=function(e,t,r){var n=H(e,t);n&&(n.pointOpacity=r)},t.setColumnDragMode=function(e,t,r){var n=H(e,t);n&&((n.dragMode=r)===o.DragMode.NONE||n.points||(n.points=!0))},t.setColumnColor=function(e,t,r){var n=H(e,t);n&&y.default(r)&&(n.color=r,n.colorLatex="")},t.setColumnColorLatex=function(e,t,r){var n=H(e,t);n&&(n.colorLatex=r)},t.setExpanded=W,t.setColumnHidden=function(e,t,r){var n=H(e,t);n&&(n.hidden=r)&&$(e)},t.setColumnBoundingBoxes=function(e,t,r){var n=H(e,t);n&&(n.boundingBoxes=r,$(e))},t.mergeBoundingBoxes=$,t.shouldHideColumn=function(e,t){var r=H(e,t);return!r||!r.points&&!r.lines},t.setCellLatex=Y,t.doesCellExist=function(e,t){return t.row<e.rowModels.length&&t.column<e.columnModels.length},t.isColumnEmpty=function(e){if(e.values)for(var t=0,r=e.values;t<r.length;t++)if(""!==r[t])return!1;if(e.computedValues)for(var n=0,i=e.computedValues;n<i.length;n++)if(""!==i[n])return!1;return!0}})),i("main/propagate_selection",["require","graphing-calc/models/table"],(function(e){"use strict";var t=e("graphing-calc/models/table");function r(e){var r,n,i,o=e&&e.id;return e&&"table"===e.type&&(o=(r=t.getSelectedCell(e))&&(n=e.columnModels[r.column])?n.id:void 0),e&&"folder"===e.type&&(o=(i=e.selectedHiddenChild)?i.id:void 0),o}return{getSelectedId:r,propagateSelection:function(e,t,n,i){var o=r(e.getSelectedItem());return o!==i&&t.select(o),o}}})),function(e,t){"function"==typeof i&&i.amd?i("flux",[],t):e.Flux=t()}(this,(function(){return r={},e.m=t=[function(e,t,r){"use strict";e.exports.Dispatcher=r(1)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(2),i=(o.prototype.register=function(e){var t="ID_"+this._lastID++;return this._callbacks[t]=e,t},o.prototype.unregister=function(e){this._callbacks[e]||n(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this._callbacks[e]},o.prototype.waitFor=function(e){this._isDispatching||n(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var r=e[t];this._isPending[r]?this._isHandled[r]||n(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",r):(this._callbacks[r]||n(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",r),this._invokeCallback(r))}},o.prototype.dispatch=function(e){this._isDispatching&&n(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},o.prototype.isDispatching=function(){return this._isDispatching},o.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},o.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},o.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}e.exports=i},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");var l,c,u;if(!e)throw void 0===t?u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[r,n,i,o,a,s],c=0,(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"),u.framesToPop=1,u}}],e.c=r,e.p="",e(0);function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var t,r})),i("keys",["require","browser"],(function(e){var t=e("browser");return new function(){for(var e={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},r={Backspace:this.BACKSPACE,Tab:this.TAB,Enter:this.ENTER,Shift:this.SHIFT,Control:this.CONTROL,Alt:this.ALT,CapsLock:this.CAPSLOCK,Escape:this.ESCAPE," ":this.SPACEBAR,PageUp:this.PAGEUP,PageDown:this.PAGEDOWN,End:this.END,Home:this.HOME,ArrowLeft:this.LEFT,ArrowUp:this.UP,ArrowRight:this.RIGHT,ArrowDown:this.DOWN,Delete:this.DELETE},n={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN},i=["0123456789abcdefghijklmnopqrstuvwxyz","ÂºÂ¡â¢Â£Â¢âÂ§Â¶â¢ÂªÃ¥â«Ã§â ÆÂ©Ë âËÂ¬Âµ Ã¸ÏÅÂ®Ãâ  âââÂ¥Î©","âââ¬â¹âºï¬ï¬â¡Â°Â·ÃÄ±ÃÃÂ´ÃËÃËÃï£¿ÃÃËÃâÅâ°ÃËÂ¨ââËÃÂ¸"].map((function(e){return e.split("")})),o=i[0],a=i[1],s=i[2],l={},c={},u=0;u<o.length;u++){var d=o[u];" "!==a[u]&&(l[a[u]]=d.toUpperCase())," "!==s[u]&&(c[s[u]]=d.toUpperCase())}this.isUndo=function(e){return!e.altKey&&!e.shiftKey&&(e.ctrlKey||e.metaKey)&&("z"==e.key||90==e.which)},this.isRedo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&("y"===e.key||89==e.which||e.shiftKey&&("Z"===e.key||"z"===e.key||90===e.which))},this.isSelectAll=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&("a"===e.key||"A"===e.key||65==e.which)},this.isBacktick=function(e){return!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||"`"!==e.key&&192!=e.which)},this.isHelp=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&("/"===e.key||191==e.which)},this.lookup=function(t){return r[t.key]||e[t.which]||n[t.key]},this.lookupChar=function(e){if(!e.key)return String.fromCharCode(e.which);if(t.IS_APPLE&&e.altKey){var r=e.shiftKey?c:l;if(r[e.key])return r[e.key]}return 1===e.key.length?e.key.toUpperCase():"Enter"===e.key?String.fromCharCode(13):"Tab"===e.key?String.fromCharCode(9):void 0}}})),i("loadcss!touchtracking",(function(){})),i("touchtracking",["require","jquery","ipad.ghostevents","keys","loadcss!./touchtracking"],(function(e){var t,r,n=-1!==document.location.href.indexOf("dcgDebugTouchTracking=dcgYES"),i=e("jquery"),o=e("ipad.ghostevents"),a=e("keys");function s(e){r&&(r[0].value="("+Date.now()+") "+e+"\n"+r[0].value)}e("loadcss!./touchtracking"),null==window._touchtracking_id_counter&&(window._touchtracking_id_counter=0),window._touchtracking_id_counter+=1;var l="touchtracking_id_"+window._touchtracking_id_counter;function c(e){for(var t=[];e;)t.push(e),e=e.parentNode;return t}function u(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(t.push(n),i(n).is(".dcg-tap-container, .dcg-no-touchtracking"))return i(n).is(".dcg-tap-container."+l)?t:[]}return[]}function d(e,t){P=null,s("beginMode:"+(_=e)),I=c(_===S?t.originalEvent.touches[0].target:t.target),i(u(I)).addClass("dcg-depressed").each((function(){var e=i(this);D(e)&&e.addClass("dcg-focus-by-tap")})),i(I).each((function(){var e=i(this);e.data({originalScrollTop:e.scrollTop(),originalScrollLeft:e.scrollLeft()})})),M={}}function p(e){return e.is('input, textarea, select, [role="textbox"]')||e.hasClass("dcg-mathquill-input-span")||e.is("[contenteditable=true]")}function h(e){P=null,s("endMode:"+_),i(".dcg-depressed").removeClass("dcg-depressed");var t=i(document.activeElement);if(!B(e.target)&&D(t))try{t.blur()}catch(e){}if(i(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),i(I).each((function(){var e=i(this),t=e.data("originalScrollTop")-e.scrollTop(),r=e.data("originalScrollLeft")-e.scrollLeft();(t||r)&&(M.scroll=!0)})),1===M["dcg-tapstart"]&&1===M["dcg-tapend"]&&!M["dcg-tapcancel"]&&!M.scroll){s("potential dcg-tap");var r,n="mouse"===e.device?e.clientX:e.originalEvent.changedTouches[0].clientX,o="mouse"===e.device?e.clientY:e.originalEvent.changedTouches[0].clientY;e&&!e.device&&0===n&&0===o&&(n=((r=e.target.getBoundingClientRect()).left+r.right)/2,o=(r.top+r.bottom)/2,e.device="keyboard"),s("potential dcg-tap coords:"+n+":"+o);for(var a=!1,l=!1,c=0;c<I.length&&!a;c++){var u,d=i(I[c]);if("function"==typeof d[0].getBoundingClientRect&&(u=d[0].getBoundingClientRect()),"true"===d.attr("tapboundary")&&(a=!0),u){if(n<u.left||o<u.top)continue;if(n>u.right)continue;if(o>u.bottom)continue}P=d[0],l=!0,q("dcg-tap",e,P);break}}s("result of dcg-tap:  did_dispatch="+l+"  did_escape="+a),_!==S&&_!==E||(L=setTimeout((function(){L=null,C=(new Date).getTime()}),1e3)),I=[],_=0}function g(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push({identifier:n.identifier,x:n.pageX,y:n.pageY,screenX:n.screenX,screenY:n.screenY,pageX:n.pageX,pageY:n.pageY,clientX:n.clientX,clientY:n.clientY})}return t}function f(e){var t=I,r=!!I.length,n=i(".dcg-tap-container."+l+" .dcg-hovered"),o=i.makeArray(n.filter((function(){return O(this)}))),a=[],s=[],d=[];u(c(e)).forEach((function(e){r&&-1===t.indexOf(e)||(-1===o.indexOf(e)&&d.push(e),a.push(e))}));for(var p=0;p<o.length;p++)e=o[p],-1===a.indexOf(e)&&s.push(e);i(s).removeClass("dcg-hovered").trigger("tipsyhide"),i(d).addClass("dcg-hovered").trigger("tipsyshow")}function m(e){for(var t=0;t<A.length;t++)if(A[t].pointerId===e)return 1}function y(e){for(var t=0;t<A.length;t++)if(A[t].pointerId===e)return A.splice(t,1)[0]}function v(e){0===_&&d(E,e),f(null),A.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=A,e.originalEvent.changedTouches=[e.originalEvent],q("dcg-tapstart",e)}function b(e){y(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=A,e.originalEvent.changedTouches=[e.originalEvent],q("dcg-tapcancel",e),0===A.length&&h(e)}function x(e){y(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=A,e.originalEvent.changedTouches=[e.originalEvent],q("dcg-tapend",e),0===A.length&&h(e)}function w(e){return"touch"===e.originalEvent.pointerType||2===e.originalEvent.pointerType}o.evtInScope=function(e){return O(e.target)},o.isGhostEvent=function(e){return!(window.PointerEvent||_!==S&&_!==E&&!F()||e.target===P||e.target&&i.contains(e.target,P)||P&&i.contains(P,e.target)||(s("found ghost event"),0))};var S=1,E=4,_=0,k={},M={},I=[],C=0,L=null,P=null,T=null,A=[],O=function(e){return!!i(e).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container."+l)},D=function(e){return 3!==_&&!p(e)&&O(e)},F=function(){return L||(new Date).getTime()-C<500},q=function(e,t,r){if(s("dispatchEvent:"+e),"dcg-tapstart"===e)k[t.identifier]={type:e,pageX:t.originalEvent.changedTouches[0].pageX,pageY:t.originalEvent.changedTouches[0].pageY};else if("dcg-tapmove"===e){var n=t.originalEvent.changedTouches[0],o=k[t.identifier];if(o&&n.pageX===o.pageX&&n.pageY===o.pageY)return;if((_===S||_===E)&&o&&"dcg-tapstart"===o.type&&Math.abs(o.pageX-n.pageX)+Math.abs(o.pageY-n.pageY)<2)return;k[t.identifier]={type:e,pageX:t.originalEvent.changedTouches[0].pageX,pageY:t.originalEvent.changedTouches[0].pageY}}void 0===M[e.toLowerCase()]?M[e.toLowerCase()]=1:M[e.toLowerCase()]++;var a=i.event.fix(t.originalEvent);a.type=e,a.device=_===S||_===E?"touch":3===_?"keyboard":"mouse",a.touches=g(t.originalEvent.touches),a.changedTouches=g(t.originalEvent.changedTouches),a.target=r||t.target;var l="keyboard"!==a.device&&0<M["dcg-longhold"];a.wasLongheld=function(){return l},a.preventTap=function(){M["dcg-tapcancel"]=1},clearTimeout(T),"dcg-tapstart"===a.type&&"keyboard"!==a.device&&1===a.touches.length&&(T=setTimeout((function(){q("dcg-longhold",t,r)}),500)),a.target&&a.target.nodeName&&"a"===a.target.nodeName.toLowerCase()&&"dcg-tap"===a.type&&"keyboard"===a.device&&a.target.click&&a.target.click(),s("trigger event:"+a.type),i(a.target).trigger(a)};i(document).on("pointerdown MSPointerDown",(function(e){s("document.on:"+e.type),2!==_&&_!==S&&w(e)&&(m(e.originalEvent.pointerId)?s("exit. pointer id already exists: "+e.originalEvent.pointerId):v(e))})),i(document).on("pointermove MSPointerMove",(function(e){s("document.on:"+e.type),2!==_&&_!==S&&w(e)&&(m(e.originalEvent.pointerId)||(s("pointer id already exists: "+e.originalEvent.pointerId),v(e)),y(e.originalEvent.pointerId),A.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=A,e.originalEvent.changedTouches=[e.originalEvent],q("dcg-tapmove",e))})),i(document).on("pointercancel MSPointerCancel",(function(e){var t;if(s("document.on:"+e.type),_===E&&w(e)&&m(e.originalEvent.pointerId))for(b(e);t=A.pop();)b(e=i.Event(t,{originalEvent:t}))})),i(document).on("pointerup MSPointerUp",(function(e){var t;if(s("document.on:"+e.type),_===E&&w(e)&&m(e.originalEvent.pointerId))for(x(e);t=A.pop();)x(e=i.Event(t,{originalEvent:t}))}));var N=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",(function(){}),t),window.removeEventListener("test",(function(){}),t)}catch(e){}return e}();function R(e,t){var r=N?{passive:!1}:void 0;document.addEventListener(e,(function(e){s("document.on:"+e.type),t(i.event.fix(e))}),r)}function B(e){var t=!!i(e).closest(".dcg-do-not-blur").length,r=!!i(e).closest(".dcg-do-blur").length;return t&&!r&&O(e)}return R("touchstart",(function(e){2!==_&&_!==E&&(0===_&&d(S,e),f(null),q("dcg-tapstart",e))})),R("touchmove",(function(e){_===S&&q("dcg-tapmove",e)})),R("touchcancel",(function(e){_===S&&(q("dcg-tapcancel",e),0===e.originalEvent.touches.length&&h(e))})),R("touchend",(function(e){_===S&&(q("dcg-tapend",e),0===e.originalEvent.touches.length&&h(e))})),i(document).on("mousedown",(function(e){if(s("document.on:"+e.type),1!==e.button&&2!==e.button){if(_===S||_===E||F())return!i(e.target).is("input, textarea, select")&&O(e.target)&&e.preventDefault(),void s("abort mousedown: "+_+":"+F());d(2,e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],q("dcg-tapstart",e)}})),i(document).ready((function(){i(document).on("mousedown",(function(e){if(s("document.on:"+e.type),B(e.target)){e.preventDefault();try{var t,r=window.getSelection();1!==r.rangeCount||(t=r.getRangeAt(0)).startContainer===t.endContainer&&i(t.startContainer).closest(".dcg-text-selectable").length&&r.removeAllRanges()}catch(e){}}}))})),i(document).on("mouseleave",(function(e){s("document.on:"+e.type),0===_&&(F()?s("abort mouseleave: "+_+":"+F()):f(null))})),i(document).on("mousemove",(function(e){s("document.on:"+e.type),1!==e.button&&2!==e.button&&_!==S&&_!==E&&(F()?s("abort mousemove: "+_+":"+F()):(f(e.target),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],q("dcg-tapmove",e)))})),i(document).on("mouseup",(function(e){s("document.on:"+e.type),1!==e.button&&2!==e.button&&2===_&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],q("dcg-tapend",e),h(e))})),i(document).on("keydown",(function(e){if(s("document.on:"+e.type),(a.lookup(e)===a.ENTER||a.lookup(e)===a.SPACEBAR)&&O(e.target)&&3!==_){if(i(e.target).is('a:not([ontap]), button, input, textarea, select, [role="textbox"], [contenteditable="true"]'))return;e.preventDefault(),d(3,e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],q("dcg-tapstart",e)}})),i(document).on("keyup",(function(e){s("document.on:"+e.type),a.lookup(e)!==a.ENTER&&a.lookup(e)!==a.SPACEBAR||!O(e.target)||3===_&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],q("dcg-tapend",e),h(e))})),{monitor:function(e){i(e).addClass("dcg-tap-container"),i(e).addClass(l),n&&(t&&t.remove(),t=i('<div style="position:absolute;bottom:10px;right:10px;"><textarea rows="30" cols="40"></textarea><div id="dcg-touchtracking-debug-copy" class="dcg-btn-blue">COPY LOGS</div></div>'),r=t.find("textarea"),i(e).append(t),i("#dcg-touchtracking-debug-copy")[0].addEventListener("mousedown",(function(){r[0].select(),document.execCommand("copy")}),!0),s("monitor touches"))},ignore:function(e){i(e).addClass("dcg-no-touchtracking")},isTapActive:function(){return 0!==_},elIsFocusable:p}})),i("lib/conditional_blur",["require","exports","touchtracking","jquery"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e;document.activeElement&&(e=n(document.activeElement),r.elIsFocusable(e)&&n(document.activeElement).trigger("blur"))}})),i("lib/state-stack",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n.prototype.clear=function(){this._stack=[],this._stackPointer=-1},n.prototype.getState=function(){return this._stack[this._stackPointer]},n.prototype.serializeForBugsnag=function(){function e(e){try{return JSON.stringify(e,null,2)}catch(e){return"[[could not jsonify]]"}}return{currentState:e(this._stack[this._stackPointer]),undoState:e(this._stack[this._stackPointer-1]),redoState:e(this._stack[this._stackPointer+1])}},n.prototype.addState=function(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1},n.prototype.replaceState=function(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),0===this._stack.length?(this._stack.push(e),this._stackPointer=0):this._stack[this._stackPointer]=e},n.prototype.canUndo=function(){return 0<this._stackPointer},n.prototype.canRedo=function(){return this._stackPointer<this._stack.length-1},n.prototype.undo=function(){this.canUndo()&&--this._stackPointer},n.prototype.redo=function(){this.canRedo()&&(this._stackPointer+=1)},n);function n(e){void 0===e&&(e=20),this.clear(),this._sizeLimit=e}t.default=r})),i("graphing/viewport",["require","exports"],(function(e,t){"use strict";function r(e,t){return e<e*(1-1e-8)+1e-8*t&&1e-300<t-e&&t-e<1e300}Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var n=(i.fromObject=function(e){return new i(e.xmin,e.xmax,e.ymin,e.ymax)},i.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},i.prototype.equals=function(e){return this.xmin===e.xmin&&this.ymin===e.ymin&&this.xmax===e.xmax&&this.ymax===e.ymax},i.prototype.isXValid=function(){return r(this.xmin,this.xmax)},i.prototype.isYValid=function(){return r(this.ymin,this.ymax)},i.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},i.prototype.isSquare=function(e){return Math.abs(e.height-e.width*this.aspectRatio())<1},i.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},i.prototype.squareXAxis=function(e){var t=this.xmax-this.xmin,r=this.ymax-this.ymin,n=this.xmin+t/2,o=r/e.height*e.width;return new i(n-o/2,n+o/2,this.ymin,this.ymax)},i.prototype.squareYAxis=function(e){var t=this.xmax-this.xmin,r=this.ymax-this.ymin,n=this.ymin+r/2,o=t/e.width*e.height;return new i(this.xmin,this.xmax,n-o/2,n+o/2)},i.prototype.squareCrop=function(e){return this.aspectRatio()>e.height/e.width?this.squareYAxis(e):this.squareXAxis(e)},i.prototype.polarDiameter=function(){var e=Math.abs(this.xmax),t=Math.abs(this.xmin),r=Math.abs(this.ymax),n=Math.abs(this.ymin);return 1.5*Math.max(e,t,r,n)},i.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},i.prototype.smallestR=function(){return this.xmin<=0&&0<=this.xmax&&this.ymin<=0&&0<=this.ymax?0:this.xmin<=0&&0<=this.xmax?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&0<=this.ymax?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},i);function i(e,t,r,n){void 0===e&&(e=-10),void 0===t&&(t=10),void 0===r&&(r=-10),void 0===n&&(n=10),this.xmin=e,this.xmax=t,this.ymin=r,this.ymax=n}t.Viewport=n})),i("core/graphing-calc/migrations/0",["require"],(function(e){"use strict";var t={expression:!0,table:!0,image:!0,folder:!0,text:!0};function r(e){return e.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]="latex"===n?r(e[n]):"values"===n?e[n].map(r):e[n]);return t}function i(e){var i,o=function(e){if(e.type){if(t.hasOwnProperty(e.type))return e.type;throw new Error("Invalid item type: '"+e.type+"'.")}return void 0!==e.text?"text":void 0!==e.columns||void 0!==e.headings?"table":"expression"}(e),a={};switch(o){case"expression":for(i in e)e.hasOwnProperty(i)&&(a[i]="latex"===i?r(e[i]):e[i]);return a.type=o,a;case"table":for(i in e)e.hasOwnProperty(i)&&(a[i]="columns"===i?e[i].map(n):e[i]);return a.type=o,a;case"image":for(i in e)e.hasOwnProperty(i)&&(a[i]="width"===i||"height"===i||"x"===i||"y"===i?r(e[i]):e[i]);return a.type=o,a;case"text":case"folder":for(i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);return a.type=o,a}}var o={none:"NONE",both:"BOTH",positive:"POSITIVE"};return function(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&"xAxisArrows"!==r&&"yAxisArrows"!==r&&(t[r]=e[r]);return t.xAxisArrowMode=o[e.xAxisArrows||"none"],t.yAxisArrowMode=o[e.yAxisArrows||"none"],t}(e.graph),t.expressions={list:e.expressions.list.map(i)},t.version=0,t}})),i("core/graphing-calc/migrations/1",["require"],(function(e){"use strict";function t(e){return e.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function r(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="latex"===n?t(e[n]):"values"===n?e[n].map(t):e[n]);return r}function n(e){var n,i=e.type,o={};switch(i){case"expression":for(n in e)e.hasOwnProperty(n)&&(o[n]="latex"===n?t(e[n]):e[n]);return o;case"table":for(n in e)e.hasOwnProperty(n)&&(o[n]="columns"===n?e[n].map(r):e[n]);return o;case"image":for(n in e)e.hasOwnProperty(n)&&(o[n]="width"===n||"height"===n||"x"===n||"y"===n?t(e[n]):e[n]);return o;case"text":case"folder":for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o;default:throw new Error("Unexpected expression type: "+i)}}return function(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(n)},t.version=1,t}})),i("core/graphing-calc/migrations/2",["require","core/lib/color-helpers"],(function(e){"use strict";var t=e("core/lib/color-helpers").colors;function r(e){switch(e){case"#C0504D":return t.RED;case"#4F81BD":return t.BLUE;case"#9BBB59":return t.GREEN;case"#8064A2":return t.PURPLE;case"#F79646":return t.ORANGE;case"#000000":return t.BLACK;default:return e}}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]="color"===n?r(e[n]):e[n]);return t}function i(e){var t,i=e.type,o={};switch(i){case"expression":for(t in e)e.hasOwnProperty(t)&&(o[t]="color"===t?r(e[t]):e[t]);return o;case"table":for(t in e)e.hasOwnProperty(t)&&(o[t]="columns"===t?e[t].map(n):e[t]);return o;case"image":case"text":case"folder":for(t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o;default:throw new Error("Unexpected expression type: "+i)}}return function(e){if(1<e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(i)},t.version=2,t}})),i("core/graphing-calc/migrations/3",["require"],(function(e){"use strict";function t(e){if("string"==typeof e)return e;if(void 0===e)return"";var t=e+"";return(t=t.replace(/1e\+?([-\d]+)/,"10^{$1}")).replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}function r(e){var r,n=e.type,i={};switch(n){case"expression":for(r in e)e.hasOwnProperty(r)&&(i[r]="sliderMax"===r||"sliderMin"===r||"sliderInterval"===r?t(e[r]):"domain"===r?{max:t(e[r].max),min:t(e[r].min)}:e[r]);return i.hasOwnProperty("sliderMin")&&void 0===i.sliderInterval&&(i.sliderInterval=""),i;case"image":case"table":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i;default:throw new Error("Unexpected expression type: "+n)}}return function(e){if(2<e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=3,t}})),i("core/graphing-calc/migrations/4",["require"],(function(e){"use strict";function t(e){switch(e){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return e}}function r(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="style"===n?t(e[n]):e[n]);return r}function n(e){var n,i=e.type,o={};switch(i){case"expression":for(n in e)e.hasOwnProperty(n)&&(o[n]="style"===n?t(e[n]):e[n]);return o;case"table":for(n in e)e.hasOwnProperty(n)&&(o[n]="columns"===n?e[n].map(r):e[n]);return o;case"image":case"text":case"folder":for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o;default:throw new Error("Unexpected expression type: "+i)}}return function(e){if(3!==e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(n)},t.version=4,t}})),i("core/graphing-calc/validate-state",["require","exports","core/lib/deepCopy"],(function(e,t,r){"use strict";function n(e,t){var r=parseFloat(t);return r!==Math.floor(r)?e:Math.max(e,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateState=void 0,t.validateState=function(e){var t=r.default(e);return function(e){for(var t,r,i,o,a=function(e){for(var t=0,r=0,i=e;r<i.length;r++){var o=i[r];if(t=n(t,o.id),"table"===o.type)for(var a=0,s=o.columns;a<s.length;a++)n(t,s[a].id)}return t}(e)+1,s={},l=0,c=e;l<c.length;l++){var u=c[l];if(o=void 0,(i=u).slider&&("number"==typeof(o=i.slider).min&&(o.min=""+o.min),"number"==typeof o.max&&(o.max=""+o.max),"number"==typeof o.step&&(o.step=""+o.step)),"string"!=typeof i.id&&(i.id=""+i.id),"folder"===u.type)t=u.id,s[u.id]&&(u.id=""+a,a+=1),r=u.id,s[u.id]=!0,u.hasOwnProperty("folderId")&&delete u.folderId;else{if(void 0!==t&&u.folderId===t?u.folderId=r:(u.folderId&&(u.folderId=""),r=t=void 0),"table"===u.type)for(var d=0,p=u.columns;d<p.length;d++){var h=p[d];s[h.id]&&(h.id=""+a,a+=1),s[h.id]=!0}s[u.id]&&(u.id=""+a,a+=1),s[u.id]=!0}}}(t.expressions.list),t}})),i("core/graphing-calc/migrations/back-migration",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(9!==e.version)throw new Error("Unexpected version: "+e.version);var t=!1;e.graph&&e.graph.degreeMode&&(t=!0);var n=e.expressions.list.map((function(e){if("expression"!==e.type)return e;var n,i,o,a=r.__assign(r.__assign({},e),{labelOrientation:void 0});return function(e,t,r){if(e.labelOrientation)switch(t.extendedLabelOrientation=e.labelOrientation,e.labelOrientation){case"default":case"center":case"center_auto":case"auto_center":t.labelOrientation="default";break;case"above":case"above_auto":case"above_left":case"above_right":t.labelOrientation="above";break;case"below":case"below_auto":case"below_left":case"below_right":t.labelOrientation="below";break;case"left":case"auto_left":t.labelOrientation="left";break;case"right":case"auto_right":t.labelOrientation="right"}else delete t.labelOrientation;if(r&&"90"===e.labelAngle||!r&&"\\frac{\\pi}{2}"===e.labelAngle)switch(t.verticalLabel=!0,delete t.labelAngle,t.labelOrientation){case"right":t.labelOrientation="above";break;case"left":t.labelOrientation="below";break;case"above":t.labelOrientation="left";break;case"below":t.labelOrientation="right"}}(e,a,t),n=a,"9"!==(o=e.pointSize)&&"20"!==o||(i=void 0,(i=n.vizProps?r.__assign({},n.vizProps):{}).dotplotSize="9"===o?"small":"large",n.vizProps=i),a}));return{version:8,graph:e.graph,randomSeed:e.randomSeed,expressions:{list:n}}}})),i("core/graphing-calc/migrations/5",["require","exports"],(function(e,t){"use strict";function r(e){var t={};for(var r in e)e.hasOwnProperty(r)&&"showPoints"!==r&&"showLine"!==r&&(t[r]=e[r]);return void 0===e.showPoints&&void 0===e.showLine||(e.showPoints&&e.showLine?t.columnMode="POINTS_AND_LINES":e.showPoints?t.columnMode="POINTS":e.showLine?t.columnMode="LINES":(t.hidden=!0,t.columnMode="POINTS")),t}function n(e){var t,n=e.type,i={};switch(n){case"expression":for(t in void 0===e.hidden?e.hasOwnProperty("graphed")?i.hidden=!e.graphed:e.hasOwnProperty("userRequestedGraphing")?i.hidden="never"===e.userRequestedGraphing:i.hidden=!1:i.hidden=e.hidden,e)e.hasOwnProperty(t)&&"graphed"!==t&&"userRequestedGraphing"!==t&&"hidden"!==t&&"slider"!==t&&("color"!==t?"style"!==t?"sliderInterval"!==t?i[t]=e[t]:i.sliderInterval="undefined"===e.sliderInterval?"":e.sliderInterval:i.style="normal"===e.style?"SOLID":e.style:"object"==typeof e.color?i.color=e.color.value:i.color=e.color);return i;case"table":if(e.headings||e.columns){var o=e.headings?e.headings:e.columns;if(i.columns=o.map(r),e.rows)for(var a=0;a<i.columns.length;a++){var s=i.columns[a];s.values=[];for(var l=0;l<e.rows.length;l++)s.values.push(e.rows[l][a])}}for(t in e)e.hasOwnProperty(t)&&"rows"!==t&&"headings"!==t&&"columns"!==t&&(i[t]=e[t]);return i;case"image":case"text":case"folder":for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i;default:throw new Error("Unexpected expression type: "+n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateState=void 0,t.migrateState=function(e){if(4!==e.version)throw new Error("Unexpected version: "+e.version);return{version:5,graph:function(e){var t,r={};for(var n in e)if(e.hasOwnProperty(n))switch(t=e[n],n){case"showAxes":r.showXAxis=t,r.showYAxis=t;break;case"showLabels":r.xAxisNumbers=t,r.yAxisNumbers=t,r.polarNumbers=t;break;case"labelXMode":r.xAxisStep="pi"===t?Math.PI:0;break;case"labelYMode":r.yAxisStep="pi"===t?Math.PI:0;break;default:r[n]=t}return r}(e.graph),expressions:{list:e.expressions.list.map(n)}}}})),i("core/graphing-calc/migrations/6",["require","exports","core/lib/deepCopy","underscore","core/math/sliders","core/math/evaluate-single-expression"],(function(e,t,r,n,i,o){"use strict";function a(e){var t={};for(var r in e)if(e.hasOwnProperty(r)&&"style"!==r)if("values"===r&&(t[r]=e[r].map((function(e){return e?""+e:""}))),"columnMode"!==r||e.hasOwnProperty("points")||e.hasOwnProperty("lines"))t[r]=e[r];else switch(e[r]){case"LINES":t.points=!1,t.lines=!0;break;case"POINTS_AND_LINES":t.points=!0,t.lines=!0;break;default:t.points=!0,t.lines=!1}return t.hasOwnProperty("pointStyle")||(t.pointStyle="POINT"),t.hasOwnProperty("lineStyle")||(t.lineStyle="SOLID"),t.id=""+t.id,t}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateState=void 0;var s={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};function l(e){var t=function(e){if(!((t=e).length<2)&&"`"===t[0]&&"`"===t[t.length-1])return{raw:e,parts:[e]};for(var t,r,n,i="({"+["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"].join("})|({")+"})",o=new RegExp(i,"g"),a=[],s=0;n=o.exec(e);){s<(r=n.index)&&a.push(e.substr(s,r-s));var l=n[0],c=l.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");a.push({symbol:c,str:l}),s=n.index+l.length}return s<e.length&&a.push(e.substr(s)),{raw:e,parts:a}}(e),r="";return n.each(t.parts,(function(e){r+="object"==typeof e&&e.str?"$"+e.str:e})),r}function c(e,t,r,c){var u,d,p,h,g,f,m,y,v,b,x,w=e.type,S={};switch(w){case"folder":for(u in e)e.hasOwnProperty(u)&&("memberIds"===u||(S[u]=e[u]));break;case"expression":for(u in e)e.hasOwnProperty(u)&&("style"!==u||e.hasOwnProperty("pointStyle")||e.hasOwnProperty("lineStyle")?(s.hasOwnProperty(u)?(S.slider=S.slider||{},S.slider[s[u]]=e[u]):S[u]=e[u],e.label&&(S.label=l(e.label))):(d=e[u],n.contains(["POINT","OPEN","CROSS"],d)?(S.pointStyle=d,S.lineStyle="SOLID"):n.contains(["SOLID","DASHED","DOTTED"],d)?(S.pointStyle="POINT",S.lineStyle=d):(S.pointStyle="POINT",S.lineStyle="SOLID")));S.latex&&S.slider&&!S.slider.isPlaying&&(h=c,2===(b=(p=S).latex.split("=")).length&&(g=o.default(b[1],h),isFinite(g)&&(f=p.slider.hardMin?o.default(p.slider.min||"-10",h):void 0,m=p.slider.hardMax?o.default(p.slider.max||"10",h):void 0,y=p.slider.step?o.default(p.slider.step,h):void 0,(v=i.determineWhichLimitsAreCompatibleWithValue({target:g,step:y,hardMin:f,hardMax:m})).min||(delete p.slider.hardMin,delete p.slider.min),v.max||(delete p.slider.hardMax,delete p.slider.max),v.step||delete p.slider.step))),S.hasOwnProperty("fillOpacity")||(S.fillOpacity=.4),!1===S.label&&(S.label=""),S.labelSize||(S.labelSize="medium"),S.labelOrientation||(S.labelOrientation="default"),S.verticalLabel||(S.verticalLabel=!1),S.interactiveLabel||(S.interactiveLabel=!1);break;case"image":for(u in e)e.hasOwnProperty(u)&&"x"!==u&&"y"!==u&&(S[u]=e[u]);S.center="\\left("+(e.x||"0")+","+(e.y||"0")+"\\right)",S.angle=e.angle||"0",S.foreground=!!S.foreground;break;case"text":for(u in e)e.hasOwnProperty(u)&&(S[u]=e[u]);break;case"table":for(u in e)e.hasOwnProperty(u)&&(S[u]="columns"===u?e[u].map(a):e[u]);break;default:throw new Error("Unexpected expression type: "+w)}return S.id=""+S.id,"folder"===e.type?(t.folderId=S.id,t.memberIds=e.memberIds,S.folderId=""):(x=r[S.id],t.memberIds&&t.memberIds[x]?S.folderId=t.folderId:(S.folderId="",t.folderId=void 0,t.memberIds=void 0)),S}t.migrateState=function(e){if(5!==e.version)throw new Error("Unexpected version: "+e.version);var t=!(!e.graph||!e.graph.degreeMode),n=e.expressions.list,i=-1,o={},a={},s={};return{version:6,graph:e.graph,expressions:{list:n.map((function(e){return o[e.id]?(-1===i&&(i=function(e){for(var t=0,r=/^[0-9]+$/,n=e.length-1;0<=n;n--){var i,o=e[n],a=o.id;if(r.test(a)&&t<(i=parseInt(a,10))&&(t=i),"table"===o.type&&o.columns)for(var s=o.columns.length-1;0<=s;s--)a=o.columns[s].id,r.test(a)&&t<(i=parseInt(a,10))&&(t=i)}return t+1}(n)),a[i]=e.id,(e=r.default(e)).id=i+"",i+=1):a[e.id]=e.id,o[e.id]=!0,c(e,s,a,t)}))}}}})),i("core/graphing-calc/migrations/7",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(6!==e.version)throw new Error("Unexpected version: "+e.version);var t=e.expressions.list.map((function(e){if("expression"===e.type&&e.domain){var t=r.__assign(r.__assign({},e),{parametricDomain:{min:e.domain.min,max:e.domain.max}});return delete t.domain,t}return e}));return{version:7,randomSeed:e.randomSeed,graph:e.graph,expressions:{list:t}}}})),i("core/lib/random-seed",["require","exports","core/lib/md5"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(e);else{if("undefined"==typeof msCrypto)return r(Date.now().toString()+Math.random().toString());msCrypto.getRandomValues(e)}return Array.prototype.slice.call(e).map((function(e){return 1===(t=e.toString(16)).length?"0"+t:t;var t})).join("")}})),i("core/graphing-calc/migrations/8",["require","exports","tslib","core/lib/random-seed","core/lib/deepCopy"],(function(e,t,r,n,i){"use strict";function o(e){var t=e.split("_");return 2===t.length&&t[1]&&1===t[1].length?t[0]+"_{"+t[1]+"}":e}function a(e){return(e=i.default(e)).rules||!e.assignment&&!e.expression||(e.rules=[{id:"1",assignment:e.assignment||"",expression:e.expression||""}]),delete e.assignment,delete e.expression,e}function s(e){return e.replace(/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g,(function(e){switch(e){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}}))}function l(e){var t=e.latex,n=e.values,i=r.__assign({},e);return t&&(i.latex=s(t),i.latex=o(i.latex)),n&&(i.values=n.map((function(e){return e?s(e):""}))),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(7!==e.version)throw new Error("Unexpected version: "+e.version);var t=e.expressions.list.map((function(e){if("image"===e.type){var t,n=r.__assign(r.__assign({},e),{opacity:""});for(var c in e.hasOwnProperty("stringOpacity")?n.opacity=e.stringOpacity:e.hasOwnProperty("opacity")?n.opacity=e.opacity+"":delete n.opacity,e.clickableInfo&&(n.clickableInfo=a(e.clickableInfo)),delete n.stringOpacity,e)"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c||(t=e[c])&&(n[c]=s(t));return n}if("expression"!==e.type)return"table"===e.type?(u=e).columns?r.__assign(r.__assign({},u),{columns:u.columns.map(l)}):u:e;var u;if(n=r.__assign(r.__assign({},e),{fillOpacity:"",lineStyle:"SOLID"}),"SINGLE_PIXEL"===e.lineStyle?n.lineWidth="1":e.hasOwnProperty("lineStyle")?n.lineStyle=e.lineStyle:delete n.lineStyle,n.hasOwnProperty("lineWidth")||(n.lineWidth=""),n.hasOwnProperty("lineOpacity")||(n.lineOpacity=""),n.hasOwnProperty("pointOpacity")||(n.pointOpacity=""),n.hasOwnProperty("pointSize")||(n.pointSize=""),n.hasOwnProperty("colorLatex")||(n.colorLatex=""),"string"==typeof e.latex&&(n.latex=s(e.latex)),e.latex&&(n.latex=s(e.latex)),e.hasOwnProperty("stringFillOpacity")?n.fillOpacity=e.stringFillOpacity:e.hasOwnProperty("fillOpacity")?n.fillOpacity=e.fillOpacity+"":delete n.fillOpacity,n.slider&&e.slider&&e.slider.newLoopMode&&(n.slider=i.default(n.slider),n.slider.loopMode=e.slider.newLoopMode,delete n.slider.newLoopMode),n.residualVariable&&(n.residualVariable=o(n.residualVariable)),n.regressionParameters)for(var d in n.regressionParameters={},e.regressionParameters){var p=o(d),h=e.regressionParameters[d];n.regressionParameters[p]=h}return e.clickableInfo&&(n.clickableInfo=a(e.clickableInfo)),n}));return{version:8,randomSeed:e.randomSeed||n.default(),graph:e.graph,expressions:{list:t}}}})),i("core/graphing-calc/migrations/9",["require","exports","tslib","core/lib/random-seed"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(8!==e.version)throw new Error("Unexpected version: "+e.version);var t=!1;e.graph&&e.graph.degreeMode&&(t=!0);var i=e.expressions.list.map((function(e){if("expression"!==e.type)return e;var n=r.__assign({},e);return function(e,t,r){if(e.verticalLabel)switch(delete t.verticalLabel,t.labelAngle=r?"90":"\\frac{\\pi}{2}",e.labelOrientation){case"above":t.labelOrientation="right";break;case"below":t.labelOrientation="left";break;case"left":t.labelOrientation="above";break;case"right":t.labelOrientation="below"}e.extendedLabelOrientation&&(t.labelOrientation=e.extendedLabelOrientation,delete t.extendedLabelOrientation)}(e,n,t),function(e,t){if(e.vizProps)switch(e.vizProps.dotplotSize){case"small":t.pointSize="9";break;case"large":t.pointSize="20"}var n;e.vizProps&&(delete(n=r.__assign({},e.vizProps)).dotplotSize,Object.keys(n).length?t.vizProps=n:delete t.vizProps)}(e,n),n}));return{version:9,randomSeed:e.randomSeed||n.default(),graph:e.graph,expressions:{list:i}}}})),i("core/graphing-calc/migrate-state",["require","exports","./migrations/0","./migrations/1","./migrations/2","./migrations/3","./migrations/4","core/graphing-calc/validate-state","./migrations/back-migration","./migrations/5","./migrations/6","./migrations/7","./migrations/8","./migrations/9"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.migrateToPersisted=t.migrateToLatest=t.currentVersion=t.persistedVersion=void 0;var g=[r,n,i,o,a,c.migrateState,u.migrateState,d.default,p.default,h.default];function f(e){if(e.version>t.currentVersion)return"undefined"!=typeof console&&console.warn&&console.warn("Loading saved state with version "+e.version+" but last known version is "+t.currentVersion+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),s.validateState(e);if(e.hasOwnProperty("version")&&!g[e.version])return"undefined"!=typeof console&&console.warn&&console.warn("State has invalid version "+e.version+". If a version is present, it should be a non-negative integer less than or equal to "+t.currentVersion+"."),s.validateState(e);for(e.hasOwnProperty("version")||(e=g[0](e));e.version<t.currentVersion;)e=g[e.version+1](e);return s.validateState(e)}t.persistedVersion=8,t.currentVersion=9,t.migrateToLatest=f,t.migrateToPersisted=function(e){return l.default(f(e))}})),i("core/types/line-opacity",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT=void 0,t.DEFAULT=.9})),i("lib/smart-slider-defaults",["require","exports","core/math/baseparser","core/types/line-width","core/types/point-size","core/types/point-opacity","core/types/line-opacity","core/types/opacity"],(function(e,t,r,n,i,o,a,s){"use strict";function l(e){return{value:"0",min:"0",max:e.degreeMode?"360":"2\\pi"}}Object.defineProperty(t,"__esModule",{value:!0});var c={latex:t.checkVariableForBoundRestrictions=t.computeDefaults=void 0,polarDomainMin:void 0,polarDomainMax:void 0,parametricDomainMin:void 0,parametricDomainMax:void 0,pointSize:function(){return{value:i.DEFAULT+"",min:"0",max:"10"}},labelAngle:l,labelSize:function(){return{value:"1",min:"0",max:"5"}},lineWidth:function(){return{value:n.DEFAULT+"",min:"0",max:"10"}},fillOpacity:function(){return{value:s.DEFAULT+"",min:"0",max:"1"}},lineOpacity:function(){return{value:a.DEFAULT+"",min:"0",max:"1"}},pointOpacity:function(){return{value:o.DEFAULT+"",min:"0",max:"1"}},sliderMin:void 0,sliderMax:void 0,sliderStep:void 0,residualVariable:void 0,tableHeader:void 0,tableCellValue:void 0,imageOpacity:function(){return{value:"1",min:"0",max:"1"}},imageCenter:void 0,imageHeight:function(){return{value:"10",min:"-10",max:"10"}},imageWidth:function(){return{value:"10",min:"-10",max:"10"}},imageAngle:l,simulationFPS:function(){return{value:"60",min:"0",max:"60"}}},u={rgb:{paramBounds:function(e){return{value:"0",min:"0",max:"255",step:"1"}}},hsv:{paramBounds:function(e){return 0===e?{value:"0",min:"0",max:"360",step:"1"}:{value:"0.5",min:"0",max:"1"}}}};function d(e,t,r){var n=t.parsed,i=t.location;if("Identifier"===n.type&&n._symbol===e){var o=c[i];if(!o)return;return[o(r)]}"Assignment"===n.type&&(n=n._expression);var a=[];if("FunctionCall"===n.type){var s,l=n._symbol;return u.hasOwnProperty(l)&&(s=u[l],n.args.forEach((function(t,r){var n;"Identifier"!==t.type||t._symbol!==e||(n=s.paramBounds(r))&&a.push(n)}))),a}}t.computeDefaults=function(e,t,n){for(var i=e.map((function(e){return{location:e.location,parsed:r.parse(e.latex)}})),o={},a=0,s=t;a<s.length;a++)for(var l=s[a],c=0,u=i;c<u.length;c++){var p=d(l,u[c],n);p&&p.length&&(o[l]=p[0])}return o},t.checkVariableForBoundRestrictions=d})),i("graphing-calc/models/focus",["require","exports","./expression","./list"],(function(e,t,r,n){"use strict";function i(e,t,r){o(e,a(e,t,r))}function o(e,t){var i;(e.focusLocation=t)&&"settings"!==t.type&&"editable-label"!==t.type&&"add-item-btn"!==t.type&&"add-expression-btn"!==t.type&&"add-table-btn"!==t.type&&"add-folder-btn"!==t.type&&"add-simulation-btn"!==t.type&&"add-image-btn"!==t.type&&"edit-list-toggle"!==t.type&&"hide-expression-list-btn"!==t.type&&"show-expression-list-btn"!==t.type&&"search-expressions"!==t.type&&(i=e.getItemModel(t.id),"expression-menu"!==t.type?(n.setSelected(e.getListModel(),i),i&&"expression"===i.type&&r.setSliderIsPlaying(i,!1)):n.setSelected(e.getListModel(),void 0))}function a(e,t,r){var n=e.getItemModel(t);if(n)switch(n.type){case"expression":return{type:e.isInEditListMode()?"readonly-expression":n.type,id:t};case"folder":case"text":return{type:n.type,id:t};case"table":var i={row:1,column:0},o=!1;return r&&("cell"===r.location?i={row:r.row,column:r.column}:"end"===r?i={row:n.columnModels[0].cells.length,column:0}:"start"===r?i={row:0,column:0}:"container"===r&&(o=!0)),o?{type:"table-container",id:t}:{type:n.type,id:t,location:i};case"image":return{type:n.type,id:t,location:"name"};case"simulation":return{type:n.type,id:t,location:"fps"};default:return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.focusTableCell=t.getFocusedItem=t.addFocusForKeypad=t.computeFocusLocationForItem=t.setFocusLocation=t.moveFocusToItem=void 0,t.moveFocusToItem=i,t.setFocusLocation=o,t.computeFocusLocationForItem=a,t.addFocusForKeypad=function(e){var t=e.getSelectedItem();if(t&&"expression"===t.type)i(e,t.id);else if(!t||"table"!==t.type||!e.focusLocation){for(var r,o=e.getFirstFullyVisibleItem(),a=e.getListModel();o&&"expression"!==o.type;)o=n.findNextSelectableItem(a,o.index);o?i(e,o.id):(r=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),n.insertItemAtEnd(e.getListModel(),r),i(e,r.id))}},t.getFocusedItem=function(e){var t=e.focusLocation;if(t&&"settings"!==t.type&&"editable-label"!==t.type&&"add-item-btn"!==t.type&&"add-expression-btn"!==t.type&&"add-table-btn"!==t.type&&"add-simulation-btn"!==t.type&&"add-folder-btn"!==t.type&&"add-image-btn"!==t.type&&"edit-list-toggle"!==t.type&&"hide-expression-list-btn"!==t.type&&"show-expression-list-btn"!==t.type&&"search-expressions"!==t.type)return e.getItemModel(t.id)},t.focusTableCell=function(e,t,r){o(e,{type:"table",id:t,location:r})}})),i("graphing-calc/actions/keyboard",["require","exports","browser","lib/conditional_blur","../models/table","../models/focus","../models/list","../models/abstract-item"],(function(e,t,r,n,i,o,a,s){"use strict";function l(e){var t=e.getSelectedItem();t&&(e.inAudioTraceMode()||0!==t.index&&(a.selectPrevItem(e.getListModel()),(t=e.getSelectedItem())&&o.moveFocusToItem(e,t.id,"end")))}function c(e){var t,r;e.inAudioTraceMode()||(a.selectNextItem(e.getListModel())||e.isInEditListMode()||(t=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),a.insertItemAtEnd(e.getListModel(),t),a.setSelected(e.getListModel(),t)),(r=e.getSelectedItem())&&o.moveFocusToItem(e,r.id,"start"))}function u(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();if(t&&(1!==e.getItemCount()||"expression"!==t.type)){var n="text"===t.type,i=a.getParentFolderModel(t);if(i){var l=e.getNumberOfItemsInFolder(i.id);if(t.index===i.index+l)return void s.setFolderId(t,"")}h(e),n&&r.IS_IPAD&&r.IS_IN_IFRAME?a.setSelected(e.getListModel(),void 0):(t=e.getSelectedItem())&&o.moveFocusToItem(e,t.id,"end")}}}function d(e){var t;e.isInEditListMode()||(t=e.getSelectedItem())&&(1===e.getItemCount()&&"expression"===t.type||(g(e),(t=e.getSelectedItem())&&o.moveFocusToItem(e,t.id,"start")))}function p(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();if(t){if("text"===t.type&&r.IS_IPAD&&r.IS_IN_IFRAME)return n.default(),void a.setSelected(e.getListModel(),void 0);if(a.getMissingVariablesForItem(t).length&&e.areSlidersEnabled())return e.createSlidersForItem(t.id,a.getMissingVariablesForItem(t).concat(""));var i=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),l=t.index+1;"folder"===t.type&&t.collapsed&&(l+=e.getNumberOfItemsInFolder(t.id)),a.insertItemAtIndex(e.getListModel(),i,l),a.setSelected(e.getListModel(),i),"folder"!==t.type||t.collapsed?"folder"!==t.type&&t.folderId&&s.setFolderId(i,t.folderId):s.setFolderId(i,t.id),(t=e.getSelectedItem())&&o.moveFocusToItem(e,t.id)}}}function h(e){var t,r,n=f(e),i=e.getListModel();n&&(t=a.findPrevSelectableItem(i,n.index),e._removeExpressionSynchronously(n),t||(r=a.getFirstSelectableItem(i))&&(t=r),a.setSelected(i,t))}function g(e){var t,r,n=f(e),i=e.getListModel();n&&(t=a.findNextSelectableItem(i,n.index),e._removeExpressionSynchronously(n),t||(r=a.getLastSelectableItem(i))&&(t=r),a.setSelected(i,t))}function f(e){var t=e.getSelectedItem();return"folder"==(null==t?void 0:t.type)&&t.collapsed&&t.selectedHiddenChild?t.selectedHiddenChild:t}Object.defineProperty(t,"__esModule",{value:!0}),t.downwardDeleteSelectedExpression=t.upwardDeleteSelectedExpression=t.onEnterPressed=t.onDeletePressed=t.onBackspacePressed=t.onDownPressed=t.onUpPressed=t.navigateTableByKey=void 0,t.navigateTableByKey=function(e,t,r){var n=e.getItemModel(t);if(n&&"table"===n.type){var a=n,s=i.getSelectedCell(a),h=s?s.row:-1,g=s?s.column:-1,f=a.columnModels,m=f[0].cells.length,y=f.length,v=function(r,n){-1===r?l(e):m<r?c(e):(-1===n?(n=y-1,r--):n===y&&(r++,n=0),o.focusTableCell(e,t,{row:r,column:n}))},b=function(r){2<m&&i.removeRow(a,h-1),o.focusTableCell(e,t,{row:r,column:g})},x=function(r){0===g||y<=2||(i.removeColumn(a,g),o.focusTableCell(e,t,{row:h,column:r}))};switch(r){case"Left":v(h,g-1);break;case"Right":v(h,g+1);break;case"Up":v(h-1,g);break;case"Down":v(h+1,g);break;case"Enter":if(m<=h)return p(e);if(0<g)return v(h+1,g);if(h===m-1){var w=i.getRowAutoFillValues(a,h);i.insertBlankRow(a,h);for(var S=0;S<w.length;S++)i.setCellLatex(a,{row:h+1,column:S},w[S]);return void o.focusTableCell(e,t,{row:h+1,column:g})}i.insertBlankRow(a,h),o.focusTableCell(e,t,{row:h+1,column:g});break;case"Backspace":0===h?0===g?u(e):g===y-1||1===g&&3===y?v(0,g-1):x(g-1):0!==g?v(h,g-1):h===m?v(h-1,g):b(h-1);break;case"Delete":0===h?0===g?d(e):g<y-1&&x(g):m<=h||b(h)}}},t.onUpPressed=l,t.onDownPressed=c,t.onBackspacePressed=u,t.onDeletePressed=d,t.onEnterPressed=p,t.upwardDeleteSelectedExpression=h,t.downwardDeleteSelectedExpression=g})),i("main/expression-zoom-helpers",["require","exports","core/lib/deepCopy"],(function(e,t,r){"use strict";function n(e){var t=1.2;return(e=r.default(e)).xmax<0&&e.xmin<0&&e.xmax/(e.xmin-e.xmax)<t&&(e.xmax=0),0<e.xmax&&0<e.xmin&&e.xmin/(e.xmax-e.xmin)<t&&(e.xmin=0),e.ymax<0&&e.ymin<0&&e.ymax/(e.ymin-e.ymax)<t&&(e.ymax=0),0<e.ymax&&0<e.ymin&&e.ymin/(e.ymax-e.ymin)<t&&(e.ymin=0),e}function i(e,t){var r=e.type,n=function(e,t){if("dotplot"!==e.type&&"histogram"!==e.type)return.5;var r=80*Math.max(1,e.xmax-e.xmin)/(e.binWidth?e.binWidth:1),n=.5*(t.screen.width-r)/r;return Math.max(.2,n)}(e,t),i="boxplot"===r?3:.5;e.xmin===e.xmax&&(e.xmin-=.5,e.xmax+=.5),e.ymin===e.ymax&&(e.ymin-=.5,e.ymax+=.5);var o,a,s,l,c,u=e.xmax-e.xmin,d=e.xmin-n*u,p=e.xmax+n*u,h=e.ymax-e.ymin;return l=e.ymin-i*h,s=e.ymax+i*h,"boxplot"!==(c=r)&&"dotplot"!==c&&"histogram"!=c||(o=(p-d)*(t.screen.height/t.screen.width))>e.ymax-e.ymin&&o<function(e){switch(e){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}(r)*(e.ymax-e.ymin)&&(s=(a=.5*(e.ymax+e.ymin))+.5*o,l=a-.5*o),{xmin:d,xmax:p,ymin:l,ymax:s}}function o(e,t){for(var r=1/0,o=-1/0,a=1/0,s=-1/0,l=0,c=e.length,u=0;u<c;u++){var d,p=n(e[u]);isFinite(p.xmax-p.xmin)&&isFinite(p.ymax-p.ymin)?((d=i(p,t)).xmin<r&&(r=d.xmin),d.xmax>o&&(o=d.xmax),d.ymin<a&&(a=d.ymin),d.ymax>s&&(s=d.ymax)):l+=1}if(l!==c)return{xmin:r,xmax:o,ymin:a,ymax:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRecommendedViewportForExpression=t.shouldExpressionZoomFit=t.padViewport=t.conditionalExpandViewport=void 0,t.conditionalExpandViewport=n,t.padViewport=i,t.shouldExpressionZoomFit=function(e,t){var r=o(e,t);if(!r)return!1;var n=t.mapx(r.xmin),i=t.mapx(r.xmax),a=t.mapy(r.ymin),s=t.mapy(r.ymax);return!(Math.abs(n)<=10&&Math.abs(s)<=10&&Math.abs(i-t.screen.width)<=10&&Math.abs(a-t.screen.height)<=10)},t.getRecommendedViewportForExpression=o})),i("main/layout-model",["require","exports","browser"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLayoutModel=t.getShiftedLayoutForCurrentLayout=void 0,t.getShiftedLayoutForCurrentLayout=function(e){switch(e){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}},t.defaultLayoutModel=function(e){return{keypadMinimized:!r.IS_TOUCH_DEVICE,keypadLayout:"mainNumbers",keypadFunctionsTab:"trig",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!e.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0}}})),i("main/settings-view-model",["require","exports","tslib","core/lib/label"],(function(e,t,r,n){"use strict";function i(e,t){var r,i=n.value(e,t);return(i.mantissa?i.mantissa.split("Ã").join("\\cdot")+"^{"+i.superscript+"}":2===(r=i.string.split("/")).length?"-"===r[0][0]?"-\\frac{"+r[0].slice(1)+"}{"+r[1]+"}":"\\frac{"+r[0]+"}{"+r[1]+"}":i.string).replace(/Ï/,"\\pi")}function o(e){return{xmin:i(e.xmin,e.xmax-e.xmin),xmax:i(e.xmax,e.xmax-e.xmin),ymin:i(e.ymin,e.ymax-e.ymin),ymax:i(e.ymax,e.ymax-e.ymin)}}function a(e,t){return 0===e?"":i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSettingsViewModel=t.limitLatex=t.formatStep=t.formatViewport=t.formatLatex=void 0,t.formatLatex=i,t.formatViewport=o,t.formatStep=a,t.limitLatex=function(e,t,n){var i=o(e);return r.__assign(r.__assign({},i),{xstep:a(t,e.xmax-e.xmin),ystep:a(n,e.ymax-e.ymin)})},t.defaultSettingsViewModel=function(){return{limitLatex:{xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:""}}}})),function(e,t){if("function"==typeof i&&i.amd)i("abraham",[],t);else{var r=t();for(var n in r)e[n]=r[n]}}(this,(function(){return r={},e.m=t=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22);t.map=function(e,t){var r=n.map(e,t);return e.warnings&&(r.warnings=e.warnings),r}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||u||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],o=i,a=s(i);function s(e){var t=e.sort((function(e,t){return t.length-e.length||t.localeCompare(e)})).join("|");return new RegExp("("+t+")","g")}t.getAutoOperator=function(e){for(var t,r=0,i="",o=0,a=e;o<a.length;o++){var s=a[o];if("terminal"!==s.type||!/[A-Za-z]/.test(s.value))break;i+=s.value,r++}return t=i.replace(n,"\\operatorname{$1}"),{modified:0<r&&t!==i,terminalCount:r,value:t}},t.containsValue=function(e){return-1!==o.indexOf(e.toLowerCase())},t.setOperatorNames=function(e){if(!Array.isArray(e))throw new Error("Operator names must be an array, got "+typeof e);for(var t=0,r=e;t<r.length;t++){var i=r[t];if("string"!=typeof i)throw new Error("Operator names must be strings, found "+typeof i)}n=s(o=e)},t.resetOperatorNames=function(){o=i,n=a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(14),o=r(15),a=r(16),s=r(0),l=r(23),c=r(25);function u(e){if(!c.isSixDotCells(e))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}t.nemethToLatex=function(e,r){return u(e),a.default(t.UnicodeBraille.toBrailleAscii(e),r)},t.latexToNemeth=function(e,r){return r&&r.operatorNames?n.setOperatorNames(r.operatorNames):n.resetOperatorNames(),s.map(i.default(e),t.UnicodeBraille.coerceToSixDotCells)},t.uebToLatex=function(e,r){return u(e),l.default(t.UnicodeBraille.toBrailleAscii(e),r)},t.latexToUeb=function(e,r){return r&&r.operatorNames?n.setOperatorNames(r.operatorNames):n.resetOperatorNames(),s.map(o.default(e),t.UnicodeBraille.coerceToSixDotCells)},t.UnicodeBraille={coerceToSixDotCells:c.coerceToSixDotCells,toBrailleAscii:c.toBrailleAscii,toExpandedBrailleAscii:c.toExpandedBrailleAscii},t.version="1.0.3"},function(e,t){},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;)e.unshift("..");return e}function n(e){return i.exec(e).slice(1)}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function o(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",n=!1,i=arguments.length-1;-1<=i&&!n;i--){var a=0<=i?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,n="/"===a.charAt(0))}return(n?"/":"")+(t=r(o(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var n=t.isAbsolute(e),i="/"===a(e,-1);return(e=r(o(e.split("/"),(function(e){return!!e})),!n).join("/"))||n||(e="."),e&&i&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=n(e),r=t[0],i=t[1];return r||i?r+(i=i&&i.substr(0,i.length-1)):"."},t.basename=function(e,t){var r=n(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return n(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.hash)throw e;return{_diagnostic:{expected:e.hash.expected,message:e.message,text:e.hash.text,token:e.hash.token},location:e.hash.loc}}},function(e,t,r){"use strict";function n(e){return{type:"command",value:e}}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=function(e){return{type:"terminal",value:e}},t.command=n,t.greek=function(e){return{type:"greek",value:e}},t.level=function(e){return{subscript:e._,superscript:e["^"],type:"level"}},t.processPrimes=function(e,t){var r=[],o=e.match(/'+/);if(null!==o)for(var a=o[0].length,s=0;s<a;s++)r.push(n("\\prime"));return i(r,t)},t.fraction=function(e,t){return{type:"fraction",numerator:e,denominator:t}},t.typeform=function(e,t){return{name:e,type:"typeform",value:t}},t.radical=function(e,t){return{type:"radical",index:t,radicand:e}},t.group=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(e,n){var i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M,I,C,L,P,T,A,O,D,F,q,N,R,B,j,V,z,U,G,K,H,W,$,Y,Q,X,Z=(H=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,81],W=[1,74],$=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,81],Y=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],Q={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,subscript_head:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT:70,COMPARISON:71,LEVEL_WITH_COMPARISON:72,ELLIPSIS:73,COLON:74,NUMBER:75,INFINITY:76,INTEGRAL:77,FACTORIAL:78,"&":79,PRIMES:80,"?":81,unknown:82,UNKNOWN:83,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT",71:"COMPARISON",72:"LEVEL_WITH_COMPARISON",73:"ELLIPSIS",74:"COLON",75:"NUMBER",76:"INFINITY",77:"INTEGRAL",78:"FACTORIAL",79:"&",80:"PRIMES",81:"?",83:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[26,1],[26,1],[26,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[10,1],[44,1],[82,1]],performAction:function(e,t,r,n,i,o){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return n.group();case 3:case 37:case 41:case 43:case 44:case 7:this.$=n.group(o[a-1],o[a]);break;case 4:case 38:this.$=n.group(o[a]);break;case 9:this.$=n.modified_expression(o[a-5],o[a-3],o[a-1]);break;case 10:this.$=n.modified_expression(o[a-4],o[a-2]);break;case 11:this.$=n.modified_expression(o[a-3],o[a-1]);break;case 12:this.$=n.modified_expression(o[a-4],n.group(),o[a-1]);break;case 13:this.$=n.modified_expression(o[a-3],n.group(),o[a-1]);break;case 14:this.$=n.modified_expression(o[a-3],n.group(),n.group());break;case 15:case 16:this.$=n.modified_expression(o[a-2],n.group());break;case 17:this.$=n.modified_expression(o[a-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=n.modified_expression(n.group());break;case 20:case 21:n.warnOrError("Multi-level modified expressions are not supported."),this.$=n.modified_expression(n.group());break;case 25:this.$=n.radical(o[a-1],o[a-3]);break;case 26:this.$=n.radical(o[a-1],n.group());break;case 27:this.$=n.radical(n.group(),o[a-2]);break;case 28:this.$=n.radical(n.group(),n.group());break;case 29:this.$=n.radical(o[a-1]);break;case 30:this.$=n.radical(n.group());break;case 31:this.$=n.level(o[a]);break;case 32:this.$=n.baseline();break;case 33:this.$=n.fraction(o[a-3],o[a-1]);break;case 34:this.$=n.fraction(o[a-2],n.group());break;case 35:this.$=n.fraction(n.group(),o[a-1]);break;case 36:this.$=n.fraction(n.group(),n.group());break;case 39:this.$=n.group(n.simple_subscript(o[a-2],o[a]),o[a-1]);break;case 40:this.$=n.simple_subscript(o[a-1],o[a]);break;case 42:n.warnOrError("Illegal use of Nemeth primes"),this.$=n.group(n.simple_subscript(o[a-2],o[a-1]),o[a]);break;case 67:this.$=n.terminal(",");break;case 68:this.$=n.terminal(".");break;case 69:this.$=n.terminal("[");break;case 70:this.$=n.terminal("\\{");break;case 71:this.$=n.terminal("(");break;case 72:this.$=n.terminal("]");break;case 73:this.$=n.terminal("\\}");break;case 74:this.$=n.terminal(")");break;case 75:this.$=n.terminal("\\langle ");break;case 76:this.$=n.terminal("\\rangle ");break;case 77:this.$=n.terminal("|");break;case 78:this.$=n.terminal("\\|");break;case 79:this.$=n.terminal(" ");break;case 80:this.$=n.command(o[a].toLowerCase());break;case 81:this.$=n.terminal(n.greek(o[a]));break;case 82:this.$=n.terminal(o[a].toLowerCase());break;case 83:this.$=n.terminal(o[a].toUpperCase());break;case 84:this.$=n.terminal("+");break;case 85:this.$=n.terminal("-");break;case 86:this.$=n.terminal("\\cdot ");break;case 87:this.$=n.terminal("\\times ");break;case 88:this.$=n.terminal("*");break;case 89:this.$=n.terminal("/");break;case 90:this.$=n.terminal("\\div ");break;case 91:this.$=n.terminal("\\%");break;case 92:this.$=n.comparison(o[a].trim());break;case 93:this.$=n.level_with_comparison(o[a].trim());break;case 94:this.$=n.terminal("\\ldots ");break;case 95:this.$=n.terminal(":");break;case 96:this.$=n.terminal(o[a]);break;case 97:this.$=n.terminal("\\infty ");break;case 98:this.$=n.terminal("\\int ");break;case 99:this.$=n.terminal("!");break;case 100:this.$=n.terminal("\\&");break;case 101:this.$=n.primes(o[a]);break;case 102:this.$=n.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:i=[1,11],15:o=[1,12],17:a=[1,13],19:33,20:s=[1,69],21:l=[1,70],22:32,23:c=[1,68],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u=[1,38],47:d=[1,39],48:p=[1,58],49:h=[1,59],50:g=[1,60],51:f=[1,61],52:m=[1,62],53:y=[1,63],54:v=[1,64],55:b=[1,65],56:x=[1,66],57:w=[1,67],58:S=[1,40],59:E=[1,34],60:_=[1,35],61:k=[1,36],62:M=[1,37],63:I=[1,41],64:C=[1,42],65:L=[1,43],66:P=[1,44],67:T=[1,45],68:A=[1,46],69:O=[1,47],70:D=[1,48],71:F=[1,49],72:q=[1,50],73:N=[1,51],74:R=[1,52],75:B=[1,17],76:j=[1,53],77:V=[1,54],78:z=[1,55],79:U=[1,56],81:G=[1,57]},{1:[3]},{5:[1,71]},{1:[2,2]},J(K=[5,12,13,14,18,24,25],[2,4],{6:4,7:5,8:6,9:7,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,22:32,19:33,4:72,11:i,15:o,17:a,20:s,21:l,23:c,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G}),J(H,[2,5]),J(H,[2,6]),J(H,[2,8],{10:73,80:W}),J($,[2,45],{10:75,27:76,75:B,80:W}),J(H,[2,46],{10:77,80:W}),J(H,[2,47],{10:78,80:W}),{4:79,6:4,7:5,8:6,9:7,11:i,12:[1,81],13:[1,80],14:[1,82],15:o,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{7:85,16:83,17:[1,84],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{4:86,6:4,7:5,8:6,9:7,11:i,15:o,17:a,18:[1,87],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},J(Y,[2,48]),J(Y,[2,49]),J(Y,[2,50]),J(Y,[2,96]),J(Y,[2,51]),J(Y,[2,52]),J(Y,[2,53]),J(Y,[2,54]),J(Y,[2,55]),J(Y,[2,56]),J(Y,[2,57]),J(Y,[2,58]),J(Y,[2,59]),J(Y,[2,60]),J(Y,[2,61]),J(Y,[2,62]),J(Y,[2,63]),J(Y,[2,64]),J(Y,[2,65]),J(Y,[2,66]),J(Y,[2,80]),J(Y,[2,81]),J(Y,[2,82]),J(Y,[2,83]),J(Y,[2,67]),J(Y,[2,68]),J(Y,[2,79]),J(Y,[2,84]),J(Y,[2,85]),J(Y,[2,86]),J(Y,[2,87]),J(Y,[2,88]),J(Y,[2,89]),J(Y,[2,90]),J(Y,[2,91]),J(Y,[2,92]),J(Y,[2,93]),J(Y,[2,94]),J(Y,[2,95]),J(Y,[2,97]),J(Y,[2,98]),J(Y,[2,99]),J(Y,[2,100]),J(Y,[2,102]),J(Y,[2,69]),J(Y,[2,70]),J(Y,[2,71]),J(Y,[2,72]),J(Y,[2,73]),J(Y,[2,74]),J(Y,[2,75]),J(Y,[2,76]),J(Y,[2,77]),J(Y,[2,78]),{4:88,6:4,7:5,8:6,9:7,11:i,15:o,17:a,19:33,20:s,21:l,22:32,23:c,24:[1,89],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},J(Y,[2,31]),J(Y,[2,32]),{1:[2,1]},J(K,[2,3]),J(H,[2,7]),J(H,[2,101]),J($,[2,41],{27:90,75:B}),J(H,[2,40],{10:91,80:W}),J(H,[2,43]),J(H,[2,44]),{12:[1,92],13:[1,93],14:[1,94]},{12:[1,95],13:[1,96],14:[1,97]},{12:[1,99],13:[1,98],14:[1,100]},J(H,[2,24]),{17:[1,101]},{4:102,6:4,7:5,8:6,9:7,11:i,15:o,17:a,18:[1,103],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{7:85,16:104,17:[2,38],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{18:[1,105]},J(Y,[2,30]),{24:[1,106]},{4:107,6:4,7:5,8:6,9:7,11:i,15:o,17:a,19:33,20:s,21:l,22:32,23:c,25:[1,108],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},J(H,[2,39]),J(H,[2,42]),{4:109,6:4,7:5,8:6,9:7,11:i,13:[1,110],14:[1,111],15:o,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{4:112,6:4,7:5,8:6,9:7,11:i,14:[1,113],15:o,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},J(H,[2,17]),{14:[1,114]},{14:[1,115]},J(H,[2,22]),{14:[1,116]},{14:[1,117]},J(H,[2,23]),{4:118,6:4,7:5,8:6,9:7,11:i,15:o,17:a,18:[1,119],19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{18:[1,120]},J(Y,[2,28]),{17:[2,37]},J(Y,[2,29]),{4:121,6:4,7:5,8:6,9:7,11:i,15:o,17:a,19:33,20:s,21:l,22:32,23:c,25:[1,122],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},{25:[1,123]},J(Y,[2,36]),{13:[1,124],14:[1,125]},{4:126,6:4,7:5,8:6,9:7,11:i,14:[1,127],15:o,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},J(H,[2,16]),{14:[1,128]},J(H,[2,15]),J(H,[2,18]),J(H,[2,20]),J(H,[2,19]),J(H,[2,21]),{18:[1,129]},J(Y,[2,27]),J(Y,[2,26]),{25:[1,130]},J(Y,[2,34]),J(Y,[2,35]),{4:131,6:4,7:5,8:6,9:7,11:i,14:[1,132],15:o,17:a,19:33,20:s,21:l,22:32,23:c,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:u,47:d,48:p,49:h,50:g,51:f,52:m,53:y,54:v,55:b,56:x,57:w,58:S,59:E,60:_,61:k,62:M,63:I,64:C,65:L,66:P,67:T,68:A,69:O,70:D,71:F,72:q,73:N,74:R,75:B,76:j,77:V,78:z,79:U,81:G},J(H,[2,11]),{14:[1,133]},J(H,[2,14]),J(H,[2,13]),J(Y,[2,25]),J(Y,[2,33]),{14:[1,134]},J(H,[2,10]),J(H,[2,12]),J(H,[2,9])],defaultActions:{3:[2,2],71:[2,1],104:[2,37]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,l=0,c=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var g=d.yylloc;i.push(g);var f=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,y,v,b,x,w,S,E,_=function(){var e=d.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e},k={};;){if(v=r[r.length-1],void 0===(b=this.defaultActions[v]?this.defaultActions[v]:(null==m&&(m=_()),o[v]&&o[v][m]))||!b.length||!b[0]){var M="",I=[];for(w in o[v])this.terminals_[w]&&2<w&&I.push("'"+this.terminals_[w]+"'");M=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(M,{text:d.match,token:this.terminals_[m]||m,line:d.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&1<b.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:r.push(m),n.push(d.yytext),i.push(d.yylloc),r.push(b[1]),m=null,y?(m=y,y=null):(l=d.yyleng,a=d.yytext,s=d.yylineno,g=d.yylloc,0<c&&c--);break;case 2:if(S=this.productions_[b[1]][1],k.$=n[n.length-S],k._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},f&&(k._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(k,[a,l,s,p.yy,b[1],n,i].concat(u))))return x;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),i=i.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),n.push(k.$),i.push(k._$),E=o[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},X={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r){switch(r){case 0:case 2:return this.begin("modexp"),11;case 1:case 50:return 21;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 74;case 24:return 70;case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 35:case 36:return 72;case 34:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:return 71;case 47:return 73;case 48:return 20;case 49:case 71:return 47;case 51:return 80;case 52:return 60;case 53:return 15;case 54:return this.begin("radical"),17;case 55:return this.popState(),18;case 56:return 18;case 57:return 77;case 58:return 79;case 59:return 78;case 60:case 61:return 59;case 62:return t.yytext=this.matches[1],75;case 63:return 23;case 64:return 24;case 65:return 25;case 66:return t.yytext=this.matches[1],62;case 67:return 61;case 68:return 76;case 69:return 81;case 70:return 46;case 72:return 58;case 73:return 5;case 74:return 83}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][\/])/,/^(?:[.][\/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[\/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[\/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[\/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][\/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][\/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[\/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0}}},Q.lexer=X,new((ee.prototype=Q).Parser=ee));function J(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r}function ee(){this.yy={}}t.parser=Z,t.Parser=Z.Parser,t.parse=function(){return Z.parse.apply(Z,arguments)},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),e.exit(1));var i=r(4).readFileSync(r(5).normalize(n[1]),"utf8");return t.parser.parse(i)},void 0!==n&&r.c[r.s]===n&&t.main(e.argv.slice(1))}).call(t,r(1),r(8)(e))},function(e,t,r){(function(e,n){var i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M,I,C,L,P,T,A,O,D,F,q,N,R,B,j,V,z,U,G,K,H,W,$,Y,Q,X,Z,J,ee,te,re,ne,ie,oe=(X=[5,10,13,14,15,18,19,29,52,53,54],Z=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],J=[1,84],ee=[1,85],te=[1,86],re=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],ne={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT:69,"=":70,NEQ:71,"<":72,">":73,LEQ:74,APPROX:75,GEQ:76,TILDE:77,PARALLEL:78,PERPENDICULAR:79,ELLIPSIS:80,COLON:81,INFINITY:82,INTEGRAL:83,FACTORIAL:84,"&":85,PRIMES:86,"?":87,unknown:88,UNKNOWN:89,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT",70:"=",71:"NEQ",72:"<",73:">",74:"LEQ",75:"APPROX",76:"GEQ",77:"TILDE",78:"PARALLEL",79:"PERPENDICULAR",80:"ELLIPSIS",81:"COLON",82:"INFINITY",83:"INTEGRAL",84:"FACTORIAL",85:"&",86:"PRIMES",87:"?",89:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1],[88,1]],performAction:function(e,t,r,n,i,o){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return n.group();case 3:case 35:this.$=n.group(o[a-2],o[a-1],o[a]);break;case 4:case 6:case 31:case 32:case 36:this.$=n.group(o[a-1],o[a]);break;case 5:case 7:case 33:case 34:this.$=n.group(o[a]);break;case 10:case 11:case 12:this.$=n.basic_level(o[a-1],n.group(o[a]));break;case 13:case 17:this.$=n.radical(o[a-1],n.group(o[a-2]));break;case 14:case 15:this.$=n.radical(n.group(),n.group(o[a-1]));break;case 16:this.$=n.radical(n.group(),n.group());break;case 18:this.$=n.radical(o[a-1]);break;case 19:this.$=n.radical(n.group());break;case 20:this.$=n.fraction(o[a-3],o[a-1]);break;case 21:this.$=n.fraction(o[a-2],n.group());break;case 22:this.$=n.fraction(n.group(),o[a-1]);break;case 23:case 24:this.$=n.fraction(n.group(),n.group());break;case 25:this.$=n.fraction(n.group(n.terminal(n.to_number(o[a-1]))),n.group(n.terminal(n.to_number(o[a]))));break;case 26:this.$=n.fraction(n.group(n.terminal(n.to_number(o[a]))),n.group());break;case 27:this.$=n.fraction(n.group(),n.group(n.terminal(n.to_number(o[$01]))));break;case 37:this.$=n.group(o[a-1]);break;case 38:this.$=n.group();break;case 39:this.$=n.terminal(n.to_number(o[a]));break;case 57:this.$=n.terminal(",");break;case 58:this.$=n.terminal(".");break;case 59:this.$=n.terminal("[");break;case 60:this.$=n.terminal("\\{");break;case 61:this.$=n.terminal("(");break;case 62:this.$=n.terminal("]");break;case 63:this.$=n.terminal("\\}");break;case 64:this.$=n.terminal(")");break;case 65:this.$=n.terminal(" ");break;case 66:this.$=n.command("\\"+o[a].trim().toLowerCase());break;case 67:this.$=n.terminal(n.greek(o[a]));break;case 68:this.$=n.terminal(o[a].toUpperCase());break;case 69:this.$=n.terminal(o[a].toLowerCase());break;case 70:this.$=n.terminal("|");break;case 71:this.$=n.terminal("\\|");break;case 72:this.$=n.terminal("+");break;case 73:this.$=n.terminal("-");break;case 74:this.$=n.terminal("\\cdot ");break;case 75:this.$=n.terminal("\\times ");break;case 76:this.$=n.terminal("*");break;case 77:this.$=n.terminal("\\div ");break;case 78:this.$=n.terminal("/");break;case 79:this.$=n.terminal("\\%");break;case 80:this.$=n.terminal("=");break;case 81:this.$=n.terminal("\\neq ");break;case 82:this.$=n.terminal("<");break;case 83:this.$=n.terminal(">");break;case 84:this.$=n.terminal("\\leq ");break;case 85:this.$=n.terminal("\\approx ");break;case 86:this.$=n.terminal("\\geq ");break;case 87:this.$=n.terminal("\\sim ");break;case 88:this.$=n.terminal("\\parallel ");break;case 89:this.$=n.terminal("\\perp ");break;case 90:this.$=n.terminal("\\ldots ");break;case 91:this.$=n.terminal(":");break;case 92:this.$=n.terminal("\\infty ");break;case 93:this.$=n.terminal("\\int ");break;case 94:this.$=n.terminal("!");break;case 95:this.$=n.terminal("\\&");break;case 96:this.$=n.primes(o[a]);break;case 97:this.$=n.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:i=[1,15],11:6,12:7,13:o=[1,16],15:a=[1,17],16:11,17:s=[1,36],20:12,21:l=[1,18],23:c=[1,37],24:u=[1,38],25:10,26:13,28:d=[1,14],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p=[1,46],48:h=[1,47],49:g=[1,39],50:f=[1,40],51:m=[1,41],55:y=[1,56],56:v=[1,42],57:b=[1,43],58:x=[1,44],59:w=[1,45],60:S=[1,54],61:E=[1,55],62:_=[1,57],63:k=[1,58],64:M=[1,59],65:I=[1,60],66:C=[1,61],67:L=[1,62],68:P=[1,63],69:T=[1,64],70:A=[1,65],71:O=[1,66],72:D=[1,67],73:F=[1,68],74:q=[1,69],75:N=[1,70],76:R=[1,71],77:B=[1,72],78:j=[1,73],79:V=[1,74],80:z=[1,75],81:U=[1,48],82:G=[1,49],83:K=[1,50],84:H=[1,51],85:W=[1,52],86:$=[1,76],87:Y=[1,53]},{1:[3]},{5:[1,77]},{1:[2,2]},ae(Q=[5,14,18,19,29,52,53,54],[2,5],{8:8,9:9,7:78,10:i,13:o,15:a}),ae(Q,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:79,10:i,13:o,15:a,17:s,21:l,23:c,24:u,28:d,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y}),ae(X,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:80,17:s,21:l,23:c,24:u,28:d,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y}),ae(X,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:81,17:s,21:l,23:c,24:u,28:d,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y}),ae(Z,[2,8]),ae(Z,[2,9]),ae(Z,[2,28]),ae(Z,[2,29]),ae(Z,[2,30]),{4:82,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,15:a,16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,27:83,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,52:J,53:ee,54:te,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},{4:87,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,15:a,16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,28:d,29:[1,88],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},{9:91,11:89,12:90,13:o,15:a,16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},{11:92,12:93,14:[1,94],16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},{4:95,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,14:[1,96],15:a,16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},ae(Z,[2,39],{22:[1,97]}),ae(Z,[2,40]),ae(Z,[2,41]),ae(Z,[2,42]),ae(Z,[2,43]),ae(Z,[2,44]),ae(Z,[2,45]),ae(Z,[2,46]),ae(Z,[2,47]),ae(Z,[2,48]),ae(Z,[2,49]),ae(Z,[2,50]),ae(Z,[2,51]),ae(Z,[2,52]),ae(Z,[2,53]),ae(Z,[2,54]),ae(Z,[2,55]),ae(Z,[2,56]),{4:98,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,15:a,16:11,17:s,18:[1,99],19:[1,100],20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},ae(Z,[2,26]),ae(Z,[2,27]),ae(re,[2,59]),ae(re,[2,60]),ae(re,[2,61]),ae(Z,[2,66]),ae(Z,[2,67]),ae(Z,[2,68]),ae(Z,[2,69]),ae(Z,[2,57]),ae(Z,[2,58]),ae(Z,[2,91]),ae(Z,[2,92]),ae(Z,[2,93]),ae(Z,[2,94]),ae(Z,[2,95]),ae(Z,[2,97]),ae(Z,[2,70]),ae(Z,[2,71]),ae(Z,[2,65]),ae(Z,[2,72]),ae(Z,[2,73]),ae(Z,[2,74]),ae(Z,[2,75]),ae(Z,[2,76]),ae(Z,[2,77]),ae(Z,[2,78]),ae(Z,[2,79]),ae(Z,[2,80]),ae(Z,[2,81]),ae(Z,[2,82]),ae(Z,[2,83]),ae(Z,[2,84]),ae(Z,[2,85]),ae(Z,[2,86]),ae(Z,[2,87]),ae(Z,[2,88]),ae(Z,[2,89]),ae(Z,[2,90]),ae(Z,[2,96]),{1:[2,1]},ae(Q,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:101,10:i,13:o,15:a,17:s,21:l,23:c,24:u,28:d,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y}),ae(Q,[2,6]),ae(X,[2,31]),ae(X,[2,32]),{27:102,52:J,53:ee,54:te},ae(Z,[2,36]),ae(Z,[2,62]),ae(Z,[2,63]),ae(Z,[2,64]),{29:[1,103]},ae(Z,[2,38]),ae(Z,[2,10]),ae(Z,[2,11]),ae(Z,[2,12]),{4:104,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,14:[1,105],15:a,16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},{4:107,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,14:[1,106],15:a,16:11,17:s,20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},ae(Z,[2,16]),{14:[1,108]},ae(Z,[2,19]),ae(Z,[2,25]),{18:[1,109]},{4:110,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,15:a,16:11,17:s,19:[1,111],20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},ae(Z,[2,24]),ae(Q,[2,3]),ae(Z,[2,35]),ae(Z,[2,37]),{14:[1,112]},ae(Z,[2,15]),ae(Z,[2,14]),{14:[1,113]},ae(Z,[2,18]),{4:114,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:o,15:a,16:11,17:s,19:[1,115],20:12,21:l,23:c,24:u,25:10,26:13,28:d,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:p,48:h,49:g,50:f,51:m,55:y,56:v,57:b,58:x,59:w,60:S,61:E,62:_,63:k,64:M,65:I,66:C,67:L,68:P,69:T,70:A,71:O,72:D,73:F,74:q,75:N,76:R,77:B,78:j,79:V,80:z,81:U,82:G,83:K,84:H,85:W,86:$,87:Y},{19:[1,116]},ae(Z,[2,23]),ae(Z,[2,13]),ae(Z,[2,17]),{19:[1,117]},ae(Z,[2,21]),ae(Z,[2,22]),ae(Z,[2,20])],defaultActions:{3:[2,2],77:[2,1]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,l=0,c=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var g=d.yylloc;i.push(g);var f=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,y,v,b,x,w,S,E,_=function(){var e=d.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e},k={};;){if(v=r[r.length-1],void 0===(b=this.defaultActions[v]?this.defaultActions[v]:(null==m&&(m=_()),o[v]&&o[v][m]))||!b.length||!b[0]){var M="",I=[];for(w in o[v])this.terminals_[w]&&2<w&&I.push("'"+this.terminals_[w]+"'");M=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(M,{text:d.match,token:this.terminals_[m]||m,line:d.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&1<b.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:r.push(m),n.push(d.yytext),i.push(d.yylloc),r.push(b[1]),m=null,y?(m=y,y=null):(l=d.yyleng,a=d.yytext,s=d.yylineno,g=d.yylloc,0<c&&c--);break;case 2:if(S=this.productions_[b[1]][1],k.$=n[n.length-S],k._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},f&&(k._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(k,[a,l,s,p.yy,b[1],n,i].concat(u))))return x;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),i=i.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),n.push(k.$),i.push(k._$),E=o[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},ie={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r){switch(r){case 0:return void this.begin("captext");case 1:return 58;case 2:return this.popState(),58;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 71;case 16:return 74;case 17:return 75;case 18:return 76;case 19:return 70;case 20:return 72;case 21:return 73;case 22:return 77;case 23:return 69;case 24:return 80;case 25:return 13;case 26:return 15;case 27:return 14;case 28:return 10;case 29:return 28;case 30:return 29;case 31:return 83;case 32:return 84;case 33:return 85;case 34:return 17;case 35:return 18;case 36:return 19;case 37:return 78;case 38:return 79;case 39:return 82;case 40:return t.yytext=this.matches[1],21;case 41:return t.yytext=this.matches[1],22;case 42:return t.yytext=this.matches[1],24;case 43:return 68;case 44:return 47;case 45:return 48;case 46:return 86;case 47:return 61;case 48:return 60;case 49:return 81;case 50:case 51:return 56;case 52:return 57;case 53:return t.yytext=this.matches[1],58;case 54:return 59;case 55:case 57:return;case 56:return 87;case 58:return 55;case 59:return 5;case 60:return 89}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][\/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][\/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[\/]([A-J4]+))/,/^(?:[#][\/]([A-J4]+))/,/^(?:[_]?[\/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0}}},ne.lexer=ie,new((se.prototype=ne).Parser=se));function ae(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r}function se(){this.yy={}}t.parser=oe,t.Parser=oe.Parser,t.parse=function(){return oe.parse.apply(oe,arguments)},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),e.exit(1));var i=r(4).readFileSync(r(5).normalize(n[1]),"utf8");return t.parser.parse(i)},void 0!==n&&r.c[r.s]===n&&t.main(e.argv.slice(1))}).call(t,r(1),r(8)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(7),o={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},a={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},s={"\\space":!0};t.default=function e(t){for(var r=[],l=0;l<t.length;l++){var c=t[l];switch(c.type){case"command":var u=c.value.slice(1).trim();a.hasOwnProperty(c.value)?r.push(i.command(a[c.value])):n.containsValue(u)?r.push(i.typeform("operator_name",function(e){for(var t=[],r=0,n=e;r<n.length;r++){var o=n[r];t.push(i.terminal(o))}return t}(u))):s[c.value]||r.push(c);break;case"level":var d={subscript:c.subscript&&0<c.subscript.length?e(c.subscript):void 0,superscript:c.superscript&&0<c.superscript.length?e(c.superscript):void 0,type:c.type};(d.subscript||d.superscript)&&r.push(d);break;case"fraction":r.push({denominator:e(c.denominator),numerator:e(c.numerator),type:c.type});break;case"radical":r.push({index:c.index?e(c.index):void 0,radicand:e(c.radicand),type:c.type});break;case"terminal":!function(e){for(var t=0,r=0;r<Math.min(3,e.length);r++){var n=e[r];"terminal"===n.type&&"."===n.value&&t++}return 3===t}(t.slice(l))?r.push({type:c.type,value:o.hasOwnProperty(c.value)?o[c.value]:c.value}):(r.push({type:"command",value:"\\ldots"}),l+=2);break;case"typeform":r.push(c);break;case"greek":r.push({type:c.type,value:o.hasOwnProperty(c.value)?o[c.value]:c.value});break;default:throw new Error("Unexpected item:\n"+JSON.stringify({group:t,item:c}))}}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(13),o=r(7);i.parser.yy=o,t.default=function(e){try{return{isError:!1,value:i.parser.parse(e)}}catch(e){return{isError:!0,error:n.default(e)}}}},function(e,t,r){(function(e,n){var i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M,I=(S=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],E=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],_=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],k={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(e,t,r,n,i,o){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return n.group();case 3:this.$=n.group(o[a-2],o[a-1],o[a]);break;case 4:case 6:this.$=n.group(o[a-1],o[a]);break;case 5:case 7:this.$=n.group(o[a]);break;case 8:this.$=n.level({_:n.group(o[a-1]),"^":n.group(o[a])});break;case 9:this.$=n.level({_:n.group(o[a]),"^":n.group(o[a-1])});break;case 10:this.$=n.level({"^":n.group(o[a])});break;case 11:this.$=n.level({_:n.group(o[a])});break;case 12:case 13:this.$=o[a];break;case 14:this.$=n.processPrimes(o[a-1],o[a]);break;case 15:this.$=n.processPrimes(o[a],n.group());break;case 21:this.$=n.group(o[a-3],o[a-2],o[a]);break;case 22:this.$=n.group(o[a-2],o[a]);break;case 23:this.$=n.fraction(n.group(o[a-1]),n.group(o[a]));break;case 24:this.$=n.typeform("operator_name",n.group(o[a]));break;case 25:this.$=n.typeform("mathrm",n.group(o[a]));break;case 26:this.$=n.typeform("text",n.group(o[a]));break;case 27:this.$=n.radical(o[a],n.group(o[a-2]));break;case 28:this.$=n.radical(n.group(o[a]),n.group());break;case 29:case 30:this.$=n.radical(n.group(o[a]));break;case 35:case 36:this.$=n.terminal(o[a]);break;case 37:case 39:this.$=n.command(o[a]);break;case 38:this.$=n.greek(o[a]);break;case 40:this.$=o[a-1];break;case 41:this.$=n.group()}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:i=[1,13],11:12,12:o=[1,14],13:a=[1,15],14:s=[1,16],15:8,16:9,17:10,18:11,19:l=[1,17],20:25,22:c=[1,21],23:u=[1,18],24:d=[1,19],25:p=[1,20],26:h=[1,22],28:g=[1,23],29:24,30:26,31:27,32:f=[1,28],33:m=[1,30],34:y=[1,31],35:v=[1,32],36:b=[1,33],37:x=[1,29]},{1:[3]},{5:[1,34]},{1:[2,2]},C(w=[5,21,27,38],[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:l,22:c,23:u,24:d,25:p,26:h,28:g,32:f,33:m,34:y,35:v,36:b,37:x}),C(w,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:i,12:o,13:a,14:s,19:l,22:c,23:u,24:d,25:p,26:h,28:g,32:f,33:m,34:y,35:v,36:b,37:x}),C(S,[2,11],{9:37,12:o,13:a,14:s}),C(S,[2,10],{8:38,10:i}),C(E,[2,16]),C(E,[2,17]),C(E,[2,18]),C(E,[2,19]),C(E,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{11:40,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{11:41,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},C(_,[2,15]),{20:42,33:m,34:y},{11:43,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{11:44,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{11:45,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{11:46,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{4:47,6:4,7:5,8:6,9:7,10:i,11:12,12:o,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:u,24:d,25:p,26:h,27:[1,48],28:g,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{11:49,17:50,20:25,22:c,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},C(E,[2,31]),C(E,[2,32]),C(E,[2,33]),C(E,[2,34]),C(E,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:i,11:12,12:o,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:u,24:d,25:p,26:h,28:g,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x,38:[1,52]},C(E,[2,36]),C(E,[2,37]),C(E,[2,38]),C(E,[2,39]),{1:[2,1]},C(w,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:i,12:o,13:a,14:s,19:l,22:c,23:u,24:d,25:p,26:h,28:g,32:f,33:m,34:y,35:v,36:b,37:x}),C(w,[2,6]),C(S,[2,8]),C(S,[2,9]),C([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),C(_,[2,13]),C(_,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:i,11:12,12:o,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,21:[1,55],22:c,23:u,24:d,25:p,26:h,28:g,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},C(E,[2,24]),C(E,[2,25]),C(E,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},C(E,[2,29]),C(E,[2,30]),{38:[1,59]},C(E,[2,41]),C(w,[2,3]),{21:[1,60]},{20:61,33:m,34:y},C(E,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:v,36:b,37:x},C(E,[2,28]),C(E,[2,40]),{20:63,33:m,34:y},C(E,[2,22]),C(E,[2,27]),C(E,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,l=0,c=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var g=d.yylloc;i.push(g);var f=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,y,v,b,x,w,S,E,_=function(){var e=d.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e},k={};;){if(v=r[r.length-1],void 0===(b=this.defaultActions[v]?this.defaultActions[v]:(null==m&&(m=_()),o[v]&&o[v][m]))||!b.length||!b[0]){var M="",I=[];for(w in o[v])this.terminals_[w]&&2<w&&I.push("'"+this.terminals_[w]+"'");M=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(M,{text:d.match,token:this.terminals_[m]||m,line:d.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&1<b.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:r.push(m),n.push(d.yytext),i.push(d.yylloc),r.push(b[1]),m=null,y?(m=y,y=null):(l=d.yyleng,a=d.yytext,s=d.yylineno,g=d.yylloc,0<c&&c--);break;case 2:if(S=this.productions_[b[1]][1],k.$=n[n.length-S],k._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},f&&(k._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(k,[a,l,s,p.yy,b[1],n,i].concat(u))))return x;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),i=i.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),n.push(k.$),i.push(k._$),E=o[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},M={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r){switch(r){case 0:break;case 1:return this.begin("optarg"),26;case 2:return this.popState(),27;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:case 19:case 20:case 24:return 32;case 21:case 22:return 35;case 23:return 36;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}},k.lexer=M,new((L.prototype=k).Parser=L));function C(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r}function L(){this.yy={}}t.parser=I,t.Parser=I.Parser,t.parse=function(){return I.parse.apply(I,arguments)},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),e.exit(1));var i=r(4).readFileSync(r(5).normalize(n[1]),"utf8");return t.parser.parse(i)},void 0!==n&&r.c[r.s]===n&&t.main(e.argv.slice(1))}).call(t,r(1),r(8)(e))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=r(12),a=r(0);t.default=function(e){return a.map(o.default(e),(function(e){return p({isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1},i.default(e)).value}))};var s={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"};function l(e){return/^[a-z]$/.test(e.value)?e.value.toUpperCase():/^[A-Z]$/.test(e.value)?","+e.value:/^[0-9.]$/.test(e.value)||/^[+\-()]$/.test(e.value)?e.value:s.hasOwnProperty(e.value)?s[e.value]:"[terminal: "+e.value+"]"}var c={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\approx":" @:@: ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\vert":"\\"},u={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function d(e){return c.hasOwnProperty(e.value)?c[e.value]:e.value.slice(1).toUpperCase()+" "}function p(e,t){for(var r,n,i,o,a="",s=e.levelIndicator,c=0,m=!1,y=0;y<t.length;y++){!function(e,t){if(!(t>=e.length)){var r=e[t];if("terminal"===r.type){if(/^[0-9]$/.test(r.value))return 1;if("."!==r.value)return;if(t+1>=e.length)return;if("terminal"===(r=e[t+1]).type)return/^[0-9]$/.test(r.value)}}}(t,y)||(""===s&&/[A-Z]$/.test(a)?a+=h(s):(o=a,((i=e).isStartOfLine&&/^-?$/.test(o)||/\s-?$/.test(o)||i.wasFraction)&&(a+="#")));var v,b=t[y],x=y<t.length-1?t[y+1]:null;switch("level"!==b.type&&s!==e.levelIndicator&&(s=f(b)?"":(e.wasModifiedExpression&&""===e.levelIndicator?e=g(e,{wasModifiedExpression:!1}):a+=h(e.levelIndicator),e.levelIndicator)),b.type){case"terminal":!e.wasModifiedExpression&&""!==s&&f(b)?a+=" "+h(s)+l(b).trim()+" ":a+=l(b),"."===b.value&&x&&("terminal"===x.type&&/^[^_\d,]/.test(l(x))||"greek"===x.type)&&(a+='"'),e=g(e,{wasFraction:!1,wasRomanCommand:!1});break;case"command":"\\space"!==b.value&&((v="\\sum"===(n=b).value||"\\prod"===n.value)&&(a+='"'),!v&&""!==s&&f(b)?a+=" "+h(s)+d(b).trim()+" ":a+=d(b),e=g(e,{wasFraction:!1,wasModifiedExpression:v,wasRomanCommand:!0}));break;case"greek":a+=(r=b,u.hasOwnProperty(r.value)?u[r.value]:r.value.slice(1).toUpperCase()+" "),e=g(e,{wasFraction:!1});break;case"fraction":var w=function(e,t){for(var r=p(e=g(e,{isStartOfLine:!1}),t.numerator),n=p(e,t.denominator),i=Math.max(r.fractionLevel,n.fractionLevel),o="",a=0;a<i;a++)o+=",";var s=o+"?"+r.value;return r.levelIndicator!==e.levelIndicator&&(s+=h(e.levelIndicator)),/\.$/.test(r.value)&&(s+='"'),s+=o+"/"+n.value,n.levelIndicator!==e.levelIndicator&&(s+=h(e.levelIndicator)),/\.$/.test(n.value)&&(s+='"'),{fractionLevel:i+1,value:s+=o+"#"}}(e,b);a+=w.value,c=Math.max(c,w.fractionLevel),e=g(e,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":var S=function(e,t){for(var r=e.radicalLevel,n="",i="",o=0;o<r;o++)i+=".";var a;t.index?(n+=i+"<",n+=(a=p(g(e,{isStartOfLine:!1}),t.index)).value,/\.$/.test(a.value)&&(n+='"'),a.levelIndicator!==e.levelIndicator&&(n+=h(e.levelIndicator)),n+=">"):n+=i+">";var s=p(g(e,{isStartOfLine:!1,radicalLevel:r+1}),t.radicand);return n+=s.value,/\.$/.test(s.value)&&(n+='"'),s.levelIndicator!==e.levelIndicator&&(n+=h(e.levelIndicator)),n+=i+"]",{fractionLevel:s.fractionLevel,value:n}}(e,b);a+=S.value,c=Math.max(c,S.fractionLevel),e=g(e,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!e.wasModifiedExpression&&e.wasRomanCommand?(m=/\s$/.test(a))&&(a=a.replace(/\s$/,"")):m=!1;var E=function(e,t,r,n){var i,o,a=e.levelIndicator,s="",l=function(e){var t="";if(e)for(var r=0,n=e;r<n.length;r++){var i=n[r];if("command"!==i.type||"\\prime"!==i.value)break;t+="'"}return t}(n.superscript);return s+=l,n.subscript&&(e.wasModifiedExpression&&(s+="%"),i=p(g(e,{isStartOfLine:!1,levelIndicator:a=e.levelIndicator+";"}),n.subscript),t&&/^[0-9]*(\.|\,)?[0-9]+$/.test(i.value)&&a.length<=1?a=e.levelIndicator:!e.wasModifiedExpression&&n.subscript[0]&&"level"!==n.subscript[0].type&&(s+=h(a)),s+=i.value,/\.$/.test(i.value)&&(s+='"')),n.superscript&&(e.wasModifiedExpression&&(s+="<"),o=p(g(e,{isStartOfLine:!1,levelIndicator:a=e.levelIndicator+"^"}),n.superscript.slice(l.length)),!e.wasModifiedExpression&&n.superscript[0]&&"level"!==n.superscript[0].type&&""!==o.value&&(s+=h(a)),s+=o.value,/\.$/.test(o.value)&&(s+='"')),e.wasModifiedExpression?s+="]":e.wasRomanCommand&&r&&(s+=" ",a=a.slice(0,a.length-1)),{levelIndicator:a,value:s}}(e,0<a.length&&!0===/[A-Za-z]/.test(a[a.length-1]),m,b);a+=E.value,s=E.levelIndicator,e=g(e,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":a+=p(e,b.value).value,"operator_name"===b.name&&(a+=" "),e=g(e,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1})}}return{fractionLevel:c,levelIndicator:s,value:a}}function h(e){return e||'"'}function g(e,t){return n(n({},e),t)}function f(e){return("terminal"===e.type||"command"===e.type)&&/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(e.value)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=r(11),a=r(12),s=r(0);t.default=function(e){return s.map(a.default(e),(function(e){return p({capsLock:!1,wasNumber:!1},o.default(e)).value}))};var l={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"};function c(e,t,r){var n="",i=t.value,o=r&&"terminal"===r.type?r.value:"";return h(i,e)&&(n+=";"),/^[\D]/.test(i)&&(e=y(e,{wasNumber:!1})),/^[a-z]$/.test(i)?e.capsLock?(e=y(e,{capsLock:!1}),n+=",'"+i.toUpperCase()):n+=i.toUpperCase():/^[A-Z]$/.test(i)?e.capsLock?n+=i:/[A-Z]/.test(o)?(e=y(e,{capsLock:!0}),n+=",,"+i):n+=","+i:(e=y(e,{capsLock:!1}),/^[0-9.]$/.test(i)?n+=function(e){for(var t="",r="A".charCodeAt(0)-1,n=0,i=e;n<i.length;n++){var o=i[n];t+=","===o?"1":"."===o?"4":"0"===o?"J":String.fromCharCode(r+Number(o))}return t}(i):l.hasOwnProperty(i)?n+=l[i]:n+="[terminal: "+i+"]"),{value:n,ctx:e}}var u={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\approx":"^9","\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\vert":"_\\"},d={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function p(e,t){for(var r,n,o,a,s,l="",v=!0,b=0;b<t.length;b++){!function(e,t){if(t<e.length){var r=e[t];if("terminal"===r.type){if(/^\d$/.test(r.value))return 1;if("."!==r.value)return;if(t+1>=e.length)return;if("terminal"===(r=e[t+1]).type)return/^\d$/.test(r.value)}}}(t,b)?v=!0:(e=y(e,{wasNumber:!0}),v&&(l+="#",v=!1));var x,w=t[b];switch(w.type){case"terminal":e=(x=c(e,w,b<t.length-1?t[b+1]:void 0)).ctx," "===(l+=x.value)[l.length-1]&&(v=!0);break;case"command":"\\space"!==w.value&&(o=w,a=e,s=void 0,h(s=u.hasOwnProperty(o.value)?u[o.value]:o.value.slice(1).toUpperCase()+" ",a)&&(s=";"+s),/^[\D]/.test(s)&&(a=y(a,{wasNumber:!1})),e=(r={value:s,ctx:a}).ctx," "===(l+=r.value)[l.length-1]&&(v=!0));break;case"greek":" "===(l+=(n=w,d.hasOwnProperty(n.value)?d[n.value]:n.value.slice(1).toUpperCase()+" "))[l.length-1]&&(v=!0);break;case"fraction":var S=function(e,t){var r,n=p(e,t.numerator),i=p(e,t.denominator);return r=g(n.value)&&g(i.value)?(e=y(e,{wasNumber:!0}),n.value+"/"+i.value.slice(1)):(e=y(e,{wasNumber:!1}),"("+n.value+"./"+i.value+")"),{ctx:e,value:r}}(e,w);l+=S.value,e=S.ctx,v=!1;break;case"radical":l+=function(e,t){var r="%";return t.index&&(r+=p(e,i.group(i.level({"^":t.index}))).value),{ctx:e,value:r+=p(e,t.radicand).value+"+"}}(e,w).value,v=!0;break;case"level":var E=function(e,t){var r,n,i,o="",a=function(e){var t="";if(e)for(var r=0,n=e;r<n.length;r++){var i=n[r];if("command"!==i.type||"\\prime"!==i.value)break;t+="7"}return t}(t.superscript);return o+=a,t.subscript&&(n=p(e,t.subscript),r=m(t.subscript,n.value,0)?"<"+f(n.value)+">":n.value,e=y(e,{wasNumber:n.ctx.wasNumber}),""!==r&&(o+="5"+r)),t.superscript&&(i=p(e,t.superscript.slice(a.length)),r=m(t.superscript,i.value,a.length)?"<"+f(i.value)+">":i.value,e=y(e,{wasNumber:i.ctx.wasNumber}),""!==a&&""===r||(o+="9"+r)),{ctx:e,value:o}}(e,w);l+=E.value,e=E.ctx,v=!0;break;case"typeform":var _=p(e,w.value).value;l+=_,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(_)&&(l+=" ")}}return{ctx:e,value:l}}function h(e,t){return t.wasNumber&&/^[A-Ja-j]/.test(e)}function g(e){return/^\#[A-J41]+$/.test(e)}function f(e){return/^;/.test(e)?e.slice(1):e}function m(e,t,r){var n=e[0],i=(t.match(/\</g)||[]).length,o=/^["|\.|_]?\</.test(t),a=(t.match(/\>/g)||[]).length,s=/["|\.|_]?\>$/.test(t);return!g(t)&&1<e.length-r&&0===i&&0===a||0<i&&0<a&&(!o||!s)||1<i||1<a||n&&"typeform"===n.type}function y(e,t){return n(n({},e),t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(18),o=r(0);function a(e,t){for(var r,i,o,p="",h=t,g="",f=!1,m="",y="",v=function(e){for(var t=[],r=[],n=0;n<e.length;n++){var i,o=e[n];if(function(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}(o))t.push({direction:s,index:n}),r.push(c);else if(function(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}(o)){for(;t.length&&t[t.length-1].direction===u;)t.pop();t.length?(i=t.pop())&&(r[i.index]=s,r.push(l)):r.push(c)}else!function(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}(o)?r.push(c):t.length&&t[t.length-1].direction===u?(i=t.pop())&&(r[i.index]=s,r.push(l)):(t.push({direction:u,index:n}),r.push(c))}return r}(e),b=0;b<e.length;b++){var x=e[b],w=b+1<e.length?e[b+1]:null;switch(x.type){case"terminal":var S=n.getAutoOperator(e.slice(b));""!==S.value?(p+=S.value,b+=S.terminalCount-1,f=f||S.modified):" "===x.value?(f?(p+=d(h,g=m),h=g):p+="\\ ",f=!1):(v[b]===s?p+="\\left":v[b]===l&&(p+="\\right"),p+=x.value);break;case"comparison":p+=d(h,g=""),h=g,f=!1,p+=x.value;break;case"level_with_comparison":p+=d(h,x.level),h=x.level,f=!1,p+=x.value;break;case"command":var E=x.value.slice(1).trim();f=w&&"terminal"===w.type&&/[a-z]/.test(w.value)?(p+=E,!1):(n.containsValue(E)?p+="\\operatorname{"+E+"}":p+=x.value,!0),m=h;break;case"expression":p+=x.value;break;case"fraction":p+=(r=x.numerator,i=x.denominator,"\\frac{"+a(r,o=h)+"}{"+a(i,o)+"}");break;case"modified_expression":p+=a(x.expression,h)+" ",x.under&&(p+="_{"+a(x.under,h)+"}"),x.over&&(p+="^{"+a(x.over,h)+"}");break;case"radical":p+="\\sqrt",x.index&&(p+="["+a(x.index,h)+"]"),p+="{"+a(x.value,h)+"}";break;case"simple_subscript":""===h?(p+=x.base.value+"_{"+x.subscript.value+"}","command"===x.base.type&&(f=!0,m=h)):p+=x.base.value+x.subscript.value;break;case"level":p+=d(h,x.value,y),h=x.value,"^"===x.value&&""!==y&&(y="");break;case"primes":y=w&&"level"===w.type&&";"===w.value?x.value:(p+=""!==h?Array(x.value.length+1).join("\\prime "):x.value,"")}}return(p+=d(h,t)+y).replace(/([^\\])( )$/,"$1")}var s=1,l=-1,c=0,u=2;function d(e,t,r){for(var n,i,o="",a=Math.max(e.length,t.length),s=0;s<a&&e[s]===t[s];s++);for(n=e.length-1;s<=n;n--)o+="}";for(i=s;i<t.length;i++)"^"===t[i]&&(r&&(o+=r),o+="^{"),";"===t[i]&&(o+="_{");return o}function p(e){return a(e,"")}t.default=function(e,t){return t&&t.operatorNames?n.setOperatorNames(t.operatorNames):n.resetOperatorNames(),o.map(i.default(e,t),p)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=function(e){return{type:"terminal",value:e}},t.command=function(e){return{type:"command",value:"\\"+e.trim()+" "}};var n={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};function i(e){return{type:"level",value:e}}t.level_with_comparison=function(e){var t=/[\^;]+/.exec(e),r=t?t.toString():"",o=e.slice(i.length);return{type:"level_with_comparison",level:r,value:n[o]}},t.comparison=function(e){return{type:"comparison",value:n[e]}},t.level=i,t.baseline=function(){return i("")},t.primes=function(e){return{type:"primes",value:e}},t.fraction=function(e,t){return{type:"fraction",numerator:e,denominator:t}},t.modified_expression=function(e,t,r){return{type:"modified_expression",expression:e,under:t,over:r}},t.radical=function(e,t){return{type:"radical",value:e,index:t}},t.expression=function(e){return{type:"expression",value:e}},t.simple_subscript=function(e,t){return{type:"simple_subscript",base:e,subscript:t}};var o={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=function(e){if(o.hasOwnProperty(e))return o[e]+" ";throw new Error("Unknown Greek letter")},t.group=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(9),a=r(17),s=r(20);t.default=function(e,t){t=t||{};var r=o.parser,l=Object.create(r);l.yy=a,l.yy.warnOrError=function(e){l.parseError(e,{recoverable:!1})};var c=Object.create(r);c.yy=n({warnings:[]},a),c.yy.warnOrError=function(e){c.yy.warnings.push(e)},c.lexer=s.default,r=t.strict?l:c;try{return{isError:!1,value:r.parse(e),warnings:r.yy.warnings||[]}}catch(e){return{error:i.default(e),isError:!0}}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(21),a=r(10),s=r(24);t.default=function(e,t){t=t||{};var r=a.parser,l=Object.create(r);l.yy=s;var c=Object.create(r);c.yy=n({warnings:[]},s),c.lexer=o.default,r=t.strict?l:c;try{return{isError:!1,value:r.parse(e),warnings:r.yy.warnings||[]}}catch(e){return{error:i.default(e),isError:!0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=n.parser.lexer,o=Object.create(i);t.default=o;var a=n.parser.terminals_,s=n.parser.symbols_;o.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,i.setInput.call(this,e,t)},o.lex=function(){if(!this)return-1;if(this.outputQueue.length)return this.outputQueue.shift();for(var e,t,r=i.lex.call(this);"UNKNOWN"===a[r]||!this.canAcceptPrimes&&"PRIMES"===a[r];)this.warn(),r=i.lex.call(this);this.canAcceptPrimes=!0;var n=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[r]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(r),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":n===s.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(n)),this.delimiterStack.push(r),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":n===s.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(r),this.canAcceptPrimes=!1;break;case"SLASH":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.OPEN_FRAC){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r),this.delimiterStack.push(r),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.SLASH){e=!0;break}if(t===s.OPEN_FRAC){this.addMissingToken(s.SLASH),e=!0;break}this.pushCloseTokens(t)}if(!e)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.OPEN_RADICAL){e=!0;break}if(t===s.RADICAL_INDEX){e=!0,this.addMissingToken(s.OPEN_RADICAL);break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"CLOSE_MODEXP":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.OPEN_MODEXP){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"EOF":for(;this.delimiterStack.length;)t=this.delimiterStack.pop()||-1,this.pushCloseTokens(t)}return this.outputQueue.push(r),this.outputQueue.shift()||-1},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},o.pushCloseTokens=function(e){switch(a[e]){case"OPEN_FRAC":this.addMissingToken(s.SLASH),this.addMissingToken(s.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(s.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(s.OPEN_RADICAL),this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(s.CLOSE_MODEXP)}},o.pushOpenTokens=function(e){switch(a[e]){case"SLASH":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(s.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(s.OPEN_MODEXP)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=n.parser.lexer,o=Object.create(i);t.default=o;var a=n.parser.terminals_,s=n.parser.symbols_;o.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],i.setInput.call(this,e,t)},o.lex=function(){if(this.outputQueue.length)return this.outputQueue.shift();for(var e,t,r=i.lex.call(this);"UNKNOWN"===a[r];)this.warn(),r=i.lex.call(this);var n=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[r]){case"OPEN_FRAC":case"OPEN_GROUP":this.delimiterStack.push(r);break;case"RADICAL_WITH_INDEX":n===s.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(n)),this.delimiterStack.push(r);break;case"RADICAL":n===s.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(r);break;case"OVER":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.OPEN_FRAC){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r),this.delimiterStack.push(r);break;case"CLOSE_FRAC":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.OVER){e=!0;break}if(t===s.OPEN_FRAC){this.outputQueue.push(s.OVER),e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"CLOSE_GROUP":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.OPEN_GROUP){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"CLOSE_RADICAL":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===s.RADICAL||t===s.RADICAL_WITH_INDEX){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"EOF":for(;this.delimiterStack.length;)t=this.delimiterStack.pop()||-1,this.pushCloseTokens(t)}return this.outputQueue.push(r),this.outputQueue.shift()||-1},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},o.pushCloseTokens=function(e){switch(a[e]){case"OPEN_FRAC":this.addMissingToken(s.OVER),this.addMissingToken(s.CLOSE_FRAC);break;case"OVER":this.addMissingToken(s.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(s.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(s.CLOSE_RADICAL)}},o.pushOpenTokens=function(e){switch(a[e]){case"OVER":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.OVER);break;case"CLOSE_GROUP":this.addMissingToken(s.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(s.RADICAL)}}},function(e,t,r){"use strict";function n(e){return e.isError}Object.defineProperty(t,"__esModule",{value:!0}),t.isErr=n,t.isOk=function(e){return!e.isError},t.map=function(e,t){return n(e)?e:{isError:!1,value:t(e.value)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(19),o=r(0),a=function e(t,r){for(var i,o,a="",s=!1,l="",c=function(e){for(var t=[],r=[],n=0;n<e.length;n++){var i,o=e[n];if(function(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}(o))t.push({direction:1,index:n}),r.push(0);else if(function(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}(o)){for(;t.length&&2===t[t.length-1].direction;)t.pop();t.length?(i=t.pop())&&(r[i.index]=1,r.push(-1)):r.push(0)}else!function(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}(o)?r.push(0):t.length&&2===t[t.length-1].direction?(i=t.pop())&&(r[i.index]=1,r.push(-1)):(t.push({direction:2,index:n}),r.push(0))}return r}(t),u=0;u<t.length;u++){var d=t[u],p=u+1<t.length?t[u+1]:null;switch(d.type){case"terminal":var h=n.getAutoOperator(t.slice(u));""!==h.value?(a+=h.value,u+=h.terminalCount-1):" "!==d.value||s?(1===c[u]?a+="\\left":-1===c[u]&&(a+="\\right"),a+=d.value):a+="\\ ",s=!1;break;case"command":var g=d.value.slice(1).trim();s=p&&"terminal"===p.type&&/[a-z]/.test(p.value)?(a+=g,!1):(n.containsValue(g)?a+="\\operatorname{"+g+"}":a+=d.value,!0);break;case"expression":a+=d.value;break;case"fraction":a+=(i=d.numerator,o=d.denominator,"\\frac{"+e(i)+"}{"+e(o)+"}");break;case"radical":a+="\\sqrt",d.index&&(a+="["+e(d.index)+"]"),a+="{"+e(d.value)+"}";break;case"basic_level":a+=function(t,r,n){var i="",o="{"+e(r,t)+"}";return"9"===t?i+=n+"^"+o:"5"===t&&(i+="_"+o),i}(d.level,d.value,l),"9"===d.level&&(l="");break;case"bracketed_level":a+=function(t,r,n,i,o){var a="",s="{"+r+e(n,t)+i+"}";return"9"===t?a+=o+"^"+s:"5"===t&&(a+="_"+s),a}(d.level,d.lbrack,d.value,d.rbrack,l),"9"===d.level&&(l="");break;case"primes":l=!p||"basic_level"!==p.type&&"bracketed_level"!==p.type||"5"!==p.level?(a+=r&&""!==r?Array(d.value.length+1).join("\\prime "):d.value,""):d.value}}return(a+=l).replace(/([^\\])( )$/,"$1")};t.default=function(e,t){return t&&t.operatorNames?n.setOperatorNames(t.operatorNames):n.resetOperatorNames(),o.map(i.default(e,t),(function(e){return a(e,"")}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=function(e){return{type:"terminal",value:e}},t.command=function(e){return{type:"command",value:e}},t.basic_level=function(e,t){return{type:"basic_level",level:e,value:t}},t.bracketed_level=function(e,t,r,n){return{type:"bracketed_level",level:e,lbrack:t,value:r,rbrack:n}},t.primes=function(e){return{type:"primes",value:0<e.length?Array(e.length+1).join("'"):""}},t.fraction=function(e,t){return{type:"fraction",numerator:e,denominator:t}},t.radical=function(e,t){return{type:"radical",value:e,index:t}},t.expression=function(e){return{type:"expression",value:e}},t.group=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)};var n={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=function(e){if(n.hasOwnProperty(e))return n[e]+" ";throw new Error("Unknown Greek letter")},t.to_number=function(e){for(var t="",r="A".charCodeAt(0)-1,n=0,i=e;n<i.length;n++){var o=i[n];t+="4"===o?".":"J"===o?"0":o.charCodeAt(0)-r}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=";function i(e){for(var t,r="",i=0,o=e;i<o.length;i++){var a=o[i];r+=(t=n.indexOf(a),String.fromCharCode(10240+t))}return r}function o(e){for(var t,r="",i=0,o=e;i<o.length;i++)r+=(t=o[i].charCodeAt(0)-10240,n[t]);return r}t.toBrailleAscii=o,t.toExpandedBrailleAscii=function(e){return o(e).replace(/[@-^]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)+32)}))},t.coerceToSixDotCells=function(e){var t="";if(e)for(var r=0,n=e;r<n.length;r++){var o=n[r],a=o.charCodeAt(0);96<=a&&a<=127&&(a-=32,o=String.fromCharCode(a)),32<=a&&a<=95&&(a=(o=i(o)).charCodeAt(0)),10305<=a&&a<=10495&&(a=10240+(a-1024)%64,o=String.fromCharCode(a)),t+=10240<=a&&a<=10304?o:String.fromCharCode(10240)}return t},t.isSixDotCells=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<10240||10304<r)return!1}return!0}},function(e,t,r){r(3),e.exports=r(3)}],e.c=r,e.i=function(e){return e},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=26);function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t,r})),i("submodules/dcgview/src/attr-event-handler",[],(function(){return function(e,t){if(null!=t){if("string"!=typeof e)throw new Error("Must pass a string for an EventHandler name");if("function"!=typeof t)throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(r){r[e.toLowerCase()]=function(e){e&&t.apply(this,arguments)}}}}}}})),i("submodules/dcgview/src/const",["require"],(function(e){return{isConst:function(e){return!("function"!=typeof e||!e.isDCGViewConst)},makeConst:function(e){function t(){return e}return t.isDCGViewConst=!0,t}}})),i("submodules/dcgview/src/attr",["require"],(function(e){return{update:function(e,t,r){void 0===r?e.removeAttribute(t):e.setAttribute(t,r+"")}}})),i("submodules/dcgview/src/attr-generic",["require","./const","./attr"],(function(e){var t=e("./const"),r=e("./attr");return function(e,n){var i,o=n();return t.isConst(n)||(i={onUpdate:function(t){var i=n();i!==o&&(o=i,r.update(t,e,i))}}),{value:o,bindings:i}}})),i("submodules/dcgview/src/is-event-handler",[],(function(){return function(e){return"o"===e[0]&&"n"===e[1]&&e[2].toUpperCase()===e[2]}})),i("submodules/dcgview/src/custom-attributes",["require"],(function(e){var t={};return{isCustomAttribute:function(e){return t.hasOwnProperty(e)},add:function(e,r){t[e]=r},parse:function(e,r){return(0,t[e])(r)}}})),i("submodules/dcgview/src/bindings",["require"],(function(e){return{add:function(e,t,r){var n=e._bindings[t];n?n.push(r):e._bindings[t]=[r]},invoke:function(e,t){var r=e._bindings[t];if(r)for(var n=r.length,i=0;i<n;i++)r[i]()}}})),i("submodules/dcgview/src/warnings",["require"],(function(e){var t=[];return{warn:function(e){try{throw new Error(e)}catch(e){console.warn(e);for(var r=0;r<t.length;r++)t[r](e)}},addWarningHandler:function(e){t.push(e)},removeWarningHandler:function(e){var r=t;t=[];for(var n=0;n<r.length;n++){var i=r[n];i!==e&&t.push(i)}}}})),i("submodules/dcgview/src/bind-attrs",["require","./attr-event-handler","./attr-generic","./is-event-handler","./custom-attributes","./bindings","./warnings"],(function(e){var t=e("./attr-event-handler"),r=e("./attr-generic"),n=e("./is-event-handler"),i=e("./custom-attributes"),o=e("./bindings"),a=e("./warnings"),s={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},l={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};function c(e,t,r){var n=r.bindings;if(n)for(var i in n){var c=n[i];i in s&&(c=c.bind(null,t)),i in l&&(c=function(e,t){var r=!1;return function(){r?a.warn(e+" is a one-time binding but was called multiple times"):(r=!0,t.apply(this,arguments))}}(i,c)),o.add(e,i,c)}}return function(e,o,a){if(o)for(var s in o){var l,u=function(e,o){if("function"!=typeof o)throw new Error('The "'+e+'" attr must be a function. It is: '+JSON.stringify(o));return i.isCustomAttribute(e)?i.parse(e,o):(n(e)?t:r)(e,o)}(s,o[s]);u&&(void 0!==(l=u.value)&&a.setAttribute(s,l),u.bindings&&c(e,a,u))}}})),i("submodules/dcgview/src/bind-text",["require","./bindings"],(function(e){var t=e("./bindings"),r=!1;return{bindText:function(e,n,i){if("function"!=typeof i)throw new Error("bindText expects a function");var o=i();null==o&&(o="");var a,s=document.createTextNode(o);r?((a=document.createElement("span")).appendChild(s),n.appendChild(a)):n.appendChild(s),t.add(e,"onUpdate",(function(){var e=i();null==e&&(e=""),o!==e&&(s.nodeValue=e,o=e)}))},enableSpanWrapping:function(){r=!0}}})),i("submodules/dcgview/src/dcg-element",["require","./bind-attrs","./bind-text","./const","./warnings"],(function(e){var t=e("./bind-attrs"),r=e("./bind-text").bindText,n=e("./const"),i=e("./warnings");function o(e,t){var r=document.createTextNode(t);e.appendChild(r)}function a(e,t,r){this.tagName=e,this.attrs=t,this.children=r}return a.prototype._isDCGElement=!0,a.prototype.renderToDocFrag=function(e,a){if(this._domNode)throw new Error("Cannot remount a DCGElement");var s=this.children,l=document.createElement(this.tagName);this._domNode=l,t(a,this.attrs,l),e.appendChild(l);for(var c=s.length,u=0;u<c;u++){var d=s[u];d._isDCGElement?d.renderToDocFrag(l,a):n.isConst(d)?o(l,d()):"function"==typeof d?r(a,l,d):(i.warn("Text should be a const or a getter: "+JSON.stringify(d)),o(l,d))}},a})),i("submodules/dcgview/src/create-element",["require","./dcg-element"],(function(e){var t=e("./dcg-element");return function(e,r){for(var n=[],i=arguments.length-1,o=2;o<=i;o++)!function e(t,r){if(null!=t)if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n],r);else r.push(t)}(arguments[o],n);if("string"==typeof e)return new t(e,r,n);if(e&&e._isDCGViewClass)return new e(r,n);throw new Error("createElement expects a String or DCGViewClass")}})),i("submodules/dcgview/src/mounting",["require","./bindings"],(function(e){var t=e("./bindings");function r(e){e.willMount&&e.willMount(),t.invoke(e,"willMount"),e._childViews.forEach(r)}function n(e){e._isMounted=!0,e.onMount&&e.onMount(),t.invoke(e,"onMount"),e._childViews.forEach(n)}function i(e){e.didMount&&e.didMount(),t.invoke(e,"didMount"),e._childViews.forEach(i)}function o(e){e.willUnmount&&e.willUnmount(),t.invoke(e,"willUnmount"),e._childViews.forEach(o)}function a(e){e._isMounted=!1,e._childViews.forEach(a),t.invoke(e,"onUnmount"),e.onUnmount&&e.onUnmount()}function s(e){e._childViews.forEach(s),t.invoke(e,"didUnmount"),e.didUnmount&&e.didUnmount()}return{renderToDocFrag:function(e,t){if(t&&t._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(e,this)},findRootNode:function(){for(var e=this._element;e._isDCGView;)e=e._element;return e._domNode},createNodeForView:function(e,t){var r=document.createDocumentFragment();return e.renderToDocFrag(r,t),r.firstChild},willMount:r,onMount:n,didMount:i,willUnmount:o,onUnmount:a,didUnmount:s,mountToNode:function(e,t,o){if(!e||!e._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!t||1!==t.nodeType)throw new Error("Must pass an HTMLElement for the node");if(t._mountedDCGView)throw new Error("This node is already mounted by a view");var a=new e(o),s=document.createDocumentFragment();return a.renderToDocFrag(s),t.innerHTML="",r(a),t._mountedDCGView=a,t.appendChild(s),n(a),i(a),a},unmountFromNode:function(e){var t=e._mountedDCGView;if(!t)throw new Error("This node is not mounted by a DCGView");o(t),e.innerHTML="",delete e._mountedDCGView,a(t),s(t)}}})),i("submodules/dcgview/src/update",["require","./bindings","./warnings"],(function(e){var t=e("./bindings"),r=e("./warnings");return{update:function(){if(!this._isMounted)return r.warn("Trying to update view that is not mounted. Ignoring update.");if(!this.shouldUpdate||this.shouldUpdate()){if(this.willUpdate&&this.willUpdate(),t.invoke(this,"willUpdate"),t.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var e=this._childViews,n=e.length,i=0;i<n;i++)e[i].update();t.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}}})),i("submodules/dcgview/src/spread",["require"],(function(e){return function(e){var t=arguments.length;if(t<2)return e;for(var r=1;r<t;r++)for(var n=arguments[r],i=Object.keys(n),o=i.length,a=0;a<o;a++){var s=i[a];e[s]=n[s]}return e}})),i("submodules/dcgview/src/create-class",["require","./create-element","./mounting","./update","./const","./spread"],(function(e){var t=e("./create-element"),r=e("./mounting"),n=e("./update"),i=e("./const"),o=e("./spread");return function(e){if(!e)throw new Error("must pass a spec to DCGView.createClass");if("function"!=typeof e.template)throw new Error("must pass a template function to DCGView.createClass");function a(e,t){this._setupProps(e,t),this.init&&this.init(),this._callTemplate()}for(var s in a.prototype._setupProps=function(e,t){if(e){for(var r in e){var n=e[r];if("function"!=typeof n&&void 0!==n)throw new Error('The "'+r+'" prop must be a function. It is: '+JSON.stringify(n))}this.props=e}else this.props={};this.children=t,this._childViews=[],this._bindings={}},a.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement")},a.prototype.bindFn=function(e){return e.bind(this)},a.prototype.findRootNode=r.findRootNode,a.prototype.renderToDocFrag=r.renderToDocFrag,a.prototype.const=i.makeConst,a.prototype.spread=o,a.prototype.createElement=t,a.prototype.update=n.update,e)if(e.hasOwnProperty(s)){if(a.prototype.hasOwnProperty(s))throw new Error("Cannot override the "+s+"() method");a.prototype[s]=e[s]}return a._isDCGViewClass=!0,a.prototype._isDCGView=!0,a.prototype._isDCGElement=!0,a}})),i("submodules/dcgview/src/attr-style",["require","./const","./attr"],(function(e){var t=e("./const"),r=e("./attr");function n(e){var t=e(),r=typeof t;if("string"==r)return t;if(!r||"object"!=r)throw new Error("Unsupported type returned from style getter: "+r);var n="";for(var i in t){var o=t[i];t.hasOwnProperty(i)&&null!=o&&(n?n+=";"+i+":"+o:n=i+":"+o)}return n}return function(e){var i,o=n(e);return t.isConst(e)||(i={onUpdate:function(t){var i=n(e);o!==i&&(r.update(t,"style",i),o=i)}}),{value:o,bindings:i}}})),i("submodules/dcgview/src/attr-class",["require","./const"],(function(e){var t=e("./const");function r(e){var t=e(),r=typeof t;if("string"==r)return t;if(!r||"object"!=r)throw new Error("Unsupported type returned from class getter: "+r);var n="";for(var i in t)t.hasOwnProperty(i)&&t[i]&&(n?n+=" "+i:n=i);return n}var n=/^\s+|\s+$/g,i=/\s+/;return function(e){var o,a=r(e);return t.isConst(e)||(o={onUpdate:function(t){var o=r(e);a!==o&&(t.className===a?t.className=o:t.className=function(e,t,r){for(var o=[],a=e.className.replace(n,"").split(i),s=t.replace(n,"").split(i),l={},c=s.length-1;0<=c;c--)l[s[c]]=!0;var u=a.length;for(c=0;c<u;c++){var d=a[c];l.hasOwnProperty(d)||o.push(d)}return r?o.length?r+" "+o.join(" "):r:o.join(" ")}(t,a,o),a=o)}}),{value:a,bindings:o}}})),i("submodules/dcgview/src/attr-lifecycle",["require","./const"],(function(e){var t=e("./const");return function(e){return function(r){if("function"!=typeof r)throw new Error("The "+e+" attribute expects a function for the value");if(t.isConst(r))throw new Error("The "+e+" attribute does not expect a const for the value");var n={bindings:{}};return n.bindings[e]=r,n}}})),i("submodules/dcgview/src/longest-subsequence",["require"],(function(e){return function(e){for(var t,r=e.length,n=new Array(r),i=new Array(r+1),o=0,a=0;a<r;a++){if(e[i[o]]<e[a])t=o+1;else{for(var s=1,l=o-1;s<=l;){var c=Math.ceil((s+l)/2);e[i[c]]<e[a]?s=c+1:l=c-1}t=s}n[a]=i[t-1],i[t]=a,o<t&&(o=t)}var u=new Array(o),d=i[o];for(a=o-1;0<=a;a--)u[a]=e[d],d=n[d];return u}})),i("submodules/dcgview/src/compute-key-mutations",["require","./longest-subsequence"],(function(e){var t=e("./longest-subsequence");return function(e,r){for(var n,i={},o=[],a=[],s=0;s<r.length;s++)i[n=r[s]]=s;for(s=0;s<e.length;s++)void 0===i[n=e[s]]&&o.push(n);var l=[];for(s=0;s<e.length;s++){var c=i[n=e[s]];void 0!==c&&l.push(c)}var u=t(l),d={};for(s=0;s<u.length;s++)d[n=r[u[s]]]=!0;for(s=r.length-1;0<=s;s--)d[n=r[s]]||a.push({key:n,beforeKey:r[s+1]});return{removes:o,inserts:a}}})),i("submodules/dcgview/src/for",["require","./create-class","./compute-key-mutations","./const","./mounting"],(function(e){var t=e("./create-class"),r=e("./compute-key-mutations"),n=e("./const"),i=e("./mounting"),o=t({template:function(){return this.children[0]}});return t({_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],"string"!==this._chosenKeyType&&"number"!==this._chosenKeyType))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var r=0;r<t.length;r++){var n=t[r];if(typeof n!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(n)+" is not a "+this._chosenKeyType);if(n in this._keyToItem)throw new Error("The key: "+JSON.stringify(n)+" is not unique");this._keyToItem[n]=e[r]}return t},createViewForKey:function(e){var t=this._keyToItem[e],r=this._viewFunction.call(this,t,e),n=r;return n._isDCGView||(n=this.createElement(o,null,r)),this._keyToView[e]=n},template:function(){if(this._keyToView={},"function"!=typeof this.props.each)throw new Error("<For each={}> must be a function");if(1!==this.children.length)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(1!==e.children.length)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(n.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var r=[],i=0;i<this._keys.length;i++){var o=this._keys[i];r.push(this.createViewForKey(o))}return e.children=r,e},detachAllRemovedViews:function(){for(var e,t=this._childViews,r=0,n=t.length,i=0;i<n;i++)(e=t[i])._will_be_unmounted_?r++:t[i-r]=e;t.splice(n-r,r)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;for(var n,o,a,s,l,c=this.findRootNode(),u=r(e,t),d=[],p=u.removes.length-1;0<=p;p--)l=u.removes[p],d.push(this._keyToView[l]);for(d.forEach(i.willUnmount),p=0;p<u.removes.length;p++)l=u.removes[p],n=this._keyToView[l],delete this._keyToView[l],n._will_be_unmounted_=!0,c.removeChild(n.findRootNode());0<d.length&&this.detachAllRemovedViews(),d.forEach(i.onUnmount),d.forEach(i.didUnmount);var h=[];for(p=u.inserts.length-1;0<=p;p--)(l=u.inserts[p].key)in this._keyToView||(n=this.createViewForKey(l),h.push(n),i.createNodeForView(n,this));for(h.forEach(i.willMount),p=0;p<u.inserts.length;p++)s=u.inserts[p],o=this._keyToView[s.key].findRootNode(),a=void 0!==s.beforeKey?this._keyToView[s.beforeKey].findRootNode():null,c.insertBefore(o,a);h.forEach(i.onMount),h.forEach(i.didMount);var g=this._childViews,f=g.length-h.length;for(p=0;p<f;p++)g[p].update()}})})),i("submodules/dcgview/src/switch",["require","./create-class","./const","./mounting"],(function(e){var t=e("./create-class"),r=e("./const"),n=e("./mounting"),i=t({template:function(){return this.children[0]}});return t({_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);return null==e&&(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,e)},template:function(){if(this._key=void 0,"function"!=typeof this.props.key)throw new Error("<Switch key={}> must be a function");if(1!==this.children.length)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(r.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e,t,r,i=this._key;this.updateKey(),i===this._key?this._element.update():(e=this.findRootNode(),t=document.createTextNode(""),e.parentNode.insertBefore(t,e),n.willUnmount(this._element),this._childViews=[],e.parentNode.removeChild(e),n.onUnmount(this._element),n.didUnmount(this._element),this._element=this.createView(),r=n.createNodeForView(this._element,this),n.willMount(this._element),t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),n.onMount(this._element),n.didMount(this._element))}})})),i("submodules/dcgview/src/switch-union",["require","./create-class","./mounting","./create-element"],(function(e){var t=e("./create-class"),r=e("./mounting"),n=e("./create-element"),i=t({template:function(){return this.children[0]}}),o=t({_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var e=this.props.buildChildView(this._case);return null==e&&(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,e)},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var e,t,n,i=this._case;this.updateCase(),i===this._case?this._element.update():(e=this.findRootNode(),t=document.createTextNode(""),e.parentNode.insertBefore(t,e),r.willUnmount(this._element),this._childViews=[],e.parentNode.removeChild(e),r.onUnmount(this._element),r.didUnmount(this._element),this._element=this.createView(),n=r.createNodeForView(this._element,this),r.willMount(this._element),t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t),r.onMount(this._element),r.didMount(this._element))}});function a(e,t,r){return n(o,{getCase:function(){var r=t();return e?r&&r[e]:r},buildChildView:function(e){var n=r[e];if(n)return n(t)}})}return function(e,t){return"string"==typeof e?a.bind(this,e,t):a(void 0,e,t)}})),i("submodules/dcgview/src/if",["require","./create-class","./const","./switch"],(function(e){var t=e("./create-class"),r=e("./const"),n=e("./switch");return t({_isDCGIf:!0,template:function(){if("function"!=typeof this.props.predicate)throw new Error("<If predicate={}> must be a function");if(1!==this.children.length)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+e)}if(r.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var t=function(){return!!this.props.predicate()}.bind(this),i=function(e){if(e)return this._viewFunction()}.bind(this);return this.createElement(n,{key:t},i)}})})),i("submodules/dcgview/src/if-defined",["require","./create-class","./mounting","./create-element"],(function(e){var t=e("./create-class"),r=e("./mounting"),n=e("./create-element"),i=t({template:function(){return this.children[0]}}),o=t({_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var e;return this._isDefined&&(e=this.props.buildChildView()),null==e&&(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,e)},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var e,t,n,i=this._isDefined;this.updateIsDefined(),i===this._isDefined?this._element.update():(e=this.findRootNode(),t=document.createTextNode(""),e.parentNode.insertBefore(t,e),r.willUnmount(this._element),this._childViews=[],e.parentNode.removeChild(e),r.onUnmount(this._element),r.didUnmount(this._element),this._element=this.createView(),n=r.createNodeForView(this._element,this),r.willMount(this._element),t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t),r.onMount(this._element),r.didMount(this._element))}});return function(e,t){return n(o,{isDefined:function(){return null!=e()},buildChildView:function(){return t(e)}})}})),i("submodules/dcgview/src/if-else",["require","./switch-union"],(function(e){var t=e("./switch-union");return function(e,r){return t((function(){return e()?"true":"false"}),r)}})),i("submodules/dcgview/src/textarea",["require","./create-class","./spread"],(function(e){var t=e("./create-class"),r=e("./spread");return t({computeValue:function(){var e=this.props.value();return null==e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var e=r({},this.props,{onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.disabled&&(e.disabled=function(){return!!this.props.disabled()||void 0}.bind(this)),delete e.value,this.createElement("textarea",e,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})})),i("submodules/dcgview/src/input",["require","./create-class","./spread"],(function(e){var t=e("./create-class"),r=e("./spread");return t({computeValue:function(){var e=this.props.value();return null==e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var e=r({},this.props,{value:this.const(this.computeValue()),onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.onEnterPressed&&(e.onKeypress=function(e){13===e.which&&this.props.onEnterPressed()}.bind(this)),this.props.disabled&&(e.disabled=function(){return!!this.props.disabled()||void 0}.bind(this)),e.hasOwnProperty("tabindex")||(e.tabindex=function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}.bind(this)),this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})})),i("submodules/dcgview/src/checkbox",["require","./create-class","./spread"],(function(e){var t=e("./create-class"),r=e("./spread");return t({computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=r({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:function(e){this.props.onChange(e.target.checked),this._isMounted&&this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})})),i("submodules/dcgview/src/components",["require","./for","./switch","./switch-union","./if","./if-defined","./if-else","./textarea","./input","./checkbox"],(function(e){return{For:e("./for"),Switch:e("./switch"),SwitchUnion:e("./switch-union"),If:e("./if"),IfDefined:e("./if-defined"),IfElse:e("./if-else"),Textarea:e("./textarea"),Input:e("./input"),Checkbox:e("./checkbox")}})),i("submodules/dcgview/src/class",["require","./create-class"],(function(e){return e("./create-class")({template:function(){}})})),i("submodules/dcgview/src/dcg-view",["require","./create-element","./create-class","./mounting","./spread","./const","./custom-attributes","./attr-style","./attr-class","./attr-lifecycle","./components","./warnings","./bind-text","./class"],(function(e){var t=e("./create-element"),r=e("./create-class"),n=e("./mounting"),i=e("./spread"),o=e("./const"),a=e("./custom-attributes"),s=e("./attr-style"),l=e("./attr-class"),c=e("./attr-lifecycle"),u=e("./components"),d=e("./warnings"),p=e("./bind-text").enableSpanWrapping,h=e("./class"),g={createElement:t,createClass:r,mountToNode:n.mountToNode,unmountFromNode:n.unmountFromNode,spread:i,const:o.makeConst,isConst:o.isConst,addCustomAttribute:a.add,Components:u,addWarningHandler:d.addWarningHandler,removeWarningHandler:d.removeWarningHandler,enableSpanWrapping:p,Class:h};return g.addCustomAttribute("style",s),g.addCustomAttribute("class",l),g.addCustomAttribute("willMount",c("willMount")),g.addCustomAttribute("onMount",c("onMount")),g.addCustomAttribute("didMount",c("didMount")),g.addCustomAttribute("willUnmount",c("willUnmount")),g.addCustomAttribute("onUnmount",c("onUnmount")),g.addCustomAttribute("didUnmount",c("didUnmount")),g.addCustomAttribute("willUpdate",c("willUpdate")),g.addCustomAttribute("onUpdate",c("onUpdate")),g.addCustomAttribute("didUpdate",c("didUpdate")),g})),i("submodules/dcgview/dcgview",["require","./src/dcg-view"],(function(e){return e("./src/dcg-view")})),i("lib/urlparser",["require","exports"],(function(e,t){"use strict";function r(e,t){return new RegExp("[?|&]"+t+"(=|&|;|$)").test(e)}function n(e,t,r){if(t!==encodeURIComponent(t))throw new Error("Programming error: parameter name should be URL-safe without encoding.");var n=encodeURIComponent(r);if(e.length){var i=e.split("#"),o=/\?/.test(e)?i[0]+"&"+t+"="+n:i[0]+"?"+t+"="+n;return void 0!==i[1]?o+"#"+i[1]:o}return"?"+t+"="+n}function i(e,t,r){var n=new RegExp("([?|&])"+t+"=([^&;]+?)(&|#|;|$)").exec(e);if(!n)return e;var i=n[1],o=""+i+t+"="+n[2],a=""+i+t+"="+encodeURIComponent(r);return e.replace(o,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.setParameter=t.deleteParameter=t.replaceParameter=t.pushParameter=t.hasParameter=t.getParameter=void 0,t.getParameter=function(e,t){var r=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e);return r?decodeURIComponent(r[1].replace(/\+/g,"%20")):null},t.hasParameter=r,t.pushParameter=n,t.replaceParameter=i,t.deleteParameter=function(e,t){var r=new RegExp("([?|&])"+t+"=([^&;]+?)(&|#|;|$)").exec(e);if(!r)return e;var n=""+r[1]+t+"="+r[2],i=e.replace(n,"");return"&"===i[0]?i.replace("&","?"):i},t.setParameter=function(e,t,o){return(r(e,t)?i:n)(e,t,o)}})),i("lib/retain-lang",["require","exports","./parse-query-params","./urlparser"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retainLang=t.domainNotDesmos=void 0;var i=/lang=[A-Za-z]+/,o=/(cl|learn|support).desmos.com/,a=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,s=/(^desmos\.com$)|(\.desmos.com$)/;function l(e){var t=a.exec(e);if(t){var r=t[1];return!s.test(r)}return!1}t.domainNotDesmos=l,t.retainLang=function(e,t){var a=r.getQueryParams(),s=void 0!==t?t:a.lang?""+a.lang:"";return""===e||""===s||i.test(e)||o.test(e)||l(e)?e:n.setParameter(e,"lang",s)}})),i("loadcss!dcgview-shim",(function(){})),i("dcgview",["require","exports","submodules/dcgview/dcgview","jquery","bugsnag","lib/retain-lang","loadcss!dcgview-shim"],(function(e,t,r,n,i,o){"use strict";return r.addWarningHandler((function(e){return i.notify(e)})),r.addCustomAttribute("href",(function(e){var t=o.retainLang(e()),r={value:""+o.retainLang(e()),bindings:{onMount:function(e){if(!n(e).is("a")&&!n(e).is("use"))throw new Error("Cannot have an href on a non-link element.")}}};return r.bindings.onUpdate=function(r){var n=o.retainLang(e());t!==n&&(t=n,r.setAttribute("href",n))},r})),r.addCustomAttribute("onTap",(function(e){return{value:"",bindings:{onMount:function(t){n(t).on("dcg-tap",e)}}}})),r.addCustomAttribute("ignoreRealClick",(function(e){return{bindings:{onMount:function(t){n(t).on("click",(function(t){e()&&t.preventDefault()}))}}}})),r.addCustomAttribute("onTapStart",(function(e){return{bindings:{onMount:function(t){n(t).on("dcg-tapstart",e)}}}})),r.addCustomAttribute("onTapMove",(function(e){return{bindings:{onMount:function(t){n(t).on("dcg-tapmove",e)}}}})),r.addCustomAttribute("onTapEnd",(function(e){return{bindings:{onMount:function(t){n(t).on("dcg-tapend",e)}}}})),r.addCustomAttribute("onLongHold",(function(e){return{bindings:{onMount:function(t){n(t).on("dcg-longhold",e)}}}})),r.addCustomAttribute("manageFocus",(function(e){return void 0===e()?{}:{bindings:{onMount:function(t){e().shouldBeFocused()&&t.focus(),t.onfocus=function(t){e().shouldBeFocused()||e().onFocusedChanged(!0,t)},t.onblur=function(t){e().shouldBeFocused()&&e().onFocusedChanged(!1,t)}},onUpdate:function(t){var r=e().shouldBeFocused(),n=document.activeElement===t;r&&!n?t.focus():n&&!r&&t.blur()},willUnmount:function(e){e.onfocus=null,e.onblur=null}}}})),r})),i("expressions/braille-input",["require","exports","tslib","dcgview","jquery"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=n.Components.Input,s=(o=n.Class,r.__extends(l,o),l.prototype.init=function(){var e;for(this.ASCIICharacters=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0},e=0;e<this.ASCIICharacters.length;e++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));for(e=0;e<this.HomeRowCharacters.length;e++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))},l.prototype.template=function(){var e=this;return n.createElement(a,{class:this.const("dcg-braille-input dcg-do-blur"),tabindex:function(){return e.props.tabindex?e.props.tabindex():0},readonly:function(){return e.props.isStatic()?"true":void 0},autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeydown:this.bindFn(this.onKeydown),onKeyup:this.bindFn(this.onKeyup),onInput:this.bindFn(this.props.onInput),value:function(){return e.props.value()},"aria-label":function(){return e.props.ariaLabel()||""},didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:function(){return e.props.placeholder?e.props.placeholder():""}})},l.prototype.didMount=function(e){var t=this;this.rootNode=e,i(this.rootNode).on("focus",(function(e){!0!==t.props.shouldFocus()&&t.props.onFocusedChanged(!0,e.originalEvent||e)})).on("blur",(function(e){!1!==t.props.shouldFocus()&&t.props.onFocusedChanged(!1,e.originalEvent||e)})),this.props.didMount(e),this.updateFocus()},l.prototype.didUpdate=function(){this.updateFocus()},l.prototype.updateFocus=function(){this.rootNode&&(this.props.shouldFocus()&&document.activeElement!==this.rootNode&&this.rootNode.focus(),this.props.shouldFocus()||document.activeElement!==this.rootNode||this.rootNode.blur())},l.prototype.onKeydown=function(e){var t=this.charCodes.indexOf(e.which);this.props.isStatic()||!this.isSixKeyInput()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||-1===t?this.props.onKeydown&&this.props.onKeydown(e):(this.sixKeyModel=r.__assign(r.__assign({},this.sixKeyModel),{keysDown:this.addKey(this.sixKeyModel.keysDown,t),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,t)}),e.preventDefault())},l.prototype.onKeyup=function(e){var t=this.charCodes.indexOf(e.which),n=!1;return this.props.isStatic()||!this.isSixKeyInput()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||-1===t?n=!0:(this.sixKeyModel=r.__assign(r.__assign({},this.sixKeyModel),{keysDown:this.removeKey(this.sixKeyModel.keysDown,t)}),0===this.sixKeyModel.keysDown&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel=r.__assign(r.__assign({},this.sixKeyModel),{stickyKeysDown:0}))),n||e.preventDefault(),n},l.prototype.addKey=function(e,t){return e|1<<t},l.prototype.removeKey=function(e,t){return e&~(1<<t)},l.prototype.bitsToASCII=function(e){return String.fromCharCode(this.ASCIITable[e])},l.prototype.addCharacter=function(e){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(e,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))},l.prototype.isSixKeyInput=function(){return"function"==typeof this.props.sixKeyInput&&this.props.sixKeyInput()},l);function l(){return null!==o&&o.apply(this,arguments)||this}t.default=s})),i("vendor/mathquill",["require","exports","toplevel/mathquill","mathquill"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQ=void 0,t.MQ=r.getInterface(1).config(n)})),i("loadcss!dcgview-helpers/static-mathquill-view",(function(){})),i("dcgview-helpers/static-mathquill-view",["require","exports","tslib","dcgview","vendor/mathquill","jquery","lib/conditional_blur","loadcss!./static-mathquill-view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=n.Class,r.__extends(c,s),c.prototype.template=function(){var e=this;return 1===this.children.length?this.children[0]:n.createElement("div",{didMount:function(t){return e.didMountMathquill(t)}})},c.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},c.prototype.didMountMathquill=function(e){this.staticMath=i.MQ.StaticMath(e,this.props.config()),o(e).off(".mathquill").addClass("dcg-static-mathquill-view").on("dcg-tapstart",(function(){a.default()})),this.updateMathquill()},c.prototype.didUpdate=function(){this.updateMathquill()},c.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex()},c.prototype.updateMathquillLatex=function(){var e;this.staticMath&&(e=this.props.latex(),this.lastLatex!==e&&(this.staticMath.latex(e),this.lastLatex=e,this.props.onReflow&&this.props.onReflow()))},c.prototype.updateMathquillAria=function(){var e;this.staticMath&&(!this.props.getAriaLabel||(e=this.props.getAriaLabel())!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(e))},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("loadcss!lib/tooltip",(function(){})),i("lib/tooltip",["require","exports","tslib","keys","dcgview","jquery","underscore","dcgview-helpers/static-mathquill-view","loadcss!./tooltip"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var l,c=i.Components.IfElse,u=(l=i.Class,r.__extends(d,l),d.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){var t={};return t[e.getCustomClassName()]=!0,t["dcg-tooltip-positioning-container"]=!0,t["dcg-latex-tooltip-positioning-container"]=e.props.renderAsLatex(),t["dcg-tooltip-gravity-ne-se"]="ne"===e.props.gravity()||"se"===e.props.gravity(),t["dcg-tooltip-gravity-nw-sw"]="nw"===e.props.gravity()||"sw"===e.props.gravity(),t["dcg-tooltip-gravity-n-s"]="n"===e.props.gravity()||"s"===e.props.gravity(),t["dcg-tooltip-gravity-e-w"]="e"===e.props.gravity()||"w"===e.props.gravity(),t},style:function(){return{top:e.props.hitAreaRect().top+(e.props.offset().top||0)+"px",left:e.props.hitAreaRect().left+(e.props.offset().left||0)+"px",width:e.props.hitAreaRect().width+"px",height:e.props.hitAreaRect().height+"px"}}},i.createElement("div",{class:i.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},c((function(){return e.props.renderAsLatex()}),{true:function(){return i.createElement("div",{class:function(){return{"dcg-tooltip-message":!0,"dcg-latex":!0,"dcg-sticky-not-stuck":e.props.isStickyAndNotStuck(),"dcg-tooltip-overflow":e.messageOverflows()}},style:function(){return{"max-width":e.getMaxWidth()+"px"}},didMount:function(t){e.tooltipMessage=t}},i.createElement(s.default,{config:e.const({}),latex:function(){return e.props.tooltip()}}))},false:function(){return i.createElement("div",{class:i.const("dcg-tooltip-message"),style:function(){return{background:e.getBackgroundColor(),cursor:e.props.isStickyAndNotStuck()?"pointer":"default"}}},e.props.tooltip)}})),i.createElement("div",{class:i.const("dcg-tooltip-arrow"),style:function(){return e.props.renderAsLatex()?e.getArrowWithBorderStyle():e.getSolidArrowStyle()}}))},d.prototype.getCustomClassName=function(){return this.props.class?this.props.class():""},d.prototype.messageOverflows=function(){return this.tooltipMessage&&this.tooltipMessage.getBoundingClientRect().width>=this.getMaxWidth()},d.prototype.getArrowWithBorderStyle=function(){var e=this.props.gravity(),t="10px",n={width:"8px",height:"8px",border:"1px solid #bbb",background:this.getBackgroundColor(),opacity:this.props.isStickyAndNotStuck()?".95":"1"};switch(e){case"s":return r.__assign(r.__assign({},n),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"sw":return r.__assign(r.__assign({},n),{top:"100%",right:t,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"se":return r.__assign(r.__assign({},n),{top:"100%",left:t,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return r.__assign(r.__assign({},n),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"nw":return r.__assign(r.__assign({},n),{bottom:"100%",right:t,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"ne":return r.__assign(r.__assign({},n),{bottom:"100%",left:t,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return r.__assign(r.__assign({},n),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return r.__assign(r.__assign({},n),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return e}},d.prototype.getSolidArrowStyle=function(){var e=this.props.gravity(),t="10px",r=this.getBackgroundColor(),n="transparent transparent "+r+" transparent",i=r+" transparent transparent transparent",o="transparent "+r+" transparent transparent",a="transparent transparent transparent "+r,s="-5px";switch(e){case"s":return{top:"100%",left:"50%",border:"5px solid transparent","border-color":n,"margin-top":s,"margin-left":s};case"sw":return{top:"100%",right:t,border:"5px solid transparent","border-color":n,"margin-top":s,"margin-left":s};case"se":return{top:"100%",left:t,border:"5px solid transparent","border-color":n,"margin-top":s,"margin-left":s};case"n":return{bottom:"100%",left:"50%",border:"5px solid transparent","border-color":i,"margin-bottom":s,"margin-left":s};case"nw":return{bottom:"100%",right:t,border:"5px solid transparent","border-color":i,"margin-bottom":s,"margin-left":s};case"ne":return{bottom:"100%",left:t,border:"5px solid transparent","border-color":i,"margin-bottom":s,"margin-left":s};case"e":return{top:"50%",left:"100%",border:"5px solid transparent","border-color":o,"margin-left":"-5px","margin-top":s};case"w":return{top:"50%",right:"100%",border:"5px solid transparent","border-color":a,"margin-right":s,"margin-top":s};default:return e}},d.prototype.getBackgroundColor=function(){return this.props.renderAsLatex()?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"},d.prototype.getMaxWidth=function(){var e=this.props.gravity(),t=this.props.hitAreaRect().left+(this.props.offset().left||0),r=t+this.props.hitAreaRect().width,n=.5*this.props.hitAreaRect().width+t,i=window.innerWidth-5;switch(e){case"se":case"ne":case"e":return i-t;case"sw":case"nw":case"w":return r-5;case"s":case"n":return 2*Math.min(i-n,n-5);default:return e}},d.prototype.getMessageStyle=function(){var e=this.props.hitAreaRect(),t=this.props.gravity();switch(t){case"s":return{top:"100%",transform:"translate(-50%, 0)",left:.5*e.width+"px","margin-top":"5px","text-align":"center"};case"sw":return{top:"100%",right:"0","margin-top":"5px","text-align":"right"};case"se":return{top:"100%","margin-top":"5px","text-align":"left"};case"n":return{bottom:"100%",transform:"translate(-50%, 0)",left:.5*e.width+"px","margin-bottom":"5px","text-align":"center"};case"nw":return{bottom:"100%",right:"0","margin-bottom":"5px","text-align":"right"};case"ne":return{bottom:"100%","margin-bottom":"5px","text-align":"left"};case"e":return{transform:"translate(0, -50%)",left:"100%",top:.5*e.height+"px","margin-left":"5px","text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",top:.5*e.height+"px","margin-right":"5px","text-align":"right"};default:return t}},d);function d(){return null!==l&&l.apply(this,arguments)||this}var p,h=(p=i.Class,r.__extends(g,p),g.prototype.init=function(){this.uuid=a.uniqueId(),this.isMounted=!0},g.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-tooltip-hit-area-container"),handleevent:i.const("true"),didMount:function(t){e.hitAreaNode=t,e.setupEventListeners(e.hitAreaNode)},onTap:function(){e.shouldHideOnTargetClick()?e.hideTooltip():e.shouldShowOnTargetClick()?e.showTooltip():e.shouldStickOnTargetClick()&&(e.isStuck?(e.clearTimeouts(),e.hideTooltip()):(e.showTooltip(),e.stickTooltip()))}},this.children)},g.prototype.didUpdate=function(){this.updateTooltip()},g.prototype.updateTooltip=function(){var e,t,r,n,i,o,a;this.wrapperRef&&(this.props.tooltip()?(e=this.hitAreaNode.getBoundingClientRect(),t=this.wrapperRef.elt.getBoundingClientRect(),n=(r=this.wrapperRef).originalTop,i=r.originalLeft,o=e.top-t.top,a=e.left-t.left,3<Math.abs(o-n)||3<Math.abs(a-i)?this.hideTooltip():this.wrapperRef.view.update()):this.hideTooltip())},g.prototype.handleShowEvent=function(e){var t;this.props.disabled&&this.props.disabled()||(t=this.props.delay?this.props.delay():500,this.clearTimeouts(),this.showTooltipTimeout=setTimeout(e,t))},g.prototype.handleHideEvent=function(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)},g.prototype.setupEventListeners=function(e){var t=this;o(e).on("tipsyshow",(function(r){r.target===e&&t.handleShowEvent((function(){t.showTooltip()}))})).on("tipsyhide",(function(r){r.target!==e||t.isStuck||t.handleHideEvent()})),this.shouldShowOnTargetClick()&&this.setUpHideOnExternalMousedown()},g.prototype.willUnmount=function(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()},g.prototype.setUpHideOnExternalMousedown=function(){var e=this;o(document).on("mousedown.dcg-tooltip-"+this.uuid+" touchstart.dcg-tooltip-"+this.uuid+" pointerdown.dcg-tooltip-"+this.uuid,(function(t){e.wrapperRef&&(o(t.target).closest(e.hitAreaNode).length||o(t.target).closest(e.wrapperRef.elt).length||e.hideTooltip())}))},g.prototype.stickTooltip=function(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))},g.prototype.clearTimeouts=function(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)},g.prototype.showTooltip=function(){var e,t,r,a,s,l,c,d,p=this;this.isMounted&&(this.wrapperRef||this.props.tooltip()&&(e=this.hitAreaNode.getBoundingClientRect(),(t=document.createElement("div")).className="dcg-tooltip-mount-pt",o(this.hitAreaNode).closest(".dcg-tap-container")[0].appendChild(t),r=t.getBoundingClientRect(),a=e.left-r.left,s=e.top-r.top,l={tooltip:this.props.tooltip,class:this.props.class,isStickyAndNotStuck:function(){return p.shouldStickOnTargetClick()&&!p.isStuck},offset:function(){return p.props.offset?p.props.offset():{}},gravity:function(){return p.props.gravity?p.props.gravity():"s"},renderAsLatex:function(){return!!p.props.renderAsLatex&&p.props.renderAsLatex()},hitAreaRect:function(){return{top:s||0,left:a||0,width:e.width||0,height:e.height||0}}},this.setupEventListeners(t),o(t).on("dcg-tap",(function(){p.shouldStickOnTargetClick()&&p.stickTooltip()})),c=i.mountToNode(u,t,l),o(document).on("keydown.dcg-tooltip-"+this.uuid,(function(e){n.lookup(e)===n.ESCAPE&&p.hideTooltip()})),d=function(){return p.updateTooltip()},window.addEventListener("scroll",d,!0),this.wrapperRef={elt:t,view:c,originalLeft:a,originalTop:s,onScroll:d}))},g.prototype.hideTooltip=function(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,o(document).off(".dcg-tooltip-"+this.uuid),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),i.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)},g.prototype.shouldStickOnTargetClick=function(){return!!this.props.targetClickBehavior&&"stick"===this.props.targetClickBehavior()},g.prototype.shouldShowOnTargetClick=function(){return!!this.props.targetClickBehavior&&"show"===this.props.targetClickBehavior()},g.prototype.shouldHideOnTargetClick=function(){return!this.props.targetClickBehavior||"hide"===this.props.targetClickBehavior()},g);function g(){return null!==p&&p.apply(this,arguments)||this}t.Tooltip=h})),i("lib/abraham-helpers",["require","exports","abraham"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brailleToLatex=t.latexToBraille=void 0,t.latexToBraille=function(e,t){return"nemeth"===t?r.latexToNemeth(e):"ueb"===t?r.latexToUeb(e):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}},t.brailleToLatex=function(e,t){return"nemeth"===t?r.nemethToLatex(e):"ueb"===t?r.uebToLatex(e):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}})),i("core/lib/count-latex-tokens",["require","exports","core/math/parser/latex-lexer"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countLatexTokens=void 0,t.countLatexTokens=function(e){for(var t=r.lex(e),n=0;!r.isDone(t);)n+=1,t=r.advance(t);return n}})),i("loadcss!dcgview-helpers/mathquill-view",(function(){})),i("dcgview-helpers/mathquill-view",["require","exports","tslib","keys","browser","dcgview","vendor/mathquill","jquery","./static-mathquill-view","../core/lib/count-latex-tokens","loadcss!./mathquill-view"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXPRESSION_TOKEN_LIMIT=void 0;var u=o.Components.If;t.EXPRESSION_TOKEN_LIMIT=100;var d,p=(d=o.Class,r.__extends(h,d),h.prototype.template=function(){var e=this;return 1===this.children.length?this.children[0]:o.createElement("div",{class:o.const("dcg-mq-container")},o.createElement(u,{predicate:function(){return 0<e.getPlaceholder().trim().length}},(function(){return o.createElement("span",{class:o.const("dcg-mq-placeholder")},o.createElement(l.default,{config:function(){return e.props.config()},latex:function(){return e.getPlaceholder()}}))})),o.createElement("div",{class:function(){return{"dcg-math-field":!0,"dcg-no-fadeout":e.props.noFadeout&&e.props.noFadeout(),"dcg-invalid":e.props.hasError(),"dcg-focus":e.props.isFocused()}},didMount:function(t){return e.didMountMathquill(t)},"data-dcg-label":function(){return e.props.dataLabelAttributeValue?e.props.dataLabelAttributeValue():void 0}}))},h.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},h.prototype.willUnmount=function(){this.$mathField.off(".view"),this.mathField=void 0},h.prototype.getPlaceholder=function(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()},h.prototype.didMountMathquill=function(e){var t=this,o=r.__assign(r.__assign({},this.props.config()),{handlers:{reflow:function(e){t.props.onReflow&&t.mathField&&t.props.onReflow(e)}},onCut:function(){t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},onPaste:function(){t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},overrideTypedText:function(e){t.mathField&&t.viewCanAcceptText(e)&&(t.props.onUserTypedText?t.props.onUserTypedText(e):(t.mathField.typedText(e),t.props.onUserChangedLatex(t.mathField.latex())))},overrideKeystroke:function(e,r){if("Backspace"===e&&r.preventDefault(),t.mathField){if("Spacebar"===e&&t.props.disableSpace&&t.props.disableSpace())return r.preventDefault();var i,o;r.originalEvent&&("Up"!==(i=n.lookup(r.originalEvent))&&"Down"!==i&&"Left"!==i&&"Right"!==i&&"Esc"!==i||(o=[],r.ctrlKey&&o.push("Ctrl"),r.metaKey&&o.push("Meta"),r.altKey&&o.push("Alt"),r.shiftKey&&o.push("Shift"),e=o.length?(o.push(i),o.join("-")):i)),t.props.onUserPressedKey?t.props.onUserPressedKey(e,r):(t.mathField.keystroke(e,r),t.props.onUserChangedLatex(t.mathField.latex()))}}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(o.substituteTextarea=function(){return s('<textarea autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">')[0]}),this.$mathField=s(e),this.mathField=a.MQ.MathField(e,o),e._mqMathFieldInstance=this.mathField,(e._mqViewInstance=this).$mathField.on("focusin.view focusout.view",(function(e){return t.onFocusEvent(e)})).on("paste.view",(function(e){return t.onPasteEvent(e)})),(i.IS_IOS||i.IS_ANDROID)&&this.$mathField.on("keypress.view",(function(e){return t.onKeypressEvent(e)})),this.hookupMQTapTouch(),this.updateMathquill()},h.prototype.didUpdate=function(){this.updateMathquill()},h.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel()},h.prototype.onFocusEvent=function(e){var t=this.isFocused();t!==this.shouldBeFocused()&&this.props.onFocusedChanged(t,e)},h.prototype.onPasteEvent=function(e){var t="",r=window.clipboardData,n=e.originalEvent;r&&r.getData?t=r.getData("Text"):n&&n.clipboardData&&n.clipboardData.getData&&(t=n.clipboardData.getData("text/plain"));var i=this.viewCanAcceptText(t);return!i&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),i},h.prototype.viewCanAcceptText=function(e){return h.canAcceptText(this.mathField,this.props.capExpressionSize(),e)},h.canAcceptText=function(e,r,n){if(!e)return!1;if(!r)return!0;var i=e.latex();return c.countLatexTokens(i)+c.countLatexTokens(n)<=t.EXPRESSION_TOKEN_LIMIT},h.prototype.onKeypressEvent=function(e){var t;e.stopPropagation(),e.preventDefault(),!this.mathField||(t=e.key&&1===e.key.length?e.key:void 0)&&this.viewCanAcceptText(t)&&(this.props.onUserTypedText?this.props.onUserTypedText(t):(this.mathField.typedText(t),this.props.onUserChangedLatex(this.mathField.latex())))},h.prototype.hookupMQTapTouch=function(){var e=this;this.$mathField.on("dcg-tap.view",(function(t){var r,n;"touch"===t.device&&e.mathField&&(r=t.originalEvent.changedTouches[0],e.mathField.clickAt(r.clientX,r.clientY,r.target),e.isFocused()||e.mathField.focus(),n=void 0,setTimeout((function(){n=Date.now()}),0),e.mathField.ignoreNextMousedown((function(){return void 0===n||Date.now()-n<500})))}))},h.prototype.updateMathquillAria=function(){var e;!this.mathField||(e=this.props.getAriaLabel())!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)},h.prototype.updateMathquillPostLabel=function(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)},h.prototype.updateMathquillLatex=function(){var e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.props.capExpressionSize()&&c.countLatexTokens(e)>t.EXPRESSION_TOKEN_LIMIT||(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e)))},h.prototype.updateMathquillFocused=function(){var e,t;this.mathField&&(e=this.isFocused(),(t=this.shouldBeFocused())&&t!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),e!==(this.wasFocusedLastUpdate=t)&&(t?this.mathField.focus():this.mathField.blur()))},h.prototype.isFocused=function(){return!(!document.activeElement||!s(document.activeElement).closest(this.$mathField).length)},h.prototype.shouldBeFocused=function(){return this.props.isFocused()},h.getFocusedMathquill=function(){if(document.activeElement){var e=s(document.activeElement).closest(".dcg-mq-editable-field")[0];return e?e._mqMathFieldInstance:void 0}},h.getMQViewInstance=function(e){var t=e.el();return t?t._mqViewInstance:void 0},h.applyArrowKeyAndReturnIfWasAtBounds=function(e,t,r){var n=s(e.el()),i=n.find(".dcg-mq-selection"),o=1===i.length&&i.parent().parent()[0]===n[0]&&1===i.parent().children().length;if(("Up"===t||"Down"===t)&&o)return e.keystroke(t,r),!0;var a=n.find(".dcg-mq-cursor")[0];if(!a)return e.keystroke(t,r),!1;var l=a.previousSibling||a.parentElement;return e.keystroke(t,r),l===(a.previousSibling||a.parentElement)},h.simulateKeypress=function(e,t){var r=h.getMQViewInstance(e);r&&(r.props.onUserPressedKey?r.props.onUserPressedKey(t):(e.keystroke(t),r.props.onUserChangedLatex(e.latex())))},h.simulateUserChangedLatex=function(e){var t=h.getMQViewInstance(e);t&&t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},h.handleKeystrokeAndDecideIfSpecialEvent=function(e,t,r){return"Enter"===t||"Delete"===t&&""===e.latex()||"Backspace"===t&&""===e.latex()||("Up"===t||"Down"===t||"Left"===t||"Right"===t?h.applyArrowKeyAndReturnIfWasAtBounds(e,t,r):(e.keystroke(t,r),!1))},h);function h(){var e=null!==d&&d.apply(this,arguments)||this;return e.lastLatexProp="",e.wasFocusedLastUpdate=!1,e}t.default=p})),i("loadcss!Abraham",(function(){})),i("loadcss!dcgview-helpers/mathquill-braille-wrapper",(function(){})),i("dcgview-helpers/mathquill-braille-wrapper",["require","exports","tslib","jquery","abraham","dcgview","../expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","dcgview-helpers/mathquill-view","../core/lib/count-latex-tokens","loadcss!Abraham","loadcss!./mathquill-braille-wrapper"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brailleInputIsEmpty=t.getFocusedBrailleElement=void 0;var d,p=o.Components.If,h=(d=o.Class,r.__extends(g,d),g.prototype.init=function(){this.controller=this.props.controller(),this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.controller.getBrailleMode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()},g.prototype.isFocused=function(){return void 0!==this.brailleInput&&document.activeElement==this.brailleInput},g.prototype.getBrailleShouldFocus=function(){return"none"!==this.controller.getBrailleMode()&&this.props.brailleShouldFocus&&this.props.brailleShouldFocus()},g.prototype.isStatic=function(){return!!this.props.isStatic&&this.props.isStatic()},g.prototype.hasError=function(){return!!this.props.hasError&&this.props.hasError()},g.prototype.willUpdate=function(){var e=this.currentLatex!==this.props.latex(),t=this.controller.getBrailleMode(),r=t!==this.currentBrailleMode&&"none"!==t;this.isFocused()&&!e&&!r||(this.currentLatex=this.props.latex(),(r||!this.hasTranslationError||e||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=t)},g.prototype.onBrailleInput=function(e){var t;this.props.onBrailleInput&&(t=this.getLatexFromBraille(e),this.hasTranslationError=t.isError,!t.isError&&this.controller.getCapExpressionSize()&&u.countLatexTokens(t.value)>c.EXPRESSION_TOKEN_LIMIT?this.props.onExpressionSizeExceeded?this.props.onExpressionSizeExceeded():this.controller.dispatch({type:"expression-size-exceeded"}):(this.currentBrailleValue=e,t.isError||(this.currentLatex=t.value,this.props.onBrailleInput(t.value))))},g.prototype.getBrailleFromLatex=function(e){var t=l.latexToBraille(e,this.controller.getBrailleMode());return t.isError?"":i.UnicodeBraille.toExpandedBrailleAscii(t.value)},g.prototype.getLatexFromBraille=function(e){return l.brailleToLatex(i.UnicodeBraille.coerceToSixDotCells(e),this.controller.getBrailleMode())},g.prototype.getBrailleLabel=function(e){return this.getBrailleFromLatex(e.replace(/\s/,"\\ "))},g.prototype.shouldShowBraille=function(){var e=this.controller.getBrailleMode();return"nemeth"===e||"ueb"===e},g.prototype.isOverflowingLeft=function(){return!!this.brailleInput&&0<this.brailleInput.scrollLeft},g.prototype.isOverflowingRight=function(){if(!this.brailleInput)return!1;var e=this.brailleInput.getBoundingClientRect().width,t=this.brailleInput.scrollWidth;return e+this.brailleInput.scrollLeft+2<t},g.prototype.didMountBrailleInput=function(e){this.brailleInput=e},g.prototype.didUnmountBrailleInput=function(){this.brailleInput=void 0},g.prototype.getTooltipGravity=function(){var e=this.props.tooltipOptions&&this.props.tooltipOptions();return e&&e.gravity?e.gravity:"se"},g.prototype.getTooltipDelay=function(){var e=this.props.tooltipOptions&&this.props.tooltipOptions();return e&&e.delay?e.delay:0},g.prototype.handleBrailleFocusChanged=function(e,t){this.props.onBrailleFocusedChanged&&this.props.onBrailleFocusedChanged(e,t),this.brailleInput&&(e&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.brailleInput.select(),this.isStatic()&&this.brailleInput.scrollTo(0,0))},g.prototype.getTooltipText=function(){var e=this.props.placeholder&&!this.isFocused()?this.props.placeholder():"";return this.props.latex()||e},g.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-mathquill-wrapper")},o.createElement(p,{predicate:function(){return e.shouldShowBraille()}},(function(){return o.createElement("div",{class:function(){return{"dcg-mathquill-braille":!0,"dcg-focus":e.getBrailleShouldFocus(),"dcg-invalid":e.hasError(),"dcg-mathquill-static-braille":e.isStatic(),"dcg-mathquill-braille-overflow-left":e.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":e.isOverflowingRight()}},"data-dcg-limit":function(){return e.props.dataDCGLimit?e.props.dataDCGLimit():void 0},"data-dcg-label":function(){return e.props.dataLabelAttributeValue?e.props.dataLabelAttributeValue():void 0}},o.createElement(s.Tooltip,{class:e.const("dcg-mathquill-braille-tooltip"),renderAsLatex:e.const(!0),tooltip:function(){return e.getTooltipText()},gravity:e.bindFn(e.getTooltipGravity),delay:e.bindFn(e.getTooltipDelay),targetClickBehavior:e.const("show")},o.createElement(a.default,{ariaLabel:function(){return e.props.ariaLabel?e.getBrailleLabel(e.props.ariaLabel()):""},didMount:e.bindFn(e.didMountBrailleInput),didUnmount:e.bindFn(e.didUnmountBrailleInput),onFocusedChanged:e.bindFn(e.handleBrailleFocusChanged),shouldFocus:e.bindFn(e.getBrailleShouldFocus),onKeydown:e.props.onBrailleKeydown,onInput:e.bindFn(e.onBrailleInput),sixKeyInput:function(){return e.controller.getSixKeyInput()},value:function(){return e.currentBrailleValue},placeholder:function(){return e.props.placeholder?e.getBrailleFromLatex(e.props.placeholder()):""},tabindex:function(){return e.props.tabindex?e.props.tabindex():0},isStatic:e.bindFn(e.isStatic)})))})),o.createElement("div",{class:o.const("dcg-typeset-math"),style:function(){return{display:e.shouldShowBraille()?"none":void 0}}},this.children))},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.default=h,t.getFocusedBrailleElement=function(){if(document.activeElement&&n(document.activeElement).hasClass("dcg-braille-input"))return document.activeElement},t.brailleInputIsEmpty=function(e){return!e||""===n(e).val()}})),i("expressions/list_move_controller",["require","exports","core/lib/dragmode","core/lib/number-to-latex","core/lib/label","lib/rounding","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/list","graphing-calc/models/image","core/math/poi","core/math/functions"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";function p(e,t){return{left:e.x-t,right:e.x+t,top:e.y+t,bottom:e.y-t}}function h(e,t){switch(t){case r.DragMode.X:return 0===e;case r.DragMode.Y:return 1===e;case r.DragMode.XY:return!0;default:return!1}}function g(e){return void 0===e?NaN:e[0]}function f(e,t,s,l,c){var g=t.formula;if(!g||!g.move_strategy)return!1;var f,m,y,v,b,x,w,S,E=t.reconciledDragMode||r.DragMode.NONE,_=!1,k=l.closestPointOnScreen(s),M=l.pixelsToMath.mapRect(p(k,.5)),I=[{min:M.left,max:M.right},{min:M.top,max:M.bottom}];"updateCoordinate"!==g.move_strategy[0].type&&"updateCoordinate"!==g.move_strategy[1].type||(a.setLatex(t,(m=I,y=E,v=(f=g).assignment?i.identifierToLatex(f.assignment)+"=":"",b=o.shortestDecimalBetween(m[0].min,m[0].max),x=o.shortestDecimalBetween(m[1].min,m[1].max),w="updateCoordinate"===f.move_strategy[0].type&&h(0,y),S="updateCoordinate"===f.move_strategy[1].type&&h(1,y),v+"\\left("+(w?n.default(b):f.move_strategy[0].inputString)+","+(S?n.default(x):f.move_strategy[1].inputString)+"\\right)")),_=!0);for(var C,L,P,T,A,O,D,F=0;F<2;F++)!function(){return("updateSlider"===(C=g.move_strategy[F]).type||"updateSliderNonlinear"===C.type)&&h(F,E)&&(L=e.getItemModel(C.id))&&"expression"===L.type&&(P=L.latex,c&&(T=0===F?c.x:c.y),T?(t=L.slider&&""!==L.slider.step&&(("up"===T||"bigup"===T)&&!L.slider.hardMax||("down"===T||"bigdown"===T)&&!L.slider.hardMin),a.adjustSliderByKeyboard(L,T,{ignoreSoftLimits:t})):"updateSlider"===C.type?(A=C.coefficients[0],O=C.coefficients[1],D=o.shortestDecimalBetween(O*I[F].min+A,O*I[F].max+A),a.adjustSliderByMovablePoint(L,D)):"updateSliderNonlinear"===C.type&&(C.compiled.fn||d.rehydrateCompiledFunction(C.compiled),r=C.compiled.fn,n=C.initialValue,i=C.min,s=C.max,p=[k.x,k.y],(f=u.findLocalClosestPointOnParametric((function(e){var t=r(e),n=t[0],i=t[1],o=l.mathToPixels.mapPoint({x:n,y:i});return[n=o.x,i=o.y]}),p,n,i,s,1))&&(m=o.shortestDecimalBetween(f[0],f[1]),void 0!==i&&m<i&&(m=i),void 0!==s&&s<m&&(m=s),a.adjustSliderByMovablePoint(L,m))),L.latex!==P&&(_=!0));var t,r,n,i,s,p,f,m}();return _}Object.defineProperty(t,"__esModule",{value:!0}),t.onMovePoint=t.onStopMovingPoint=t.onStartMovingPoint=void 0,t.onStartMovingPoint=function(e,t,n){if(n.tableInfo){l.setSelected(t,void 0);var i=e.getItemModel(n.tableInfo.tableId);if(!i||"table"!==i.type)return;s.setIsDraggingOnGrapher(i,!0)}else{var o=e.getItemModel(n.sketch.id);if(!o||"expression"!==o.type&&"image"!==o.type)return;if("image"!==o.type&&l.setSelected(t,void 0),!o.formula||!o.formula.move_strategy)return;for(var u=o.formula.move_strategy,d=0;d<u.length;d++)if("updateCoordinate"===u[d].type)"image"===o.type?c.setIsDraggingOnGrapher(o,!0):"expression"===o.type&&a.setIsDraggingOnGrapher(o,!0);else if("updateSlider"===u[d].type||"updateSliderNonlinear"===u[d].type){var p,h=e.getItemModel(u[d].id);if(!h||"expression"!==h.type)continue;if((p="expression"===o.type?o.reconciledDragMode:void 0)===r.DragMode.NONE||0===d&&p===r.DragMode.Y||1===d&&p===r.DragMode.X)continue;a.setSliderDragging(h,!0)}}},t.onStopMovingPoint=function(e,t){if(t.tableInfo){var r=e.getItemModel(t.tableInfo.tableId);if(!r||"table"!==r.type)return;s.setIsDraggingOnGrapher(r,!1)}else{var n=e.getItemModel(t.sketch.id);if(n&&("expression"===n.type||"image"===n.type)&&n.formula&&n.formula.move_strategy){var i=n.formula.move_strategy;if("updateSliderNonlinear"===i[0].type){if(!(o=e.getItemModel(i[0].id))||"expression"!==o.type)return;a.setSliderDragging(o,!1)}for(var o,l=0;l<i.length;l++)if("image"===n.type?c.setIsDraggingOnGrapher(n,!1):"expression"===n.type&&a.setIsDraggingOnGrapher(n,!1),"updateSlider"===i[l].type||"updateSliderNonlinear"===i[l].type){if(!(o=e.getItemModel(i[l].id))||"expression"!==o.type)continue;a.setSliderDragging(o,!1)}}}},t.onMovePoint=function(e,t,r,i,l){if(t.tableInfo)return u=e,h=r,m=i,S=(d=t).tableInfo.tableId,E=d.tableInfo.rowIndex,_=d.tableInfo.columnId,k=d.tableInfo.dragX,M=d.tableInfo.dragY,!(I=u.getItemModel(S))||"table"!==I.type||(y=s.getColumnModel(I,_))&&(v=m.closestPointOnScreen(h),b=m.pixelsToMath.mapRect(p(v,.5)),x={x:n.default(o.shortestDecimalBetween(b.left,b.right)),y:n.default(o.shortestDecimalBetween(b.top,b.bottom))},k&&s.setCellLatex(I,{row:E+1,column:0},x.x),M&&(w=y.index,s.setCellLatex(I,{row:E+1,column:w},x.y))),!0;var u,d,h,m,y,v,b,x,w,S,E,_,k,M,I,C=e.getItemModel(t.sketch.id);return!!C&&("image"===C.type?function(e,t,r,i,s){var l=t.formula;if(!l||!l.move_strategy)return!1;var u=l.dimensions,d={x:g(u.x),y:g(u.y),width:g(u.width),height:g(u.height),radianAngle:g(u.radianAngle)},h=r.scaleFactor||[0,0],f=0!==h[0]&&0!==h[1],m=s.closestPointOnScreen(i),y=function(e,t,r){for(var n=["x","y","width","height"],i={x:1/0,y:1/0,width:1/0,height:1/0},o={x:-1/0,y:-1/0,width:-1/0,height:-1/0},a=0,s=[{x:t.left,y:t.bottom},{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom}];a<s.length;a++)for(var l=function(e,t,r){if(0===r[0]&&0===r[1])return{x:t.x,y:t.y,width:e.width,height:e.height};var n=Math.cos(e.radianAngle),i=Math.sin(e.radianAngle),o=t.x-e.x,a=t.y-e.y;if(0===r[0])return{x:e.x,y:e.y,width:e.width,height:2*r[1]*(n*a+i*o)};if(0===r[1])return{x:e.x,y:e.y,width:2*r[0]*(n*o-i*a),height:e.height};var s=2*(e.width*r[0]*(n*o-i*a)+e.height*r[1]*(i*o+n*a))/(e.width*e.width+e.height*e.height);return{x:e.x,y:e.y,width:s*e.width,height:s*e.height}}(e,s[a],r),c=0,u=n;c<u.length;c++){var d=u[c];i[d]=Math.min(i[d],l[d]),o[d]=Math.max(o[d],l[d])}return{min:i,max:o}}(d,s.pixelsToMath.mapRect(p(m,f?.05:.5)),h),v=s.mathToPixels.mapRect({left:d.x-.5*d.width,right:d.x+.5*d.width,top:d.y-.5*d.height,bottom:d.y+.5*d.height}),b=Math.abs(v.right-v.left),x=Math.abs(v.bottom-v.top),w=s.mathToPixels.mapRect({left:y.min.x-.5*y.min.width,right:y.min.x+.5*y.min.width,top:y.min.y-.5*y.min.height,bottom:y.min.y+.5*y.min.height}),S=Math.abs(w.right-w.left),E=Math.abs(w.bottom-w.top);if(S<b&&S<1||E<x&&E<1)return!1;for(var _=["width","height","x","y"],k=!1,M=0;M<_.length;M++){var I=_[M],C=l.move_strategy[M];switch(C.type){case"updateCoordinate":var L,P,T=o.shortestDecimalBetween(y.min[I],y.max[I]),A=n.default(T);switch(I){case"width":case"height":c.setMQAttribute(t,I,A);break;case"x":P="updateCoordinate"===l.move_strategy[3].type?(L=o.shortestDecimalBetween(y.min.y,y.max.y),"\\left("+A+","+n.default(L)+"\\right)"):"\\left("+A+","+l.move_strategy[3].inputString+"\\right)",c.setMQAttribute(t,"center",P);break;case"y":"updateCoordinate"!==l.move_strategy[2].type&&(P="\\left("+l.move_strategy[2].inputString+","+A+"\\right)",c.setMQAttribute(t,"center",P));break;default:return I}k=!0;break;case"updateSlider":var O=e.getItemModel(C.id);if(!O||"expression"!==O.type)continue;var D=C.coefficients[0],F=C.coefficients[1],q=F*y.min[I]+D,N=F*y.max[I]+D,R=o.shortestDecimalBetween(q,N),B=O.latex;a.adjustSliderByMovablePoint(O,R),O.latex!==B&&(k=!0)}}return k}(e,C,t,r,i):"expression"===C.type&&f(e,C,r,i,l))}})),i("main/blank_state",["require","exports","core/graphing-calc/migrate-state"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_STATE=void 0,t.BLANK_STATE={version:r.currentVersion,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},t.default=t.BLANK_STATE})),i("expressions/measure-expressions",["require","exports","jquery"],(function(e,t,r){"use strict";function n(e){for(var t=[],r=0,n=e.getAllItemModels();r<n.length;r++){var i=n[r],o=e.getItemRootNodeById(i.id);o&&t.push(o)}return t}function i(e,t){for(var r=n(e),i=0,o=r.length-1;i<=o;){var a=i+Math.floor((o-i)/2),s=r[a],l=s.getBoundingClientRect();if(l.top>t)o=a-1;else{if(!(l.bottom<t))return s;i=a+1}}}function o(e){var t=l(e);if(t){var i=function(e,t){for(var r,i=n(e),o=0,a=i.length-1;o<=a;){var s=o+Math.floor((a-o)/2),l=i[s];l.getBoundingClientRect().top>t?(a=s-1,r=l):o=s+1}return r}(e,t.top-2);if(i)return r(i).attr("expr-id")}}function a(e){return e.find$(".dcg-exppanel")[0]}function s(e){var t=a(e);if(t)return r(t)}function l(e){var t=a(e);if(t)return t.getBoundingClientRect()}Object.defineProperty(t,"__esModule",{value:!0}),t.getDragContainerHeight=t.getExpListHeight=t.getExppanelScrolledTop=t.getExppanelRect=t.getOuterExppanelRect=t.getExppanelSelector=t.getExppanelElt=t.getFirstFullyVisibleItemId=t.getLastVisibleItemId=t.getFirstVisibleItemId=void 0,t.getFirstVisibleItemId=function(e,t){var n=l(e);if(n){if(t){var a=e.getItemRootNodeById(t);if(a){var s=a.getBoundingClientRect();if(0<s.height&&s.top<=n.top&&s.bottom>=n.top)return t}}var c=i(e,n.top);return c?r(c).attr("expr-id"):o(e)}},t.getLastVisibleItemId=function(e,t){var n=l(e);if(n){var o=function(e){for(var t=e.getAllItemModels(),r=t.length-1;0<=r;r--){var n=t[r];if(n.dcgView)return n.id}}(e);if(o){if(t){var a=e.getItemRootNodeById(t);if(a){var s=a.getBoundingClientRect();if(0<s.height&&s.top<=n.bottom&&s.bottom>=n.bottom)return t;if(t===o&&s.bottom<=n.bottom)return t}}var c=i(e,n.bottom);return c&&r(c).attr("expr-id")||o}}},t.getFirstFullyVisibleItemId=o,t.getExppanelElt=a,t.getExppanelSelector=s,t.getOuterExppanelRect=function(e){var t=e.find$(".dcg-exppanel-outer")[0];if(t)return t.getBoundingClientRect()},t.getExppanelRect=l,t.getExppanelScrolledTop=function(e){var t=a(e);if(t){var r=t.getBoundingClientRect(),n=t.scrollTop;return r.top-n}},t.getExpListHeight=function(e){var t=e.find$(".dcg-expressionlist");if(1===t.length)return t.height()},t.getDragContainerHeight=function(e){var t=s(e);return t&&t.find(".dcg-drag-container").height()||0}})),i("jquery.handleevent",["require","jquery"],(function(e){var t=e("jquery"),r="_*_";t.Event.prototype.wasHandled=function(e){e=e||r;var n=this.originalEvent,i=n&&n.handledBy;if(i&&i[e])return!0;if(e!==r)return!1;var o=t(this.target).closest("[handleEvent]");return!(!o.length||o[0]===this.currentTarget)&&"false"!==o.attr("handleEvent")},t.Event.prototype.handle=function(e){e=e||r;var t=this.originalEvent;t&&((t.handledBy||(t.handledBy={}))[e]=!0)}})),i("expressions/dragdrop_expressions",["require","exports","tslib","jquery","expressions/measure-expressions","jquery.handleevent"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(a.prototype.startDragging=function(e){this.active=!0,this.mouseY=e,this.setupEventListeners()},a.prototype.applyDrag=function(){var e=this.controller.getListModel().dragState;if(e){this.scheduleUpdateScroll();var t=this.measureDOM(e);if(t){var n=t.floatingPreviewRect,i=this.controller.getItemModel(e.firstItemId);if(i){for(var o,a,s=i.index,l=0,c=t.visibleRects;l<c.length;l++){var u=c[l],d=u.id,p=u.rect;if(d!==i.id){var h=this.controller.getItemModel(d);if(!h)return;if(h.index<i.index){if(n.top<p.top+p.height/2){s=h.index;break}}else n.bottom>p.top+p.height/2&&(s=h.index,"folder"===h.type&&h.collapsed&&(s+=this.controller.getNumberOfItemsInFolder(h.id)))}}a=s>i.index?(o=s)+1:s<i.index?(o=s-1,s):(o=s-1,s+1);var g=this.controller.getItemModelByIndex(o),f=this.controller.getItemModelByIndex(a),m="",y="";g&&(m="folder"===g.type?g.id:g.folderId),f&&(y="folder"===f.type?f.id:f.folderId);var v="";return m&&(y===m?"folder"===i.type?s=i.index:v=m:"folder"!==i.type&&this.isPreviewTopContainedInFolder(t,m)&&(v=m)),{dragState:r.__assign({},t.dragState),newIndex:s,folderId:v}}}}},a.prototype.measureDOM=function(e){var t=i.getExppanelScrolledTop(this.controller),n=i.getExpListHeight(this.controller);if(void 0!==t&&void 0!==n){var o=i.getDragContainerHeight(this.controller),a=e.mouseY-e.grabOffset+2,s=a-t;s=Math.max(s,-o/2),s=Math.min(s,n-o);var l={top:a,bottom:a+o,height:o},c=this.controller.findFirstVisibleItem(),u=this.controller.findLastVisibleItem();if(c&&u){for(var d=[],p=c.index;p<=u.index;p++){var h,g,f=this.controller.getItemModelByIndex(p);f&&(h=this.controller.getItemRootNodeById(f.id))&&f.id!==e.firstItemId&&(g=h.getBoundingClientRect(),d.push({id:f.id,rect:g}))}if(0!==d.length)return{dragState:r.__assign(r.__assign({},e),{itemTop:s}),floatingPreviewRect:l,visibleRects:d}}}},a.prototype.isPreviewTopContainedInFolder=function(e,t){for(var r=e.visibleRects,n=e.floatingPreviewRect,i=0,o=r;i<o.length;i++){var a=o[i],s=a.id,l=a.rect;if(l.top<=n.top&&l.bottom>=n.top){var c=this.controller.getItemModel(s);if(!c)return!1;if("folder"===c.type&&c.id===t)return!0;if("folder"!==c.type&&c.folderId===t)return!0}}return!1},a.prototype.scheduleUpdateScroll=function(){var e=this;this.updateScrollScheduled||(this.updateScrollScheduled=!0,requestAnimationFrame((function(){e.updateScroll(),e.updateScrollScheduled=!1})))},a.prototype.stop=function(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})},a.prototype.setupEventListeners=function(){var e=this;n(document).on("dcg-tapmove.dragdrop",(function(t){e.mouseY=t.changedTouches[0].clientY,e.controller.dispatch({type:"update-dragdrop",mouseY:e.mouseY})})),n(document).on("dcg-tapend.dragdrop",(function(t){e.stop(),t.handle("dragdrop")}))},a.prototype.tearDownEventListeners=function(){n(document).off(".dragdrop")},a.prototype.updateScroll=function(){var e,t;this.active&&(e=this.$exppanel[0].getBoundingClientRect(),t=0,t=Math.min(0,this.mouseY-e.top),(t=(t=Math.max(t,this.mouseY-e.bottom+30))*e.height/900)&&this.$exppanel.scrollTop(this.$exppanel.scrollTop()+t))},a);function a(e){this.active=!1,this.controller=e;var t=i.getExppanelSelector(e);t&&(this.$exppanel=t)}t.default=o})),i("keypad/mq-commands",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.execute=void 0;var r={loga:function(e){e.write("\\log_{}"),e.typedText("("),e.keystroke("Left"),e.keystroke("Down")},nthroot:function(e){e.write("\\sqrt[]{}"),e.keystroke("Left"),e.keystroke("Left")},ddx:function(e){e.write("\\frac{d}{dx}")},arcsin:function(e){e.write("sin^{-1}"),e.typedText("(")},arccos:function(e){e.write("cos^{-1}"),e.typedText("(")},arctan:function(e){e.write("tan^{-1}"),e.typedText("(")},arcsec:function(e){e.write("sec^{-1}"),e.typedText("(")},arccsc:function(e){e.write("csc^{-1}"),e.typedText("(")},arccot:function(e){e.write("cot^{-1}"),e.typedText("(")},"A^T":function(e){e.typedText("^T"),e.keystroke("Right")},"A^-1":function(e){e.typedText("^-1"),e.keystroke("Right")},"A^2":function(e){e.typedText("^2"),e.keystroke("Right")},"a^2":function(e){e.typedText("^2"),e.keystroke("Right")},"a^3":function(e){e.typedText("^3"),e.keystroke("Right")},"a/b":function(e){e.write("\\frac{}{}"),e.keystroke("Left")}};t.execute=function(e,t){r[t](e)}})),i("core/lib/get-next-available-id",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextAvailableId=void 0,t.getNextAvailableId=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r].id);t<n&&(t=n)}return t+1+""}})),i("main/controller",["require","exports","main/propagate_selection","tslib","scroll_helpers","browser","core/lib/label","underscore","lib/i18n","flux","core/types/opacity","core/lib/dragmode","core/types/styles","lib/conditional_blur","core/lib/deepCopy","core/lib/number-to-latex","lib/state-stack","graphing/viewport","core/graphing-calc/migrate-state","core/math/expression-types","lib/smart-slider-defaults","core/lib/color-helpers","graphing-calc/models/expression","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/image","graphing-calc/models/folder","graphing-calc/models/text","graphing-calc/models/simulation","graphing-calc/models/list","graphing-calc/models/abstract-item","graphing-calc/models/focus","graphing-calc/actions/keyboard","main/expression-zoom-helpers","core/math/evaluate-single-expression","./layout-model","./settings-view-model","jquery","bugsnag","dcgview-helpers/mathquill-braille-wrapper","expressions/list_move_controller","./blank_state","dcgview-helpers/mathquill-view","expressions/measure-expressions","expressions/dragdrop_expressions","keypad/mq-commands","core/lib/random-seed","../core/lib/get-next-available-id"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M,I,C,L,P,T,A,O,D,F,q,N,R,B,j,V,z,U,G,K,H,W,$){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var Y=(Q.prototype.hasUnsavedChanges=function(){return this._hasUnsavedChanges},Q.prototype.getExpressionSearchOpen=function(){return this.expressionSearchOpen},Q.prototype.hasVisibleAndUndoableToast=function(){return"function"==typeof this.toastData.undoCallback},Q.prototype.getToastData=function(){return this.toastData},Q.prototype.toastUndo=function(){"function"==typeof this.toastData.undoCallback&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))},Q.prototype.runAfterDispatch=function(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()},Q.prototype.enqueueEvent=function(e){this.enqueuedEvents[e]=!0},Q.prototype.setRandomSeed=function(e){this.graphSettings.setProperty("randomSeed",e)},Q.prototype.getRandomSeed=function(){return this.graphSettings.randomSeed},Q.prototype.shouldDispatchTickNextFrame=function(){return!!this._requiresTickNextFrame},Q.prototype.markTickRequiredNextFrame=function(){this._requiresTickNextFrame=!0},Q.prototype.setupDispatcher=function(){var e=this;this.dispatcher=new c.Dispatcher,this.dispatcher.register((function(t){var r,n=e.getSelectedItem(),i=e.getFocusLocation();e.shouldScrollSelectedItemIntoViewAfterDispatch=!1,e.enqueuedEvents={change:!1,graphReset:!1,clearUnsavedChanges:!1,openDrawer:!1,showHotkeysModal:!1,userMovedPoint:!1,userClickedObject:!1,userEditedLabel:!1},"tick"===t.type&&(e._requiresTickNextFrame=!1),e.isCurrentlyDoingSetState=!1,e.isCurrentlyDoingRestoreState=!1,e.clickableObjectQueueInfo.didDispatchTripLockout=!1,e.handleDispatchedAction(t),e.updateTheComputedWorld();var o=e.getImageToRetry();(0<e.getPlayingSliders().length||e.getPlayingSimulation()||e.hasAnyTableThatRequiresTicks()||e.isDragDropActive()||o)&&e.markTickRequiredNextFrame(),o&&e.retryLoadingFailedImage(o),"undo"===t.type||"redo"===t.type||e.isDragDropActive()||e.commitUndoRedoSynchronously(t.type),e.requestParseForAllItems(),e.clickableObjectQueueInfo.didDispatchTripLockout&&(e.clickableObjectQueueInfo.lockoutCounter+=1,e.evaluator.notifyWhenSynced((function(){--e.clickableObjectQueueInfo.lockoutCounter,0===e.clickableObjectQueueInfo.lockoutCounter&&e.clickableObjectQueueInfo.queuedItems.length&&e.runAfterDispatch((function(){e.dispatch({type:"attempt-queued-clickable-object"})}))}))),e.isCurrentlyDoingSetState=!1,e.isCurrentlyDoingRestoreState=!1,e.clickableObjectQueueInfo.didDispatchTripLockout=!1,e.enqueuedEvents.change&&e.grapher&&e.grapher.markLabelsDirty(),e.enqueuedEvents.clearUnsavedChanges?e._hasUnsavedChanges=!1:e.enqueuedEvents.change&&(e._hasUnsavedChanges=!0);var a=e.getSelectedItem();a?n&&n.guid===a.guid||(e.shouldScrollSelectedItemIntoViewAfterDispatch=!0):e.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var l=e.getFocusLocation();l&&!s.isEqual(l,i)&&e.getFocusedItem()==a&&(e.shouldScrollSelectedItemIntoViewAfterDispatch=!0),i&&n&&"table"===n.type&&"table"===i.type&&(!l||"table"!==l.type||i.id!==l.id)&&n.isExpanded&&(k.setExpanded(n,!1),l||(r=n)),l&&a&&"table"===a.type&&k.updateIsCollapsedByFocusLocation(a),e.updateRenderShellsBeforePaint(),e.updateViews(),r?e.scrollItemIntoView(r):e.shouldScrollSelectedItemIntoViewAfterDispatch&&e.scrollSelectedItemIntoView(),e.updateDragDrop(),e.updateRenderShellsAfterDispatch()}))},Q.prototype.handleDispatchedAction=function(e){var t,r,i,o=this;switch(e.type){case"render":break;case"undo":this.undo();break;case"redo":this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":"Enter"===e.key?O.onEnterPressed(this):"Up"===e.key?O.onUpPressed(this):"Down"===e.key?O.onDownPressed(this):"Backspace"===e.key?O.onBackspacePressed(this):"Delete"===e.key&&O.onDeletePressed(this);break;case"select-previous-expression":P.selectPrevItem(this.listModel);break;case"select-next-expression":P.selectNextItem(this.listModel);break;case"upward-delete-selected-expression":O.upwardDeleteSelectedExpression(this);break;case"downward-delete-selected-expression":O.downwardDeleteSelectedExpression(this);break;case"table-show-more-rows":if(!(K=this.getItemModel(e.id))||"table"!==K.type)return;var s=k.getCollapsedRange(K);if(!s)return;P.setSelected(this.listModel,K),k.setExpanded(K,!0),A.setFocusLocation(this,{type:"table",id:K.id,location:{row:s.min,column:0}});break;case"navigate-table-by-key":O.navigateTableByKey(this,e.id,e.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(e.id,e.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(e.id,e.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(e.id);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(e.id,e.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(e.state));break;case"duplicate-expression":var l=this.getItemModel(e.id);if(!l||"expression"!==l.type)return;var c=_.getState(l,{stripDefaults:!1}),u=this.createItemModel(n.__assign(n.__assign({},c),{id:this.generateId()}));this._toplevelInsertItemAt(l.index+1,u,!1,l.folderId);break;case"insert-item-at-index":var p=this.createItemModel(e.state);this._toplevelInsertItemAt(e.index,p,e.focus,e.folderId);break;case"new-expression-at-end":p=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()}),this.setEditListMode(!1),P.insertItemAtEnd(this.listModel,p),A.moveFocusToItem(this,p.id);break;case"new-expression":p=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()}),this.setEditListMode(!1),this._toplevelNewItemAtSelection(p,{shouldFocus:!0}),this._closeAddExpression();break;case"new-text":p=this.createItemModel({id:this.generateId(),type:"text"}),this._toplevelNewItemAtSelection(p,{shouldFocus:!0}),this._closeAddExpression();break;case"new-folder":p=this.createItemModel({type:"folder",id:this.generateId()}),this._toplevelNewItemAtSelection(p,{shouldFocus:!0}),this._closeAddExpression();break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:e.files}),this._closeAddExpression();break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:e.files,id:e.id});break;case"new-table":p=this._createTableItem(),this._toplevelNewItemAtSelection(p,{shouldFocus:!0}),this._closeAddExpression();break;case"new-simulation":p=this.createItemModel({id:this.generateId(),type:"simulation"}),this._toplevelNewItemAtSelection(p,{shouldFocus:!0}),this._closeAddExpression();break;case"paste-table":this._pasteTable(e.data);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(e.expressions);break;case"append-number-list":this._appendNumberList(e.latex);break;case"remove-item-by-id":P.removeItemById(this.listModel,e.id);break;case"replace-item-at-index":p=this.createItemModel(e.state),this._toplevelReplaceItemAt(e.index,p,e.focus);break;case"create-sliders-for-item":this.createSlidersForItem(e.id,e.variables);break;case"convert-image-to-draggable":this.convertImageToDraggable(e.id);break;case"start-dragdrop":if(!(K=this.getItemModel(e.id)))return;var h=this.getItemRootNodeById(K.id);if(!h)return;var g=h.getBoundingClientRect();P.setSelected(this.listModel,void 0);var f=e.grabY-g.top,m=!1,y=1;"folder"===K.type&&(y+=this.getNumberOfItemsInFolder(K.id),K.collapsed||(m=!0,I.setCollapsed(K,!0))),P.setDragState(this.listModel,{firstItemId:K.id,numberOfItems:y,expandFolder:m,grabOffset:f,mouseY:e.mouseY,itemTop:0}),this.dragdrop_expressions.startDragging(e.mouseY);break;case"update-dragdrop":if(!(t=this.listModel.dragState))return;P.setDragState(this.listModel,n.__assign(n.__assign({},t),{mouseY:e.mouseY}));break;case"stop-dragdrop":if(!(t=this.listModel.dragState))return;if(!(Q=this.getItemModel(t.firstItemId)))return;P.setSelected(this.listModel,Q),"folder"===Q.type&&t.expandFolder&&I.setCollapsed(Q,!1),P.setDragState(this.listModel,void 0);break;case"set-selected-id":p=this.getItemModel(e.id),P.setSelected(this.listModel,p);break;case"set-selected-index":p=this.getItemModelByIndex(e.index),P.setSelected(this.listModel,p);break;case"set-none-selected":P.setSelected(this.listModel,void 0);break;case"set-focus-location":"table"===(e.location?e.location.type:"")&&(this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{inEditListMode:!1})),A.setFocusLocation(this,e.location);break;case"move-focus-to-item":A.moveFocusToItem(this,e.id,e.where);break;case"blur-focus-location":this.isFocusLocationFocused(e.location)&&A.setFocusLocation(this,void 0);break;case"set-folder-collapsed":if(!(K=this.getItemModel(e.id))||"folder"!==K.type)return;I.setCollapsed(K,e.isCollapsed);break;case"set-item-secret":if(!(p=this.getItemModel(e.id)))return;T.setSecret(p,e.isSecret);break;case"set-tablecolumn-color":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnColor(K,e.columnId,e.color);break;case"set-tablecolumn-colorlatex":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnColorLatex(K,e.columnId,e.colorLatex);break;case"set-show-cdf":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setShowCDF(K,e.showCDF);break;case"set-cdf-min":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setCDFMin(K,e.latex);break;case"set-cdf-max":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setCDFMax(K,e.latex);break;case"toggle-item-hidden":this._toggleItemHidden(e.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(e.tableId,e.columnId);break;case"toggle-item-settings-menu":this.listModel.openItemMenu&&e.menu.model===this.listModel.openItemMenu.model?this.closeItemSettingsMenu():(this.listModel.openItemMenu=e.menu,e.menu.focusFirstOption&&A.setFocusLocation(this,{type:"expression-menu",id:e.menu.model.id,location:"start"}));break;case"close-item-settings-menu":this.closeItemSettingsMenu();break;case"toggle-fraction-evaluation":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;var v=_.shouldEvaluationDisplayAsFraction(K);_.setEvaluationAsFraction(K,!v);break;case"set-item-label":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLabel(K,e.label),this.enqueueEvent("userEditedLabel");break;case"set-item-showlabel":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setShowLabel(K,e.showLabel),e.showLabel||(_.setInteractiveLabel(K,!1),_.setEditableLabelMode(K,E.EditableLabelMode.None));break;case"set-item-color":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setColor(K,e.color);break;case"set-item-fill":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setFill(K,e.fill),this._setItemHidden(K.id,_.areAllVisibilityPropsOff(K));break;case"set-image-opacity":if(!(K=this.getItemModel(e.id))||"image"!==K.type)return;M.setOpacity(K,e.opacity),this._setItemHidden(K.id,!1);break;case"set-image-in-foreground":if(!(K=this.getItemModel(e.id))||"image"!==K.type)return;M.setForeground(K,e.foreground);break;case"image-upload-error":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],this._showToast({message:this.s("graphing-calculator-text-toast-image-upload-failed")}));break;case"image-upload-success":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],e.id?(K=this.getItemModel(e.id))&&"image"===K.type&&M.setImageURL(K,e.url):(r=this.createItemModel({type:"image",id:this.generateId(),width:e.width,height:e.height,image_url:e.url,name:e.name}),this._toplevelNewItemAtSelection(r,{shouldFocus:!1}))),this.isUploadingImages()||(this.toastData={});break;case"image-load-success":if(!(r=this.getItemModel(e.id))||"image"!==r.type)return;M.setLoadStatus(r,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0};break;case"image-load-error":if(!(r=this.getItemModel(e.id))||"image"!==r.type)return;M.setLoadStatus(r,"failed");break;case"image-retry-loading":if(!(r=this.getItemModel(e.id))||"image"!==r.type)return;M.retryLoading(r);break;case"set-item-dragmode":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setDragMode(K,e.dragMode);break;case"set-tablecolumn-dragmode":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnDragMode(K,e.columnId,e.dragMode),e.dragMode!==d.DragMode.NONE&&this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-points":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnPoints(K,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,k.shouldHideColumn(K,e.columnId));break;case"set-tablecolumn-lines":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnLines(K,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,k.shouldHideColumn(K,e.columnId));break;case"set-tablecolumn-linestyle":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnLineStyle(K,e.columnId,e.lineStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-linewidth":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnLineWidth(K,e.columnId,e.lineWidth),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-lineopacity":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnLineOpacity(K,e.columnId,e.lineOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-pointsize":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnPointSize(K,e.columnId,e.pointSize),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-pointopacity":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnPointOpacity(K,e.columnId,e.pointOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-pointstyle":if(!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setColumnPointStyle(K,e.columnId,e.pointStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-item-points":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setPoints(K,e.points),this._setItemHidden(e.id,_.areAllVisibilityPropsOff(K)),e.points||K.dragMode===d.DragMode.NONE||_.setDragMode(K,d.DragMode.NONE);break;case"set-item-pointstyle":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setPointStyle(K,e.pointStyle),this._setItemHidden(e.id,!1);break;case"set-item-lines":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLines(K,e.lines),this._setItemHidden(e.id,_.areAllVisibilityPropsOff(K));break;case"set-item-linestyle":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLineStyle(K,e.lineStyle),this._setItemHidden(e.id,!1);break;case"set-item-label-dropdown-open":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLabelDropdownOpen(K,e.open);break;case"set-item-fillopacity":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setFillOpacity(K,e.fillOpacity),this._setItemHidden(e.id,!1);break;case"set-item-lineopacity":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLineOpacity(K,e.lineOpacity),this._setItemHidden(e.id,!1);break;case"set-item-pointopacity":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setPointOpacity(K,e.pointOpacity),this._setItemHidden(e.id,!1);break;case"set-item-pointsize":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setPointSize(K,e.pointSize),this._setItemHidden(e.id,!1);break;case"set-item-linewidth":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLineWidth(K,e.lineWidth),this._setItemHidden(e.id,!1);break;case"set-item-colorlatex":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setColorLatex(K,e.colorLatex);break;case"set-item-labelSize":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLabelSize(K,e.labelSize);break;case"set-item-labelangle":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLabelAngle(K,e.labelAngle);break;case"set-item-label-orientation":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setLabelOrientation(K,e.labelOrientation);break;case"set-suppress-text-outline":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSuppressTextOutline(K,e.suppressTextOutline);break;case"set-item-interactive-label":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setInteractiveLabel(K,e.interactiveLabel),e.interactiveLabel&&_.setEditableLabelMode(K,E.EditableLabelMode.None);break;case"set-item-editable-label-mode":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;K.editableLabelMode!==E.EditableLabelMode.None&&e.editableLabelMode!==E.EditableLabelMode.None&&K.editableLabelMode!==e.editableLabelMode&&_.setLabel(K,""),_.setEditableLabelMode(K,e.editableLabelMode),e.editableLabelMode!==E.EditableLabelMode.None&&_.setInteractiveLabel(K,!1);break;case"plot-residuals":if(!(p=this.getItemModel(e.id))||"expression"!==p.type)return;var b=p.formula.regression;if(!b)return;var x=b.residualSuggestionId;if(!x)return;var w=this.getItemModel(x);if(!w)return;k.insertBlankColumn(w,w.columnModels.length-1,{id:this.generateId(),latex:a.identifierToLatex(b.residualVariable),color:this.getNextColor()});break;case"toggle-logmode":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;var S=K.isLogModeRegression;_.setLogMode(K,!S);break;case"set-item-latex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(p=this.getItemModel(e.id))||"expression"!==p.type)return;var D,F,N,R,B=e.latex;'"'===B&&this.areNotesEnabled()?(D=this.createItemModel({id:this.generateId(),type:"text"}),this._toplevelReplaceItemAt(p.index,D,!0)):""===B?_.blankOutExpressionAfterClearingLatex(p):"folder"===B&&this.areFoldersEnabled()?(F=this.createItemModel({id:this.generateId(),type:"folder"}),P.getParentFolderModel(p)?(this._toplevelNewItemAtSelection(F,{shouldFocus:!0}),_.setLatex(p,"")):this._toplevelReplaceItemAt(p.index,F,!0)):"table"===B?(N=this._createTableItem(),this._toplevelReplaceItemAt(p.index,N,!0)):"simulation"===B&&this.areSimulationsEnabled()?(R=this.createItemModel({id:this.generateId(),type:"simulation"}),this._toplevelReplaceItemAt(p.index,R,!0)):"betchacant"===B||"pride"===B?this.runAfterDispatch((function(){o.triggerEasterEgg&&o.triggerEasterEgg(B)})):_.setLatex(p,B);break;case"set-visualization-prop":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setVizProp(K,e.prop,e.value);break;case"set-clickableinfo-prop":if(!(K=this.getItemModel(e.id)))return;"expression"===K.type?_.setClickableInfoProp(K,e.prop,e.value):"simulation"===K.type?L.setClickableInfoProp(K,e.prop,e.value):"image"===K.type&&M.setClickableInfoProp(K,e.prop,e.value),!0===e.value&&(A.setFocusLocation(this,{type:"clickableinfo-rule",id:e.id,location:{ruleId:"1",prop:"assignment"}}),this.listModel.openItemMenu=void 0);break;case"set-clickableinfo-rule-prop":if(!(K=this.getItemModel(e.id)))return;"expression"===K.type?_.setClickableInfoRuleProp(K,e.ruleId,e.prop,e.value):"image"===K.type?M.setClickableInfoRuleProp(K,e.ruleId,e.prop,e.value):"simulation"===K.type&&L.setClickableInfoRuleProp(K,e.ruleId,e.prop,e.value);break;case"add-clickableinfo-rule":if(!(K=this.getItemModel(e.id)))return;var j="";"expression"===K.type?(j=$.getNextAvailableId(K.clickableInfo.rules),_.addClickableInfoRule(K,j)):"image"===K.type?(j=$.getNextAvailableId(K.clickableInfo.rules),M.addClickableInfoRule(K,j)):"simulation"===K.type&&(j=$.getNextAvailableId(K.clickableInfo.rules),L.addClickableInfoRule(K,j)),j&&A.setFocusLocation(this,{type:"clickableinfo-rule",id:K.id,location:{prop:"assignment",ruleId:j}});break;case"remove-clickableinfo-rule":if(!(K=this.getItemModel(e.id)))return;"expression"===K.type?_.removeClickableInfoRule(K,e.ruleId):"image"===K.type?M.removeClickableInfoRule(K,e.ruleId):"simulation"===K.type&&L.removeClickableInfoRule(K,e.ruleId);break;case"set-folder-title":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"folder"!==K.type)return;I.setTitle(K,e.title);break;case"set-image-mq-attribute":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"image"!==K.type)return;M.setMQAttribute(K,e.attribute,e.latex);break;case"set-image-name":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"image"!==K.type)return;M.setName(K,e.name);break;case"set-image-draggable":if(!(K=this.getItemModel(e.id))||"image"!==K.type)return;var z=M.getCenterExternalReferencedModel(K);if(!z)return;M.setDraggable(K,e.draggable),!e.draggable||z.reconciledDragMode!==d.DragMode.NONE&&z.dragMode!==d.DragMode.AUTO||_.setDragMode(z,d.DragMode.XY);break;case"set-graph-settings":for(var G in e)"type"!==G&&this.graphSettings.setProperty(G,e[G]);break;case"set-polar-domain-minlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setPolarDomainMin(K,e.latex);break;case"set-polar-domain-maxlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setPolarDomainMax(K,e.latex);break;case"set-parametric-domain-minlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setParametricDomainMin(K,e.latex);break;case"set-parametric-domain-maxlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setParametricDomainMax(K,e.latex);break;case"set-note-text":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"text"!==K.type)return;C.setText(K,e.text);break;case"set-edit-list-mode":var K=P.getSelected(this.listModel);if(this.setEditListMode(e.isEditListMode),e.focusExpressionList){if(void 0===K&&(K=this.getItemModelByIndex(0)),!K)return;A.moveFocusToItem(this,K.id,"table"===K.type&&e.isEditListMode?"container":"start")}else P.setSelected(this.listModel,void 0),A.setFocusLocation(this,void 0);break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",e.value);break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",e.value);break;case"set-tablecell-latex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.tableId))||"table"!==K.type)return;k.setCellLatex(K,e.cell,e.latex);break;case"set-state":this.externalSetState(e.state,e.opts);break;case"set-blank":this.externalSetState(this.getBlankState(),e.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges");break;case"reset-graph":var Y=this.getState();this.externalSetState(this.graphSettings.defaultState,{}),this._showToast({message:this.s("graphing-calculator-text-toast-graph-reset"),undoCallback:function(){return o.dispatch({type:"set-state",state:Y,opts:{}})}}),this.enqueueEvent("graphReset");break;case"clear-graph":if(this.triggerClearGraph)return void this.runAfterDispatch((function(){return o.triggerClearGraph()}));var Q,X=this.getState();this.externalSetState(this.getBlankState(),{}),(Q=this.getItemModelByIndex(0))&&A.moveFocusToItem(this,Q.id,"end"),this._showToast({message:this.s("graphing-calculator-text-toast-graph-cleared"),undoCallback:function(){return o.dispatch({type:"set-state",state:X,opts:{}})}}),this.enqueueEvent("graphReset");break;case"on-evaluator-changes":if(this.onEvaluatorChangesSpy&&this.onEvaluatorChangesSpy(e.changes,e.timingData,e.graphData),P.onEvaluatorFormulaUpdates(this.listModel,e.changes),!e.graphData)break;for(i in e.graphData.addedGraphs){var Z=e.graphData.addedGraphs[i];this.grapher&&this.grapher.updateSketch(i,Z),P.onGraphComputed(this.listModel,i,Z)}for(i in e.graphData.removedGraphs)this.grapher&&this.grapher.hide(i);for(i in e.graphData.intersections)this.grapher&&"2d"===this.grapher.type&&this.grapher.updateIntersections(i,e.graphData.intersections[i]);this.grapher&&this.grapher.poiController&&this.grapher.poiController.handleTraceUpdate();break;case"add-helper-expression":P.addHelperExpression(this.listModel,e.state);break;case"tick":(ie=this.getPlayingSimulation())?this.tickPlayingSimulationIfAppropriate(ie).canEnqueue&&this.clickableObjectQueueInfo.queuedItems.push({time:Date.now(),id:ie.id,type:"simulation-tick"}):this._tickSliders(e.time);break;case"adjust-slider-by-keyboard":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.adjustSliderByKeyboard(K,e.adjustment);break;case"adjust-slider-by-dragging-thumb":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.adjustSliderByDraggingThumb(K,e.target);break;case"set-slider-minlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSliderMin(K,e.latex);break;case"set-slider-maxlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSliderMax(K,e.latex);break;case"set-slider-steplatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSliderStep(K,e.latex);break;case"set-slider-dragging":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSliderDragging(K,e.dragging);break;case"play-slider-from-min":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;var J=_.getSliderMin(K);if(isNaN(J))return;var ee=_.computeNewSliderLatex(K.latex,J);_.setSliderIsPlaying(K,!1),_.setLatex(K,ee),_.setSliderIsPlaying(K,!0);break;case"set-slider-isplaying":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;e.isPlaying&&this.stopPlayingSimulation(),_.setSliderIsPlaying(K,e.isPlaying);break;case"set-simulation-isplaying":if(!(K=this.getItemModel(e.id))||"simulation"!==K.type)return;e.isPlaying&&(this.stopPlayingSimulation(),this.stopAllSliders()),L.setIsPlaying(K,e.isPlaying);break;case"set-simulation-fps":if(!(K=this.getItemModel(e.id))||"simulation"!==K.type)return;L.setFPS(K,e.fps);break;case"set-slider-loopmode":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSliderLoopMode(K,e.loopMode);break;case"set-slider-animationperiod":if(!(K=this.getItemModel(e.id))||"expression"!==K.type)return;_.setSliderAnimationPeriod(K,e.animationPeriod);break;case"show-expressions-list":this._showExpressions(e.focusHideIcon);break;case"hide-expressions-list":this._hideExpressions(e.focusShowIcon);break;case"open-drawer":this.enqueueEvent("openDrawer");break;case"re-randomize":this.setRandomSeed(W.default());break;case"resize-exp-list":this._setExpListWidth(e.expListWidth);break;case"toast/show":this._showToast(e.toast);break;case"toast/close":var te=this.toastData.onHide;te&&this.runAfterDispatch(te),this.toastData={};break;case"toast/undo":var re=this.toastData.undoCallback;re&&this.runAfterDispatch(re),this.toastData={};break;case"toast/learn-more":var ne=this.toastData.undoCallback;ne&&this.runAfterDispatch(ne),this.toastData={};break;case"start-moving-point":V.onStartMovingPoint(this,this.listModel,e.pointInfo);break;case"stop-moving-point":V.onStopMovingPoint(this,e.pointInfo);break;case"on-move-point":V.onMovePoint(this,e.pointInfo,e.screenPt,e.projection,e.keyboardDirection)&&this.enqueueEvent("userMovedPoint");break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(e.viewport);break;case"set-viewport":this._setAxisLimitLatex("xmin",e.viewport.xmin+""),this._setAxisLimitLatex("xmax",e.viewport.xmax+""),this._setAxisLimitLatex("ymin",e.viewport.ymin+""),this._setAxisLimitLatex("ymax",e.viewport.ymax+"");break;case"set-axis-limit-latex":this._setAxisLimitLatex(e.limit,e.latex);break;case"toggle-graph-settings":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),e.focusOnOpen&&this.layoutModel.graphSettingsOpen&&A.setFocusLocation(this,{type:"settings",location:"projector-mode"});break;case"close-graph-settings":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{graphSettingsOpen:!1}),e.focusIconAfterClose&&A.setFocusLocation(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{addExpressionOpen:!this.layoutModel.addExpressionOpen}),e.focusOnOpen&&this.layoutModel.addExpressionOpen&&A.setFocusLocation(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),e.focusIconAfterClose&&A.setFocusLocation(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:e.size.width,height:e.size.height},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.s("graphing-calculator-text-toast-expression-size-limit")});break;case"keypad/set-layout":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadLayout:e.layout,keypadFunctionsOpen:!1});break;case"keypad/set-functions-tab":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadFunctionsTab:e.tab});break;case"keypad/set-minimized":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadMinimized:e.minimized,keypadLayout:"mainNumbers"}),this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||A.addFocusForKeypad(this);break;case"keypad/type-text":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch((function(){var t=U.default.getFocusedMathquill();t&&U.default.canAcceptText(t,o.getCapExpressionSize(),e.text)&&(t.typedText(e.text),U.default.simulateUserChangedLatex(t))}));break;case"keypad/press-key":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch((function(){var t=U.default.getFocusedMathquill();t&&U.default.simulateKeypress(t,e.key)}));break;case"keypad/audio-trace":this.handleAudioTraceCommand(e.command);break;case"set-audio-trace-speed":this.setAudioTraceSpeed(e.speed);break;case"keypad/custom-command":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch((function(){var t=U.default.getFocusedMathquill();t&&(H.execute(t,e.command),U.default.simulateUserChangedLatex(t))}));break;case"keypad/shift":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadLayout:q.getShiftedLayoutForCurrentLayout(this.getKeypadLayout()),keypadFunctionsOpen:!1});break;case"keypad/123":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadLayout:"mainNumbers",keypadFunctionsOpen:!1});break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadLayout:"letters",keypadFunctionsOpen:!1}):this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1});break;case"keypad/audio":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadMinimized:!1,keypadLayout:"audio",keypadFunctionsOpen:!1});break;case"keypad/functions":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()});break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{isFileDraggedOver:!0});break;case"file-is-not-dragged-over":this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{isFileDraggedOver:!1});break;case"zoom":this.grapher&&this.grapher.viewportController.zoom(e.direction);break;case"set-hovered-image":if(!(K=this.getItemModel(e.id))||"image"!==K.type)return;M.setClickableInfoProp(K,"hoveredImage",e.url);break;case"set-depressed-image":if(!(K=this.getItemModel(e.id))||"image"!==K.type)return;M.setClickableInfoProp(K,"depressedImage",e.url);break;case"attempt-queued-clickable-object":for(var ie=this.getPlayingSimulation();!this.areClickableObjectsTemporarilyDisabled();){var oe=this.clickableObjectQueueInfo.queuedItems.shift();if(!oe)return;if(!(500<Date.now()-oe.time))if("clickable-object"===oe.type)this.handleClickableItemClicked(oe.id);else if("simulation-step"===oe.type)this.applySimulationUpateRules(oe.id);else if("simulation-tick"===oe.type){if(!ie||ie.id!==oe.id)continue;this.tickPlayingSimulationIfAppropriate(ie)}}break;case"clickable-item-clicked":if(this.areClickableObjectsTemporarilyDisabled())return void this.clickableObjectQueueInfo.queuedItems.push({time:Date.now(),id:e.id,type:"clickable-object"});this.handleClickableItemClicked(e.id);break;case"simulation-single-step":if(!(K=this.getItemModel(e.id))||"simulation"!==K.type)return;if(this.areClickableObjectsTemporarilyDisabled())return void this.clickableObjectQueueInfo.queuedItems.push({time:Date.now(),id:e.id,type:"simulation-step"});this.applySimulationUpateRules(e.id);break;case"update-expression-search-str":this.updateExpressionSearchStr(e.str);break;case"set-braille-mode":this.setBrailleMode(e.mode);break;case"set-six-key-input":this.setSixKeyInput(e.useSixKeyInput);break;case"close-expression-search":this.expressionSearchOpen=!1,this.updateExpressionSearchStr("");break;case"open-expression-search":this.expressionSearchOpen=!0,this.focusLocation={type:"search-expressions"};break;default:return e}},Q.prototype.handleClickableItemClicked=function(e){var t=this.getItemModel(e);if(t&&("expression"===t.type||"image"===t.type)){for(var r=!1,n=0,i=t.clickableInfo.rules;n<i.length;n++){var o=i[n];this.applyClickableObjectRule(t,o.id)&&(r=!0)}return r&&(this.clickableObjectQueueInfo.didDispatchTripLockout=!0,this.enqueueEvent("userClickedObject"),this.onClickableObjectUpdatesAppliedSpy&&this.onClickableObjectUpdatesAppliedSpy()),r}},Q.prototype.applySimulationUpateRules=function(e){var t=this.getItemModel(e);if(t&&"simulation"===t.type){for(var r=!1,n=0,i=t.clickableInfo.rules;n<i.length;n++){var o=i[n];this.applyClickableObjectRule(t,o.id)&&(r=!0)}return r&&(this.clickableObjectQueueInfo.didDispatchTripLockout=!0,this.onSimulationUpdatesAppliedSpy&&this.onSimulationUpdatesAppliedSpy()),r}},Q.prototype.applyClickableObjectRule=function(e,t){var r,n,i,o;return"expression"===e.type?r=_.getClickableInfoUpdateLatex(e,t):"image"===e.type?r=M.getClickableInfoUpdateLatex(e,t):"simulation"===e.type&&(r=L.getClickableInfoUpdateLatex(e,t)),!!r&&("expression"===e.type?n=_.getClickableInfoUpdateIdentifier(e,t):"image"===e.type?n=M.getClickableInfoUpdateIdentifier(e,t):"simulation"===e.type&&(n=L.getClickableInfoUpdateIdentifier(e,t)),!n||1===(i=P.getItemsByIdentifier(this.listModel,n)).length&&((o=i[0]).slider.isPlaying?(_.setSliderIsPlaying(o,!1),_.setLatex(o,r),_.setSliderIsPlaying(o,!0)):_.setLatex(o,r)),!0)},Q.prototype.updateExpressionSearchStr=function(e){this.expressionSearchStr=e,P.filterItemsBySearch(this.listModel,e)},Q.prototype.getExpressionSearchStr=function(){return this.expressionSearchStr||""},Q.prototype.areClickableObjectsTemporarilyDisabled=function(){return!!this.clickableObjectQueueInfo.didDispatchTripLockout||0<this.clickableObjectQueueInfo.lockoutCounter},Q.prototype.getBrailleMode=function(){return this.graphSettings.config.brailleMode},Q.prototype.setBrailleMode=function(e){this.graphSettings.config.setProperty("brailleMode",e)},Q.prototype.getSixKeyInput=function(){return this.graphSettings.config.sixKeyInput},Q.prototype.setSixKeyInput=function(e){this.graphSettings.config.setProperty("sixKeyInput",e)},Q.prototype.getBrailleControls=function(){return this.graphSettings.config.brailleControls},Q.prototype.setBrailleControls=function(e){this.graphSettings.config.setProperty("brailleControls",e)},Q.prototype.setEditListMode=function(e){this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{inEditListMode:e})},Q.prototype.generateTableXSubscript=function(){return P.findAvailableColumnSubscript(this.listModel)},Q.prototype._createTableItem=function(){var e=this.generateTableXSubscript(),t=k.makeTableState(e,[[""],[""]],this);return this.createItemModel(t)},Q.prototype._populateSettingsViewLimitLatex=function(){this.grapher&&(this.settingsViewModel=n.__assign(n.__assign({},this.settingsViewModel),{limitLatex:N.limitLatex(this.grapher.getCurrentViewport(),this.getGraphSettings().xAxisStep,this.getGraphSettings().yAxisStep)}))},Q.prototype.getSettingsViewModel=function(){return this.settingsViewModel},Q.prototype.getListModel=function(){return this.listModel},Q.prototype.hasBackgroundColor=function(){return"#ffffff"!==this.getBackgroundColor()},Q.prototype.getBackgroundColor=function(){return this.getGraphSettings().getBackgroundColor()},Q.prototype.getTextColor=function(){return this.getGraphSettings().getTextColor()},Q.prototype.getPillboxBackgroundColor=function(){return w.shadeColor(this.getBackgroundColor(),-.07)},Q.prototype.subToChanges=function(e){var t=this,r=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[r]=e,function(){delete t.subscriptions[r]}},Q.prototype.updateTheComputedWorld=function(){var e=this;P.reindex(this.listModel),P.updateDrawOrder(this.listModel),this.grapher&&this.grapher.setSketchOrder(this.listModel.drawOrder);for(var t,r=0,i=this.getAllItemModels();r<i.length;r++){var o=i[r];switch(o.type){case"expression":_.onControllerUpdate(o);break;case"image":M.onControllerUpdate(o);break;case"table":k.onControllerUpdate(o);break;case"folder":I.onControllerUpdate(o);break;case"text":C.onControllerUpdate(o);break;case"simulation":L.onControllerUpdate(o);break;default:return o}}this.isCurrentFocusLocationValid()||A.setFocusLocation(this,void 0),this.listModel.openItemMenu&&(t=this.getActiveIcon(),document.body&&t&&document.body.contains(t[0])||(this.listModel.openItemMenu=void 0));var a=this.getSelectedItem();a&&!this.getItemModel(a.id)&&P.setSelected(this.listModel,void 0),this.layoutModel.graphSettingsOpen||this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.isKeypadOpen()||(this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{keypadFunctionsOpen:!1})),this.runAfterDispatch((function(){e.grapher&&"2d"===e.grapher.type&&e.grapher.audioGraph.checkIfSelectedItemChanged(a?a.id:void 0),e.grapher&&"2d"===e.grapher.type&&e.focusLocation&&e.grapher.audioGraph.exitAudioTrace()}))},Q.prototype.getActiveIcon=function(){var e=this.getOpenItemMenu();if(e){var t=this.find$('[model-id="'+e.model.id+'"]');if(0!==t.length)return t}},Q.prototype.propagateSelection=function(){this.grapher&&this.evaluator?this.__lastSelectedId=r.propagateSelection(this,this.grapher,this.evaluator,this.__lastSelectedId):this.__lastSelectedId=void 0},Q.prototype.getIntersectId=function(){return this.__lastSelectedId},Q.prototype.areParsableObjectsEqual=function(e,t){return e===t||s.isEqual(n.__assign(n.__assign({},e),{regressionParameters:void 0}),n.__assign(n.__assign({},t),{regressionParameters:void 0}))},Q.prototype.requestParseForAllItems=function(){(this.isCurrentlyDoingSetState||this.isCurrentlyDoingRestoreState)&&(this.lastParsableObjects={},this.evaluator.clearStatementsAndStartCompleteState(),this.clickableObjectQueueInfo.didDispatchTripLockout=!0,this.clickableObjectQueueInfo.queuedItems=[],this.isCurrentlyDoingRestoreState&&this.evaluator.markUndoRedoState());for(var e={},t=this.lastParsableObjects,r=0,n=this.getAllItemModels();r<n.length;r++)switch((p=n[r]).type){case"expression":case"image":case"table":case"simulation":e[p.guid]=p.cachedParsableState;break;case"folder":case"text":break;default:return p}for(var i=0,o=P.getAllHelperItemModels(this.listModel);i<o.length;i++)e[(p=o[i]).guid]=p.cachedParsableState;for(var a in t){var s=t[a],l=e[a];if("image"!==s.type||l&&l.type===s.type&&l.guid===s.guid||this.grapher&&this.grapher.removeGraphImage(s.id),!l&&(this.evaluator.removeStatement(s.id),"table"===s.type))for(var c=0,u=s.columns;c<u.length;c++){var d=u[c];this.evaluator.removeStatement(d.id)}}for(var a in e){var p;l=e[a],s=t[a],"image"!==l.type||s&&l.type===s.type&&l.guid===s.guid||this.grapher&&(p=this.getItemModel(l.id))&&"image"===p.type&&this.grapher.addGraphImage(p),this.areParsableObjectsEqual(l,s)||(this.grapher&&"statement"===l.type&&""===l.latex&&this.grapher.removeGraphSketch(l.id),this.evaluator.addStatement(l))}this.lastParsableObjects=e},Q.prototype.getViewState=function(){if(this.grapher){var e=this.grapher.getProjection();return{viewport:e.viewport.toObject(),screen:e.screen}}},Q.prototype.setEvaluator=function(e){this.evaluator=e},Q.prototype.setGrapher=function(e){this.grapher=e},Q.prototype.getGrapher=function(){return this.grapher},Q.prototype.shouldExpressionZoomFit=function(e){return!!this.grapher&&!!this.isZoomFitEnabled()&&("expression"===e.type||"table"===e.type)&&!!("expression"!==e.type||!e.error&&e.shouldGraph&&e.formula.is_graphable)&&!(!e.boundingBoxes||!e.boundingBoxes.length)&&D.shouldExpressionZoomFit(e.boundingBoxes,this.grapher.viewportController.getProjection())},Q.prototype.setBugsnagContext=function(e){this.bugsnagContext=e},Q.prototype.getItemRootNodeById=function(e){var t=this.getItemModel(e);return t&&t.dcgView?t.dcgView.findRootNode():void 0},Q.prototype.getItemSelectorById=function(e){var t=this.getItemRootNodeById(e);return t?R(t):void 0},Q.prototype.generateId=function(){var e=this.__nextItemId;return this.__nextItemId+=1,e+""},Q.prototype.getNextColor=function(){return P.getNextColor(this.listModel)},Q.prototype.getNextDisplayIndex=function(){return this.listModel.nextDisplayIndex},Q.prototype._clearPendingImageUploads=function(){this.__pendingImageUploads={}},Q.prototype.isUploadingImages=function(){return 0<Object.keys(this.__pendingImageUploads).length},Q.prototype.getExpressionAnalysis=function(){return this.listModel.expressionAnalysis},Q.prototype.createItemModel=function(e){return P.modelFromSpec(this.listModel,e)},Q.prototype.getItemModel=function(e){return P.getItemById(this.listModel,e)},Q.prototype.getColorById=function(e){var t=this.getItemModel(e);return t&&"expression"===t.type?_.getEvaluationValue(t):""},Q.prototype.getAllColorAssignments=function(){for(var e=[],t=0,r=this.getAllItemModels();t<r.length;t++){var n,i,o=r[t];"expression"===o.type&&(!(n=_.getAssignment(o))||("string"==typeof(i=this.getEvaluationValueForItem(o.id))||Array.isArray(i)&&"string"==typeof i[0])&&e.push({id:o.id,assignmentLatex:a.identifierToLatex(n)}))}return e},Q.prototype.getItemModelByIndex=function(e){return P.getItemByIndex(this.listModel,e)},Q.prototype.getItemCount=function(){return P.getItemCount(this.listModel)},Q.prototype.getItemEditableLabelMode=function(e){var t=this.getItemModel(e);if(t&&"expression"===t.type)return _.getEditableLabelMode(t)},Q.prototype.isItemSecret=function(e){var t=this.getItemModel(e);return!!t&&P.isItemSecret(t)},Q.prototype.isItemSelected=function(e){var t=this.getItemModel(e);return!!t&&P.isItemSelected(t)},Q.prototype.isItemSelectable=function(e){var t=this.getItemModel(e);return!!t&&P.isItemSelectable(t)},Q.prototype.anyItemDependsOnRandomSeed=function(){return P.anyItemDependsOnRandomSeed(this.listModel)},Q.prototype.getAllItemModels=function(){return P.getAllItemModels(this.listModel)},Q.prototype.getAllModelsWithSliders=function(){return P.getAllModelsWithSliders(this.listModel)},Q.prototype.getGraphSettings=function(){return this.graphSettings},Q.prototype.getAudioGraph=function(){return void 0!==this.grapher&&"2d"===this.grapher.type?this.grapher.audioGraph:void 0},Q.prototype.inAudioTraceMode=function(){var e=this.getAudioGraph();return!(!e||!e.audioTraceActive)},Q.prototype.canAudioTrace=function(){var e=this.getAudioGraph();return!!e&&e.canAudioTraceCurrentExp()},Q.prototype.isAudioTracing=function(){var e=this.getAudioGraph();return!!e&&e.getIsTracing()},Q.prototype.expressionsAreFullWidth=function(){return this.isNarrow()||!1===this.graphSettings.config.graphpaper},Q.prototype.getExpListWidthString=function(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"},Q.prototype.getExpListWidth=function(){return this.rootElt?this._getExpListWidth():0},Q.prototype.findFirstVisibleItem=function(){var e=G.getFirstVisibleItemId(this,this._previousFirstVisibleId);return(this._previousFirstVisibleId=e)?this.getItemModel(e):void 0},Q.prototype.findLastVisibleItem=function(){var e=G.getLastVisibleItemId(this,this._previousLastVisibleId);return(this._previousLastVisibleId=e)?this.getItemModel(e):void 0},Q.prototype.updateRenderShellsAfterDispatch=function(){if(this.rootElt&&this.isListVisible()){var e=this.findFirstVisibleItem(),t=this.findLastVisibleItem(),r=e&&this.getItemRootNodeById(e.id),n=t&&this.getItemRootNodeById(t.id);if(r!==this.lastInfiniteScrollFirstDOM||n!==this.lastInfiniteScrollLastDOM||this.hasDispatchSinceLastInfiniteScrollUpdate){this.lastInfiniteScrollFirstDOM=r,this.lastInfiniteScrollLastDOM=n;var i,o=this.hasDispatchSinceLastInfiniteScrollUpdate=!1,a=e?e.index:1/0,s=t?t.index:1/0,l=this.listModel.dragState&&this.listModel.dragState.firstItemId,c=this.getOpenItemMenu();c&&(i=c.model.id);for(var u=0,d=this.getAllItemModels();u<d.length;u++){var p,h,g=d[u],f=!(g.index>=a&&g.index<=s&&!g.isHiddenFromUI);l==g.id&&(f=!1),i===g.id&&(f=!1),g.renderShell!==f&&(o=!0,(g.renderShell=f)&&(!(p=this.getItemRootNodeById(g.id))||0<(h=p.getBoundingClientRect().height)&&(g.cachedRenderHeight=h)))}o&&this.markTickRequiredNextFrame()}}},Q.prototype.updateRenderShellsBeforePaint=function(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode)for(var e=0,t=this.getAllItemModels();e<t.length;e++)(r=t[e]).renderShell=!1;else{for(var r,n=0,i=this.getAllItemModels();n<i.length;n++)(r=i[n]).isHiddenFromUI&&(r.renderShell=!0);var o=this.getSelectedItem();o&&(o.renderShell=!1)}},Q.prototype.updateDragDrop=function(){var e,t,r=this.listModel.dragState;r&&(!(e=this.getItemModel(r.firstItemId))||(t=this.dragdrop_expressions.applyDrag())&&(P.setDragState(this.listModel,t.dragState),T.setFolderId(e,t.folderId),e.index!==t.newIndex&&P.moveItemsTo(this.listModel,e.index,t.newIndex,r.numberOfItems)))},Q.prototype._tickSliders=function(e){this.getPlayingSliders().forEach((function(t){_.tickSliderStep(t,e)}))},Q.prototype.tickPlayingSimulationIfAppropriate=function(e){var t,r=L.getEvaluatedFPS(e);if(0===r)return{canEnqueue:!1};if(r<60){var n=this.cachedPlayingSimulationData&&this.cachedPlayingSimulationData.lastTickTime,i=void 0===n?1/0:n+1e3/r;if(Date.now()<i)return{canEnqueue:!1}}if(this.isSimulationBlockedByTransientOutput(e))return{canEnqueue:!1};if(this.areClickableObjectsTemporarilyDisabled()){var o=this.clickableObjectQueueInfo.queuedItems,a=o[o.length-1];return{canEnqueue:!(a&&"simulation-tick"===a.type)}}return this.applySimulationUpateRules(e.id),this.cachedPlayingSimulationData&&(this.cachedPlayingSimulationData.lastTickTime?(t=this.cachedPlayingSimulationData.lastTickTime+1e3/r,this.cachedPlayingSimulationData.lastTickTime=Math.max(Date.now()-500,t)):this.cachedPlayingSimulationData.lastTickTime=Date.now()),{canEnqueue:!1}},Q.prototype.invalidatePlayingSimulationCache=function(){this.cachedPlayingSimulationData=void 0},Q.prototype.getPlayingSimulation=function(){var e=this.cachedPlayingSimulationData;if(!e){var t=this._scanAllItemsForPlayingSimulation();return this.cachedPlayingSimulationData={id:t&&t.id,lastTickTime:0},t}if(e.id){var r=this.getItemModel(e.id);return r&&"simulation"===r.type&&!0===r.isPlaying?r:(B.notify("getPlayingSimulation: invalid cache",{metaData:{cache:e,itemExists:!!r,itemType:r&&r.type,itemPlaying:r&&r.isPlaying}}),this.invalidatePlayingSimulationCache(),this.getPlayingSimulation())}},Q.prototype._scanAllItemsForPlayingSimulation=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var r=t[e];if("simulation"===r.type&&r.isPlaying)return r}},Q.prototype.isSimulationBlockedByTransientOutput=function(e){for(var t=L.getAllOutputs(e),r=0,n=this.getAllItemModels();r<n.length;r++){var i=n[r];if("expression"==i.type&&_.isTransientAndShouldBlockSimulation(i)&&(o=_.getAssignment(i))&&t[o])return!0}if(this.focusLocation&&"expression"===this.focusLocation.type){var o,a=this.getItemModel(this.focusLocation.id);if(a&&"expression"===a.type&&(o=_.getAssignment(a))&&t[o])return!0}return!1},Q.prototype.stopPlayingSimulation=function(){var e=this.getPlayingSimulation();e&&L.setIsPlaying(e,!1)},Q.prototype.stopAllSliders=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var r=t[e];"expression"===r.type&&r.slider.isPlaying&&_.setSliderIsPlaying(r,!1)}},Q.prototype.getPlayingSliders=function(){for(var e=[],t=0,r=this.getAllItemModels();t<r.length;t++){var n=r[t];"expression"===n.type&&n.sliderExists&&n.slider.isPlaying&&e.push(n)}return e},Q.prototype.hasAnyTableThatRequiresTicks=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var r=t[e];if(!r.renderShell&&"table"===r.type&&25<=r.rowModels.length)return!0}return!1},Q.prototype.areAnyImagesLoading=function(){return P.areAnyImagesLoading(this.listModel)},Q.prototype._commitUserRequestedViewport=function(e){this.grapher&&this.grapher.setUserRequestedViewport(e)},Q.prototype._setAxisLimitLatex=function(e,t){var r,i;this.settingsViewModel=n.__assign(n.__assign({},this.settingsViewModel),{limitLatex:n.__assign(n.__assign({},this.settingsViewModel.limitLatex),((r={})[e]=t,r))});var o,a=""!==t||"xstep"!==e&&"ystep"!==e?F.default(t,this.graphSettings.degreeMode):0;switch(e){case"xstep":if(a<0||!isFinite(a))return;this.graphSettings.setProperty("xAxisStep",a);break;case"ystep":if(a<0||!isFinite(a))return;this.graphSettings.setProperty("yAxisStep",a);break;case"xmin":case"xmax":case"ymin":case"ymax":if(!this.grapher)return;var s=this.grapher.viewportController.getViewport(),l="ymin"===e?"ymax":"ymax"===e?"ymin":"xmin"===e?"xmax":"xmin",c=F.default(this.settingsViewModel.limitLatex[l],this.graphSettings.degreeMode),u=y.Viewport.fromObject(n.__assign(n.__assign({},s.toObject()),((i={})[e]=a,i[l]=c,i)));if(!u.isValid())return;this.grapher.viewportController.setViewport(u);var d="xmin"===e||"xmax"===e?"x":"y";this.graphSettings.setProperty("lastChangedAxis",d);var p=u.isSquare(this.grapher.getProjection().screen);this.graphSettings.setProperty("squareAxes",p)}this.grapher&&(o=this.grapher.viewportController.getViewport().toObject(),this._commitUserRequestedViewport(o))},Q.prototype.canUserAddExpressions=function(){return!!this.graphSettings.config.expressions},Q.prototype.areNotesEnabled=function(){return!!this.graphSettings.config.notes},Q.prototype.areSlidersEnabled=function(){return!!this.graphSettings.config.sliders},Q.prototype.areLinksEnabled=function(){return!!this.graphSettings.config.links},Q.prototype.areImagesEnabled=function(){var e=window.FileReader,t=o.IS_IPAD&&o.IOS_VERSION&&8===o.IOS_VERSION[0]&&0===o.IOS_VERSION[1]&&0===o.IOS_VERSION[2];return!(!this.graphSettings.config.images||!e||t)},Q.prototype.areFoldersEnabled=function(){return!!this.graphSettings.config.folders},Q.prototype.areSimulationsEnabled=function(){return this.canAuthorClickableObjects()},Q.prototype.isDecimalToFractionEnabled=function(){return!!this.graphSettings.config.decimalToFraction},Q.prototype.isTraceEnabled=function(){return!!this.graphSettings.config.trace},Q.prototype.areFunctionsRestricted=function(){return!!this.graphSettings.config.restrictedFunctions},Q.prototype.areGeometryFunctionsForceEnabled=function(){return!!this.graphSettings.config.forceEnableGeometryFunctions},Q.prototype.isQwertyKeyboardEnabled=function(){return!!this.graphSettings.config.qwertyKeyboard},Q.prototype.isZoomFitEnabled=function(){return!!this.graphSettings.config.zoomFit},Q.prototype.canEditOnWeb=function(){return!!this.graphSettings.config.editOnWeb},Q.prototype.hasTransparentBackground=function(){return!!this.graphSettings.config.transparentBackground},Q.prototype.shouldAudioTraceReverseExpressions=function(){return!!this.graphSettings.config.audioTraceReverseExpressions},Q.prototype.hasDefaultState=function(){return!!this.graphSettings.defaultState},Q.prototype.getDefaultStateViewport=function(){var e=this.graphSettings.defaultState;if(e&&e.graph)return e.graph.viewport},Q.prototype.getColors=function(){return this.graphSettings.config.colors},Q.prototype.getImageOpacities=function(){return["0.2","0.4","0.6","0.8","1"]},Q.prototype.getUIDragModes=function(){return[d.DragMode.X,d.DragMode.Y,d.DragMode.XY]},Q.prototype.getNumberOfItemsInFolder=function(e){return P.getNumberOfItemsInFolder(this.listModel,e)},Q.prototype.getEnabledDragModesForItem=function(e){var t=this.getItemModel(e);if(!t||"expression"!==t.type)return[];var r=t.formula,n=[];if(!r.move_strategy)return n;var i="none"!==r.move_strategy[0].type,o="none"!==r.move_strategy[1].type,a=i&&o;return i&&n.push(d.DragMode.X),o&&n.push(d.DragMode.Y),a&&n.push(d.DragMode.XY),n},Q.prototype.shouldShowEvaluationForItem=function(e){var t=this.getItemModel(e);return!!t&&"expression"===t.type&&_.shouldShowEvaluation(t)},Q.prototype.getEvaluationValueForItem=function(e){var t=this.getItemModel(e);return t&&"expression"===t.type?_.getEvaluationValue(t):NaN},Q.prototype.canDisplayEvaluationForItemAsFraction=function(e){if(!this.isDecimalToFractionEnabled())return!1;var t=this.getItemModel(e);if(!t)return!1;if("expression"!==t.type)return!1;if(_.isGraphable(t))return!1;var r=this.getEvaluationValueForItem(e);return"number"==typeof r&&a.canDisplayAsFraction(r)},Q.prototype.shouldEvaluationForItemDisplayAsFraction=function(e){if(!this.isDecimalToFractionEnabled())return!1;var t=this.getItemModel(e);return!!t&&"expression"===t.type&&_.shouldEvaluationDisplayAsFraction(t)},Q.prototype.getEvaluationLabelOptionsForItem=function(e){return n.__assign(n.__assign({},S.EvaluationLabelOptions),{displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(e)})},Q.prototype.getPointStyles=function(){return[p.PointStyle.POINT,p.PointStyle.OPEN,p.PointStyle.CROSS]},Q.prototype.getLineStyles=function(){return[p.LineStyle.SOLID,p.LineStyle.DASHED,p.LineStyle.DOTTED]},Q.prototype.getOpacities=function(){return[u.LOW,u.DEFAULT,u.HIGH]},Q.prototype.isInEditListMode=function(){return this.layoutModel.inEditListMode},Q.prototype.canAdministerSecretFolders=function(){return this.graphSettings.config.administerSecretFolders},Q.prototype.getInvertedColors=function(){return!!this.graphSettings.config.invertedColors},Q.prototype.canUseAdvancedStyling=function(){return this.graphSettings.config.advancedStyling},Q.prototype.canAuthorClickableObjects=function(){return this.graphSettings.config.clickableObjects},Q.prototype.isDegreeMode=function(){return this.graphSettings.degreeMode},Q.prototype.areLogModeRegressionsForced=function(){return this.graphSettings.config.forceLogModeRegressions},Q.prototype.setAllRegressionsToLogMode=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var r=t[e];"expression"===r.type&&r.formula&&r.formula.is_regression&&_.setLogMode(r,!0)}},Q.prototype.isGraphSettingsOpen=function(){return this.layoutModel.graphSettingsOpen},Q.prototype.isAddExpressionOpen=function(){return this.layoutModel.addExpressionOpen},Q.prototype.shouldRenderList=function(){if(this.layoutModel.expressionsVisible)return!0;var e=this.layoutModel.expressionsHiddenTime;return void 0!==e&&Date.now()-e<=500},Q.prototype.isListVisible=function(){return this.layoutModel.expressionsVisible},Q.prototype.isGrapherEnabled=function(){return!1!==this.graphSettings.config.graphpaper},Q.prototype.isListEnabled=function(){return!1!==this.graphSettings.config.expressions},Q.prototype.areDistributionsEnabled=function(){return!0===this.graphSettings.config.distributions},Q.prototype.isExpressionListFocused=function(){var e=this.getFocusLocation();if(!e)return!1;switch(e.type){case"settings":case"expression-menu":case"editable-label":return!1;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"clickableinfo-rule":case"table":case"image":case"simulation":case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-table-btn":case"add-folder-btn":case"add-simulation-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"simulation-icon":case"simulation-step-icon":case"table-icon":case"hide-expression-list-btn":case"show-expression-list-btn":return!0;default:return e}},Q.prototype.needsFakeKeypad=function(){if(this.inAudioTraceMode()&&this.isKeypadEnabled())return!0;var e=this.getFocusLocation();if(!e)return!1;if("none"!==this.getBrailleMode()&&j.getFocusedBrailleElement())return!1;switch(e.type){case"settings":return"icon"!==e.location&&"degree-mode"!==e.location;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"clickableinfo-rule":return!0;case"expression-menu":return"opacity"===e.location||"linewidth"===e.location||"lineopacity"===e.location||"pointopacity"===e.location||"pointsize"===e.location||"labelsize"===e.location||"labelangle"===e.location;case"table":if(this.isInEditListMode())return!1;var t=e.location;if(0===t.row)return!0;var r=this.getItemModel(e.id);if(!r||"table"!==r.type)return!1;var n=r.columnModels[t.column];return!!n&&!n.disabled;case"image":return"name"!==e.location;case"simulation":case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-table-btn":case"add-folder-btn":case"add-simulation-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"hide-expression-list-btn":case"show-expression-list-btn":case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"simulation-icon":case"simulation-step-icon":case"table-icon":return!1;case"editable-label":return this.getItemEditableLabelMode(e.id)===E.EditableLabelMode.Math;default:return e}},Q.prototype.getBrandingMode=function(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"},Q.prototype.getEditLink=function(){return window.iframeEmbedBrandingLink},Q.prototype._expressionZoomFit=function(e){var t,r=this.getItemModel(e);this.grapher&&this.isZoomFitEnabled()&&r&&("expression"===r.type||"table"===r.type)&&r.boundingBoxes&&r.boundingBoxes.length&&(t=D.getRecommendedViewportForExpression(r.boundingBoxes,this.grapher.viewportController.getProjection()))&&this.grapher.viewportController.zoomCustom(t)},Q.prototype._deleteItemAndAnimateOut=function(e,t){var r=this,n=this.getItemSelectorById(e);n&&(n.css({transition:"0.2s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout((function(){r.dispatch({type:"finish-deleting-item-after-animation",id:e,setFocusAfterDelete:t})}),200))},Q.prototype._finishDeletingItemAfterAnimation=function(e,t){var r,n,i,o,a=this.getItemModel(e);a&&(n=(r=this.getItemSelectorById(e))&&document.activeElement&&0<R(document.activeElement).closest(r).length,i=P.findPrevSelectableItem(this.listModel,a.index),this._removeExpressionSynchronously(a),t&&n&&(i||(o=P.getFirstSelectableItem(this.listModel))&&(i=o),i&&A.moveFocusToItem(this,i.id,"end")))},Q.prototype._removeExpressionSynchronously=function(e){var t;P.removeItemAtIndex(this.listModel,e.index),P.hasNoVisibleExpressions(this.listModel)&&(t=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()}),P.insertItemAtEnd(this.listModel,t))},Q.prototype.setRootElt=function(e){this.rootElt=e,this.dragdrop_expressions=new K.default(this)},Q.prototype._hideExpressions=function(e){this.graphSettings.config.expressions&&(P.setSelected(this.listModel,void 0),this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{expressionsVisible:!1,expressionsHiddenTime:Date.now()}),e?A.setFocusLocation(this,{type:"show-expression-list-btn"}):h.default())},Q.prototype._showExpressions=function(e){this.graphSettings.config.expressions&&(this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{expressionsVisible:!0}),e?A.setFocusLocation(this,{type:"hide-expression-list-btn"}):h.default())},Q.prototype._showToast=function(e){var t,r=this;this.toastData=e,this.toastData.hasOwnProperty("undoCallback")&&!o.IS_MOBILE&&(t=o.IS_APPLE?this.s("graphing-calculator-text-toast-undo-cmd-z"):this.s("graphing-calculator-text-toast-undo-ctrl-z"),this.toastData.message+=" "+t),clearTimeout(this._hideToastTimeout);var n="number"==typeof e.hideAfter?e.hideAfter:6e3;0<n&&(this._hideToastTimeout=setTimeout((function(){r.dispatch({type:"toast/close",onHide:r.toastData.onHide})}),n))},Q.prototype._setExpressionPropertiesFromAPI=function(e,t){var r=this.getItemModel(e);if(r)if("table"===r.type&&t.columns){t=g.default(t);var n=k.cloneTableAndExtendWithProperties(r,t),i=P.modelFromSpec(this.listModel,n);this._toplevelReplaceItemAt(r.index,i,!1)}else{var o=this.getItemModel(e);if(!o)return;for(var a in t)if(t.hasOwnProperty(a))switch(a){case"slider":if("expression"!==o.type)continue;var s=t[a];s.hasOwnProperty("min")&&_.setSliderMin(o,s.min),s.hasOwnProperty("max")&&_.setSliderMax(o,s.max),s.hasOwnProperty("step")&&_.setSliderStep(o,s.step);break;case"polarDomain":if("expression"!==o.type)continue;_.setPolarDomainMin(o,f.default(t.polarDomain.min)),_.setPolarDomainMax(o,f.default(t.polarDomain.max));break;case"parametricDomain":if("expression"!==o.type)continue;_.setParametricDomainMin(o,f.default(t.parametricDomain.min)),_.setParametricDomainMax(o,f.default(t.parametricDomain.max));break;case"hidden":this._setItemHidden(e,t.hidden);break;case"secret":T.setSecret(o,t.secret);break;case"color":if("expression"!==o.type)continue;_.setColor(o,t.color);break;case"dragMode":if("expression"!==o.type)continue;_.setDragMode(o,t.dragMode);break;case"label":if("expression"!==o.type)continue;_.setLabel(o,t.label);break;case"showLabel":if("expression"!==o.type)continue;_.setShowLabel(o,t.showLabel);break;case"labelSize":if("expression"!==o.type)continue;_.setLabelSize(o,t.labelSize);break;case"labelOrientation":if("expression"!==o.type)continue;_.setLabelOrientation(o,t.labelOrientation);break;case"latex":if("expression"!==o.type)continue;_.setLatex(o,t.latex);break;case"points":if("expression"!==o.type)continue;_.setPoints(o,!!t.points);break;case"lines":if("expression"!==o.type)continue;_.setLines(o,!!t.lines);break;case"pointStyle":if("expression"!==o.type)continue;_.setPointStyle(o,t.pointStyle);break;case"pointSize":if("expression"!==o.type)continue;_.setPointSize(o,t.pointSize);break;case"pointOpacity":if("expression"!==o.type)continue;_.setPointOpacity(o,t.pointOpacity);break;case"lineStyle":if("expression"!==o.type)continue;_.setLineStyle(o,t.lineStyle);break;case"lineWidth":if("expression"!==o.type)continue;_.setLineWidth(o,t.lineWidth);break;case"lineOpacity":if("expression"!==o.type)continue;_.setLineOpacity(o,t.lineOpacity);break;case"fill":if("expression"!==o.type)continue;_.setFill(o,t.fill);break;case"fillOpacity":if("expression"!==o.type)continue;_.setFillOpacity(o,t.fillOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+a)}}},Q.prototype._isParentFolderHidden=function(e){var t=this.getItemModel(e);if(!t)return!1;var r=P.getParentFolderModel(t);return!!r&&r.hidden},Q.prototype._toggleItemHidden=function(e){if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{var t=this.getItemModel(e);if(!t)return;switch(t.type){case"expression":case"image":case"folder":this._setItemHidden(e,!t.hidden);break;case"table":case"text":case"simulation":break;default:return t}}},Q.prototype._toggleTableColumnHidden=function(e,t){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,t,!1);else{var r=this.getItemModel(e);if(!r||"table"!==r.type)return;var n=k.getColumnModel(r,t);if(!n)return;this._setTableColumnHidden(e,t,!n.hidden)}},Q.prototype._setTableColumnHidden=function(e,t,r){var n,i=this.getItemModel(e);i&&"table"===i.type&&(n=k.shouldHideColumn(i,t),!r&&this._isParentFolderHidden(e)&&this._setItemHidden(i.folderId,!1),k.setColumnHidden(i,t,r),!r&&n&&k.setColumnPoints(i,t,!0))},Q.prototype._setItemHidden=function(e,t){var r=this.getItemModel(e);if(r)switch(!t&&"folder"!==r.type&&this._isParentFolderHidden(r.id)&&this._setItemHidden(r.folderId,!1),r.type){case"expression":_.setHidden(r,t);break;case"folder":I.setHidden(r,t);break;case"image":M.setHidden(r,t);break;case"table":case"text":case"simulation":break;default:return r}},Q.prototype._addItemToEndFromAPI=function(e){var t=P.getLastSelectableItem(this.listModel);!e.secret&&t&&"expression"===t.type&&""===t.latex&&P.removeItemAtIndex(this.listModel,t.index),P.insertItemAtEnd(this.listModel,e)},Q.prototype._toplevelInsertItemAt=function(e,t,r,n){var i=t;P.insertItemAtIndex(this.listModel,i,e),n&&T.setFolderId(i,n),r&&A.moveFocusToItem(this,i.id)},Q.prototype._toplevelNewItemAtSelection=function(e,t){var r=this.getSelectedItem();if(r){var n="expression"===r.type&&!r.latex;if(n&&!r.folderId&&("expression"!==e.type||e.latex))return this._toplevelReplaceItemAt(r.index,e,t.shouldFocus);if(n&&r.folderId&&"expression"!==e.type&&"folder"!==e.type)return this._toplevelReplaceItemAt(r.index,e,t.shouldFocus);if("folder"!==r.type&&!r.folderId)return this._toplevelInsertItemAt(r.index+1,e,t.shouldFocus,void 0);if("folder"!==r.type&&r.folderId&&"folder"!==e.type)return this._toplevelInsertItemAt(r.index+1,e,t.shouldFocus,r.folderId);if("folder"===r.type&&!r.collapsed&&"folder"!==e.type)return this._toplevelInsertItemAt(r.index+1,e,t.shouldFocus,r.id)}var i=this.getFirstFullyVisibleItem();for(i&&"folder"===i.type&&(i=this.getItemModelByIndex(i.index+1));i&&"folder"!==i.type&&i.folderId;)i=this.getItemModelByIndex(i.index+1);var o=i?i.index:this.getItemCount();return this._toplevelInsertItemAt(o,e,t.shouldFocus,void 0)},Q.prototype.getFirstFullyVisibleItem=function(){var e=G.getFirstFullyVisibleItemId(this);if(e)return P.getItemById(this.listModel,e)},Q.prototype.find$=function(e){return R(this.rootElt).find(e)},Q.prototype.getExppanelSelectorOrThrow=function(){var e=G.getExppanelElt(this);if(e)return R(e);throw new Error("expected to find $exppanel but could not")},Q.prototype.scrollItemIntoView=function(e){if(this.rootElt&&this.isListVisible()){var t=this.getItemSelectorById(e.id),r=G.getExppanelSelector(this);if(t&&r){if("table"===e.type){var n=t.find(".dcg-row .dcg-selected");if(1===n.length)return void i.scrollVisible(n,r,60)}i.scrollVisible(t,r,90)}}},Q.prototype.scrollSelectedItemIntoView=function(){var e=this.getSelectedItem();e&&this.scrollItemIntoView(e)},Q.prototype._pasteTable=function(e){var t,r,n,i,o,a,l,c,u,d=this;this.grapher&&(t=P.findAvailableColumnSubscript(this.listModel),r=k.makeTableState(t,e,this),n=this.createItemModel(r),this._toplevelNewItemAtSelection(n,{shouldFocus:!0}),this._closeAddExpression(),i=this.grapher.viewportController.getViewport(),o=s.map(e[0],(function(e){return parseFloat(e)})),a=s.map(e[1],(function(e){return parseFloat(e)})),l={xmin:s.min(o),xmax:s.max(o),ymin:s.min(a),ymax:s.max(a),type:"table"},isFinite(l.xmin)&&isFinite(l.xmax)&&isFinite(l.ymin)&&isFinite(l.ymax)&&(l.xmax>i.xmax||l.xmin<i.xmin||l.ymax>i.ymax||l.ymin<i.ymin)&&(c=D.getRecommendedViewportForExpression([l],i))&&(u=new y.Viewport(c.xmin,c.xmax,c.ymin,c.ymax),this.grapher.viewportController.setViewport(u),this._showToast({message:this.s("graphing-calculator-text-toast-zoom-to-fit"),undoCallback:function(){d.dispatch({type:"undo"})}})))},Q.prototype._insertSeveralExpressions=function(e){for(var t=0;t<e.length;t++){var r=this.createItemModel(e[t]);this._toplevelNewItemAtSelection(r,{shouldFocus:!0})}},Q.prototype._appendNumberList=function(e){var t=this.getSelectedItem();if(t&&"expression"===t.type){var r=t.latex,n=this.createItemModel({type:"expression",id:this.generateId(),latex:r+e});return this._toplevelReplaceItemAt(t.index,n,!0)}},Q.prototype._openOnWeb=function(){var e=this;this.runAfterDispatch((function(){var t,r,n,i,o,a;e.grapher&&(t=JSON.stringify(e.getState()),r=e.grapher.screenshot({width:100,height:100}),n=(e.getGraphSettings().config.crossOriginSaveTest?"/":"https://www.desmos.com/")+"api/v1/calculator/cross_origin_save",i=R('<input type="text" name="calc_state" />').val(t),o=R('<input type="text" name="thumb_data" />').val(r),a=R('<form target="_blank" method="POST" style="display:none;"></form>').attr("action",n).append(R('<input type="text" name="is_open_on_web" value="true" />')).append(R('<input type="text" name="my_graphs" value="false" />')).append(R('<input type="text" name="is_update" value="false" />')).append(i).append(o),R(e.rootElt).append(a),a.trigger("submit").remove())}))},Q.prototype.notifyBugsnagAboutMissingSelectedItem=function(e,t){var r=P.getSelected(this.listModel),n="";try{n=r?JSON.stringify(r.cachedUndoRedoFullState,null,2):"undefined"}catch(e){n="[[could not stringify]]"}var i,o="";try{o=r?(i={id:r.id,index:r.index,displayIndex:r.index,secretIndex:r.secretIndex,guid:r.guid,renderShell:r.renderShell,isHiddenFromUI:r.isHiddenFromUI,hasDCGView:!!r.dcgView,cachedRenderHeight:r.cachedRenderHeight},JSON.stringify(i,null,2)):"undefined"}catch(e){o="[[could not stringify]]"}var a="";try{a=JSON.stringify(P.getUndoRedoFullState(this.listModel),null,2)}catch(e){a="[[could not stringify]]"}B.notify("ReplaceItemAtError: no item at index",{metaData:{index:e,shouldFocus:t,selectedModelJSON:o,selectedItemJSON:n,listStateJSON:a}})},Q.prototype._toplevelReplaceItemAt=function(e,t,r){var n=t,i=this.getItemModelByIndex(e);i||this.notifyBugsnagAboutMissingSelectedItem(e,r);var o="folder"!==i.type&&i.folderId;P.removeItemAtIndex(this.listModel,e),P.insertItemAtIndex(this.listModel,n,e),o&&T.setFolderId(n,o),r&&A.moveFocusToItem(this,n.id)},Q.prototype.convertImageToDraggable=function(e){var t,r,n,i,o,s,l=this.getItemModel(e);l&&"image"===l.type&&(t=l.folderId,r=l.index+1,n=l.center,i=P.findAvailableColumnSubscript(this.listModel),o=a.identifierToLatex("C_"+i),s=this.createItemModel({id:this.generateId(),type:"expression",latex:o+"="+n,dragMode:d.DragMode.XY,hidden:!0}),P.insertItemAtIndex(this.listModel,s,r),t&&T.setFolderId(s,t),M.setMQAttribute(l,"center",o),M.setDraggable(l,!0),M.setForeground(l,!0),this.listModel.openItemMenu=void 0)},Q.prototype.createSlidersForItem=function(e,t){var r=this,n=this.getItemModel(e);if(n){var i="folder"!==n.type&&n.folderId,o=n.index+1,s=[];P.eachLatexForItem(n,(function(e,t){s.push({latex:e,location:t})}));for(var l=x.computeDefaults(s,t,{degreeMode:this.graphSettings.degreeMode}),c=t.map((function(e){var t=l[e],n="1";t&&void 0!==t.value&&(n=t.value);var i=e?a.identifierToLatex(e)+"="+n:"",o={type:"expression",id:r.generateId(),latex:i,color:r.getNextColor(),hidden:!!i};return t&&(void 0!==t.min&&(o.slider||(o.slider={}),o.slider.hardMin=!0,o.slider.min=t.min),void 0!==t.max&&(o.slider||(o.slider={}),o.slider.hardMax=!0,o.slider.max=t.max),void 0!==t.step&&(o.slider||(o.slider={}),o.slider.step=t.step)),o})),u=c.length-1;0<=u;u--){var d=this.createItemModel(c[u]);P.insertItemAtIndex(this.listModel,d,o),i&&T.setFolderId(d,i)}var p=c[c.length-1];""===p.latex?A.moveFocusToItem(this,p.id):A.setFocusLocation(this,void 0)}},Q.prototype._uploadImagesAndWaitForThemToLoad=function(e){var t=this,r=e.files,n=e.id;if(r&&0!==r.length)if(n&&1<r.length)this._showToast({message:this.s("graphing-calculator-text-toast-choose-one-file")});else{var i=M.uploadImages({controller:this,files:r,id:n}),o=i.errors[0];o&&this._showToast({message:o});for(var a=0,s=i.tokens;a<s.length;a++){var l=s[a];this.__pendingImageUploads[l]=!0}this.isUploadingImages()&&this._showToast({message:this.s("graphing-calculator-text-toast-uploading-images"),onHide:function(){t._clearPendingImageUploads()}})}else this._showToast({message:this.s("graphing-calculator-text-toast-no-file-selected")})},Q.prototype.getImageToRetry=function(){for(var e,t=0,r=this.getAllItemModels();t<r.length;t++){var n=r[t];"image"===n.type&&"failed"===n.loadStatus&&(!e||e.failures>n.failures)&&(e=n)}return e},Q.prototype.retryLoadingFailedImage=function(e){var t=Date.now(),r=t-this.imageRetryState.lastAttemptTime,n=1e3*Math.pow(2,this.imageRetryState.attempts);0<this.imageRetryState.attempts&&r<n||(M.retryLoading(e),this.imageRetryState={lastAttemptTime:t,attempts:this.imageRetryState.attempts+1})},Q.prototype.getSelectedItem=function(){return P.getSelected(this.listModel)},Q.prototype.getOpenItemMenu=function(){return this.listModel.openItemMenu},Q.prototype.closeItemSettingsMenu=function(){var e=this.getOpenItemMenu();void 0!==e&&(e.focusFirstOption&&(void 0!==e.previousFocusLocation?A.setFocusLocation(this,e.previousFocusLocation):this.focusOpenMenuIcon()),this.listModel.openItemMenu=void 0)},Q.prototype.focusOpenMenuIcon=function(){var e=this.getOpenItemMenu();e&&("slider"===e.type?this.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:e.model.id}}):"image"===e.type?this.dispatch({type:"set-focus-location",location:{type:"image-icon",id:e.model.id}}):"table-column"===e.type?this.dispatch({type:"set-focus-location",location:{type:"table-icon",id:e.model.table.id,columnId:e.model.id}}):this.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:e.model.id}}))},Q.prototype.getFocusedItem=function(){return A.getFocusedItem(this)},Q.prototype.getFocusLocation=function(){return this.focusLocation},Q.prototype.isFocusLocationFocused=function(e){var t=this.focusLocation;return!(!t||!e)&&s.isEqual(t,e)},Q.prototype.isCurrentFocusLocationValid=function(){var e=this.focusLocation;if(!e)return!0;if("settings"===e.type)return"icon"===e.location||this.isGraphSettingsOpen();if("add-item-btn"===e.type||"edit-list-toggle"===e.type||"hide-expression-list-btn"===e.type||"show-expression-list-btn"===e.type)return this.isListEnabled();if("add-expression-btn"===e.type||"add-table-btn"===e.type)return this.layoutModel.addExpressionOpen;if("add-folder-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if("add-simulation-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areSimulationsEnabled();if("add-image-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();if("search-expressions"===e.type)return this.expressionSearchOpen;var t,r=this.getOpenItemMenu();if(!(t=r&&"table-column"===r.type?r.model.table:this.getItemModel(e.id)))return!1;if("change-image-btn"===e.type)return"image"===t.type&&!(!this.listModel||!this.listModel.openItemMenu)&&this.listModel.openItemMenu.model===t;if("expression-menu"===e.type){if("start"===e.location||"end"===e.location||"anywhere"===e.location)return!0;if("table"===t.type)return!0;if("expression"!==t.type)return!1;var n=t.points,i=t.lines,o=t.fill;_.isInequality(t)&&(o=!0);var a=b.getReconciledExpressionProps(t.formula.expression_type,{points:n,lines:i,fill:o});return!!(a.fill||a.points||a.lines||t.showLabel)}if(!this.isItemSelected(e.id)&&"editable-label"!==e.type)return!1;switch(e.type){case"domain-limit":return"expression"===t.type&&!!_.hasDomain(t);case"expression-icon":return!0;case"image-icon":return"image"===t.type&&"loading"!==t.loadStatus&&"failed"!==t.loadStatus&&!t.error;case"simulation-icon":case"simulation-step-icon":case"simulation":return"simulation"===t.type;case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return"expression"===t.type&&!!_.hasSlider(t);case"table-icon":return"table"===t.type&&this.getGraphSettings().config.graphpaper;case"visualization-prop":return"expression"===t.type&&!!_.isVisualization(t);case"clickableinfo-rule":return"expression"===t.type?!!_.isClickableAllowed(t)&&!!_.isClickableRuleDefined(t,e.location.ruleId)&&t.clickableInfo.enabled:"image"===t.type?!!M.isClickableRuleDefined(t,e.location.ruleId)&&t.clickableInfo.enabled:"simulation"===t.type&&L.isClickableRuleDefined(t,e.location.ruleId);case"distribution-param":if("expression"!==t.type)return!1;var s=_.parseToplevelFunction(t);return!!s&&e.location in s.values;case"cdf-limit":return"expression"===t.type&&_.shouldShowCDFFooter(t);case"image":return"image"===t.type;case"folder":return"folder"===t.type;case"text":return"text"===t.type;case"expression":return"expression"===t.type&&!this.isInEditListMode();case"readonly-expression":return"expression"===t.type&&this.isInEditListMode();case"braille-output":return"expression"===t.type&&"none"!==this.getBrailleMode();case"table":return"table"===t.type&&!!k.doesCellExist(t,e.location);case"table-container":return"table"===t.type&&this.isInEditListMode();case"editable-label":return"expression"===t.type&&_.hasEditableLabel(t);default:return e}},Q.prototype.isDragDropActive=function(){return!!this.listModel.dragState},Q.prototype.isItemBeingDragged=function(e){var t=this.listModel.dragState;return!(!t||t.firstItemId!==e)},Q.prototype.getDraggedItemId=function(){var e=this.listModel.dragState;return e&&e.firstItemId},Q.prototype.getRawDragState=function(){return this.listModel.dragState},Q.prototype.initStateStack=function(){this.stateStack=new m.default,this.stateStack.addState({diffState:this.getUndoRedoDiffState(),fullState:this.getUndoRedoFullState()})},Q.prototype.getUndoRedoDiffState=function(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:P.getUndoRedoDiffState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},Q.prototype.getUndoRedoFullState=function(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:P.getUndoRedoFullState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},Q.prototype.getState=function(e){var t={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(t.stripDefaults=!!e.stripDefaults);var r={version:v.currentVersion,randomSeed:this.getRandomSeed(),graph:this.grapher?this.grapher.getState(t):this.getBlankState().graph,expressions:P.getState(this.listModel,t)};return e&&e.avoidBackMigration?g.default(r):v.migrateToPersisted(g.default(r))},Q.prototype.getBlankState=function(){return this.graphSettings.config.clearIntoDegreeMode?n.__assign(n.__assign({},z.default),{graph:n.__assign(n.__assign({},z.default.graph),{degreeMode:!0})}):z.default},Q.prototype.externalSetState=function(e,t){this._clearPendingImageUploads(),this.rootElt&&R(document.activeElement).closest(this.rootElt).length&&R(document.activeElement).trigger("blur"),t=t||{},"string"==typeof(e=e||this.getBlankState())&&(e=JSON.parse(e)),e=e&&v.migrateToLatest(e);var r=this.layoutModel;this.setState(e,t),this.layoutModel=n.__assign(n.__assign({},q.defaultLayoutModel(this.graphSettings.config)),{keypadMinimized:r.keypadMinimized,keypadLayout:r.keypadLayout,keypadFunctionsTab:r.keypadFunctionsTab,keypadFunctionsOpen:r.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!t.forceExpressionsOpen)}),this.settingsViewModel=N.defaultSettingsViewModel(),A.setFocusLocation(this,void 0),t.forceUnsavedChanges?this.enqueueEvent("change"):this.enqueueEvent("clearUnsavedChanges")},Q.prototype.setState=function(e,t){var r;this.isCurrentlyDoingSetState=!0,this.invalidatePlayingSimulationCache(),"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph),"expressions"in e&&(P.setSelected(this.listModel,void 0),(r=P.getLargestIntegerId(e.expressions))>=this.__nextItemId&&(this.__nextItemId=r+1),P.setListState(this.listModel,e.expressions,t||{})),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),t&&t.allowUndo||this.clearUndoRedoHistory(),this.setRandomSeed(e.randomSeed||W.default())},Q.prototype.updateToState=function(e){this.isCurrentlyDoingRestoreState=!0,this.invalidatePlayingSimulationCache(),"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph,{doNotClear:!0}),"expressions"in e&&P.restoreListState(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel)},Q.prototype.commitUndoRedoSynchronously=function(e){var t,r,n=this.stateStack.getState(),i=n&&n.diffState,o=this.getUndoRedoDiffState();t=i,r=o,s.isEqual(X(t),X(r))||(this.stateStack.addState({diffState:o,fullState:this.getUndoRedoFullState()}),this.enqueueEvent("change"))},Q.prototype.undo=function(){var e;this.canUndo()&&(this.stateStack.undo(),(e=this.stateStack.getState().fullState).wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change"))},Q.prototype.redo=function(){var e;this.canRedo()&&(this.stateStack.redo(),(e=this.stateStack.getState().fullState).wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change"))},Q.prototype.clearUndoRedoHistory=function(){this.stateStack.clear()},Q.prototype.canUndo=function(){return this.stateStack.canUndo()},Q.prototype.canRedo=function(){return this.stateStack.canRedo()},Q.prototype._closeAddExpression=function(){this.layoutModel=n.__assign(n.__assign({},this.layoutModel),{addExpressionOpen:!1})},Q.prototype.doesDOMHaveSize=function(){return 0<this.layoutMeasurements.width&&0<this.layoutMeasurements.height},Q.prototype._getExpListWidth=function(){if(void 0!==this.userSpecifiedExpListWidth)t=Math.max(280,Math.min(this.layoutMeasurements.width-200,this.userSpecifiedExpListWidth));else{if(!(t=this.layoutMeasurements.width))return 356;var e=.2*t+160,t=Math.min(500,Math.max(280,e))}var r=this.layoutMeasurements.width-this.layoutMeasurements.height;return Math.abs(r-t)<=10?r:t},Q.prototype._setExpListWidth=function(e){this.userSpecifiedExpListWidth!==e&&(this.userSpecifiedExpListWidth=e)},Q.prototype.getKeypadHeight=function(){return this.computeMajorLayout().keypad.height},Q.prototype.isKeypadEnabled=function(){return!!this.graphSettings.config.keypad},Q.prototype.isKeypadOpen=function(){if(!this.isKeypadEnabled())return!1;var e=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!e},Q.prototype.isKeypadFunctionsPopoverOpen=function(){return!!this.layoutModel.keypadFunctionsOpen},Q.prototype.getKeypadLayout=function(){return this.layoutModel.keypadLayout},Q.prototype.isLetterKeypadOpen=function(){var e=this.getKeypadLayout();return this.isKeypadOpen()&&("letters"===e||"noQwertyLetters"===e||"capitalLetters"===e||"noQwertyCapitalLetters"===e)},Q.prototype.getKeypadFunctionsTab=function(){return this.layoutModel.keypadFunctionsTab},Q.prototype.isFileDraggedOver=function(){return this.layoutModel.isFileDraggedOver},Q.prototype.computeMajorLayout=function(){var e=this.layoutMeasurements.width,t=this.layoutMeasurements.height,r=this.isNarrow(),n=this.isListVisible(),i=this.isKeypadOpen(),o=!this.isGrapherEnabled(),a=!this.isListEnabled(),s={left:0,top:0,width:0,height:0},l={left:0,top:0,width:0,height:0},c={left:0,top:t,width:e,height:this.getGraphSettings().config.projectorMode?r?185:193:169};return a?(l.width=e,l.height=t):o?(s.width=e,s.height=t):n?r?(s.width=e,s.height=Math.round(.58*t),s.top=t-s.height,l.width=e,l.height=t-s.height):(s.width=this.getExpListWidth(),s.height=t,l.left=s.width,l.width=e-l.left,l.height=t):n||(r?(s.width=e,s.height=Math.round(.58*t),s.top=t):(s.width=this.getExpListWidth(),s.height=t,s.left=-s.width),l.width=e,l.height=t),i&&(c.top-=c.height,a||(s.height-=c.height)),{list:s,grapher:l,keypad:c}},Q.prototype.isNarrow=function(){return this.layoutMeasurements.width<450},Q.prototype.getLayoutMeasurements=function(){return this.layoutMeasurements},Q.prototype.getCapExpressionSize=function(){return!!this.getGraphSettings().config.capExpressionSize},Q.prototype.handleAudioTraceCommand=function(e){var t=this.getAudioGraph();if(void 0!==t){var r=t.agNavigator;switch(e){case"on":this.runAfterDispatch((function(){t.enterAudioTrace({fromKeypad:!0})}));break;case"off":this.runAfterDispatch((function(){t.exitAudioTrace()}));break;case"hear-graph":t.hearGraph();break;case"stop-graph":this.runAfterDispatch((function(){t.stopGraph()}));break;case"volume-down":t.adjustVolume("down");break;case"volume-up":t.adjustVolume("up");break;case"speed-down":t.speedDown();break;case"speed-up":t.speedUp();break;case"previous-point":this.runAfterDispatch((function(){t.reportAndMoveToPrevPoint()}));break;case"next-point":this.runAfterDispatch((function(){t.reportAndMoveToNextPoint()}));break;case"previous-poi":this.runAfterDispatch((function(){t.reportAndMoveToPrevPOI()}));break;case"next-poi":this.runAfterDispatch((function(){t.reportAndMoveToNextPOI()}));break;case"previous-curve":this.runAfterDispatch((function(){r.prevCurve()}));break;case"next-curve":this.runAfterDispatch((function(){r.nextCurve()}));break;case"describe-point":t.describePoint();break;case"describe-curve":t.describeCurve();break;case"keyboard-shortcuts":this.enqueueEvent("showHotkeysModal");break;default:return e}}},Q.prototype.setAudioTraceSpeed=function(e){var t=this.getAudioGraph();t&&t.adjustPlaybackSpeed(e)},Q.prototype.focusGraphPaper=function(){this.find$(".dcg-graph-outer").trigger("focus")},Q.prototype.setCanShowKeyboardShortcuts=function(e){this.canShowKeyboardShortcuts=e},Q.prototype.getCanShowKeyboardShortcuts=function(){return this.canShowKeyboardShortcuts},Q);function Q(e){var t=this;this.__nextItemId=0,this.__pendingImageUploads={},this.clickableObjectQueueInfo={queuedItems:[],lockoutCounter:0,didDispatchTripLockout:!1},this.nextSubscription=0,this.subscriptions={},this._queuedCallbacks=[],this._hasUnsavedChanges=!1,this.shouldScrollSelectedItemIntoViewAfterDispatch=!1,this.lastParsableObjects={},this.expressionSearchOpen=!1,this.canShowKeyboardShortcuts=!1,this.toastData={},this.s=l.createDictionaryLookupFunction((function(){return t.graphSettings.config.language})),this.raw=function(e,t){return l.raw(e,t)},this.hasTranslation=function(e){var r=t.graphSettings.config.language;return l.hasTranslation(e,r)},this.unpack=function(e){var r=t.graphSettings.config.language;return l.unpack(e,r)},this.dispatch=function(e){var r;if("blur-focus-location"===e.type&&t.dispatcher.isDispatching())t.runAfterDispatch((function(){t.dispatch(e)}));else if("set-focus-location"===e.type&&t.dispatcher.isDispatching())t.runAfterDispatch((function(){t.dispatch(e)}));else if("tick"===e.type&&t.dispatcher.isDispatching())t.runAfterDispatch((function(){t.dispatch(e)}));else for("tick"===e.type||("on-evaluator-changes"===e.type?B.leaveBreadcrumb("dispatch::"+t.bugsnagContext,{type:e.type}):B.leaveBreadcrumb("dispatch::"+t.bugsnagContext,e)),t.dispatcher.isDispatching()&&B.leaveBreadcrumb("dispatch-in-dispatch::"+t.bugsnagContext,{type:e.type}),t.dispatcher.dispatch(e),t.onEventsEmitted&&t.onEventsEmitted(t.enqueuedEvents);r=t._queuedCallbacks.shift();)r()},this._requiresTickNextFrame=!1,this.updateViews=function(){for(var e in t.subscriptions)t.subscriptions[e]()},this.bugsnagContext="",this.inPrintMode=!1,this.lastInfiniteScrollFirstDOM=void 0,this.lastInfiniteScrollLastDOM=void 0,this.hasDispatchSinceLastInfiniteScrollUpdate=!1,this.cachedPlayingSimulationData=void 0,this.stateStack=new m.default,this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.graphSettings=e,this.listModel=P.init(this),this.layoutModel=q.defaultLayoutModel(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=N.defaultSettingsViewModel(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.setupDispatcher()}function X(e){return e?n.__assign(n.__assign({},e),{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0}):e}t.default=Y})),i("lib/aria",["require","exports","browser","jquery"],(function(e,t,r,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.alert=t.queue=t.clear=void 0;var o=[],a="";function s(e){o.push(e)}t.clear=function(){void 0!==i&&i.empty()},t.queue=s,t.alert=function(e){var t;void 0!==e&&s(e),void 0!==i&&0<o.length&&(t=o.join(" ").replace(/ +(?= )/g,""),i.attr("aria-relevant",a===t&&r.IS_APPLE?"all":"additions text"),i.empty().text(t),a=t),o.length=0},n((function(){var e=".dcg-aria-alert";0===n(e).length&&n("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),i=n(e)}))})),i("main/instancehotkeys",["require","exports","keys","lib/aria","jquery","graphing-calc/models/expression","browser","touchtracking"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(c.prototype.handleKeydown=function(e){var t,l,c,u=this;if(r.isUndo(e))e.stopPropagation(),e.preventDefault(),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(r.isRedo(e))e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"redo"});else if(!e.ctrlKey&&!e.metaKey||e.ctrlKey&&e.metaKey||e.altKey||"F"!==r.lookupChar(e))if(e.shiftKey&&(e.altKey||e.metaKey)&&!e.ctrlKey){if("E"===r.lookupChar(e)){if(!this.controller.isListEnabled())return;this.controller.isListVisible()?(this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}),n.alert(this.controller.s("graphing-calculator-narration-hide-expression-list"))):(this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1}),this.focusExpressionList(this.controller.s("graphing-calculator-narration-show-expression-list"))),e.preventDefault(),e.stopPropagation()}}else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey)if("E"===r.lookupChar(e)){if(!this.controller.isListEnabled())return;e.preventDefault(),e.stopPropagation(),this.focusExpressionList(this.controller.s("graphing-calculator-narration-expression-list"))}else if("X"===r.lookupChar(e)){if(!this.controller.isListEnabled())return;e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(n.alert(this.controller.s("graphing-calculator-narration-add-expression")),this.controller.dispatch({type:"new-expression"})):n.alert(this.controller.s("graphing-calculator-narration-unable-to-add-expression"))}else if("O"===r.lookupChar(e)){if(!this.controller.isListEnabled())return;e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(n.alert(this.controller.s("graphing-calculator-narration-add-note")),this.controller.dispatch({type:"new-text"})):n.alert(this.controller.s("graphing-calculator-narration-unable-to-add-note"))}else"F"===r.lookupChar(e)&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled()?(e.preventDefault(),e.stopPropagation(),n.alert(this.controller.s("graphing-calculator-narration-add-folder")),this.controller.dispatch({type:"new-folder"})):"I"===r.lookupChar(e)&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled()?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch((function(){u.controller.find$(".dcg-add-expression-container input[type=file]").trigger("click"),n.alert(u.controller.s("graphing-calculator-narration-add-image"))}))):"T"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(n.alert(this.controller.s("graphing-calculator-narration-add-table")),this.controller.dispatch({type:"new-table"})):n.alert(this.controller.s("graphing-calculator-narration-unable-to-add-table"))):"G"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0})):"P"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),0===(t=this.controller.find$(".dcg-tabbable-point, .dcg-tabbable-draggableimage").filter("[tabindex=0]")).length&&(t=this.controller.find$(".dcg-editable-label-border").find('input, textarea, [role="textbox"]')),this.focusElement(t.first(),this.controller.s("graphing-calculator-narration-no-interactive-points"))):"Z"===r.lookupChar(e)?(l=this.controller.getSelectedItem())&&l.id&&this.controller.dispatch({type:"expression-zoom-fit",id:l.id}):"D"===r.lookupChar(e)&&this.controller.canUserAddExpressions()&&(e.preventDefault(),e.stopPropagation(),c=!this.controller.isInEditListMode(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:c,focusExpressionList:!0}));else if((e.altKey||e.metaKey)&&!e.ctrlKey&&e.shiftKey&&"F"===r.lookupChar(e)&&this.controller.isDecimalToFractionEnabled()){var d=this.controller.getSelectedItem();d&&"expression"===d.type&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:d.id}),this.controller.runAfterDispatch((function(){o.shouldEvaluationDisplayAsFraction(d)?n.alert(u.controller.s("graphing-calculator-narration-show-as-fraction")):n.alert(u.controller.s("graphing-calculator-narration-show-as-decimal"))})))}else if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey){if(!e.metaKey&&!e.shiftKey&&e.ctrlKey===a.IS_APPLE&&e.altKey===!a.IS_APPLE){var p=r.lookupChar(e);if("N"===p){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),n.alert(this.controller.s("shared-calculator-narration-braille-mode-nemeth"))}else if("U"===p){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),n.alert(this.controller.s("shared-calculator-narration-braille-mode-ueb"))}else if("Q"===p||"X"===p){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"none"}),n.alert(this.controller.s("shared-calculator-narration-braille-mode-off"))}else if("6"===p){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation();var h=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:h}),n.alert(h?this.controller.s("shared-calculator-narration-six-key-mode-on"):this.controller.s("shared-calculator-narration-six-key-mode-off"))}}}else r.lookup(e)===r.BACKSPACE?document.activeElement&&s.elIsFocusable(i(document.activeElement))||e.preventDefault():r.lookup(e)===r.ESCAPE&&this.controller.isInEditListMode()&&0===this.controller.find$(".dcg-options-menu").length&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}));else this.controller.isExpressionListFocused()&&(this.controller.dispatch({type:"open-expression-search"}),e.preventDefault(),e.stopPropagation())},c.prototype.focusExpressionList=function(e){var t=this.controller.getSelectedItem();(t=t||this.controller.getItemModelByIndex(0))?(n.alert(e),this.controller.dispatch({type:"move-focus-to-item",id:t.id})):n.alert(this.controller.s("graphing-calculator-narration-unable-to-focus-expression-list"))},c.prototype.focusElement=function(e,t){e.length?e.trigger("focus"):t&&n.alert(t)},c);function c(e){this.controller=e}t.default=l})),i("lib/defocus-mobile",["require","exports","jquery","touchtracking"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e;document.activeElement&&(e=r(document.activeElement),n.elIsFocusable(e)&&r("<input />").prependTo("body").trigger("focus").attr({readonly:"readonly",disabled:"true"}).trigger("blur").remove())}})),i("ipad.scrollfix",["require","jquery"],(function(e){var t=e("jquery"),r=!1,n=function(e){r||t(e).bind("touchstart",(function(e){var r=t(e.target),n=0,i=null;if(!r.closest("[disablescroll]").length)for(;0===n&&r.length&&void 0!==r[0].tagName;){var o,a=r.css("overflow"),s=r.css("overflow-y");"hidden"!==a&&"visible"!==a&&"hidden"!==s&&"hidden"!==s&&(0!==(o=r.scrollTop())&&(n=2),r.scrollTop(o+1),r.scrollTop()!==o&&(n|=1,r.scrollTop(o))),r=r.parent()}if(0!==n){i=[];for(var l=e.originalEvent.touches,c=0;c<l.length;c++){var u={};for(var d in l[c])l[c].hasOwnProperty(d)&&(u[d]=l[c][d]);i.push(u)}}t(document).on("touchmove.scrollfix",(function(e){var t,r;i&&(t=i[0],(0<(r=e.originalEvent.touches[0].screenY-t.screenY)&&!(2&n)||r<0&&!(1&n))&&(n=0),r&&(i=null)),0===n&&e.preventDefault()})),t(document).on("touchend.scrollfix",(function(){t(document).off(".scrollfix")}))}))};return{limitScrollOnElement:n,limitScrollOnDocument:function(){n(document),r=!0}}})),i("expressions/abstract-item-view",["require","exports","tslib","dcgview","jquery.handleevent"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()},a.prototype.onItemViewMounted=function(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1},a.prototype.onItemViewUnmounted=function(){this._isDragCopy||(this.model.dcgView=void 0)},a.prototype.isFirstRender=function(){return this._isFirstRender},a.prototype.onMouseSelect=function(e){this.controller.isInEditListMode()?this.exitEditListMode():"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},a.prototype.onDelete=function(){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.id,setFocusAfterDelete:!this.controller.isInEditListMode()})},a.prototype.onDragPending=function(e){this.props.onDragPending(e)},a.prototype.exitEditListMode=function(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("loadcss!dcgview-helpers/tooltipped-error",(function(){})),i("dcgview-helpers/tooltipped-error",["require","exports","tslib","dcgview","lib/tooltip","loadcss!./tooltipped-error"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltippedError=void 0;var o,a=(o=n.Class,r.__extends(s,o),s.prototype.template=function(){var e=this;return n.createElement(i.Tooltip,{tooltip:this.props.error,targetClickBehavior:this.const("stick"),gravity:this.props.gravity},n.createElement("div",{class:function(){return{"dcg-tooltipped-error":!0,"dcg-white":e.props.isWhite&&e.props.isWhite(),"dcg-small":e.props.size&&"small"===e.props.size()}}},n.createElement("i",{class:n.const("dcg-icon-error")})))},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.TooltippedError=a})),i("loadcss!expressions/expression-menus/color-swatch",(function(){})),i("expressions/expression-menus/color-swatch",["require","exports","lib/color-distance","tslib","dcgview","loadcss!./color-swatch"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorSwatch=void 0;var o,a=i.Components,s=a.Switch,l=a.For,c=(o=i.Class,n.__extends(u,o),u.prototype.template=function(){var e=this;return i.createElement(s,{key:this.bindFn(this.colorType)},(function(t){switch(t){case"string":return i.createElement("span",{class:function(){return{"dcg-color-swatch":!0,"dcg-color-evaluation":e.props.isEvaluation&&e.props.isEvaluation(),"dcg-light-color":r.isLightColor(e.props.color())}},style:function(){return{background:e.props.color()}}});case"list":return i.createElement(l,{each:function(){return e.getColorArray()},key:function(e){return e.idx+"-"+e.color}},i.createElement("span",{class:i.const("dcg-color-swatch dcg-color-array")},(function(e){return i.createElement("span",{class:i.const("dcg-color-array-item"),style:function(){return{background:e.color}}})})));case"unknown":return i.createElement("span",{class:i.const("dcg-color-swatch"),style:function(){return{background:"#000"}}})}}))},u.prototype.colorType=function(){var e=this.props.color();return"string"==typeof e?"string":"object"==typeof e?"list":"unknown"},u.prototype.getColorArray=function(){var e=[],t=this.props.color();if(!t||"object"!=typeof t)return e;for(var r=Math.min(t.length,10),n=0;n<Math.min(t.length,10);n++)e.push({idx:n,color:""+t[Math.round(n*t.length/r)]});return e},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.ColorSwatch=c})),i("loadcss!expressions/circular-icon-view",(function(){})),i("expressions/circular-icon-view",["require","exports","lib/color-distance","tslib","dcgview","./expression-menus/color-swatch","loadcss!./circular-icon-view"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularIconView=void 0;var a,s=i.Components.If,l=(a=i.Class,n.__extends(c,a),c.prototype.template=function(){var e=this;return i.createElement("span",{class:function(){var t={"dcg-do-not-blur":!0,"dcg-circular-icon":!0,"dcg-thick-outline":e.isThickOutline(),"dcg-white-icon":!!e.props.whiteIcon&&e.props.whiteIcon(),"dcg-hidden":e.isHidden(),"dcg-semi-transparent":e.props.semiTransparent&&e.props.semiTransparent(),"dcg-colored-icon":e.isColoredIcon(),"dcg-has-background-image":e.hasBackgroundImage()};return t[e.iconModifier()]=0<e.iconModifier().length,t},style:function(){return{background:Array.isArray(e.getBackgroundColor())?void 0:e.getBackgroundColor()}}},i.createElement(s,{predicate:function(){return Array.isArray(e.getBackgroundColor())}},(function(){return i.createElement(o.ColorSwatch,{color:function(){return e.getBackgroundColor()}})})),i.createElement(s,{predicate:this.bindFn(this.hasBackgroundImage)},(function(){return i.createElement("span",{class:i.const("dcg-background-image"),style:function(){return{"background-image":e.props.backgroundImage&&e.props.backgroundImage(),opacity:e.props.backgroundOpacity&&e.props.backgroundOpacity()}}})})),i.createElement(s,{predicate:function(){return!!e.backgroundIcon()}},(function(){return i.createElement("i",{class:function(){var t={};return t[e.backgroundIcon()]=!0,t["dcg-layered-icon"]=!0,t},style:function(){return{opacity:e.backgroundOpacity()}}})})),i.createElement(s,{predicate:function(){return!!e.primaryIcon()}},(function(){return i.createElement("i",{class:function(){var t={};return t[e.primaryIcon()]=!0,t["dcg-layered-icon"]=!0,t},style:function(){return{color:e.props.foregroundColor&&e.props.foregroundColor()}}})})),i.createElement(s,{predicate:function(){return"loading"===e.props.iconType()}},(function(){return i.createElement("span",{class:i.const("dcg-spinner")})})))},c.prototype.isColoredIcon=function(){return!this.isThickOutline()&&!this.isHidden()&&!this.hasBackgroundImage()&&"loading"!==this.props.iconType()},c.prototype.iconModifier=function(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"none":return""}},c.prototype.getBackgroundColor=function(){if(!this.isHidden()&&this.props.backgroundColor)return this.props.backgroundColor()},c.prototype.isHidden=function(){return"hidden"===this.props.iconType()},c.prototype.isThickOutline=function(){var e=this.props.iconType();return"folder"===e||"pause"===e||"play"===e||"fraction"===e},c.prototype.hasBackgroundImage=function(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()},c.prototype.primaryIcon=function(){var e=this.props.iconType();switch(e){case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-open";case"point-cross":return"dcg-icon-cross";case"point-default":return"dcg-icon-point";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";default:return e}},c.prototype.backgroundOpacity=function(){var e=this.backgroundIcon();return"dcg-icon-polygon-filled"===e||"dcg-icon-parametric-filled"===e||"dcg-icon-shaded-inequality-shade2"===e||"dcg-icon-distribution-fill"===e||"dcg-icon-histogram-fill"===e?.5:1},c.prototype.backgroundIcon=function(){var e=this.props.iconType();return"filled-distribution"===e?"dcg-icon-distribution-fill":"histogram"===e?"dcg-icon-histogram-fill":"polygon-dashed-filled"===e||"polygon-dotted-filled"===e||"polygon-default-filled"===e||"polygon-none-filled"===e?"dcg-icon-polygon-filled":"parametric-dashed-filled"===e||"parametric-dotted-filled"===e||"parametric-default-filled"===e||"parametric-none-filled"===e?"dcg-icon-parametric-filled":"table-points-and-lines"===e?"dcg-icon-lines-solid":"shaded-inequality"===e?"dcg-icon-shaded-inequality-shade2":""},c);function c(){return null!==a&&a.apply(this,arguments)||this}t.CircularIconView=l})),i("main/manage-focus-helper",["require","exports","underscore"],(function(e,t,r){"use strict";function n(e){var t=e.controller.getFocusLocation();return t&&r.isEqual(t,e.location)}function i(e,t){t?e.controller.dispatch({type:"set-focus-location",location:e.location}):e.controller.dispatch({type:"blur-focus-location",location:e.location})}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOnFocusChanged=t.defaultShouldBeFocused=t.manageFocusHelper=void 0,t.manageFocusHelper=function(e){return{shouldBeFocused:function(){return n(e)},onFocusedChanged:function(t){i(e,t)}}},t.defaultShouldBeFocused=n,t.defaultOnFocusChanged=i})),i("loadcss!expressions/play-pause-icon-view",(function(){})),i("expressions/play-pause-icon-view",["require","exports","tslib","dcgview","lib/aria","./circular-icon-view","main/manage-focus-helper","graphing-calc/models/expression","core/types/slider-loop-modes","../lib/tooltip","jquery.handleevent","loadcss!./play-pause-icon-view"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayPauseIconView=void 0;var u,d=(u=n.Class,r.__extends(p,u),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},p.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-play-pause-icon-view")},n.createElement("div",{class:n.const("dcg-circular-icon-container"),"aria-label":this.bindFn(this.getAriaLabel),role:n.const("button"),tabindex:n.const("0"),onTap:function(t){t.wasHandled("dragdrop")||e.toggleSliderIsPlaying()},manageFocus:this.const(a.manageFocusHelper({controller:this.controller,location:{type:"slider-icon",id:this.model.id}}))},n.createElement(o.CircularIconView,{iconType:function(){return e.getIconType()},whiteIcon:function(){return!e.controller.isInEditListMode()&&e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)}})),n.createElement("div",{class:n.const("dcg-slider-menu-container")},n.createElement(c.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-animation-properties-tooltip")},gravity:this.const("e"),offset:this.const({left:5})},n.createElement("div",{class:function(){return{"dcg-slider-menu-opener":!0,"dcg-menu-open":e.myOptionsOpen()}},tabindex:n.const(0),"model-id":function(){return e.model.id},role:n.const("button"),"aria-label":function(){return e.myOptionsOpen()?e.controller.s("graphing-calculator-narration-hide-animation-properties"):e.controller.s("graphing-calculator-narration-show-animation-properties")},onTap:function(t){t.wasHandled("dragdrop")||t.wasLongheld()||e.toggleOptions(t)},manageFocus:this.const(a.manageFocusHelper({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}}))},n.createElement("i",{class:this.bindFn(this.getIcon)})))))},p.prototype.getIcon=function(){return l.getSliderIcon(this.model.slider.loopMode)},p.prototype.getIconType=function(){return!this.model.slider.isPlaying||s.isSliderAtEndOfPlayOnce(this.model)?"play":"pause"},p.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},p.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,focusFirstOption:"keyboard"===e.device}})},p.prototype.getAriaLabel=function(){if(!this.model.sliderExists)return"";var e=s.getAssignment(this.model);return e?this.model.slider.isPlaying?this.controller.s("graphing-calculator-narration-pause-variable-animation",{variable:e}):this.controller.s("graphing-calculator-narration-play-variable-animation",{variable:e}):""},p.prototype.toggleSliderIsPlaying=function(){var e,t;this.model.sliderExists&&(e="",t=s.getAssignment(this.model),s.isSliderAtEndOfPlayOnce(this.model)?("string"==typeof t&&(e=this.controller.s("graphing-calculator-narration-slider-variable-restarted",{variable:t})),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?("string"==typeof t&&(e=this.controller.s("graphing-calculator-narration-slider-variable-playing",{variable:t})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):("string"==typeof t&&(e=this.controller.s("graphing-calculator-narration-slider-variable-paused",{variable:t})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),""!==e&&i.alert(e))},p);function p(){return null!==u&&u.apply(this,arguments)||this}t.PlayPauseIconView=d})),i("expressions/expression-icon-view",["require","exports","tslib","dcgview","core/lib/dragmode","core/types/styles","core/math/comparators","graphing-calc/models/abstract-item","core/math/expression-types","graphing-calc/models/expression","../dcgview-helpers/tooltipped-error","./play-pause-icon-view","./circular-icon-view","main/manage-focus-helper","jquery.handleevent"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g,f=n.Components.SwitchUnion,m="#000",y="#fff",v=(g=n.Class,r.__extends(b,g),b.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},b.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-expression-icon-container")},f(this.bindFn(this.getIconMode),{error:function(){return n.createElement(u.TooltippedError,{error:e.bindFn(e.getErrorMsg),isWhite:function(){return e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)},gravity:e.const("se")})},none:function(){return n.createElement("span",null)},slider:function(){return n.createElement(d.PlayPauseIconView,{controller:e.props.controller,model:e.props.model})},icon:function(){return n.createElement("div",{class:n.const("dcg-circular-icon-container"),role:n.const("button"),tabindex:n.const("0"),"model-id":function(){return e.model.id},"aria-label":e.bindFn(e.getIconAriaLabel),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()||e.controller.isInEditListMode()&&!e.isFraction()?e.toggleOptions(t):e.isFraction()?e.onToggleFractionDisplay():void e.toggleGraphShown()},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.isFraction()||e.toggleOptions(t)},manageFocus:e.const(h.manageFocusHelper({controller:e.controller,location:{type:"expression-icon",id:e.model.id}}))},n.createElement(p.CircularIconView,{iconType:e.bindFn(e.getIconType),backgroundColor:e.bindFn(e.getBackgroundColor),whiteIcon:e.bindFn(e.isSelected),foregroundColor:e.bindFn(e.getForegroundColor),iconModifier:e.bindFn(e.getIconModifier)}))}}))},b.prototype.getErrorMsg=function(){return this.colorError()?this.controller.s("shared-calculator-error-color-not-assigned"):this.controller.unpack(this.model.error)},b.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},b.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,focusFirstOption:"keyboard"===e.device}})},b.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},b.prototype.isFraction=function(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)},b.prototype.getIconMode=function(){return this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?c.isGraphable(this.model)?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":"none":"none"},b.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})},b.prototype.colorError=function(){return!!this.model.formula.rgb_value&&!this.model.formula.assignment},b.prototype.hasError=function(){return!!this.colorError()||!!this.model.error&&!c.isEmpty(this.model)&&"none"===this.controller.getBrailleMode()},b.prototype.hasSlider=function(){return!!this.model.sliderExists},b.prototype.getDisplayProps=function(){var e=this.model,t=e.points,r=e.lines,n=e.fill;return l.getReconciledExpressionProps(this.model.formula.expression_type,{points:t,lines:r,fill:n})},b.prototype.getBackgroundColor=function(){if(!this.isFraction())return s.getMaybeGradientDisplayColor(this.model);var e=this.isSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?e?y:m:""},b.prototype.getForegroundColor=function(){if(!this.isFraction())return"";var e=this.isSelected();return e!==this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?y:e?"#6399cb":m},b.prototype.onToggleFractionDisplay=function(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})},b.prototype.getIconModifier=function(){return c.isBoxPlot(this.model)&&"y"===c.getVizProp(this.model,"alignedAxis")?"rotated":"none"},b.prototype.getIconType=function(){if(this.isFraction())return"fraction";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";var e=this.model.pointStyle,t=this.model.lineStyle,r=this.getDisplayProps(),n=this.model.formula;if(c.isBoxPlot(this.model))return"boxplot";if(c.isDotPlot(this.model)){if("POINT"===this.model.pointStyle)return"dotplot-default";if("CROSS"===this.model.pointStyle)return"dotplot-cross";if("OPEN"===this.model.pointStyle)return"dotplot-open"}if(c.isHistogram(this.model))return"histogram";if(c.isToplevelDistribution(this.model))return c.shouldShowCDFFooter(this.model)?"filled-distribution":"unfilled-distribution";if(this.model.reconciledDragMode===i.DragMode.X)return"movable-horizontal";if(this.model.reconciledDragMode===i.DragMode.Y)return"movable-vertical";if(this.model.reconciledDragMode===i.DragMode.XY)return"movable-both";if(c.isPointOrPointList(this.model))return c.isSinglePoint(this.model)?e===o.PointStyle.OPEN?"point-open":e===o.PointStyle.CROSS?"point-cross":"point-default":r.lines&&r.points?"table-points-and-lines":r.lines?"table-lines":"table-points";var s=this.getDisplayProps().fill;if(c.isPolygon(this.model))return s?r.lines?t===o.LineStyle.DASHED?"polygon-dashed-filled":t===o.LineStyle.DOTTED?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":r.lines?t===o.LineStyle.DASHED?"polygon-dashed":t===o.LineStyle.DOTTED?"polygon-dotted":"polygon-default":"none";if(c.isParametric(this.model))return s?r.lines?t===o.LineStyle.DASHED?"parametric-dashed-filled":t===o.LineStyle.DOTTED?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":r.lines?t===o.LineStyle.DASHED?"graph-dashed":t===o.LineStyle.DOTTED?"graph-dotted":"graph-default":"none";var l=n.operator,u=0!==a.table[l].direction,d=!1===a.table[l].inclusive;return n.is_shade_between||!d&&u?"shaded-inequality":d&&!u?"inequality":d&&u?"shaded-inequality":t===o.LineStyle.DASHED?"graph-dashed":t===o.LineStyle.DOTTED?"graph-dotted":"graph-default"},b.prototype.getIconAriaLabel=function(){return this.isFraction()?c.shouldEvaluationDisplayAsFraction(this.model)?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction"):this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.isInEditListMode()?this.controller.s("graphing-calculator-narration-show-options"):this.model.hidden?this.controller.s("graphing-calculator-narration-show-expression"):this.controller.s("graphing-calculator-narration-hide-expression")},b);function b(){return null!==g&&g.apply(this,arguments)||this}t.default=v})),i("loadcss!expressions/evaluation-view",(function(){})),i("expressions/evaluation-view",["require","exports","tslib","dcgview","core/lib/label","../dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","./expression-menus/color-swatch","loadcss!./evaluation-view"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components,u=c.If,d=c.SwitchUnion,p=(l=n.Class,r.__extends(h,l),h.prototype.init=function(){this.controller=this.props.controller()},h.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-evaluation-container")},n.createElement("div",{class:function(){return{"dcg-evaluation":!0,"dcg-do-blur":!0,"dcg-hidden":e.props.controller().isInEditListMode()}},handleEvent:n.const("true"),tabindex:function(){return e.props.focusable()&&"none"===e.controller.getBrailleMode()?"0":"-1"}},n.createElement(o.default,{latex:this.bindFn(this.getBrailleEvaluation),tooltipOptions:function(){return{gravity:"sw"}},ariaLabel:this.const(""),brailleShouldFocus:function(){var t=e.controller.getFocusLocation();return!!t&&"braille-output"===t.type&&t.id===e.props.id()},onBrailleInput:function(){},controller:this.props.controller,isStatic:this.const(!0),onBrailleFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"braille-output",id:e.props.id()}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"braille-output",id:e.props.id()}})}},n.createElement("div",{class:n.const("dcg-evaluation-label-container"),onTap:this.bindFn(this.onSelectEvaluation)},n.createElement(u,{predicate:function(){return!!e.props.dependent()}},(function(){return n.createElement(a.default,{latex:function(){return i.identifierToLatex(e.props.dependent())},config:e.const({})},n.createElement("span",null))})),n.createElement("span",{class:n.const("dcg-equals")},n.createElement(a.default,{latex:this.const("="),config:this.const({})}))),n.createElement("span",{class:function(){return{"dcg-text-selectable":"rgbcolor"!==e.getEvaluationType(),"dcg-evaluation-html":!0,"dcg-color-evaluation":"rgbcolor"===e.getEvaluationType()}},didMount:this.bindFn(this.didMountEvaluation)},d((function(){return e.getEvaluationType()}),{list:function(){return n.createElement("span",{class:n.const("dcg-evaluation-list")},(function(){return e.controller.s("graphing-calculator-label-evaluation-list",{count:e.props.val().length})}))},fraction:function(){return n.createElement(a.default,{latex:function(){return i.truncatedLatexLabel(e.props.val(),e.getLabelOptions())},config:e.const({})})},undefined:function(){return n.createElement("span",null,n.const("undefined"))},scientific:function(){return n.createElement(a.default,{latex:function(){return e.getNumberLabel().mantissa+"\\times10^{"+e.getNumberLabel().exponent+"}"},config:e.const({})})},decimal:function(){return n.createElement(a.default,{latex:function(){return e.getNumberLabel().value},config:e.const({})})},rgbcolor:function(){return n.createElement(s.ColorSwatch,{color:function(){return e.controller.getColorById(e.props.id())},isEvaluation:e.const(!0)})}})))),n.createElement("div",{class:n.const("dcg-clear")}))},h.prototype.getNumberLabel=function(){return e=this.props.val(),t=this.getLabelOptions(),i.numericLabel(e,t);var e,t},h.prototype.getEvaluationType=function(){var e=this.props.val();return"string"==typeof e?"rgbcolor":Array.isArray(e)?"string"==typeof e[0]?"rgbcolor":"list":this.getNumberLabel().type},h.prototype.getLabelOptions=function(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())},h.prototype.didMountEvaluation=function(e){this.evaluationNode=e},h.prototype.onSelectEvaluation=function(){var e=document.createRange();e.selectNodeContents(this.evaluationNode);var t=window.getSelection();t&&(t.removeAllRanges(),(t=window.getSelection())&&t.addRange(e))},h.prototype.getBrailleEvaluation=function(){var e="";this.props.dependent()&&(e=i.identifierToLatex(this.props.dependent())),e+="=";var t=this.getEvaluationType();switch(t){case"list":e+=this.controller.s("graphing-calculator-label-evaluation-list",{count:this.props.val().length});break;case"fraction":e+=i.truncatedLatexLabel(this.props.val(),this.getLabelOptions());break;case"undefined":e="undefined";break;case"scientific":e+=this.getNumberLabel().mantissa+"\\times10^{"+this.getNumberLabel().exponent+"}";break;case"decimal":e+=this.getNumberLabel().value;break;case"rgbcolor":e+=this.props.val();break;default:return t}return e},h);function h(){return null!==l&&l.apply(this,arguments)||this}t.default=p})),i("expressions/unresolved_view",["require","exports","tslib","dcgview"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.template=function(){var e=this;return this.controller=this.props.controller(),n.createElement("div",{class:n.const("dcg-unresolved")},n.createElement("i",{class:n.const("dcg-icon-error")}),n.const(" "),(function(){return e.controller.s("graphing-calculator-error-equation-contains-unresolved-details")}),n.createElement("a",{href:n.const("https://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),target:n.const("_blank")},(function(){return e.controller.s("graphing-calculator-link-learn-more")})))},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("loadcss!domain",(function(){})),i("expressions/domain_view",["require","exports","tslib","dcgview","jquery","keys","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","core/lib/label","bugsnag","main/mathquill-operators","loadcss!domain"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h,g=(h=n.Class,r.__extends(f,h),f.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},f.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-domain dcg-do-blur"),handleEvent:n.const("true")},n.createElement("div",{class:n.const("dcg-display-domain dcg-mq-underline-container dcg-do-blur"),handleEvent:n.const("true")},n.createElement("div",{class:n.const("dcg-editable-mathquill-container")},n.createElement(a.default,{latex:function(){return e.getMinLatex()},ariaLabel:function(){return e.controller.raw("dmin")},placeholder:function(){return u.value(c.getDomainMin(e.model)).string},brailleShouldFocus:function(){return"min"===e.getFocusedInput()},selectOnFocus:this.const(!0),onBrailleInput:function(t){return e.dispatchMinLatexIfChanged(t)},controller:this.props.controller,hasError:function(){return!c.isDomainMinValid(e.model)},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("min",t)},dataLabelAttributeValue:this.const("domain-min")},n.createElement(l.default,{latex:function(){return e.getMinLatex()},placeholder:function(){return u.value(c.getDomainMin(e.model)).string},isFocused:function(){return"min"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-domain-minimum")},getAriaPostLabel:this.const(""),hasError:function(){return!c.isDomainMinValid(e.model)},onUserPressedKey:function(t,r){e.handlePressedKey("min",t,r)},onUserChangedLatex:function(t){return e.dispatchMinLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},dataLabelAttributeValue:this.const("domain-min"),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),n.createElement("span",{class:n.const("dcg-interval-interior")},n.createElement(s.default,{latex:function(){return e.getDomainVariableLatex()},config:this.const({})},n.createElement("span",null))),n.createElement(a.default,{latex:function(){return e.getMaxLatex()},ariaLabel:function(){return e.controller.raw("dmax")},placeholder:function(){return u.value(c.getDomainMax(e.model)).string},brailleShouldFocus:function(){return"max"===e.getFocusedInput()},selectOnFocus:this.const(!0),onBrailleInput:function(t){return e.dispatchMaxLatexIfChanged(t)},controller:this.props.controller,hasError:function(){return!c.isDomainMaxValid(e.model)},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("max",t)},dataLabelAttributeValue:this.const("domain-max")},n.createElement(l.default,{latex:function(){return e.getMaxLatex()},placeholder:function(){return u.value(c.getDomainMax(e.model)).string},isFocused:function(){return"max"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-domain-maximum")},getAriaPostLabel:this.const(""),hasError:function(){return!c.isDomainMaxValid(e.model)},onUserPressedKey:function(t,r){e.handlePressedKey("max",t,r)},onUserChangedLatex:function(t){return e.dispatchMaxLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},dataLabelAttributeValue:this.const("domain-max"),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})))))},f.prototype.handleBrailleKeydown=function(e,t){var r=o.lookup(t);r&&this.handlePressedKey(e,r,i.Event(t))},f.prototype.handlePressedKey=function(e,t,r){if(!this.controller.isInEditListMode()){if("Esc"===t)return void this.controller.dispatch({type:"set-focus-location",location:void 0});if("Enter"===t)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}var n=l.default.getFocusedMathquill(),o=a.getFocusedBrailleElement();"Left"!==t&&"Right"!==t&&"Down"!==t&&"Up"!==t?n&&(n.keystroke(t,r),"min"===e?this.dispatchMinLatexIfChanged(n.latex()):"max"===e&&this.dispatchMaxLatexIfChanged(n.latex())):(n?l.default.applyArrowKeyAndReturnIfWasAtBounds(n,t,r):o&&(0===o.selectionStart&&"Left"===t||o.selectionStart===i(o).val().length&&"Right"===t||"Up"===t||"Down"===t))&&(r&&r.preventDefault(),"Left"===t?"max"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"}}):"Right"===t?"min"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"}}):"Down"===t?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):"Up"===t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}))},f.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}})},f.prototype.dispatchMinLatexIfChanged=function(e){if(this.getMinLatex()!==e){var t=this.getDomainType();if("unknown"===t)return void d.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:c.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch("polar"===t?{type:"set-polar-domain-minlatex",id:this.id,latex:e}:{type:"set-parametric-domain-minlatex",id:this.id,latex:e})}},f.prototype.dispatchMaxLatexIfChanged=function(e){if(this.getMaxLatex()!==e){var t=this.getDomainType();if("unknown"===t)return void d.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:c.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch("polar"===t?{type:"set-polar-domain-maxlatex",id:this.id,latex:e}:{type:"set-parametric-domain-maxlatex",id:this.id,latex:e})}},f.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"domain-limit"===e.type&&e.id===this.id)return e.location},f.prototype.getMinLatex=function(){switch(this.getDomainType()){case"parametric":return c.getParametricDomainMin(this.model);case"polar":return c.getPolarDomainMin(this.model);default:return""}},f.prototype.getMaxLatex=function(){switch(this.getDomainType()){case"parametric":return c.getParametricDomainMax(this.model);case"polar":return c.getPolarDomainMax(this.model);default:return""}},f.prototype.getDomainVariableLatex=function(){switch(this.getDomainType()){case"parametric":return"\\le t \\le";case"polar":return"\\le \\theta \\le";default:return""}},f.prototype.getDomainType=function(){return c.isPolar(this.model)?"polar":c.isParametric(this.model)?"parametric":"unknown"},f.prototype.getMQConfig=function(){return{autoOperatorNames:p.getAutoOperators({})}},f);function f(){return null!==h&&h.apply(this,arguments)||this}t.default=g})),i("loadcss!regression",(function(){})),i("expressions/regression_view",["require","exports","tslib","dcgview","core/lib/label","dcgview-helpers/static-mathquill-view","lib/tooltip","loadcss!regression"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRoundedStat=t.getRoundedParam=void 0;var s,l=n.Components,c=l.If,u=l.For,d=l.IfElse,p=(s=n.Class,r.__extends(h,s),h.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement(c,{predicate:this.bindFn(this.hasRegression)},(function(){return n.createElement("div",{class:n.const("dcg-regression-container")},n.createElement("div",{class:n.const("dcg-handle-event"),handleEvent:n.const("true")},n.createElement(c,{predicate:e.bindFn(e.getShouldSuggestLogMode)},(function(){return n.createElement("div",{class:n.const("dcg-log-mode-toggle")},d((function(){return e.areLogModeRegressionsForced()}),{true:function(){return n.createElement("div",{class:n.const("dcg-action-log-mode-toggle dcg-no-hover-styling")},(function(){return e.controller.s("graphing-calculator-button-regression-log-mode")}))},false:function(){return n.createElement("div",null,n.createElement("div",{class:function(){return{"dcg-action-log-mode-toggle":!0,"dcg-toggled-on":e.getIsLogModeRegression()}},onTap:e.bindFn(e.onTapLogMode)},n.createElement("span",{class:n.const("dcg-log-mode-checkbox"),role:n.const("checkbox"),"aria-checked":function(){return e.getIsLogModeRegression()},tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-button-regression-log-mode")}},n.createElement("i",{class:n.const("dcg-icon-check")})),(function(){return e.controller.s("graphing-calculator-button-regression-log-mode")})),n.createElement(a.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip")},gravity:e.const("e")},n.createElement("a",{"aria-label":function(){return e.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip")},class:n.const("dcg-log-mode-toggle-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/hc/en-us/articles/204349605")},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))))}}))})),n.createElement("div",{class:n.const("dcg-statistics"),role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-regression-statistics")}},n.createElement("div",{class:n.const("dcg-expression-footer-title")},(function(){return e.controller.s("graphing-calculator-heading-regression-statistics")}),n.createElement(c,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("RMSE")}},(function(){return n.createElement(a.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")},gravity:e.const("s")},n.createElement("a",{class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/entries/60176149-What-is-RMSE-"),"aria-label":function(){return e.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")}},n.createElement("i",{class:n.const("dcg-icon-question-sign")})))})),n.createElement(c,{predicate:function(){return e.getRegression().statistics.Rsquared<0}},(function(){return n.createElement(a.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip")},gravity:e.const("s")},n.createElement("a",{"aria-label":function(){return e.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip")},class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")},n.createElement("i",{class:n.const("dcg-icon-question-sign")})))}))),n.createElement("div",{class:n.const("dcg-statistics-values")},n.createElement(c,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("Rsquared")}},(function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"R^2="+f(e.getRegression(),"Rsquared")},config:e.const({})},n.createElement("span",{tabindex:n.const("0")})))})),n.createElement(c,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("rsquared")}},(function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"r^2="+f(e.getRegression(),"rsquared")},config:e.const({})},n.createElement("span",{tabindex:n.const("0")})))})),n.createElement(c,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("r")}},(function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"r="+f(e.getRegression(),"r")},config:e.const({})},n.createElement("span",{class:n.const("dcg-r-value"),tabindex:n.const("0")})))})),n.createElement(c,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("RMSE")}},(function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"\\operatorname{RMSE}="+f(e.getRegression(),"RMSE")},config:e.const({})},n.createElement("span",{tabindex:n.const("0")})))})))),n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-regression-residuals")},class:n.const("dcg-residuals")},n.createElement("div",{class:n.const("dcg-expression-footer-title")},(function(){return e.controller.s("graphing-calculator-heading-regression-residuals")})),n.createElement(o.default,{latex:e.bindFn(e.getResidualVariable),config:e.const({})},n.createElement("span",{class:n.const("dcg-residuals-variable"),tabindex:n.const("0")})),n.createElement("div",{class:function(){return{"dcg-residual-suggestion":!0,"dcg-action-plot-residual":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-visible":e.getResidualSuggestionVisible()}},"aria-hidden":function(){return!e.getResidualSuggestionVisible()},role:n.const("button"),tabindex:function(){return e.getResidualSuggestionVisible()?"0":void 0},onTap:e.bindFn(e.onTapResidualsSuggestion)},(function(){return e.controller.s("graphing-calculator-button-regression-plot-residuals")}))),n.createElement(c,{predicate:function(){return 0<Object.keys(e.getRegression().parameters).length}},(function(){return n.createElement("div",{class:n.const("dcg-parameters-container")},n.createElement("div",{class:n.const("dcg-expression-footer-title")},(function(){return e.controller.s("graphing-calculator-heading-regression-parameters")}),n.createElement(c,{predicate:function(){return e.isNonLinearRegression()}},(function(){return n.createElement(a.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-regression-parameters-not-exact")},gravity:e.const("s")},n.createElement("a",{class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/hc/articles/360042428612"),"aria-label":function(){return e.controller.s("graphing-calculator-label-regression-parameters-not-exact")}},n.createElement("i",{class:n.const("dcg-icon-question-sign")})))}))),n.createElement(u,{each:function(){return Object.keys(e.getRegression().parameters)}},n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-regression-parameters")},class:n.const("dcg-parameters")},(function(t){return n.createElement(o.default,{latex:function(){return t+"="+g(e.getRegression(),t)},config:e.const({})},n.createElement("span",{class:n.const("dcg-parameter"),tabindex:n.const("0")}))}))))})),n.createElement("div",{class:n.const("dcg-clear")}),n.createElement(c,{predicate:function(){return e.hasParameterWarning()}},(function(){return n.createElement("div",{class:n.const("dcg-parameter-warning")},n.createElement("i",{class:n.const("dcg-icon-error")}),n.const(" "),(function(){return e.controller.s("graphing-calculator-text-regression-potentially-inaccurate-parameters")}),n.const(" "),n.createElement("a",{href:n.const("https://support.desmos.com/hc/articles/360042942771"),target:n.const("_blank")},(function(){return e.controller.s("graphing-calculator-link-learn-more")})))}))))}))},h.prototype.onTapResidualsSuggestion=function(){this.controller.dispatch({type:"plot-residuals",id:this.id})},h.prototype.onTapLogMode=function(){this.controller.dispatch({type:"toggle-logmode",id:this.id})},h.prototype.getRegression=function(){return this.model.formula.regression},h.prototype.hasRegression=function(){return!!this.model.formula.regression},h.prototype.isNonLinearRegression=function(){return!this.getRegression().isLinear},h.prototype.getResidualVariable=function(){return this.getRegression().residualVariable||""},h.prototype.getResidualSuggestionVisible=function(){return void 0!==this.getRegression().residualSuggestionId},h.prototype.areLogModeRegressionsForced=function(){return this.controller.areLogModeRegressionsForced()},h.prototype.getShouldSuggestLogMode=function(){return!!this.getRegression().shouldSuggestLogMode},h.prototype.hasParameterWarning=function(){return!!this.getRegression().parameterWarning},h.prototype.getIsLogModeRegression=function(){return!!this.model.isLogModeRegression},h);function h(){return null!==s&&s.apply(this,arguments)||this}function g(e,t){return i.truncatedLatexLabel(e.parameters[t],{digits:6,smallCutoff:1e-6,bigCutoff:1e9})}function f(e,t){return i.truncatedLatexLabel(e.statistics[t],{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}t.default=p,t.getRoundedParam=g,t.getRoundedStat=f})),i("lib/underscore-shim",["require","exports","underscore_model"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnderscoreModelShim=void 0;var n=(i.prototype.triggerEvent=function(e,t){this.model.triggerEvent(e,t)},i.prototype.observeEvent=function(e,t){this.model.observeEvent(e,t)},i.prototype.unobserveEvent=function(e){this.model.unobserveEvent(e)},i.prototype.setProperty=function(e,t){this[e]=t,this.model.setProperty(e,t)},i.prototype.observe=function(e,t){this.model.observe(e,t)},i.prototype.observeAndSync=function(e,t){this.model.observeAndSync(e,t)},i.prototype.unobserve=function(e){this.model.unobserve(e)},i);function i(){this.model=new r.UnderscoreModel}t.UnderscoreModelShim=n})),i("dcgview-helpers/dragdrop",["require","exports","tslib","underscore","jquery","lib/underscore-shim"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragDrop=void 0;var a,s=(a=o.UnderscoreModelShim,r.__extends(l,a),l.prototype._evt2pt=function(e){return{x:e.changedTouches[0].pageX-this._offsetPt.x,y:e.changedTouches[0].pageY-this._offsetPt.y}},l.prototype._dispatch=function(e,t){var r;this._destroyed||(r=this._evt2pt(t),this.triggerEvent(e,{x:r.x,y:r.y,dx:r.x-this._startPt.x,dy:r.y-this._startPt.y,evt:t}))},l.prototype.destroy=function(){i(document).off("."+this.guid),this._destroyed=!0},l.prototype.startDrag=function(e,t){var r=this;if(void 0===t&&(t={}),!this.dragging)return i(document).on("dcg-tapmove."+this.guid,(function(e){(e.originalEvent||e).preventDefault(),cancelAnimationFrame(r.frameThrottle),r.frameThrottle=requestAnimationFrame((function(){return r.doDrag(e)}))})),i(document).on("dcg-tapend."+this.guid+" dcg-tapcancel."+this.guid,(function(e){return r.endDrag(e)})),this._offsetPt={x:0,y:0},t.origin&&(this._offsetPt={x:this._evt2pt(e).x-t.origin.x,y:this._evt2pt(e).y-t.origin.y}),this._startPt=this._evt2pt(e),this.setProperty("dragging",!0),this._dispatch("onGrab",e)},l.prototype.doDrag=function(e){this.dragging&&this._dispatch("onDrag",e)},l.prototype.endDrag=function(e){this.dragging&&(i(document).off("."+this.guid),this.doDrag(e),this.setProperty("dragging",!1),this._dispatch("onDrop",e))},l);function l(){var e=a.call(this)||this;return e.dragging=!1,e.guid=n.uniqueId("dragdrop-class"),e}t.DragDrop=s})),i("loadcss!dcgview-helpers/slider",(function(){})),i("dcgview-helpers/slider",["require","exports","lib/rounding","tslib","keys","dcgview","jquery","lib/conditional_blur","./dragdrop","loadcss!./slider"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=o.Components.If;function u(e,t,r){return Math.min(Math.max(e,t),r)}var d,p=(d=o.Class,n.__extends(h,d),h.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-slider-interior":!0,"dcg-disable-slider":e.shouldDisableSlider()}},didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),style:o.const({"touch-action":"none"})},o.createElement("div",{class:o.const("dcg-track")},o.createElement("div",{class:o.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),o.createElement("div",{class:o.const("dcg-graphic")})),o.createElement(c,{predicate:this.bindFn(this.shouldShowZeroMarker)},(function(){return o.createElement("div",{class:o.const("dcg-zeroMarker"),style:function(){return{left:e.getZeroMarkerPercent()+"%"}}})})),o.createElement("div",{class:function(){return{"dcg-thumb":!0,"dcg-down":e.isDragging}},role:o.const("slider"),tabindex:o.const("0"),disablescroll:o.const("true"),style:function(){return{left:e.getThumbPercent()+"%"}},onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,manageFocus:this.buildFocusManager()},o.createElement("div",{class:o.const("dcg-graphic")}),o.createElement("div",{class:o.const("dcg-center")})))},h.prototype.willUnmount=function(){this.dragDrop.destroy()},h.prototype.didMountRoot=function(e){var t=this;this.rootNode=e,this.dragDrop=new l.DragDrop,this.isMounted=!0,this.dragDrop.observeEvent("onDrop",(function(){t.isDragging=!1,t.update(),t.props.onDrop&&t.props.onDrop()})),this.dragDrop.observeEvent("onGrab",(function(){t.isDragging=!0,t.update(),t.props.onGrab&&t.props.onGrab()})),this.dragDrop.observeEvent("onDrag",(function(e,r){t.props.onDragUpdate(t.valueFromPixels(r.x))}))},h.prototype.didMountTickMarks=function(e){this.tickMarksNode=e,this.renderTickMarks()},h.prototype.didUpdate=function(){this.renderTickMarks()},h.prototype.shouldDisableSlider=function(){return this.props.min()===this.props.max()},h.prototype.renderTickMarks=function(){if(this.tickMarksNode){var e=this.props.step(),t=this.props.min(),r=this.props.max(),n=void 0===e?0:100*e/(r-t);if(n<3&&(n=0),100<n&&(n=0),isNaN(n)&&(n=0),this.lastTickMarksPercent!==n){var i="";if(0<(this.lastTickMarksPercent=n)&&n<100)for(var o=n;o<100;o+=n)i+='<div class="dcg-tick" style="left:'+o+'%"></div>';this.tickMarksNode.innerHTML=i}}},h.prototype.shouldShowZeroMarker=function(){return this.props.min()<=0&&0<=this.props.max()},h.prototype.getZeroMarkerPercent=function(){var e=this.props.min();return 100*(0-e)/(this.props.max()-e)},h.prototype.getThumbPercent=function(){return 100*this.percentFromValue(this.props.value())},h.prototype.valueFromPixels=function(e){if(!this.isMounted)return 0;var t=this.props.min(),n=this.props.max(),i=this.rootNode.getBoundingClientRect().width,o=t+(n-t)*u(e/i,0,1),a=(n-t)/i;return r.shortestDecimalBetween(o-a,o+a)},h.prototype.percentFromValue=function(e){var t=this.props.min();return u((e-t)/(this.props.max()-t),0,1)},h.prototype.pixelsFromValue=function(e){if(!this.isMounted)return 0;var t=this.percentFromValue(e);return this.rootNode.getBoundingClientRect().width*t},h.prototype.onKeyDown=function(e){switch(i.lookup(e)){case i.UP:this.props.onUpPress&&(this.props.onUpPress(),e.preventDefault());break;case i.DOWN:this.props.onDownPress&&(this.props.onDownPress(),e.preventDefault());break;case i.ENTER:this.props.onEnterPress&&(this.props.onEnterPress(),e.preventDefault());break;case i.ESCAPE:document.activeElement&&a(document.activeElement).trigger("blur");break;case i.LEFT:this.props.onKeyboardUpdate("down"),e.preventDefault();break;case i.RIGHT:this.props.onKeyboardUpdate("up"),e.preventDefault();break;case i.PAGEDOWN:this.props.onKeyboardUpdate("bigdown"),e.preventDefault();break;case i.PAGEUP:this.props.onKeyboardUpdate("bigup"),e.preventDefault();break;case i.HOME:this.props.onKeyboardUpdate("min"),e.preventDefault();break;case i.END:this.props.onKeyboardUpdate("max"),e.preventDefault()}},h.prototype.onStartDrag=function(e){var t;"keyboard"!==e.device&&e.target&&(e.preventDefault(),s.default(),t={x:0,y:0},1===a(e.target).closest(".dcg-thumb").length?t.x=this.pixelsFromValue(this.props.value()):t.x=e.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(e,{origin:t}))},h.prototype.buildFocusManager=function(){return this.props.onFocusedChanged&&this.props.isFocused?this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged}):this.const(void 0)},h);function h(){return null!==d&&d.apply(this,arguments)||this}t.default=p})),i("expressions/slider_limits_view",["require","exports","tslib","jquery","dcgview","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","keys","graphing-calc/models/expression","core/lib/label","core/types/slider-loop-modes","main/mathquill-operators"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h,g=i.Components.If,f=(h=i.Class,r.__extends(m,h),m.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},m.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-slider_menu dcg-mq-underline-container dcg-do-blur"),handleEvent:i.const("true"),didMount:function(t){return e.node=t}},i.createElement("div",{class:i.const("dcg-editable-mathquill-container")},i.createElement(g,{predicate:function(){return!e.shouldOnlyShowStep()}},(function(){return i.createElement("span",null,i.createElement(o.default,{latex:function(){return e.model.slider.hardMin?e.model.slider.min:""},ariaLabel:function(){return e.controller.raw("sldrmin")},brailleShouldFocus:function(){return"min"===e.getFocusedInput()},onBrailleInput:function(t){return e.handleLatexChanged("min",t)},controller:e.props.controller,hasError:function(){return!c.isSliderMinValid(e.model)},onBrailleFocusedChanged:function(t,r){return e.handleFocusedChanged("min",t,r)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("min",t)},selectOnFocus:e.const(!0),dataDCGLimit:e.const("slidermin")},i.createElement(s.default,{latex:function(){return e.model.slider.hardMin?e.model.slider.min:""},isFocused:function(){return"min"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-slider-minimum")},getAriaPostLabel:e.const(""),hasError:e.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey("min",t,r)},onUserChangedLatex:function(t){return e.handleLatexChanged("min",t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,r){return e.handleFocusedChanged("min",t,r)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"min"===e.getFocusedInput(),"dcg-invalid":!c.isSliderMinValid(e.model)}},"data-dcg-limit":i.const("slidermin")}))),i.createElement("span",{class:i.const("dcg-interval-interior")},i.createElement(a.default,{latex:e.bindFn(e.getDependentLatex),config:e.const({})},i.createElement("span",null))),i.createElement(o.default,{latex:function(){return e.model.slider.hardMax?e.model.slider.max:""},ariaLabel:function(){return e.controller.raw("sldrmax")},brailleShouldFocus:function(){return"max"===e.getFocusedInput()},onBrailleInput:function(t){return e.handleLatexChanged("max",t)},controller:e.props.controller,hasError:function(){return!c.isSliderMaxValid(e.model)},onBrailleFocusedChanged:function(t,r){return e.handleFocusedChanged("max",t,r)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("max",t)},selectOnFocus:e.const(!0),dataDCGLimit:e.const("slidermax")},i.createElement(s.default,{latex:function(){return e.model.slider.hardMax?e.model.slider.max:""},isFocused:function(){return"max"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-slider-maximum")},getAriaPostLabel:e.const(""),hasError:e.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey("max",t,r)},onUserChangedLatex:function(t){return e.handleLatexChanged("max",t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,r){return e.handleFocusedChanged("max",t,r)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"max"===e.getFocusedInput(),"dcg-invalid":!c.isSliderMaxValid(e.model)}},"data-dcg-limit":i.const("slidermax")}))))})),i.createElement("span",{class:function(){return{"dcg-slider-step-container":!e.shouldOnlyShowStep()}}},i.createElement("span",{class:i.const("dcg-slider-step-label"),"aria-hidden":i.const("true")},(function(){return e.controller.s("graphing-calculator-label-slider-step")})),i.createElement(o.default,{latex:function(){return e.model.slider.step},ariaLabel:function(){return e.controller.raw("sldrstp")},brailleShouldFocus:function(){return"step"===e.getFocusedInput()},onBrailleInput:function(t){return e.handleLatexChanged("step",t)},controller:this.props.controller,hasError:function(){return!c.isSliderStepValid(e.model)},onBrailleFocusedChanged:function(t,r){return e.handleFocusedChanged("step",t,r)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("step",t)},selectOnFocus:this.const(!0),dataDCGLimit:this.const("sliderstep")},i.createElement(s.default,{latex:function(){return e.model.slider.step},isFocused:function(){return"step"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-slider-step")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey("step",t,r)},onUserChangedLatex:function(t){return e.handleLatexChanged("step",t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,r){return e.handleFocusedChanged("step",t,r)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"step"===e.getFocusedInput(),"dcg-invalid":!c.isSliderStepValid(e.model)}},"data-dcg-limit":i.const("sliderstep")}))))))},m.prototype.handleBrailleKeydown=function(e,t){var r=l.lookup(t);r&&this.handlePressedKey(e,r,n.Event(t))},m.prototype.handlePressedKey=function(e,t,r){var i,a;this.controller.isInEditListMode()||this.shouldOnlyShowStep()||"Esc"!==t&&"Enter"!==t?(i=s.default.getFocusedMathquill(),a=o.getFocusedBrailleElement(),"Left"!==t&&"Right"!==t&&"Down"!==t&&"Up"!==t?i&&(i.keystroke(t,r),this.handleLatexChanged(e,i.latex())):(i?s.default.applyArrowKeyAndReturnIfWasAtBounds(i,t,r):a&&(0===a.selectionStart&&"Left"===t||a.selectionStart===n(a).val().length&&"Right"===t||"Up"===t||"Down"===t))&&(r&&r.preventDefault(),"Left"!==t||this.shouldOnlyShowStep()?"Right"!==t||this.shouldOnlyShowStep()?"Down"===t?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):"Up"===t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}):"min"===e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}}):"max"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"step"}}):"max"===e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"min"}}):"step"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}}))):this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}})},m.prototype.shouldOnlyShowStep=function(){return this.model.slider.loopMode===d.SliderLoopMode.PLAY_INDEFINITELY},m.prototype.handleLatexChanged=function(e,t){"min"===e?this.dispatchMinLatexIfChanged(t):"max"===e?this.dispatchMaxLatexIfChanged(t):"step"===e&&this.dispatchStepLatexIfChanged(t)},m.prototype.handleFocusedChanged=function(e,t,r){t&&this.getFocusedInput()!==e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}}):this.getFocusedInput()!==e||"none"!==this.controller.getBrailleMode()||r.relatedTarget&&this.node.contains(r.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:this.id,location:e}})},m.prototype.dispatchMinLatexIfChanged=function(e){this.model.slider.min!==e&&this.controller.dispatch({type:"set-slider-minlatex",id:this.id,latex:e})},m.prototype.dispatchMaxLatexIfChanged=function(e){this.model.slider.max!==e&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,latex:e})},m.prototype.dispatchStepLatexIfChanged=function(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})},m.prototype.getDependentLatex=function(){var e=c.getAssignment(this.model)||"";return" \\le "+u.identifierToLatex(e)+" \\le "},m.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"slider-limit"===e.type&&e.id===this.id)return e.location},m.prototype.getMQConfig=function(){return{autoOperatorNames:p.getAutoOperators()}},m);function m(){return null!==h&&h.apply(this,arguments)||this}t.default=f})),i("loadcss!expressions/slider-view",(function(){})),i("expressions/slider_view",["require","exports","tslib","jquery","keys","dcgview","dcgview-helpers/slider","./slider_limits_view","dcgview-helpers/static-mathquill-view","graphing-calc/models/expression","core/types/slider-loop-modes","loadcss!./slider-view"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,p=o.Components.If,h=(d=o.Class,r.__extends(g,d),g.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},g.prototype.template=function(){var e=this;return o.createElement("span",{class:o.const("dcg-slider-container"),tapboundary:o.const("true"),onKeydown:function(t){"Tab"!==i.lookup(t)||t.altKey||t.metaKey||t.ctrlKey||(t.shiftKey?e.isSliderMinFocused()&&e.controller.isInEditListMode()?(null!==t.target&&n(t.target).closest(".dcg-expressionitem").find('[tabindex="0"]:visible:first').trigger("focus"),t.preventDefault(),t.stopPropagation()):e.isSliderThumbFocused()&&(e.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:e.id,location:"step"}}),t.preventDefault(),t.stopPropagation()):!t.shiftKey&&e.isSliderStepFocused()&&(e.controller.isInEditListMode()?e.controller.dispatch({type:"set-focus-location",location:{type:"slider-icon",id:e.id}}):e.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:e.id}}),t.preventDefault(),t.stopPropagation()))}},o.createElement(p,{predicate:function(){return e.shouldShowSlider()}},(function(){return o.createElement("div",{class:o.const("dcg-do-blur dcg-slider"),handleEvent:o.const("true")},o.createElement("div",{class:o.const("dcg-minLabel dcg-template-minlabelhtml"),role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-slider-variable-limits",{variable:"none"===e.controller.getBrailleMode()?'"'+c.getAssignment(e.model)+'"':""+c.getAssignment(e.model)})},onTap:function(){return e.onEditLimit("min")}},o.createElement(l.default,{latex:function(){return c.getDisplaySliderMin(e.model)},config:e.const({})})),o.createElement(a.default,{min:function(){return c.getSliderMin(e.model)},max:function(){return c.getSliderMax(e.model)},step:function(){return c.getSliderStep(e.model)},value:function(){return c.getSliderValue(e.model)},ariaLabel:function(){return"none"===e.controller.getBrailleMode()?'"'+c.getAssignment(e.model)+'"':""+c.getAssignment(e.model)},onGrab:e.bindFn(e.onGrab),onDrop:e.bindFn(e.onDrop),onDragUpdate:e.bindFn(e.onDragUpdate),onKeyboardUpdate:e.bindFn(e.onKeyboardUpdate),onUpPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Up"})},onDownPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Down"})},onEnterPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})},isFocused:e.bindFn(e.isSliderThumbFocused),onFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:e.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"slider-thumb",id:e.id}})}}),o.createElement("div",{class:o.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:function(){return e.onEditLimit("max")}},o.createElement(l.default,{latex:function(){return c.getDisplaySliderMax(e.model)},config:e.const({})})))})),o.createElement(p,{predicate:function(){return e.shouldShowLimitInputs()}},(function(){return o.createElement(s.default,{model:e.props.model,controller:e.props.controller})})))},g.prototype.onGrab=function(){this.dispatchIsDraggingIfChanged(!0)},g.prototype.onDrop=function(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)},g.prototype.onKeyboardUpdate=function(e){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.id,adjustment:e})},g.prototype.onDragUpdate=function(e){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:e})},g.prototype.onEditLimit=function(e){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}})},g.prototype.dispatchIsPlayingIfChanged=function(e){this.model.slider.isPlaying!==e&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:e})},g.prototype.dispatchIsDraggingIfChanged=function(e){this.model.sliderDragging!==e&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:e})},g.prototype.shouldShowLimitInputs=function(){if(this.controller.isInEditListMode())return!0;if(!c.isSliderMinValid(this.model))return!0;if(!c.isSliderMaxValid(this.model))return!0;if(!c.isSliderStepValid(this.model))return!0;if(this.model.slider.loopMode===u.SliderLoopMode.PLAY_INDEFINITELY)return!0;var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type&&"expression"!==e.type||e.id!==this.id)},g.prototype.shouldShowSlider=function(){return!this.shouldShowLimitInputs()},g.prototype.isSliderThumbFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"slider-thumb"!==e.type||e.id!==this.id)},g.prototype.isSliderMinFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type||e.id!==this.id||"min"!==e.location)},g.prototype.isSliderStepFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type||e.id!==this.id||"step"!==e.location)},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.default=h})),i("loadcss!prompt-sliders",(function(){})),i("expressions/promptslider_view",["require","exports","tslib","core/lib/label","jquery","lib/aria","dcgview","graphing-calc/models/list","loadcss!prompt-sliders"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=a.Components,u=c.For,d=c.If,p=(l=a.Class,r.__extends(h,l),h.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},h.prototype.template=function(){var e=this;return a.createElement("div",{class:a.const("dcg-create-sliders dcg-action-createslider"),handleEvent:a.const("true"),onTap:this.bindFn(this.onCreateSlider)},a.createElement("span",{class:a.const("dcg-msg")},(function(){return e.controller.s("graphing-calculator-label-add-slider")})),a.createElement("span",{class:a.const("btns")},a.createElement(u,{each:function(){return e.getMissingVariables().slice(0,4)}},a.createElement("span",null,(function(t){return a.createElement("div",{class:a.const("dcg-slider-btn-container"),var_name:e.const(t)},a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:function(){return{"dcg-btn-slider":!0,"dcg-btn-blue":1===e.getMissingVariables().length,"dcg-btn-light-gray":1!==e.getMissingVariables().length}},didMount:function(e){e.innerHTML=n.identifierToHTML(t)}}))}))),a.createElement(d,{predicate:function(){return 1<e.getMissingVariables().length}},(function(){return a.createElement("div",{class:a.const("dcg-slider-btn-container dcg-all")},a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:a.const("dcg-btn-slider dcg-btn-blue")},(function(){return e.controller.s("graphing-calculator-button-slider-add-all-variables")})))}))))},h.prototype.onCreateSlider=function(e){if(this.controller.dispatch({type:"set-none-selected"}),e.target){var t=i(e.target).closest(".dcg-slider-btn-container");if(t.length){var r,n=t.hasClass("dcg-all")?(this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:this.getMissingVariables()}),!0):(r=[t.attr("var_name")],this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:r}),1==this.getMissingVariables().length);if("keyboard"===e.device){var o=this.model.id,a=this.props.controller().getItemSelectorById(o);if(!a)return;n?this.controller.dispatch({type:"move-focus-to-item",id:o}):a.find(".dcg-btn-blue").trigger("focus")}}}},h.prototype.getMissingVariables=function(){return s.getMissingVariablesForItem(this.model)},h.prototype.didMount=function(){var e=this;this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout((function(){for(var t=[],r=e.getMissingVariables(),n=0;n<r.length;n++)t.push('"'+r[n]+'"');o.alert(e.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:t.join(",")})),e.promptAlertTimeout=0}),2e3)},h.prototype.didUnmount=function(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)},h);function h(){return null!==l&&l.apply(this,arguments)||this}t.default=p})),i("loadcss!expressions/label_view",(function(){})),i("loadcss!toggle",(function(){})),i("expressions/label_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","core/graphing-calc/json/expression","loadcss!./label_view","loadcss!toggle"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n.Components,l=s.Input,c=s.IfElse,u=(a=n.Class,r.__extends(d,a),d.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:function(){return{"dcg-label-visible":e.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}},tapboundary:n.const("true"),handleEvent:n.const("true")},n.createElement("span",{role:n.const("checkbox"),"aria-checked":this.bindFn(this.getShowLabel),tabindex:n.const("0"),class:function(){return{"dcg-checkbox":!0,"dcg-checkbox-label-colon":e.getShowLabel()&&!e.hasEditableLabel()}},"aria-label":function(){return e.controller.s("graphing-calculator-button-label")},onTap:this.bindFn(this.onCheckboxInput)},n.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getShowLabel()}}},n.createElement("i",{class:n.const("dcg-icon-check")})),n.const(" "),n.createElement("span",{class:n.const("dcg-checkbox-label"),"aria-hidden":n.const("true")},(function(){return e.controller.s("graphing-calculator-button-label")}))),c(this.bindFn(this.hasEditableLabel),{true:function(){return n.createElement("div",{class:n.const("dcg-editable-mode-toggle")},n.createElement("div",{class:n.const("dcg-option-toggle-view")},n.createElement("div",{class:n.const("dcg-toggle-container")},n.createElement("div",{class:n.const("dcg-toggle")},n.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.model.editableLabelMode===o.EditableLabelMode.Math}},role:n.const("button"),tabindex:n.const(0),"aria-pressed":function(){return e.model.editableLabelMode===o.EditableLabelMode.Math},"aria-label":function(){return e.controller.s("graphing-calculator-narration-editable-label-mode-editable-math")},didMount:function(t){void 0!==e.lastToggleOption&&"math"===e.lastToggleOption&&(e.lastToggleOption=void 0,t.focus())},onTap:function(){e.lastToggleOption="Editable Math",e.controller.dispatch({type:"set-item-editable-label-mode",id:e.id,editableLabelMode:o.EditableLabelMode.Math})}},(function(){return e.controller.s("graphing-calculator-button-editable-math")})),n.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.model.editableLabelMode===o.EditableLabelMode.Text}},role:n.const("button"),tabindex:n.const(0),"aria-pressed":function(){return e.model.editableLabelMode===o.EditableLabelMode.Text},"aria-label":function(){return e.controller.s("graphing-calculator-narration-editable-label-mode-editable-text")},didMount:function(t){void 0!==e.lastToggleOption&&"text"===e.lastToggleOption&&(e.lastToggleOption=void 0,t.focus())},onTap:function(){e.lastToggleOption="Editable Text",e.controller.dispatch({type:"set-item-editable-label-mode",id:e.id,editableLabelMode:o.EditableLabelMode.Text})}},(function(){return e.controller.s("graphing-calculator-button-editable-text")}))))))},false:function(){return n.createElement(l,{class:function(){return{"dcg-label-input":!0,"dcg-disabled-input":e.getIsDisabled(),"dcg-disabled-editable-input":e.hasEditableLabel()}},"aria-label":function(){return e.controller.s("graphing-calculator-narration-label-text")},"aria-disabled":function(){return e.getIsDisabled()||e.hasEditableLabel()},value:e.bindFn(e.getLabel),onInput:e.bindFn(e.onLabelInput)})}}))},d.prototype.getLabel=function(){return this.model.label||""},d.prototype.hasEditableLabel=function(){return i.hasEditableLabel(this.model)},d.prototype.getShowLabel=function(){return!!this.model.showLabel},d.prototype.getIsDisabled=function(){return 0===this.getLabel().length&&!this.getShowLabel()},d.prototype.onLabelInput=function(e){var t=e;this.controller.dispatch({type:"set-item-label",id:this.id,label:t}),this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!!t})},d.prototype.onCheckboxInput=function(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.getShowLabel()})},d);function d(){return null!==a&&a.apply(this,arguments)||this}t.default=u})),i("loadcss!dcgview-helpers/checkbox",(function(){})),i("dcgview-helpers/checkbox",["require","exports","tslib","dcgview","jquery","loadcss!./checkbox"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;var o,a=(o=n.Class,r.__extends(s,o),s.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-component-checkbox":!0,"dcg-checked":e.props.checked(),"dcg-disabled":e.props.disabled&&e.props.disabled(),"dcg-small":e.props.small&&e.props.small(),"dcg-green":e.props.green&&e.props.green()}},onTap:this.bindFn(this.onChange)},n.createElement("span",{tabindex:n.const(0),class:n.const("dcg-checkbox"),role:n.const("checkbox"),"aria-label":this.props.ariaLabel,"aria-disabled":function(){return e.props.disabled&&e.props.disabled()},"aria-checked":this.props.checked},n.createElement("i",{class:n.const("dcg-icon-check"),"aria-hidden":n.const("true")})),n.createElement("span",{class:n.const("dcg-checkbox-children")},this.children))},s.prototype.onChange=function(e){e.target&&i(e.target).attr("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.Checkbox=a})),i("loadcss!expressions/cdf-footer-view",(function(){})),i("expressions/cdf-footer-view",["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./evaluation-view","main/mathquill-operators","dcgview-helpers/checkbox","loadcss!./cdf-footer-view"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p,h=n.Components.If,g=(p=n.Class,r.__extends(f,p),f.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-cdf-footer-container dcg-mq-underline-container dcg-do-blur"),tapboundary:n.const("true"),handleEvent:n.const("true")},n.createElement(d.Checkbox,{checked:function(){return a.shouldShowCDFFooter(e.model)},disabled:function(){return a.isListValuedDistribution(e.model)},onChange:function(t){e.controller.dispatch({type:"set-show-cdf",id:e.model.id,showCDF:t})},ariaLabel:function(){return e.controller.s("graphing-calculator-button-find-cdf")}},(function(){return e.controller.s("graphing-calculator-button-find-cdf")})),n.createElement(h,{predicate:function(){return a.shouldShowCDFFooter(e.model)}},(function(){return n.createElement("div",null,n.createElement("span",{class:n.const("dcg-cdf-limit-name")},(function(){return e.controller.s("graphing-calculator-label-cdf-minimum")})),n.createElement(l.default,{latex:function(){return a.getCDFMin(e.model)},hasError:function(){return!a.isCDFMinValid(e.model)},brailleShouldFocus:function(){return e.isInputFocused("min")},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},ariaLabel:function(){return e.controller.s("graphing-calculator-narration-cdf-minimum")},placeholder:function(){return a.getCDFMinPlaceholder(e.model)},onBrailleInput:e.bindFn(e.updateCDFMin),controller:e.props.controller,onBrailleKeydown:function(t){return e.handleBraillePressedKey(t,"min")}},n.createElement(s.default,{latex:function(){return a.getCDFMin(e.model)},hasError:function(){return!a.isCDFMinValid(e.model)},isFocused:function(){return e.isInputFocused("min")},onFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-cdf-minimum")},getAriaPostLabel:function(){return""},placeholder:function(){return a.getCDFMinPlaceholder(e.model)},onUserPressedKey:function(t,r){return e.handlePressedKey(t,r,"min")},onUserChangedLatex:e.bindFn(e.updateCDFMin),onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return e.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),n.createElement("span",{class:n.const("dcg-cdf-limit-name")},(function(){return e.controller.s("graphing-calculator-label-cdf-maximum")})),n.createElement(l.default,{latex:function(){return a.getCDFMax(e.model)},hasError:function(){return!a.isCDFMaxValid(e.model)},brailleShouldFocus:function(){return e.isInputFocused("max")},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},ariaLabel:function(){return e.controller.s("graphing-calculator-narration-cdf-maximum")},placeholder:function(){return a.getCDFMaxPlaceholder(e.model)},onBrailleInput:e.bindFn(e.updateCDFMax),controller:e.props.controller,onBrailleKeydown:function(t){return e.handleBraillePressedKey(t,"max")}},n.createElement(s.default,{latex:function(){return a.getCDFMax(e.model)},hasError:function(){return!a.isCDFMaxValid(e.model)},isFocused:function(){return e.isInputFocused("max")},onFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-cdf-maximum")},getAriaPostLabel:function(){return""},placeholder:function(){return a.getCDFMaxPlaceholder(e.model)},onUserPressedKey:function(t,r){return e.handlePressedKey(t,r,"max")},onUserChangedLatex:e.bindFn(e.updateCDFMax),onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return e.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),n.createElement(h,{predicate:e.bindFn(e.showEvaluation)},(function(){return n.createElement("div",{class:n.const("dcg-cdf-evaluation-container")},n.createElement(c.default,{val:function(){return a.getCDFEvaluation(e.model)},controller:e.props.controller,dependent:e.const(""),id:function(){return e.model.id},focusable:e.const(!0)}))})))})))},f.prototype.handleBraillePressedKey=function(e,t){var r=o.lookup(e);r&&this.handlePressedKey(r,i.Event(e),t)},f.prototype.handlePressedKey=function(e,t,r){if("Esc"!==e){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var n=s.default.getFocusedMathquill();n&&(n.keystroke(e,t),"min"===r&&a.getCDFMin(this.model)!==n.latex()&&this.updateCDFMin(n.latex()),"max"===r&&a.getCDFMax(this.model)!==n.latex()&&this.updateCDFMax(n.latex()))}else this.controller.dispatch({type:"set-focus-location",location:void 0})},f.prototype.updateCDFMax=function(e){this.controller.dispatch({type:"set-cdf-max",id:this.model.id,latex:e})},f.prototype.updateCDFMin=function(e){this.controller.dispatch({type:"set-cdf-min",id:this.model.id,latex:e})},f.prototype.showEvaluation=function(){return!!a.isCDFMaxValid(this.model)&&!!a.isCDFMinValid(this.model)},f.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"cdf-limit"!==t.type||t.id!==this.id)&&t.location===e},f.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"cdf-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"cdf-limit",id:this.id,location:e}})},f.prototype.getMQConfig=function(){return{autoOperatorNames:u.getAutoOperators({})}},f);function f(){var e=null!==p&&p.apply(this,arguments)||this;return e.focusedValues={},e}t.default=g})),i("loadcss!expressions/parameter_suggestions_view",(function(){})),i("expressions/parameters_suggestions_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","loadcss!./parameter_suggestions_view"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParametersSuggestionsView=void 0;var o,a=n.Components,s=a.If,l=a.For,c=a.SwitchUnion,u=(o=n.Class,r.__extends(d,o),d.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},d.prototype.template=function(){var e=this;return c(this.bindFn(this.getSuggestionType),{list:function(){return n.createElement(l,{each:e.bindFn(e.getListOfParameters)},n.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==e.controller.getBrailleMode()}}},(function(t){return n.createElement("span",{class:n.const("dcg-parameter-name")},(function(){return e.getParamName(t)}))})))},listWithDefault:function(){return n.createElement(l,{each:e.bindFn(e.getListOfParameters)},n.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==e.controller.getBrailleMode()}},onTap:e.bindFn(e.fillInDefaults)},(function(t){return n.createElement("span",{class:n.const("dcg-parameter-name")},(function(){return e.getParamName(t)}),n.createElement(s,{predicate:function(){return e.shouldShowDefaultValue(t)}},(function(){return n.createElement("span",{class:n.const("dcg-default-marker")},n.const("= "),(function(){return e.getDefaultValue(t)}))})))})))},individual:function(){return n.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==e.controller.getBrailleMode()}}},e.bindFn(e.getMissingRequiredParamText))},none:function(){}})},d.prototype.getExtractedAndDefaultArgString=function(e){var t=e.params,r=e.values,n=e.defaults;return t.map((function(e,t){var i=r[e],o=n[t];return i||o||""})).join(",")},d.prototype.fillInDefaults=function(){var e,t,r,n,o,a,s,l=i.parseToplevelFunction(this.model);l&&(e=l.symbol,r=(t=l.span).input,n=t.start,o=t.end,a="\\operatorname{"+e+"}\\left("+this.getExtractedAndDefaultArgString(l)+"\\right)",s=r.slice(0,n)+a+r.slice(o),this.controller.dispatch({type:"set-item-latex",id:this.id,latex:s}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"}))},d.prototype.isMissingDefault=function(){if(!i.isPrimaryLatexValid(this.model))return!1;var e=i.parseToplevelFunction(this.model);if(!e)return!1;for(var t=0;t<e.params.length;t++)if(this.shouldShowDefaultValue(e.params[t]))return!0;return!1},d.prototype.getSuggestionType=function(){return 1<this.getListOfParameters().length?this.isMissingDefault()?"listWithDefault":"list":this.missingRequiredParam()?"individual":"none"},d.prototype.missingRequiredParam=function(){var e=i.parseToplevelFunction(this.model);if(e&&1===e.params.length){var t=e.params[0];if(!this.getDefaultValue(t)&&!this.getParameterExtractedValue(t))return t}},d.prototype.getMissingRequiredParamText=function(){var e=this.missingRequiredParam();return e?this.controller.s("graphing-calculator-text-enter-pareneter",{param:this.getParamName(e)}):""},d.prototype.getDefaultValue=function(e){var t=i.parseToplevelFunction(this.model);if(!t||!t.params)return"";for(var r=0;r<t.params.length;r++)if(t.params[r]===e)return t.defaults[r]||"";return""},d.prototype.getParameterExtractedValue=function(e){var t=i.parseToplevelFunction(this.model);return t&&t.values[e]||""},d.prototype.shouldShowDefaultValue=function(e){return!this.getParameterExtractedValue(e)&&!!this.getDefaultValue(e)},d.prototype.getListOfParameters=function(){var e=i.parseToplevelFunction(this.model);return e?e.params:[]},d.prototype.getParamName=function(e){switch(e){case"mean":return this.controller.s("graphing-calculator-text-parameter-name-mean");case"stdev":return this.controller.s("graphing-calculator-text-parameter-name-stddev");case"dof":return this.controller.s("graphing-calculator-text-parameter-name-dof");case"probsuccess":return this.controller.s("graphing-calculator-text-parameter-name-probsuccess");case"trials":return this.controller.s("graphing-calculator-text-parameter-name-trials");case"data":return this.controller.s("graphing-calculator-text-parameter-name-data");case"binwidth":return this.controller.s("graphing-calculator-text-parameter-name-binwidth");case"min":return this.controller.s("graphing-calculator-text-parameter-name-min");case"max":return this.controller.s("graphing-calculator-text-parameter-name-max");case"height":return this.controller.s("graphing-calculator-text-parameter-name-height");case"offset":return this.controller.s("graphing-calculator-text-parameter-name-offset");default:return e}},d);function d(){return null!==o&&o.apply(this,arguments)||this}t.ParametersSuggestionsView=u})),i("loadcss!expressions/distribution_parameters_view",(function(){})),i("expressions/distribution_parameters_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","expressions/cdf-footer-view","./parameters_suggestions_view","loadcss!./distribution_parameters_view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.If,c=(s=n.Class,r.__extends(u,s),u.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-distribution-parameters-container dcg-mq-underline-container dcg-do-blur"),tapboundary:n.const("true"),handleEvent:n.const("true")},n.createElement(a.ParametersSuggestionsView,{model:this.props.model,controller:this.props.controller}),n.createElement(l,{predicate:function(){return i.shouldShowCDFCheckbox(e.model)}},(function(){return n.createElement(o.default,{model:e.props.model,controller:e.props.controller})})))},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("loadcss!expressions/visualization_parameters_view",(function(){})),i("expressions/visualization_parameters_view",["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/checkbox","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./parameters_suggestions_view","main/mathquill-operators","loadcss!./visualization_parameters_view","loadcss!toggle"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p,h=n.Components.For,g=n.Components,f=g.SwitchUnion,m=g.If,y=(p=n.Class,r.__extends(v,p),v.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-toggle-container")},n.createElement("div",{class:n.const("dcg-expression-footer-title")},this.props.title,n.createElement(m,{predicate:function(){return!!e.props.helpLink}},(function(){return n.createElement("a",{"aria-label":function(){return e.props.controller().s("account-shell-link-help")},class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:e.props.helpLink},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))}))),n.createElement(h,{each:this.props.options,key:function(e){return e.name}},n.createElement("div",{class:n.const("dcg-toggle")},(function(t){return n.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.isSelected(t.name)}},role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return e.props.title()+": "+t.displayName},"aria-pressed":function(){return e.isSelected(t.name)},onTap:function(){return e.props.controller().dispatch({type:"set-visualization-prop",id:e.props.model().id,prop:e.props.vizProp(),value:t.name})}},(function(){return t.displayName}))}))))},v.prototype.isSelected=function(e){return a.getVizProp(this.props.model(),this.props.vizProp())===e},v);function v(){return null!==p&&p.apply(this,arguments)||this}var b,x=(b=n.Class,r.__extends(w,b),w.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-visualization-parameters-container dcg-mq-underline-container dcg-do-blur"),tapboundary:n.const("true"),handleEvent:n.const("true")},n.createElement(u.ParametersSuggestionsView,r.__assign({},this.props)),n.createElement("div",{class:n.const("dcg-smaller-font")},f((function(){return e.getVisualizationType()}),{boxplot:function(){return n.createElement("div",null,n.createElement("div",{class:n.const("dcg-expression-footer-title")},(function(){return e.controller.s("graphing-calculator-heading-visual-parameters-display-properties")})),e.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:function(){return e.controller.s("graphing-calculator-narration-visual-parameters-offset")}}),e.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:function(){return"y"===a.getVizProp(e.model,"alignedAxis")?e.controller.s("graphing-calculator-narration-visual-parameters-width"):e.controller.s("graphing-calculator-narration-visual-parameters-height")}}),n.createElement(s.Checkbox,{checked:function(){return!!a.getVizProp(e.model,"showBoxplotOutliers")},onChange:e.bindFn(e.onToggleOutliers),ariaLabel:function(){return e.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")}},n.createElement("span",{class:n.const("dcg-parameter-name")},(function(){return e.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")}))))},dotplot:function(){return n.createElement(m,{predicate:function(){return a.needsDotplotXMode(e.model)}},(function(){return n.createElement("div",{class:n.const("dcg-toggles-container")},n.createElement(y,r.__assign({},e.props,{vizProp:function(){return"dotplotXMode"},options:function(){return[{name:"exact",displayName:e.controller.s("graphing-calculator-button-visual-parameters-exact")},{name:"bin",displayName:e.controller.s("graphing-calculator-button-visual-parameters-binned")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-x-values")}})),n.createElement(y,r.__assign({},e.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:e.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:e.controller.s("graphing-calculator-button-visual-parameters-left")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")}})))}))},histogram:function(){return n.createElement("div",{class:n.const("dcg-toggles-container")},n.createElement(y,r.__assign({},e.props,{vizProp:function(){return"histogramMode"},options:function(){return[{name:"",displayName:e.controller.s("graphing-calculator-button-visual-parameters-count")},{name:"relative",displayName:e.controller.s("graphing-calculator-button-visual-parameters-relative")},{name:"density",displayName:e.controller.s("graphing-calculator-button-visual-parameters-density")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-bar-heights")},helpLink:e.const("https://support.desmos.com/hc/en-us/articles/360022405991")})),n.createElement(y,r.__assign({},e.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:e.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:e.controller.s("graphing-calculator-button-visual-parameters-left")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")}})))},none:function(){return n.createElement("span",null)}})))},w.prototype.makeMQInput=function(e){var t=this;return n.createElement("span",null,n.createElement("span",{class:n.const("dcg-parameter-name")},e.name,n.const(":")),n.createElement(c.default,{latex:function(){return t.getPropLatex(e)},ariaLabel:e.name,placeholder:function(){return e.default},brailleShouldFocus:function(){return t.isInputFocused(e.prop)},onBrailleInput:function(r){return t.handleLatexChanged(e.prop,r)},controller:this.props.controller,hasError:function(){return!a.isVizPropValid(t.model,e.prop)},onBrailleFocusedChanged:function(r){return t.handleFocusedChanged(e.prop,r)},onBrailleKeydown:function(r){return t.handleBraillePressedKey(r,e.prop)}},n.createElement(l.default,{latex:function(){return t.getPropLatex(e)},hasError:function(){return!a.isVizPropValid(t.model,e.prop)},isFocused:function(){return t.isInputFocused(e.prop)},onFocusedChanged:function(r){return t.handleFocusedChanged(e.prop,r)},placeholder:function(){return e.default},config:this.bindFn(this.getMQConfig),getAriaLabel:e.name,onUserPressedKey:function(r,n){return t.handlePressedKey(r,n,e.prop)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(r){return t.handleLatexChanged(e.prop,r)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return t.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})))},w.prototype.handleBraillePressedKey=function(e,t){var r=o.lookup(e);r&&this.handlePressedKey(r,i.Event(e),t)},w.prototype.handlePressedKey=function(e,t,r){if("Esc"!==e){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var n=l.default.getFocusedMathquill();n&&(n.keystroke(e,t),this.handleLatexChanged(r,n.latex()))}else this.controller.dispatch({type:"set-focus-location",location:void 0})},w.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"visualization-prop"!==t.type||t.id!==this.id)&&t.location===e},w.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:e}})},w.prototype.getPropLatex=function(e){var t=e.prop,r=a.getVizProp(this.model,t);return"string"==typeof r?r:""},w.prototype.handleLatexChanged=function(e,t){a.getVizProp(this.model,e)!==t&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:e,value:t})},w.prototype.onToggleOutliers=function(){var e=a.getVizProp(this.model,"showBoxplotOutliers");this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"showBoxplotOutliers",value:!e})},w.prototype.getVisualizationType=function(){return a.isPrimaryLatexValid(this.model)?a.isBoxPlot(this.model)?"boxplot":a.isDotPlot(this.model)?"dotplot":a.isHistogram(this.model)?"histogram":"none":"none"},w.prototype.getMQConfig=function(){return{autoOperatorNames:d.getAutoOperators()}},w);function w(){return null!==b&&b.apply(this,arguments)||this}t.default=x})),i("loadcss!expressions/ttest_footer_view",(function(){})),i("expressions/ttest_footer_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","core/lib/number-to-latex","dcgview-helpers/static-mathquill-view","loadcss!./ttest_footer_view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=n.Class,r.__extends(c,s),c.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},c.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-ttest-footer-container dcg-do-blur"),handleEvent:n.const("true")},n.createElement("table",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Less than: "+e.getLessThan()}},n.createElement("span",{class:n.const("dcg-operator")},n.createElement(a.default,{config:this.const({}),latex:this.const("<")})),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(a.default,{config:this.const({}),latex:function(){return e.getLessThan()}}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Greater than: "+e.getGreaterThan()}},n.createElement("span",{class:n.const("dcg-operator")},n.createElement(a.default,{config:this.const({}),latex:this.const(">")})),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(a.default,{config:this.const({}),latex:function(){return e.getGreaterThan()}}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Not equal: "+e.getNotEqual()}},n.createElement("span",{class:n.const("dcg-operator")},n.createElement(a.default,{config:this.const({}),latex:this.const("â ")})),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(a.default,{config:this.const({}),latex:function(){return e.getNotEqual()}})))))))},c.prototype.getLessThan=function(){var e=i.getTTestResults(this.model);return e?o.numberToStatsConfidenceLatex(e.lessThan,5):""},c.prototype.getGreaterThan=function(){var e=i.getTTestResults(this.model);return e?o.numberToStatsConfidenceLatex(e.greaterThan,5):""},c.prototype.getNotEqual=function(){var e=i.getTTestResults(this.model);return e?o.numberToStatsConfidenceLatex(e.notEqual,5):""},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("loadcss!expressions/stats_footer_view",(function(){})),i("expressions/stats_footer_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","dcgview-helpers/static-mathquill-view","core/lib/number-to-latex","loadcss!./stats_footer_view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=n.Class,r.__extends(c,s),c.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-stats-footer-container dcg-do-blur"),handleEvent:n.const("true")},n.createElement("table",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Min: "+e.getMin()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Min")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(o.default,{config:this.const({}),latex:this.bindFn(this.getMin)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Q1: "+e.getQ1()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Q1")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(o.default,{config:this.const({}),latex:this.bindFn(this.getQ1)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Median: "+e.getMedian()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Median")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(o.default,{config:this.const({}),latex:this.bindFn(this.getMedian)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Q3: "+e.getQ3()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Q3")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(o.default,{config:this.const({}),latex:this.bindFn(this.getQ3)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Max: "+e.getMax()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Max")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(o.default,{config:this.const({}),latex:this.bindFn(this.getMax)})))))))},c.prototype.getMin=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.min):""},c.prototype.getQ1=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.q1):""},c.prototype.getMedian=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.median):""},c.prototype.getQ3=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.q3):""},c.prototype.getMax=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.max):""},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("loadcss!expressions/expression-edit-actions",(function(){})),i("expressions/expression-edit-actions",["require","exports","parser","tslib","dcgview","lib/tooltip","core/lib/dragmode","core/types/styles","graphing-calc/models/expression","graphing-calc/models/abstract-item","lib/aria","loadcss!./expression-edit-actions"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionEditActions=void 0;var d,p=i.Components.If,h=(d=i.Class,n.__extends(g,d),g.prototype.init=function(){this.controller=this.props.controller()},g.prototype.template=function(){var e=this;return i.createElement(p,{predicate:function(){return e.controller.isInEditListMode()}},(function(){return i.createElement("span",{class:function(){return{"dcg-expression-edit-actions":!0,"dcg-limited-height":e.limitedHeight()}},style:function(){return{background:e.controller.getBackgroundColor()}},didMount:function(){e.controller.isInEditListMode()&&u.alert(e.controller.s("graphing-calculator-narration-edit-list-mode-on"))},didUnmount:function(){e.controller.isInEditListMode()||u.alert(e.controller.s("graphing-calculator-narration-edit-list-mode-off"))}},i.createElement(p,{predicate:function(){return!e.controller.hasBackgroundColor()}},(function(){return i.createElement("span",{class:i.const("dcg-graphic"),handleEvent:i.const("true ")})})),i.createElement(p,{predicate:e.bindFn(e.canConvertToTable)},(function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-convert-to-table-tooltip")},gravity:e.const("s")},i.createElement("span",{class:i.const("dcg-action-createtable dcg-exp-action-button"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-convert-to-table-tooltip")},onTap:e.bindFn(e.onCreateTable)},i.createElement("i",{class:i.const("dcg-icon-table")})))})),i.createElement(p,{predicate:e.bindFn(e.canDuplicate)},(function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-duplicate-expression-tooltip")},gravity:e.const("s")},i.createElement("span",{class:i.const("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-duplicate-expression-tooltip")},onTap:e.bindFn(e.onDuplicateWithoutFocus)},i.createElement("i",{class:i.const("dcg-icon-duplicate")})))})),i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-expression-delete-tooltip")},gravity:e.const("sw")},i.createElement("span",{class:i.const("dcg-delete-btn dcg-exp-action-button"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-expression-delete-tooltip")},onTap:e.bindFn(e.onDelete)},i.createElement("i",{class:i.const("dcg-icon-remove")}))))}))},g.prototype.model=function(){return this.controller.getItemModel(this.props.id())},g.prototype.canConvertToTable=function(){var e=this.model();return!(!e||"expression"!==e.type||!e.formula.is_tableable)},g.prototype.canDuplicate=function(){var e=this.model();return!(!e||"expression"!==e.type||this.isSlider())},g.prototype.limitedHeight=function(){var e=this.model();return e&&("image"===e.type||this.isSlider())},g.prototype.isSlider=function(){var e=this.model();return e&&"expression"===e.type&&e.sliderExists},g.prototype.generateSubscriptedTableColumns=function(e,t,n){var i={independent:t,dependent:n};if("x"===t)return i;if("Identifier"!==r.parse(t).type)return i;var o=r.parse(n);if("FunctionCall"!==o.type)return i;if(1!==o.args.length)return i;var a=o.args[0];if("Identifier"!==a.type)return i;if(a._symbol!==t)return i;var s=o.getInputString(),l=a.getInputSpan(),c=s.substr(0,l.start),u=s.substr(l.end);return i.independent="x_{"+e+"}",i.dependent=c+i.independent+u,i},g.prototype.onCreateTable=function(){var e=this.model();if(e&&"expression"===e.type){var t=e.formula;if(t.is_tableable&&t.table_info){var r,n,i=t.table_info,o=e.index,u=i.independent_variable,d=i.dependent_column;i.by_reference&&(u=(r=this.generateSubscriptedTableColumns(this.controller.generateTableXSubscript(),u,d)).independent,d=r.dependent);var p=[],h=[];if(i.values)for(n=0;n<i.values.length;n++){var g=i.values[n][0];p.push(isNaN(g)?"":g+"");var f=i.values[n][1];h.push(isNaN(f)?"":f+"")}else for(n=-2;n<=2;n++)p.push(n+""),h.push("");var m={id:this.controller.generateId(),type:"table",columns:[{id:this.controller.generateId(),latex:u,color:this.controller.getNextColor(),hidden:!1,values:p,points:!0,lines:!1,dragMode:a.DragMode.NONE,pointStyle:s.PointStyle.POINT,lineStyle:s.LineStyle.SOLID,colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:""},{id:this.controller.generateId(),latex:d,color:c.getDisplayColor(e),hidden:!1,values:h,points:!0,lines:!(l.isPointOrPointList(e)||e.hidden),dragMode:a.DragMode.NONE,pointStyle:s.PointStyle.POINT,lineStyle:s.LineStyle.SOLID,colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:""}]},y=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}),i.by_reference?this.controller.dispatch({type:"insert-item-at-index",index:o+1,state:m,folderId:e.folderId,focus:!0}):this.controller.dispatch({type:"replace-item-at-index",index:o,state:m,focus:!0}),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-table-created"),undoCallback:function(){y.dispatch({type:"undo"}),y.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})}}})}}},g.prototype.onDelete=function(e){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:"keyboard"===e.device})},g.prototype.onDuplicateWithoutFocus=function(){this.controller.dispatch({type:"duplicate-expression",id:this.props.id()})},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.ExpressionEditActions=h})),i("loadcss!expressions/suggested-zoom-view",(function(){})),i("expressions/suggested-zoom-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!./suggested-zoom-view"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestedZoomView=void 0;var o,a=n.Components.If,s=(o=n.Class,r.__extends(l,o),l.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},l.prototype.template=function(){var e=this;return n.createElement(a,{predicate:function(){return e.controller.shouldExpressionZoomFit(e.model)}},(function(){return n.createElement("div",{class:n.const("dcg-suggested-zoom-view dcg-do-blur"),handleEvent:n.const(!0)},n.createElement(i.Tooltip,{tooltip:e.bindFn(e.getZoomText),gravity:function(){return"e"}},n.createElement("i",{onTap:e.bindFn(e.onZoom),role:n.const("button"),"aria-label":e.bindFn(e.getZoomText),class:n.const("dcg-icon-zoom-fit")})))}))},l.prototype.getZoomText=function(){return this.controller.s("graphing-calculator-text-zoom-fit")},l.prototype.onZoom=function(){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id})},l);function l(){return null!==o&&o.apply(this,arguments)||this}t.SuggestedZoomView=s})),i("vendor/html-parse-stringify2",[],(function(){return r={},e.m=t=[function(e,t,r){e.exports={parse:r(1),stringify:r(4)}},function(e,t,r){var n=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,i=r(2),o=Object.create?Object.create(null):{};function a(e,t,r,n,i){var o=t.indexOf("<",n),a=t.slice(n,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&-1<o&&0<=r+e.length||" "!==a)&&e.push({type:"text",content:a})}e.exports=function(e,t){(t=t||{}).components||(t.components=o);var r,s=[],l=-1,c=[],u={},d=!1;return e.replace(n,(function(n,o){if(d){if(n!=="</"+r.name+">")return;d=!1}var p,h="/"!==n.charAt(1),g=0===n.indexOf("\x3c!--"),f=o+n.length,m=e.charAt(f);h&&!g&&(l++,"tag"===(r=i(n)).type&&t.components[r.name]&&(r.type="component",d=!0),r.voidElement||d||!m||"<"===m||a(r.children,e,l,f,t.ignoreWhitespace),u[r.tagName]=r,0===l&&s.push(r),(p=c[l-1])&&p.children.push(r),c[l]=r),!g&&h&&!r.voidElement||(g||l--,!d&&"<"!==m&&m&&a(p=-1===l?s:c[l].children,e,l,f,t.ignoreWhitespace))})),!s.length&&e.length&&a(s,e,0,0,t.ignoreWhitespace),s}},function(e,t,r){var n=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,i=r(3);e.exports=function(e){var t,r=0,o=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(n,(function(n){return"="===n?(o=!0,void r++):(o?0===r?(!i[n]&&"/"!==e.charAt(e.length-2)||(a.voidElement=!0),a.name=n):(a.attrs[t]=n.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(a.attrs[t]=t),t=n),r++,void(o=!1))})),a}},function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(e,t){function r(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var r in e)t.push(r+'="'+e[r]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(r,"")+"</"+t.name+">"}}e.exports=function(e){return e.reduce((function(e,t){return e+r("",t)}),"")}}],e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=0);function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t,r})),i("l10n-tools/localize-serializer",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeToTemplateString=t.variableRegexp=void 0,t.variableRegexp=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/,t.serializeToTemplateString=function(e,r){var n=0,i=0,o={},a={},s=function s(c){if(r.isConst(c))return r.getConstValue(c);if(r.isNamedBinding(c)){var u="{$"+(d=l(o,r.getBindingName(c)))+"}";if(!t.variableRegexp.test(u))throw new Error("Invalid <Localize> variable: "+u+".");return r.addBinding&&r.addBinding(d,c),o[d]=!0,u}if(c!==e&&r.isView(c)){var d=l(a,r.getViewName(c));if(!/[a-zA-Z0-9\-_]/.test(d))throw new Error("Invalid <Localize> subview identifier: "+d+".");return r.addView&&r.addView(d,c),a[d]=!0,"<"+d+"/>"}if(r.isBinding(c))return u="{$"+(d=l(o,"v"+n++))+"}",r.addBinding&&r.addBinding(d,c),o[d]=!0,u;d=""+i++,r.addElement&&r.addElement(d,c);var p=[];return r.forEachChild(c,(function(e){p.push(s(e))})),a[d]=!0,0<p.length?"<"+d+">"+p.join("")+"</"+d+">":"<"+d+"/>"}(e);if(!/^<0>/.test(s)||!/<\/0>$/.test(s))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(s));return s.slice(3,-4).trim();function l(e,t){for(var r=0,n=t;e[n];)n=t+"-"+ ++r;return n}}})),i("shared/dcgviews/localize",["require","exports","tslib","dcgview","vendor/html-parse-stringify2","l10n-tools/localize-serializer","lib/i18n"],(function(e,t,r,n,i,o,a){"use strict";function s(e){return e.__DCGViewLocalizeBindingName}function l(e){return"function"==typeof e&&e.__DCGViewLocalizeViewName}Object.defineProperty(t,"__esModule",{value:!0}),t.Localize=void 0;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.viewMap={},this.elementMap={},this.bindingMap={},this.i18n=this.props.i18n(),this.templateString=this.serializeToTemplateString(n.createElement("div",null,this.children))},t.prototype.template=function(){var e=this;return n.createElement(n.Components.If,{predicate:function(){return e.shouldShow()}},(function(){return n.createElement(n.Components.Switch,{key:function(){return p(e.translatedString())}},(function(t){return e.renderDeserializedTemplateNode(e.parseAndValidate(t))}))}))},t.prototype.shouldShow=function(){var e=this.props.options&&this.props.options();return!(e&&e.hideUntranslatedView&&this.i18n.hasTranslation)||this.i18n.hasTranslation(this.props.key())},t.prototype.translatedString=function(){var e={};for(var t in this.bindingMap)e[t]=a.raw("{$"+t+"}");return this.i18n.s(this.props.key(),e)},t.variable=function(e,t){var r=function(){return t()};return r.__DCGViewLocalizeBindingName=e,r},t.subview=function(e,t){var r=function(){return t()};return r.__DCGViewLocalizeViewName=e,r},t.prototype.parseAndValidate=function(e){var t=i.parse(e),r={},n={};for(var o in function e(t){if(Array.isArray(t))for(var i=0,o=t;i<o.length;i++)e(o[i]);else"token"===t.name?r[t.attrs.id]=!0:"text"!==t.type&&(n[t.name]=!0,e(t.children))}(t),this.elementMap)if(!n[o])return i.parse(p(this.templateString));for(var o in this.bindingMap)if(!r[o])return i.parse(p(this.templateString));return t},t.prototype.renderDeserializedTemplateNode=function(e){var t=this;if(Array.isArray(e))return e.map((function(e){return t.renderDeserializedTemplateNode(e)}));if("text"===e.type)return n.const(e.content||"");if("token"===e.name)return this.bindingMap[e.attrs.id]||function(){return""};if(this.elementMap[e.name]){var r=this.elementMap[e.name],i=e.children.map((function(e){return t.renderDeserializedTemplateNode(e)}));return d(r.type,r.attrs,i)}return this.viewMap[e.name]?this.viewMap[e.name]():d("span",{},[])},t.prototype.serializeToTemplateString=function(e){var t=this;return o.serializeToTemplateString(e,{isView:l,isConst:u,isBinding:function(e){return"function"==typeof e},isNamedBinding:s,getConstValue:function(e){return e()},getBindingName:function(e){return e.__DCGViewLocalizeBindingName},getViewName:function(e){return e.__DCGViewLocalizeViewName},addBinding:function(e,r){t.bindingMap[e]=r},addElement:function(e,r){t.elementMap[e]={type:r.tagName,attrs:r.attrs}},addView:function(e,r){if(t.viewMap[e])throw new Error("Unexpected duplicate view "+e+".");t.viewMap[e]=r},forEachChild:function(e,t){for(var r=0,n=e.children;r<n.length;r++){var i=n[r];if(!u(i)&&"function"!=typeof i&&i._isDCGView)throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().");t(i)}}})},t}(n.Class);function u(e){return"function"==typeof e&&e.isDCGViewConst}function d(e,t,r){return n.createElement(e,t,r)}function p(e){return("<0>"+e+"</0>").replace(new RegExp(o.variableRegexp.source,"g"),(function(e,t){return'<token id="'+t+'"/>'}))}t.Localize=c})),i("loadcss!expressions/clickable_info_view",(function(){})),i("expressions/clickable_info_view",["require","exports","tslib","shared/dcgviews/localize","dcgview","graphing-calc/models/expression","graphing-calc/models/image","graphing-calc/models/simulation","dcgview-helpers/mathquill-view","../dcgview-helpers/tooltipped-error","main/mathquill-operators","loadcss!./clickable_info_view"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableInfoView=void 0;var d,p=i.Components,h=p.Input,g=p.For,f=p.If,m=(d=i.Class,r.__extends(y,d),y.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},y.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-clickable-info-container dcg-mq-underline-container dcg-do-blur"),tapboundary:i.const("true"),handleEvent:i.const("true")},i.createElement("div",{class:i.const("dcg-smaller-font")},i.createElement("div",{role:i.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-clickable-properties")}},i.createElement("div",{role:i.const("heading"),"aria-level":i.const("2"),class:i.const("dcg-expression-footer-title")},i.createElement("div",{class:i.const("dcg-footer-label")},this.bindFn(this.getTitle)),i.createElement("div",{class:i.const("dcg-add-new-rule"),onTap:function(){return e.addRule()}},i.createElement("i",{class:i.const("dcg-icon-plus")}),i.const(" "),i.createElement("span",{class:i.const("dcg-add-new-rule-label")},(function(){return e.controller.s("graphing-calculator-label-add-update-rule")})))),i.createElement(g,{each:this.bindFn(this.getRuleIds)},i.createElement("div",null,(function(t){return i.createElement("div",{class:i.const("dcg-clickable-property-row")},i.createElement("div",{style:e.const({display:"inline-block"})},i.createElement(n.Localize,{i18n:e.const(e.controller),key:e.const("graphing-calculator-label-clickable-object-set-property")},i.const("Set"),i.const(" "),n.Localize.subview("assignment",(function(){return e.makeMQInput({ruleId:t,prop:"assignment",name:function(){return e.controller.s("graphing-calculator-label-assignment")}})})),i.const("to"),i.const(" "),n.Localize.subview("expression",(function(){return e.makeMQInput({ruleId:t,prop:"expression",name:function(){return e.controller.s("graphing-calculator-label-expression")}})})))),i.createElement(f,{predicate:function(){return e.doesRuleHaveError(t)}},(function(){return i.createElement("span",{class:i.const("dcg-clickable-info-error-container")},i.createElement(c.TooltippedError,{error:function(){return e.getRuleErrorString(t)},gravity:e.const("s"),size:e.const("small")}))})),i.createElement("span",{class:i.const("dcg-remove-rule"),onTap:function(){return e.removeRule(t)}},i.createElement("i",{class:i.const("dcg-icon-remove")})))})))),i.createElement(f,{predicate:this.bindFn(this.shouldShowScreenReaderLabel)},(function(){return i.createElement(h,{"aria-label":function(){return e.controller.s("graphing-calculator-narration-screen-reader-label")},placeholder:function(){return e.controller.s("graphing-calculator-text-add-screen-reader-label-placeholder")},value:function(){return e.model.clickableInfo.description},onInput:function(t){return e.controller.dispatch({type:"set-clickableinfo-prop",id:e.model.id,prop:"description",value:t})}})}))))},y.prototype.shouldShowScreenReaderLabel=function(){return"simulation"!==this.model.type},y.prototype.getTitle=function(){return"simulation"===this.model.type?this.controller.s("graphing-calculator-heading-on-every-update"):this.controller.s("graphing-calculator-heading-when-clicked")},y.prototype.getRuleIds=function(){return this.model.clickableInfo.rules.map((function(e){return e.id}))},y.prototype.addRule=function(){this.controller.dispatch({type:"add-clickableinfo-rule",id:this.model.id})},y.prototype.removeRule=function(e){this.controller.dispatch({type:"remove-clickableinfo-rule",id:this.model.id,ruleId:e})},y.prototype.makeMQInput=function(e){var t=this;return i.createElement(l.default,{latex:function(){return t.getClickableInfoPropLatex(e)},hasError:this.const(!1),isFocused:function(){return t.isInputFocused(e)},onFocusedChanged:function(r){return t.handleFocusedChanged(e,r)},config:this.bindFn(this.getMQConfig),getAriaLabel:e.name,onUserPressedKey:function(r,n){return t.handlePressedKey(r,n,e)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(r){return t.handleLatexChanged(e,r)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return!!t.model.controller.getGraphSettings().config.capExpressionSize},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})},y.prototype.handlePressedKey=function(e,t,r){if("Esc"!==e){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var n=l.default.getFocusedMathquill();n&&(n.keystroke(e,t),this.handleLatexChanged(r,n.latex()))}else this.controller.dispatch({type:"set-focus-location",location:void 0})},y.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"clickableinfo-rule"!==t.type||t.id!==this.id||t.location.ruleId!==e.ruleId||t.location.prop!==e.prop)},y.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"clickableinfo-rule",id:this.id,location:{ruleId:e.ruleId,prop:e.prop}}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"clickableinfo-rule",id:this.id,location:{ruleId:e.ruleId,prop:e.prop}}})},y.prototype.getRulePackedError=function(e){return"image"===this.model.type?a.getClickableInfoRulePackedError(this.model,e):"simulation"===this.model.type?s.getClickableInfoRulePackedError(this.model,e):o.getClickableInfoRulePackedError(this.model,e)},y.prototype.doesRuleHaveError=function(e){return!!this.getRulePackedError(e)},y.prototype.getRuleErrorString=function(e){return this.controller.unpack(this.getRulePackedError(e))},y.prototype.getClickableInfoPropLatex=function(e){var t=e.ruleId,r=e.prop;return"image"===this.model.type?a.getClickableInfoPropLatex(this.model,t,r):"simulation"===this.model.type?s.getClickableInfoPropLatex(this.model,t,r):o.getClickableInfoPropLatex(this.model,t,r)},y.prototype.handleLatexChanged=function(e,t){this.getClickableInfoPropLatex(e)!==t&&this.controller.dispatch({type:"set-clickableinfo-rule-prop",id:this.id,ruleId:e.ruleId,prop:e.prop,value:t})},y.prototype.getMQConfig=function(){return{autoOperatorNames:u.getAutoOperators({})}},y);function y(){return null!==d&&d.apply(this,arguments)||this}t.ClickableInfoView=m})),i("loadcss!expressions/expression-footer",(function(){})),i("expressions/expression_view",["require","exports","config","tslib","browser","keys","jquery","./abstract-item-view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","lib/conditional_blur","./expression-icon-view","./evaluation-view","expressions/unresolved_view","expressions/domain_view","expressions/regression_view","expressions/slider_view","expressions/promptslider_view","expressions/label_view","expressions/distribution_parameters_view","expressions/visualization_parameters_view","expressions/ttest_footer_view","expressions/stats_footer_view","graphing-calc/models/expression","core/lib/label","./expression-edit-actions","./suggested-zoom-view","dcgview","./clickable_info_view","main/manage-focus-helper","dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators","jquery.handleevent","loadcss!./expression-footer"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M,I,C,L,P,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A,O=I.Components,D=O.If,F=O.SwitchUnion,q=(A=s.default,n.__extends(N,A),N.prototype.didMount=function(){this.onItemViewMounted(),this.lastBrailleMode=this.controller.getBrailleMode()},N.prototype.didMountRootNode=function(e){this.rootNode=e},N.prototype.willUnmount=function(){this.onItemViewUnmounted()},N.prototype.template=function(){var e=this;return I.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id)&&!e.controller.isInEditListMode(),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-hasSlider":e.hasSlider(),"dcg-hasEvaluation":e.controller.shouldShowEvaluationForItem(e.id),"dcg-hasRegression":e.hasRegression(),"dcg-hasDomain":e.hasDomain()}},"expr-id":function(){return e.model.id},didMount:this.bindFn(this.didMountRootNode)},I.createElement("div",{class:I.const("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},I.createElement("div",{class:I.const("dcg-main")},I.createElement(D,{predicate:function(){return!e.controller.isInEditListMode()}},(function(){return I.createElement(P.default,{latex:function(){return E.getDisplayLatex(e.model)},ariaLabel:function(){return e.getAriaLabel("braille")},brailleShouldFocus:function(){return e.isFocused()},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,onBrailleFocusedChanged:function(t,r){return e.handleMQFocusedChanged(t,r)},onBrailleKeydown:e.bindFn(e.handleBraillePressedKey)},I.createElement(l.default,{latex:function(){return E.getDisplayLatex(e.model)},getAriaLabel:function(){return e.getAriaLabel("speech")},getAriaPostLabel:e.bindFn(e.getFormulaAria),isFocused:function(){return e.isFocused()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.bindFn(e.getMQConfig),hasError:e.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey(t,r)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,r){return e.handleMQFocusedChanged(t,r)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},I.createElement("div",{class:I.const("dcg-expression-mathquill")})))})),I.createElement(D,{predicate:function(){return e.controller.isInEditListMode()}},(function(){return I.createElement("div",{class:I.const("dcg-edit-list-mathquill"),tabindex:function(){return"none"===e.controller.getBrailleMode()?"0":"-1"},onTap:e.bindFn(e.exitEditListMode),manageFocus:e.const({shouldBeFocused:function(){return"none"===e.controller.getBrailleMode()&&L.defaultShouldBeFocused({controller:e.controller,location:{type:"readonly-expression",id:e.model.id}})},onFocusedChanged:function(t){"none"===e.controller.getBrailleMode()&&(t?e.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:e.model.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:e.model.id}}))}})},I.createElement(P.default,{latex:function(){return E.getDisplayLatex(e.model)},ariaLabel:function(){return e.getAriaLabel("braille")},controller:e.props.controller,isStatic:e.const(!0),brailleShouldFocus:function(){var t=e.controller.getFocusLocation();return!!t&&"readonly-expression"===t.type&&t.id===e.id},onBrailleFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:e.model.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:e.model.id}})}},I.createElement(c.default,{latex:function(){return E.getDisplayLatex(e.model)},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.getAriaLabel("speech")}})))}))),I.createElement("i",{class:I.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:I.const("true"),onTap:this.bindFn(this.onDelete)}),I.createElement(D,{predicate:this.bindFn(this.shouldShowFooter)},(function(){return I.createElement("div",{class:e.getFooterClass()},F((function(){return e.getFooterType()}),{none:function(){},regression:function(){return I.createElement(f.default,{model:e.props.model,controller:e.props.controller})},label:function(){return I.createElement(v.default,{model:e.props.model,controller:e.props.controller})},slider:function(){return I.createElement(m.default,{model:e.props.model,controller:e.props.controller})},domain:function(){return I.createElement(g.default,{model:e.props.model,controller:e.props.controller})},evaluation:function(){return I.createElement(p.default,{id:function(){return e.props.model().id},dependent:function(){return E.getAssignment(e.model)||""},val:function(){return e.controller.getEvaluationValueForItem(e.id)},controller:e.props.controller,focusable:e.const(!1)})},distribution:function(){return I.createElement(b.default,{model:e.props.model,controller:e.props.controller})},visualization:function(){return I.createElement(x.default,{model:e.props.model,controller:e.props.controller})},ttest:function(){return I.createElement(w.default,{model:e.props.model,controller:e.props.controller})},stats:function(){return I.createElement(S.default,{model:e.props.model,controller:e.props.controller})},unresolved:function(){return I.createElement(h.default,{controller:e.props.controller})}}),I.createElement(D,{predicate:e.bindFn(e.shouldShowClickableProperties)},(function(){return I.createElement(C.ClickableInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}})})),I.createElement(D,{predicate:e.bindFn(e.shouldShowBrailleError)},(function(){return I.createElement("div",{tabindex:I.const(0),class:I.const("dcg-expression-braille-error"),"aria-roledescription":I.const("error"),"aria-label":function(){return e.controller.unpack(e.model.error)}},I.createElement("i",{class:I.const("dcg-icon-error")}),(function(){return e.controller.unpack(e.model.error)}))})),I.createElement(D,{predicate:e.bindFn(e.shouldShowSliderPrompt)},(function(){return I.createElement(y.default,{model:e.props.model,controller:e.props.controller})})))}))),I.createElement("span",{class:I.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:I.const("true"),tapboundary:I.const("true"),disablescroll:I.const("true"),style:I.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},I.createElement("span",{class:I.const("dcg-num")},(function(){return e.model.displayIndex})),I.createElement("div",{class:I.const("dcg-tab-interior dcg-action-icon-mouse")},I.createElement(d.default,{model:this.props.model,controller:this.props.controller})),I.createElement(M.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),I.createElement(k.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},N.prototype.didUpdate=function(){this.lastBrailleMode=this.controller.getBrailleMode()},N.prototype.shouldShowFooter=function(){return!!this.shouldShowBrailleError()||!!this.shouldShowSliderPrompt()||!!this.shouldShowClickableProperties()||"none"!==this.getFooterType()},N.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&!!E.isClickableAllowed(this.model)&&this.model.clickableInfo.enabled},N.prototype.getFooterType=function(){return this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasSlider()?"slider":this.hasDomain()?"domain":this.isTTest()?"ttest":this.isStats()?"stats":this.controller.shouldShowEvaluationForItem(this.id)?"evaluation":this.isToplevelDistribution()?"distribution":this.isVisualization()?"visualization":this.model.unresolved?"unresolved":"none"},N.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-indent-in-folder dcg-fadein-bottom")},N.prototype.onCreateSliders=function(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})},N.prototype.shouldShowLabelView=function(){return r.get("labels")&&E.isPointOrPointList(this.model)},N.prototype.shouldShowSliderPrompt=function(){return!!this.controller.areSlidersEnabled()&&0<E.getMissingVariables(this.model).length},N.prototype.shouldShowBrailleError=function(){return"none"!==this.controller.getBrailleMode()&&this.hasError()},N.prototype.hasRegression=function(){return!(!this.model.formula||!this.model.formula.is_regression)},N.prototype.hasDomain=function(){return E.hasDomain(this.model)},N.prototype.isToplevelDistribution=function(){return E.isToplevelDistribution(this.model)},N.prototype.isVisualization=function(){return E.isVisualization(this.model)},N.prototype.isTTest=function(){return E.isTTest(this.model)},N.prototype.isStats=function(){return E.isStats(this.model)},N.prototype.hasSlider=function(){return!!this.model.sliderExists},N.prototype.getLabelOptions=function(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)},N.prototype.getAriaLabel=function(e){if(this.shouldShowLabelView()){var t=this.model.label&&""!==this.model.label?this.model.label:"speech"===e?this.controller.s("graphing-calculator-narration-expression-label"):this.controller.raw("lbl");return this.model.showLabel?t:"speech"===e?this.controller.s("graphing-calculator-narration-expression-hidden-label",{label:t}):this.controller.raw("h __label__",{label:t})}return"speech"===e?this.controller.s("shared-calculator-narration-expression-index",{index:this.model.displayIndex}):this.controller.raw("eq__index__",{index:this.model.displayIndex})},N.prototype.getFormulaAria=function(){var e,t,r=this.model.formula,n="";return r&&(E.isEmpty(this.model)||(this.controller.shouldShowEvaluationForItem(this.id)?(n="equals ",e=r.zero_values&&r.zero_values.length?r.zero_values[0].val:r.constant_value,Array.isArray(e)?n+=e.length+" element list.":void 0!==e&&(n+=_.truncatedAriaLabel(+e,this.getLabelOptions()))):r.error&&!this.shouldShowSliderPrompt()?n=this.controller.unpack(r.error):E.isToplevelDistribution(this.model)?n=this.controller.s("graphing-calculator-narration-expression-evaluation-is-distribution"):this.isTTest()&&(n=this.controller.s("graphing-calculator-narration-expression-evaluation-is-t-test")),this.model.shouldGraph&&(r.is_graphable||r.is_regression)&&(r.is_graphable&&r.is_regression?n+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph-and-regression"):r.is_regression?n+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-regression"):n+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),(t=this.controller.getAudioGraph())&&t.agNavigator.canTrace(this.model)&&(i.IS_APPLE?n+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):n+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows"))))),n},N.prototype.handleBraillePressedKey=function(e){var t,r=o.lookup(e);r&&("Esc"===r?(u.default(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}})):"Up"===r||"Down"===r||"Enter"===r?this.controller.dispatch({type:"on-special-key-pressed",key:r}):"Del"!==r&&"Backspace"!==r||(t=P.getFocusedBrailleElement(),E.isEmpty(this.model)&&P.brailleInputIsEmpty(t)&&(this.controller.dispatch({type:"on-special-key-pressed",key:"Del"===r?"Delete":r}),e.preventDefault(),e.stopPropagation())))},N.prototype.handlePressedKey=function(e,t){var r=l.default.getFocusedMathquill();if(r){if("Esc"===e)return u.default(),void(this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}}));if("Up"===e||"Down"===e)return l.default.applyArrowKeyAndReturnIfWasAtBounds(r,e,t)?this.controller.dispatch({type:"on-special-key-pressed",key:e}):void 0;if("Delete"===e||"Backspace"===e){if(E.isEmpty(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if("Enter"===e)return t&&(t.preventDefault(),t.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});r.keystroke(e,t),this.handleLatexChanged(r.latex())}},N.prototype.handleLatexChanged=function(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e})},N.prototype.doesNodeBelongToSliderLimit=function(e){return!!e&&!!this.rootNode.contains(e)&&!!a(e).closest("[data-dcg-limit]").length},N.prototype.handleMQFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):this.doesNodeBelongToSliderLimit(t.relatedTarget)||this.lastBrailleMode!==this.controller.getBrailleMode()||this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})},N.prototype.onMouseSelect=function(e){"keyboard"!==e.device&&("dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))},N.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"expression"===e.type&&e.id===this.id},N.prototype.isSliderThumbFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"slider-thumb"===e.type&&e.id===this.id},N.prototype.hasError=function(){return!!this.model.error&&!E.isEmpty(this.model)},N.prototype.getMQConfig=function(){return{autoOperatorNames:T.getAutoOperators({})}},N);function N(){return null!==A&&A.apply(this,arguments)||this}t.default=q})),i("loadcss!expressions/smart_textarea",(function(){})),i("expressions/smart_textarea",["require","exports","tslib","keys","browser","dcgview","jquery","lib/conditional_blur","jquery.handleevent","loadcss!./smart_textarea"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=o.Components.Textarea,u=(l=o.Class,r.__extends(d,l),d.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-smart-textarea-container")},o.createElement("div",{class:o.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),o.createElement(c,{class:function(){return{"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!e.props.text()}},"aria-label":function(){return e.props.ariaLabel?e.props.ariaLabel():void 0},placeholder:this.props.placeholder,readonly:function(){return!!e.props.readonly()||void 0},value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))},d.prototype.getDisplayTextHTML=function(){var e=(e=this.props.text()||"").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this.props.showLinks()?e=e.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a rel='nofollow ugc' href='$1' target ='_blank'>$1</a>"):e},d.prototype.willUnmount=function(){this.textareaNode=void 0},d.prototype.didMountDisplay=function(e){this.displayNode=e,a(e).on("touchend",(function(e){e.preventDefault()})),a(e).on("dcg-tap dcg-tapstart","a",(function(e){e.handle()})),this.renderDisplayText()},d.prototype.didMountTextarea=function(e){var t=this;this.textareaNode=e,a(e).on("dcg-tapstart",(function(e){e.handle()})),a(e).on("focusin focusout",(function(){return t.onFocusEvent()})),this.updateFocused()},d.prototype.didUpdate=function(){this.updateFocused(),this.renderDisplayText()},d.prototype.onFocusEvent=function(){var e;this.textareaNode&&(e=document.activeElement===this.textareaNode,this.shouldBeFocused()!==e&&this.props.onFocusChange(e))},d.prototype.renderDisplayText=function(){var e;this.displayNode&&(e=this.getDisplayTextHTML(),this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e))},d.prototype.isFocused=function(){return document.activeElement===this.textareaNode},d.prototype.shouldBeFocused=function(){return this.props.shouldFocus()},d.prototype.updateFocused=function(){if(this.textareaNode){var e=this.isFocused(),t=this.shouldBeFocused();if(e!==t)if(t){if(i.IS_IPAD&&i.IS_IN_IFRAME)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}else this.textareaNode.blur()}},d.prototype.onKeydownEvent=function(e){var t,r=this.textareaNode;r&&(t=n.lookup(e),this.props.readonly()&&void 0!==this.props.readonlyAction?e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||t!==n.ENTER&&t!==n.SPACEBAR||(e.preventDefault(),this.props.readonlyAction()):(t!==n.ENTER||e.metaKey?t===n.ESCAPE?s.default():t===n.UP?0===r.selectionStart&&0===r.selectionEnd&&(e.preventDefault(),this.props.onSpecialKey("Up")):t===n.DOWN?r.selectionStart===r.value.length&&r.selectionEnd===r.value.length&&(e.preventDefault(),this.props.onSpecialKey("Down")):t===n.BACKSPACE?0===r.value.length&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):t===n.DELETE&&0===r.value.length&&(e.preventDefault(),this.props.onSpecialKey("Delete")):(e.preventDefault(),this.props.onSpecialKey("Enter")),this.props.onKeydown&&this.props.onKeydown(e)))},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("expressions/text_view",["require","exports","tslib","./abstract-item-view","./smart_textarea","dcgview","./expression-edit-actions","jquery.handleevent"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=n.default,r.__extends(c,s),c.prototype.didMount=function(){this.onItemViewMounted()},c.prototype.willUnmount=function(){this.onItemViewUnmounted()},c.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressiontext":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id)}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},o.createElement("div",{class:o.const("dcg-fade-container")},o.createElement("div",{class:o.const("dcg-main")},o.createElement(i.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.text},placeholder:function(){return e.controller.s("graphing-calculator-text-enter-note-placeholder")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:function(){return e.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)})),o.createElement("i",{class:o.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:o.const("true"),onTap:this.bindFn(this.onDelete)})),o.createElement("span",{class:o.const("dcg-tab dcg-action-drag"),handleevent:o.const("true"),tapboundary:o.const("true"),disablescroll:o.const("true"),style:o.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},o.createElement("span",{class:o.const("dcg-num")},(function(){return e.model.displayIndex})),o.createElement("div",{class:o.const("dcg-tab-interior")}),o.createElement("i",{class:o.const("dcg-icon-text")})),o.createElement(a.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},c.prototype.onInput=function(e){this.controller.dispatch({type:"set-note-text",id:this.id,text:e})},c.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})},c.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},c.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"text"!==e.type||e.id!==this.id)},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("expressions/simulation-icon-view",["require","exports","tslib","dcgview","lib/aria","./circular-icon-view","main/manage-focus-helper","jquery.handleevent","loadcss!./play-pause-icon-view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationIconView=void 0;var s,l=(s=n.Class,r.__extends(c,s),c.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},c.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-expression-icon-container")},n.createElement("div",{class:n.const("dcg-play-pause-icon-view")},n.createElement("div",{class:n.const("dcg-circular-icon-container"),"aria-label":this.bindFn(this.getAriaLabel),role:n.const("button"),tabindex:n.const("0"),onTap:function(t){t.wasHandled("dragdrop")||e.toggleIsPlaying()},manageFocus:this.const(a.manageFocusHelper({controller:this.controller,location:{type:"simulation-icon",id:this.model.id}}))},n.createElement(o.CircularIconView,{iconType:function(){return e.getIconType()},whiteIcon:function(){return!e.controller.isInEditListMode()&&e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)}}))))},c.prototype.getIconType=function(){return this.model.isPlaying?"pause":"play"},c.prototype.getAriaLabel=function(){return this.model.isPlaying?this.controller.s("graphing-calculator-narration-pause-simulation"):this.controller.s("graphing-calculator-narration-play-simulation")},c.prototype.toggleIsPlaying=function(){var e="";this.model.isPlaying?(e=this.controller.s("graphing-calculator-narration-simulation-playing"),this.controller.dispatch({type:"set-simulation-isplaying",id:this.model.id,isPlaying:!1})):(e=this.controller.s("graphing-calculator-narration-simulation-paused"),this.controller.dispatch({type:"set-simulation-isplaying",id:this.model.id,isPlaying:!0})),i.alert(e)},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.SimulationIconView=l})),i("loadcss!expressions/simulation-view",(function(){})),i("expressions/simulation-view",["require","exports","tslib","./abstract-item-view","dcgview","graphing-calc/models/simulation","./expression-edit-actions","./clickable_info_view","expressions/promptslider_view","./simulation-icon-view","dcgview-helpers/mathquill-view","main/mathquill-operators","../dcgview-helpers/tooltipped-error","../lib/tooltip","jquery.handleevent","loadcss!./simulation-view"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g,f=i.Components.If,m=(g=n.default,r.__extends(y,g),y.prototype.didMount=function(){this.onItemViewMounted()},y.prototype.willUnmount=function(){this.onItemViewUnmounted()},y.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id)}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},i.createElement("div",{class:i.const("dcg-fade-container")},i.createElement("i",{class:i.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:i.const("true"),onTap:this.bindFn(this.onDelete)})),i.createElement("span",{class:i.const("dcg-tab dcg-action-drag"),handleevent:i.const("true"),tapboundary:i.const("true"),disablescroll:i.const("true"),style:i.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},i.createElement("span",{class:i.const("dcg-num")},(function(){return e.model.displayIndex})),i.createElement("div",{class:i.const("dcg-tab-interior dcg-action-icon-mouse")},i.createElement(c.SimulationIconView,{model:this.props.model,controller:this.props.controller}))),i.createElement("div",{class:this.getFooterClass()},i.createElement(s.ClickableInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}}),i.createElement("div",{class:i.const("dcg-simulation-fps-container dcg-mq-underline-container")},i.createElement("span",{class:function(){return{"dcg-simulation-step-once":!0,"dcg-disabled":e.model.isPlaying}}},i.createElement(h.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-simulation-step-once-tooltip")},gravity:this.const("s")},i.createElement("div",{tabindex:i.const(0),role:i.const("button"),class:i.const("dcg-simulation-action-step"),"aria-label":function(){return e.controller.s("graphing-calculator-label-simulation-step-once-tooltip")},onTap:this.bindFn(this.doOneStep)},i.createElement("i",{class:i.const("dcg-icon-play")})))),i.createElement("span",{class:i.const("dcg-simulation-fps-label")},i.const("Animation Speed (FPS):")),i.createElement(u.default,{latex:function(){return e.getFPSLatex()},hasError:function(){return e.doesFPSHaveError()},isFocused:function(){return e.isFPSFocused()},onFocusedChanged:function(t){return e.handleFocusedChanged(t)},config:this.bindFn(this.getMQConfig),placeholder:function(){return"60"},getAriaLabel:function(){return"FPS"},getAriaPostLabel:function(){return""},onUserChangedLatex:function(t){return e.dispatchFPSLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return!!e.model.controller.getGraphSettings().config.capExpressionSize},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}}),i.createElement(f,{predicate:function(){return e.doesFPSHaveError()}},(function(){return i.createElement("span",{class:i.const("dcg-clickable-info-error-container")},i.createElement(p.TooltippedError,{error:function(){return e.getFPSErrorString()},gravity:e.const("s"),size:e.const("small")}))}))),i.createElement(f,{predicate:this.bindFn(this.shouldShowSliderPrompt)},(function(){return i.createElement(l.default,{model:e.props.model,controller:e.props.controller})}))),i.createElement(a.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},y.prototype.doOneStep=function(){this.controller.dispatch({type:"simulation-single-step",id:this.model.id})},y.prototype.shouldShowSliderPrompt=function(){return!!this.controller.areSlidersEnabled()&&0<o.getMissingVariables(this.model).length},y.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder dcg-simulation-container"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder dcg-simulation-container")},y.prototype.getFPSLatex=function(){return this.model.fps},y.prototype.isFPSFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"simulation"!==e.type||e.id!==this.id)&&"fps"===e.location},y.prototype.doesFPSHaveError=function(){return!!o.getFPSPackedError(this.model)},y.prototype.getFPSErrorString=function(){return this.controller.unpack(o.getFPSPackedError(this.model))},y.prototype.getMQConfig=function(){return{autoOperatorNames:d.getAutoOperators()}},y.prototype.handleFocusedChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"simulation",id:this.id,location:"fps"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"simulation",id:this.id,location:"fps"}})},y.prototype.dispatchFPSLatexIfChanged=function(e){this.getFPSLatex()!==e&&this.controller.dispatch({type:"set-simulation-fps",id:this.model.id,fps:e})},y);function y(){return null!==g&&g.apply(this,arguments)||this}t.default=m})),i("expressions/tables/table_icon_view",["require","exports","tslib","dcgview","graphing-calc/models/abstract-item","dcgview-helpers/tooltipped-error","../circular-icon-view","main/manage-focus-helper","jquery.handleevent"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components.SwitchUnion,u=(l=n.Class,r.__extends(d,l),d.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},d.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-table-icon-container")},c(this.bindFn(this.typeOfIcon),{error:function(){return n.createElement(o.TooltippedError,{error:function(){return e.controller.unpack(e.model.error)},gravity:e.const("se")})},none:function(){return n.createElement("span",null)},icon:function(){return n.createElement("div",{class:n.const("dcg-circular-icon-container"),role:n.const("button"),tabindex:n.const("0"),"aria-label":e.bindFn(e.getIconAriaLabel),handleevent:n.const("true"),"model-id":function(){return e.model.id},onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()||e.controller.isInEditListMode()?e.toggleOptions():void e.toggleGraphShown()},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.toggleOptions()},manageFocus:e.const(s.manageFocusHelper({controller:e.controller,location:{type:"table-icon",id:e.model.table.id,columnId:e.model.id}}))},n.createElement(a.CircularIconView,{iconType:e.bindFn(e.getIcon),backgroundColor:e.bindFn(e.getModelColor)}))}}))},d.prototype.getModelColor=function(){return i.getMaybeGradientDisplayColor(this.model)},d.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},d.prototype.toggleOptions=function(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,focusFirstOption:!1}})},d.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})},d.prototype.hasError=function(){return!!this.model.error},d.prototype.getIcon=function(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"},d.prototype.typeOfIcon=function(){return""!==this.model.latex&&this.controller.getGraphSettings().config.graphpaper?this.model.error?"error":0===this.model.index?"none":"icon":"none"},d.prototype.getIconAriaLabel=function(){return this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.isInEditListMode()?this.controller.s("graphing-calculator-narration-show-options"):this.model.shouldGraph?this.controller.s("graphing-calculator-narration-hide-table-column"):this.controller.s("graphing-calculator-narration-show-table-column")},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("expressions/tables/header-view",["require","exports","tslib","keys","jquery","browser","dcgview","./table_icon_view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","core/lib/dragmode","dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f,m=a.Components.If,y=(f=a.Class,r.__extends(v,f),v.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table},v.prototype.isRightSide=function(){return this.lookupCellPosition().column>=this.table.columnModels.length-1},v.prototype.template=function(){var e=this;return a.createElement("div",{role:a.const("columnheader"),class:function(){return{"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":0===e.model.index,"dcg-right":e.isRightSide(),"dcg-selected":e.shouldFocus(),"dcg-error":!!e.model.error}},index:function(){return e.model.index},onTapStart:this.bindFn(this.focusThisCell)},a.createElement("div",{class:a.const("dcg-inner-border")}),a.createElement(m,{predicate:function(){return!e.isRightSide()}},(function(){return a.createElement(s.default,{model:e.props.model,controller:e.props.controller})})),a.createElement(m,{predicate:function(){return!e.controller.isInEditListMode()}},(function(){return a.createElement(h.default,{latex:function(){return e.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:e.bindFn(e.shouldFocus),ariaLabel:function(){return e.getAriaLabel("braille")},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,onBrailleFocusedChanged:e.bindFn(e.handleMQFocusedChanged),selectOnFocus:e.const(!0),onBrailleKeydown:e.bindFn(e.handleKeydownOnBrailleInput)},a.createElement(l.default,{latex:function(){return e.model.latex||""},isFocused:e.bindFn(e.shouldFocus),capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.getAriaLabel("speech")},getAriaPostLabel:e.bindFn(e.getAriaPostLabel),hasError:e.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey(t,r)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:e.bindFn(e.handleMQFocusedChanged),selectOnFocus:e.const(!0),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},a.createElement("span",{class:a.const("dcg-math-field dcg-cell-math-content")})))})),a.createElement(m,{predicate:function(){return e.controller.isInEditListMode()}},(function(){return a.createElement(h.default,{latex:function(){return e.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},ariaLabel:function(){return e.getAriaLabel("braille")},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,tabindex:e.const(-1),isStatic:e.const(!0),brailleShouldFocus:e.bindFn(e.shouldFocusNonEditCell),onBrailleFocusedChanged:e.bindFn(e.handleMQFocusedChanged)},a.createElement(c.default,{latex:function(){return e.model.latex||""},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.getAriaLabel("speech")}},a.createElement("span",{class:a.const("dcg-math-field dcg-cell-math-content"),role:a.const("textbox"),"aria-roledescription":a.const("cell"),"aria-readonly":a.const("true"),tabindex:a.const("-1")})))})),a.createElement(m,{predicate:function(){return e.model.dragMode!==p.DragMode.NONE&&!e.model.error}},(function(){return a.createElement("span",{class:a.const("dcg-drag-icon"),"dcg-drag-mode":function(){return e.model.dragMode},style:function(){return{color:e.model.color}}},a.createElement("i",{class:function(){return{"dcg-icon-move":e.model.dragMode===p.DragMode.XY,"dcg-icon-move-horizontal":e.model.dragMode===p.DragMode.X,"dcg-icon-move-vertical":e.model.dragMode===p.DragMode.Y}}}))})),a.createElement("div",{class:a.const("dcg-empty-line")}),a.createElement(m,{predicate:function(){return e.isRightSide()}},(function(){return a.createElement("span",{class:a.const("dcg-fade-right")})})))},v.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},v.prototype.lookupCellPosition=function(){return{row:0,column:this.model.index}},v.prototype.getAriaLabel=function(e){var t=this.lookupCellPosition();return"speech"===e?this.controller.s("graphing-calculator-narration-table-column-header",{column:t.column+1}):this.controller.raw("h__column__",{column:t.column+1})},v.prototype.getAriaPostLabel=function(){var e="",t=this.model;return t.shouldGraph&&(t.points||t.lines)&&!d.isColumnEmpty(t)&&(e=this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),o.IS_APPLE?e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows")),e},v.prototype.handlePressedKey=function(e,t){var r=l.default.getFocusedMathquill();r&&(l.default.handleKeystrokeAndDecideIfSpecialEvent(r,e,t)?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(r.latex()))},v.prototype.handleKeydownOnBrailleInput=function(e){var t,r,o,a,s=n.lookup(e);s&&(t="Enter"===s||"Up"===s||"Down"===s,o=(r=h.getFocusedBrailleElement())&&"Left"===s&&0===r.selectionStart||"Right"===s&&r.selectionStart===i(r).val().length,a=0===this.model.latex.length&&h.brailleInputIsEmpty(r),(t||o||("Del"===s||"Backspace"===s)&&a)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:"Del"===s?"Delete":s}),e.preventDefault()))},v.prototype.handleLatexChanged=function(e){this.model.latex!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},v.prototype.shouldFocus=function(){return!this.controller.isInEditListMode()&&u.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},v.prototype.shouldFocusNonEditCell=function(){return u.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},v.prototype.isNodeWithinTableCell=function(e){if(!e)return!1;if(0===i(e).closest(".dcg-cell").length)return!1;var t=this.controller.getItemRootNodeById(this.table.id);return!!t&&i.contains(t,e)},v.prototype.handleMQFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},v.prototype.getMQConfig=function(){return{autoOperatorNames:g.getAutoOperators()}},v);function v(){return null!==f&&f.apply(this,arguments)||this}t.default=y})),i("expressions/tables/cell-view",["require","exports","tslib","keys","dcgview","jquery","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","../../dcgview-helpers/tooltipped-error","lib/conditional_blur","dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g,f=i.Components.If,m=(g=i.Class,r.__extends(y,g),y.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.column.table},y.prototype.template=function(){var e=this;return i.createElement("div",{role:i.const("gridcell"),class:function(){return{"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":e.isEmpty(),"dcg-non-editable":!!e.model.column.disabled,"dcg-error":!!e.hasError(),"dcg-selected":e.shouldFocus()}},onTapStart:this.bindFn(this.focusThisCell)},i.createElement("div",{class:i.const("dcg-inner-border")}),i.createElement(f,{predicate:this.bindFn(this.hasError)},(function(){return i.createElement("span",{class:i.const("dcg-table-icon-error-container")},i.createElement(u.TooltippedError,{error:e.bindFn(e.getErrorMessage),gravity:e.const("se"),size:e.const("small")}))})),i.createElement(f,{predicate:function(){return!!e.model.column.disabled||e.controller.isInEditListMode()}},(function(){return i.createElement(p.default,{latex:function(){return e.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:e.bindFn(e.shouldFocusReadonlyCell),ariaLabel:function(){return e.getAriaLabel("braille")},controller:e.props.controller,tabindex:function(){return e.controller.isInEditListMode()?-1:0},isStatic:e.const(!0),onBrailleFocusedChanged:e.bindFn(e.handleFocusedChanged),onBrailleKeydown:function(t){return e.handleKeydownOnReadonlyCell(t),!0}},i.createElement(s.default,{getAriaLabel:function(){return e.getAriaLabel("speech")},latex:function(){return e.getValue()},config:e.bindFn(e.getMQConfig)},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),role:i.const("textbox"),"aria-roledescription":i.const("computed cell"),"aria-readonly":i.const("true"),tabindex:function(){return e.controller.isInEditListMode()||e.isEmpty()?-1:0},onKeyDown:e.bindFn(e.handleKeydownOnReadonlyCell),manageFocus:e.const({shouldBeFocused:e.bindFn(e.shouldFocusReadonlyCell),onFocusedChanged:e.bindFn(e.handleFocusedChanged)})})))})),i.createElement(f,{predicate:function(){return!e.model.column.disabled&&!e.controller.isInEditListMode()}},(function(){return i.createElement(p.default,{latex:function(){return e.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:e.bindFn(e.shouldFocusEditableCell),ariaLabel:function(){return e.getAriaLabel("braille")},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,onBrailleFocusedChanged:e.bindFn(e.handleFocusedChanged),onBrailleKeydown:e.bindFn(e.handleKeydownOnBrailleInput),selectOnFocus:e.const(!0)},i.createElement(a.default,{latex:function(){return e.getValue()},isFocused:e.bindFn(e.shouldFocusEditableCell),capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.getAriaLabel("speech")},getAriaPostLabel:e.bindFn(e.getErrorMessage),hasError:e.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey(t,r)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:e.bindFn(e.handleFocusedChanged),selectOnFocus:e.const(!0),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content")})))})),i.createElement("div",{class:i.const("dcg-empty-line")}))},y.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},y.prototype.handlePressedKey=function(e,t){var r,i=a.default.getFocusedMathquill();i&&(r=a.default.handleKeystrokeAndDecideIfSpecialEvent(i,e,t),e===n.ESCAPE&&d.default(),r?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(i.latex()))},y.prototype.handleKeydownOnBrailleInput=function(e){var t,r,i,a=n.lookup(e);a&&(a===n.ESCAPE&&d.default(),t="Enter"===a||"Up"===a||"Down"===a,i=(r=p.getFocusedBrailleElement())&&"Left"===a&&0===r.selectionStart||"Right"===a&&r.selectionStart===o(r).val().length,(t||i||("Del"===a||"Backspace"===a)&&0===this.getValue().length)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:"Del"===a?"Delete":a}),e.preventDefault()))},y.prototype.handleKeydownOnReadonlyCell=function(e){var t=n.lookup(e);"Tab"!==t&&(e.preventDefault(),"Esc"===t&&d.default(),t&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:t}))},y.prototype.handleLatexChanged=function(e){this.getValue()!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},y.prototype.shouldFocus=function(){return l.isEqual(this.lookupCellPosition(),c.getSelectedCell(this.table))},y.prototype.shouldFocusReadonlyCell=function(){return!this.controller.isInEditListMode()&&!!this.model.column.disabled&&this.shouldFocus()},y.prototype.shouldFocusEditableCell=function(){return!this.model.column.disabled&&this.shouldFocus()},y.prototype.isNodeWithinTableCell=function(e){if(!e)return!1;if(0===o(e).closest(".dcg-cell").length)return!1;var t=this.controller.getItemRootNodeById(this.table.id);return!!t&&o.contains(t,e)},y.prototype.handleFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},y.prototype.lookupCellPosition=function(){return{row:this.model.row.index,column:this.model.column.index}},y.prototype.getPackedError=function(){return this.model.column.packedErrors[this.model.row.index-1]},y.prototype.hasError=function(){return!!this.getPackedError()},y.prototype.getErrorMessage=function(){var e=this.getPackedError();return e?this.controller.unpack(e):""},y.prototype.getValue=function(){var e=this.model.column.index,t=this.model.row.index-1;return this.model.column.disabled?this.model.column.computedValues[t]||"":this.table.columns[e].values[t]||""},y.prototype.isEmpty=function(){var e=p.getFocusedBrailleElement();return""===this.getValue()&&p.brailleInputIsEmpty(e)},y.prototype.getAriaLabel=function(e){var t=this.lookupCellPosition(),r=t.row,n=t.column+1;return"speech"===e?this.controller.s("graphing-calculator-narration-table-row-column",{row:r.toString(),column:n.toString()}):this.controller.raw("r__row__c__column__",{row:r.toString(),column:n.toString()})},y.prototype.getMQConfig=function(){return{autoOperatorNames:h.getAutoOperators()}},y);function y(){return null!==g&&g.apply(this,arguments)||this}t.default=m})),i("loadcss!expressions/table-view",(function(){})),i("expressions/table-view",["require","exports","tslib","keys","lib/aria","./abstract-item-view","dcgview","./tables/header-view","./tables/cell-view","graphing-calc/models/table","vendor/mathquill","jquery","./expression-edit-actions","expressions/measure-expressions","./suggested-zoom-view","main/manage-focus-helper","loadcss!./table-view","jquery.handleevent"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m,y=a.Components.For,v=(m=o.default,r.__extends(b,m),b.prototype.didMount=function(){this.onItemViewMounted()},b.prototype.willUnmount=function(){this.onItemViewUnmounted()},b.prototype.template=function(){var e=this;return a.createElement("div",{class:function(){return{"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-no-faded-h":e.isRightFocused(),"dcg-no-faded-v":e.isBottomFocused()}},"expr-id":function(){return e.model.id},didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},a.createElement("div",{class:a.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},a.createElement("div",{class:a.const("dcg-main")},a.createElement("div",{class:a.const("dcg-table-container"),tabindex:function(){return e.controller.isInEditListMode()?0:-1},"aria-label":function(){return e.controller.getBrailleMode(),e.controller.s("graphing-calculator-narration-expression-index-table",{index:e.model.displayIndex})},didMount:this.bindFn(this.didMountContainer),manageFocus:this.const({shouldBeFocused:this.shouldBeFocused.bind(this),onFocusedChanged:this.onFocusedChanged.bind(this)})},a.createElement("div",{class:a.const("dcg-table-sliding-container"),style:function(){return{transform:"translateX("+e.computeScrolledX()+"px)"}}},a.createElement(y,{each:function(){return e.getVisibleRowModels()},key:function(t){return"blank-row"===t.type?"blank-row-"+t.guid+"-"+t.rows+"-"+e.getCols():t.guid}},a.createElement("div",{role:a.const("grid"),class:function(){return{"dcg-tabledata":!0,"dcg-focus-in-bottom-row":e.isBottomFocused(),"dcg-focus-in-right-column":e.isRightFocused()}}},(function(t){return"show-more"===t.type?a.createElement("tr",{role:a.const("row"),class:a.const("dcg-show-more-row")},a.createElement("td",{colspan:e.bindFn(e.getCols)},e.bindFn(e.missingRowMessage),a.createElement("div",{tabindex:a.const(0),role:a.const("button"),class:a.const("dcg-show-more"),onTap:function(){return e.controller.dispatch({type:"table-show-more-rows",id:e.id})}},(function(){return e.controller.s("graphing-calculator-button-show-all-table-rows")})))):"blank-row"===t.type?a.createElement("tr",{role:a.const("row"),class:a.const("dcg-blank-row")},a.createElement("td",{colspan:e.bindFn(e.getCols),style:function(){return{height:t.rows*e.getRowHeight()+"px"}}})):a.createElement(y,{each:function(){return t.cells},key:function(e){return e.guid}},a.createElement("tr",{role:a.const("row"),"aria-rowindex":function(){return t.index},class:function(){return{"dcg-row":t,"dcg-braille-row":"none"!==e.controller.getBrailleMode()}}},(function(t){return"header"===t.type?a.createElement(s.default,{controller:e.props.controller,model:e.const(t)}):a.createElement(l.default,{controller:e.props.controller,model:e.const(t)})})))})))))),a.createElement("i",{class:a.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:a.const("true"),onTap:this.bindFn(this.onDelete)})),a.createElement("span",{class:a.const("dcg-tab dcg-action-drag"),handleevent:a.const("true"),tapboundary:a.const("true"),disablescroll:a.const("true"),style:a.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},a.createElement("span",{class:a.const("dcg-num")},(function(){return e.model.displayIndex})),a.createElement("div",{class:a.const("dcg-tab-interior")}),a.createElement(g.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),a.createElement(p.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},b.prototype.getCols=function(){return this.model.rowModels[0].cells.length-1},b.prototype.getRowHeight=function(){return this.controller.getGraphSettings().config.projectorMode?38:33},b.prototype.getVisibleRowModels=function(){var e=this.model.rowModels;if(e.length<=25)return e;var t=c.getCollapsedRange(this.model);if(void 0!==t)return e.slice(0,t.min).concat({type:"show-more",guid:"show-more"}).concat(e.slice(t.max));var r=h.getExppanelRect(this.controller),n=r?r.height:0,i=d(this.node).offset(),o=(i?i.top:0)-(r?r.top:0),a=d(this.node).find(".dcg-row:eq(0)").height(),s=this.getRowHeight();if(n/s>e.length)return e;for(var l=[],u=(-o-a)/s,p=(n-o)/s,g=0;g<e.length;g++){var f,m=c.getSelectedCell(this.model);0===g||g===e.length-2||m&&m.row===g||!(p<g||g<u)?l.push(e[g]):(f=l[l.length-1])&&"blank-row"===f.type?f.rows++:l.push({type:"blank-row",guid:e[g].guid,rows:1})}return l},b.prototype.missingRowMessage=function(){var e=c.getCollapsedRange(this.model);return void 0===e?"":this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:e.max-e.min})},b.prototype.didMountContainer=function(e){this.node=e,d(e).on("scroll",(function(){return e.scrollLeft=0}))},b.prototype.getSelectedCell=function(){return c.getSelectedCell(this.model)},b.prototype.computeScrolledX=function(){if(!this.getSelectedCell()||!this.node)return 0;var e=this.node.children[0],t=this.node.querySelector(".dcg-selected");if(null===e||null===t)return 0;var r=this.node.getBoundingClientRect(),n=t.getBoundingClientRect(),i=n.left-e.getBoundingClientRect().left,o=r.width-i-n.width-80,a=Math.min(0,r.width-e.scrollWidth-30);return o=Math.max(o,a),Math.min(0,o)},b.prototype.isBottomFocused=function(){var e=this.getSelectedCell();return!!e&&e.row===this.model.columnModels[0].cells.length},b.prototype.isRightFocused=function(){var e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1},b.prototype.isFocused=function(){return!!this.getSelectedCell()},b.prototype.onKeydown=function(e){this.controller.isInEditListMode()||!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||("Up"===n.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInColumn()):"Down"===n.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInColumn()):"Left"===n.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInRow()):"Right"===n.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInRow()):"H"===n.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),this.speakColumnHeader()))},b.prototype.moveToFirstCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:e.column}}})},b.prototype.moveToLastCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:this.model.rowModels.length-1,column:e.column}}})},b.prototype.moveToFirstCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:0}}})},b.prototype.moveToLastCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:this.model.columnModels[0].cells.length-1}}})},b.prototype.speakColumnHeader=function(){var e,t=this.controller.s("graphing-calculator-narration-table-no-column-header"),r=this.getSelectedCell();!r||(e=this.model.rowModels[0].cells[r.column])&&"header"===e.type&&e.latex&&""!==e.latex&&(t=u.MQ.StaticMath(d("<span>"+e.latex+"</span>")[0]).mathspeak()),i.alert(t)},b.prototype.focusHelperOptions=function(){return{controller:this.controller,location:{type:"table-container",id:this.model.id}}},b.prototype.shouldBeFocused=function(){return f.defaultShouldBeFocused(this.focusHelperOptions())},b.prototype.onFocusedChanged=function(e){if(this.controller.isInEditListMode())return f.defaultOnFocusChanged(this.focusHelperOptions(),e)},b);function b(){return null!==m&&m.apply(this,arguments)||this}t.default=v})),i("loadcss!expressions/folder-view",(function(){})),i("expressions/folder-view",["require","exports","tslib","browser","keys","lib/aria","./expression-edit-actions","./abstract-item-view","./smart_textarea","dcgview","./circular-icon-view","jquery.handleevent","loadcss!./folder-view"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,p=(d=s.default,r.__extends(h,d),h.prototype.didMount=function(){this.onItemViewMounted()},h.prototype.willUnmount=function(){this.onItemViewUnmounted()},h.prototype.template=function(){var e=this;return c.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-collapsed":!!e.model.collapsed,"dcg-hidden":!!e.model.hidden,"dcg-has-items":0<e.controller.getNumberOfItemsInFolder(e.id),"dcg-secretFolder":e.model.secret&&!e.controller.canAdministerSecretFolders()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},c.createElement("div",{class:c.const("dcg-fade-container")},c.createElement("div",{class:c.const("dcg-main")},c.createElement("div",{role:c.const("button"),tabindex:c.const("0"),"aria-pressed":function(){return e.model.collapsed},"aria-label":function(){return e.controller.s("graphing-calculator-narration-collapse-folder")},class:c.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:c.const("true"),onTap:this.bindFn(this.toggleCollapsed)},c.createElement("i",{class:c.const("dcg-icon-caret-down")})),c.createElement(l.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.title},placeholder:function(){return e.controller.s("graphing-calculator-text-note-placeholder")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:function(){return e.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)}),c.createElement("div",{role:c.const("checkbox"),"aria-checked":function(){return e.model.secret},"aria-label":function(){return e.controller.s("graphing-calculator-button-hide-folder-from-students")},class:function(){return{"dcg-action-toggle-secret-folder":!0,"dcg-do-not-blur":!0,"dcg-checked":e.model.secret}},style:function(){return{display:e.controller.canAdministerSecretFolders()?void 0:"none"}},handleEvent:c.const("true"),onTap:this.bindFn(this.toggleSecret)},c.createElement("span",{class:c.const("dcg-checkbox-box")},c.createElement("i",{class:c.const("dcg-icon-check")})),c.createElement("span",{class:c.const("dcg-checkbox-label")},(function(){return e.controller.s("graphing-calculator-button-hide-folder-from-students-2")})))),c.createElement("i",{class:c.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:c.const("true"),onTap:this.bindFn(this.onDelete)})),c.createElement("span",{class:c.const("dcg-tab dcg-action-drag"),handleevent:c.const("true"),tapboundary:c.const("true"),disablescroll:c.const("true"),style:c.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},c.createElement("span",{class:c.const("dcg-num")},(function(){return e.model.displayIndex})),c.createElement("div",{class:c.const("dcg-tab-interior")},c.createElement("span",{role:c.const("button"),tabindex:c.const("0"),"aria-pressed":function(){return!!e.model.hidden},"aria-label":function(){return e.controller.s("graphing-calculator-narration-hide-folder")},class:c.const("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden)},c.createElement(u.CircularIconView,{iconType:function(){return e.model.hidden?"hidden":"folder"},whiteIcon:function(){return e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)}})))),c.createElement(a.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},h.prototype.toggleHidden=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})},h.prototype.toggleSecret=function(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})},h.prototype.toggleCollapsed=function(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})},h.prototype.onInput=function(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})},h.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})},h.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},h.prototype.onKeydown=function(e){var t=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,r=e.metaKey&&!e.altKey&&!e.shiftKey&&!e.ctrlKey;(n.IS_APPLE?r:t)&&i.lookup(e)===i.UP&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed}),this.model.collapsed?o.alert(this.controller.s("graphing-calculator-narration-folder-collapsed")):o.alert(this.controller.s("graphing-calculator-narration-folder-expanded")))},h.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"folder"!==e.type||e.id!==this.id)},h.prototype.getAriaLabel=function(){var e="";this.model.hidden||this.model.collapsed||this.model.secret?!this.model.hidden||this.model.collapsed||this.model.secret?this.model.hidden||!this.model.collapsed||this.model.secret?this.model.hidden||this.model.collapsed||!this.model.secret?this.model.hidden&&this.model.collapsed&&!this.model.secret?e=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-folder"):this.model.hidden&&!this.model.collapsed&&this.model.secret?e=this.controller.s("graphing-calculator-narration-description-hidden-secret-folder"):!this.model.hidden&&this.model.collapsed&&this.model.secret?e=this.controller.s("graphing-calculator-narration-description-collapsed-secret-folder"):this.model.hidden&&this.model.collapsed&&this.model.secret&&(e=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-folder")):e=this.controller.s("graphing-calculator-narration-description-secret-folder"):e=this.controller.s("graphing-calculator-narration-description-collapsed-folder"):e=this.controller.s("graphing-calculator-narration-description-hidden-folder"):e=this.controller.s("graphing-calculator-narration-description-folder");var t=this.controller.getNumberOfItemsInFolder(this.id);return 0<t?this.controller.s("graphing-calculator-narration-folder-has-items",{folder:e,count:t}):e},h);function h(){return null!==d&&d.apply(this,arguments)||this}t.default=p})),i("lib/coerce-url",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coerceURL=void 0,t.coerceURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),i("loadcss!expressions/image-icon-view",(function(){})),i("expressions/image-icon-view",["require","exports","tslib","lib/coerce-url","dcgview","main/manage-focus-helper","../dcgview-helpers/tooltipped-error","./circular-icon-view","jquery.handleevent","loadcss!./image-icon-view"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=i.Components.SwitchUnion,u=(l=i.Class,r.__extends(d,l),d.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},d.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-expression-icon-container dcg-image-icon-container")},c(this.bindFn(this.typeOfIcon),{error:function(){return i.createElement(a.TooltippedError,{error:function(){return e.controller.unpack(e.model.error)},isWhite:e.bindFn(e.isSelected),gravity:e.const("se")})},failed:function(){return i.createElement("span",null)},loading:function(){return i.createElement(s.CircularIconView,{iconType:e.const("loading")})},hidden:function(){return e.buildIconView()},image:function(){return e.buildIconView()}}))},d.prototype.buildIconView=function(){var e=this;return i.createElement("div",{class:i.const("dcg-circular-icon-container"),role:i.const("button"),tabindex:i.const("0"),"model-id":function(){return e.model.id},"aria-label":this.bindFn(this.getIconAriaLabel),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()||e.controller.isInEditListMode()?e.toggleOptions(t):void e.toggleImageShown()},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.toggleOptions(t)},manageFocus:this.const(o.manageFocusHelper({controller:this.controller,location:{type:"image-icon",id:this.model.id}}))},i.createElement(s.CircularIconView,{iconType:function(){return"hidden"===e.typeOfIcon()?"hidden":"background"},backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}))},d.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},d.prototype.typeOfIcon=function(){return"loading"===this.model.loadStatus?"loading":"failed"===this.model.loadStatus?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"},d.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},d.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,focusFirstOption:"keyboard"===e.device}})},d.prototype.hasError=function(){return!!this.model.error&&"none"===this.controller.getBrailleMode()},d.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL||(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+n.coerceURL(this.model.image_url)+'")'),this.lastEncodedURL},d.prototype.toggleImageShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})},d.prototype.getIconAriaLabel=function(){return this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.isInEditListMode()?this.controller.s("graphing-calculator-narration-show-options"):this.model.hidden?this.controller.s("graphing-calculator-narration-show-image"):this.controller.s("graphing-calculator-narration-hide-image")},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("expressions/image-upload-view",["require","exports","tslib","dcgview","jquery","main/manage-focus-helper"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageUploadView=void 0;var a,s=(a=n.Class,r.__extends(l,a),l.prototype.init=function(){this.controller=this.props.controller()},l.prototype.template=function(){return n.createElement("div",{class:n.const("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:n.const("true"),role:n.const("button"),tabindex:n.const(0),"aria-label":this.props.ariaLabel,manageFocus:this.const(this.props.location?o.manageFocusHelper({controller:this.controller,location:this.props.location()}):void 0)},this.children,n.createElement("input",{type:n.const("file"),accept:n.const("image/*"),style:n.const("display: none"),didMount:this.bindFn(this.didMountFileInput)}))},l.prototype.didMountFileInput=function(e){var t=this;this.fileInputNode=e,i(e).on("change",(function(){t.props.onFileChange(e.files),i(e).val("")}))},l.prototype.newImage=function(){this.fileInputNode.click()},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.ImageUploadView=s})),i("loadcss!expressions/clickable_image_info_view",(function(){})),i("expressions/clickable_image_info_view",["require","exports","tslib","dcgview","./circular-icon-view","../lib/tooltip","./image-upload-view","./clickable_info_view","loadcss!./clickable_image_info_view"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableImageInfoView=void 0;var l,c=n.Components.Switch,u=(l=n.Class,r.__extends(d,l),d.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},d.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-do-blur dcg-indent-in-folder"),tapboundary:n.const("true"),handleEvent:n.const("true")},n.createElement(s.ClickableInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}}),n.createElement("div",{class:n.const("dcg-clickable-image-info-view"),role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-clickable-image-options")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-clickable-image-label")},n.const("Hovered:")),n.createElement(o.Tooltip,{tooltip:function(){return e.tooltip("hovered")},gravity:this.const("s")},n.createElement(a.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.tooltip("hovered")},onFileChange:function(t){return e.updateImage("hovered",t)}},n.createElement(c,{key:this.bindFn(this.hoveredStatus)},(function(){return n.createElement(i.CircularIconView,{iconType:e.bindFn(e.hoveredStatus),backgroundImage:e.const("background"===e.hoveredStatus()?"url("+e.model.clickableInfo.hoveredImage+")":"")})})))),n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-clickable-image-label")},n.const("Depressed:")),n.createElement(o.Tooltip,{tooltip:function(){return e.tooltip("depressed")},gravity:this.const("s")},n.createElement(a.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.tooltip("depressed")},onFileChange:function(t){return e.updateImage("depressed",t)}},n.createElement(c,{key:this.bindFn(this.depressedStatus)},(function(){return n.createElement(i.CircularIconView,{iconType:function(){return e.depressedStatus()},backgroundImage:e.const("background"===e.depressedStatus()?"url("+e.model.clickableInfo.depressedImage+")":"")})}))))))},d.prototype.hoveredStatus=function(){return this.hoveredUploading?"loading":this.model.clickableInfo.hoveredImage?"background":"hidden"},d.prototype.depressedStatus=function(){return this.depressedUploading?"loading":this.model.clickableInfo.depressedImage?"background":"hidden"},d.prototype.tooltip=function(e){return("hovered"===e?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?"depressed"===e?this.controller.s("graphing-calculator-label-change-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-change-hovered-image-tooltip"):"depressed"===e?this.controller.s("graphing-calculator-label-add-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-add-hovered-image-tooltip")},d.prototype.updateImage=function(e,t){var r,n=this;t&&t[0]&&(r=t[0],"hovered"===e&&(this.hoveredUploading=!0),"depressed"===e&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(r,(function(t,r){"hovered"===e&&(n.hoveredUploading=!1),"depressed"===e&&(n.depressedUploading=!1),!t&&r&&("hovered"===e?n.controller.dispatch({type:"set-hovered-image",id:n.model.id,url:r}):n.controller.dispatch({type:"set-depressed-image",id:n.model.id,url:r}))})))},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.ClickableImageInfoView=u})),i("loadcss!expressions/image-view",(function(){})),i("expressions/image-view",["require","exports","tslib","keys","jquery","underscore","./abstract-item-view","./smart_textarea","dcgview","dcgview-helpers/mathquill-view","lib/conditional_blur","expressions/promptslider_view","./image-icon-view","./clickable_image_info_view","main/mathquill-operators","graphing-calc/models/image","./expression-edit-actions","../dcgview-helpers/mathquill-braille-wrapper","jquery.handleevent","loadcss!./image-view"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v,b=l.Components,x=b.If,w=b.SwitchUnion,S=(v=l.Class,r.__extends(E,v),E.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},E.prototype.template=function(){var e=this;return l.createElement("div",{class:function(){return{"dcg-image-input-mathquill":!0,"dcg-suffix-degree":"angle"===e.props.name()&&e.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":"angle"===e.props.name()&&!e.props.controller().getGraphSettings().degreeMode}}},l.createElement(y.default,{latex:function(){return e.model[e.props.name()]},controller:this.props.controller,brailleShouldFocus:function(){return e.props.focusedInput()===e.props.name()},selectOnFocus:this.const(!0),onBrailleInput:this.bindFn(this.handleLatexChanged),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged),onBrailleKeydown:this.bindFn(this.handleBrailleKeydown),hasError:function(){return f.hasInputError(e.model,e.props.name())},ariaLabel:function(){return e.controller.raw(e.props.name())}},l.createElement(c.default,{latex:function(){return e.model[e.props.name()]},isFocused:function(){return e.props.focusedInput()===e.props.name()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return e.controller.raw(e.props.name())},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,r){return e.handlePressedKey(t,r)},onUserChangedLatex:this.bindFn(this.handleLatexChanged),onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},l.createElement("span",{class:function(){return{"dcg-focus":e.props.focusedInput()===e.props.name(),"dcg-invalid":f.hasInputError(e.model,e.props.name())}}}))))},E.prototype.getInputs=function(){return["center","width","angle","height","opacity"]},E.prototype.handlePressedKey=function(e,t){var r=this.props.name(),n=c.default.getFocusedMathquill(),o=this.getInputs(),a=o.indexOf(r);if(!this.controller.isInEditListMode()){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});if("Esc"===e)return void u.default()}var s,l="Right"===e?a+1:"Left"===e?a-1:"Down"===e?4===a?1:a+2:"Up"===e?1===a?4:a-2:-1;0<=l&&l<o.length?(n?c.default.applyArrowKeyAndReturnIfWasAtBounds(n,e,t):"Up"===e||"Down"===e||(s=y.getFocusedBrailleElement())&&("Left"===e&&0===s.selectionStart||"Right"===e&&s.selectionStart===i(s).val().length))&&(this.focusInput(o[l]),t&&t.preventDefault()):n&&(n.keystroke(e,t),this.handleLatexChanged(n.latex()))},E.prototype.handleBrailleKeydown=function(e){var t=n.lookup(e);t&&this.handlePressedKey(t,i.Event(e))},E.prototype.focusInput=function(e){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:e}})},E.prototype.anyInputHasError=function(){var e=this;return o.any(this.getInputs(),(function(t){return f.hasInputError(e.model,t)}))},E.prototype.handleLatexChanged=function(e){var t=this.props.name();this.model.draggingOnGraphpaper||f.getMQAttribute(this.model,t)!==e&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:t,latex:e})},E.prototype.handleMQFocusedChanged=function(e){var t=this.props.name();e?this.props.focusedInput()!==t&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:t}})},E.prototype.getMQConfig=function(){return{autoOperatorNames:g.getAutoOperators()}},E);function E(){return null!==v&&v.apply(this,arguments)||this}var _,k=(_=a.default,r.__extends(M,_),M.prototype.didMount=function(){this.onItemViewMounted()},M.prototype.willUnmount=function(){this.onItemViewUnmounted()},M.prototype.template=function(){var e=this;return l.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionimage":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-input-focused":e.getFocusedInput()&&"name"!==e.getFocusedInput()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},l.createElement("div",{class:l.const("dcg-fade-container")},l.createElement("div",{class:l.const("dcg-main")},w((function(){return e.model.loadStatus}),{failed:function(){return l.createElement("div",null,l.createElement("div",{class:l.const("dcg-image-failed")},(function(){return e.controller.s("graphing-calculator-error-failed-to-load-image")})),l.createElement("div",{role:l.const("button"),tabindex:l.const(0),class:l.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},(function(){return e.controller.s("graphing-calculator-button-load-image-retry")})))},loading:function(){return l.createElement("div",null,l.createElement("div",{class:l.const("dcg-image-loading")},(function(){return e.controller.s("graphing-calculator-text-loading-image")})),l.createElement("div",{role:l.const("button"),tabindex:l.const(0),class:l.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},(function(){return e.controller.s("graphing-calculator-button-load-image-retry")})))},loaded:function(){return l.createElement("div",{class:l.const("dcg-image-loaded")},l.createElement(s.default,{shouldFocus:function(){return"name"===e.getFocusedInput()},text:function(){return e.model.name},placeholder:function(){return e.controller.s("graphing-calculator-text-image-enter-note-placeholder")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:e.bindFn(e.onNameInput),onFocusChange:e.bindFn(e.onNameFocusChange),onSpecialKey:e.bindFn(e.onNameSpecialKey),readonly:e.const(!1)}),l.createElement("div",{class:function(){return{"dcg-do-blur":!0,"dcg-image-input-grid":!0}},handleEvent:l.const("true")},l.createElement("div",{class:l.const("dcg-image-input-name")},(function(){return e.controller.s("graphing-calculator-label-image-center")})),l.createElement(S,{name:e.const("center"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),l.createElement("div",{class:l.const("dcg-image-input-name")},(function(){return e.controller.s("graphing-calculator-label-image-width")})),l.createElement(S,{name:e.const("width"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),l.createElement("div",{class:l.const("dcg-image-input-name")},(function(){return e.controller.s("graphing-calculator-label-image-angle")})),l.createElement(S,{name:e.const("angle"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),l.createElement("div",{class:l.const("dcg-image-input-name")},(function(){return e.controller.s("graphing-calculator-label-image-height")})),l.createElement(S,{name:e.const("height"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),l.createElement("div",{class:l.const("dcg-image-input-name")},(function(){return e.controller.s("graphing-calculator-label-image-opacity")})),l.createElement(S,{name:e.const("opacity"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)})))}})),l.createElement("span",{class:l.const("dcg-fadeout")}),l.createElement("i",{class:l.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:l.const("true"),onTap:this.bindFn(this.onDelete)}),l.createElement(x,{predicate:function(){return e.shouldShowClickableProperties()}},(function(){return l.createElement(h.ClickableImageInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}})})),l.createElement(x,{predicate:this.bindFn(this.shouldShowBrailleError)},(function(){return l.createElement("div",{class:e.getFooterClass()},l.createElement("div",{tabindex:l.const(0),class:l.const("dcg-expression-braille-error"),"aria-roledescription":l.const("error"),"aria-label":function(){return e.controller.unpack(e.model.error)}},l.createElement("i",{class:l.const("dcg-icon-error")}),(function(){return e.controller.unpack(e.model.error)})))})),l.createElement(x,{predicate:function(){return 0<f.getMissingVariables(e.model).length&&e.controller.areSlidersEnabled()}},(function(){return l.createElement("div",{class:e.getFooterClass()},l.createElement(d.default,{model:e.props.model,controller:e.props.controller}))}))),l.createElement("span",{class:l.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:l.const("true"),tapboundary:l.const("true"),disablescroll:l.const("true"),style:l.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},l.createElement("span",{class:l.const("dcg-num")},(function(){return e.model.displayIndex})),l.createElement("div",{class:l.const("dcg-tab-interior dcg-action-icon-mouse")},l.createElement(p.default,{model:this.props.model,controller:this.props.controller}))),l.createElement(m.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},M.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")},M.prototype.onNameInput=function(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})},M.prototype.onNameFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):"name"===this.getFocusedInput()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})},M.prototype.onNameSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},M.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"image"===e.type&&e.id===this.model.id)return e.location},M.prototype.onRetryLoad=function(){this.controller.dispatch({type:"image-retry-loading",id:this.id})},M.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&this.model.clickableInfo.enabled},M.prototype.shouldShowBrailleError=function(){return"none"!==this.controller.getBrailleMode()&&!!this.model.error},M.prototype.onMouseSelect=function(e){"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},M);function M(){return null!==_&&_.apply(this,arguments)||this}t.default=k})),i("expressions/shell_view",["require","exports","tslib","dcgview","./abstract-item-view"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=i.default,r.__extends(s,o),s.prototype.didMount=function(){this.onItemViewMounted()},s.prototype.willUnmount=function(){this.onItemViewUnmounted()},s.prototype.template=function(){var e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),n.createElement("div",{class:n.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:n.const(e)})},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=a})),i("expressions/drag_container_view",["require","exports","tslib","dcgview"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.init=function(){this.controller=this.props.controller()},a.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-drag-container"),style:function(){return{top:e.getTopPx()}}},this.children)},a.prototype.getTopPx=function(){var e=this.controller.getRawDragState();if(e)return e.itemTop+"px"},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("vendor/papaparse",["require","jquery"],(function(e){"use strict";var t=e("jquery"),r={};function n(e){(e=e||{}).chunkSize||(e.chunkSize=r.RemoteChunkSize);var t,n,i=0,a="",c="",u=new o(s(e));this.stream=function(r){function o(){if(4==t.readyState)if(t.status<200||400<=t.status)s();else{a+=c+t.responseText,c="";var r,o=!e.step||i>(r=t.getResponseHeader("Content-Range"),parseInt(r.substr(r.lastIndexOf("/")+1)));if(!o){var d=a.lastIndexOf("\n");if(d<0&&(d=a.lastIndexOf("\r")),!(-1<d))return void n();c=a.substring(d+1),a=a.substring(0,d)}var p=u.parse(a);a="",l(e.chunk)&&(e.chunk(p),p=void 0),o||p.meta.paused||n()}}function s(){l(e.error)&&e.error(t.statusText)}(n=function(){!function(){var n;(t=new XMLHttpRequest).onload=o,t.onerror=s,t.open("GET",r,!0),e.step&&(n=i+e.chunkSize-1,t.setRequestHeader("Range","bytes="+i+"-"+n)),t.send(),i+=e.chunkSize}()})()}}function i(e){(e=e||{}).chunkSize||(e.chunkSize=r.LocalChunkSize);var t,n=0,i="",a="",c=new o(s(e)),u="function"==typeof FileReader;this.stream=function(r){var o=r.slice||r.webkitSlice||r.mozSlice;function s(){var i,a;n<r.size&&(i=Math.min(n+e.chunkSize,r.size),a=t.readAsText(o.call(r,n,i),e.encoding),u||d({target:{result:a}}))}function d(t){n+=e.chunkSize,i+=a+t.target.result,a="";var o=n>=r.size;if(!o){var u=i.lastIndexOf("\n");if(u<0&&(u=i.lastIndexOf("\r")),!(-1<u))return void s();a=i.substring(u+1),i=i.substring(0,u)}var d=c.parse(i);i="",l(e.chunk)&&(e.chunk(d,r),d=void 0),o||d.meta.paused||s()}u?((t=new FileReader).onload=d,t.onerror=function(){l(e.error)&&e.error(t.error,r)}):t=new FileReaderSync,s()}}function o(e){var t,n,i,o=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,c=this,u=!1,d=[],p={data:[],errors:[],meta:{}};function h(){return p&&i&&(f("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),i=!1),g()&&function(){if(p){for(var e=0;g()&&e<p.data.length;e++)for(var t=0;t<p.data[e].length;t++)d.push(p.data[e][t]);p.data.splice(0,1)}}(),function(){if(!p||!e.header&&!e.dynamicTyping)return p;for(var t=0;t<p.data.length;t++){for(var r,n={},i=0;i<p.data[t].length;i++)e.dynamicTyping&&(r=p.data[t][i],p.data[t][i]="true"==r||"false"!=r&&function(e){return o.test(e)?parseFloat(e):e}(r)),e.header&&(i>=d.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(p.data[t][i])):n[d[i]]=p.data[t][i]);e.header&&(p.data[t]=n,i>d.length?f("FieldMismatch","TooManyFields","Too many fields: expected "+d.length+" fields but parsed "+i,t):i<d.length&&f("FieldMismatch","TooFewFields","Too few fields: expected "+d.length+" fields but parsed "+i,t))}return e.header&&p.meta&&(p.meta.fields=d),p}()}function g(){return e.header&&0==d.length}function f(e,t,r,n){p.errors.push({type:e,code:t,message:r,row:n})}e=s(e),this.parse=function(o){var s,d;return i=!1,e.delimiter||((s=function(t){for(var n,i,o,s=[",","\t","|",";",r.RECORD_SEP,r.UNIT_SEP],l=0;l<s.length;l++){var c=s[l],u=0,d=0;o=void 0;for(var p=new a({delimiter:c,preview:10}).parse(t),h=0;h<p.data.length;h++){var g=p.data[h].length;d+=g,void 0!==o?1<g&&(u+=Math.abs(g-o),o=g):o=g}d/=p.data.length,(void 0===i||u<i)&&1.99<d&&(i=u,n=c)}return{successful:!!(e.delimiter=n),bestDelimiter:n}}(o)).successful?e.delimiter=s.bestDelimiter:(i=!0,e.delimiter=r.DefaultDelimiter),p.meta.delimiter=e.delimiter),l(e.step)&&(d=e.step,e.step=function(e){p=e,g()?h():d(h(),c)}),e.preview&&e.header&&e.preview++,t=o,n=new a(e),p=n.parse(t),h(),l(e.complete)&&!u&&e.complete(p),u?{meta:{paused:!0}}:p},this.pause=function(){u=!0,n.abort(),t=t.substr(n.getCharIndex())},this.resume=function(){u=!1,(n=new a(e)).parse(t),l(e.complete)&&!u&&e.complete(p)},this.abort=function(){n.abort(),l(e.complete)&&e.complete(p),t=""}}function a(e){var t,n,i,o,a,s,c,u,d,p,h,g,f,m,y=/^\s*$/,v=!1;function b(){s=t[++c]}function x(){p[g][f]+=s}function w(){p[g].push(""),f=p[g].length-1}function S(){E(),d++,m++,p.push([]),g=p.length-1,w()}function E(){1==p[g].length&&y.test(p[g][0])&&(e.keepEmptyRows?p[g].splice(0,1):p.splice(g,1),g=p.length-1),l(o)&&(p[g]&&o(T()),P())}function _(e){return e<t.length-1&&("\r"==t[e]&&"\n"==t[e+1]||"\n"==t[e]&&"\r"==t[e+1])}function k(e){return"\r"==t[e]||"\n"==t[e]}function M(){return!I()&&c<t.length-1&&'"'==t[c+1]}function I(){return!u&&C(c-1)||C(c+1)}function C(e){"number"!=typeof e&&(e=c);var r=t[e];return e<=-1||e>=t.length||r==n||"\r"==r||"\n"==r}function L(e,t,r){h.push({type:e,code:t,message:r,line:d,row:g,index:c})}function P(){p=[],h=[],f=g=0}function T(){return{data:p,errors:h,meta:{lines:d,delimiter:n,aborted:v,truncated:0<a&&c<t.length}}}n=(e=e||{}).delimiter,i=e.comments,o=e.step,a=e.preview,("string"!=typeof n||1!=n.length||-1<r.BAD_DELIMITERS.indexOf(n))&&(n=","),!0===i?i="#":("string"!=typeof i||1!=i.length||-1<r.BAD_DELIMITERS.indexOf(i)||i==n)&&(i=!1),this.parse=function(e){if("string"!=typeof e)throw"Input must be a string";return u=!1,m=c=0,d=1,P(),p=[[""]],s=(t=e)[c],function(){for(;c<t.length&&!v&&!(0<a&&a<=m);)'"'==s?I()&&!M()?u=!u:(x(),u&&M()?c++:L("Quotes","UnexpectedQuotes","Unexpected quotes")):u?((_(c)||k(c))&&d++,x()):s==n?w():_(c)?(S(),b()):(k(c)?S:i&&(0==c||k(c-1)||_(c-2))&&t[c]===i?function(){for(;!_(c)&&!k(c)&&c<t.length;)b()}:x)(),b();return function(){if(v&&L("Abort","ParseAbort","Parsing was aborted by the user's step function"),u&&L("Quotes","MissingQuotes","Unescaped or mismatched quotes"),E(),!l(o))return T()}()}()},this.abort=function(){v=!0},this.getCharIndex=function(){return c}}function s(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var r in e)t[r]=s(e[r]);return t}function l(e){return"function"==typeof e}return r.parse=function(e,t){var a=function(e){"object"!=typeof e&&(e={});var t=s(e);return("string"!=typeof t.delimiter||1!=t.delimiter.length||-1<r.BAD_DELIMITERS.indexOf(t.delimiter))&&(t.delimiter=""),"boolean"!=typeof t.header&&(t.header=!1),"boolean"!=typeof t.dynamicTyping&&(t.dynamicTyping=!1),"number"!=typeof t.preview&&(t.preview=0),"function"!=typeof t.step&&(t.step=void 0),"function"!=typeof t.complete&&(t.complete=void 0),"function"!=typeof t.error&&(t.error=void 0),"string"!=typeof t.encoding&&(t.encoding=""),"boolean"!=typeof t.download&&(t.download=!1),"boolean"!=typeof t.keepEmptyRows&&(t.keepEmptyRows=!1),t}(t);if("string"==typeof e){if(!a.download)return new o(a).parse(e);new n(a).stream(e)}else e instanceof File&&(a.step||a.chunk?new i(a).stream(e):(new o(a),reader=new FileReader,reader.onload=function(e){new o(a).parse(e.target.result)},reader.onerror=function(){l(a.error)&&a.error(reader.error,e)},reader.readAsText(e,a.encoding)))},r.unparse=function(e,t){var n=!1,i=",",o="\r\n";if("object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==r.BAD_DELIMITERS.indexOf(t.delimiter)&&(i=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(n=t.quotes),"string"==typeof t.newline&&(o=t.newline)),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return s(null,e);if("object"==typeof e[0])return s(a(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:a(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),s(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input";function a(e){if("object"!=typeof e)return[];var t=[];for(var r in e)t.push(r);return t}function s(e,t){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=e instanceof Array&&0<e.length,a=!(t[0]instanceof Array);if(n){for(var s=0;s<e.length;s++)0<s&&(r+=i),r+=l(e[s],s);0<t.length&&(r+=o)}for(var c=0;c<t.length;c++){for(var u=n?e.length:t[c].length,d=0;d<u;d++){0<d&&(r+=i);var p=n&&a?e[d]:d;r+=l(t[c][p],d)}c<t.length-1&&(r+=o)}return r}function l(e,t){return null==e?"":(e=e.toString().replace(/"/g,'""'),"boolean"==typeof n&&n||n instanceof Array&&n[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(e,r.BAD_DELIMITERS)||-1<e.indexOf(i)||" "==e.charAt(0)||" "==e.charAt(e.length-1)?'"'+e+'"':e)}},r.RECORD_SEP=String.fromCharCode(30),r.UNIT_SEP=String.fromCharCode(31),r.BYTE_ORDER_MARK="\ufeff",r.BAD_DELIMITERS=["\r","\n",'"',r.BYTE_ORDER_MARK],r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=a,r.ParserHandle=o,r.NetworkStreamer=n,r.FileStreamer=i,t.fn.parse=function(e){var n=e.config||{},i=[];return this.each((function(e){if("INPUT"!=t(this).prop("tagName").toUpperCase()||"file"!=t(this).attr("type").toLowerCase()||!window.FileReader||!this.files||0==this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:t.extend({},n)})})),o(),this;function o(){if(0!=i.length){var n,o,s,c=i[0];if(l(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"==u.action)return n=c.file,o=c.inputElem,s=u.reason,void(l(e.error)&&e.error({name:"AbortError"},n,o,s));if("skip"==u.action)return void a();"object"==typeof u.config&&(c.instanceConfig=t.extend(c.instanceConfig,u.config))}else if("skip"==u)return void a()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){l(d)&&d(e,c.file,c.inputElem),a()},r.parse(c.file,c.instanceConfig)}}function a(){i.splice(0,1),o()}},r})),i("geometry/math/isNumber",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=void 0,t.isNumber=function(e){var t;if("number"==typeof e)t=e+"";else{if("string"!=typeof e)return!1;t=e}return t.trim().match(/^-?[0-9]*\.?[0-9]*$/)}})),i("main/data_helpers",["require","exports","vendor/papaparse","underscore","bugsnag","geometry/math/isNumber"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.getExpressions=void 0,t.getExpressions=function(e){var t=e.split(/\r?\n/),r=[],i=!1;if(!(t.length<2)){for(var a=0;a<t.length;a++){var s,l=t[a];l.trim()&&(0<a&&!o.isNumber(l.replace(/,(\d{3})/g,"$1"))&&(i=!0),s={content:l},r.push(s))}if(i)return r;var c=n.pluck(r,"content").map((function(e){return e.replace(/,(\d{3})/g,"$1")}));return o.isNumber(c[0])||(c=c.slice(1)),[{content:"\\left["+c.join(",")+"\\right]",numberList:!0}]}},t.parse=function(e){if(!/^\s*$/.test(e)){var t=r.parse(e,{preview:1e3}),n=[];if(!t.errors.length||t.data.length){if(t.data.length&&!(t.data.length<2)){for(var o=t.data[0].length,a=0;a<o;a++)n.push([]);for(var s=0;s<t.data.length;s++)if(0!==s||!isNaN(parseFloat(t.data[s][0]))){if(t.data[s].length<2)return;if(t.data[s][0]||t.data[s][1])for(a=0;a<o;a++){var l=(t.data[s][a]||"").replace(/,(\d{3})/g,"$1");if(l&&isNaN(parseFloat(l)))return;n[a].push(l)}}if(!(n[0].length<2))return n}}else i.notify("PapaParse.parse returned errors.",{metaData:{input:e,output:t.errors}})}}})),i("loadcss!new_expression",(function(){})),i("expressions/new_expression_view",["require","exports","tslib","dcgview","loadcss!new_expression"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.template=function(){return this.controller=this.props.controller(),n.createElement("div",{class:n.const("dcg-expressionitem dcg-new-expression dcg-opened")},n.createElement("div",{class:n.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},n.createElement("div",{class:n.const("dcg-new-expression-fade")})),n.createElement("span",{class:n.const("dcg-tab")},n.createElement("span",{class:n.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),n.createElement("div",{class:n.const("dcg-tab-interior")})))},a.prototype.getIndex=function(){return this.controller.getNextDisplayIndex()},a.prototype.newMath=function(){this.controller.dispatch({type:"new-expression-at-end"})},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("loadcss!add_expression",(function(){})),i("expressions/add_expression_view",["require","exports","tslib","keys","browser","lib/tooltip","dcgview","jquery","./image-upload-view","main/manage-focus-helper","loadcss!add_expression"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u,d=a.Components.If,p=(u=a.Class,r.__extends(h,u),h.prototype.init=function(){this.controller=this.props.controller()},h.prototype.template=function(){var e=this;return a.createElement("div",{class:a.const("dcg-add-expression-container")},a.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-add-item-tooltip")},gravity:function(){return e.controller.isNarrow()?"ne":"se"}},a.createElement("span",{class:function(){return{"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":e.controller.isAddExpressionOpen()}},handleEvent:a.const("true"),role:a.const("button"),tabindex:a.const("0"),"aria-haspopup":a.const("true"),"aria-expanded":function(){return e.controller.isAddExpressionOpen()},"aria-label":function(){return e.controller.s("graphing-calculator-label-add-item-tooltip")},didMount:function(t){e.toggleButtonNode=t},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(c.manageFocusHelper({controller:this.controller,location:{type:"add-item-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-plus")}))),a.createElement(d,{predicate:function(){return e.controller.isAddExpressionOpen()}},(function(){return a.createElement("div",{class:function(){return{"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!e.controller.isNarrow(),"dcg-right":e.controller.isNarrow()}},role:a.const("complementary"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-add-item-menu")},didMount:e.bindFn(e.didMountPopover),didUnmount:e.bindFn(e.didUnmountPopover)},a.createElement("div",{class:a.const("dcg-popover-interior")},a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-narration-add-expression")},onTap:e.bindFn(e.newExpression),handleEvent:a.const("true"),manageFocus:e.const(c.manageFocusHelper({controller:e.controller,location:{type:"add-expression-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-expression dcg-expression-icon")}),(function(){return e.controller.s("graphing-calculator-label-expression-lowercase")})),a.createElement(d,{predicate:function(){return e.controller.areNotesEnabled()}},(function(){return a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-narration-add-note")},onTap:e.bindFn(e.newText),handleEvent:a.const("true")},a.createElement("i",{class:a.const("dcg-icon-new-text dcg-expression-icon")}),(function(){return e.controller.s("graphing-calculator-label-note-lowercase")}))})),a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-narration-add-table")},onTap:e.bindFn(e.newTable),handleEvent:a.const("true"),manageFocus:e.const(c.manageFocusHelper({controller:e.controller,location:{type:"add-table-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-table dcg-expression-icon")}),(function(){return e.controller.s("graphing-calculator-label-table-lowercase")})),a.createElement(d,{predicate:function(){return e.controller.areFoldersEnabled()}},(function(){return a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-narration-add-folder")},onTap:e.bindFn(e.newFolder),handleEvent:a.const("true"),manageFocus:e.const(c.manageFocusHelper({controller:e.controller,location:{type:"add-folder-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-folder dcg-expression-icon")}),(function(){return e.controller.s("graphing-calculator-label-folder-lowercase")}))})),a.createElement(d,{predicate:function(){return e.controller.areImagesEnabled()}},(function(){return a.createElement(l.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.controller.s("graphing-calculator-narration-add-image")},onFileChange:function(t){return e.insertFiles(t)},location:e.const({type:"add-image-btn"})},a.createElement("div",{class:a.const("dcg-new-item dcg-action-newimage")},a.createElement("i",{class:a.const("dcg-icon-new-image dcg-expression-icon")}),(function(){return e.controller.s("graphing-calculator-label-image-lowercase")})))})),a.createElement(d,{predicate:function(){return e.controller.areSimulationsEnabled()}},(function(){return a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newsimulation"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-narration-add-simulation")},onTap:e.bindFn(e.newSimulation),handleEvent:a.const("true"),manageFocus:e.const(c.manageFocusHelper({controller:e.controller,location:{type:"add-simulation-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-folder dcg-expression-icon")}),(function(){return e.controller.s("graphing-calculator-label-simulation-lowercase")}))}))),a.createElement("span",{class:a.const("dcg-arrow")}))})))},h.prototype.didMountPopover=function(e){var t=this;this.popoverNode=e,s(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",(function(e){t.eventShouldClosePopover(e)&&t.controller.dispatch({type:"close-add-expression",focusIconAfterClose:"keyboard"===e.device})})),s(document).on("keydown.add-expression-view",(function(e){if("Esc"===n.lookup(e)&&t.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),"Tab"===n.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var r=t.controller.getFocusLocation();if(!r)return;var i=t.controller.areImagesEnabled()?{type:"add-image-btn"}:t.controller.areFoldersEnabled()?{type:"add-folder-btn"}:{type:"add-table-btn"};e.shiftKey||r.type!==i.type?e.shiftKey&&"add-item-btn"===r.type&&(t.controller.dispatch({type:"set-focus-location",location:i}),e.preventDefault(),e.stopPropagation()):(t.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),e.preventDefault(),e.stopPropagation())}})),i.IS_IPAD&&i.IS_IN_IFRAME&&s(e).on("dcg-tapstart",(function(e){return e.preventDefault()})),s(e).find(".dcg-new-item").on("touchstart",(function(e){return e.preventDefault()}))},h.prototype.didUnmountPopover=function(){s(document).off(".add-expression-view")},h.prototype.toggleAddExpression=function(e){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:"keyboard"===e.device})},h.prototype.newExpression=function(){this.controller.dispatch({type:"new-expression"})},h.prototype.newText=function(){this.controller.dispatch({type:"new-text"})},h.prototype.newFolder=function(){this.controller.dispatch({type:"new-folder"})},h.prototype.newSimulation=function(){this.controller.dispatch({type:"new-simulation"})},h.prototype.newTable=function(){this.controller.dispatch({type:"new-table"})},h.prototype.insertFiles=function(e){this.controller.dispatch({type:"new-images",files:e})},h.prototype.eventShouldClosePopover=function(e){var t=!!s(e.target).closest(this.popoverNode).length,r=!!s(e.target).closest(this.toggleButtonNode).length;return!(t||r)},h);function h(){return null!==u&&u.apply(this,arguments)||this}t.default=p})),i("loadcss!expressions/expressions-header",(function(){})),i("expressions/expressions-header",["require","exports","tslib","./add_expression_view","dcgview","lib/tooltip","main/manage-focus-helper","loadcss!./expressions-header"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=i.Components.If,c=(s=i.Class,r.__extends(u,s),u.prototype.init=function(){this.controller=this.props.controller()},u.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){return{"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":e.props.expsScrolled()}},role:i.const("toolbar"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-expression-bar")},didMount:function(t){e.node=t},onTapStart:this.bindFn(this.clearSelectionOnMobile),style:function(){return{background:e.controller.hasBackgroundColor()?e.controller.getPillboxBackgroundColor():void 0}}},i.createElement("div",{class:i.const("dcg-left-buttons")},i.createElement(l,{predicate:this.bindFn(this.showHamburger)},(function(){return i.createElement("span",{class:i.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),handleEvent:i.const("true"),tooltip:function(){return e.controller.s("graphing-calculator-label-open-graph-tooltip")},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-open-graph")},onTap:function(){return e.controller.dispatch({type:"open-drawer"})}},i.createElement("i",{class:i.const("dcg-icon-hamburger")}))})),i.createElement(l,{predicate:function(){return!e.controller.isInEditListMode()}},(function(){return i.createElement(n.default,{controller:function(){return e.props.controller()}})})),i.createElement(l,{predicate:this.bindFn(this.showRerandomize)},(function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-randomize-tooltip")},gravity:function(){return e.controller.isNarrow()?"n":"s"}},i.createElement("span",{class:i.const("dcg-icon-btn"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-randomize-tooltip")},onTap:function(){return e.controller.dispatch({type:"re-randomize"})}},i.createElement("i",{class:i.const("dcg-icon-randomize")})))})),i.createElement(l,{predicate:function(){return e.controller.isInEditListMode()&&!e.controller.hasDefaultState()}},(function(){return i.createElement("span",{class:i.const("dcg-btn-red dcg-action-clearall"),role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.controller.dispatch({type:"clear-graph"})}},(function(){return e.controller.s("graphing-calculator-button-clear-graph")}))})),i.createElement(l,{predicate:function(){return e.controller.isInEditListMode()&&e.controller.hasDefaultState()}},(function(){return i.createElement("span",{class:i.const("dcg-btn-red dcg-action-reset"),role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.controller.dispatch({type:"reset-graph"})}},(function(){return e.controller.s("graphing-calculator-button-reset-graph")}))}))),i.createElement("div",{class:i.const("dcg-center-buttons")},i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-undo-tooltip")},gravity:function(){return e.controller.isNarrow()?"n":"s"},disabled:function(){return!e.controller.canUndo()}},i.createElement("span",{class:function(){return{"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-disabled":!e.controller.canUndo()}},role:i.const("button"),tabindex:function(){return e.controller.canUndo()?0:-1},"aria-label":function(){return e.controller.s("graphing-calculator-narration-undo")},onTap:function(){return e.controller.dispatch({type:"undo"})},"aria-disabled":function(){return!e.controller.canUndo()}},i.createElement("i",{class:i.const("dcg-icon-undo")}))),i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-redo-tooltip")},gravity:function(){return e.controller.isNarrow()?"n":"s"},disabled:function(){return!e.controller.canRedo()}},i.createElement("span",{class:function(){return{"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-disabled":!e.controller.canRedo()}},role:i.const("button"),tabindex:function(){return e.controller.canRedo()?0:-1},"aria-label":function(){return e.controller.s("graphing-calculator-narration-redo")},onTap:function(){return e.controller.dispatch({type:"redo"})},"aria-disabled":function(){return!e.controller.canRedo()}},i.createElement("i",{class:i.const("dcg-icon-redo")})))),i.createElement("div",{class:i.const("dcg-right-buttons")},i.createElement(l,{predicate:function(){return!e.controller.isInEditListMode()}},(function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-edit-list-tooltip")},gravity:function(){return e.controller.isNarrow()?"n":"s"}},i.createElement("span",{class:i.const("dcg-icon-btn dcg-action-toggle-edit"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-expression-list")},onTap:e.bindFn(e.toggleEditListMode),manageFocus:e.const(a.manageFocusHelper({controller:e.controller,location:{type:"edit-list-toggle"}}))},i.createElement("i",{class:i.const("dcg-icon-settings")})))})),i.createElement(l,{predicate:function(){return e.controller.isInEditListMode()}},(function(){return i.createElement("span",{class:i.const("dcg-btn-blue dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),onTap:e.bindFn(e.toggleEditListMode),manageFocus:e.const(a.manageFocusHelper({controller:e.controller,location:{type:"edit-list-toggle"}}))},(function(){return e.controller.s("graphing-calculator-button-done")}))})),i.createElement(l,{predicate:function(){return!e.controller.isInEditListMode()&&e.controller.getGraphSettings().config.graphpaper}},(function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-hide-expression-list-tooltip")},gravity:function(){return e.controller.isNarrow()?"nw":"sw"}},i.const(" "),i.createElement("span",{class:function(){return{"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":e.controller.isNarrow()}},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-hide-expression-list-tooltip")},onTap:function(t){e.controller.dispatch({type:"hide-expressions-list",focusShowIcon:"keyboard"===t.device})},manageFocus:e.const(a.manageFocusHelper({controller:e.controller,location:{type:"hide-expression-list-btn"}}))},i.createElement("i",{class:i.const("dcg-icon-hide")})))}))))},u.prototype.showRerandomize=function(){return this.controller.anyItemDependsOnRandomSeed()},u.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&!this.controller.isInEditListMode()&&!this.controller.isNarrow()},u.prototype.clearSelectionOnMobile=function(e){e.wasHandled()||this.controller.dispatch({type:"set-none-selected"})},u.prototype.toggleEditListMode=function(e){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),"keyboard"===e.device&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("main/load-graph-from-link",["require","exports","core/graphing-calc/migrate-state","jquery"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,o){var a=!1;function s(){a||e.dispatch({type:"toast/show",toast:{message:e.s("graphing-calculator-text-toast-error-importing-graph"),toastStyle:"error",hideAfter:12e3}})}e.dispatch({type:"toast/show",toast:{message:e.s("graphing-calculator-text-toast-importing-graph"),hideAfter:0,toastStyle:"cover",onHide:function(){a=!0}}});var l=e.getState();n.getJSON(t).done((function(t){var n=r.migrateToLatest(t.state);o(n,(function(r,n){var o,c,u,d;r||!n?s():"set-state"===i?(d=n,a||(e.dispatch({type:"set-state",state:d}),e.dispatch({type:"toast/show",toast:{message:e.s("graphing-calculator-text-toast-imported-graph"),undoCallback:function(){e.dispatch({type:"set-state",state:l})}}}))):(o=n,c=t.title||"",a||(u=e.getSelectedItem(),function(e){if(!e||!e.expressions||!e.expressions.list)return!1;for(var t=e.expressions.list,r=0;r<t.length;r++)if("folder"===t[r].type)return!1;return!0}(o)?(u&&e.dispatch({type:"set-folder-title",id:u.id,title:c}),o.expressions.list.forEach((function(t){t.id=e.generateId()})),e.dispatch({type:"insert-several-expressions",expressions:o.expressions.list}),e.dispatch({type:"toast/show",toast:{message:e.s("graphing-calculator-text-toast-imported-graph")}})):e.dispatch({type:"toast/show",toast:{message:e.s("graphing-calculator-text-toast-error-no-folders"),toastStyle:"error",hideAfter:12e3}})))}))})).fail(s)}})),i("lib/get-clipboard-data",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e&&e.clipboardData&&e.clipboardData.getData?e.clipboardData.getData("text/plain"):void 0}})),i("loadcss!expressions/exp-list-resizer",(function(){})),i("expressions/exp-list-resizer",["require","exports","tslib","dcgview","jquery","underscore","loadcss!./exp-list-resizer"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpListResizer=void 0;var a,s=n.Components.If,l=(a=n.Class,r.__extends(c,a),c.prototype.init=function(){this.guid=o.uniqueId("dcg-exp-list-resize")},c.prototype.template=function(){var e=this;return n.createElement(s,{predicate:this.bindFn(this.isVisible)},(function(){return n.createElement("div",{class:n.const("dcg-exp-list-resizer"),onTapStart:e.bindFn(e.onTapStart)})}))},c.prototype.isVisible=function(){return!this.props.controller().expressionsAreFullWidth()&&this.props.controller().isListVisible()},c.prototype.onTapStart=function(e){var t=this;this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=e.changedTouches[0].clientX,i(document).on("dcg-tapmove."+this.guid,(function(e){var r;void 0!==t.initialLeft&&void 0!==t.initialWidth&&(r=e.changedTouches[0].clientX-t.initialLeft+t.initialWidth,t.props.controller().dispatch({type:"resize-exp-list",expListWidth:r}))})),i(document).on("dcg-tapend."+this.guid,this.bindFn(this.onTapEnd)),i(document).on("dcg-tapcancel."+this.guid,this.bindFn(this.onTapEnd))},c.prototype.onTapEnd=function(){i(document).off("."+this.guid),this.initialLeft=void 0,this.initialWidth=void 0},c);function c(){return null!==a&&a.apply(this,arguments)||this}t.ExpListResizer=l})),i("expressions/expression-menus/base-menu-section",["require","exports","tslib","dcgview","main/mathquill-operators","graphing-calc/models/abstract-item"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMenuSection=void 0;var a,s=(a=n.Class,r.__extends(l,a),l.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},l.prototype.getMQConfig=function(){return{autoOperatorNames:i.getAutoOperators({colorMethods:!1})}},l.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation(),t="expression"===this.model.type?this.id:this.model.table.id;if(e&&"expression-menu"===e.type&&e.id===t)return e.location},l.prototype.handleFocusedChanged=function(e,t){var r="expression"===this.model.type?this.id:this.model.table.id;e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:r,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:r,location:t}})},l.prototype.onColorSelected=function(e){"expression"===this.model.type?this.controller.dispatch({type:"set-item-color",id:this.id,color:e}):this.controller.dispatch({type:"set-tablecolumn-color",color:e,tableId:this.model.table.id,columnId:this.id})},l.prototype.onCustomColorSelected=function(e){"expression"===this.model.type?this.controller.dispatch({type:"set-item-colorlatex",id:this.id,colorLatex:e}):this.controller.dispatch({type:"set-tablecolumn-colorlatex",tableId:this.model.table.id,columnId:this.model.id,colorLatex:e})},l.prototype.getModelColor=function(){return o.getDisplayColor(this.model)},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.BaseMenuSection=s})),i("loadcss!expressions/toggle-view",(function(){})),i("expressions/toggle-view",["require","exports","tslib","dcgview","loadcss!./toggle-view"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleView=void 0;var i,o=(i=n.Class,r.__extends(a,i),a.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-toggle-view":!0,"dcg-toggled":e.props.toggled()}},"aria-label":function(){return e.props.ariaLabel()},role:n.const("checkbox"),tabindex:n.const("0"),"aria-checked":function(){return e.props.toggled()},toggled:function(){return e.props.toggled()},onTap:this.bindFn(this.props.onChange)},n.createElement("div",{class:n.const("dcg-toggle-switch")}))},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.ToggleView=o})),i("lib/mathspeak",["require","exports","vendor/mathquill","jquery"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMathspeakFromText=void 0;var i=/`[^`]*`/g,o=r.MQ.StaticMath(n("<span/>")[0]);t.getMathspeakFromText=function(e){for(var t,r="",n=0,a=function(e){if(null==e)return!0;var t=e.match(/`/g);return(null!=t&&t.length||0)%2==0}(e)?function(e){var t=[];if(null==e||0==e.length)return t;for(var r,n=0;r=i.exec(e);){var o=e.slice(n,r.index);0<o.length&&t.push({from:n,to:r.index,type:"text",text:o}),n=r.index+r[0].length,t.push({from:r.index,to:n,type:"math",text:r[0].slice(1,-1)})}var a=e.slice(n);return 0<a.length&&t.push({from:n,to:e.length,type:"text",text:a}),t}(e):[{from:0,to:e.length,type:"text",text:e}];n<a.length;n++){var s=a[n];r+="text"===s.type?s.text:(t=s.text).match(/^\s*[\d]{0,3}(\.[\d]*)?\s*$/)?t:(o.latex(t),o.mathspeak().trim())}return r}})),i("loadcss!expressions/expression-menus/color-picker",(function(){})),i("expressions/expression-menus/color-picker",["require","exports","lib/color-distance","tslib","dcgview","underscore","expressions/colors","../../lib/mathspeak","./color-swatch","lib/tooltip","loadcss!./color-picker"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;var u,d=i.Components,p=d.For,h=d.If,g=(u=i.Class,n.__extends(f,u),f.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},f.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-color-picker-container")},i.createElement(p,{each:function(){return o.values(e.controller.getColors())}},i.createElement("span",{class:i.const("dcg-color-picker-menu dcg-do-not-blur")},(function(t){return i.createElement("span",{class:i.const("dcg-color-tile"),handleevent:i.const("true"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return a.getColorName(e.controller,t)},"aria-pressed":function(){return e.isSelected(t)},onTap:function(){return e.props.onColorSelected(t)}},i.createElement("span",{class:i.const("dcg-color-swatch"),style:function(){return{background:t}}}),i.createElement(h,{predicate:function(){return e.isSelected(t)}},(function(){return i.createElement("i",{class:i.const("dcg-icon-check")})})))}))),i.createElement(h,{predicate:function(){return 0<e.getUniqueCustomColors().length}},(function(){return i.createElement(p,{each:e.bindFn(e.getUniqueCustomColors),key:function(e){return"string"==typeof e?e:e.assignmentLatex}},i.createElement("span",{class:i.const("dcg-color-picker-menu dcg-do-not-blur")},(function(t){return"string"==typeof t?i.createElement("span",{class:i.const("dcg-color-picker-placeholder")}):i.createElement(c.Tooltip,{tooltip:function(){return t.assignmentLatex},renderAsLatex:e.const(!0)},i.createElement("span",{class:function(){return{"dcg-color-tile":!0,"dcg-light-color":r.isLightColor(e.controller.getColorById(t.id))}},handleevent:i.const("true"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return s.getMathspeakFromText(t.assignmentLatex)},"aria-pressed":function(){return e.model.colorLatex===t.assignmentLatex},onTap:function(){return e.props.onCustomColorSelected(t.assignmentLatex)}},i.createElement(l.ColorSwatch,{color:function(){return e.controller.getColorById(t.id)}}),i.createElement(h,{predicate:function(){return e.model.colorLatex===t.assignmentLatex}},(function(){return i.createElement("i",{class:i.const("dcg-icon-check")})}))))})))})))},f.prototype.isSelected=function(e){return!(this.model.colorLatex&&0<=o.pluck(this.getUniqueCustomColors(),"assignmentLatex").indexOf(this.model.colorLatex))&&this.props.selectedColor()===e},f.prototype.getUniqueCustomColors=function(){if(this.props.hideCustomColors&&this.props.hideCustomColors())return[];for(var e=this.controller.getAllColorAssignments(),t=o.countBy(e,(function(e){return e.assignmentLatex})),r=o.filter(e,(function(e){return 1===t[e.assignmentLatex]})),n=0;n<r.length%6;n++)r.push("placholder-"+n);return r},f);function f(){return null!==u&&u.apply(this,arguments)||this}t.ColorPicker=g})),i("expressions/expression-menus/lines",["require","exports","tslib","./base-menu-section","dcgview","expressions/toggle-view","core/types/line-opacity","dcgview-helpers/mathquill-view","graphing-calc/models/expression","graphing-calc/models/table","lib/tooltip","core/types/line-width","core/types/styles","./color-picker","loadcss!toggle"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineMenu=void 0;var g,f=i.Components,m=f.If,y=f.For,v=(g=n.BaseMenuSection,r.__extends(b,g),b.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-options-menu-section")},i.createElement("div",{class:i.const("dcg-options-menu-section-title")},(function(){return e.controller.s("graphing-calculator-heading-lines")}),i.createElement(o.ToggleView,{ariaLabel:function(){return e.controller.s("graphing-calculator-narration-lines-visible")},toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLinesVisible)})),i.createElement(m,{predicate:function(){return e.props.isOpen()}},(function(){return i.createElement("div",{class:i.const("dcg-options-menu-content")},i.createElement("div",{class:i.const("dcg-options-flex-container")},i.createElement("div",{class:i.const("dcg-options-left-side")},i.createElement("div",{class:i.const("dcg-iconed-mathquill-row dcg-line-opacity-row")},i.createElement(u.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-opacity-tooltip")},targetClickBehavior:e.const("stick"),gravity:e.const("se")},i.createElement("i",{class:i.const("dcg-icon-opacity")})),i.createElement(s.default,{latex:function(){return e.model.lineOpacity},placeholder:function(){return""+a.DEFAULT},isFocused:function(){return"lineopacity"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-line-opacity")},getAriaPostLabel:function(){return e.isLineOpacityValid()?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!e.isLineOpacityValid()},onUserChangedLatex:function(t){return e.dispatchLineOpacityLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"lineopacity")},dataLabelAttributeValue:e.const("line-opacity")})),i.createElement("div",{class:i.const("dcg-iconed-mathquill-row dcg-line-thickness-row")},i.createElement(u.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-line-thickness-tooltip")},targetClickBehavior:e.const("stick"),gravity:e.const("se")},i.createElement("i",{class:i.const("dcg-icon-line-thickness")})),i.createElement(s.default,{latex:function(){return e.model.lineWidth},placeholder:function(){return""+d.DEFAULT},isFocused:function(){return"linewidth"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-label-line-thickness-tooltip")},getAriaPostLabel:function(){return e.isLineWidthValid()?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!e.isLineWidthValid()},onUserChangedLatex:function(t){return e.dispatchLineWidthLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"linewidth")},dataLabelAttributeValue:e.const("line-width")}))),i.createElement("div",{class:i.const("dcg-options-right-side")},i.createElement(y,{each:function(){return e.getValidLineStyles()}},i.createElement("div",{class:i.const("dcg-toggle dcg-line-style-toggle"),role:i.const("radiogroup")},(function(t){return i.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.model.lineStyle===t}},onTap:function(){return e.onLineStyleSelected(t)},role:i.const("radio"),tabindex:i.const("0"),"aria-label":function(){return t===p.LineStyle.SOLID?e.controller.s("graphing-calculator-narration-line-style-solid"):t===p.LineStyle.DASHED?e.controller.s("graphing-calculator-narration-line-style-dashed"):t===p.LineStyle.DOTTED?e.controller.s("graphing-calculator-narration-line-style-dotted"):e.controller.raw("")},"aria-checked":function(){return e.model.lineStyle===t}},i.createElement("i",{class:function(){return{"dcg-icon-line-solid":t===p.LineStyle.SOLID,"dcg-icon-line-dashed":t===p.LineStyle.DASHED,"dcg-icon-line-dotted":t===p.LineStyle.DOTTED}}}))}))))),i.createElement(m,{predicate:e.props.isFirstOpenSection},(function(){return i.createElement(h.ColorPicker,r.__assign({},e.props,{selectedColor:e.bindFn(e.getModelColor),onColorSelected:e.bindFn(e.onColorSelected),onCustomColorSelected:e.bindFn(e.onCustomColorSelected)}))})))})))},b.prototype.isLineOpacityValid=function(){return"expression"===this.model.type?l.isLineOpacityValid(this.model):"header"===this.model.type&&c.isLineOpacityValid(this.model)},b.prototype.isLineWidthValid=function(){return"expression"===this.model.type?l.isLineWidthValid(this.model):"header"===this.model.type&&c.isLineWidthValid(this.model)},b.prototype.dispatchLineOpacityLatexIfChanged=function(e){this.model.lineOpacity!==e&&("expression"===this.model.type?this.controller.dispatch({type:"set-item-lineopacity",id:this.id,lineOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-lineopacity",tableId:this.model.table.id,columnId:this.model.id,lineOpacity:e}))},b.prototype.getValidLineStyles=function(){return"expression"===this.model.type&&l.isInequality(this.model)?[]:[p.LineStyle.SOLID,p.LineStyle.DASHED,p.LineStyle.DOTTED]},b.prototype.onLineStyleSelected=function(e){this.model.lineStyle!==e&&("expression"===this.model.type?this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:e}):this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.model.table.id,columnId:this.model.id,lineStyle:e}))},b.prototype.dispatchLineWidthLatexIfChanged=function(e){this.model.lineWidth!==e&&("expression"===this.model.type?this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:e}):this.controller.dispatch({type:"set-tablecolumn-linewidth",tableId:this.model.table.id,columnId:this.model.id,lineWidth:e}))},b.prototype.toggleLinesVisible=function(){"expression"===this.model.type?this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.model.table.id,columnId:this.model.id,bool:!this.props.isOpen()})},b);function b(){return null!==g&&g.apply(this,arguments)||this}t.LineMenu=v})),i("expressions/expression-menus/colors-only",["require","exports","tslib","./base-menu-section","dcgview","./color-picker","graphing-calc/models/expression"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorsOnlyMenu=void 0;var s,l=(s=n.BaseMenuSection,r.__extends(c,s),c.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-options-menu-section")},i.createElement(o.ColorPicker,r.__assign({},this.props,{selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:function(){return"expression"===e.model.type&&a.isRegression(e.model)}})))},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.ColorsOnlyMenu=l})),i("expressions/expression-menus/fill",["require","exports","tslib","./base-menu-section","dcgview","expressions/toggle-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","lib/tooltip","core/types/opacity","./color-picker"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FillMenu=void 0;var d,p=i.Components.If,h=(d=n.BaseMenuSection,r.__extends(g,d),g.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},g.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-options-menu-section")},i.createElement("div",{class:i.const("dcg-options-menu-section-title")},(function(){return e.controller.s("graphing-calculator-heading-fill")}),i.createElement(p,{predicate:function(){return!e.isInequality()}},(function(){return i.createElement(o.ToggleView,{ariaLabel:function(){return e.controller.s("graphing-calculator-narration-fill-visible")},toggled:e.props.isOpen,onChange:e.bindFn(e.toggleFillVisible)})}))),i.createElement(p,{predicate:this.props.isOpen},(function(){return i.createElement("div",{class:i.const("dcg-options-menu-content")},i.createElement("div",{class:i.const("dcg-iconed-mathquill-row dcg-fill-opacity-row")},i.createElement(l.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-opacity-tooltip")},targetClickBehavior:e.const("stick"),gravity:e.const("se")},i.createElement("i",{class:i.const("dcg-icon-opacity")})),i.createElement(a.default,{latex:function(){return e.model.fillOpacity},placeholder:function(){return""+c.DEFAULT},isFocused:function(){return"opacity"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-fill-opacity")},getAriaPostLabel:function(){return s.isFillOpacityValid(e.model)?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!s.isFillOpacityValid(e.model)},onUserChangedLatex:function(t){return e.dispatchOpacityLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"opacity")},dataLabelAttributeValue:e.const("fill-opacity"),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),i.createElement(p,{predicate:e.props.isFirstOpenSection},(function(){return i.createElement(u.ColorPicker,r.__assign({},e.props,{selectedColor:e.bindFn(e.getModelColor),onColorSelected:e.bindFn(e.onColorSelected),onCustomColorSelected:e.bindFn(e.onCustomColorSelected)}))})))})))},g.prototype.isInequality=function(){return s.isInequality(this.model)},g.prototype.toggleFillVisible=function(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.props.isOpen()})},g.prototype.dispatchOpacityLatexIfChanged=function(e){this.model.fillOpacity!==e&&this.controller.dispatch({type:"set-item-fillopacity",id:this.id,fillOpacity:e})},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.FillMenu=h})),i("expressions/expression-menus/points",["require","exports","tslib","./base-menu-section","dcgview","expressions/toggle-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","graphing-calc/models/table","lib/tooltip","core/types/point-opacity","core/lib/dragmode","core/types/point-size","core/types/styles","./color-picker"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointsMenu=void 0;var f,m=i.Components,y=m.If,v=m.For,b=(f=n.BaseMenuSection,r.__extends(x,f),x.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-options-menu-section")},i.createElement("div",{class:i.const("dcg-options-menu-section-title")},(function(){return e.controller.s("graphing-calculator-heading-points")}),i.createElement(o.ToggleView,{ariaLabel:function(){return e.controller.s("graphing-calculator-narration-points-visible")},toggled:this.props.isOpen,onChange:this.bindFn(this.togglePointsVisible)})),i.createElement(y,{predicate:this.props.isOpen},(function(){return i.createElement("div",{class:i.const("dcg-options-menu-content")},i.createElement("div",{class:i.const("dcg-options-flex-container")},i.createElement("div",{class:i.const("dcg-options-left-side")},i.createElement("div",{class:i.const("dcg-iconed-mathquill-row dcg-point-opacity-row")},i.createElement(c.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-opacity-tooltip")},targetClickBehavior:e.const("stick"),gravity:e.const("se")},i.createElement("i",{class:i.const("dcg-icon-opacity")})),i.createElement(a.default,{latex:function(){return e.model.pointOpacity},placeholder:e.bindFn(e.getPointOpacityPlaceholder),isFocused:function(){return"pointopacity"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-point-opacity")},getAriaPostLabel:function(){return e.isPointOpacityValid()?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!e.isPointOpacityValid()},onUserChangedLatex:function(t){return e.dispatchPointOpacityLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"pointopacity")},dataLabelAttributeValue:e.const("point-opacity")})),i.createElement(y,{predicate:function(){return!e.isDraggable()}},(function(){return i.createElement("div",{class:i.const("dcg-iconed-mathquill-row")},i.createElement(c.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-point-size-tooltip")},gravity:e.const("se"),targetClickBehavior:e.const("stick")},i.createElement("i",{class:i.const("dcg-icon-line-thickness")})),i.createElement(a.default,{latex:function(){return e.model.pointSize},placeholder:e.bindFn(e.getDefaultPointSize),isFocused:function(){return"pointsize"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-point-size")},getAriaPostLabel:function(){return e.isPointSizeValid()?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!e.isPointSizeValid()},onUserChangedLatex:function(t){return e.dispatchPointSizeLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"pointsize")},dataLabelAttributeValue:e.const("point-size")}))}))),i.createElement("div",{class:i.const("dcg-options-right-side")},i.createElement(y,{predicate:function(){return!e.isDraggable()}},(function(){return i.createElement(v,{each:function(){return[h.PointStyle.POINT,h.PointStyle.OPEN,h.PointStyle.CROSS]}},i.createElement("div",{class:i.const("dcg-toggle dcg-point-style-toggle"),role:i.const("radiogroup")},(function(t){return i.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.model.pointStyle===t}},onTap:function(){return e.onPointStyleSelected(t)},role:i.const("radio"),tabindex:i.const("0"),"aria-label":function(){return t===h.PointStyle.POINT?e.controller.s("graphing-calculator-narration-point-style-point"):t===h.PointStyle.OPEN?e.controller.s("graphing-calculator-narration-point-style-open"):t===h.PointStyle.CROSS?e.controller.s("graphing-calculator-narration-point-style-cross"):e.controller.raw("")},"aria-checked":function(){return e.model.pointStyle===t}},i.createElement("i",{class:function(){return{"dcg-icon-point":t===h.PointStyle.POINT,"dcg-icon-open":t===h.PointStyle.OPEN,"dcg-icon-cross":t===h.PointStyle.CROSS}}}))})))})))),i.createElement(y,{predicate:e.props.isFirstOpenSection},(function(){return i.createElement(g.ColorPicker,r.__assign({},e.props,{selectedColor:e.bindFn(e.getModelColor),onColorSelected:e.bindFn(e.onColorSelected),onCustomColorSelected:e.bindFn(e.onCustomColorSelected)}))})))})))},x.prototype.isPointOpacityValid=function(){return"expression"===this.model.type?s.isPointOpacityValid(this.model):"header"===this.model.type&&l.isPointOpacityValid(this.model)},x.prototype.isPointSizeValid=function(){return"expression"===this.model.type?s.isPointSizeValid(this.model):"header"===this.model.type&&l.isPointSizeValid(this.model)},x.prototype.onPointStyleSelected=function(e){this.model.pointStyle!==e&&("expression"===this.model.type?this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:e}):this.controller.dispatch({type:"set-tablecolumn-pointstyle",columnId:this.model.id,tableId:this.model.table.id,pointStyle:e}))},x.prototype.dispatchPointSizeLatexIfChanged=function(e){this.model.pointSize!==e&&("expression"===this.model.type?this.controller.dispatch({type:"set-item-pointsize",id:this.id,pointSize:e}):this.controller.dispatch({type:"set-tablecolumn-pointsize",columnId:this.model.id,tableId:this.model.table.id,pointSize:e}))},x.prototype.isDraggable=function(){return this.getDragMode()!==d.DragMode.NONE},x.prototype.togglePointsVisible=function(){"expression"===this.model.type&&s.isSinglePoint(this.model)?this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}):"expression"===this.model.type?this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-points",columnId:this.model.id,tableId:this.model.table.id,bool:!this.props.isOpen()})},x.prototype.dispatchPointOpacityLatexIfChanged=function(e){this.model.pointOpacity!==e&&("expression"===this.model.type?this.controller.dispatch({type:"set-item-pointopacity",id:this.id,pointOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-pointopacity",columnId:this.model.id,tableId:this.model.table.id,pointOpacity:e}))},x.prototype.getPointOpacityPlaceholder=function(){return this.getDragMode()===d.DragMode.NONE?""+u.DEFAULT:"1"},x.prototype.getDragMode=function(){return"expression"===this.model.type&&this.model.reconciledDragMode||this.model.dragMode},x.prototype.getDefaultPointSize=function(){return"expression"===this.model.type&&s.isDotPlot(this.model)?""+p.DOTPLOT_DEFAULT:""+p.DEFAULT},x);function x(){return null!==f&&f.apply(this,arguments)||this}t.PointsMenu=b})),i("loadcss!expressions/expression-menus/label-orientation-view",(function(){})),i("expressions/expression-menus/label-orientation-view",["require","exports","tslib","dcgview","core/types/label-orientations","graphing-calc/models/expression","loadcss!./label-orientation-view","loadcss!toggle"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelOrientationView=void 0;var a,s=n.Components.For,l=[{orientation:i.LabelOrientation.DEFAULT,cssClass:"dcg-label-orientation-center"},{orientation:i.LabelOrientation.ABOVE,cssClass:"dcg-label-orientation-above"},{orientation:i.LabelOrientation.ABOVE_RIGHT,cssClass:"dcg-label-orientation-above-right"},{orientation:i.LabelOrientation.RIGHT,cssClass:"dcg-label-orientation-right"},{orientation:i.LabelOrientation.BELOW_RIGHT,cssClass:"dcg-label-orientation-below-right"},{orientation:i.LabelOrientation.BELOW,cssClass:"dcg-label-orientation-below"},{orientation:i.LabelOrientation.BELOW_LEFT,cssClass:"dcg-label-orientation-below-left"},{orientation:i.LabelOrientation.LEFT,cssClass:"dcg-label-orientation-left"},{orientation:i.LabelOrientation.ABOVE_LEFT,cssClass:"dcg-label-orientation-above-left"}],c=(a=n.Class,r.__extends(u,a),u.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},u.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-label-orientation-view"),style:function(){return"transform: rotate("+e.getCSSRotationValue()+");"}},n.createElement("span",{class:n.const("dcg-vertical-orientation-indicator")}),n.createElement(s,{each:function(){return l},key:function(e){return e.orientation}},n.createElement("div",{class:n.const("dcg-label-orientations"),role:n.const("radiogroup")},(function(t){return n.createElement("div",{class:function(){var r={};return r[t.cssClass]=!0,r["dcg-orientation-option"]=!0,r["dcg-selected"]=e.isSelected(t.orientation),r["dcg-orientation-disabled"]=e.isDisabled(t.orientation),r},role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return e.controller.raw("test")},"aria-pressed":function(){return e.getOrientation()===t.orientation},onTap:function(){return e.onTapOrientation(t.orientation)}},n.createElement("i",{class:function(){return{"dcg-icon-chevron-left":t.orientation!==i.LabelOrientation.DEFAULT}}}))}))))},u.prototype.isDisabled=function(e){return e===i.LabelOrientation.DEFAULT&&(!!this.isPointVisible()||this.model.labelOrientation===i.LabelOrientation.DEFAULT)},u.prototype.isSelected=function(e){return e===i.LabelOrientation.DEFAULT&&e===this.model.labelOrientation?!this.isPointVisible():e===this.model.labelOrientation},u.prototype.isPointVisible=function(){return!this.model.hidden&&(o.isSinglePoint(this.model)?!this.model.hidden:this.model.points)},u.prototype.getCSSRotationValue=function(){var e=o.getLabelAngleValue(this.model);return(Array.isArray(e)?0:e)+"rad"},u.prototype.getOrientation=function(){return this.props.model().labelOrientation},u.prototype.onTapOrientation=function(e){e===this.getOrientation()&&(e=i.LabelOrientation.DEFAULT),this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:e})},u);function u(){return null!==a&&a.apply(this,arguments)||this}t.LabelOrientationView=c})),i("expressions/expression-menus/label",["require","exports","tslib","./base-menu-section","dcgview","expressions/toggle-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","lib/tooltip","core/types/label-sizes","./label-orientation-view","./color-picker","dcgview-helpers/checkbox","core/lib/dragmode","core/graphing-calc/json/expression","core/math/interpolatedlabel"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelMenu=void 0;var m,y=i.Components.If,v=(m=n.BaseMenuSection,r.__extends(b,m),b.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},b.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-options-menu-section")},i.createElement("div",{class:i.const("dcg-options-menu-section-title")},(function(){return e.controller.s("graphing-calculator-heading-label")}),i.createElement(o.ToggleView,{ariaLabel:function(){return e.controller.s("graphing-calculator-narration-label-visible")},toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLabelVisible)})),i.createElement(y,{predicate:this.props.isOpen},(function(){return i.createElement("div",{class:i.const("dcg-options-menu-content")},i.createElement("div",{class:i.const("dcg-options-flex-container")},i.createElement("div",{class:i.const("dcg-options-left-side")},i.createElement("div",{class:i.const("dcg-iconed-mathquill-row dcg-label-size-row")},i.createElement(l.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-label-size-tooltip")},targetClickBehavior:e.const("stick"),gravity:e.const("se")},i.createElement("span",{class:i.const("dcg-font-size")},i.const("A"))),i.createElement(a.default,{latex:e.bindFn(e.getLabelSizeLatex),placeholder:e.bindFn(e.getLabelSizePlaceholder),isFocused:function(){return"labelsize"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-label-size")},getAriaPostLabel:function(){return s.isLabelSizeValid(e.model)?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!s.isLabelSizeValid(e.model)},onUserChangedLatex:function(t){return e.dispatchLabelSizeIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"labelsize")},dataLabelAttributeValue:e.const("label-size")})),i.createElement("div",{class:function(){return{"dcg-iconed-mathquill-row":!0,"dcg-label-angle-row":!0,"dcg-suffix-degree":e.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":!e.props.controller().getGraphSettings().degreeMode}}},i.createElement(l.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-angle-tooltip")},targetClickBehavior:e.const("stick")},i.createElement("i",{class:i.const("dcg-icon-angle")})),i.createElement(a.default,{latex:function(){return e.model.labelAngle},placeholder:function(){return"0"},isFocused:function(){return"labelangle"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.controller.s("graphing-calculator-narration-label-angle")},getAriaPostLabel:function(){return s.isLabelAngleValid(e.model)?e.controller.raw(""):e.controller.s("shared-calculator-narration-input-error")},hasError:function(){return!s.isLabelAngleValid(e.model)},onUserChangedLatex:function(t){return e.dispatchLabelAngleIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"labelangle")},dataLabelAttributeValue:e.const("label-angle")}))),i.createElement("div",{class:i.const("dcg-options-right-side")},i.createElement(u.LabelOrientationView,{controller:function(){return e.controller},model:function(){return e.model}}))),i.createElement(y,{predicate:e.props.isFirstOpenSection},(function(){return i.createElement(d.ColorPicker,r.__assign({},e.props,{selectedColor:e.bindFn(e.getModelColor),onColorSelected:e.bindFn(e.onColorSelected),onCustomColorSelected:e.bindFn(e.onCustomColorSelected)}))})),i.createElement(y,{predicate:function(){return e.controller.canUseAdvancedStyling()}},(function(){return i.createElement("div",{class:i.const("dcg-label-advanced")},i.createElement(p.Checkbox,{checked:e.bindFn(e.getWhiteTextOutline),onChange:e.bindFn(e.setWhiteTextOutline),ariaLabel:e.const("Text outline"),disabled:function(){return e.getEditable()}},i.const("Text outline")),i.createElement("div",{role:i.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-advanced")}},i.createElement(y,{predicate:function(){return e.shouldShowInteractiveLabelCheckbox()}},(function(){return i.createElement(p.Checkbox,{checked:e.bindFn(e.getInteractiveLabel),onChange:e.bindFn(e.setInteractiveLabel),ariaLabel:e.const("Interactive Label")},i.const("Show on hover"))})),i.createElement(y,{predicate:e.bindFn(e.shouldShowEditableLabelToggle)},(function(){return i.createElement(p.Checkbox,{checked:e.bindFn(e.getEditable),onChange:e.bindFn(e.setEditable),ariaLabel:e.const("Editable")},i.const("Editable"))}))))})))})))},b.prototype.getWhiteTextOutline=function(){return!this.getEditable()&&!this.model.suppressTextOutline},b.prototype.setWhiteTextOutline=function(e){this.controller.dispatch({type:"set-suppress-text-outline",id:this.id,suppressTextOutline:!e})},b.prototype.setInteractiveLabel=function(e){this.controller.dispatch({type:"set-item-interactive-label",id:this.id,interactiveLabel:e})},b.prototype.getInteractiveLabel=function(){return!!this.model.interactiveLabel},b.prototype.setEditable=function(e){var t;e?(t="latex"===f.classifyLabelText(this.model.label)?g.EditableLabelMode.Math:g.EditableLabelMode.Text,this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:t})):this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:g.EditableLabelMode.None})},b.prototype.getEditable=function(){return this.model.editableLabelMode!==g.EditableLabelMode.None},b.prototype.shouldShowEditableLabelToggle=function(){return s.isSinglePoint(this.model)},b.prototype.shouldShowInteractiveLabelCheckbox=function(){return this.model.reconciledDragMode===h.DragMode.NONE},b.prototype.dispatchLabelAngleIfChanged=function(e){this.model.labelAngle!==e&&this.controller.dispatch({type:"set-item-labelangle",id:this.id,labelAngle:e})},b.prototype.dispatchLabelSizeIfChanged=function(e){var t;this.model.labelSize!==e&&((t=c.maybeMigrateLabelSizeEnumToLatex(e))&&(e=t),this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:e}))},b.prototype.getLabelSizePlaceholder=function(){return c.maybeMigrateLabelSizeEnumToLatex(this.model.labelSize)||"1"},b.prototype.getLabelSizeLatex=function(){return c.maybeMigrateLabelSizeEnumToLatex(this.model.labelSize)?"":this.model.labelSize},b.prototype.toggleLabelVisible=function(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.props.isOpen()})},b);function b(){return null!==m&&m.apply(this,arguments)||this}t.LabelMenu=v})),i("expressions/expression-menus/drag",["require","exports","tslib","./base-menu-section","dcgview","underscore","expressions/toggle-view","core/lib/dragmode","../circular-icon-view"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragMenu=void 0;var c,u=i.Components,d=u.If,p=u.For,h=(c=n.BaseMenuSection,r.__extends(g,c),g.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-options-menu-section")},i.createElement("div",{class:i.const("dcg-options-menu-section-title")},(function(){return e.controller.s("graphing-calculator-heading-drag")}),i.createElement(a.ToggleView,{ariaLabel:function(){return e.controller.s("graphing-calculator-narration-menu-drag-enabled")},toggled:this.props.isOpen,onChange:this.bindFn(this.toggleDragEnabled)})),i.createElement(d,{predicate:this.props.isOpen},(function(){return i.createElement("div",{class:i.const("dcg-options-menu-content")},i.createElement(p,{each:function(){return[s.DragMode.X,s.DragMode.Y,s.DragMode.XY]}},i.createElement("div",{class:i.const("dcg-style-icons"),role:i.const("radiogroup")},(function(t){return i.createElement("div",{class:function(){return{"dcg-style-icon-container":!0,"dcg-disabled":e.isDisabled(t)}},onTap:function(){return e.onDragModeSelected(t)},role:i.const("radio"),tabindex:function(){return e.isDisabled(t)?-1:0},"aria-label":function(){return"X"===t?e.controller.s("graphing-calculator-narration-drag-mode-x"):"Y"===t?e.controller.s("graphing-calculator-narration-drag-mode-y"):"XY"===t?e.controller.s("graphing-calculator-narration-drag-mode-xy"):e.controller.raw("")},"aria-checked":function(){return e.getDragMode()===t}},i.createElement(l.CircularIconView,{backgroundColor:function(){return"#000"},semiTransparent:function(){return e.getDragMode()!==t},iconType:function(){return"X"===t?"movable-horizontal":"Y"===t?"movable-vertical":"movable-both"}}))}))))})))},g.prototype.isDisabled=function(e){var t=this.controller.getEnabledDragModesForItem(this.id);return!o.contains(t,e)},g.prototype.onDragModeSelected=function(e){if("expression"===this.model.type){if(this.isDisabled(e))return;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})}else{var t=this.model.id,r=this.model.table.id;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:r,columnId:t,dragMode:e})}},g.prototype.getDragMode=function(){return"expression"===this.model.type&&this.model.reconciledDragMode||this.model.dragMode},g.prototype.toggleDragEnabled=function(){var e=this.getDragMode()!==s.DragMode.NONE?s.DragMode.NONE:s.DragMode.XY;"expression"===this.model.type?this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e}):this.onDragModeSelected(e)},g);function g(){return null!==c&&c.apply(this,arguments)||this}t.DragMenu=h})),i("loadcss!expressions/expression-menus/expression-options-menu-view",(function(){})),i("expressions/expression-menus/expression-options-menu-view",["require","exports","tslib","dcgview","lib/aria","jquery","./lines","./colors-only","./fill","./points","./label","./drag","graphing-calc/models/expression","core/math/expression-types","core/lib/dragmode","dcgview-helpers/checkbox","loadcss!./expression-options-menu-view"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionOptionsMenuView=void 0;var m,y=n.Components,v=y.For,b=y.If,x=(m=n.Class,r.__extends(w,m),w.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this.props.registerRepositionCb(this.bindFn(this.renderOffset))},w.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-expressions-options-menu":!0,"dcg-options-menu":!0}},role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-options-menu")},didMount:this.bindFn(this.didMountContainer)},n.createElement(v,{each:this.bindFn(this.getSections)},n.createElement("div",null,(function(t){switch(t){case"points":return n.createElement(c.PointsMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("points")},isFirstOpenSection:function(){return e.isFirstOpenSection("points")}}));case"label":return n.createElement(u.LabelMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("label")},isFirstOpenSection:function(){return e.isFirstOpenSection("label")}}));case"drag":return n.createElement(d.DragMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("drag")},isFirstOpenSection:function(){return e.isFirstOpenSection("drag")}}));case"lines":return n.createElement(a.LineMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("lines")},isFirstOpenSection:function(){return e.isFirstOpenSection("lines")}}));case"fill":return n.createElement(l.FillMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("fill")},isFirstOpenSection:function(){return e.isFirstOpenSection("fill")}}));case"colors-only":return n.createElement(s.ColorsOnlyMenu,r.__assign({},e.props,{isOpen:e.const(!0),isFirstOpenSection:e.const(!0)}))}}))),n.createElement(b,{predicate:this.bindFn(this.isClickable)},(function(){return n.createElement("div",{class:n.const("dcg-options-menu-section")},n.createElement(f.Checkbox,{checked:function(){return!!e.model.clickableInfo.enabled},onChange:function(t){e.controller.dispatch({type:"set-clickableinfo-prop",id:e.model.id,prop:"enabled",value:t})},ariaLabel:function(){return e.controller.s("graphing-calculator-button-clickable")}},(function(){return e.controller.s("graphing-calculator-button-clickable")})))})),n.createElement("div",{class:n.const("dcg-triangle"),didMount:this.bindFn(this.didMountArrow)}))},w.prototype.willUnmount=function(){i.alert(this.controller.s("graphing-calculator-narration-options-menu-closed"))},w.prototype.didMountContainer=function(e){this.$containerElt=o(e),i.alert(this.controller.s("graphing-calculator-narration-options-menu-open"))},w.prototype.didMountArrow=function(e){this.$arrowElt=o(e)},w.prototype.renderOffset=function(e){var t,r,n;this.$containerElt&&this.$arrowElt&&(n=-(r=e<(t=this.$containerElt.outerHeight())?e-t:0)<t-38,this.$containerElt.css("margin-top",r+"px"),this.$arrowElt.css("margin-top",-r+"px"),this.$arrowElt.css("display",n?"":"none"))},w.prototype.isClickable=function(){return!!this.controller.canAuthorClickableObjects()&&p.isClickableAllowed(this.model)},w.prototype.getSections=function(){return p.isHistogram(this.model)||p.isBoxPlot(this.model)||p.isRegression(this.model)||p.isDiscreteDistribution(this.model)?["colors-only"]:p.isToplevelDistribution(this.model)?["lines"]:p.isDotPlot(this.model)?["points"]:p.isPointList(this.model)?["points","label","lines"]:p.isSinglePoint(this.model)?this.model.formula.move_strategy?["points","label","drag"]:["points","label"]:p.isParametric(this.model)||p.isPolygon(this.model)||p.isInequality(this.model)&&!p.isPolar(this.model)?["lines","fill"]:["lines"]},w.prototype.isFirstOpenSection=function(e){for(var t=0,r=this.getSections();t<r.length;t++){var n=r[t];if(n===e)return this.isSectionOpen(e);if(this.isSectionOpen(n))return!1}return!1},w.prototype.isSectionOpen=function(e){var t=this.model,r=t.points,n=t.lines,i=t.fill,o=h.getReconciledExpressionProps(this.model.formula.expression_type,{points:r,lines:n,fill:i});switch(e){case"lines":return!this.model.hidden&&o.lines;case"label":return this.model.showLabel;case"fill":return!this.model.hidden&&(!!p.isInequality(this.model)||o.fill);case"points":return!this.model.hidden&&(p.isSinglePoint(this.model)?!this.model.hidden:o.points);case"drag":return this.model.reconciledDragMode!==g.DragMode.NONE;case"colors-only":return!0}},w);function w(){return null!==m&&m.apply(this,arguments)||this}t.ExpressionOptionsMenuView=x})),i("expressions/expression-menus/table-options-menu-view",["require","exports","tslib","dcgview","lib/aria","./lines","./points","./drag","core/lib/dragmode","loadcss!./expression-options-menu-view","loadcss!./expression-options-menu-view"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableOptionsMenuView=void 0;var c,u=n.Components.For,d=(c=n.Class,r.__extends(p,c),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},p.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-table-column-menu":!0,"dcg-options-menu":!0}},role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-options-menu")},didMount:function(){i.alert(e.controller.s("graphing-calculator-narration-options-menu-open"))},didUnmount:function(){i.alert(e.controller.s("graphing-calculator-narration-options-menu-closed"))}},n.createElement(u,{each:this.bindFn(this.getSections)},n.createElement("div",null,(function(t){switch(t){case"points":return n.createElement(a.PointsMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("points")},isFirstOpenSection:function(){return e.isFirstOpenSection("points")}}));case"drag":return n.createElement(s.DragMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("drag")},isFirstOpenSection:function(){return e.isFirstOpenSection("drag")}}));case"lines":return n.createElement(o.LineMenu,r.__assign({},e.props,{isOpen:function(){return e.isSectionOpen("lines")},isFirstOpenSection:function(){return e.isFirstOpenSection("lines")}}))}}))),n.createElement("div",{class:n.const("dcg-triangle")}))},p.prototype.getSections=function(){return this.model.draggable?["points","lines","drag"]:["points","lines"]},p.prototype.isFirstOpenSection=function(e){for(var t=0,r=this.getSections();t<r.length;t++){var n=r[t];if(n===e)return this.isSectionOpen(e);if(this.isSectionOpen(n))return!1}return!1},p.prototype.isSectionOpen=function(e){switch(e){case"drag":return this.model.dragMode!==l.DragMode.NONE;case"lines":return!!this.model.lines;case"points":return!!this.model.points}},p);function p(){return null!==c&&c.apply(this,arguments)||this}t.TableOptionsMenuView=d})),i("expressions/image_options_view",["require","exports","tslib","dcgview","graphing-calc/models/image","graphing-calc/models/expression","dcgview-helpers/checkbox","./circular-icon-view","./image-upload-view","lib/coerce-url"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageOptionsView=void 0;var u,d=n.Components,p=d.For,h=d.If,g=(u=n.Class,r.__extends(f,u),f.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-image-options-menu dcg-options-menu")},n.createElement("div",{class:n.const("dcg-triangle")}),n.createElement("div",{class:n.const("dcg-opacities-menu dcg-dividing-line-after")},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},(function(){return e.controller.s("graphing-calculator-heading-image-opacity")})),n.createElement(p,{each:function(){return e.controller.getImageOpacities()}},n.createElement("div",{class:n.const("dcg-opacities-menu"),role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-image-opacity")}},(function(t){return n.createElement("span",{class:n.const("dcg-opacity-option"),role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return"opacity: "+t},"aria-pressed":function(){return e.isOpacitySelected(t)},handleevent:n.const("true"),onTap:function(){return e.onSelectOpacity(t)}},n.createElement(s.CircularIconView,{backgroundImage:e.bindFn(e.getBackgroundImage),iconType:function(){return e.isOpacitySelected(t)?"check":"none"},backgroundOpacity:function(){return parseFloat(t)}}))})))),n.createElement("div",{class:n.const("dcg-styles-div dcg-options-menu-section")},n.createElement("div",{class:n.const("dcg-styles-menu"),role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-image-styles")}},n.createElement(a.Checkbox,{checked:function(){return!e.model.foreground},onChange:this.bindFn(this.onToggleForeground),ariaLabel:function(){return e.controller.s("graphing-calculator-button-place-image-behind-graphs")}},(function(){return e.controller.s("graphing-calculator-button-place-image-behind-graphs")}))),n.createElement(h,{predicate:this.bindFn(this.shouldShowClickable)},(function(){return n.createElement("div",null,n.createElement(a.Checkbox,{checked:function(){return!!e.model.clickableInfo.enabled},onChange:function(t){e.controller.dispatch({type:"set-clickableinfo-prop",id:e.model.id,prop:"enabled",value:t})},ariaLabel:function(){return e.controller.s("graphing-calculator-button-clickable")}},(function(){return e.controller.s("graphing-calculator-button-clickable")})))})),n.createElement(h,{predicate:function(){return i.canConvertToDraggableImage(e.model)}},(function(){return n.createElement("div",{class:n.const("dcg-convert-btn-container")},n.createElement("span",{class:n.const("dcg-btn dcg-btn-light-gray dcg-btn-small"),onTap:function(){return e.makeDraggable()}},(function(){return e.controller.s("graphing-calculator-button-make-draggable")})))})),n.createElement(h,{predicate:function(){return e.shouldShowDraggableCheckbox()}},(function(){return n.createElement("div",{class:n.const("dcg-draggable-checkbox-container")},n.createElement(a.Checkbox,{checked:function(){return i.isActuallyDraggable(e.model)},onChange:e.bindFn(e.onToggleDraggable),ariaLabel:function(){return e.controller.s("graphing-calculator-button-draggable")}},(function(){return e.controller.s("graphing-calculator-button-draggable")})))})),n.createElement(h,{predicate:function(){return e.controller.areImagesEnabled()}},(function(){return n.createElement(l.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.controller.s("graphing-calculator-button-change-image")},onFileChange:function(t){return e.insertFiles(t)},location:e.const({type:"change-image-btn",id:e.id})},n.createElement("div",{class:n.const("dcg-action-changeimage")},(function(){return e.controller.s("graphing-calculator-button-change-image")})))}))))},f.prototype.onToggleDraggable=function(){this.controller.dispatch({type:"set-image-draggable",id:this.id,draggable:!this.model.draggable})},f.prototype.onToggleForeground=function(e){this.controller.dispatch({type:"set-image-in-foreground",id:this.id,foreground:!e})},f.prototype.onSelectOpacity=function(e){this.controller.dispatch({type:"set-image-opacity",id:this.id,opacity:e})},f.prototype.isOpacitySelected=function(e){return this.model.opacity===e},f.prototype.insertFiles=function(e){this.controller.dispatch({type:"change-image",files:e,id:this.id})},f.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL||(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+c.coerceURL(this.model.image_url)+'")'),this.lastEncodedURL},f.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()},f.prototype.makeDraggable=function(){this.controller.dispatch({type:"convert-image-to-draggable",id:this.model.id})},f.prototype.shouldShowDraggableCheckbox=function(){var e=i.getCenterExternalReferencedModel(this.model);return!!e&&o.isPotentiallyMovable(e)},f);function f(){return null!==u&&u.apply(this,arguments)||this}t.ImageOptionsView=g})),i("loadcss!expressions/slider-speed-view",(function(){})),i("expressions/slider_speed_view",["require","exports","tslib","underscore","lib/aria","dcgview","core/graphing-calc/json/expression","loadcss!./slider-speed-view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],c=n.min(l),u=n.max(l),d=(s=o.Class,r.__extends(p,s),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},p.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:o.const("true")},o.createElement("span",{class:function(){return{"dcg-action-slower":!0,"dcg-disabled":e.isSlowerDisabled()}},onTap:function(){return e.animateSlower()},role:o.const("button"),"aria-label":function(){return e.getSlowerAriaLabel()},tabindex:function(){return e.isSlowerDisabled()?-1:0},"aria-disabled":function(){return e.isSlowerDisabled()}},o.createElement("i",{class:o.const("dcg-icon-show")})),o.createElement("span",{class:o.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),o.const("x")),o.createElement("span",{class:function(){return{"dcg-action-faster":!0,"dcg-disabled":e.isFasterDisabled()}},onTap:function(){return e.animateFaster()},role:o.const("button"),"aria-label":function(){return e.getFasterAriaLabel()},tabindex:function(){return e.isFasterDisabled()?-1:0},"aria-disabled":function(){return e.isFasterDisabled()}},o.createElement("i",{class:o.const("dcg-icon-show")})))},p.prototype.computeSpeed=function(){var e=a.DEFAULT_SLIDER_PERIOD/this.model.slider.animationPeriod;return Number(e.toFixed(3))},p.prototype.isSlowerDisabled=function(){return c>=this.computeSpeed()},p.prototype.isFasterDisabled=function(){return u<=this.computeSpeed()},p.prototype.animateSlower=function(){var e=this.computeSpeed(),t=n.filter(l,(function(t){return t<e}));0!==t.length&&this.setPeriodFromSpeed(n.max(t))},p.prototype.animateFaster=function(){var e=this.computeSpeed(),t=n.filter(l,(function(t){return e<t}));0!==t.length&&this.setPeriodFromSpeed(n.min(t))},p.prototype.setPeriodFromSpeed=function(e){var t=a.DEFAULT_SLIDER_PERIOD/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:t}),i.alert(this.controller.s("graphing-calculator-narration-slider-animating-at-speed",{speed:e+""}))},p.prototype.getSlowerAriaLabel=function(){return this.controller.s("graphing-calculator-narration-slider-animate-slower")},p.prototype.getFasterAriaLabel=function(){return this.controller.s("graphing-calculator-narration-slider-animate-faster")},p);function p(){return null!==s&&s.apply(this,arguments)||this}t.default=d})),i("loadcss!expressions/slider-options-view",(function(){})),i("expressions/slider-options-view",["require","exports","tslib","dcgview","core/types/slider-loop-modes","../lib/tooltip","./slider_speed_view","loadcss!toggle","loadcss!./slider-options-view"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderOptionsView=void 0;var s,l=n.Components.For,c=(s=n.Class,r.__extends(u,s),u.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},u.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-slider-options-view dcg-options-menu")},n.createElement("div",{class:n.const("dcg-triangle")}),n.createElement("div",{class:n.const("dcg-slider-menu")},n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-slider-animation-mode")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},(function(){return e.controller.s("graphing-calculator-heading-slider-animation-mode")})),n.createElement(l,{each:this.bindFn(this.getAnimationOptions),key:function(e){return e.key}},n.createElement("div",{class:n.const("dcg-toggle")},(function(t){return n.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.isSelected(t.key)}},role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return t.aria},"aria-pressed":function(){return e.isSelected(t.key)},onTap:function(){return e.props.controller().dispatch({type:"set-slider-loopmode",id:e.props.model().id,loopMode:t.key})}},n.createElement(o.Tooltip,{tooltip:function(){return t.aria},offset:function(){return{top:5}},gravity:e.getAnimationOptionTooltipGravity(t)},n.createElement("i",{class:function(){return i.getSliderIcon(t.key)}})))}))))),n.createElement("div",{class:n.const("dcg-slider-menu dcg-slider-speed-menu"),role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-heading-slider-speed")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},(function(){return e.controller.s("graphing-calculator-heading-slider-speed")})),n.createElement("div",{class:n.const("dcg-slider-speed-container")},n.createElement(a.default,r.__assign({},this.props)))))},u.prototype.getAnimationOptionTooltipGravity=function(e){return this.getAnimationOptions()[0].key===e.key?this.const("se"):this.const("s")},u.prototype.getAnimationOptions=function(){return[{key:i.SliderLoopMode.LOOP_FORWARD_REVERSE,aria:this.controller.s("graphing-calculator-narration-slider-loop-forwards-and-backwards")},{key:i.SliderLoopMode.LOOP_FORWARD,aria:this.controller.s("graphing-calculator-narration-slider-repeat-one-direction")},{key:i.SliderLoopMode.PLAY_ONCE,aria:this.controller.s("graphing-calculator-narration-slider-play-once")},{key:i.SliderLoopMode.PLAY_INDEFINITELY,aria:this.controller.s("graphing-calculator-narration-slider-play-indefinitely")}]},u.prototype.isSelected=function(e){return this.model.slider.loopMode===e},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.SliderOptionsView=c})),i("loadcss!expressions/item-settings-view",(function(){})),i("expressions/item-settings-view",["require","exports","tslib","dcgview","keys","underscore","jquery","./expression-menus/expression-options-menu-view","./expression-menus/table-options-menu-view","./image_options_view","./slider-options-view","loadcss!./item-settings-view"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemSettingsView=void 0;var d,p=n.Components.Switch,h=':input, [role="textbox"], [tabindex="0"]:visible',g=(d=n.Class,r.__extends(f,d),f.prototype.init=function(){this.controller=this.props.controller()},f.prototype.template=function(){var e=this;return n.createElement(p,{key:this.bindFn(this.getActiveGuid)},(function(){var t=e.controller.getOpenItemMenu();return e.registeredChildRepositionCb=void 0,t?"expression"===t.type?n.createElement("div",{class:n.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},n.createElement(s.ExpressionOptionsMenuView,{controller:e.props.controller,model:function(){return t.model},registerRepositionCb:function(t){e.registeredChildRepositionCb=t}})):"image"===t.type?n.createElement("div",{class:n.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},n.createElement(c.ImageOptionsView,{controller:e.props.controller,model:function(){return t.model}})):"table-column"===t.type?n.createElement("div",{class:n.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},n.createElement(l.TableOptionsMenuView,{controller:e.props.controller,model:function(){return t.model}})):"slider"===t.type?n.createElement("div",{class:n.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},n.createElement(u.SliderOptionsView,{controller:e.props.controller,model:function(){return t.model}})):t:n.createElement("span",null)}))},f.prototype.getActiveGuid=function(){var e=this.controller.getOpenItemMenu();if(e)return e.model.guid},f.prototype.didMountView=function(e){var t=this;this.guid=o.uniqueId("dcg-item-settings-view"),this.openView=e,this.positionMenu(),this.moveFocusIfAppropriate(),a(document.body).on("keydown."+this.guid,(function(e){var r=i.lookup(e);"Esc"===r?t.hideOptions():"Tab"!==r||e.altKey||e.ctrlKey||e.metaKey||(e.shiftKey?e.shiftKey&&(t.isIconModelFocused()?(e.preventDefault(),e.stopPropagation(),t.focusLastOption()):t.isFirstOptionViewFocused()?(e.preventDefault(),e.stopPropagation(),t.focusIcon()):t.focusAnywhere()):t.isIconModelFocused()?(e.preventDefault(),e.stopPropagation(),t.focusFirstOption()):t.isLastOptionViewFocused()?(e.preventDefault(),e.stopPropagation(),t.focusIcon()):t.focusAnywhere())})),requestAnimationFrame((function(){t.openView&&t.controller.getExppanelSelectorOrThrow().on("scroll."+t.guid,(function(){t.hideOptions()}))})),a(document.body).on("dcg-tapstart."+this.guid,(function(e){if(t.openView){var r=a(e.target),n=t.controller.getActiveIcon();if(!n||!r.closest(n).length)if(r.closest(t.openView).length){if(!r.is(h))return;var i=t.getDOMTabStops(),o=i.$first,s=i.$last;void 0!==o&&o.is(r)?t.focusFirstOption():void 0!==s&&s.is(r)?t.focusLastOption():e.target.hasAttribute("dataLabelAttributeValue")||"fill-opacity"===e.target.getAttribute("dataLabelAttributeValue")||t.focusAnywhere()}else r.closest(".dcg-keypad,.dcg-show-keypad-container").length||t.hideOptions()}}))},f.prototype.didUnmountView=function(){a(document.body).off("."+this.guid),this.openView=void 0},f.prototype.didUpdate=function(){this.positionMenu(),this.moveFocusIfAppropriate()},f.prototype.moveFocusIfAppropriate=function(){var e=this.getDOMTabStops(),t=e.$first,r=e.$last;void 0!==t&&void 0!==r&&(this.shouldMoveFocusToFirstOption()?t.trigger("focus"):this.shouldMoveFocusToLastOption()&&r.trigger("focus"))},f.prototype.open=function(){return!!this.controller.getOpenItemMenu()},f.prototype.hideOptions=function(){this.open()&&this.controller.dispatch({type:"close-item-settings-menu"})},f.prototype.positionMenu=function(){var e,t,r,n,i,o,s,l,c=this.controller.getActiveIcon();c&&this.openView&&(e=this.controller.getExppanelSelectorOrThrow().closest(".dcg-container")[0].getBoundingClientRect(),r=(t=c[0].getBoundingClientRect()).top-e.top,n=t.left-e.left,o=(i=this.controller.computeMajorLayout()).list.top+i.list.height,s=i.keypad.top,l=Math.min(o,s)+e.top-t.top,a(this.openView).css({top:r+"px",left:n+"px",display:"block"}),this.registeredChildRepositionCb&&this.registeredChildRepositionCb(l))},f.prototype.isIconModelFocused=function(){var e=this.controller.getOpenItemMenu();return void 0!==e&&("slider"===e.type?this.controller.isFocusLocationFocused({type:"slider-animation-properties-icon",id:e.model.id}):"image"===e.type?this.controller.isFocusLocationFocused({type:"image-icon",id:e.model.id}):"table-column"===e.type?this.controller.isFocusLocationFocused({type:"table-icon",id:e.model.table.id,columnId:e.model.id}):this.controller.isFocusLocationFocused({type:"expression-icon",id:e.model.id}))},f.prototype.focusIcon=function(){this.controller.focusOpenMenuIcon()},f.prototype.isFirstOptionViewFocused=function(){var e=this.getDOMTabStops().$first;return void 0!==e&&e.is(":focus")},f.prototype.shouldMoveFocusToFirstOption=function(){var e=this.controller.getOpenItemMenu();return void 0!==e&&!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:e.model.id,location:"start"})},f.prototype.focusFirstOption=function(){var e=this.controller.getOpenItemMenu();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:e.model.id,location:"start"}})},f.prototype.isLastOptionViewFocused=function(){var e=this.getDOMTabStops().$last;return void 0!==e&&e.is(":focus")},f.prototype.shouldMoveFocusToLastOption=function(){var e=this.controller.getOpenItemMenu();return void 0!==e&&!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:e.model.id,location:"end"})},f.prototype.focusLastOption=function(){var e=this.controller.getOpenItemMenu();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:e.model.id,location:"end"}})},f.prototype.focusAnywhere=function(){var e=this.controller.getOpenItemMenu();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:e.model.id,location:"anywhere"}})},f.prototype.getDOMTabStops=function(){if(void 0===this.openView)return{};var e=a(this.openView).find(h);return{$first:e.first(),$last:e.last()}},f);function f(){return null!==d&&d.apply(this,arguments)||this}t.ItemSettingsView=g})),i("loadcss!expressions/expression-search-bar",(function(){})),i("expressions/expression-search-bar",["require","exports","tslib","dcgview","../dcgview-helpers/mathquill-view","main/mathquill-operators","loadcss!./expression-search-bar"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionSearchBar=void 0;var a,s=(a=n.Class,r.__extends(l,a),l.prototype.init=function(){this.controller=this.props.controller()},l.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-expression-search-bar":!0,"dcg-expressions-scrolled":e.props.expsScrolled()}}},n.createElement("div",{class:n.const("dcg-search-mathquill-container")},n.createElement(i.default,{hasError:this.const(!1),getAriaPostLabel:this.const(""),capExpressionSize:this.const(!1),onUserChangedLatex:this.bindFn(this.onChange),latex:function(){return e.controller.getExpressionSearchStr()},getAriaLabel:function(){return"search through expressions"},isFocused:this.bindFn(this.isFocused),config:this.bindFn(this.getMQConfig),onFocusedChanged:this.bindFn(this.onFocusChanged),selectOnFocus:this.const(!0),noFadeout:this.const(!0),onUserPressedKey:function(t,r){if("Esc"===t)e.closeSearch();else if("Enter"===t)e.controller.dispatch({type:"update-expression-search-str",str:e.controller.getExpressionSearchStr()});else{var n=i.default.getFocusedMathquill();if(!n)return;n.keystroke(t,r),e.onChange(n.latex())}}}),n.createElement("i",{class:n.const("dcg-icon-search")}),n.createElement("i",{onTap:function(){return e.closeSearch()},class:n.const("dcg-icon-remove dcg-do-not-blur")})),n.createElement("div",{class:n.const("dcg-search-clear"),tabindex:n.const(0),role:n.const("button"),onTap:function(){return e.onChange("")}},(function(){return e.controller.s("graphing-calculator-button-expression-search-clear")})))},l.prototype.closeSearch=function(){this.controller.dispatch({type:"close-expression-search"})},l.prototype.onChange=function(e){this.controller.dispatch({type:"update-expression-search-str",str:e})},l.prototype.onFocusChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"search-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"search-expressions"}})},l.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"search-expressions"===e.type},l.prototype.getMQConfig=function(){return{autoOperatorNames:o.getAutoOperators()}},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.ExpressionSearchBar=s})),i("loadcss!expressions/list-view",(function(){})),i("loadcss!expressions",(function(){})),i("expressions/list-view",["require","exports","tslib","touchtracking","keys","dcgview","jquery","underscore","lib/conditional_blur","./expression_view","./text_view","./simulation-view","./table-view","./folder-view","./image-view","./shell_view","./drag_container_view","main/data_helpers","./new_expression_view","./expressions-header","main/load-graph-from-link","lib/get-clipboard-data","graphing-calc/models/abstract-item","graphing-calc/models/list","./exp-list-resizer","./item-settings-view","./expression-search-bar","loadcss!./list-view","loadcss!expressions","jquery.handleevent"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var I,C=o.Components,L=C.If,P=C.For,T=C.Switch,A=C.SwitchUnion,O=(I=o.Class,r.__extends(D,I),D.prototype.init=function(){this.controller=this.props.controller()},D.prototype.template=function(){var e=this;return o.createElement("div",{didMount:this.bindFn(this.didMountContainer)},o.createElement("div",{class:o.const("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:function(){return e.computeExppanelOuterStyle()}},o.createElement(L,{predicate:function(){return e.controller.isFileDraggedOver()}},(function(){return o.createElement("div",{class:o.const("dcg-drop-image")},o.createElement("span",null,(function(){return e.controller.s("graphing-calculator-label-drop-image-here")})))})),o.createElement("div",{class:function(){return{"dcg-exppanel-container":!0,"dcg-add-shadow":e.controller.shouldRenderList()}},style:function(){return{transform:e.controller.isListVisible()?void 0:e.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"}}},o.createElement(L,{predicate:function(){return e.controller.shouldRenderList()}},(function(){return o.createElement(b.default,{controller:e.props.controller,expsScrolled:function(){return!!e.exppanel&&0<e.exppanel.scrollTop}})})),o.createElement(L,{predicate:function(){return e.controller.getExpressionSearchOpen()}},(function(){return o.createElement(M.ExpressionSearchBar,{controller:e.props.controller,expsScrolled:function(){return!!e.exppanel&&0<e.exppanel.scrollTop}})})),o.createElement(L,{predicate:function(){return e.controller.shouldRenderList()}},(function(){return o.createElement("div",{class:function(){return{"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":e.controller.isDragDropActive(),"dcg-has-background-color":e.controller.hasBackgroundColor()}},style:function(){return{background:e.controller.getBackgroundColor()}},onPaste:e.bindFn(e.onPaste),onTapStart:e.bindFn(e.onExppanelTapstart),didMount:e.bindFn(e.didMountExppanel)},o.createElement("div",{class:o.const("dcg-expressionlist"),role:o.const("complementary"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-expression-list")}},o.createElement(P,{each:function(){return e.controller.getAllItemModels()},key:function(e){return e.guid}},o.createElement("span",{class:o.const("dcg-template-expressioneach")},(function(t){return A((function(){return S.getDisplayState(t)}),{shell:function(){return e.makeShellViewForModel(t)},render:function(){return e.makeViewForModel(t)},none:function(){}})}))),o.createElement(v.default,{controller:function(){return e.props.controller()}}),o.createElement(T,{key:function(){return e.controller.getDraggedItemId()}},(function(t){if(t){var r=e.controller.getItemModel(t);return o.createElement(m.default,{controller:e.props.controller},e.makeDragCopyViewForModel(r))}})),o.createElement("div",{class:o.const("dcg-expressions-branding"),style:function(){return{opacity:e.controller.isKeypadOpen()?0:1}}},o.createElement(L,{predicate:function(){return e.controller.canEditOnWeb()}},(function(){return o.createElement("span",{role:o.const("link"),tabindex:o.const(0),class:o.const("dcg-edit-branding"),onTap:function(){return e.controller.dispatch({type:"open-on-web"})}},o.createElement("div",{class:o.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-graph-on-desmos")}},(function(){return e.controller.s("graphing-calculator-button-edit-graph-on-desmos-logo")})),o.createElement("i",{class:o.const("dcg-icon-desmos")}))})),o.createElement(L,{predicate:function(){return!e.controller.canEditOnWeb()}},(function(){return o.createElement("span",{class:o.const("dcg-noedit-branding")},o.createElement("div",{class:o.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-powered-by-desmos")}},(function(){return e.controller.s("graphing-calculator-label-powered-by")})),o.createElement("i",{class:o.const("dcg-icon-desmos")}))})))))}))),o.createElement(_.ExpListResizer,{controller:this.props.controller})),o.createElement(k.ItemSettingsView,{controller:this.props.controller}))},D.prototype.makeShellViewForModel=function(e){return o.createElement(f.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(){},isDragCopy:function(){return!1}})},D.prototype.computeExppanelOuterStyle=function(){this.getListBottomAndUpdateLastExpressionPadding();var e=this.controller.computeMajorLayout().list,t=e.top;return 0<e.top&&!this.controller.isListVisible()&&(t-=e.height),{position:"absolute",left:"0px",top:t+"px",width:e.width+"px",height:e.height+"px"}},D.prototype.makeDragCopyViewForModel=function(e){return this.makeViewForModel(e,!0)},D.prototype.makeViewForModel=function(e,t){var r,n=this;if(void 0===t&&(t=!1),"table"===e.type)r=o.createElement(p.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("folder"===e.type)r=o.createElement(h.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("text"===e.type)r=o.createElement(u.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("simulation"===e.type)r=o.createElement(d.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("image"===e.type)r=o.createElement(g.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else{if("expression"!==e.type)return;r=o.createElement(c.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}})}return r},D.prototype.didUnmount=function(){a(document.documentElement).off("."+this.guid)},D.prototype.didMountContainer=function(e){this.node=e,a(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))},D.prototype.didMountExppanel=function(e){this.exppanel=e},D.prototype.getListBottomAndUpdateLastExpressionPadding=function(){var e=this.controller.getKeypadHeight(),t=this.__listBottom||0;return 0===(this.__listBottom=e)&&0!==t&&n.isTapActive()&&this.padLastExpressionUntilTapEnd(t),e},D.prototype.padLastExpression=function(e){a(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom",e+"px")},D.prototype.unpadLastExpression=function(){a(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom","0")},D.prototype.padLastExpressionUntilTapEnd=function(e){var t=this;this.padLastExpression(e),a(document).on("dcg-tap.animating-bottom",(function(){t.unpadLastExpression(),a(document).off("dcg-tap.animating-bottom")}))},D.prototype.handleKeyDown=function(e){if(!this.controller.inAudioTraceMode()){var t=i.lookup(e),r=i.lookupChar(e),n=this.controller.getSelectedItem();if(n){var o=this.controller.getFocusLocation();if(e.ctrlKey&&e.shiftKey&&!e.metaKey&&!e.altKey&&void 0!==o){if("O"===r){e.preventDefault(),e.stopPropagation();var s=void 0;if("expression"===n.type)n.sliderExists?(s={type:"slider",model:n,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:n.id}})):(s={type:"expression",model:n,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:n.id}}));else if("image"===n.type)s={type:"image",model:n,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:n.id}});else if("table"===n.type&&"table"===o.type){var l=o.location;if(!l)return;var c=n.columnModels[l.column];if(!c)return;if(""===c.latex)return;if(!this.controller.getGraphSettings().config.graphpaper)return;if(c.error)return;if(0===c.index)return;s={type:"table-column",model:c,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"table-icon",id:n.id,columnId:c.id}})}if(!s)return;return void this.controller.dispatch({type:"toggle-item-settings-menu",menu:s})}if("D"===r)return e.preventDefault(),e.stopPropagation(),void this.controller.dispatch({type:"delete-item-and-animate-out",id:n.id,setFocusAfterDelete:!0})}if(!this.controller.isInEditListMode()||e.altKey||e.ctrlKey||e.metaKey){if((!document.activeElement||!a.contains(document.body,document.activeElement))&&!a(e.target).closest(this.exppanel).length&&a.contains(document.documentElement,e.target))switch(t){case i.UP:e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case i.DOWN:e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case i.ESCAPE:e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case i.RIGHT:e.preventDefault(),n&&("expression"===n.type&&n.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:n.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:n.id}})):this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"start"}));break;case i.TAB:e.preventDefault(),n&&this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"start"});break;case i.LEFT:e.preventDefault(),n&&("expression"===n.type&&n.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:n.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:n.id}})):this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"end"}));break;case i.BACKSPACE:e.preventDefault(),n&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case i.DELETE:e.preventDefault(),n&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case i.ENTER:e.wasHandled("create-expression-with-keyboard")||(e.preventDefault(),e.handle("create-expression-with-keyboard"),n&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(e.metaKey||e.ctrlKey||t===i.SHIFT||t===i.SPACEBAR)return;n&&("table"===n.type||this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"end"}))}}else if(t===i.TAB&&void 0!==o){var u=this.controller.getItemModelByIndex(0);if(!u)return;var d=("readonly-expression"===o.type&&"expression"===u.type||"table-container"===o.type&&"table"===u.type||o.type===u.type)&&o.id===u.id,p={type:"edit-list-toggle"},h=this.controller.isFocusLocationFocused(p);e.shiftKey&&d?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:p})):!e.shiftKey&&h&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:u.id,where:"table"===u.type?"container":void 0}))}else if(t===i.UP||t===i.DOWN){var g=this.controller.getListModel(),f=t===i.UP?E.findPrevSelectableItem(g,n.index):E.findNextSelectableItem(g,n.index);if(!f)return;this.controller.dispatch({type:"move-focus-to-item",id:f.id,where:"table"===f.type?"container":"start"})}}}},D.prototype.onDragPending=function(e,t){var r=this;e.preventDefault(),l.default();var n=e.touches[0].clientY,i=n,o=setTimeout((function(){a(document).off(".dragpending"),r.onDragStart(e,t,n,i)}),500);a(document).on("dcg-tapmove.dragpending",(function(s){i=s.touches[0].clientY,3<Math.abs(i-n)&&(clearTimeout(o),a(document).off(".dragpending"),r.onDragStart(e,t,n,i))})),a(document).on("dcg-tapend.dragpending",(function(){clearTimeout(o),a(document).off(".dragpending")}))},D.prototype.onDragStart=function(e,t,r,n){1===e.touches.length&&(e.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",id:t,grabY:r,mouseY:n}))},D.prototype.onExppanelTapstart=function(e){"mouse"!==e.device&&0===a(e.target).closest(".dcg-expressionitem").length&&l.default()},D.prototype.onPaste=function(e){var t=this,r=this.controller.getGraphSettings().config,n=w.default(e);if(n){var i=/^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(n),o=this.controller.getSelectedItem();if(r.pasteGraphLink&&o&&"folder"===o.type&&i&&""===o.title&&0===this.controller.getNumberOfItemsInFolder(o.id))return e.stopPropagation(),e.preventDefault(),void x.default(this.controller,n,"inject",(function(e,t){return t(null,e)}));if(!o||"text"!==o.type&&"folder"!==o.type)if(r.pasteGraphLink&&i){e.stopPropagation(),e.preventDefault();var a=r.pasteGraphLinkCallback?r.pasteGraphLinkCallback:function(e,t){return t(null,e)};x.default(this.controller,n,"set-state",a)}else{if(r.pasteTableData){var s=y.parse(n);if(void 0!==s)return e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"paste-table",data:s})}var l,c=y.getExpressions(n);void 0===c||(e.stopPropagation(),e.preventDefault(),l=[],1===c.length&&c[0].numberList?this.controller.dispatch({type:"append-number-list",latex:c[0].content}):(c.forEach((function(e){l.push({type:"expression",id:t.controller.generateId(),latex:e.content})})),this.controller.dispatch({type:"insert-several-expressions",expressions:l})))}}},D.prototype.onDrop=function(e){var t;!this.controller.areImagesEnabled()||(t=e.dataTransfer&&e.dataTransfer.files)&&this.controller.dispatch({type:"new-images",files:t})},D);function D(){var e=null!==I&&I.apply(this,arguments)||this;return e.guid=s.uniqueId("listView"),e}t.default=O})),i("graphing-calc/keypads/dcgview-graphing",["require","exports","tslib","dcgview"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("loadcss!keypad/btn",(function(){})),i("keypad/btn",["require","exports","tslib","dcgview","loadcss!./btn"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-keypad-btn-container":!0,"dcg-keypad-short-btn":"popover-short"===e.props.style(),"dcg-keypad-very-short-btn":"popover-very-short"===e.props.style(),"dcg-disabled":e.isDisabled()}},style:function(){return{"flex-grow":e.getColSpan()}}},n.createElement("span",{role:n.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),onTap:function(){e.isDisabled()||e.props.onTap()}},n.createElement("span",{class:n.const("dcg-keypad-btn-content")},this.children)))},a.prototype.getClasses=function(){var e={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},t=this.props.style();switch(t){case"default":e["dcg-btn-light-on-gray"]=!0;break;case"highlight":e["dcg-btn-dark-on-gray"]=!0;break;case"popover-short":case"popover-very-short":case"popover":e["dcg-btn-light-gray"]=!0;break;case"blue":e["dcg-btn-short-blue"]=!0;break;case"tall-blue":e["dcg-btn-tall-blue"]=!0;break;default:return t}return e},a.prototype.isActive=function(){return!!this.props.active&&this.props.active()},a.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},a.prototype.getColSpan=function(){return this.props.colspan?this.props.colspan():void 0},a.prototype.isDisabled=function(){return this.props.disabled&&this.props.disabled()},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("keypad/keys",["require","exports","./btn","dcgview-helpers/static-mathquill-view","dcgview"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spacer=t.view=void 0;var o=i.Components,a=o.IfElse,s=o.If;function l(e,t){return void 0===e?i.const(t):"function"==typeof e?e:i.const(e)}function c(e){return function(t,o,s,c){return void 0===s&&(s={}),i.createElement(r.default,{command:i.const(e.command||e.typedText||e.keys[0]),ariaLabel:function(){return e.ariaLabelKey?c(e.ariaLabelKey):e.typedText||e.keys[0]},colspan:l(s.colspan,1),style:function(){return s.style||"default"},onTap:function(){return o({type:"keypad/type-text",text:e.typedText||e.keys[0]})}},a((function(){return"{"===e.keys[0]||"["===e.keys[0]}),{true:function(){return i.createElement("span",{class:i.const("dcg-mq-math-mode"),style:i.const("font-size: 120%")},i.const(e.keys[0]),i.const(" "),i.createElement("span",{style:i.const("color: #999")},i.const(e.keys[1])))},false:function(){return i.createElement("span",{class:i.const("dcg-either-or-btn")},i.createElement(n.default,{config:i.const({}),latex:i.const(e.keys[0])}),i.createElement("span",{style:i.const("color: #999")},i.createElement(n.default,{config:i.const({}),latex:i.const(e.keys[1])})))}}))}}function u(e){return function(t,o,s,c){return void 0===s&&(s={}),i.createElement(r.default,{command:i.const(e.command||e.typedText||e.keys[1]),ariaLabel:function(){return e.ariaLabelKey?c(e.ariaLabelKey):e.typedText||e.keys[0]},colspan:l(s.colspan,1),style:l(s.style,"default"),onTap:function(){return o({type:"keypad/type-text",text:e.typedText||e.keys[1]})}},a((function(){return"}"===e.keys[1]||"]"===e.keys[1]}),{true:function(){return i.createElement("span",{class:i.const("dcg-mq-math-mode"),style:i.const("font-size: 120%")},i.createElement("span",{style:i.const("color: #999")},i.const(e.keys[0])),i.const(" "),i.const(e.keys[1]))},false:function(){return i.createElement("span",null,i.createElement("span",{style:i.const("color: #999")},i.createElement(n.default,{config:i.const({}),latex:i.const(e.keys[0])})),i.createElement(n.default,{config:i.const({}),latex:i.const(e.keys[1])}))}}))}}function d(e){return function(t,n,o,a){return void 0===o&&(o={}),i.createElement(r.default,{command:i.const(e.command),ariaLabel:function(){return e.ariaLabelKey?a(e.ariaLabelKey):t},colspan:l(o.colspan,1),style:function(){return o.style||"default"},onTap:function(){n({type:"keypad/audio-trace",command:e.command})}},i.createElement(s,{predicate:i.const(void 0!==e.iconClass)},(function(){return i.createElement("span",{class:function(){return{"dcg-button-icon":!0,"dcg-icon-only":void 0===e.contentKey}}},i.createElement("i",{class:i.const(e.iconClass)}))})),i.createElement(s,{predicate:i.const(void 0!==e.contentKey)},(function(){return i.createElement("span",null,(function(){return a(e.contentKey)||t}))})))}}function p(e){return function(t,o,a,s){return void 0===a&&(a={}),i.createElement(r.default,{command:i.const(e.command||t),ariaLabel:function(){return e.ariaLabelKey?s(e.ariaLabelKey):t},colspan:l(a.colspan,1),style:function(){return a.style||"default"},onTap:function(){return o({type:"keypad/type-text",text:e.typedText||t})}},i.createElement(n.default,{config:i.const({}),latex:i.const(e.content||t)}))}}function h(e){return function(t,n,o,a){return void 0===o&&(o={}),i.createElement(r.default,{command:i.const(e.command||t),ariaLabel:function(){return e.ariaLabelKey?a(e.ariaLabelKey):t},colspan:l(o.colspan,1),style:function(){return o.style||"default"},onTap:function(){return n({type:"keypad/type-text",text:e.typedText||t})}},i.createElement("span",{class:i.const("dcg-mq-math-mode")},i.const(e.content||t)))}}function g(e){return function(t,o,a,s){return void 0===a&&(a={}),i.createElement(r.default,{command:i.const(t),ariaLabel:function(){return e.ariaLabelKey?s(e.ariaLabelKey):t},colspan:l(a.colspan,1),style:function(){return a.style||"default"},onTap:function(){return o({type:"keypad/type-text",text:t+"("})}},i.createElement(n.default,{config:i.const({}),latex:i.const(t)}))}}function f(e){return function(t,o,a,s){return void 0===a&&(a={}),i.createElement(r.default,{command:i.const(e.command),ariaLabel:function(){return e.ariaLabelKey?s(e.ariaLabelKey):e.command},colspan:l(a.colspan,1),style:function(){return a.style||"default"},onTap:function(){o({type:"keypad/custom-command",command:e.command})}},i.createElement(n.default,{config:i.const({}),latex:i.const(e.content)}))}}var m={"{":h({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":h({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":p({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":p({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:p({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":p({content:"Ã·",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":p({content:"Ã",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"-":p({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":p({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":p({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-ans")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/type-text",text:e})}},i.const("ans"))},enter:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-enter")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Enter"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-enter")}))},shift:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-shift")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},active:l(n.active,!1),onTap:function(){return t({type:"keypad/shift"})}},i.createElement("i",{class:i.const("dcg-icon-shift")}))},left:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-left-arrow")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Left"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-left")}))},right:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-right-arrow")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Right"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-right")}))},123:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-toggle-numbers")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/123"})}},i.const("1 2 3"))},ABC:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-toggle-letters")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/abc"})}},i.const("A B C"))},Audio:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-toggle-audio-trace")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"on"})}},i.createElement("i",{class:i.const("dcg-icon-volume")}))},backspace:function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("shared-calculator-narration-keypad-key-backspace")},colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Backspace"})}},i.createElement("i",{class:i.const("dcg-icon-delete")}))},pi:p({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:p({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:p({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:p({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:p({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),"a^2":f({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":f({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":f({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":p({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:p({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":f({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":f({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":p({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":p({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:f({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:f({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:g({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:g({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:g({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),sec:g({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:g({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:g({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:g({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:g({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:g({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:g({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:g({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:g({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:f({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:f({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:f({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:f({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:f({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:f({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":p({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":p({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:g({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),log:g({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:g({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:g({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:g({}),varp:g({}),nCr:g({}),loga:f({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:g({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:g({}),nPr:g({}),total:g({}),length:g({}),min:g({}),max:g({}),cov:g({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),corr:g({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:g({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:g({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:g({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:g({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),midpoint:g({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),mean:g({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:g({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:g({}),"e^x":p({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":p({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":p({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:p({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:p({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:g({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:g({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:g({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:g({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":p({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":p({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:g({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:g({}),gcd:g({}),gcf:g({}),ddx:f({command:"ddx",content:"\\frac{d}{dx}"}),int:p({content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":p({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),exp:p({}),sign:g({}),normaldist:g({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:g({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),binomialdist:g({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:g({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:g({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:g({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:g({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:g({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:g({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ittest:g({ariaLabelKey:"shared-calculator-narration-keypad-key-ittest"}),ttest:g({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),tdist:g({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),pdf:g({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:g({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:g({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:g({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),sort:g({}),shuffle:g({}),join:g({}),"A^-1":f({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":f({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":f({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":p({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:g({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:g({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:g({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:p({}),b:p({}),c:p({}),d:p({}),e:p({}),f:p({}),g:p({}),h:p({}),i:p({}),j:p({}),k:p({}),l:p({}),m:p({}),n:p({}),o:p({}),p:p({}),q:p({}),r:p({}),s:p({}),t:p({}),u:p({}),v:p({}),w:p({}),x:p({}),boldX:p({content:"x",typedText:"x"}),y:p({}),boldY:p({content:"y",typedText:"y"}),z:p({}),A:p({}),B:p({}),C:p({}),D:p({}),E:p({}),F:p({}),G:p({}),H:p({}),I:p({}),J:p({}),K:p({}),L:p({}),M:p({}),N:p({}),O:p({}),P:p({}),Q:p({}),R:p({}),S:p({}),T:p({}),U:p({}),V:p({}),W:p({}),X:p({}),Y:p({}),Z:p({}),0:p({}),1:p({}),2:p({}),3:p({}),4:p({}),5:p({}),6:p({}),7:p({}),8:p({}),9:p({}),",":p({}),"=":p({}),"[":p({}),"]":p({}),"{}_left":c({keys:["{","}"]}),"{}_right":u({keys:["{","}"]}),"()_left":c({keys:["(",")"]}),"()_right":u({keys:["(",")"]}),"[]_left":c({keys:["[","]"]}),"[]_right":u({keys:["[","]"]}),",'_left":c({keys:[",","â²"]}),",'_right":u({keys:[",","â²"],typedText:"'"}),'"':p({}),"'":p({}),"~":p({}),":":p({}),">":p({}),"<":p({}),">=":p({content:"\\ge"}),"<=":p({content:"\\le"}),"!%_left":c({keys:["!","{}^{%}"]}),"!%_right":u({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":c({keys:["~","{}^{:}"]}),"~:_right":u({keys:["~","{}^{:}"],typedText:":"}),"audio-trace-off":d({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"volume-down":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-volume-down")},disabled:l(n.disabled,!1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"volume-down"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-volume-down")})))},"volume-up":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-volume-up")},disabled:l(n.disabled,!1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"volume-up"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-volume-up")})))},"speed-down":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-speed-down")},disabled:l(n.disabled,!1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"speed-down"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-hide")})))},"speed-up":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{command:i.const(e),ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-speed-up")},disabled:l(n.disabled,!1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"speed-up"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-show")})))},"previous-point":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-previous-point")},command:i.const(e),disabled:l(n.disabled,!1),colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"previous-point"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-thin-arrow-left")})))},"next-point":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-next-point")},command:i.const(e),disabled:l(n.disabled,!1),colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"next-point"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-thin-arrow-right")})))},"previous-poi":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-previous-poi")},command:i.const(e),disabled:l(n.disabled,!1),colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"previous-poi"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-hide")})))},"next-poi":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-next-poi")},command:i.const(e),disabled:l(n.disabled,!1),colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"next-poi"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-show")})))},"previous-curve":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-previous-curve")},command:i.const(e),disabled:l(n.disabled,!1),colspan:l(n.colspan,1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"previous-curve"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-caret-up")})))},"next-curve":function(e,t,n,o){return void 0===n&&(n={}),i.createElement(r.default,{ariaLabel:function(){return o("graphing-calculator-narration-keypad-key-next-curve")},command:i.const(e),disabled:l(n.disabled,!1),style:function(){return n.style||"default"},onTap:function(){return t({type:"keypad/audio-trace",command:"next-curve"})}},i.createElement("span",{class:i.const("dcg-button-icon dcg-icon-only")},i.createElement("i",{class:i.const("dcg-icon-caret-down")})))},"describe-point":d({contentKey:"graphing-calculator-button-keypad-describe-point",command:"describe-point"}),"describe-curve":d({contentKey:"graphing-calculator-button-keypad-describe-curve",command:"describe-curve"})};t.view=function(e,t,r){void 0===r&&(r={});var n=e.dispatch;return m[t](t,n,r,e.s)},t.spacer=function(e){return void 0===e&&(e=1),i.createElement("div",{style:i.const("flex-grow:"+e)})}})),i("keypad/dcgview-keypad",["require","exports","tslib","dcgview"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.init=function(){this.controller=this.props.controller()},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("loadcss!keypad/keypad",(function(){})),i("keypad/keypad",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./keypad"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=i.default,r.__extends(s,o),s.prototype.template=function(){return n.createElement("div",{class:n.const("dcg-basic-keypad dcg-do-not-blur")},this.children)},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=a})),i("loadcss!keypad/row",(function(){})),i("keypad/row",["require","exports","tslib","dcgview","loadcss!./row"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.template=function(){return n.createElement("div",{class:n.const("dcg-keypad-row")},this.children)},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("graphing-calc/keypads/qwerty",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.default,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"q"),o.view(this,"w"),o.view(this,"e"),o.view(this,"r"),o.view(this,"t"),o.view(this,"y"),o.view(this,"u"),o.view(this,"i"),o.view(this,"o"),o.view(this,"p")),n.createElement(s.default,null,o.view(this,"a"),o.view(this,"s"),o.view(this,"d"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"j"),o.view(this,"k"),o.view(this,"l"),o.view(this,"theta")),n.createElement(s.default,null,o.view(this,"shift",{colspan:1.364,style:"highlight"}),o.spacer(.136),o.view(this,"z"),o.view(this,"x"),o.view(this,"c"),o.view(this,"v"),o.view(this,"b"),o.view(this,"n"),o.view(this,"m"),o.spacer(.136),o.view(this,"backspace",{colspan:1.364,style:"highlight"})),n.createElement(s.default,null,o.view(this,"123",{colspan:1.818,style:"highlight"}),o.spacer(.182),o.view(this,"a_b"),o.view(this,"!%_left"),o.view(this,"[]_left"),o.view(this,"{}_left"),o.view(this,"~:_left"),o.view(this,",'_left"),o.spacer(.182),o.view(this,"enter",{colspan:1.818,style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("graphing-calc/keypads/qwerty-capital",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.default,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),n.createElement(s.default,null,o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),o.view(this,"tau")),n.createElement(s.default,null,o.view(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),o.spacer(.136),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.spacer(.136),o.view(this,"backspace",{colspan:1.364,style:"highlight"})),n.createElement(s.default,null,o.view(this,"123",{colspan:1.818,style:"highlight"}),o.spacer(.182),o.view(this,"a^b"),o.view(this,"!%_right"),o.view(this,"[]_right"),o.view(this,"{}_right"),o.view(this,"~:_right"),o.view(this,",'_right"),o.spacer(.182),o.view(this,"enter",{colspan:1.818,style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("graphing-calc/keypads/numbers",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row","keypad/btn"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,u=(c=i.default,r.__extends(d,c),d.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"boldX"),o.view(this,"boldY"),o.view(this,"a^2"),o.view(this,"a^b"),o.spacer(.5),o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/"),o.spacer(.5),n.createElement(l.default,{command:this.const("functions"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-functions")},colspan:this.const(2),style:this.const("highlight"),active:function(){return e.controller.isKeypadFunctionsPopoverOpen()},onTap:function(){return e.dispatch({type:"keypad/functions"})}},this.bindFn(this.getFuncsBtnText))),n.createElement(s.default,null,o.view(this,"("),o.view(this,")"),o.view(this,"<"),o.view(this,">"),o.spacer(.5),o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*"),o.spacer(.5),o.view(this,"left",{style:"highlight"}),o.view(this,"right",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"|a|"),o.view(this,","),o.view(this,"<="),o.view(this,">="),o.spacer(.5),o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-"),o.spacer(1),o.view(this,"backspace",{colspan:1.5,style:"highlight"})),n.createElement(s.default,null,n.createElement("div",{class:n.const("dcg-abc-audio-container")},n.createElement(l.default,{command:n.const("ABC"),colspan:this.const(1),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-toggle-letters")},style:this.const("highlight"),onTap:function(){e.dispatch({type:"keypad/abc"})}},(function(){return e.controller.getLayoutMeasurements().width<=600?e.controller.raw("ABC"):e.controller.raw("A B C")})),n.createElement(l.default,{command:n.const("Audio"),disabled:function(){return!e.controller.canAudioTrace()},ariaLabel:function(){return e.controller.s("graphing-calculator-narration-toggle-audio-trace")},colspan:this.const(1),style:function(){return"highlight"},onTap:function(){return e.dispatch({type:"keypad/audio-trace",command:"on"})}},n.createElement("i",{class:n.const("dcg-icon-volume")}))),o.view(this,"sqrt"),o.view(this,"pi"),o.spacer(.5),o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"="),o.view(this,"+"),o.spacer(.5),o.view(this,"enter",{colspan:2,style:"blue"})))},d.prototype.getFuncsBtnText=function(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")},d);function d(){return null!==c&&c.apply(this,arguments)||this}t.default=u})),i("graphing-calc/keypads/letters",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.default,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"a"),o.view(this,"b"),o.view(this,"c"),o.view(this,"d"),o.view(this,"e"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"i"),o.view(this,"j")),n.createElement(s.default,null,o.view(this,"k"),o.view(this,"l"),o.view(this,"m"),o.view(this,"n"),o.view(this,"o"),o.view(this,"p"),o.view(this,"q"),o.view(this,"r"),o.view(this,"s"),o.view(this,"t")),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight"}),o.view(this,"u"),o.view(this,"v"),o.view(this,"w"),o.view(this,"x"),o.view(this,"y"),o.view(this,"z"),o.view(this,"theta"),o.view(this,"backspace",{colspan:2,style:"highlight"})),n.createElement(s.default,null,o.view(this,"123",{colspan:2,style:"highlight"}),o.view(this,"a_b"),o.view(this,"!%_left"),o.view(this,"[]_left"),o.view(this,"{}_left"),o.view(this,"~:_left"),o.view(this,",'_left"),o.view(this,"enter",{colspan:2,style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("graphing-calc/keypads/letters-capital",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.default,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"A"),o.view(this,"B"),o.view(this,"C"),o.view(this,"D"),o.view(this,"E"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"I"),o.view(this,"J")),n.createElement(s.default,null,o.view(this,"K"),o.view(this,"L"),o.view(this,"M"),o.view(this,"N"),o.view(this,"O"),o.view(this,"P"),o.view(this,"Q"),o.view(this,"R"),o.view(this,"S"),o.view(this,"T")),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight"}),o.view(this,"U"),o.view(this,"V"),o.view(this,"W"),o.view(this,"X"),o.view(this,"Y"),o.view(this,"Z"),o.view(this,"tau"),o.view(this,"backspace",{colspan:2,style:"highlight"})),n.createElement(s.default,null,o.view(this,"123",{colspan:2,style:"highlight"}),o.view(this,"a^b"),o.view(this,"!%_right"),o.view(this,"[]_right"),o.view(this,"{}_right"),o.view(this,"~:_right"),o.view(this,",'_right"),o.view(this,"enter",{colspan:2,style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("core/math/poi-type",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LABEL=t.TRACE=t.DEFINITION=t.EXTREMUM=t.INTERCEPT=t.ZERO=t.INTERSECTION=void 0,t.INTERSECTION=1001,t.ZERO=1002,t.INTERCEPT=1003,t.EXTREMUM=1004,t.DEFINITION=1006,t.TRACE=1007,t.LABEL=1008})),function(e){"function"==typeof i&&i.amd?i("base64",[],e):("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).base64js=e()}((function(){return function e(t,r,i){function o(s,l){if(!r[s]){if(!t[s]){var c="function"==typeof n&&n;if(!l&&c)return c(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[s]={exports:{}};t[s][0].call(d.exports,(function(e){return o(t[s][1][e]||e)}),d,d.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({"/":[function(e,t,r){"use strict";r.byteLength=function(e){return 3*e.length/4-c(e)},r.toByteArray=function(e){var t,r,n,a,s,l=e.length;a=c(e),s=new o(3*l/4-a),r=0<a?l-4:l;var u=0;for(t=0;t<r;t+=4,0)n=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[u++]=n>>16&255,s[u++]=n>>8&255,s[u++]=255&n;return 2===a?(n=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[u++]=255&n):1===a&&(n=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[u++]=n>>8&255,s[u++]=255&n),s},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o="",a=[],s=0,l=r-i;s<l;s+=16383)a.push(function(e,t,r){for(var i,o=[],a=t;a<r;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(function(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}(i));return o.join("")}(e,s,l<s+16383?l:s+16383));return 1==i?(t=e[r-1],o+=n[t>>2],o+=n[t<<4&63],o+="=="):2==i&&(t=(e[r-2]<<8)+e[r-1],o+=n[t>>10],o+=n[t>>4&63],o+=n[t<<2&63],o+="="),a.push(o),a.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}]},{},[])("/")})),i("bin",["base64"],(function(e){"use strict";var t={};return{load:function(e,r,i,o){var a,s,l=r.toUrl(e);o.isBuild?(a=n.nodeRequire("fs"),t[e]=a.readFileSync(l).toString("base64"),i()):((s=new XMLHttpRequest).open("GET",l,!0),s.responseType="arraybuffer",s.onload=function(){i(s.response)},s.send())},write:function(e,r,n,i){r in t?n("define('"+e+"!"+r+"', ['base64'], function (base64) {  return base64.toByteArray('"+t[r]+"').buffer;});"):console.log("ERROR - failed to find file "+r+" in buildMap")}}})),i("bin!graphing/poi.mp3",["base64"],(function(e){return e.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer})),i("graphing/tonegenerator",["require","exports","bin!./poi.mp3","browser","bugsnag","core/types/graphmode","graphing/clipping"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReportedBranch=t.getFirstPlayableBranchIndex=t.canPlayBranch=t.canPlaySketch=void 0;var s=.0015,l=(c.prototype.suspend=function(){this.playbackSupported&&this.audioCtx&&(this.stop(),this.audioCtx.suspend())},c.prototype.resume=function(){if(!this.audioCtx){var e=window.AudioContext||window.webkitAudioContext;if(n.IS_IE)this.playbackSupported=!1,this.audioCtx=void 0;else try{this.audioCtx=e?new e:void 0,this.playbackSupported=!0}catch(e){i.notify(e),this.playbackSupported=!1,this.audioCtx=void 0}}this.playbackSupported&&this.audioCtx&&("suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.loadPOI())},c.prototype.stop=function(){this.playTimeout&&(cancelAnimationFrame(this.playTimeout),this.playTimeout=void 0),this.bufferSource&&(this.bufferSource.stop(),this.bufferSource.disconnect(),this.bufferSource=void 0),this.animationFinished()},c.prototype.isAnimating=function(){return void 0!==this.playTimeout},c.prototype.getAudioSpeed=function(){return this.audioSpeed},c.prototype.setAudioSpeed=function(e){this.audioSpeed=e},c.prototype.getAudioVolume=function(){return this.audioVolume},c.prototype.setAudioVolume=function(e){this.audioVolume=e,void 0!==this.gainMaster&&(this.gainMaster.gain.value=this.audioVolume)},c.prototype.getPlaybackSupported=function(){return this.playbackSupported},c.prototype.playBranchByIndex=function(e,t,r){var n=this;t<0||t>=e.branches.length||m(e.branches[t])&&this.playBranch(e.branches[t],t,r,(function(){return n.stop()}))},c.prototype.playSketch=function(e,t){var r,n,i=this,o=e.branches;0!==o.length&&(r=-1,(n=function(){for(r+=1;r<o.length&&!m(o[r]);)r+=1;r<o.length?i.playBranch(o[r],r,t,n):i.stop()})())},c.prototype.playPoint=function(e,t){var r,n,i;!this.audioCtx||function(e){switch(e.graphMode){case o.X:case o.Y:case o.XYPOINT:case o.XYPOINT_MOVABLE:return 1;default:return}}(e)&&(n=.075*(r=this.audioCtx.sampleRate),function(e,t,r,n){for(var i=e.sampleRate,a=e.getChannelData(0),s=e.getChannelData(1),l=y(r,t.graphMode),c=a.length-1,p={amplitude:0,phase:0,noiseVal:0,lowerOctaveGain:0,upperOctaveGain:0},h=function(e){switch(e.graphMode){case o.Y:case o.XYPOINT:case o.XYPOINT_MOVABLE:return{independent:e.x,dependent:e.y};case o.X:return{independent:e.y,dependent:e.x};default:throw b(e.graphMode)}}(t),g=h.independent,m=h.dependent,v=u(g,l),x=0;x<a.length;x++)p=d(p,{independent:g,dependent:m},l,i,(c-x)/i),a[x]+=p.amplitude*v.left,s[x]+=p.amplitude*v.right;n&&void 0!==t.intersects&&f(n,e,0,v)}(i=this.audioCtx.createBuffer(2,n,r),e,t,this.poiBuffer),this.connectBuffer(i))},c.prototype.connectBuffer=function(e){var t;this.audioCtx&&(this.gainMaster=this.audioCtx.createGain(),this.gainMaster.connect(this.audioCtx.destination),this.gainMaster.gain.value=this.audioVolume,t=this.audioCtx.createBufferSource(),(this.bufferSource=t).buffer=e,t.connect(this.gainMaster),t.start())},c.prototype.playBranch=function(e,t,r,n){var i,s,l,c,p,h,g,m,w,S,E,_,k=this;this.audioCtx&&(i=this.audioSpeed/10,(s=function(e,t,r){switch(e.graphMode){case o.Y:for(var n=[],i=0,s=e.segments;i<s.length;i++){var l=s[i];2<(g=a.clipStrokeEdges(l,t)).length&&n.push(g)}return{graphMode:e.graphMode,segments:n,poi:e.poi};case o.X:n=[];for(var c={xmin:t.ymin,xmax:t.ymax,ymin:t.xmin,ymax:t.ymax},u=0,d=e.segments;u<d.length;u++)l=d[u],2<(g=a.clipStrokeEdges(l,c)).length&&n.push(g);return{graphMode:e.graphMode,segments:n,poi:e.poi};case o.XYPOINT:case o.XYPOINT_MOVABLE:var p=e.segments[0].slice();p.sort(x),n=[];for(var h=0;h<p.length;h++){var g,f=p[h],m=0<h?p[h-1][0]:-1/0,y=h<p.length-1?p[p.length-1][0]:1/0,v=Math.max(f[0]-.5*r,.5*(f[0]+m)),b=Math.min(f[0]+.5*r,.5*(f[0]+y));l=[v,f[1],b,f[1]],2<(g=a.clipStrokeEdges(l,t)).length&&n.push(g)}return{graphMode:o.Y,segments:n};default:throw new Error("Unimplemented graph mode: "+e.graphMode)}}(e,r,(r.xmax-r.xmin)*(.075/i))).segments.length?(l=y(r,s.graphMode),c=v(s),p=c.independentMin,h=c.independentMax,g=this.audioCtx.sampleRate,m=i*(h-p)/(l.independentMax-l.independentMin),w=Math.floor(g*m),function(e,t,r,n){for(var i=e.sampleRate,a=e.getChannelData(0),s=e.getChannelData(1),l=t.graphMode,c=y(r,l),p=v(t),h=p.independentMin,g=p.independentMax,m=g-h,x=0,w=0,S=a.length-1,E=S/i,_={amplitude:0,phase:0,noiseVal:0,lowerOctaveGain:0,upperOctaveGain:0},k=0;k<a.length;k++){for(var M=u(N=(S-k)/S*h+k/S*g,c);x<t.segments.length&&t.segments[x][w]<N;)(w+=2)>=t.segments[x].length&&(x+=1,w=0);var I,C,L,P,T=t.segments[x],A=NaN,O=NaN;T&&2<T.length&&0<=w-2&&w+1<T.length&&(O=(T[T.length-2]-N)*(E/m),I=T[w-2],C=T[w-1],A=((L=T[w])-N)/(P=L-I)*C+(N-I)/P*T[w+1]),_=d(_,{independent:N,dependent:A},c,i,O),a[k]+=_.amplitude*M.left,s[k]+=_.amplitude*M.right}if(n&&t.poi&&t.poi.intersections)for(var D=function(e,t){if(e===o.X)return t.y;if(e===o.Y)return t.x;throw b(e)}(l,t.poi.intersections),F=0,q=D;F<q.length;F++){var N=q[F];f(n,e,k=Math.round((N-h)/(g-h)*S),u(N,c))}}(S=this.audioCtx.createBuffer(2,w,g),s,r,this.poiBuffer),this.connectBuffer(S),E=this.audioCtx.currentTime,(_=function(){var e,r;void 0!==k.playTimeout&&cancelAnimationFrame(k.playTimeout),k.audioCtx&&(e=k.audioCtx.currentTime-E,r=(m-e)/m*p+e/m*h,k.audioPointMove(t,r),e<m?k.playTimeout=requestAnimationFrame(_):n())})()):requestAnimationFrame(n))},c.prototype.loadPOI=function(){var e=this;this.playbackSupported&&!this.poiBuffer&&this.audioCtx&&this.audioCtx.decodeAudioData(r.slice(0),(function(t){e.poiBuffer=t}))},c);function c(e){var t=e.audioPointMove,r=e.animationFinished;this.audioSpeed=50,this.audioVolume=.5,this.audioPointMove=t,this.animationFinished=r}function u(e,t){var r=t.independentMin,n=t.independentMax,i=Math.abs((e-r)/(n-r));return isFinite(i)||(i=.5),i=Math.max(Math.min(i,1),0),{left:Math.cos(Math.PI/2*i),right:Math.sin(Math.PI/2*i)}}function d(e,t,r,n,i){var o,a=t.independent,l=t.dependent,c=e.phase,u=e.noiseVal,d=e.lowerOctaveGain,h=e.upperOctaveGain,f=r.dependentMin,m=r.dependentMax,y=0,v=0,b=0;return!isNaN(l)&&f<=l&&l<=m?(c+=(o=(l-f)/(m-f),Math.min(Math.max(330*Math.pow(2,o),125),2e3)/n),b=i<4*s?v=0:(v=.5,0<=a?.15:0),l<0&&(y+=.1*(u=g(u)))):y+=.04*(u=g(u)),h+=(b-h)/(n*s),{amplitude:y+=(d+=(v-d)/(n*s))*p(c)+h*p(2*c),phase:c,noiseVal:u,lowerOctaveGain:d,upperOctaveGain:h}}function p(e){return.8782*(h(e)+.25*h(2*e)+.25*h(3*e))}function h(e){return Math.sin(2*Math.PI*e)}function g(e){return(e+.2*(2*Math.random()-1))/1.02}function f(e,t,r,n){for(var i=e.getChannelData(0),o=t.getChannelData(0),a=t.getChannelData(1),s=0;s<i.length&&s+r<o.length;s++)o[s+r]+=i[s]*n.left,a[s+r]+=i[s]*n.right}function m(e){switch(e.graphMode){case o.X:case o.Y:case o.XYPOINT:case o.XYPOINT_MOVABLE:return 0<e.segments.length;default:return!1}}function y(e,t){switch(t){case o.Y:case o.XYPOINT:case o.XYPOINT_MOVABLE:return{independentMin:e.xmin,independentMax:e.xmax,dependentMin:e.ymin,dependentMax:e.ymax};case o.X:return{independentMin:e.ymin,independentMax:e.ymax,dependentMin:e.xmin,dependentMax:e.xmax};default:throw b(t)}}function v(e){var t=e.segments[0],r=e.segments[e.segments.length-1];return{independentMin:t[0],independentMax:r[r.length-2]}}function b(e){return"Unexpected graph mode. Received "+e}function x(e,t){return e[0]-t[0]}t.default=l,t.canPlaySketch=function(e){for(var t=0,r=e.branches;t<r.length;t++)if(m(r[t]))return!0;return!1},t.canPlayBranch=m,t.getFirstPlayableBranchIndex=function(e){for(var t=0;t<e.branches.length;t++)if(m(e.branches[t]))return t;return 0},t.getReportedBranch=function(e,t){for(var r=0,n=0;n<=t;n++)m(e.branches[n])&&(r+=1);return r}})),i("graphing/audiographnavigator",["require","exports","main/propagate_selection","tslib","underscore","core/types/graphmode","core/lib/label","core/math/poi-type","graphing/tonegenerator","underscore","lib/aria"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=(p.prototype.reset=function(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0,this.xstep=0,this.ystep=0},p.prototype.resetToFirstBranch=function(){var e=this.getCurrentSketch();this.branch=e?l.getFirstPlayableBranchIndex(e):0},p.prototype.getBranchPoints=function(e){var t=[];if(0<=e)for(var r=0,n=this.getSampledPoints();r<n.length;r++){var i=n[r];i.branch===e&&t.push(i)}return t},p.prototype.resetTracePoint=function(){this.drawTrace(this.getCurrentPoint())},p.prototype.drawTrace=function(e){var t,r,n,i=this.getCurrentSketch();e&&i&&(t=i.branches[this.branch])&&t.graphMode!==o.XYPOINT&&(r={x:e.x,y:e.y},n={branchInfo:{branch:e.branch,id:i.id,sketch:i},pt:r},c.isEqual(n,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(n),this.grapher.redrawAllLayers()))},p.prototype.moveToOrigin=function(){var e,t,r,n=this.getCurrentSketch();n&&l.canPlaySketch(n)&&(e=n.branches[this.branch],l.canPlayBranch(e)&&((t=e.graphMode)===o.Y?this.setIndependent("x",0):t===o.X?this.setIndependent("y",0):t===o.XYPOINT&&(r=this.getSortedPOI()[0],this.setIndependent("x",r?r.x:0))))},p.prototype.getCurrentSketch=function(){var e=this.getSelectedItem();if(e){var t=this.audiograph.getFocusedCell();if("table"===e.type){if(t&&(i=this.getGraphSketchForTableCell(e,t)),!i)for(var r=0,n=e.columnModels;r<n.length;r++){var i,o=n[r];if(void 0!==(i=this.grapher.getGraphSketch(o.id)))break}}else i=this.grapher.getGraphSketch(e.id)}return i},p.prototype.getFirstTraceableSketch=function(e){for(var t=this.controller.getItemCount(),r=this.controller.shouldAudioTraceReverseExpressions(),n=0;n<t;n++){var i=r?t-1-n:n,o=this.controller.getItemModelByIndex(i);if(o&&this.canTrace(o)){var a,s=r?this.prevTableColumn(o):this.nextTableColumn(o);if(a=s?(this.audiograph.setFocusedCell(s),this.getGraphSketchForTableCell(o,s)):this.grapher.getGraphSketch(o.id)){e&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:i});break}}}return a},p.prototype.canTrace=function(e){if("image"===e.type)return!1;if("shouldGraph"in e){var t=this.grapher.getGraphSketch(e.id);return!!t&&l.canPlaySketch(t)}return!1},p.prototype.getTraceableExpressionCount=function(){for(var e=0,t=this.controller.getItemCount(),r=0;r<t;r++){var n=this.controller.getItemModelByIndex(r);n&&this.canTrace(n)&&e++}return e},p.prototype.computeStepSizes=function(){var e,t,r,n,i,a,s,c,u,d=this.grapher.getProjection().viewport;d&&(e=(this.viewport=d).xmin,t=d.xmax,this.xstep=Math.abs(t-e)/100,this.xscale=t-e,r=d.ymin,n=d.ymax,this.ystep=Math.abs(n-r)/100,this.yscale=n-r,(i=this.getCurrentSketch())&&l.canPlaySketch(i)&&(a=i.branches[this.branch],l.canPlayBranch(a)&&((s=a.graphMode)===o.Y?this.independent<e?this.independent=e:this.independent>t&&(this.independent=t):s===o.X?this.independent<r?this.independent=r:this.independent>n&&(this.independent=n):s===o.XYPOINT&&(u=c=void 0,this.independent<e?(u=this.getSortedPOI()[0],this.independent=u&&void 0!==u.x?u.x:0):this.independent>t&&(u=(c=this.getSortedPOI())[c.length-1],this.independent=u&&void 0!==u.x?u.x:0)))))},p.prototype.getPoint=function(e,t){var r,n,i,a,s=this.getCurrentSketch();if(!s||!l.canPlaySketch(s))return r;var c=0,u=s.branches[e];if(u){var d=l.getReportedBranch(s,e);return"compiled"in u&&u.compiled&&(a=u.compiled.fn),(i=u.graphMode)===o.Y?((n=this.getInterveningPOIs(t,t+this.xstep,e,i)[0])&&n.x===t&&n.branch===e||(n=void 0,c=a?a(t):0),n?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:d,graphMode:i,intersects:n.intersects}:a&&(r={x:t,y:c,branch:e,reportedBranch:d,graphMode:i})):i===o.X?((n=this.getInterveningPOIs(t,t+this.ystep,e,i)[0])&&n.y===t&&n.branch===e||(n=void 0,c=a?a(t):0),n?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:d,graphMode:i,intersects:n.intersects}:a&&(r={y:t,x:c,branch:e,reportedBranch:d,graphMode:i})):i===o.XYPOINT&&(r=(n=this.getInterveningPOIs(t,t+this.xstep,e,i)[0])&&n.x===t&&n.branch===e?{x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:d,graphMode:i,intersects:n.intersects}:{x:t,y:NaN,branch:e,reportedBranch:d,graphMode:i}),r}},p.prototype.getSampledPoints=function(){return 0===this.sampledPoints.length&&this.updateSampledPoints(),this.sampledPoints},p.prototype.updateSampledPoints=function(){var e=this.getCurrentSketch();if(e&&l.canPlaySketch(e)){for(var t=[],r=0;r<e.branches.length;r++){var n=e.branches[r];if(l.canPlayBranch(n)){var i=n.graphMode,s=0,c=0,u=0,d=[];if(i===o.Y||i===o.XYPOINT?(s=this.viewport.xmin,c=this.viewport.xmax,u=this.xstep):i===o.X&&(s=this.viewport.ymin,c=this.viewport.ymax,u=this.ystep),0!==s||0!==c||0!==u){for(var p=0;a.value(s+p*u).value<=c;p++){var h,g=a.value(s+p*u).value,f=this.getInterveningPOIs(g,g+u,r,i);0<f.length?d.push.apply(d,f):(h=this.getPoint(r,g))&&d.push(h)}t.push.apply(t,this.removeDuplicates(d,i))}}}this.sampledPoints=t}},p.prototype.getCurrentPoint=function(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint},p.prototype.updateCurrentPoint=function(e){var t;e?((t=(this.currentPoint=e).graphMode)===o.Y||t===o.XYPOINT?this.independent=void 0!==e.x?e.x:0:t===o.X&&(this.independent=void 0!==e.y?e.y:0),this.branch=e.branch):this.currentPoint=this.getPoint(this.branch,this.independent)},p.prototype.prevPoint=function(){this.moveToPoint(-1)},p.prototype.nextPoint=function(){this.moveToPoint(1)},p.prototype.firstPoint=function(){var e=this.getSampledPoints();0<e.length&&this.updateCurrentPoint(e[0])},p.prototype.lastPoint=function(){var e=this.getSampledPoints();0<e.length&&this.updateCurrentPoint(e[e.length-1])},p.prototype.moveToPoint=function(e){var t,r,n,i,a=this.getCurrentPoint();a&&(a.graphMode!==o.XYPOINT?(t=this.getSampledPoints(),-1!==(r=this.getPointIndex(t,a))&&((n=r+e)<=0?(n=0,u.queue(this.controller.s("graphing-calculator-narration-audio-trace-first-point"))):n>=t.length-1&&(n=t.length-1,u.queue(this.controller.s("graphing-calculator-narration-audio-trace-last-point"))),i=t[n],this.updateCurrentPoint(i))):this.moveToPOI(e))},p.prototype.canMoveToPrevPoint=function(){var e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===o.XYPOINT)return this.canMoveToPrevPOI();var t=this.getSampledPoints();return 0<this.getPointIndex(t,e)},p.prototype.canMoveToNextPoint=function(){var e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===o.XYPOINT)return this.canMoveToNextPOI();var t=this.getSampledPoints();return this.getPointIndex(t,e)<t.length-1},p.prototype.prevPOI=function(){this.moveToPOI(-1)},p.prototype.nextPOI=function(){this.moveToPOI(1)},p.prototype.getSortedPOI=function(){return this.pois&&0!==this.pois.length||this.updatePOI(),this.pois},p.prototype.updatePOI=function(){var e=[],t=[],r=this.getCurrentSketch();if(r&&l.canPlaySketch(r)){for(var n,a,s,c=0;c<r.branches.length;c++){var u=r.branches[c];if(u){var d,p=l.getReportedBranch(r,c),h=u.graphMode;if(t=[],0<(d=r.getBranchPOI(c)).length){h===o.Y||h===o.XYPOINT?t=i.sortBy(d,"x"):h===o.X&&(t=i.sortBy(d,"y"));for(var g=[],f=0,m=t;f<m.length;f++){var y=m[f];g.push((a=h,s=p,{x:(n=y).x,y:n.y,branch:n.branch,reportedBranch:s,type:n.type,graphMode:a,intersects:n.intersects}))}e.push.apply(e,this.removeDuplicates(g,h))}}}this.pois=e}},p.prototype.removeDuplicates=function(e,t){for(var r=[],i=0,o=e;i<o.length;i++){var l,c=o[i];(c=n.__assign({},c)).graphMode=t,0!==r.length?(l=r[r.length-1],a.value(l.x).value===a.value(c.x).value&&a.value(l.y).value===a.value(c.y).value&&l.branch===c.branch?(l.typeChain||(l.typeChain=void 0!==l.type?[l.type]:[]),void 0!==c.type&&-1===l.typeChain.indexOf(c.type)&&l.typeChain.push(c.type),c.type===s.INTERSECTION&&c.intersects&&void 0===l.intersects&&(l.intersects=c.intersects)):r.push(c)):r.push(c)}return r},p.prototype.getInterveningPOIs=function(e,t,r,n){for(var i=[],a=NaN,s=0,l=this.getSortedPOI();s<l.length;s++){var c=l[s];c&&(n!==o.Y&&n!==o.XYPOINT||isNaN(c.x)?n!==o.X||isNaN(c.y)||(a=c.y):a=c.x,c.branch===r&&!isNaN(a)&&(e<=a&&a<t||t<=a&&a<e)&&i.push(c))}return t<e?i.reverse():i},p.prototype.setIndependent=function(e,t){for(var r=this.getSampledPoints(),n=0,i=r;n<i.length;n++){var o=i[n];if(o&&o.hasOwnProperty(e)&&o[e]===t){if("x"===e)return this.independent=void 0!==o.x?o.x:0,void this.updateCurrentPoint();if("y"===e)return this.independent=void 0!==o.y?o.y:0,void this.updateCurrentPoint()}}var a,s=!0;0<r.length&&(a=r[Math.floor((r.length-1)/2)])&&("x"===e?(this.independent=void 0!==a.x?a.x:0,s=!1):"y"===e&&(this.independent=void 0!==a.y?a.y:0,s=!1)),s&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()},p.prototype.moveToPOI=function(e){var t,r;this.getCurrentPoint()&&(t=this.getSampledPoints(),-1===(r=this.getPOIIndexByDirection(e))?u.queue(this.controller.s("graphing-calculator-narration-audio-trace-no-more-pois")):this.updateCurrentPoint(t[r]))},p.prototype.getPOIIndexByDirection=function(e){var t=this.getCurrentPoint();if(!t)return-1;var r=this.getSampledPoints(),n=this.getPointIndex(r,t),i=-1;if(-1!==n)for(var a=t.graphMode,s=1===e?r.length-1:0,l=n;l!==s+e;l+=e){var c=r[l];if(((a===o.Y||a===o.XYPOINT)&&t.x!==c.x||a===o.X&&t.y!==c.y)&&void 0!==c.type){i=l;break}}return i},p.prototype.canMoveToPrevPOI=function(){return-1!==this.getPOIIndexByDirection(-1)},p.prototype.canMoveToNextPOI=function(){return-1!==this.getPOIIndexByDirection(1)},p.prototype.getPointIndex=function(e,t){var r=-1;if(0<e.length&&t)for(var n=t.graphMode,i=0;i<e.length;i++){var a=e[i];if(((n===o.Y||n===o.XYPOINT)&&a.x===t.x||n===o.X&&a.y===t.y)&&a.branch===t.branch){r=i;break}}return r},p.prototype.prevCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveDown():this.curveUp()},p.prototype.nextCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveUp():this.curveDown()},p.prototype.curveUp=function(){var e,t,r,n,i=this.getSelectedItem();i&&((e=this.prevTableColumn(i))?this.audiograph.setFocusedCell(e):(t=i.index,-1===(r=this.findPrevTraceableIndex({index:t,focusTableCell:!0}))||(n=this.controller.getItemModelByIndex(r))&&this.controller.dispatch({type:"set-selected-id",id:n.id})),!e&&this.getSelectedItem()===i||this.audiograph.enterAudioTrace())},p.prototype.curveDown=function(){var e,t,r,n,i=this.getSelectedItem();i&&((e=this.nextTableColumn(i))?this.audiograph.setFocusedCell(e):(t=i.index,-1===(r=this.findNextTraceableIndex({index:t,focusTableCell:!0}))||(n=this.controller.getItemModelByIndex(r))&&this.controller.dispatch({type:"set-selected-id",id:n.id})),!e&&this.getSelectedItem()===i||this.audiograph.enterAudioTrace())},p.prototype.canMoveToPrevCurve=function(){var e=this.getSelectedItem();return!!e&&(this.controller.shouldAudioTraceReverseExpressions()?-1!==this.findNextTraceableIndex({index:e.index,focusTableCell:!1}):-1!==this.findPrevTraceableIndex({index:e.index,focusTableCell:!1}))},p.prototype.canMoveToNextCurve=function(){var e=this.getSelectedItem();return!!e&&(this.controller.shouldAudioTraceReverseExpressions()?-1!==this.findPrevTraceableIndex({index:e.index,focusTableCell:!1}):-1!==this.findNextTraceableIndex({index:e.index,focusTableCell:!1}))},p.prototype.findPrevTraceableIndex=function(e){var t,r=e.index;do{r--;var n=(t=this.controller.getItemModelByIndex(r))&&this.prevTableColumn(t);if(n)return e.focusTableCell&&this.audiograph.setFocusedCell(n),r}while(t&&!this.canTrace(t));return t?r:-1},p.prototype.findNextTraceableIndex=function(e){var t,r=e.index;do{r++;var n=(t=this.controller.getItemModelByIndex(r))&&this.nextTableColumn(t);if(n)return e.focusTableCell&&this.audiograph.setFocusedCell(n),r}while(t&&!this.canTrace(t));return t?r:-1},p.prototype.prevTableColumn=function(e){return this.tableColumn(e,-1)},p.prototype.nextTableColumn=function(e){return this.tableColumn(e,1)},p.prototype.tableColumn=function(e,t){var r;if(e&&"table"===e.type){var n,i=this.audiograph.getFocusedCell(),o=void 0,a=void 0,s=((n=-1===t?(o=i?Math.max(i.location.column-1,0):NaN,a=i&&i.tableId===e.id&&!isNaN(o)?o:e.columnModels.length-1,0):(o=i?Math.min(i.location.column+1,e.columnModels.length-1):NaN,a=i&&i.tableId===e.id&&!isNaN(o)?o:0,e.columnModels.length-1))-a)/t;if(isFinite(s)&&0<=s)for(var l=a;l!==n;l+=t){var c=e.columnModels[l];if(c&&this.grapher.getGraphSketch(c.id)){r={tableId:e.id,location:{column:l,row:0}};break}}}return r},p.prototype.getGraphSketchForTableCell=function(e,t){if(e&&"table"===e.type&&t){var r=e.columnModels[t.location.column];return r?this.grapher.getGraphSketch(r.id):void 0}},p.prototype.getXScale=function(){return this.xscale},p.prototype.getYScale=function(){return this.yscale},p.prototype.getSelectedItem=function(){var e=this.controller.getSelectedItem();return e&&"folder"===e.type?this.controller.getItemModel(r.getSelectedId(e)):e},p);function p(e,t,r){this.grapher=r,this.controller=e,this.audiograph=t,this.reset()}t.default=d})),i("graphing/audiograph",["require","exports","tslib","browser","keys","lib/aria","graphing/audiographnavigator","graphing/tonegenerator","core/types/graphmode","core/lib/label","core/math/poi-type","graphing-calc/models/expression","graphing-calc/models/table","expressions/colors","lib/mathspeak"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audioSpeedOptions=void 0,t.audioSpeedOptions=[{speed:150,displayedSpeed:"1/4 x"},{speed:100,displayedSpeed:"1/2 x"},{speed:50,displayedSpeed:"1 x"},{speed:30,displayedSpeed:"2 x"},{speed:16,displayedSpeed:"4 x"}];var f=(m.prototype.remove=function(){},m.prototype.handleKeydown=function(e){var t=e.altKey||e.metaKey,r=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,o=e.ctrlKey&&!e.metaKey&&!e.altKey,a=n.IS_APPLE?o:t,s=a&&(61===e.which||187===e.which),l=a&&!e.shiftKey&&(173===e.which||189===e.which),c=a&&!e.shiftKey&&"0"===i.lookupChar(e);r&&"S"===i.lookupChar(e)?this.agNavigator.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeCurve()):r&&"T"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):s?(e.preventDefault(),e.stopPropagation(),this.zoom("in")):l?(e.preventDefault(),e.stopPropagation(),this.zoom("out")):c?(e.preventDefault(),e.stopPropagation(),this.zoom("default")):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):this.audioTraceKeydown(e))},m.prototype.sliderTraceKeydown=function(e){var t=e.altKey||e.metaKey,r=!t&&!e.ctrlKey&&!e.shiftKey;r&&i.lookup(e)===i.LEFT||"J"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):r&&i.lookup(e)===i.RIGHT||"L"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):r&&i.lookup(e)===i.PAGEDOWN?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):r&&i.lookup(e)===i.PAGEUP?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):t||i.lookup(e)!==i.DOWN&&(e.shiftKey||i.lookup(e)!==i.TAB)&&"K"!==i.lookupChar(e)?!t&&(i.lookup(e)===i.UP||e.shiftKey&&i.lookup(e)===i.TAB||"I"===i.lookupChar(e))?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):r&&i.lookup(e)===i.HOME||"U"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):r&&i.lookup(e)===i.END||"N"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):(this.stopAnimations(),this.audioTraceKeydown(e)):(e.preventDefault(),e.stopPropagation(),this.nextSlider())},m.prototype.audioTraceKeydown=function(e){var t=e.altKey||e.metaKey,r=t&&!e.ctrlKey&&!e.shiftKey,n=!t&&!e.ctrlKey&&!e.shiftKey,a=i.lookupChar(e);if(i.lookup(e)===i.UP&&r)e.preventDefault(),e.stopPropagation(),o.clear(),this.agNavigator.prevCurve();else if(i.lookup(e)===i.DOWN&&r)e.preventDefault(),e.stopPropagation(),o.clear(),this.agNavigator.nextCurve();else if(n&&i.lookup(e)===i.LEFT||i.lookup(e)===i.UP||"J"===a)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"previous-point"});else if(n&&i.lookup(e)===i.RIGHT||i.lookup(e)===i.DOWN||"L"===a)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"next-point"});else if(t||i.lookup(e)!==i.PAGEDOWN&&(e.shiftKey||i.lookup(e)!==i.TAB)&&"I"!==a)if(!t&&(i.lookup(e)===i.PAGEUP||e.shiftKey&&i.lookup(e)===i.TAB||"K"===a))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToPrevPOI();else if(n&&i.lookup(e)===i.HOME||"U"===a)e.preventDefault(),e.stopPropagation(),this.reportAndMoveToFirstPoint();else if(n&&i.lookup(e)===i.END||"N"===a)e.preventDefault(),e.stopPropagation(),this.reportAndMoveToLastPoint();else if(n&&"X"===a)e.preventDefault(),e.stopPropagation(),this.reportX();else if(n&&"P"===a)e.preventDefault(),e.stopPropagation(),this.reportPOICount();else if(n&&"Y"===a)e.preventDefault(),e.stopPropagation(),this.reportY();else if(n&&"T"===a)e.preventDefault(),e.stopPropagation(),this.reportType();else if(n&&"B"===a)e.preventDefault(),e.stopPropagation(),this.reportBranch();else if(n&&"O"===a)e.preventDefault(),e.stopPropagation(),this.reportAndMoveToOrigin();else if(n&&"H"===a)e.preventDefault(),e.stopPropagation(),this.hearGraph();else if(n&&"string"==typeof a&&"0"<=a&&a<="9"){e.preventDefault(),e.stopPropagation(),o.clear(),this.tonegen.stop();var l=this.agNavigator.getCurrentSketch();if(l){for(var c,u=c=48===e.which?9:e.which-49,d=-1,p=0;p<l.branches.length;p++)if(s.canPlayBranch(l.branches[p])&&--u,u<0){d=p;break}0<=d?this.tonegen.getPlaybackSupported()?this.tonegen.playBranchByIndex(l,d,this.grapher.getCurrentViewport()):o.alert(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play")):o.alert(this.controller.s("graphing-calculator-narration-audio-trace-branch-not-found",{branch:c+1}))}else o.alert(this.controller.s("graphing-calculator-narration-audio-trace-no-graph-selected"))}else t&&"string"==typeof a&&"1"<=a&&a<="5"?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-audio-trace-speed",speed:parseInt(a,10)-1})):e.altKey||e.ctrlKey||e.metaKey||"V"!==a?n&&"A"===a?(e.preventDefault(),e.stopPropagation(),o.clear(),this.queueAnimatingPoints(!0),o.alert()):n&&"S"===a&&this.controller.isListEnabled()?(e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace()):n&&"C"===a?(e.preventDefault(),e.stopPropagation(),this.reportColor()):n&&this.exitAudioTrace():(e.preventDefault(),e.stopPropagation(),e.shiftKey?this.controller.dispatch({type:"keypad/audio-trace",command:"volume-down"}):this.controller.dispatch({type:"keypad/audio-trace",command:"volume-up"}));else e.preventDefault(),e.stopPropagation(),this.reportAndMoveToNextPOI();this.controller.dispatch({type:"render"})},m.prototype.describeCurve=function(){var e=this;o.clear();var t=this.agNavigator.getCurrentSketch();if(t){o.queue(this.controller.s("graphing-calculator-narration-audio-trace-description-color",{color:h.getColorName(this.controller,t.color)}));var r=s.getReportedBranch(t,t.branches.length-1);1<r&&o.queue(this.controller.s("graphing-calculator-narration-audio-trace-description-branch-count",{branches:r}));var n=t.getPOI();if(0<n.length){for(var i=[],a=0,l=n;a<l.length;a++){var c=l[a];void 0===i[c.type]?i[c.type]=1:i[c.type]+=1}i.forEach((function(t,r){r===u.INTERSECTION?o.queue(1===t?e.controller.s("graphing-calculator-narration-audio-trace-description-one-intersection"):e.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intersections",{count:t})):r===u.ZERO?o.queue(1===t?e.controller.s("graphing-calculator-narration-audio-trace-description-one-root"):e.controller.s("graphing-calculator-narration-audio-trace-description-multiple-roots",{count:t})):r===u.INTERCEPT?o.queue(1===t?e.controller.s("graphing-calculator-narration-audio-trace-description-one-intercept"):e.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intercepts",{count:t})):r===u.EXTREMUM?o.queue(1===t?e.controller.s("graphing-calculator-narration-audio-trace-description-one-extremum"):e.controller.s("graphing-calculator-narration-audio-trace-description-multiple-extrema",{count:t})):r===u.LABEL&&o.queue(1===t?e.controller.s("graphing-calculator-narration-audio-trace-description-one-label"):e.controller.s("graphing-calculator-narration-audio-trace-description-multiple-labels",{count:t}))}))}o.alert()}else o.alert(this.controller.s("graphing-calculator-narration-audio-trace-description-unavailable"))},m.prototype.queueCoordinates=function(e,t,r){var n;void 0===r&&(r=!1),e&&(n=this.agNavigator.getCurrentSketch(),(e.hasOwnProperty("branch")&&n&&1<n.branches.length&&this.lastSpokenBranch!==e.reportedBranch||"branch"===t)&&"number"==typeof e.reportedBranch&&o.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-branch-number",{branch:e.reportedBranch})),this.lastSpokenBranch=e.reportedBranch?e.reportedBranch:e.branch+1,e.hasOwnProperty("type")&&!t?o.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-type-before-coordinates",{type:this.describePOI(e)})):"type"===t&&o.queue(this.describePOI(e)),t&&"x"!==t||o.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-x",{x:c.value(e.x,this.agNavigator.getXScale()).ariaString})),t&&"y"!==t||o.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-y",{y:c.value(e.y,this.agNavigator.getYScale()).ariaString})),r&&o.alert())},m.prototype.describePOI=function(e){if(e.typeChain){for(var t=[],r=0;r<e.typeChain.length;r++)t.push(this.poiTypeToText(e,r));return t.join(", ")}return this.poiTypeToText(e)},m.prototype.poiTypeToText=function(e,t){switch(t&&e.typeChain?e.typeChain[t]:e.type){case u.INTERSECTION:var r=this.getIntersectingCurves(e);return""!==r?this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection-with-curves",{curves:r}):this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection");case u.ZERO:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-root");case u.INTERCEPT:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-intercept");case u.EXTREMUM:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-extremum");case u.DEFINITION:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-definition");case u.TRACE:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-trace");case u.LABEL:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-label");default:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-not-a-poi")}},m.prototype.getIntersectingCurves=function(e){return e&&e.intersects?this.getExpressionAriaLabel(e.intersects):""},m.prototype.getExpressionAriaLabel=function(e){var t=this.controller.getItemModel(e);return t?"expression"===t.type&&t.label?g.getMathspeakFromText(t.label):this.controller.isItemSecret(t.id)?this.controller.s("graphing-calculator-narration-audio-trace-secret-expression",{index:t.secretIndex}):"table"===t.type&&this.focusedCell?this.controller.s("graphing-calculator-narration-audio-trace-expression-with-column",{index:t.displayIndex,column:this.focusedCell.location.column+1}):this.controller.s("shared-calculator-narration-expression-index",{index:t.displayIndex}):""},m.prototype.exitAudioTrace=function(e){var t;this.audioTraceActive&&(this.audioTraceActive=!1,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/123"}),e=e||this.controller.s("graphing-calculator-text-audio-trace-off"),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView&&((t=this.agNavigator.getSelectedItem())&&this.controller.isItemSelectable(t.id)||(t=this.controller.getFirstFullyVisibleItem()),t&&this.controller.isItemSelectable(t.id)&&this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"table"===t.type&&void 0!==this.focusedCell?r.__assign({location:"cell"},this.focusedCell.location):"end"})),this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.suspend(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.redrawAllLayers(),o.alert(e),this.resumeAnimations())},m.prototype.isFocusInExpressionsView=function(){return!!this.controller.getFocusedItem()},m.prototype.canAudioTraceCurrentExp=function(){var e=this.agNavigator.getSelectedItem();return!!e&&("table"===e.type?!!this.agNavigator.getCurrentSketch():this.agNavigator.canTrace(e))},m.prototype.enterAudioTrace=function(e){var t,r,i=this,a=this.agNavigator.getSelectedItem(),s=a&&"table"!==a.type&&!this.agNavigator.canTrace(a)?this.getExpressionAriaLabel(a.id):void 0,c=!1;if(this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),a&&s&&o.queue(this.controller.s("graphing-calculator-narration-audio-trace-unsupported-expression",{expression:s})),c=!!s||!this.wasFocusInExpressionsView),c)t=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!s){if(a&&"expression"===a.type&&a.formula&&a.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-graph-to-trace")}});a&&"table"===a.type?(r=p.getSelectedCell(a),this.focusedCell&&this.focusedCell.tableId===a.id&&(!r||r.column===this.focusedCell.location.column&&r.row===this.focusedCell.location.row)||(this.focusedCell=void 0!==r?{tableId:a.id,location:r}:void 0)):this.focusedCell=void 0,t=this.agNavigator.getCurrentSketch()}if(!t)return this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-graph-to-trace")}});var u=t.branches[0].graphMode;return u===l.IMPLICIT?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-implicit-support")}})):u===l.PARAMETRIC?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-parametric-support")}})):u===l.POLAR?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-polar-support")}})):(this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.grapher.redrawAllLayers(),this.audioTraceActive||(this.controller.isKeypadEnabled()||this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-on"),noAria:!0,onHide:function(){return i.exitAudioTrace()},hideAfter:0}}),s&&t&&o.queue(this.controller.s("graphing-calculator-narration-audio-trace-tracing-different-expression",{expression:this.getExpressionAriaLabel(t.id)})),o.queue(this.controller.s("graphing-calculator-text-audio-trace-on")),this.pauseAnimations(),this.queueAnimatingPoints(!1),this.tonegen.resume(),e&&e.fromKeypad||(o.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-use-arrow-keys")),this.tonegen.getPlaybackSupported()&&o.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-hear-graph")),1<this.agNavigator.getTraceableExpressionCount()&&(n.IS_APPLE?o.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac")):o.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows"))),n.IS_APPLE?o.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-mac")):o.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-windows"))),this.wasFocusInExpressionsView&&(this.controller.find$(".dcg-graph-outer").one("focusin",(function(){setTimeout((function(){o.alert()}),0)})),this.controller.focusGraphPaper())),this.agNavigator.moveToOrigin(),o.queue(this.getExpressionAriaLabel(t.id)),this.reportAudioTrace({playSound:!1}),this.wasFocusInExpressionsView||o.alert(),this.audioTraceActive=!0,void(this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/audio"})))},m.prototype.checkIfSelectedItemChanged=function(e){this.lastSelectedId!==e&&(this.lastSelectedId=e,this.audioTraceActive&&(e?(o.queue(this.getExpressionAriaLabel(e)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),o.alert()):this.exitAudioTrace()))},m.prototype.pauseAnimations=function(){var e=this;this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach((function(t){t.slider.isPlaying&&(e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1}),e.sliderArray.push(t))}))},m.prototype.resumeAnimations=function(){if(0!==this.sliderArray.length){for(var e=0;e<this.sliderArray.length;e++){var t=this.sliderArray[e];!0!==t.slider.isPlaying&&this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!0})}this.sliderArray.length=0}},m.prototype.stopAnimations=function(){var e=this;this.controller.getAllModelsWithSliders().forEach((function(t){t.slider.isPlaying&&e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1})}))},m.prototype.getAnimatingVars=function(){for(var e=[],t=0;t<this.sliderArray.length;t++)e.push('"'+d.getAssignment(this.sliderArray[t])+'"');return e},m.prototype.hasActiveSliders=function(){for(var e=this.controller.getAllModelsWithSliders(),t=0;t<e.length;t++)if(e[t].slider.isPlaying)return!0;return!1},m.prototype.queueAnimatingPoints=function(e){1===this.sliderArray.length?o.queue(this.controller.s("graphing-calculator-narration-audio-trace-one-slider-paused")):1<this.sliderArray.length?o.queue(this.controller.s("graphing-calculator-narration-audio-trace-multiple-sliders-paused",{sliders:this.sliderArray.length})):e&&o.queue(this.controller.s("graphing-calculator-narration-audio-trace-no-sliders-paused"))},m.prototype.queueSliderLatex=function(){this.hasActiveSliders()||this.tonegen.stop();var e=this.getSelectedSlider();e?o.queue(e.latex):o.queue(this.controller.s("graphing-calculator-narration-audio-trace-slider-value-unknown"))},m.prototype.getSelectedSlider=function(){var e=this.controller.getAllModelsWithSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null},m.prototype.incrementSliderValue=function(){this.adjustSlider("up")},m.prototype.decrementSliderValue=function(){this.adjustSlider("down")},m.prototype.incrementBigSliderValue=function(){this.adjustSlider("bigup")},m.prototype.decrementBigSliderValue=function(){this.adjustSlider("bigdown")},m.prototype.nextSlider=function(){this.adjustSlider("next")},m.prototype.prevSlider=function(){this.adjustSlider("prev")},m.prototype.sliderMin=function(){this.adjustSlider("min")},m.prototype.sliderMax=function(){this.adjustSlider("max")},m.prototype.adjustSlider=function(e){var t=this.getSelectedSlider();if(t){var r=t.latex,n=this.controller.getAllModelsWithSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:t.id,adjustment:e}),this.queueSliderLatex(),o.alert();break;case"next":return this.sliderIndex++,this.sliderIndex>=n&&(o.queue(this.controller.s("graphing-calculator-narration-audio-trace-last-slider")),this.sliderIndex=n-1),this.queueSliderLatex(),void o.alert();case"prev":return this.sliderIndex--,this.sliderIndex<0&&(o.queue(this.controller.s("graphing-calculator-narration-audio-trace-first-slider")),this.sliderIndex=0),this.queueSliderLatex(),void o.alert()}t.slider.isPlaying||r===t.latex||(this.queueSliderLatex(),o.alert())}else o.queue(this.controller.s("graphing-calculator-narration-audio-trace-cannot-change-slider-value"))},m.prototype.toggleAudioTrace=function(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()},m.prototype.toggleSliderTrace=function(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()},m.prototype.enterSliderTrace=function(){this.sliderTraceActive||((this.sliderIndex=0)!==this.controller.getAllModelsWithSliders().length?(o.queue(this.controller.s("graphing-calculator-narration-slider-trace-on")),this.queueSliderLatex(),this.sliderTraceActive=!0):(o.queue(this.controller.s("graphing-calculator-narration-slider-trace-no-sliders")),this.sliderTraceActive=!1),o.alert())},m.prototype.exitSliderTrace=function(){this.sliderTraceActive&&(o.queue(this.controller.s("graphing-calculator-narration-slider-trace-off")),this.sliderTraceActive=!1,this.sliderIndex=0,o.alert())},m.prototype.recomputePoints=function(){this.audioTraceActive&&(this.tonegen.isAnimating()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes()))},m.prototype.reportAndMoveToPrevPoint=function(){o.clear(),this.agNavigator.prevPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportAndMoveToNextPoint=function(){o.clear(),this.agNavigator.nextPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportAndMoveToOrigin=function(){o.clear(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportAndMoveToPrevPOI=function(){o.clear(),this.agNavigator.prevPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportAndMoveToNextPOI=function(){o.clear(),this.agNavigator.nextPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportAndMoveToFirstPoint=function(){o.clear(),this.agNavigator.firstPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportAndMoveToLastPoint=function(){o.clear(),this.agNavigator.lastPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},m.prototype.reportX=function(){o.clear(),this.reportAudioTrace({propToSpeak:"x",playSound:!1})},m.prototype.reportY=function(){o.clear(),this.reportAudioTrace({propToSpeak:"y",playSound:!1})},m.prototype.reportColor=function(){o.clear();var e=this.agNavigator.getCurrentSketch();e?o.queue(h.getColorName(this.controller,e.color)):o.queue(this.controller.s("graphing-calculator-narration-color-unknown")),o.alert()},m.prototype.reportPOICount=function(){o.clear();var e=this.agNavigator.getCurrentSketch(),t=e?e.getPOI().length:0;o.alert(this.controller.s("graphing-calculator-narration-audio-trace-poi-count",{x:t}))},m.prototype.reportType=function(){o.clear(),this.reportAudioTrace({propToSpeak:"type",playSound:!1})},m.prototype.reportBranch=function(){o.clear(),this.reportAudioTrace({propToSpeak:"branch",playSound:!1})},m.prototype.describePoint=function(){o.clear(),this.reportAudioTrace({playSound:!1}),o.alert()},m.prototype.playCurrentPoint=function(){var e=this.agNavigator.getCurrentPoint();e&&this.tonegen.playPoint(e,this.grapher.getCurrentViewport())},m.prototype.reportAudioTrace=function(e){var t,r,n,i=this.agNavigator.getCurrentPoint();i&&(t=e&&e.propToSpeak,r=!e||void 0===e.playSound||e.playSound,n=!e||void 0===e.speakCoordinates||e.speakCoordinates,this.tonegen.stop(),r&&this.playCurrentPoint(),n&&(this.queueCoordinates(i,t),setTimeout((function(){o.alert()}),t?0:100)))},m.prototype.adjustPlaybackSpeed=function(e){if(!(e<0||e>=t.audioSpeedOptions.length)){this.audioSpeedIndex=e;var r=t.audioSpeedOptions[e];return this.tonegen.setAudioSpeed(r.speed),o.alert(this.controller.s("graphing-calculator-narration-audio-trace-playback-speed",{speed:r.displayedSpeed}))}},m.prototype.speedUp=function(){this.adjustPlaybackSpeed(this.audioSpeedIndex+1)},m.prototype.speedDown=function(){this.adjustPlaybackSpeed(this.audioSpeedIndex-1)},m.prototype.adjustVolume=function(e){o.clear();var t=this.tonegen.getAudioVolume(),r="up"===e?Math.min(100,Math.round(100*(t+.1))):Math.max(0,Math.round(100*(t-.1)));this.tonegen.setAudioVolume(r/100),this.playCurrentPoint(),o.alert(this.controller.s("graphing-calculator-narration-audio-trace-volume",{volume:r}))},m.prototype.zoom=function(e){this.grapher.viewportController.zoom(e)},m.prototype.getFocusedCell=function(){return this.focusedCell},m.prototype.setFocusedCell=function(e){this.focusedCell=e},m.prototype.getAudioTraceActive=function(){return this.audioTraceActive},m.prototype.hearGraph=function(){var e;o.clear(),this.tonegen.getPlaybackSupported()?(this.tonegen.stop(),(e=this.agNavigator.getCurrentSketch())&&s.canPlaySketch(e)?(this.isTracing=!0,this.tonegen.playSketch(e,this.grapher.getCurrentViewport())):o.alert(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-trace-this-expression"))):o.alert(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play-audio"))},m.prototype.stopGraph=function(){this.tonegen.getPlaybackSupported()&&this.tonegen.stop()},m.prototype.getIsTracing=function(){return this.isTracing},m.prototype.getAudioSpeedIndex=function(){return this.audioSpeedIndex},m);function m(e,t){var r=this;this.grapher=t,this.controller=e,this.audioTraceActive=!1,this.isTracing=!1,this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new a.default(e,this,this.grapher),this.tonegen=new s.default({audioPointMove:function(e,t){r.agNavigator.drawTrace(r.agNavigator.getPoint(e,t))},animationFinished:function(){r.recomputePoints(),r.isTracing&&(r.isTracing=!1,r.controller.dispatch({type:"render"}))}}),this.audioSpeedIndex=2,this.tonegen.suspend()}t.default=f})),i("loadcss!graphing-calc/keypads/audio",(function(){})),i("graphing-calc/keypads/audio",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/btn","../../lib/tooltip","graphing/audiograph","shared/dcgviews/localize","loadcss!./audio"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,p=n.Components,h=p.If,g=p.IfElse,f=(d=i.default,r.__extends(m,d),m.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},n.createElement("div",{class:n.const("dcg-audio-keypad-container")},n.createElement("div",{class:n.const("dcg-audio-keypad-column dcg-playback-column")},g((function(){return e.controller.isAudioTracing()}),{true:function(){return n.createElement(s.default,{command:n.const("stop-graph"),colspan:e.const(1),style:e.const("blue"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"stop-graph"})}},n.createElement("span",{class:n.const("dcg-stop-icon-container")},n.createElement("span",{class:n.const("dcg-stop-icon")})),n.createElement("span",null,(function(){return e.controller.s("graphing-calculator-button-audio-trace-stop-graph")})))},false:function(){return n.createElement(s.default,{command:n.const("hear-graph"),colspan:e.const(1),style:e.const("blue"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"hear-graph"})}},n.createElement("span",{class:n.const("dcg-play-icon-container")},n.createElement("i",{class:n.const("dcg-icon-play")})),n.createElement("span",null,(function(){return e.controller.s("graphing-calculator-button-audio-trace-hear-graph")})))}}),n.createElement("div",{class:n.const("dcg-key-nav-section")},o.view(this,"volume-down",{disabled:this.bindFn(this.isVolumeDownDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},n.createElement("span",{class:n.const("dcg-key-nav-section-title")},(function(){return e.controller.s("graphing-calculator-label-audio-trace-volume")})),n.createElement("span",{class:n.const("dcg-keypad-volume-value dcg-key-nav-section-value")},(function(){return e.getAudioTraceVolume()}))),o.view(this,"volume-up",{disabled:this.bindFn(this.isVolumeUpDisabled)})),n.createElement("div",{class:n.const("dcg-key-nav-section")},o.view(this,"speed-down",{disabled:this.bindFn(this.isSpeedDownDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},n.createElement("span",{class:n.const("dcg-key-nav-section-title")},(function(){return e.controller.s("graphing-calculator-label-audio-trace-speed")})),n.createElement("span",{class:n.const("dcg-keypad-speed-value dcg-key-nav-section-value")},(function(){return e.getAudioTraceSpeed()}))),o.view(this,"speed-up",{disabled:this.bindFn(this.isSpeedUpDisabled)})),o.view(this,"audio-trace-off",{style:"highlight"})),n.createElement("div",{class:n.const("dcg-audio-keypad-spacer")}),n.createElement("div",{class:n.const("dcg-audio-keypad-column dcg-navigation-column")},n.createElement("span",{class:n.const("dcg-key-section-title dcg-center-col"),role:n.const("heading"),"aria-level":n.const("2")},(function(){return e.controller.s("graphing-calculator-heading-audio-trace-navigation")})),n.createElement("div",{class:n.const("dcg-key-nav-section dcg-center-col")},o.view(this,"previous-point",{disabled:this.bindFn(this.isPrevPointDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},(function(){return e.controller.s("graphing-calculator-label-audio-trace-point")})),o.view(this,"next-point",{disabled:this.bindFn(this.isNextPointDisabled)})),n.createElement("div",{class:n.const("dcg-key-nav-section")},o.view(this,"previous-poi",{disabled:this.bindFn(this.isPrevPOIDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container dcg-poi-section-container"),role:n.const("heading"),"aria-level":n.const("2")},n.createElement(u.Localize,{i18n:this.const(this.controller),key:this.const("graphing-calculator-heading-keypad-audio-trace-point-of-interest")},n.createElement("span",{class:n.const("dcg-key-nav-section-value")},n.const("Point")),n.createElement("span",{class:n.const("dcg-key-nav-section-title")},n.const("of Interest")))),o.view(this,"next-poi",{disabled:this.bindFn(this.isNextPOIDisabled)})),n.createElement("div",{class:n.const("dcg-key-nav-section dcg-center-col")},o.view(this,"previous-curve",{disabled:this.bindFn(this.isPrevCurveDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},(function(){return e.controller.s("graphing-calculator-label-audio-trace-curve")})),o.view(this,"next-curve",{disabled:this.bindFn(this.isNextCurveDisabled)}))),n.createElement("div",{class:n.const("dcg-audio-keypad-spacer")}),n.createElement("div",{class:n.const("dcg-audio-keypad-column dcg-screenreader-options")},n.createElement("span",{class:n.const("dcg-key-section-title"),role:n.const("heading"),"aria-level":n.const("2")},(function(){return e.layoutWidth()<=460?e.controller.s("graphing-calculator-heading-audio-trace-describe"):e.controller.s("graphing-calculator-heading-audio-trace-screen-reader")}),n.createElement(l.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-audio-trace-need-screen-reader")},gravity:this.const("s"),targetClickBehavior:this.const("stick")},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))),n.createElement(s.default,{command:n.const("describe-point"),colspan:this.const(1),style:this.const("default"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"describe-point"})}},n.createElement("span",null,(function(){return e.layoutWidth()<=460?e.controller.s("graphing-calculator-button-audio-trace-describe-point-short"):e.controller.s("graphing-calculator-button-audio-trace-describe-point")}))),n.createElement(s.default,{command:n.const("describe-curve"),colspan:this.const(1),style:this.const("default"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"describe-curve"})}},n.createElement("span",null,(function(){return e.layoutWidth()<=460?e.controller.s("graphing-calculator-button-audio-trace-describe-curve-short"):e.controller.s("graphing-calculator-button-audio-trace-describe-curve")}))),n.createElement(h,{predicate:function(){return e.controller.getCanShowKeyboardShortcuts()}},(function(){return n.createElement("div",{class:n.const("dcg-keypad-btn-container dcg-keypad-link")},n.createElement("a",{class:n.const("dcg-shared-dark-gray-link"),role:n.const("link"),"dcg-command":n.const("keyboard-shortcuts"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"keyboard-shortcuts"})}},n.createElement("i",{class:n.const("dcg-icon-keyboard")}),n.createElement("span",null,(function(){return e.layoutWidth()<=700?e.controller.s("graphing-calculator-link-audio-trace-shortcuts"):e.controller.s("graphing-calculator-link-audio-trace-keyboard-shortcuts")}))))})))))},m.prototype.layoutWidth=function(){return this.controller.getLayoutMeasurements().width},m.prototype.isPrevPointDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToPrevPoint()},m.prototype.isNextPointDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToNextPoint()},m.prototype.isPrevPOIDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToPrevPOI()},m.prototype.isNextPOIDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToNextPOI()},m.prototype.isPrevCurveDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToPrevCurve()},m.prototype.isNextCurveDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToNextCurve()},m.prototype.getAudioTraceVolume=function(){var e=this.controller.getAudioGraph();return e?100*e.tonegen.getAudioVolume()+"%":""},m.prototype.isVolumeDownDisabled=function(){var e=this.controller.getAudioGraph();return!e||e.tonegen.getAudioVolume()<=0},m.prototype.isVolumeUpDisabled=function(){var e=this.controller.getAudioGraph();return!e||1<=e.tonegen.getAudioVolume()},m.prototype.getAudioTraceSpeed=function(){var e=this.controller.getAudioGraph();return e?c.audioSpeedOptions[e.getAudioSpeedIndex()].displayedSpeed:""},m.prototype.isSpeedDownDisabled=function(){var e=this.controller.getAudioGraph();return!e||e.getAudioSpeedIndex()<=0},m.prototype.isSpeedUpDisabled=function(){var e=this.controller.getAudioGraph();return!e||e.getAudioSpeedIndex()===c.audioSpeedOptions.length-1},m);function m(){return null!==d&&d.apply(this,arguments)||this}t.default=f})),i("graphing-calc/keypads/trig",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.If,c=(s=i.default,r.__extends(u,s),u.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},this.b("sin"),this.b("arcsin"),this.b("sinh"),this.b("cos"),this.b("arccos"),this.b("cosh"),this.b("tan"),this.b("arctan"),this.b("tanh"),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("csc")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("arccsc")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("csch")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("sec")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("arcsec")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("sech")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("cot")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("arccot")})),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("coth")})))},u.prototype.b=function(e){return o.view(this,e,{style:"popover"})},u.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("graphing-calc/keypads/stats",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.If,c=(s=i.default,r.__extends(u,s),u.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},this.b("total"),this.b("length"),this.b("mean"),this.b("median"),this.b("min"),this.b("max"),this.b("quartile"),this.b("quantile"),this.b("stdev"),this.b("stdevp"),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("mad")})),this.b("var"),n.createElement(l,{predicate:this.bindFn(this.isNotRestricted)},(function(){return e.b("cov")})),this.b("corr"),this.b("spearman"),this.b("nCr"),this.b("nPr"),this.b("stats"),n.createElement(l,{predicate:this.bindFn(this.areDistributionsEnabled)},(function(){return e.b("ttest")})),n.createElement(l,{predicate:this.bindFn(this.areDistributionsEnabled)},(function(){return e.b("tscore")})),n.createElement(l,{predicate:this.bindFn(this.areDistributionsEnabled)},(function(){return e.b("ittest")})))},u.prototype.b=function(e){return o.view(this,e,{style:"popover-short"})},u.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},u.prototype.areDistributionsEnabled=function(){return this.controller.areDistributionsEnabled()},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("graphing-calc/keypads/misc",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.If,c=(s=i.default,r.__extends(u,s),u.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},this.b("join"),this.b("sort"),this.b("shuffle"),this.b("lcm"),this.b("gcd"),this.b("mod"),this.b("ceil"),this.b("floor"),this.b("round"),this.b("sign"),this.b("%"),this.b("exp"),this.b("ln"),this.b("nthroot"),this.b("polygon"),this.b("log"),this.b("loga"),this.b("ddx"),this.b("int"),this.b("sum"),this.b("prod"),n.createElement(l,{predicate:this.bindFn(this.shouldShowGeometryButtons)},(function(){return e.b("distance")})),n.createElement(l,{predicate:this.bindFn(this.shouldShowGeometryButtons)},(function(){return e.b("midpoint")})))},u.prototype.b=function(e){return o.view(this,e,{style:this.shouldShowGeometryButtons()?"popover-very-short":"popover-short"})},u.prototype.shouldShowGeometryButtons=function(){return this.controller.areFunctionsRestricted()&&this.controller.areGeometryFunctionsForceEnabled()},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("graphing-calc/keypads/distributions",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=i.default,r.__extends(c,s),c.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},n.createElement("div",{class:n.const("dcg-section-heading")},(function(){return e.controller.s("graphing-calculator-heading-dist-tab-visualizations")}),n.createElement("a",{href:n.const("https://support.desmos.com/hc/en-us/articles/360022405991"),target:n.const("_blank"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-dist-tab-visualizations")}},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))),this.b("histogram"),this.b("dotplot"),this.b("boxplot"),n.createElement("div",{class:n.const("dcg-section-heading")},(function(){return e.controller.s("graphing-calculator-heading-dist-tab-distributions")}),n.createElement("a",{href:n.const("https://support.desmos.com/hc/en-us/articles/360022401451#distributions"),target:n.const("_blank"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-dist-tab-distributions")}},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))),this.b("normaldist"),this.b("tdist"),this.b("poissondist"),this.b("binomialdist"),this.b("uniformdist"),n.createElement("div",{class:n.const("dcg-popover-section-separator")}),this.b("pdf"),this.b("cdf"),this.b("inversecdf"),this.b("random"))},c.prototype.b=function(e){return o.view(this,e,{style:"popover-short"})},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("loadcss!graphing-calc/keypads/functions-popover",(function(){})),i("graphing-calc/keypads/functions-popover",["require","exports","tslib","dcgview","./dcgview-graphing","./trig","./stats","./misc","./distributions","loadcss!./functions-popover"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,u=n.Components,d=u.SwitchUnion,p=u.If,h=(c=i.default,r.__extends(g,c),g.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-functions-popover dcg-popover dcg-top")},n.createElement("div",{class:n.const("dcg-popover-interior")},n.createElement("div",{class:n.const("dcg-popover-header")},n.createElement("span",{role:n.const("button"),"dcg-command":n.const("trigTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"trig"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"trig"})}},(function(){return e.controller.s("graphing-calculator-button-functions-menu-trig")})),n.createElement("span",{role:n.const("button"),"dcg-command":n.const("statsTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"stats"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"stats"})}},(function(){return e.controller.s("graphing-calculator-button-functions-menu-stats")})),n.createElement(p,{predicate:function(){return e.controller.areDistributionsEnabled()}},(function(){return n.createElement("span",{role:n.const("button"),"dcg-command":n.const("distTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"dist"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"dist"})}},(function(){return e.controller.s("graphing-calculator-button-functions-menu-dist")}))})),n.createElement("span",{role:n.const("button"),"dcg-command":n.const("miscTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"misc"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"misc"})}},(function(){return e.controller.s("graphing-calculator-button-functions-menu-misc")}))),n.createElement("div",{class:n.const("dcg-interior-buttons")},d((function(){return e.controller.getKeypadFunctionsTab()}),{trig:function(){return n.createElement(o.default,{controller:e.props.controller})},stats:function(){return n.createElement(a.default,{controller:e.props.controller})},misc:function(){return n.createElement(s.default,{controller:e.props.controller})},dist:function(){return n.createElement(l.default,{controller:e.props.controller})}}))),n.createElement("div",{class:n.const("dcg-arrow")}))},g);function g(){return null!==c&&c.apply(this,arguments)||this}t.default=h})),i("loadcss!graphing-calc/keypads/graphing-keypad-container",(function(){})),i("graphing-calc/keypads/main",["require","exports","tslib","dcgview","./dcgview-graphing","./qwerty","./qwerty-capital","./numbers","./letters","./letters-capital","./audio","./functions-popover","jquery","underscore","../../lib/tooltip","loadcss!./graphing-keypad-container"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f,m=n.Components,y=m.SwitchUnion,v=m.If,b=(f=i.default,r.__extends(x,f),x.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-keypad"),role:n.const("complementary"),"aria-label":n.const("Keypad")},n.createElement("div",{class:n.const("dcg-keys-container"),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer),"aria-hidden":function(){return!e.controller.isKeypadOpen()}},n.createElement("div",{class:n.const("dcg-keys-background dcg-do-not-blur"),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},n.createElement("div",{class:n.const("dcg-keys")},y((function(){return e.controller.getKeypadLayout()}),{letters:function(){return n.createElement(o.default,{controller:e.props.controller})},capitalLetters:function(){return n.createElement(a.default,{controller:e.props.controller})},mainNumbers:function(){return n.createElement(s.default,{controller:e.props.controller})},noQwertyLetters:function(){return n.createElement(l.default,{controller:e.props.controller})},noQwertyCapitalLetters:function(){return n.createElement(c.default,{controller:e.props.controller})},audio:function(){return n.createElement(u.default,{controller:e.props.controller})}}),n.createElement(v,{predicate:function(){return e.controller.isKeypadFunctionsPopoverOpen()}},(function(){return n.createElement(d.default,{controller:e.props.controller})}))),n.createElement(v,{predicate:this.bindFn(this.isHideKeypadButtonVisible)},(function(){return n.createElement("div",{class:n.const("dcg-minimize-keypad-container")},n.createElement(g.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-hide-keypad")},gravity:e.const("ne"),offset:e.const({left:6})},n.createElement("div",{role:n.const("button"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-hide-keypad")},class:n.const("dcg-minimize-keypad"),style:function(){return{"border-bottom-color":e.controller.getPillboxBackgroundColor(),background:e.controller.getPillboxBackgroundColor()}},onTap:function(){e.controller.dispatch({type:"keypad/set-minimized",minimized:!0})}},n.createElement("i",{class:n.const("dcg-icon-keyboard")}),n.createElement("i",{class:n.const("dcg-icon-caret-down")}))))})))),n.createElement(v,{predicate:this.bindFn(this.isShowKeypadButtonVisible)},(function(){return n.createElement("div",{class:n.const("dcg-show-keypad-container")},n.createElement(g.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-show-keypad")},gravity:e.const("ne")},n.createElement("div",{role:n.const("button"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-show-keypad")},class:n.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),style:function(){return{background:e.controller.getPillboxBackgroundColor()}},onTap:function(){e.controller.dispatch({type:"keypad/set-minimized",minimized:!1})}},n.createElement("i",{class:n.const("dcg-icon-keyboard")}),n.createElement("i",{class:n.const("dcg-icon-caret-up dcg-do-not-blur")}))))})))},x.prototype.didMountContainer=function(e){this.containerElt=e},x.prototype.isShowKeypadButtonVisible=function(){return"none"===this.controller.getBrailleMode()&&!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&(this.controller.isListVisible()||this.controller.inAudioTraceMode())},x.prototype.isHideKeypadButtonVisible=function(){return"none"===this.controller.getBrailleMode()&&this.controller.isKeypadOpen()&&(!this.controller.isNarrow()||this.controller.inAudioTraceMode())},x.prototype.didMount=function(){this.updatePopoverPosition()},x.prototype.didUpdate=function(){this.updatePopoverPosition()},x.prototype.computeStyles=function(){var e={};return this.controller.isNarrow()||(e.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(e.opacity="0",e.transform="translate3d(0, 255px, 0)"),e},x.prototype.updatePopoverPosition=function(){var e,t,r,n,i,o,a;this.controller.isKeypadFunctionsPopoverOpen()?(t={keypadTop:(e=this.controller.computeMajorLayout()).keypad.top,keypadWidth:e.keypad.width,keypadHeight:e.keypad.height,showToLeft:e.grapher.height<525},h.isEqual(t,this.__popoverCache)||(this.__popoverCache=t,n=(r=p(this.containerElt)).find("[dcg-command=functions]"),i=r.find(".dcg-functions-popover"),o=r.find(".dcg-arrow"),t.showToLeft?(i.removeClass("dcg-top").addClass("dcg-left"),a=t.keypadHeight-(n.offset().top-r.offset().top)-n.outerHeight()/2-2-10,o.css({left:"auto",bottom:a})):(i.removeClass("dcg-left").addClass("dcg-top"),o.css({left:i.width()-n.width()/2,bottom:"auto"})))):this.__popoverCache=void 0},x);function x(){return null!==f&&f.apply(this,arguments)||this}t.default=b})),i("loadcss!pillboxes",(function(){})),i("main/graphpaper-branding-view",["require","exports","tslib","dcgview","loadcss!pillboxes"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n.Components.SwitchUnion,a=(i=n.Class,r.__extends(s,i),s.prototype.template=function(){var e=this;return this.controller=this.props.controller(),o((function(){return e.controller.getBrandingMode()}),{"static-edit-link":function(){return n.createElement("div",{class:n.const("dcg-graphpaper-branding")},n.createElement("a",{href:function(){return e.controller.getEditLink()},target:n.const("_blank")},n.createElement("span",{class:n.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-on-desmos")}},(function(){return e.controller.s("graphing-calculator-link-edit-on-desmos")})),n.createElement("i",{class:n.const("dcg-icon-desmos")})))},"edit-link":function(){return n.createElement("div",{class:n.const("dcg-graphpaper-branding")},n.createElement("span",{class:n.const("dcg-edit-branding"),onTap:function(){return e.controller.dispatch({type:"open-on-web"})}},n.createElement("span",{class:n.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-on-desmos")}},(function(){return e.controller.s("graphing-calculator-link-edit-on-desmos")})),n.createElement("i",{class:n.const("dcg-icon-desmos")})))},"powered-by":function(){return n.createElement("div",{class:n.const("dcg-graphpaper-branding dcg-unclickable")},n.createElement("i",{class:n.const("dcg-icon-desmos")}))}})},s);function s(){return null!==i&&i.apply(this,arguments)||this}t.default=a})),i("loadcss!main/settings-view",(function(){})),i("main/settings-view",["require","exports","tslib","keys","scroll_helpers","lib/tooltip","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","jquery","core/graphing-calc/json/graph-settings","core/math/evaluate-single-expression","graphing/viewport","dcgview-helpers/checkbox","main/manage-focus-helper","../dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators","loadcss!./settings-view"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y,v=a.Components,b=v.Input,x=v.If,w=(y=a.Class,r.__extends(S,y),S.prototype.template=function(){var e=this;return a.createElement(f.default,{latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},controller:this.props.controller,ariaLabel:function(){return e.props.ariaLabel()},onBrailleInput:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onBrailleFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},brailleShouldFocus:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},hasError:function(){return e.props.parent().isLimitInvalid(e.props.limit())},onExpressionSizeExceeded:function(){},dataDCGLimit:function(){return e.props.limit()}},a.createElement(l.default,{isFocused:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},capExpressionSize:function(){return e.props.parent().getCapExpressionSize()},config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return e.props.ariaLabel()},getAriaPostLabel:this.const(""),onUserChangedLatex:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},hasError:this.const(!1),selectOnFocus:this.const(!0),needsSystemKeypad:function(){return e.props.needsSystemKeypad()}},a.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-math-input":!0,"dcg-invalid":e.props.parent().isLimitInvalid(e.props.limit()),"dcg-focus":e.props.parent().getFocusedLimit()===e.props.limit()}},"data-dcg-limit":function(){return e.props.limit()}})))},S.prototype.getMQConfig=function(){return{autoOperatorNames:m.getAutoOperators()}},S);function S(){return null!==y&&y.apply(this,arguments)||this}var E,_=(E=a.Class,r.__extends(k,E),k.prototype.template=function(){var e=this;return this.controller=this.props.controller(),a.createElement("div",{class:a.const("dcg-settings-view-container")},a.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-graph-settings")},gravity:this.const("w")},a.createElement("div",{class:a.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-action-settings"),role:a.const("button"),tabindex:a.const("0"),"aria-haspopup":a.const("true"),"aria-expanded":function(){return e.controller.isGraphSettingsOpen()},"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-graph-settings")},onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(g.manageFocusHelper({controller:this.controller,location:{type:"settings",location:"icon"}})),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},a.createElement("i",{class:a.const("dcg-icon-wrench"),"aria-hidden":a.const("true")}))),a.createElement(x,{predicate:function(){return e.controller.isGraphSettingsOpen()}},(function(){return a.createElement("div",{class:a.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:e.bindFn(e.getContainerStyle),didMount:e.bindFn(e.didMountContainer),didUnmount:e.bindFn(e.didUnmountContainer)},a.createElement("div",{class:a.const("dcg-popover-interior"),role:a.const("complementary"),"aria-label":a.const("Graph Settings")},a.createElement("div",{class:a.const("dcg-visual-settings")},a.createElement("div",{class:a.const("dcg-group-title")},(function(){return e.controller.s("shared-calculator-label-settings-display")})),a.createElement("div",{class:a.const("dcg-displaysizegroup dcg-segmented-control-container"),role:a.const("group"),"aria-label":function(){return e.controller.s("shared-calculator-narration-settings-display-size")}},a.createElement("div",{class:function(){return{"dcg-action-displaysizedefault":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected dcg-active":!e.getProjectorMode()}},"aria-pressed":function(){return!e.getProjectorMode()},role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.s("shared-calculator-narration-settings-display-size-default")},onTap:e.bindFn(e.setDefaultDisplaySize)},a.const("A")),a.createElement("div",{class:function(){return{"dcg-action-displaysizelarge":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected dcg-active":e.getProjectorMode()}},"aria-pressed":e.bindFn(e.getProjectorMode),role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.s("shared-calculator-narration-settings-display-size-large")},onTap:e.bindFn(e.setLargeDisplaySize),manageFocus:e.const(g.manageFocusHelper({controller:e.controller,location:{type:"settings",location:"projector-mode"}}))},a.const("A"))),a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-reverse-contrast")},onChange:e.bindFn(e.toggleInvertedColors),checked:function(){return e.controller.getInvertedColors()},green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-reverse-contrast")})),a.createElement(x,{predicate:function(){return e.controller.getBrailleControls()}},(function(){return a.createElement("div",{class:a.const("dcg-braille-container dcg-braille-mode")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-braille-mode")},onChange:e.bindFn(e.toggleBrailleMode),checked:function(){return"none"!==e.controller.getBrailleMode()},green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-braille-mode")})),a.createElement(x,{predicate:function(){return"none"!==e.controller.getBrailleMode()}},(function(){return a.createElement("div",{class:a.const("dcg-braille-options-container")},a.createElement("div",{role:a.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-label-settings-braille-mode")},class:a.const("dcg-braille-options-buttons dcg-segmented-control-container")},a.createElement("span",{class:function(){return{"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-braille-option":!0,"dcg-selected dcg-active":"nemeth"===e.controller.getBrailleMode()}},role:a.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"nemeth"})},tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-nemeth")},"aria-pressed":function(){return"nemeth"===e.controller.getBrailleMode()}},(function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-nemeth")})),a.createElement("span",{class:function(){return{"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-braille-option":!0,"dcg-selected dcg-active":"ueb"===e.controller.getBrailleMode()}},role:a.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"ueb"})},tabindex:a.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-ueb")},"aria-pressed":function(){return"ueb"===e.controller.getBrailleMode()}},(function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-ueb")}))),a.createElement("div",{class:a.const("dcg-checkbox-title dcg-six-key-checkbox")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-six-key-braille")},onChange:function(t){return e.controller.dispatch({type:"set-six-key-input",useSixKeyInput:t})},checked:function(){return e.controller.getSixKeyInput()},green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-six-key-braille")})),a.createElement("a",{href:a.const("https://www.desmos.com/accessibility#braille"),class:a.const("dcg-six-key-info"),target:a.const("_blank")},a.createElement("i",{class:a.const("dcg-icon-question-sign")}))),a.createElement("div",{class:a.const("dcg-refreshable-braille-note")},(function(){return e.controller.s("graphing-calculator-text-refreshable-braille-display-note")+" "}),a.createElement("a",{href:function(){return"https://www.desmos.com/braille-examples?"+e.controller.getBrailleMode()},target:a.const("_blank")},(function(){return e.controller.s("graphing-calculator-link-view-braille-examples")}))))})))}))),a.createElement("div",{class:a.const("dcg-top-section-flex dcg-grid-settings-container")},a.createElement("div",{class:a.const("dcg-grid-settings")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-grid")},onChange:e.bindFn(e.toggleGrid),checked:e.bindFn(e.getShowGrid),green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-grid")})),a.createElement(x,{predicate:e.bindFn(e.getShowGrid)},(function(){return a.createElement("div",{class:a.const("dcg-circle-icon-group dcg-grid-group")},a.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-active":!e.getPolarMode()}},role:a.const("button"),tabindex:a.const("0"),ariaPressed:function(){return!e.getPolarMode()},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-cartesian-grid")},onTap:e.bindFn(e.setCartesianMode)}),a.const(" "),a.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-active":e.getPolarMode()}},role:a.const("button"),tabindex:a.const("0"),ariaPressed:function(){return e.getPolarMode()},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-polar-grid")},onTap:e.bindFn(e.setPolarMode)}))})),a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-arrows")},onChange:e.bindFn(e.toggleArrows),checked:function(){return e.getAxisArrowMode()!==u.AxisArrowModes.NONE},green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-arrows")})),a.createElement(x,{predicate:function(){return e.getAxisArrowMode()!==u.AxisArrowModes.NONE}},(function(){return a.createElement("div",{class:a.const("dcg-circle-icon-group dcg-arrow-group")},a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===u.AxisArrowModes.BOTH}},"dcg-arrows":a.const("BOTH"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-show-both")},"aria-pressed":function(){return e.getAxisArrowMode()===u.AxisArrowModes.BOTH},onTap:function(){return e.setAxisArrowMode(u.AxisArrowModes.BOTH)}},a.createElement("i",{class:a.const("dcg-icon-arrows-two")})),a.const(" "),a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===u.AxisArrowModes.POSITIVE}},"dcg-arrows":a.const("POSITIVE"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-show-positive")},"aria-pressed":function(){return e.getAxisArrowMode()===u.AxisArrowModes.POSITIVE},onTap:function(){return e.setAxisArrowMode(u.AxisArrowModes.POSITIVE)}},a.createElement("i",{class:a.const("dcg-icon-arrows-one")})))}))),a.createElement("div",{class:a.const("dcg-top-checkboxes-container")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-axis-numbers")},onChange:e.bindFn(e.toggleAxisNumbers),checked:e.bindFn(e.getAxisNumbers),small:e.const(!0),green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-axis-numbers")})),a.createElement(x,{predicate:function(){return e.getShowGrid()&&!e.getPolarMode()}},(function(){return a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-minor-gridlines")},onChange:e.bindFn(e.toggleMinorGridlines),checked:e.bindFn(e.getMinorGridlines),small:e.const(!0),green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-minor-gridlines")}))})),a.createElement(x,{predicate:function(){return e.controller.canUseAdvancedStyling()&&!e.getPolarMode()}},(function(){return a.createElement(h.Checkbox,{checked:function(){return e.controller.getGraphSettings().restrictGridToFirstQuadrant},ariaLabel:e.const("One Quadrant"),onChange:function(t){return e.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:t})},small:e.const(!0),green:e.const(!0)},a.const("One Quadrant"))})),a.createElement(x,{predicate:function(){return!e.getSquareAxes()}},(function(){return a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:a.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:e.bindFn(e.zoomSquare)},(function(){return e.controller.s("graphing-calculator-button-settings-zoom-square")}))})))),a.createElement("div",{class:a.const("dcg-axes-settings-container")},a.createElement("div",{class:a.const("dcg-checkbox-title dcg-x-axis-title")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-x-axis")},onChange:e.bindFn(e.toggleXAxis),checked:e.bindFn(e.getShowXAxis),green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-x-axis")})),a.createElement(b,{class:e.const("dcg-axis-label dcg-x-axis-label"),placeholder:function(){return e.controller.s("graphing-calculator-label-settings-add-label")},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-label")},disabled:function(){return!e.getShowXAxis()||void 0},"aria-disabled":function(){return!e.getShowXAxis()||void 0},onInput:e.bindFn(e.onXAxisLabelInput),value:e.bindFn(e.getXAxisLabel)})),a.createElement("div",{class:a.const("dcg-editable-mathquill-container dcg-x-axis-options")},a.createElement(w,{limit:e.const("xmin"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-min")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(s.default,{config:e.const({}),latex:e.const("\\le x\\le")},a.createElement("span",{class:a.const("dcg-interval-interior")})),a.createElement(w,{limit:e.const("xmax"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-max")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(x,{predicate:function(){return!e.getPolarMode()}},(function(){return a.createElement("span",{class:a.const("dcg-step-container")},a.createElement("span",{class:a.const("dcg-step-label"),"aria-hidden":a.const("true")},(function(){return e.controller.s("graphing-calculator-label-settings-step")})),a.createElement(w,{limit:e.const("xstep"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-step")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}))}))),a.createElement("div",{class:a.const("dcg-checkbox-title dcg-y-axis-title")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-y-axis")},onChange:e.bindFn(e.toggleYAxis),checked:e.bindFn(e.getShowYAxis),green:e.const(!0)},(function(){return e.controller.s("graphing-calculator-label-settings-y-axis")})),a.createElement(b,{class:e.const("dcg-axis-label dcg-y-axis-label"),placeholder:function(){return e.controller.s("graphing-calculator-label-settings-add-label")},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-label")},disabled:function(){return!e.getShowYAxis()||void 0},"aria-disabled":function(){return!e.getShowYAxis()||void 0},onInput:e.bindFn(e.onYAxisLabelInput),value:e.bindFn(e.getYAxisLabel)})),a.createElement("div",{class:a.const("dcg-editable-mathquill-container dcg-y-axis-options")},a.createElement(w,{limit:e.const("ymin"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-min")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(s.default,{config:e.const({}),latex:e.const("\\le y\\le")},a.createElement("span",{class:a.const("dcg-interval-interior")})),a.createElement(w,{limit:e.const("ymax"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-max")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(x,{predicate:function(){return!e.getPolarMode()}},(function(){return a.createElement("span",{class:a.const("dcg-step-container")},a.createElement("span",{class:a.const("dcg-step-label"),"aria-hidden":a.const("true")},(function(){return e.controller.s("graphing-calculator-label-settings-step")})),a.createElement(w,{limit:e.const("ystep"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-step")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}))})))),a.createElement("div",{class:a.const("dcg-radiangroup dcg-segmented-control-container"),role:a.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-angle")}},a.createElement("div",{class:function(){return{"dcg-action-radianmode":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected dcg-active":!e.getDegreeMode()}},"aria-pressed":function(){return!e.getDegreeMode()},role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-radians")},onTap:e.bindFn(e.setRadianMode)},(function(){return e.controller.s("graphing-calculator-button-settings-radians")})),a.createElement("div",{class:function(){return{"dcg-action-degreemode":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected dcg-active":e.getDegreeMode()}},"aria-pressed":e.bindFn(e.getDegreeMode),role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-degrees")},onTap:e.bindFn(e.setDegreeMode),manageFocus:e.const(g.manageFocusHelper({controller:e.controller,location:{type:"settings",location:"degree-mode"}}))},(function(){return e.controller.s("graphing-calculator-button-settings-degrees")}))),a.createElement("div",{class:a.const("dcg-arrow")})))})))},k.prototype.didMountContainer=function(e){var t=this;this.node=e,c(document).on("dcg-tapstart.settings-view wheel.settings-view",(function(e){t.eventShouldClosePopover(e)&&t.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:"keyboard"===e.device})})),c(document).on("keydown.settings-view",(function(e){if("Esc"===n.lookup(e)&&t.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),t.controller.isGraphSettingsOpen()&&"Tab"===n.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var r=t.controller.getFocusLocation();if(!r||"settings"!==r.type)return;e.shiftKey||"degree-mode"!==r.location?e.shiftKey&&"icon"===r.location&&(t.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),e.preventDefault(),e.stopPropagation()):(t.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),e.preventDefault(),e.stopPropagation())}}))},k.prototype.didUnmountContainer=function(){c(document).off(".settings-view")},k.prototype.didUpdate=function(){var e;this.controller.isGraphSettingsOpen()&&((e=this.controller.getKeypadHeight())!==this.cachedKeypadHeight&&document.activeElement&&c(document.activeElement).closest(this.node).length&&i.scrollVisible(c(document.activeElement),c(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=e)},k.prototype.eventShouldClosePopover=function(e){var t=c(e.target),r=!!t.closest(this.node).length,n=!!t.closest(".dcg-action-settings").length,i=this.isMathquillFocused()&&t.closest(".dcg-keypad").length,o=!!t.closest(".dcg-action-undo").length||!!t.closest(".dcg-action-redo").length;return!(r||n||i||o)},k.prototype.onTapSettingsButton=function(e){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:"keyboard"===e.device})},k.prototype.isMathquillFocused=function(){return void 0!==this.getFocusedLimit()},k.prototype.getLimitLatex=function(e){return this.controller.getSettingsViewModel().limitLatex[e]},k.prototype.setLimitLatex=function(e,t){t!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:t})},k.prototype.getFocusedLimit=function(){var e=this.controller.getFocusLocation();if(e&&"settings"===e.type)return e.location},k.prototype.getInvalidLimits=function(){var e=!!this.controller.getGraphSettings().degreeMode,t=d.default(this.getLimitLatex("xmin"),e),r=d.default(this.getLimitLatex("xmax"),e),n=d.default(this.getLimitLatex("ymin"),e),i=d.default(this.getLimitLatex("ymax"),e),o=""===this.getLimitLatex("xstep")?0:d.default(this.getLimitLatex("xstep"),e),a=""===this.getLimitLatex("ystep")?0:d.default(this.getLimitLatex("ystep"),e),s={},l=new p.Viewport(t,r,n,i);return isFinite(t)&&isFinite(r)?(s.xmin=!l.isXValid(),s.xmax=s.xmin):(s.xmin=!isFinite(t),s.xmax=!isFinite(r)),isFinite(n)&&isFinite(i)?(s.ymin=!l.isYValid(),s.ymax=s.ymin):(s.ymin=!isFinite(n),s.ymax=!isFinite(i)),s.xstep=!isFinite(o)||o<0,s.ystep=!isFinite(a)||a<0,s},k.prototype.isLimitInvalid=function(e){return this.getInvalidLimits()[e]},k.prototype.onFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})},k.prototype.onXAxisLabelInput=function(e){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:e})},k.prototype.onYAxisLabelInput=function(e){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:e})},k.prototype.getXAxisLabel=function(){return this.controller.getGraphSettings().xAxisLabel},k.prototype.getYAxisLabel=function(){return this.controller.getGraphSettings().yAxisLabel},k.prototype.getShowXAxis=function(){return!!this.controller.getGraphSettings().showXAxis},k.prototype.toggleXAxis=function(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})},k.prototype.getShowYAxis=function(){return!!this.controller.getGraphSettings().showYAxis},k.prototype.toggleYAxis=function(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})},k.prototype.getAxisNumbers=function(){return!!this.controller.getGraphSettings().xAxisNumbers},k.prototype.toggleAxisNumbers=function(){var e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})},k.prototype.getMinorGridlines=function(){return 0===this.controller.getGraphSettings().xAxisMinorSubdivisions},k.prototype.toggleMinorGridlines=function(){var e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})},k.prototype.getPolarMode=function(){return!!this.controller.getGraphSettings().polarMode},k.prototype.setPolarMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!0})},k.prototype.setCartesianMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!1})},k.prototype.getDegreeMode=function(){return!!this.controller.getGraphSettings().degreeMode},k.prototype.setRadianMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!1})},k.prototype.setDegreeMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!0})},k.prototype.getProjectorMode=function(){return!!this.controller.getGraphSettings().config.projectorMode},k.prototype.toggleInvertedColors=function(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})},k.prototype.toggleBrailleMode=function(){this.controller.dispatch({type:"set-braille-mode",mode:"none"===this.controller.getBrailleMode()?"nemeth":"none"})},k.prototype.setDefaultDisplaySize=function(){this.controller.dispatch({type:"set-projector-mode",value:!1})},k.prototype.setLargeDisplaySize=function(){this.controller.dispatch({type:"set-projector-mode",value:!0})},k.prototype.getAxisArrowMode=function(){return this.controller.getGraphSettings().xAxisArrowMode},k.prototype.setAxisArrowMode=function(e){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})},k.prototype.getShowGrid=function(){return this.controller.getGraphSettings().showGrid},k.prototype.toggleGrid=function(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})},k.prototype.toggleArrows=function(){var e=this.getAxisArrowMode()===u.AxisArrowModes.NONE?u.AxisArrowModes.BOTH:u.AxisArrowModes.NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})},k.prototype.getSquareAxes=function(){return!!this.controller.getGraphSettings().squareAxes},k.prototype.getContainerStyle=function(){return this.controller.getKeypadHeight()?"bottom: 0":""},k.prototype.zoomSquare=function(){this.controller.dispatch({type:"zoom",direction:"square"})},k.prototype.getCapExpressionSize=function(){return!!this.controller.getGraphSettings().config.capExpressionSize},k);function k(){return null!==E&&E.apply(this,arguments)||this}t.default=_})),i("main/zoom-buttons-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=n.Class,r.__extends(s,o),s.prototype.init=function(){this.controller=this.props.controller()},s.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-zoom-container")},n.createElement("div",{class:n.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group"),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},n.createElement(i.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-zoom-in")},gravity:this.const("w")},n.createElement("div",{class:n.const("dcg-action-zoomin"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-zoom-in")},onTap:this.bindFn(this.zoomIn),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-plus"),"aria-hidden":n.const("true")}))),n.createElement(i.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-zoom-out")},gravity:this.const("w")},n.createElement("div",{class:n.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-zoom-out")},role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-zoom-out")},onTap:this.bindFn(this.zoomOut),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-minus"),"aria-hidden":n.const("true")})))),n.createElement(i.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-zoom-default")},gravity:this.const("w")},n.createElement("div",{class:function(){return{"dcg-btn-flat-gray":!0,"dcg-option":!0,"dcg-action-zoomrestore":!0,"dcg-disabled":e.getZoomedDefault()}},"aria-disabled":this.bindFn(this.getZoomedDefault),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-zoom-default")},onTap:this.bindFn(this.zoomRestore),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-home"),"aria-hidden":n.const("true")}))))},s.prototype.zoomIn=function(){this.controller.dispatch({type:"zoom",direction:"in"})},s.prototype.zoomOut=function(){this.controller.dispatch({type:"zoom",direction:"out"})},s.prototype.zoomRestore=function(){this.controller.dispatch({type:"zoom",direction:"default"})},s.prototype.getZoomedDefault=function(){return this.controller.getGraphSettings().zoomedDefault},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=a})),i("main/reset-button-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=n.Class,r.__extends(s,o),s.prototype.init=function(){this.controller=this.props.controller()},s.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-reset-container")},n.createElement(i.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-reset")},gravity:this.const("w")},n.createElement("div",{class:n.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-reset")},onTap:this.bindFn(this.reset),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-reset"),"aria-hidden":n.const("true")}))))},s.prototype.reset=function(){this.controller.dispatch({type:"reset-graph"})},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=a})),i("main/pillbox-view",["require","exports","tslib","dcgview","./graphpaper-branding-view","./settings-view","./zoom-buttons-view","./reset-button-view","loadcss!pillboxes"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components.If,u=(l=n.Class,r.__extends(d,l),d.prototype.init=function(){this.controller=this.props.controller()},d.prototype.template=function(){var e=this;return n.createElement("div",null,n.createElement(c,{predicate:this.bindFn(this.shouldShowContainer)},(function(){return n.createElement("div",{class:n.const("dcg-pillbox-container"),role:n.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-graph-settings-controls")}},n.createElement("div",{class:n.const("dcg-overgraph-pillbox-elements"),style:e.bindFn(e.getContainerStyle)},n.createElement(c,{predicate:e.bindFn(e.shouldShowSettings)},(function(){return n.createElement(o.default,{controller:e.props.controller})})),n.createElement(c,{predicate:e.bindFn(e.shouldShowResetButton)},(function(){return n.createElement(s.default,{controller:e.props.controller})})),n.createElement(c,{predicate:e.bindFn(e.shouldShowZoomButtons)},(function(){return n.createElement(a.default,{controller:e.props.controller})}))))})),n.createElement(i.default,{controller:function(){return e.props.controller()}}))},d.prototype.getContainerStyle=function(){var e=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?"bottom: "+e+"px;":"bottom: auto"},d.prototype.shouldShowContainer=function(){return this.shouldShowSettings()||this.shouldShowZoomButtons()||this.shouldShowResetButton()},d.prototype.shouldShowSettings=function(){return this.controller.getGraphSettings().config.settingsMenu},d.prototype.shouldShowZoomButtons=function(){return this.controller.getGraphSettings().config.zoomButtons},d.prototype.shouldShowResetButton=function(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("loadcss!main/toast-view",(function(){})),i("main/toast-view",["require","exports","tslib","dcgview","loadcss!./toast-view"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToastView=void 0;var i,o=n.Components.If,a=(i=n.Class,r.__extends(s,i),s.prototype.template=function(){var e=this;return n.createElement("span",{class:n.const("dcg-toast")},n.createElement("i",{class:n.const("dcg-icon-error")}),n.createElement(o,{predicate:function(){return!e.props.showUndo()&&(!e.props.showClose||e.props.showClose())}},(function(){return n.createElement("i",{class:n.const("dcg-icon-remove"),onTap:function(){return e.props.onClose&&e.props.onClose()},role:n.const("link"),tabindex:n.const(0),"aria-label":n.const("Dismiss Notice")})})),n.createElement("span",{class:n.const("dcg-msg"),"aria-atomic":function(){return!e.props.noAria()},"aria-live":function(){return e.props.noAria()?"":"assertive"}},(function(){return e.props.message()})),n.createElement(o,{predicate:this.props.showUndo},(function(){return n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-undo"),onTap:function(){return e.props.onUndo&&e.props.onUndo()}},(function(){return e.props.s("shared-calculator-label-toast-undo")}))})),n.createElement(o,{predicate:this.props.showLearnMore},(function(){return n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-learn-more-link"),target:n.const("_blank"),onTap:function(){return e.props.onLearnMore&&e.props.onLearnMore()}},(function(){return e.props.s("shared-calculator-label-toast-learn-more")}))})),n.createElement(o,{predicate:function(){return!!e.props.link&&!!e.props.link()}},(function(){return n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-learn-more-link"),target:n.const("_blank"),href:function(){return e.props.link().url}},(function(){return e.props.link().text}))})))},s.prototype.shouldUpdate=function(){return!!this.props.message()},s);function s(){return null!==i&&i.apply(this,arguments)||this}var l,c=(l=n.Class,r.__extends(u,l),u.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-toast-view":!0,"dcg-visible":!!e.props.message()}},"toast-style":function(){return e.props.toastStyle&&e.props.toastStyle()}},n.createElement(o,{predicate:function(){return!!e.props.message()}},(function(){return n.createElement("div",{class:n.const("dcg-toast-wrapper")},n.createElement("div",{class:n.const("dcg-toast-cover")}),n.createElement(a,r.__assign({},e.props)))})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.ToastView=c})),i("main/disable-dragdrop-events",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.on("drag dragend dragenter dragover dragleave drop",(function(e){e.preventDefault(),e.stopPropagation()}))}})),i("graphing-calc/views/main",["require","exports","tslib","touchtracking","ipad.scrollfix","dcgview","jquery","../../expressions/list-view","graphing-calc/keypads/main","main/pillbox-view","main/toast-view","main/disable-dragdrop-events","lib/tooltip","main/manage-focus-helper"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g,f=o.Components.If,m=(g=o.Class,r.__extends(y,g),y.prototype.init=function(){this.controller=this.props.controller()},y.prototype.settings=function(){return this.controller.getGraphSettings()},y.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-calculator-api-container"),style:o.const("width: 100%; height: 100%; position: relative;")},o.createElement("div",{class:function(){return{"dcg-container":!0,"dcg-fullscreen":!e.controller.isListVisible(),"dcg-narrow":e.controller.isNarrow(),"dcg-PROJECTOR-MODE":e.settings().config.projectorMode,"dcg-inverted-colors":!!e.settings().config.invertedColors,"dcg-EDIT-LIST-MODE":e.controller.isInEditListMode(),"dcg-no-graphpaper":!e.settings().config.graphpaper,"dcg-no-branding":!e.settings().config.branding,"dcg-no-expression-topbar":!e.settings().config.expressionsTopbar,"dcg-default-border":!!e.settings().config.border,"dcg-no-hyperlinks":!e.settings().config.links,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-is-interactive":e.settings().config.expressions||!e.settings().config.lockViewport}},style:function(){return{"font-size":e.settings().config.fontSize+"px",background:e.getContainerBackgroundColor(),color:e.controller.getTextColor()}},role:o.const("application"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-main-desmos-graphing-calculator")},"x-ms-format-detection":o.const("none"),didMount:this.bindFn(this.didMountRoot)},o.createElement(f,{predicate:function(){return e.controller.getGraphSettings().config.expressions}},(function(){return o.createElement(s.default,{controller:e.props.controller})})),o.createElement(f,{predicate:function(){return e.controller.isListEnabled()&&!e.controller.isListVisible()}},(function(){return o.createElement("div",{class:function(){return{"dcg-overgraph-icon-container":!0,"dcg-bottom-right":e.controller.isNarrow()}}},o.createElement(p.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-show-list")},gravity:function(){return e.controller.isNarrow()?"nw":"se"}},o.createElement("div",{class:function(){return{"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":e.controller.isNarrow()}},"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-show-list")},role:o.const("button"),tabindex:o.const("0"),onTap:function(t){e.controller.dispatch({type:"show-expressions-list",focusHideIcon:"keyboard"===t.device})},manageFocus:e.const(h.manageFocusHelper({controller:e.controller,location:{type:"show-expression-list-btn"}}))},o.createElement("i",{class:o.const("dcg-icon-show")}))))})),o.createElement(f,{predicate:this.bindFn(this.showHamburger)},(function(){return o.createElement("div",{class:o.const("dcg-overgraph-icon-container")},o.createElement(p.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-open-graph")},gravity:e.const("se")},o.createElement("div",{role:o.const("button"),"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-open-graph")},class:o.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),onTap:function(){return e.controller.dispatch({type:"open-drawer"})}},o.createElement("i",{class:o.const("dcg-icon-hamburger")}))))})),o.createElement(c.default,{controller:this.props.controller}),o.createElement(u.ToastView,{message:function(){var t=e.controller.getToastData().message;return e.controller.raw(t||"")},link:function(){return e.controller.getToastData().link||void 0},showUndo:function(){return!!e.controller.getToastData().undoCallback},showLearnMore:function(){return!!e.controller.getToastData().learnMoreCallback},noAria:function(){return!!e.controller.getToastData().noAria},toastStyle:function(){return e.controller.getToastData().toastStyle},s:this.controller.s,onUndo:function(){return e.controller.dispatch({type:"toast/undo"})},onLearnMore:function(){return e.controller.dispatch({type:"toast/learn-more"})},onClose:function(){return e.controller.dispatch({type:"toast/close"})}}),o.createElement("div",{class:o.const("dcg-grapher")}),o.createElement(f,{predicate:function(){return e.controller.getGraphSettings().config.keypad}},(function(){return o.createElement(l.default,{controller:e.props.controller})}))))},y.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&!this.controller.isInEditListMode()&&this.controller.isNarrow()},y.prototype.getContainerBackgroundColor=function(){return this.controller.hasTransparentBackground()?"none":this.controller.getBackgroundColor()},y.prototype.didMountRoot=function(e){n.monitor(e),this.controller.getGraphSettings().config.disableScrollFix||i.limitScrollOnElement(e),this.setupFileDragDrop(e)},y.prototype.setupFileDragDrop=function(e){var t=this,r=a(e);d.default(r);var n=a(),i=this;function o(){n=a(),r.off(".filedraggedover"),i.controller.dispatch({type:"file-is-not-dragged-over"})}r.on("dragenter",(function(e){t.controller.areImagesEnabled()&&(0===n.length&&r.on("dcg-tapstart.filedraggedover",o),n=n.add(e.target),t.controller.dispatch({type:"file-is-dragged-over"}))})).on("dragleave",(function(e){0===(n=n.not(e.target)).length&&o()})).on("drop",o)},y);function y(){return null!==g&&g.apply(this,arguments)||this}t.default=m})),i("worker/workerpoolconnection",["require","pjs","underscore_model"],(function(e){"use strict";return e("pjs")(e("underscore_model").UnderscoreModel,(function(e,t){e.init=function(e){t.init.call(this),this.workerPool=e,this.worker=e.allocateWorker(),this.worker.__connections[this.guid]=this},e.destroy=function(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]},e.killWorker=function(){this.worker.__isFake||this.workerPool.killWorker(this.worker)},e.onWorkerKilled=function(){},e.onResponse=function(e){},e.sendMessage=function(e){this.worker.__isFake?this.worker.postMessage(e):this.worker.postMessage({connectionId:this.guid,originalMessage:e})}}))})),i("text!worker_src_underlying",[],(function(){return'var requirejs,require,define;!function(p){var o,u,a,d,g={},q={},O={},h={},n=Object.prototype.hasOwnProperty,i=[].slice;function E(e,r){return n.call(e,r)}function f(e,r){var n,i,t,o,u,f,c,l,s,p,a=r&&r.split("/"),d=O.map,g=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(r){for(e=(a=a.slice(0,a.length-1)).concat(e.split("/")),l=0;l<e.length;l+=1)if("."===(p=e[l]))e.splice(l,1),--l;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;0<l&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((a||g)&&d){for(l=(n=e.split("/")).length;0<l;--l){if(i=n.slice(0,l).join("/"),a)for(s=a.length;0<s;--s)if(t=(t=d[a.slice(0,s).join("/")])&&t[i]){o=t,u=l;break}if(o)break;!f&&g&&g[i]&&(f=g[i],c=l)}!o&&f&&(o=f,u=c),o&&(n.splice(0,u,o),e=n.join("/"))}return e}function j(e,r){return function(){return u.apply(p,i.call(arguments,0).concat([e,r]))}}function m(e){var r;if(E(q,e)&&(r=q[e],delete q[e],h[e]=!0,o.apply(p,r)),!E(g,e)&&!E(h,e))throw new Error("No "+e);return g[e]}function c(e){var r,n=e?e.indexOf("!"):-1;return-1<n&&(r=e.substring(0,n),e=e.substring(n+1,e.length)),[r,e]}a=function(e,r){var n,i,t=c(e),o=t[0];return e=t[1],o&&(n=m(o=f(o,r))),o?e=n&&n.normalize?n.normalize(e,(i=r,function(e){return f(e,i)})):f(e,r):(o=(t=c(e=f(e,r)))[0],e=t[1],o&&(n=m(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},d={require:function(e){return j(e)},exports:function(e){var r=g[e];return void 0!==r?r:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:(r=e,function(){return O&&O.config&&O.config[r]||{}})};var r}},o=function(e,r,n,i){var t,o,u,f,c,l,s=[];if(i=i||e,"function"==typeof n){for(r=!r.length&&n.length?["require","exports","module"]:r,c=0;c<r.length;c+=1)if("require"===(o=(f=a(r[c],i)).f))s[c]=d.require(e);else if("exports"===o)s[c]=d.exports(e),l=!0;else if("module"===o)t=s[c]=d.module(e);else if(E(g,o)||E(q,o)||E(h,o))s[c]=m(o);else{if(!f.p)throw new Error(e+" missing "+o);f.p.load(f.n,j(i,!0),function(r){return function(e){g[r]=e}}(o),{}),s[c]=g[o]}u=n.apply(g[e],s),e&&(t&&t.exports!==p&&t.exports!==g[e]?g[e]=t.exports:u===p&&l||(g[e]=u))}else e&&(g[e]=n)},requirejs=require=u=function(e,r,n,i,t){return"string"==typeof e?d[e]?d[e](r):m(a(e,r).f):(e.splice||(O=e,r.splice?(e=r,r=n,n=null):e=p),r=r||function(){},"function"==typeof n&&(n=i,i=t),i?o(p,e,r,n):setTimeout(function(){o(p,e,r,n)},4),u)},u.config=function(e){return(O=e).deps&&u(O.deps,O.callback),u},(define=function(e,r,n){r.splice||(n=r,r=[]),E(g,e)||E(q,e)||(q[e]=[e,r,n])}).amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs);\ndefine("core/vendor/almond", function(){});\n\ndefine(\'core/lib/worker-i18n\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.s=void 0,e.s=function(e,r){return{key:e,vars:r}}});\ndefine("pjs",[],function(){var f,a,p;function l(n){return"object"==typeof n}function y(n){return"function"==typeof n}function v(){}return f="prototype",a={}.hasOwnProperty,function t(r,n){function i(){var n=new o;return y(n.init)&&n.init.apply(n,arguments),n}function o(){}n===p&&(n=r,r=Object),i.Bare=o;var e,u=v[f]=r[f],c=o[f]=i[f]=new v;return(c.constructor=i).mixin=function(n){return o[f]=i[f]=t(i,n)[f],i},(i.open=function(n){if(e={},y(n)?e=n.call(i,c,u,i,r):l(n)&&(e=n),l(e))for(var t in e)a.call(e,t)&&(c[t]=e[t]);return y(c.init)||(c.init=r),i})(n)}});\n!function(n){"use strict";function d(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(n,t,r,e,o,u){return d((c=d(d(t,n),d(e,u)))<<(f=o)|c>>>32-f,r);var c,f}function l(n,t,r,e,o,u,c){return f(t&r|~t&e,n,t,o,u,c)}function v(n,t,r,e,o,u,c){return f(t&e|r&~e,n,t,o,u,c)}function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}function i(n,t){var r,e,o,u;n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;for(var c=1732584193,f=-271733879,i=-1732584194,a=271733878,h=0;h<n.length;h+=16)c=l(r=c,e=f,o=i,u=a,n[h],7,-680876936),a=l(a,c,f,i,n[h+1],12,-389564586),i=l(i,a,c,f,n[h+2],17,606105819),f=l(f,i,a,c,n[h+3],22,-1044525330),c=l(c,f,i,a,n[h+4],7,-176418897),a=l(a,c,f,i,n[h+5],12,1200080426),i=l(i,a,c,f,n[h+6],17,-1473231341),f=l(f,i,a,c,n[h+7],22,-45705983),c=l(c,f,i,a,n[h+8],7,1770035416),a=l(a,c,f,i,n[h+9],12,-1958414417),i=l(i,a,c,f,n[h+10],17,-42063),f=l(f,i,a,c,n[h+11],22,-1990404162),c=l(c,f,i,a,n[h+12],7,1804603682),a=l(a,c,f,i,n[h+13],12,-40341101),i=l(i,a,c,f,n[h+14],17,-1502002290),c=v(c,f=l(f,i,a,c,n[h+15],22,1236535329),i,a,n[h+1],5,-165796510),a=v(a,c,f,i,n[h+6],9,-1069501632),i=v(i,a,c,f,n[h+11],14,643717713),f=v(f,i,a,c,n[h],20,-373897302),c=v(c,f,i,a,n[h+5],5,-701558691),a=v(a,c,f,i,n[h+10],9,38016083),i=v(i,a,c,f,n[h+15],14,-660478335),f=v(f,i,a,c,n[h+4],20,-405537848),c=v(c,f,i,a,n[h+9],5,568446438),a=v(a,c,f,i,n[h+14],9,-1019803690),i=v(i,a,c,f,n[h+3],14,-187363961),f=v(f,i,a,c,n[h+8],20,1163531501),c=v(c,f,i,a,n[h+13],5,-1444681467),a=v(a,c,f,i,n[h+2],9,-51403784),i=v(i,a,c,f,n[h+7],14,1735328473),c=g(c,f=v(f,i,a,c,n[h+12],20,-1926607734),i,a,n[h+5],4,-378558),a=g(a,c,f,i,n[h+8],11,-2022574463),i=g(i,a,c,f,n[h+11],16,1839030562),f=g(f,i,a,c,n[h+14],23,-35309556),c=g(c,f,i,a,n[h+1],4,-1530992060),a=g(a,c,f,i,n[h+4],11,1272893353),i=g(i,a,c,f,n[h+7],16,-155497632),f=g(f,i,a,c,n[h+10],23,-1094730640),c=g(c,f,i,a,n[h+13],4,681279174),a=g(a,c,f,i,n[h],11,-358537222),i=g(i,a,c,f,n[h+3],16,-722521979),f=g(f,i,a,c,n[h+6],23,76029189),c=g(c,f,i,a,n[h+9],4,-640364487),a=g(a,c,f,i,n[h+12],11,-421815835),i=g(i,a,c,f,n[h+15],16,530742520),c=m(c,f=g(f,i,a,c,n[h+2],23,-995338651),i,a,n[h],6,-198630844),a=m(a,c,f,i,n[h+7],10,1126891415),i=m(i,a,c,f,n[h+14],15,-1416354905),f=m(f,i,a,c,n[h+5],21,-57434055),c=m(c,f,i,a,n[h+12],6,1700485571),a=m(a,c,f,i,n[h+3],10,-1894986606),i=m(i,a,c,f,n[h+10],15,-1051523),f=m(f,i,a,c,n[h+1],21,-2054922799),c=m(c,f,i,a,n[h+8],6,1873313359),a=m(a,c,f,i,n[h+15],10,-30611744),i=m(i,a,c,f,n[h+6],15,-1560198380),f=m(f,i,a,c,n[h+13],21,1309151649),c=m(c,f,i,a,n[h+4],6,-145523070),a=m(a,c,f,i,n[h+11],10,-1120210379),i=m(i,a,c,f,n[h+2],15,718787259),f=m(f,i,a,c,n[h+9],21,-343485551),c=d(c,r),f=d(f,e),i=d(i,o),a=d(a,u);return[c,f,i,a]}function a(n){for(var t="",r=32*n.length,e=0;e<r;e+=8)t+=String.fromCharCode(n[e>>5]>>>e%32&255);return t}function h(n){var t=[];for(t[(n.length>>2)-1]=void 0,e=0;e<t.length;e+=1)t[e]=0;for(var r=8*n.length,e=0;e<r;e+=8)t[e>>5]|=(255&n.charCodeAt(e/8))<<e%32;return t}function e(n){for(var t,r="0123456789abcdef",e="",o=0;o<n.length;o+=1)t=n.charCodeAt(o),e+=r.charAt(t>>>4&15)+r.charAt(15&t);return e}function r(n){return unescape(encodeURIComponent(n))}function o(n){return a(i(h(t=r(n)),8*t.length));var t}function u(n,t){return function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}(r(n),r(t))}function t(n,t,r){return t?r?u(t,n):e(u(t,n)):r?o(n):e(o(n))}"function"==typeof define&&define.amd?define(\'core/lib/md5\',[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.md5=t}(this);\ndefine(\'core/vendor/d3-color\',[\'require\'],function(require){function e(e,t,r){(e.prototype=t.prototype=r).constructor=e}function t(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function h(){}var r=.7,n=1/r,i="\\\\s*([+-]?\\\\d+)\\\\s*",a="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*",o="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*",s=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\\\("+[i,i,i]+"\\\\)$"),u=new RegExp("^rgb\\\\("+[o,o,o]+"\\\\)$"),g=new RegExp("^rgba\\\\("+[i,i,i,a]+"\\\\)$"),c=new RegExp("^rgba\\\\("+[o,o,o,a]+"\\\\)$"),d=new RegExp("^hsl\\\\("+[a,o,o]+"\\\\)$"),b=new RegExp("^hsla\\\\("+[a,o,o,a]+"\\\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function f(){return this.rgb().formatRgb()}function y(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=s.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?w(t):3===r?new v(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?k(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?k(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new v(t[1],t[2],t[3],1):(t=u.exec(e))?new v(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=g.exec(e))?k(t[1],t[2],t[3],t[4]):(t=c.exec(e))?k(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=d.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=b.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):p.hasOwnProperty(e)?w(p[e]):"transparent"===e?new v(NaN,NaN,NaN,0):null}function w(e){return new v(e>>16&255,e>>8&255,255&e,1)}function k(e,t,r,n){return n<=0&&(e=t=r=NaN),new v(e,t,r,n)}function N(e){return e instanceof h||(e=y(e)),e?new v((e=e.rgb()).r,e.g,e.b,e.opacity):new v}function x(e,t,r,n){return 1===arguments.length?N(e):new v(e,t,r,null==n?1:n)}function v(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function M(){return"#"+q(this.r)+q(this.g)+q(this.b)}function R(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function q(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||1<=r?e=t=NaN:t<=0&&(e=NaN),new C(e,t,r,n)}function $(e){if(e instanceof C)return new C(e.h,e.s,e.l,e.opacity);if(e instanceof h||(e=y(e)),!e)return new C;if(e instanceof C)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=0<l&&l<1?0:o,new C(o,s,l,e.opacity)}function H(e,t,r,n){return 1===arguments.length?$(e):new C(e,t,r,null==n?1:n)}function C(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function j(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}return e(h,y,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:function(){return $(this).formatHsl()},formatRgb:f,toString:f}),e(v,x,t(h,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new v(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new v(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:R,toString:R})),e(C,H,t(h,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new C(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new C(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new v(j(240<=e?e-240:120+e,i,n),j(e,i,n),j(e<120?240+e:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}})),{Color:h,darker:r,brighter:n,color:y,rgbConvert:N,rgb:x,Rgb:v,hslConvert:$,hsl:H}});\ndefine(\'core/math/mathshim\',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sign=r.sqrtxsqm1=r.sqrtxsqp1=r.log1p=r.expm1=r.atanh=r.asinh=r.acosh=r.tanh=r.sinh=r.cosh=void 0;var n=Math;r.cosh=n.cosh||function(n){return.5*(Math.exp(n)+Math.exp(-n))},r.sinh=n.sinh&&0!==n.sinh(1e-20)?n.sinh:function(n){var t=0<n?1:-1;return n=0<n?n:-n,.5*-t*Math.exp(n)*r.expm1(-2*n)},r.tanh=n.tanh&&0!==n.tanh(1e-20)?n.tanh:function(n){var t=0<n?1:-1;n=0<n?n:-n;var a=r.expm1(-2*n);return-t*a/(2+a)},r.acosh=n.acosh||function(n){return n<1?NaN:Math.log(n+r.sqrtxsqm1(n))},r.asinh=n.asinh&&0!==n.asinh(1e-20)?n.asinh:function(n){var t=0<n?1:-1;return 1+(n=0<n?n:-n)*n==1?t*r.log1p(n):t*Math.log(n+r.sqrtxsqp1(n))},r.atanh=n.atanh&&0!==n.atanh(1e-20)?n.atanh:function(n){return.5*(r.log1p(n)-r.log1p(-n))},r.expm1=n.expm1||function(n){return n+.5*n*n===n?n:Math.exp(n)-1},r.log1p=n.log1p||function(n){return n-.5*n*n===n?n:Math.log(1+n)};r.sqrtxsqp1=function(n){var t=n*n;return 1+t==1?1:1+t==t?Math.abs(n):Math.sqrt(1+t)};r.sqrtxsqm1=function(n){var t=n*n;return t<1?NaN:t-1==t?Math.abs(n):Math.sqrt(t-1)},r.sign=n.sign||function(n){return 0===n?0:0<n?1:n<0?-1:NaN}});\ndefine(\'core/math/distance\',["require","exports"],function(require,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.approx=s.pointToSegment=s.closestPointOnSegment=s.pointToSegmentParameter=s.mean=s.hypot=void 0;var t=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function u(t){return t===1/0||t===-1/0}function h(t,e,n,r,i,o,a,u,h){var p=s.hypot(a-r,u-i,h-o);return 0===p?0:(t-r)/p*((a-r)/p)+(e-i)/p*((u-i)/p)+(n-o)/p*((h-o)/p)}function p(t,e,n,r,i,o){var a=h(t,e,0,n,r,0,i,o,0);return a<=0?[n,r]:1<=a?[i,o]:[n+a*(i-n),r+a*(o-r)]}s.hypot=t?Math.hypot:function(t,e,n){if(u(t)||u(e)||void 0!==n&&u(n))return 1/0;if(isNaN(t)||isNaN(e)||void 0!==n&&isNaN(n))return NaN;if(0===t&&0===e&&(void 0===n||0===n))return 0;for(var r=0,i=0,o=0;o<arguments.length;o+=1){var a=Math.abs(Number(arguments[o]));r<a&&(i*=r/a*(r/a),r=a),i+=0===a&&0===r?0:a/r*(a/r)}return r===1/0?1/0:r*Math.sqrt(i)},s.mean=function(t,e){return 0<t==0<e?t+.5*(e-t):.5*(t+e)},s.pointToSegmentParameter=h,s.closestPointOnSegment=p,s.pointToSegment=function(t,e,n,r,i,o){var a=p(t,e,n,r,i,o);return s.hypot(t-a[0],e-a[1])},s.approx=function(t,e,n){if(void 0===n&&(n=1),t===e)return!0;if(!isFinite(t)||!isFinite(e))return!1;if(50<n)throw new Error("Within "+(52-n)+" bits isn\'t really approximate any more");var r=Math.max(Math.max(Math.abs(t),Math.abs(e)),1);return r===r+(1===n?.5:Math.pow(.5,n))*Math.abs(e-t)}});\ndefine(\'core/math/poi\',["require","exports","core/math/distance"],function(require,i,m){"use strict";function J(i,t){var r;t<i&&(r=i,i=t,t=r);var n=0<i,e=0<t,a=.01<Math.abs(i),s=.01<Math.abs(t);if(a||s)return m.mean(i,t);if(0===i)return t*Math.abs(t);if(0===t)return i*Math.abs(i);if(n!=e)return 0;var f=n?Math.sqrt(i*t):-Math.sqrt(i*t);return i<=f&&f<=t?f:m.mean(i,t)}function F(i,t,r,n,e,a,s){var f,u,o,c;if(isFinite(n))return isFinite(t)||(f=l(i,t,r,n,s))&&(i=f[0],t=f[1]),isFinite(a)||(f=l(r,n,e,a,s))&&(e=f[0],a=f[1]),u=t===n?[i,t]:v(i,t,r,n,s,n),o=a===n?[e,a]:v(r,n,e,a,s,n),u&&o&&(c=J(u[0],o[0])),void 0!==c?[c,s(c)]:void 0}function l(i,t,r,n,e){if(isFinite(t)!==isFinite(n))for(;;){var a=J(i,r),s=e(a);if(a===i||a===r)return isFinite(t)?[i,t]:[r,n];isFinite(s)!==isFinite(t)?(r=a,n=s):(i=a,t=s)}}function v(i,t,r,n,e,a){if(t===a!=(n===a))for(;;){var s=J(i,r),f=e(s);if(s===i||s===r)return t===a?[i,t]:[r,n];f===a!=(t===a)?(r=s,n=f):(i=s,t=f)}}function L(i,t){var r=i[0],n=i[1],e=t[0],a=t[1];return(e-r)*(e-r)+(a-n)*(a-n)}function P(i,t,r,n,e,a){var s,f,u,o,c,F,v,b,M,h=a(i),d=a(t),m=a(r),l=L(h,n),P=L(d,n),C=L(m,n);if(!(t<=i||r<=t)&&isFinite(l)&&isFinite(P)&&isFinite(C)&&!(l<=P||C<=P))for(;;){if(Math.abs(m[0]-h[0])<e&&Math.abs(m[1]-h[1])<e)return[i,r];var O=J(i,t),p=a(O),x=L(p,n),N=J(t,r),q=a(N),E=L(q,n);if(!isFinite(x)||!isFinite(E))return;if(O===i||O===t||N===t||N===r)return x<P&&x<E?[O,O]:E<x&&E<P?[N,N]:[t,t];if(!(x!==P&&E!==P||x!==(P=L(d=a(t=.5*(O+t)),n))&&E!==P))return[i,r];x<P&&x<E?(r=(s=[t,O])[0],t=s[1],m=(f=[d,p])[0],d=f[1],C=(u=[P,x])[0],P=u[1]):E<x&&E<P?(i=(o=[t,N])[0],t=o[1],h=(c=[d,q])[0],d=c[1],l=(F=[P,E])[0],P=F[1]):(i=(v=[O,N])[0],r=v[1],h=(b=[p,q])[0],m=b[1],l=(M=[x,E])[0],C=M[1])}}function C(i,t,r){return void 0===t&&(t=-1/0),void 0===r&&(r=1/0),Math.min(r,Math.max(t,i))}function o(i,t,r,n,e,a){var s,f,u,o,c;c=void 0!==n&&void 0!==e?r+.01*(r<.5*(n+e)?e-n:n-e):1<Math.abs(r)?1.00001*r:r+1e-5;var F=i(r),v=i(c),b=L(F,t),M=L(v,t);if(isFinite(b)&&isFinite(M)){if(b===M)return[r,c];for(b<M&&(r=(s=[c,r])[0],c=s[1],f=[v,F],b=(u=[M,b])[0],M=u[1]);isFinite(r)&&isFinite(c)&&r!==c;){if(void 0!==e&&e<c)return[e,e];if(void 0!==n&&c<n)return[n,n];var h=r+3*(c-r),d=L(i(h),t);if(!isFinite(d))return[r,c];if(d===M)return[r,c];if(M<d){var m=r<c?P(r,c,h,t,a,i):P(h,c,r,t,a,i);return m?[C(m[0],n,e),C(m[1],n,e)]:m}r=(o=[c,M,h,d])[0],b=o[1],c=o[2],M=o[3]}return[r,c]}}function c(i,t,r,n){return!r||n&&Math.min(L(i(n[0]),t),L(i(n[1]),t))<Math.min(L(i(r[0]),t),L(i(r[1]),t))}function O(i,t,r,n,e,a,s,f){var u=Math.abs(n-t),o=Math.abs(a-n),c=Math.abs(f-a);return o<u&&c<u?[[i,t],[r,n]]:o<c&&u<c?[[e,a],[s,f]]:[[r,n],[e,a]]}Object.defineProperty(i,"__esModule",{value:!0}),i.bisectJump=i.findLocalClosestPointOnParametric=i.bisectClosestPointOnParametric=i.bisectExtremum=i.bisectFinite=i.flatCenter=i.bisectZero=i.floatMiddle=void 0,i.floatMiddle=J,i.bisectZero=function(i,t,r,n,e){if(!isNaN(t)&&!isNaN(n)&&t<0!=n<0)for(;;){var a=J(i,r),s=e(a);if(!isFinite(s))return;if(a===i||a===r)return Math.abs(t)<=Math.abs(n)?[i,t]:[r,n];if(0===s)return F(i,t,a,s,r,n,e);t<0!=s<0?(r=a,n=s):(i=a,t=s)}},i.flatCenter=F,i.bisectFinite=l,i.bisectExtremum=function(i,t,r,n,e,a,s){if(i<r&&r<e&&isFinite(t)&&isFinite(n)&&isFinite(a)&&t!==n&&n!==a&&t<n==a<n)for(;;){var f=J(i,r),u=s(f),o=J(r,e),c=s(o);if(!isFinite(u)||!isFinite(c))return;if(f===i||f===r||o===r||o===e)return n<u==t<n?[f,u]:n<c==t<n?[o,c]:[r,n];if(u===n||c===n)return F(i,t,r,n,e,a,s);t<u==t<n&&t<u==n<u?(e=r,a=n,r=f,n=u):a<c==a<n&&n<c==a<c?(i=r,t=n,r=o,n=c):(i=f,t=u,e=o,a=c)}},i.bisectClosestPointOnParametric=P,i.findLocalClosestPointOnParametric=function(i,t,r,n,e,a){var s,f,u=o(i,t,r,n,e,a);return void 0===n||c(i,t,u,s=o(i,t,n,n,e,a))&&(u=s),void 0===e||c(i,t,u,f=o(i,t,e,n,e,a))&&(u=f),u},i.bisectJump=function(i,t,r,n,e,a,s,f){if(f=f||0,!((r-i)*(e-r)<=0)&&isFinite(i)&&isFinite(r)&&isFinite(e)&&isFinite(t)&&isFinite(a)){if(!isFinite(n)){var u=l(i,t,r,n,s),o=l(r,n,e,a,s);if(!u||!o)return;return[u,o]}if(!(Math.abs(n-((e-r)*t+(r-i)*a)/(e-i))<f))for(;;){var c=J(i,r),F=s(c),v=J(r,e),b=s(v),M=Math.abs(F-m.mean(t,n)),h=Math.abs(n-m.mean(F,b)),d=Math.abs(b-m.mean(n,a));if(M<=f&&h<=f&&d<=f)return;if(!isFinite(F)){u=l(i,t,c,F,s),o=l(c,F,e,a,s);if(!u||!o)return;return[u,o]}if(!isFinite(b)){u=l(i,t,v,b,s),o=l(v,b,e,a,s);if(!u||!o)return;return[u,o]}if(!(c!==i&&c!==r||v!==r&&v!==e))return Math.abs(n-t)>Math.abs(a-n)?[[i,t],[r,n]]:[[r,n],[e,a]];if(c===i||c===r)return O(i,t,r,n,v,b,e,a);if(v===r||v===e)return O(i,t,c,F,r,n,e,a);d<M&&h<=M?(e=r,a=n,r=c,n=F):M<d&&h<=d?(i=r,t=n,r=v,n=b):(i=c,t=F,e=v,a=b)}}}});\ndefine(\'core/math/quadrature\',[\'require\',\'core/math/mathshim\',\'core/math/poi\'],function(require){"use strict";var h=require("core/math/mathshim"),a=require("core/math/poi"),l=a.bisectJump,J=a.bisectFinite,r=Math.pow(2,-13),o=r*r,F=o*o,j=o,k=32,y=[],z=[];!function(a,r){for(var t=k;0<t;t--){var i=3.154019550531224/k*t,n=h.sinh(i),e=h.cosh(Math.PI/2*n),o=1/(Math.exp(Math.PI/2*n)*e),s=h.cosh(i)/(e*e);a.push(o),r.push(s)}}(y,z);for(var t=0,i=0;i<z.length;i++)t+=z[i];var A=1/(1+2*t);function B(a,r,t){return.5*(r*(2-t)+a*t)}function C(a,r,t,i,n){return{x1:a,x2:r,value:t,error:i,minerror:n}}function D(a,r,t){var i=Math.abs(a(B(r,t,o))),n=Math.abs(a(B(r,t,2*o))),e=Math.abs(a(B(r,t,4*o)));return!(i<o||n<o)&&(1.95*n<i&&1.95*e<n)}function p(a,r,t){var i,n,e=B(t,r,y[0]),o=B(r,t,y[0]),s=a(e),h=a(o),u=B(r,t,1),N=a(u);if(isFinite(N)&&!isFinite(s)){if(i=J(e,s,u,N,a),Math.abs((i[0]-r)/(t-r))>j)return C(r,t,NaN,NaN,NaN);r=i[0],s=i[1]}if(isFinite(N)&&!isFinite(h)){if(n=J(u,N,o,h,a),Math.abs((n[0]-t)/(t-r))>j)return C(r,t,NaN,NaN,NaN);t=n[0],h=n[1]}if(isFinite(s)&&isFinite(h)&&!isFinite(N)){if(i=J(e,s,u,N,a),n=J(u,N,o,h,a),Math.abs((n[0]-i[0])/(t-r))>j)return C(r,t,NaN,NaN,NaN);N=.5*(i[1]+n[1])}if(D(a,r,t)||D(a,t,r))return C(r,t,NaN,NaN,NaN);for(var m,x,f=N,M=0,b=0,v=0,c=0,l=0;l<k;l+=4)m=a(B(r,t,y[l])),x=a(B(t,r,y[l])),c=Math.max(c,Math.abs(m),Math.abs(x)),M+=z[l]*(m+x),m=a(B(r,t,y[l+1])),x=a(B(t,r,y[l+1])),c=Math.max(c,Math.abs(m),Math.abs(x)),v+=z[l+1]*(m+x),m=a(B(r,t,y[l+2])),x=a(B(t,r,y[l+2])),c=Math.max(c,Math.abs(m),Math.abs(x)),b+=z[l+2]*(m+x),m=a(B(r,t,y[l+3])),x=a(B(t,r,y[l+3])),c=Math.max(c,Math.abs(m),Math.abs(x)),v+=z[l+3]*(m+x);var F=f+M,p=F+b,d=p+v,g=Math.abs(b-F),I=Math.abs(v-p),P=A*(t-r)*d,q=A*Math.abs(t-r)*c*z[0],w=0===g?A*Math.abs(t-r)*I:A*Math.abs(t-r)*I*(I/g)*(I/g);return C(r,t,P,w=Math.max(w,q),q)}function d(a){for(var r=-1/0,t=-1/0,i=-1,n=0,e=0;e<a.length;e++){var o=a[e];n+=o.value,o.error>r&&(r=o.error,i=e),o.minerror>t&&(t=o.minerror)}return{maxerror:r,maxminerror:t,maxindex:i,totalvalue:n}}return{quad:function a(r,t,i,n){if(void 0===n&&(n=32),isNaN(t)||isNaN(i))return NaN;var e,o=1;if(i<t&&(e=t,t=i,i=e,o=-1),t===1/0&&i===1/0)return NaN;if(t===-1/0&&i===-1/0)return NaN;if(t===-1/0&&i===1/0)return o*a(function(a){return r(a/((1+a)*(1-a)))*(1+a*a)/((1+a)*(1+a)*(1-a)*(1-a))},-1,1,n);if(t===-1/0)return o*a(function(a){return-r(i-a/(1-a))/((1-a)*(1-a))},1,0,n);if(i===1/0)return o*a(function(a){return r(t+a/(1-a))/((1-a)*(1-a))},0,1,n);for(var s,h,u,N,m,x=[p(r,t,i)],f=d(x),M=1;M<n&&!(Math.abs(f.maxerror/f.totalvalue)<=32*F||f.maxerror<=32*F||f.maxerror<=32*f.maxminerror)&&isFinite(f.maxerror)&&isFinite(f.maxminerror);M++){var b=x[x.length-1];x[x.length-1]=x[f.maxindex],x[f.maxindex]=b;var v=x.pop(),c=(s=r,h=B(v.x2,v.x1,.125),u=B(v.x1,v.x2,.125),m=N=void 0,N=.5*(h+u),(m=l(h,s(h),N,s(N),u,s(u),s,0))?.5*(m[0][0]+m[1][0]):N);x.push(p(r,v.x1,c)),x.push(p(r,c,v.x2)),f=d(x)}return isFinite(f.maxerror)&&isFinite(f.maxminerror)?Math.abs(f.totalvalue)<=10*f.maxminerror?0:o*f.totalvalue:NaN}}});\ndefine(\'core/math/tofraction\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,r){if(void 0===r&&(r=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var n,t,i,u=0,f=1,d=1,o=0;t=(n=Math.floor(e))*f+u,!(r<(i=n*o+d))&&(u=f,d=o,f=t,o=i,e!==n);)e=1/(e-n);return{n:f,d:o}}});\ndefine(\'core/math/builtin\',["require","exports","core/lib/md5","core/vendor/d3-color","core/math/quadrature","core/math/mathshim","core/math/mathshim","core/math/distance","core/math/tofraction","core/math/poi"],function(require,l,t,o,r,M,n,e,a,f){"use strict";function u(t,r,n){return Math.max(r,Math.min(n,t))}function i(t,r){var n=h(t=Math.round(t),r=Math.round(r));return Math.abs(t/n*r)}function h(t,r){var n;if((t=Math.round(t))<0&&(t=-t),(r=Math.round(r))<0&&(r=-r),t<r&&(n=r,r=t,t=n),0===r)return t;for(var e=t%r;0<e;)e=(t=r)%(r=e);return r}function v(t){return c(t+1)}function c(t){if(t<0)return Math.PI/(P(Math.PI*t)*c(1-t));if(170<t)return 1/0;var r,n=Math.round(t)===t,e=t<15?s(t):t<120?(r=t-1,Math.pow(r,r)*Math.exp(O(r)-r)*Math.sqrt(2*Math.PI*r)):Math.exp(p(t));return n?Math.round(e):e}function s(t){var r=1+t*(4.077131788261185+t*(7.024675027156382+t*(6.657107767450176+t*(3.766266976716022+t*(1.2792371666711133+t*(.24304596436338005+.020049769312165774*t)))))),n=1+t*(4.154347453162709+t*(7.270007565107539+t*(6.97805297331391+t*(3.989651532924167+t*(1.367176195613119+t*(.26175627691546965+.021742722739397567*t))))));return Math.E*Math.pow((1+t)/Math.E,1+t)/(t*Math.sqrt(1+t))*(r/n)}function p(t){var r=t-1;return r*(Math.log(r)-1)+.5*Math.log(2*Math.PI*r)+O(r)}function d(t,r){if(t!==Math.floor(t))return NaN;if(t<0)return NaN;if(0===t)return 1/w(r);var n=P(r);if(1===t)return-1/(n*n);var e=x(r);if(2===t)return 2*e/(n*n*n);for(var a=[0,2],o=[],u=3;u<=t;u++){o=[];for(var i=0;i<u;i++){var f=0,h=0;0<i&&(f=(u-i+1)*a[i-1]),i+2<u&&(h=(i+1)*a[i+1]),o.push(-(f+h))}a=o}for(var c=0,i=t-1;0<=i;i--)c=o[i]+e*c;return c/Math.pow(n,t+1)}function N(t,r){if(0===r)return NaN;var n=r===Math.E?Math.log(t):2===r&&Math.log2?Math.log2(t):10===r&&Math.log10?Math.log10(t):Math.log(t)/Math.log(r);return Math.pow(r,Math.round(n))===t?Math.round(n):n}function m(t,r){if(!isFinite(t)&&0===r)return NaN;if(0<=t||r===Math.floor(r))return Math.pow(t,r);var n=l.toFraction(r,100);return e.approx(n.n/n.d,r,2)&&n.d%2==1?(n.n%2==0?1:-1)*Math.pow(-t,r):NaN}Object.defineProperty(l,"__esModule",{value:!0}),l.hsv=l.rgb=l.dividePoint=l.multiplyPoint=l.negatePoint=l.subtractPoints=l.addPoints=l.midpoint=l.distance=l.quad=l.stdevp=l.stdev=l.spearman=l.rank=l.corr=l.cov=l.covp=l.variance=l.mad=l.varp=l.argMax=l.argMin=l.median=l.lowerQuartileIndex=l.upperQuartileIndex=l.lowerQuantileIndex=l.upperQuantileIndex=l.quartileIndex=l.sortPerm=l.quartile=l.quantile=l.listMax=l.listMin=l.length=l.stats=l.ittest=l.ttest=l.itscore=l.tscore=l.invUniform=l.invT=l.invBinom=l.invPoisson=l.invNorm=l.erfcx=l.erf=l.uniformcdf=l.uniformpdf=l.poissoncdf=l.poissonpdf=l.binompdf=l.binomcdf=l.poissonSample=l.binomSample=l.tSample=l.normalSample=l.uniformSample=l.randomPerm=l.shuffle=l.random=l.normalpdf=l.normalcdf=l.tcdf=l.tpdf=l.total=l.mean=l.acoth=l.acsch=l.asech=l.coth=l.csch=l.sech=l.asec=l.acsc=l.acot=l.cot=l.csc=l.sec=l.tan=l.cos=l.sin=l.nthroot=l.pow=l.common_log=l.log_base=l.log=l.polyGamma=l.cotDerivative=l.bernoulliTable=l.lnGamma=l.gamma=l.factorial=l.nPr=l.nCr=l.listLCM=l.listGCD=l.gcd=l.lcm=l.round=l.mod=l.toFraction=l.sign=l.sqrtxsqm1=l.sqrtxsqp1=l.log1p=l.expm1=l.atanh=l.asinh=l.acosh=l.tanh=l.sinh=l.cosh=l.md5Spyable=void 0,l.md5Spyable=t,Object.defineProperty(l,"cosh",{enumerable:!0,get:function(){return n.cosh}}),Object.defineProperty(l,"sinh",{enumerable:!0,get:function(){return n.sinh}}),Object.defineProperty(l,"tanh",{enumerable:!0,get:function(){return n.tanh}}),Object.defineProperty(l,"acosh",{enumerable:!0,get:function(){return n.acosh}}),Object.defineProperty(l,"asinh",{enumerable:!0,get:function(){return n.asinh}}),Object.defineProperty(l,"atanh",{enumerable:!0,get:function(){return n.atanh}}),Object.defineProperty(l,"expm1",{enumerable:!0,get:function(){return n.expm1}}),Object.defineProperty(l,"log1p",{enumerable:!0,get:function(){return n.log1p}}),Object.defineProperty(l,"sqrtxsqp1",{enumerable:!0,get:function(){return n.sqrtxsqp1}}),Object.defineProperty(l,"sqrtxsqm1",{enumerable:!0,get:function(){return n.sqrtxsqm1}}),Object.defineProperty(l,"sign",{enumerable:!0,get:function(){return n.sign}}),l.toFraction=a.default,l.mod=function(t,r){return t-r*Math.floor(t/r)},l.round=function(t,r){if(void 0===r&&(r=0),0===(r=Math.round(r)))return Math.round(t);var n=Math.pow(10,r);return Math.round(t*n)/n},l.lcm=i,l.gcd=h,l.listGCD=function(t){if(0===t.length)return NaN;for(var r=t[0],n=1;n<t.length;n++)r=h(r,t[n]);return r},l.listLCM=function(t){if(0===t.length)return NaN;for(var r=t[0],n=1;n<t.length;n++)r=i(r,t[n]);return r},l.nCr=function(t,r){if((t=Math.round(t))<(r=Math.round(r))||t<0||r<0)return 0;if(r===1/0||t===1/0)return NaN;t-r<r&&(r=t-r);for(var n=1,e=0;e<r;e++)n*=(t-e)/(e+1);return Math.round(n)},l.nPr=function(t,r){if((t=Math.round(t))<(r=Math.round(r))||t<0||r<0)return 0;if(r===1/0||t===1/0)return NaN;for(var n=1,e=0;e<r;e++)n*=t-e;return n},l.factorial=v,l.gamma=c,l.lnGamma=function(t){return t<0?NaN:t<15?Math.log(s(t)):p(t)},l.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],l.cotDerivative=d,l.polyGamma=function t(r,n){if(r<0)return NaN;if(r!==Math.floor(r))return NaN;var e=r%2==0?-1:1;if(n<0)return-e*t(r,1-n)-Math.pow(Math.PI,r+1)*d(r,Math.PI*n);for(var a=v(r),o=0,u=Math.pow(n,-(r+1));n<10;)o+=u,n++,u=Math.pow(n,-(r+1));o+=0===r?-Math.log(n):u*n/r,o+=.5*u;for(var i=l.bernoulliTable,f=r+1,h=2,c=u*n*f/h,s=1/(n*n),M=1;M<=14;M++)o+=(c*=s)*i[M-1],c*=++f/++h,c*=++f/++h;return a*e*o},l.log=function(t){var r=Math.log(t);return Math.exp(Math.round(r))===t?Math.round(r):r},l.log_base=N,l.common_log=function(t){return N(t,10)},l.pow=m,l.nthroot=function(t,r){return m(t,1/r)};var g=1/Math.PI;function b(t){return!(1e12<t)&&Math.round(g*t)*Math.PI===t}function q(t){if(!(1e12<t)){var r=Math.round(2*g*t);return r%2==1&&r*Math.PI==2*t}}function P(t){return b(Math.abs(t))?0:Math.sin(t)}function x(t){return q(Math.abs(t))?0:Math.cos(t)}function w(t){var r=Math.abs(t);return b(r)?0:q(r)?1/0:Math.tan(t)}function I(t){for(var r=0,n=0;n<t.length;n++)r+=t[n];return r/t.length}function y(t){return 50<t?Math.exp(.5*((1-t)*M.log1p(-1/(t-1))-1)+j(.5*(t-1))-j(.5*(t-2)))*Math.sqrt((1-1/t)/(2*Math.PI)):c((t+1)/2)/(c(t/2)*Math.sqrt(t*Math.PI))}function S(t,r,n){if(void 0===n&&(n=t-r),Math.abs(n)<.1*(t+r))for(var e=n/(t+r),a=n*n/(t+r),o=2*t*e,u=1;u<10;u++){var i=a+(o*=e*e)/(2*u+1);if(i==a)return i;a=i}return t*Math.log(t/r)+r-t}l.sin=P,l.cos=x,l.tan=w,l.sec=function(t){return q(Math.abs(t))?1/0:1/Math.cos(t)},l.csc=function(t){return b(Math.abs(t))?1/0:1/Math.sin(t)},l.cot=function(t){var r=Math.abs(t);return b(r)?1/0:q(r)?0:1/Math.tan(t)},l.acot=function(t){return Math.PI/2-Math.atan(t)},l.acsc=function(t){return Math.asin(1/t)},l.asec=function(t){return Math.acos(1/t)},l.sech=function(t){return 1/M.cosh(t)},l.csch=function(t){return 1/M.sinh(t)},l.coth=function(t){return 1/M.tanh(t)},l.asech=function(t){return M.acosh(1/t)},l.acsch=function(t){return M.asinh(1/t)},l.acoth=function(t){return M.atanh(1/t)},l.mean=I,l.total=function(t){for(var r=0,n=0;n<t.length;n++)r+=t[n];return r};var F=[0,.08106146679532726,.0413406959554093,.02767792568499834,.020790672103765093,.016644691189821193,.013876128823070748,.01189670994589177,.010411265261972096,.009255462182712733,.00833056343336287,.007573675487951841,.00694284010720953,.006408994188004207,.0059513701127588475,.005554733551962801];function j(t){return 15<t?O(t):t<0?NaN:t===Math.floor(t)?F[t]:Math.log(v(t)/(Math.pow(t,t)*Math.exp(-t)*Math.sqrt(2*Math.PI*t)))}function O(t){var r=t*t;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/r)/r)/r)/r)/t}function T(t,r){return r<=0?NaN:y(r)*Math.pow(1+t*t/r,-(r+1)/2)}function Q(t,r){if(0<r)return 1-Q(t,-r);if(r===-1/0)return 0;if(0===r)return.5;if(40<=t&&-1<r)return.5+y(t)*function(t,r){for(var n=r*r/t,e=r,a=e,o=1;o<=15;o++)a+=e*=-(2*o-1)/(2*o+1)*(.5*(t+1)+o-1)/o*n;return a}(t,r);if(r/t<-1e3){var n=r*r;return y(t)*Math.pow(t,.5*(t-1))*Math.pow(Math.abs(r),-t)*(1-t*t*(t+1)*(1/(2+t)+t*(t+3)/(4*(4+t)*n))/(2*n))}var e=Math.sqrt(r*r+t);return function(t,r,n){{if(t<0||1<t)throw new RangeError("First argument must be between 0 and 1.");if(1===r&&1===n)return t;if(0===t)return 0;if(1===t)return 1;if(0===r)return 1;if(0===n)return 0;var e=j(r+n)-j(r)-j(n)-S(r,(r+n)*t)-S(n,(r+n)*(1-t),(r+n)*t-r),a=Math.exp(e)*Math.sqrt(r*n/(2*Math.PI*(r+n)));return t<(r+1)/(r+n+2)?a*_(t,r,n)/r:1-a*_(1-t,n,r)/n}}((r+e)/(2*e),t/2,t/2)}function E(t,r,n){return n<=0?NaN:t===-1/0?Q(n,r):0<t&&0<r?Q(n,-t)-Q(n,-r):Q(n,r)-Q(n,t)}function _(t,r,n){var e=Math.pow(2,-52),a=1e-300,o=r+n,u=r+1,i=r-1,f=1,h=1-o*t/u;Math.abs(h)<a&&(h=a);for(var c=h=1/h,s=1;s<=100;s++){var M=2*s,l=s*(n-s)*t/((i+M)*(r+M)),h=1+l*h;Math.abs(h)<a&&(h=a),f=1+l/f,Math.abs(f)<a&&(f=a),c*=(h=1/h)*f,h=1+(l=-(r+s)*(o+s)*t/((r+M)*(u+M)))*h,Math.abs(h)<a&&(h=a),f=1+l/f,Math.abs(f)<a&&(f=a);var v=(h=1/h)*f;if(c*=v,Math.abs(v-1)<=e)return c}return c}function C(t,r,n){return(t-r)/(Math.SQRT2*Math.abs(n))}function G(t){return t<0?.5*Math.exp(-t*t)*J(-t):1-.5*Math.exp(-t*t)*J(t)}function D(t){var r=l.md5Spyable(t);return(4294967296*(2097151&parseInt(r.slice(0,8),16))+parseInt(r.slice(8,16),16))/9007199254740992}function R(t,r){for(var n=r.length-1;0<n;n--){var e=t+"::sc"+n,a=Math.floor(D(e)*(n+1)),o=r[n];r[n]=r[a],r[a]=o}}function k(t,r,n){return D(t)*(n-r)+r}function B(t,r,n){return r<=t?1:t<0?0:t<Math.floor((r+1)*n)?L(t,r,n):1-L(r-t-1,r,1-n)}function L(t,r,n){for(var e=(1-n)/n,a=U(t,r,n),o=a;0<t&&o+(a*=t/(r-t+1)*e)!==o;t--)o+=a;return o}function U(t,r,n){if(t=Math.round(t),(r=u(Math.round(r),0,1/0))===1/0)return NaN;if(n=u(n,0,1),t<0||r<t)return 0;if(0===n)return 0===t?1:0;if(1===n)return t===r?1:0;if(0===t)return Math.exp(r*M.log1p(-n));if(t===r)return Math.pow(n,r);var e=j(r)-j(t)-j(r-t)-S(t,r*n)-S(r-t,r*(1-n),r*n-t);return Math.exp(e)*Math.sqrt(r/(2*Math.PI*t*(r-t)))}function z(t,r){return r<0?NaN:(t=Math.round(t))<0?0:0===r?0===t?1:0:0===t?Math.exp(-r):Math.exp(-j(t)-S(t,r))/Math.sqrt(2*Math.PI*t)}function A(t,r){if(isNaN(t)||isNaN(r))return NaN;if(t===1/0)return 1;if((t=Math.floor(t))<0)return 0;if(0===r)return 1;if(12<t+1&&r<2.35*(t+1)&&.3*(t+1)<r)return function(t,r){for(var n,e=r/t,a=M.sign(r-t)*Math.sqrt(2*S(1,e)),o=[1,-.3333333333333333,.08333333333333333,-.014814814814814815,.0011574074074074073,.0003527336860670194,-.0001787551440329218,3919263178522438e-20,-2185448510679992e-21,-185406221071516e-20,8.296711340953087e-7,-1.7665952736826078e-7,6.707853543401498e-9,1.0261809784240309e-8,-4.382036018453353e-9,9.14769958223679e-10,-25514193994946248e-27,-5830772132550426e-26,24361948020667415e-27,-50276692801141755e-28,11004392031956135e-29,3371763262400985e-28,-1392388722418162e-28,28534893807047445e-30,-5139111834242572e-31,-19752288294349442e-31,8099521156704561e-31],u=o.length-2,i=0,f=0,h=0;0<=u;u--)h=a*h+(n=(u+2)*i/t+o[u+1]),i=f,f=n;if(h*=t/(t+i),r<t){var c=Math.exp(-.5*t*a*a)*(.5*J(-a*Math.sqrt(t/2))-h/Math.sqrt(2*Math.PI*t));return isFinite(c)?1-c:1}var s=Math.exp(-.5*t*a*a)*(.5*J(a*Math.sqrt(t/2))+h/Math.sqrt(2*Math.PI*t));return isFinite(s)?s:0}(t+1,r);if(r<=t+1){var n=function(t,r){for(var n,e=Math.pow(2,-52),a=1e-300,o=1/t,u=1/a,i=1/t,f=2,h=t,c=-(t-1),s=0;0===(i=i*--c*r+(h+=1))&&(i=a),0===(u=h+c*r/u)&&(u=a),o*=u*(i=1/i),0===(i=i*(s+=1)*r+(h+=1))&&(i=a),0===(u=h+s*r/u)&&(u=a),o*=n=u*(i=1/i),(f+=2)<100&&Math.abs(n-1)>e;);return o}(t+1,r);return isFinite(n)?1-r*z(t,r)*n:1}n=function(t,r){var n,e=Math.pow(2,-52),a=1e-300,o=r+1-t,u=1/o,i=1/a,f=1/o,h=2,c=o;do{var s=-(h-1)*(h-t-1);0===(f=f*s+(c+=2))&&(f=a),0===(i=c+s/i)&&(i=a),u*=n=i*(f=1/f),h+=1}while(h<100&&Math.abs(n-1)>e);return u}(t+1,r);return isFinite(n)?r*z(t,r)*n:0}function H(t,r,n){return n<=r?NaN:t<r?0:n<t?1:(t-r)/(n-r)}function J(t){if(t<0)return t<-6.1?2*Math.exp(t*t):2*Math.exp(t*t)-J(-t);if(50<t){var r=.5641895835477563,n=t*t;return 5e7<t?r/t:r*(n*(4.5+n)+2)/(t*(n*(5+n)+3.75))}return(.9999999999999999+t*(2.224574423459406+t*(2.444115549920689+t*(1.7057986861852539+t*(.8257463703357973+t*(.28647031042892007+t*(.07124513844341643+t*(.012296749268608364+t*(.001347817214557592+7263959403471071e-20*t)))))))))/(1+t*(3.352953590554884+t*(5.227518529742423+t*(5.003720878235473+t*(3.266590890998987+t*(1.5255421920765353+t*(.5185887413188858+t*(.12747319185915415+t*(.02185979575963238+t*(.0023889438122503674+.00012875032817508128*t))))))))))}function K(t){var r,n,e;return.5<t?-K(1-t):.5===t?0:t<0?NaN:0===t?-1/0:(e=t<.02425?(((((-.00778489400243029*(r=Math.sqrt(-2*Math.log(t)))-.322396458041136)*r-2.40075827716184)*r-2.54973253934373)*r+4.37466414146497)*r+2.93816398269878)/((((.00778469570904146*r+.32246712907004)*r+2.445134137143)*r+3.75440866190742)*r+1):(((((-39.6968302866538*(n=(r=t-.5)*r)+220.946098424521)*n-275.928510446969)*n+138.357751867269)*n-30.6647980661472)*n+2.50662827745924)*r/(((((-54.4760987982241*n+161.585836858041)*n-155.698979859887)*n+66.8013118877197)*n-13.2806815528857)*n+1))-Math.sqrt(2*Math.PI)*(.5*J(-e/Math.SQRT2)-Math.exp(.5*e*e)*t)}function V(t,r){if(r<=0||t<0||1<t)return NaN;if(0===t)return 0;if(1===t)return 1/0;for(var n=1,e=1,a=1;Math.exp(-r)*e<t;){if(e+(n*=r/a)===e)return 1/0;e+=n,a+=1}return a-1}function W(t,r,n){if(r!==Math.round(r))return NaN;if(n<0||1<n)return NaN;if(t<0||1<t)return NaN;if(0===t)return 0;if(1===t)return r;if(0===r)return 0;if(1===n)return r;if(0===n)return 0;for(var e=n/(1-n),a=Math.pow(1-n,r),o=a,u=1;o<t;){if(o+(a*=(r-u+1)/u*e)===o)return r;if(r<u)return r;o+=a,u+=1}return u-1}function X(t,r){var n=4*r*(1-r);switch(t){case 1:return Math.tan(Math.PI*(r-.5));case 2:return 2*(r-.5)*Math.sqrt(2/n);case 4:var e=Math.cos(Math.acos(Math.sqrt(n))/3)/Math.sqrt(n);return 2*M.sign(r-.5)*Math.sqrt(e-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}}function Y(t,r){var n=Mt(t);return(I(t)-r)*Math.sqrt(t.length)/n}function Z(t,r){var n=t.length,e=I(t),a=Mt(t),o=r.length,u=I(r),i=Mt(r);return(e-u)/(Math.sqrt(((n-1)*a*a+(o-1)*i*i)/(n+o-2))*Math.sqrt(1/n+1/o))}function $(t,r,n){return n<0?E(-1/0,t,r):0<n?E(-1/0,-t,r):2*E(-1/0,-Math.abs(t),r)}function tt(t){if(t.length<1)return NaN;var r=t[0];if(isNaN(r))return NaN;for(var n=1;n<t.length;n++){if(isNaN(t[n]))return NaN;t[n]<r&&(r=t[n])}return r}function rt(t){if(t.length<1)return NaN;var r=t[0];if(isNaN(r))return NaN;for(var n=1;n<t.length;n++){if(isNaN(t[n]))return NaN;t[n]>=r&&(r=t[n])}return r}function nt(t,r){if(!isFinite(r)||r<0||1<r)return NaN;if(t.some(isNaN))return NaN;if(0===t.length)return NaN;var n=t.length,e=at(t),a=r*(n-1);return Math.floor(a)===a?t[e[a]]:(Math.ceil(a)-a)*t[e[Math.floor(a)]]+(a-Math.floor(a))*t[e[Math.ceil(a)]]}function et(t,r){if(!isFinite(r)||r<0||4<r)return NaN;if(t.some(isNaN))return NaN;var n=at(t),e=ot(t,r),a=Math.floor(e),o=Math.ceil(e);return(t[n[a]]+t[n[o]])/2}function at(n){for(var t=n.length,r=[],e=0;e<t;e++)r.push(e);return r.sort(function(t,r){return n[t]-n[r]}),r}function ot(t,r){r=Math.round(r);var n,e=t.length,a=e%2==1;return 1===e?0:(0===r&&(n=0),2===r&&(n=(e-1)/2),4===r&&(n=e-1),1===r&&(n=a?(e+1)/4-1:(e+2)/4-1),3===r&&(n=a?(3*e+3)/4-1:(3*e+2)/4-1),void 0===n?NaN:n)}function ut(t){return nt(t,.5)}function it(t){for(var r=I(t),n=0,e=0;e<t.length;e++){var a=t[e]-r;n+=a*a}return n/t.length}function ft(t){var r=t.length;return it(t)*r/(r-1)}function ht(t,r){if(t.length!==r.length)return NaN;for(var n=t.length,e=I(t),a=I(r),o=0,u=0;u<n;u++)o+=(t[u]-e)*(r[u]-a);return o/n}function ct(t,r){if(t.length!==r.length)return NaN;for(var n=t.length,e=I(t),a=I(r),o=0,u=0,i=0,f=0;f<n;f++){var h=t[f]-e,c=r[f]-a;o+=h*h,u+=c*c,i+=h*c}return i/Math.sqrt(o*u)}function st(t){var r=t.length;if(0===r)return[];for(var n=[],e=[],a=0;a<r;a++)e.push([t[a],a]);e.sort(function(t,r){var n=t[0],e=r[0];return n===1/0&&e===1/0||n===-1/0&&e===-1/0?0:n-e});for(var o,u=0,i=1;u<r;){for(var f=u;f<r-1&&e[f][0]===e[f+1][0];)f+=1;o=f-u+1;for(var h,f=0;f<o;f++)n[h=e[u+f][1]]=isNaN(t[h])?NaN:i+.5*(o-1);i+=o,u+=o}return n}function Mt(t){return Math.sqrt(ft(t))}function lt(t,r,n){return[u(Math.round(t),0,255),u(Math.round(r),0,255),u(Math.round(n),0,255)]}l.tpdf=T,l.tcdf=E,l.normalcdf=function(t,r,n,e){var a=C(r,n,e);if(t===-1/0)return G(a);var o=C(t,n,e);return 0<t&&0<r?G(-o)-G(-a):G(a)-G(o)},l.normalpdf=function(t,r,n){return 1/Math.sqrt(2*Math.PI*n*n)*Math.exp(-(t-r)*(t-r)/(2*n*n))},l.random=D,l.shuffle=R,l.randomPerm=function(t,r){for(var n=[],e=0;e<r;e++)n.push(e);return R(t,n),n},l.uniformSample=k,l.normalSample=function(t,r,n){for(var e,a,o,u,i=0;e=t+"::sc"+i,i+=1,a=2*k(e,0,1)-1,e=t+"::sc"+i,i+=1,1<=(u=a*a+(o=2*k(e,0,1)-1)*o)||0===u;);return r+n*a*Math.sqrt(-2*Math.log(u)/u)},l.tSample=function(t,r){if(r<=0)return NaN;for(var n,e,a,o=0;f=t+"::sc"+o,o+=1,n=2*k(f,0,1)-1,f=t+"::sc"+o,o+=1,1<(a=n*n+(e=2*k(f,0,1)-1)*e););var u=n*n/a,i=r*(Math.pow(a,-2/r)-1),f=t+"::sc"+o;return o+=1,(k(f,0,1)<.5?-1:1)*Math.sqrt(u*i)},l.binomSample=function(t,r,n){return(r=u(Math.round(r),0,1/0))===1/0?NaN:(n=u(n,0,1),W(k(t,0,1),r,n))},l.poissonSample=function(t,r){return r<=0?NaN:V(k(t,0,1),r)},l.binomcdf=function(t,r,n,e){return(n=u(Math.round(n),0,1/0))===1/0?NaN:(e=u(e,0,1),r<0?0:(t=Math.ceil(t),r=Math.floor(r),t===-1/0?B(r,n,e):B(r,n,e)-B(t-1,n,e)))},l.binompdf=U,l.poissonpdf=z,l.poissoncdf=function(t,r,n){return n<=0?NaN:(t=Math.ceil(t),(r=Math.floor(r))<0?0:t===-1/0?A(r,n):A(r,n)-A(t-1,n))},l.uniformpdf=function(t,r,n){return n<=r?NaN:t<r||n<t?0:1/(n-r)},l.uniformcdf=function(t,r,n,e){return H(r,n,e)-H(t,n,e)},l.erf=function(t){var r=-t*t;return r<-750?0<=t?1:-1:.065<=t?1-Math.exp(r)*J(t):t<=-.065?Math.exp(r)*J(-t)-1:t*(1.1283791670955126+r*(.37612638903183754+r*(.11283791670955126+r*(.026866170645131252+.005223977625442188*r))))},l.erfcx=J,l.invNorm=K,l.invPoisson=V,l.invBinom=W,l.invT=function t(r,n){return isNaN(n)||n<=0||r<0||1<r?NaN:0===r?-1/0:1===r?1/0:1===n||2===n||4===n?X(n,r):.5===r?0:.5<r?function(t,r,n,e){if(!isFinite(n)||!isFinite(e))return NaN;for(var a=n,o=e;;){var u=f.floatMiddle(a,o),i=Q(t,u);if(u===a||u===o)return r<i?a:o;i<r?a=u:o=u}}(n,r,1<n?K(r):X(1,r),1<n?X(1,r):Math.pow(T(0,n)*Math.pow(n,(n-1)/2)/(1-r),1/n)):-t(1-r,n)},l.invUniform=function(t,r,n){return t<0||1<t||n<=r?NaN:0===t?r:1===t?n:r+t*(n-r)},l.tscore=Y,l.itscore=Z,l.ttest=function(t,r){1===arguments.length&&(r=0);var n=Y(t,r),e=t.length-1;return{lessThan:$(n,e,-1),greaterThan:$(n,e,1),notEqual:$(n,e,0)}},l.ittest=function(t,r){var n=Z(t,r),e=t.length+r.length-2;return{lessThan:$(n,e,-1),greaterThan:$(n,e,1),notEqual:$(n,e,0)}},l.stats=function(t){return{min:tt(t),q1:et(t,1),median:ut(t),q3:et(t,3),max:rt(t)}},l.length=function(t){return t.length},l.listMin=tt,l.listMax=rt,l.quantile=nt,l.quartile=et,l.sortPerm=at,l.quartileIndex=ot,l.upperQuantileIndex=function(t,r){return at(t)[Math.ceil(r*(t.length-1))]+1},l.lowerQuantileIndex=function(t,r){return at(t)[Math.floor(r*(t.length-1))]+1},l.upperQuartileIndex=function(t,r){return at(t)[Math.ceil(ot(t,r))]+1},l.lowerQuartileIndex=function(t,r){return at(t)[Math.floor(ot(t,r))]+1},l.median=ut,l.argMin=function(t){if(t.length<1)return 0;var r=t[0];if(isNaN(r))return 0;for(var n=0,e=1;e<t.length;e++){if(isNaN(t[e]))return 0;t[e]<r&&(r=t[n=e])}return n+1},l.argMax=function(t){if(t.length<1)return 0;var r=t[0];if(isNaN(r))return 0;for(var n=0,e=1;e<t.length;e++)if(t[e]>=r){if(isNaN(t[e]))return 0;r=t[n=e]}return n+1},l.varp=it,l.mad=function(t){for(var r=I(t),n=0,e=0;e<t.length;e++)n+=Math.abs(t[e]-r);return n/t.length},l.variance=ft,l.covp=ht,l.cov=function(t,r){if(t.length!==r.length)return NaN;var n=t.length;return ht(t,r)*n/(n-1)},l.corr=ct,l.rank=st,l.spearman=function(t,r){return ct(st(t),st(r))},l.stdev=Mt,l.stdevp=function(t){return Math.sqrt(it(t))},l.quad=r.quad,l.distance=function(t,r){return e.hypot(r[0]-t[0],r[1]-t[1])},l.midpoint=function(t,r){return[.5*(t[0]+r[0]),.5*(t[1]+r[1])]},l.addPoints=function(t,r){return[t[0]+r[0],t[1]+r[1]]},l.subtractPoints=function(t,r){return[t[0]-r[0],t[1]-r[1]]},l.negatePoint=function(t){return[-t[0],-t[1]]},l.multiplyPoint=function(t,r){return[r*t[0],r*t[1]]},l.dividePoint=function(t,r){return[t[0]/r,t[1]/r]},l.rgb=lt,l.hsv=function(t,r,n){t=u(t,0,360),r=u(r,0,1);var e=(n=u(n,0,1))*(1-r/2);r=0==e||1==e?0:(n-e)/Math.min(e,1-e);var a=o.hsl(t,r,e).rgb();return lt(a.r,a.g,a.b)}});\ndefine(\'core/math/functions\',["require","exports","core/math/builtin"],function(require,e,r){"use strict";function u(e){delete e.fn}function a(e){e.fn=i(e.args,e.source)}function i(e,t){var n=e.join(",");return new Function("BuiltIn","return (function("+n+\'){"use strict"; \'+t+"})")(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.closureFunctionWithBuiltIn=e.createEvaluateFunction=e.rehydrateCompiledFunction=e.dehydrateCompiledFunction=e.rehydrateGraphData=e.dehydrateGraphData=void 0,e.dehydrateGraphData=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&u(r)}},e.rehydrateGraphData=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&a(r)}},e.dehydrateCompiledFunction=u,e.rehydrateCompiledFunction=a,e.createEvaluateFunction=function(e,t){for(var n=[],r=0;r<t;r++)n.push("values["+r+"]");return i(["values"],"return "+e(n))},e.closureFunctionWithBuiltIn=i});\ndefine(\'core/math/parser/input-span\',["require","exports"],function(require,n){"use strict";function e(n,t,e){return{input:n,start:t,end:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.slice=n.joinSpans=n.emptySpanAt=n.Span=void 0,n.Span=e,n.emptySpanAt=function(n,t){return e(n,t,t)},n.joinSpans=function(n,t){if(n.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return e(n.input,n.start,t.end)},n.slice=function(n){return n.input.slice(n.start,n.end)}});\ndefine(\'core/math/policy\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultPolicy=void 0;var n=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];e.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return n}}});\ndefine(\'core/math/parsenode/base\',[\'require\',\'pjs\',\'core/math/functions\',\'core/math/parser/input-span\',\'core/math/policy\'],function(require){"use strict";var e=require("pjs"),s=require("core/math/functions"),r=require("core/math/parser/input-span"),u=require("core/math/policy").defaultPolicy;return e(function(e,n,t){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]};var i=e.exportPenalty=0;e.tmpVar=function(){return"tmp"+i++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var n=this.getConcreteTree(u,e).getEvaluationInfo();return n?n[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":r.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var n=0;n<e.length;n++)this.addDependency(e[n])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var n=0;n<e.length;n++)this.addDummyDependency(e[n])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var n=this._dependencies.indexOf(e);0<=n&&this._dependencies.splice(n,1)},e.dependsOn=function(e){return-1<this._dependencies.indexOf(e)},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(n){return this.getExports().filter(function(e){return!n.assignmentForbidden(e)})},e.exportsSymbol=function(e){return-1<this._exports.indexOf(e)},e.exportTo=function(e,n,t){for(var i=this.getLegalExports(e),r=0;r<i.length;r++){var s=i[r];if(t[s])return;t[s]=n.blocksExport?n:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,n){return e.sliderVariables(n.getDependencies())},e.getCompiledFunction=function(e){var n,t,i=this.getEvalStrings(),r=i.statements.join(";")+";return "+i.expression;return void 0!==e||-1!==(n=(e=this.getDependencies()).indexOf("x"))&&(t=e[0],e[0]=e[n],e[n]=t),{args:e,source:r,fn:s.closureFunctionWithBuiltIn(e,r)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})});\ndefine(\'core/math/parsenode/error\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(t,i){t.init=function(t){i.init.call(this),this._msg=t,this._sliderVariables=[],this.blocksExport=!0},t.evaluateOnce=function(t){return this._msg},t.isError=!0,t.getError=function(){return this._msg},t.setDependencies=function(t){return this._dependencies=t,this},t.allowExport=function(){return this.blocksExport=!1,this}})});\n!function(n,r){var t,e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(t=n._,e=r(),(n._=e).noConflict=function(){return n._=t,e})}(this,function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},e=Array.prototype,i=Object.prototype,p="undefined"!=typeof Symbol?Symbol.prototype:null,u=e.push,f=e.slice,s=i.toString,o=i.hasOwnProperty,r=Array.isArray,a=Object.keys,t=Object.create,c=n.isNaN,l=n.isFinite,v=function(){};function h(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)}h.VERSION="1.10.2";function g(u,o,n){if(void 0===o)return u;switch(null==n?3:n){case 1:return function(n){return u.call(o,n)};case 3:return function(n,r,t){return u.call(o,n,r,t)};case 4:return function(n,r,t,e){return u.call(o,n,r,t,e)}}return function(){return u.apply(o,arguments)}}function y(n,r,t){return null==n?er:Vn(n)?g(n,r,t):(Kn(n)&&!Pn(n)?or:ur)(n)}function d(n,r){return y(n,r,1/0)}function m(n,r,t){return h.iteratee!==d?h.iteratee(n,r):y(n,r,t)}function b(u,o){return o=null==o?u.length-1:+o,function(){for(var n=Math.max(arguments.length-o,0),r=Array(n),t=0;t<n;t++)r[t]=arguments[t+o];switch(o){case 0:return u.call(this,r);case 1:return u.call(this,arguments[0],r);case 2:return u.call(this,arguments[0],arguments[1],r)}for(var e=Array(o+1),t=0;t<o;t++)e[t]=arguments[t];return e[o]=r,u.apply(this,e)}}function j(n){if(!Kn(n))return{};if(t)return t(n);v.prototype=n;var r=new v;return v.prototype=null,r}function _(r){return function(n){return null==n?void 0:n[r]}}function w(n,r){return null!=n&&o.call(n,r)}function x(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}h.iteratee=d;var S=Math.pow(2,53)-1,A=_("length");function O(n){var r=A(n);return"number"==typeof r&&0<=r&&r<=S}function M(n,r,t){if(r=g(r,t),O(n))for(u=0,o=n.length;u<o;u++)r(n[u],u,n);else for(var e=xn(n),u=0,o=e.length;u<o;u++)r(n[e[u]],e[u],n);return n}function E(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function N(f){return function(n,r,t,e){var u=3<=arguments.length;return function(n,r,t,e){var u=!O(n)&&xn(n),o=(u||n).length,i=0<f?0:o-1;for(e||(t=n[u?u[i]:i],i+=f);0<=i&&i<o;i+=f){var a=u?u[i]:i;t=r(t,n[a],a,n)}return t}(n,g(r,e,4),t,u)}}var k=N(1),I=N(-1);function T(n,r,t){var e=(O(n)?un:In)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function B(n,e,r){var u=[];return e=m(e,r),M(n,function(n,r,t){e(n,r,t)&&u.push(n)}),u}function R(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function F(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function q(n,r,t,e){return O(n)||(n=An(n)),"number"==typeof t&&!e||(t=0),0<=cn(n,r,t)}var D=b(function(n,t,e){var u,o;return Vn(t)?o=t:Pn(t)&&(u=t.slice(0,-1),t=t[t.length-1]),E(n,function(n){var r=o;if(!r){if(u&&u.length&&(n=x(n,u)),null==n)return;r=n[t]}return null==r?r:r.apply(n,e)})});function W(n,r){return E(n,ur(r))}function z(n,e,r){var t,u,o=-1/0,i=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=O(n)?n:An(n)).length;a<f;a++)null!=(t=n[a])&&o<t&&(o=t);else e=m(e,r),M(n,function(n,r,t){u=e(n,r,t),(i<u||u===-1/0&&o===-1/0)&&(o=n,i=u)});return o}function P(n,r,t){if(null==r||t)return O(n)||(n=An(n)),n[ir(n.length-1)];var e=(O(n)?qn:An)(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=ir(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function K(i,r){return function(e,u,n){var o=r?[[],[]]:{};return u=m(u,n),M(e,function(n,r){var t=u(n,r,e);i(o,n,t)}),o}}var L=K(function(n,r,t){w(n,t)?n[t].push(r):n[t]=[r]}),V=K(function(n,r,t){n[t]=r}),C=K(function(n,r,t){w(n,t)?n[t]++:n[t]=1}),J=/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;var U=K(function(n,r,t){n[t?0:1].push(r)},!0);function $(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:G(n,n.length-r)}function G(n,r,t){return f.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function H(n,r,t){return f.call(n,null==r||t?1:r)}function Q(n,r,t,e){for(var u=(e=e||[]).length,o=0,i=A(n);o<i;o++){var a=n[o];if(O(a)&&(Pn(a)||Ln(a)))if(r)for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else Q(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e}var X=b(function(n,r){return nn(n,r)});function Y(n,r,t,e){tr(r)||(e=t,t=r,r=!1),null!=t&&(t=m(t,e));for(var u=[],o=[],i=0,a=A(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?q(o,c)||(o.push(c),u.push(f)):q(u,f)||u.push(f)}return u}var Z=b(function(n){return Y(Q(n,!0,!0))});var nn=b(function(n,r){return r=Q(r,!0,!0),B(n,function(n){return!q(r,n)})});function rn(n){for(var r=n&&z(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=W(n,e);return t}var tn=b(rn);function en(o){return function(n,r,t){r=m(r,t);for(var e=A(n),u=0<o?0:e-1;0<=u&&u<e;u+=o)if(r(n[u],u,n))return u;return-1}}var un=en(1),on=en(-1);function an(n,r,t,e){for(var u=(t=m(t,e,1))(r),o=0,i=A(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function fn(o,i,a){return function(n,r,t){var e=0,u=A(n);if("number"==typeof t)0<o?e=0<=t?t:Math.max(t+u,e):u=0<=t?Math.min(t+1,u):t+u+1;else if(a&&t&&u)return n[t=a(n,r)]===r?t:-1;if(r!=r)return 0<=(t=i(f.call(n,e,u),rr))?t+e:-1;for(t=0<o?e:u-1;0<=t&&t<u;t+=o)if(n[t]===r)return t;return-1}}var cn=fn(1,un,an),ln=fn(-1,on);function pn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=j(n.prototype),i=n.apply(o,u);return Kn(i)?i:o}var sn=b(function(r,t,e){if(!Vn(r))throw new TypeError("Bind must be called on a function");var u=b(function(n){return pn(r,u,t,this,e.concat(n))});return u}),vn=b(function(u,o){var i=vn.placeholder,a=function(){for(var n=0,r=o.length,t=Array(r),e=0;e<r;e++)t[e]=o[e]===i?arguments[n++]:o[e];for(;n<arguments.length;)t.push(arguments[n++]);return pn(u,a,this,this,t)};return a});vn.placeholder=h;var hn=b(function(n,r){var t=(r=Q(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=sn(n[e],n)}});var gn=b(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),yn=vn(gn,h,1);function dn(n){return function(){return!n.apply(this,arguments)}}function mn(n,r){var t;return function(){return 0<--n&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var bn=vn(mn,2),jn=!{toString:null}.propertyIsEnumerable("toString"),_n=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function wn(n,r){var t=_n.length,e=n.constructor,u=Vn(e)&&e.prototype||i,o="constructor";for(w(n,o)&&!q(r,o)&&r.push(o);t--;)(o=_n[t])in n&&n[o]!==u[o]&&!q(r,o)&&r.push(o)}function xn(n){if(!Kn(n))return[];if(a)return a(n);var r=[];for(var t in n)w(n,t)&&r.push(t);return jn&&wn(n,r),r}function Sn(n){if(!Kn(n))return[];var r=[];for(var t in n)r.push(t);return jn&&wn(n,r),r}function An(n){for(var r=xn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function On(n){for(var r={},t=xn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function Mn(n){var r=[];for(var t in n)Vn(n[t])&&r.push(t);return r.sort()}function En(f,c){return function(n){var r=arguments.length;if(c&&(n=Object(n)),r<2||null==n)return n;for(var t=1;t<r;t++)for(var e=arguments[t],u=f(e),o=u.length,i=0;i<o;i++){var a=u[i];c&&void 0!==n[a]||(n[a]=e[a])}return n}}var Nn=En(Sn),kn=En(xn);function In(n,r,t){r=m(r,t);for(var e,u=xn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function Tn(n,r,t){return r in t}var Bn=b(function(n,r){var t={},e=r[0];if(null==n)return t;Vn(e)?(1<r.length&&(e=g(e,r[1])),r=Sn(n)):(e=Tn,r=Q(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t}),Rn=b(function(n,t){var r,e=t[0];return Vn(e)?(e=dn(e),1<t.length&&(r=t[1])):(t=E(Q(t,!1,!1),String),e=function(n,r){return!q(t,r)}),Bn(n,e,r)}),Fn=En(Sn,!0);function qn(n){return Kn(n)?Pn(n)?n.slice():Nn({},n):n}function Dn(n,r){var t=xn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function Wn(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var u=typeof n;return("function"==u||"object"==u||"object"==typeof r)&&function(n,r,t,e){n instanceof h&&(n=n._wrapped);r instanceof h&&(r=r._wrapped);var u=s.call(n);if(u!==s.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return p.valueOf.call(n)===p.valueOf.call(r)}var o="[object Array]"===u;if(!o){if("object"!=typeof n||"object"!=typeof r)return!1;var i=n.constructor,a=r.constructor;if(i!==a&&!(Vn(i)&&i instanceof i&&Vn(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}e=e||[];var f=(t=t||[]).length;for(;f--;)if(t[f]===n)return e[f]===r;if(t.push(n),e.push(r),o){if((f=n.length)!==r.length)return!1;for(;f--;)if(!Wn(n[f],r[f],t,e))return!1}else{var c,l=xn(n);if(f=l.length,xn(r).length!==f)return!1;for(;f--;)if(c=l[f],!w(r,c)||!Wn(n[c],r[c],t,e))return!1}return t.pop(),e.pop(),!0}(n,r,t,e)}function zn(r){return function(n){return s.call(n)==="[object "+r+"]"}}var Pn=r||zn("Array");function Kn(n){var r=typeof n;return"function"==r||"object"==r&&!!n}var Ln=zn("Arguments"),Vn=zn("Function"),Cn=zn("String"),Jn=zn("Number"),Un=zn("Date"),$n=zn("RegExp"),Gn=zn("Error"),Hn=zn("Symbol"),Qn=zn("Map"),Xn=zn("WeakMap"),Yn=zn("Set"),Zn=zn("WeakSet");!function(){Ln(arguments)||(Ln=function(n){return w(n,"callee")})}();var nr=n.document&&n.document.childNodes;function rr(n){return Jn(n)&&c(n)}function tr(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)}function er(n){return n}function ur(r){return Pn(r)?function(n){return x(n,r)}:_(r)}function or(r){return r=kn({},r),function(n){return Dn(n,r)}}function ir(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof nr&&(Vn=function(n){return"function"==typeof n||!1});var ar=Date.now||function(){return(new Date).getTime()},fr={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},cr=On(fr);function lr(r){function t(n){return r[n]}var n="(?:"+xn(r).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}}var pr=lr(fr),sr=lr(cr);var vr=0;function hr(n){return"\\\\"+dr[n]}var gr=h.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},yr=/(.)^/,dr={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},mr=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g;function br(n,r){return n._chain?h(r).chain():r}function jr(t){return M(Mn(t),function(n){var r=h[n]=t[n];h.prototype[n]=function(){var n=[this._wrapped];return u.apply(n,arguments),br(this,r.apply(h,n))}}),h}M(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=e[r];h.prototype[r]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0],br(this,n)}}),M(["concat","join","slice"],function(n){var r=e[n];h.prototype[n]=function(){return br(this,r.apply(this._wrapped,arguments))}}),h.prototype.valueOf=h.prototype.toJSON=h.prototype.value=function(){return this._wrapped},h.prototype.toString=function(){return String(this._wrapped)};var _r=jr({default:h,VERSION:"1.10.2",iteratee:d,restArguments:b,each:M,forEach:M,map:E,collect:E,reduce:k,foldl:k,inject:k,reduceRight:I,foldr:I,find:T,detect:T,filter:B,select:B,reject:function(n,r,t){return B(n,dn(m(r)),t)},every:R,all:R,some:F,any:F,contains:q,includes:q,include:q,invoke:D,pluck:W,where:function(n,r){return B(n,or(r))},findWhere:function(n,r){return T(n,or(r))},max:z,min:function(n,e,r){var t,u,o=1/0,i=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=O(n)?n:An(n)).length;a<f;a++)null!=(t=n[a])&&t<o&&(o=t);else e=m(e,r),M(n,function(n,r,t){((u=e(n,r,t))<i||u===1/0&&o===1/0)&&(o=n,i=u)});return o},shuffle:function(n){return P(n,1/0)},sample:P,sortBy:function(n,e,r){var u=0;return e=m(e,r),W(E(n,function(n,r,t){return{value:n,index:u++,criteria:e(n,r,t)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(e<t||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")},groupBy:L,indexBy:V,countBy:C,toArray:function(n){return n?Pn(n)?f.call(n):Cn(n)?n.match(J):O(n)?E(n,er):An(n):[]},size:function(n){return null==n?0:O(n)?n.length:xn(n).length},partition:U,first:$,head:$,take:$,initial:G,last:function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:H(n,Math.max(0,n.length-r))},rest:H,tail:H,drop:H,compact:function(n){return B(n,Boolean)},flatten:function(n,r){return Q(n,r,!1)},without:X,uniq:Y,unique:Y,union:Z,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var o=n[e];if(!q(r,o)){for(var i=1;i<t&&q(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:nn,unzip:rn,zip:tn,object:function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},findIndex:un,findLastIndex:on,sortedIndex:an,indexOf:cn,lastIndexOf:ln,range:function(n,r,t){null==r&&(r=n||0,n=0),t=t||(r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(f.call(n,e,e+=r));return t},bind:sn,partial:vn,bindAll:hn,memoize:function(e,u){var o=function(n){var r=o.cache,t=""+(u?u.apply(this,arguments):n);return w(r,t)||(r[t]=e.apply(this,arguments)),r[t]};return o.cache={},o},delay:gn,defer:yn,throttle:function(t,e,u){var o,i,a,f,c=0;function l(){c=!1===u.leading?0:ar(),o=null,f=t.apply(i,a),o||(i=a=null)}function n(){var n=ar();c||!1!==u.leading||(c=n);var r=e-(n-c);return i=this,a=arguments,r<=0||e<r?(o&&(clearTimeout(o),o=null),c=n,f=t.apply(i,a),o||(i=a=null)):o||!1===u.trailing||(o=setTimeout(l,r)),f}return u=u||{},n.cancel=function(){clearTimeout(o),c=0,o=i=a=null},n},debounce:function(t,e,u){function o(n,r){i=null,r&&(a=t.apply(n,r))}var i,a,n=b(function(n){var r;return i&&clearTimeout(i),u?(r=!i,i=setTimeout(o,e),r&&(a=t.apply(this,n))):i=gn(o,e,this,n),a});return n.cancel=function(){clearTimeout(i),i=null},n},wrap:function(n,r){return vn(r,n)},negate:dn,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:mn,once:bn,keys:xn,allKeys:Sn,values:An,mapObject:function(n,r,t){r=m(r,t);for(var e=xn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},pairs:function(n){for(var r=xn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:On,functions:Mn,methods:Mn,extend:Nn,extendOwn:kn,assign:kn,findKey:In,pick:Bn,omit:Rn,defaults:Fn,create:function(n,r){var t=j(n);return r&&kn(t,r),t},clone:qn,tap:function(n,r){return r(n),n},isMatch:Dn,isEqual:function(n,r){return Wn(n,r)},isEmpty:function(n){return null==n||(O(n)&&(Pn(n)||Cn(n)||Ln(n))?0===n.length:0===xn(n).length)},isElement:function(n){return!(!n||1!==n.nodeType)},isArray:Pn,isObject:Kn,isArguments:Ln,isFunction:Vn,isString:Cn,isNumber:Jn,isDate:Un,isRegExp:$n,isError:Gn,isSymbol:Hn,isMap:Qn,isWeakMap:Xn,isSet:Yn,isWeakSet:Zn,isFinite:function(n){return!Hn(n)&&l(n)&&!c(parseFloat(n))},isNaN:rr,isBoolean:tr,isNull:function(n){return null===n},isUndefined:function(n){return void 0===n},has:function(n,r){if(!Pn(r))return w(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!o.call(n,u))return!1;n=n[u]}return!!t},identity:er,constant:function(n){return function(){return n}},noop:function(){},property:ur,propertyOf:function(r){return null==r?function(){}:function(n){return Pn(n)?x(r,n):r[n]}},matcher:or,matches:or,times:function(n,r,t){var e=Array(Math.max(0,n));r=g(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:ir,now:ar,escape:pr,unescape:sr,result:function(n,r,t){Pn(r)||(r=[r]);var e=r.length;if(!e)return Vn(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=Vn(o)?o.call(n):o}return n},uniqueId:function(n){var r=++vr+"";return n?n+r:r},templateSettings:gr,template:function(o,n,r){!n&&r&&(n=r),n=Fn({},n,h.templateSettings);var t,e=RegExp([(n.escape||yr).source,(n.interpolate||yr).source,(n.evaluate||yr).source].join("|")+"|$","g"),i=0,a="__p+=\'";o.replace(e,function(n,r,t,e,u){return a+=o.slice(i,u).replace(mr,hr),i=u+n.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":t?a+="\'+\\n((__t=("+t+"))==null?\'\':__t)+\\n\'":e&&(a+="\';\\n"+e+"\\n__p+=\'"),n}),a+="\';\\n",n.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{t=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}function u(n){return t.call(this,n,h)}var f=n.variable||"obj";return u.source="function("+f+"){\\n"+a+"}",u},chain:function(n){var r=h(n);return r._chain=!0,r},mixin:jr});return _r._=_r});\ndefine(\'core/lib/label\',["require","exports","underscore","core/math/distance","core/math/tofraction"],function(require,e,r,c,s){"use strict";function i(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var n=s.default(e/Math.PI,24);if(m(t)&&c.approx(n.n/n.d*Math.PI,e,3))return{ariaString:d(r=(0===n.n?"0":1===n.n?"Ï":-1===n.n?"-Ï":n.n.toString()+"Ï")+(1===n.d?"":"/"+n.d.toString())),string:r,value:n.n/n.d*Math.PI};if(m(t))return{ariaString:d(r="-0"===(a=l(e.toFixed(v(t))))?"0":a),string:r,value:parseFloat(r)};var r,a,i=p(e.toExponential(v(t/e))).split("e"),u=i[0]+"Ã10",o=i[1].replace("+","");return{ariaString:d(r=p(e.toExponential(v(t/e))).replace("+","")),string:r,mantissa:u,superscript:o,value:parseFloat(r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.trimLatex=e.latexToIdentifier=e.identifierToHTML=e.identifierToLatex=e.formatSymbol=e.truncatedAriaLabel=e.truncatedLatexLabel=e.truncatedPlainmathLabel=e.truncatedHTMLLabel=e.numericLabel=e.canDisplayAsFraction=e.point=e.value=void 0,e.value=i;var t={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[Ï]":" pi ","[Ï]":" tau ","[Î¸]":" theta ","[Ï]":" phi "},n=new RegExp(Object.keys(t).join("|"),"gi");function a(e){return t["["+e+"]"]}var u=/\\.\\d+/g;function o(e){return e[0]+e.slice(1).split("").join(" ")}function d(e){return e.replace(u,o).replace(n,a).replace(/ +/gi," ").trim()}e.point=function(e,t,n,r){var a=i(e,t);return[a,i(r(a.value),n)]};var f=/\\.?0+$/;function l(e){return-1===e.indexOf(".")?e:e.replace(f,"")}function p(e){return e.replace(/\\.?0+e/,"e")}function m(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function v(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function h(e){return 1e6/Math.sqrt(Math.abs(e))}function b(e){var t=h(e);if(t<1)return!1;if(1e12<t)return!1;var n=s.default(e,t),r=n.n,a=n.d;return 1!==a&&e===e+Math.pow(2,-3)*Math.abs(r/a-e)}function g(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var n=t.smallCutoff||.001,r=t.bigCutoff||1e6,a=t.digits||10,i=p(e.toExponential(a-2)).match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!i)return{type:"undefined"};var u=parseInt(i[2],10)>=a;if(b(e)&&t.displayAsFraction){var o=s.default(e,h(e));return{type:"fraction",numerator:o.n.toString(),denominator:o.d.toString()}}if(Math.abs(e)>r||Math.abs(e)<n||u)return{type:"scientific",mantissa:i[1],exponent:i[2]};var c=l(e.toPrecision(a));return e!==Number(c)&&t.addEllipses&&(c+="..."),{type:"decimal",value:c}}function x(e){e=e.replace("\\\\","");var t={pi:"Ï",tau:"Ï",theta:"Î¸",phi:"Ï",div:"Ã·",cdot:"â",times:"Ã",lt:"<",gt:">",le:"â¤",ge:"â¥",sim:"â¼",ldots:"â¦",prime:"â²",approx:"â"};return t.hasOwnProperty(e)?t[e]:e}e.canDisplayAsFraction=b,e.numericLabel=g,e.truncatedHTMLLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"<span class=\'dcg-cross\'>Ã</span>10<sup>"+n.exponent+"</sup>";case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}},e.truncatedPlainmathLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+" * 10^"+n.exponent;case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}},e.truncatedLatexLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"\\\\times10^{"+n.exponent+"}";case"fraction":return"1"===n.denominator?n.numerator:"-"===n.numerator[0]?"-\\\\frac{"+n.numerator.slice(1)+"}{"+n.denominator+"}":"\\\\frac{"+n.numerator+"}{"+n.denominator+"}";default:return n}},e.truncatedAriaLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return d(n.value);case"scientific":return d(n.mantissa+"e"+n.exponent);case"fraction":return d(n.numerator+"/"+n.denominator);default:return n}},e.formatSymbol=x,e.identifierToLatex=function(e){var t=e.split("_"),n="";return 1<t[0].length&&(n+="\\\\"),n+=t[0],t[1]&&(n+="_{"+t[1]+"}"),n},e.identifierToHTML=function(e){if(!e)return"";var t=e.split("_").map(x).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n},e.latexToIdentifier=function(e){return(e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1")).replace(/[{}\\\\]/g,"")},e.trimLatex=function(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}});\ndefine(\'core/math/types\',["require","exports","core/lib/worker-i18n"],function(require,t,r){"use strict";function s(e){switch(e){case t.Any:return"Any";case t.Number:return"Number";case t.Bool:return"Bool";case t.Point:return"Point";case t.Distribution:return"Distribution";case t.ListOfAny:return"ListOfAny";case t.ListOfNumber:return"ListOfNumber";case t.ListOfBool:return"ListOfBool";case t.ListOfPoint:return"ListOfPoint";case t.ListOfDistribution:return"ListOfDistribution";case t.EmptyList:return"EmptyList";case t.ErrorType:return"ErrorType";case t.SeedType:return"SeedType";case t.RGBColor:return"RGBColor";case t.ListOfColor:return"ListOfColor";default:throw new Error("Invalid type: "+e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isOneOf=t.hasListType=t.listType=t.elementType=t.isList=t.prettyPrint=t.repr=t.ListOfColor=t.RGBColor=t.SeedType=t.ErrorType=t.EmptyList=t.ListOfDistribution=t.ListOfPoint=t.ListOfBool=t.ListOfNumber=t.ListOfAny=t.Distribution=t.Point=t.Bool=t.Number=t.Any=void 0,t.Any=0,t.Number=1,t.Bool=2,t.Point=3,t.Distribution=4,t.ListOfAny=5,t.ListOfNumber=6,t.ListOfBool=7,t.ListOfPoint=8,t.ListOfDistribution=9,t.EmptyList=10,t.ErrorType=11,t.SeedType=12,t.RGBColor=13,t.ListOfColor=14,t.repr=s,t.prettyPrint=function(e){switch(e){case t.Any:return r.s("shared-calculator-label-value-type-any");case t.Number:return r.s("shared-calculator-label-value-type-number");case t.Bool:return r.s("shared-calculator-label-value-type-bool");case t.Point:return r.s("shared-calculator-label-value-type-point");case t.Distribution:return r.s("shared-calculator-label-value-type-distribution");case t.ListOfAny:return r.s("shared-calculator-label-value-type-list-of-any");case t.ListOfNumber:return r.s("shared-calculator-label-value-type-list-of-numbers");case t.ListOfBool:return r.s("shared-calculator-label-value-type-list-of-bool");case t.ListOfPoint:return r.s("shared-calculator-label-value-type-list-of-points");case t.ListOfDistribution:return r.s("shared-calculator-label-value-type-list-of-distributions");case t.EmptyList:return r.s("shared-calculator-label-value-type-empty-list");case t.ErrorType:return r.s("shared-calculator-label-value-type-error");case t.SeedType:return r.s("shared-calculator-label-value-type-seed");case t.RGBColor:return r.s("shared-calculator-label-value-type-color");case t.ListOfColor:return r.s("shared-calculator-label-value-type-list-of-colors");default:throw new Error("Invalid type: "+e)}},t.isList=function(e){switch(e){case t.ListOfAny:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.EmptyList:return!0;case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.ErrorType:case t.SeedType:case t.RGBColor:return!1;default:throw new Error("Invalid type: "+e)}},t.elementType=function(e){switch(e){case t.EmptyList:case t.ListOfNumber:return t.Number;case t.ListOfBool:return t.Bool;case t.ListOfPoint:return t.Point;case t.ListOfDistribution:return t.Distribution;case t.ListOfColor:return t.RGBColor;case t.ListOfAny:return t.Any;case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.ErrorType:case t.SeedType:case t.RGBColor:return t.Any;default:throw new Error("Invalid type: "+e)}},t.listType=function(e){switch(e){case t.Any:return t.ListOfAny;case t.Number:return t.ListOfNumber;case t.Bool:return t.ListOfBool;case t.Point:return t.ListOfPoint;case t.Distribution:return t.ListOfDistribution;case t.RGBColor:return t.ListOfColor;case t.EmptyList:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.ListOfAny:case t.ErrorType:case t.SeedType:throw new Error("Type "+s(e)+" does not implement listType.");default:throw new Error("Invalid type: "+e)}},t.hasListType=function(e){switch(e){case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.RGBColor:return!0;case t.EmptyList:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.ListOfAny:case t.ErrorType:case t.SeedType:return!1;default:throw new Error("Invalid type: "+e)}},t.isOneOf=function(e,t){for(var r=0,s=t;r<s.length;r++){if(e===s[r])return!0}return!1}});\ndefine(\'core/math/errormsg\',[\'require\',\'core/lib/worker-i18n\',\'core/math/parsenode/error\',\'core/lib/label\',\'core/math/types\'],function(require){"use strict";var s=require("core/lib/worker-i18n"),c=require("core/math/parsenode/error"),u=require("core/lib/label"),e=require("core/math/types");return{parseError:function(){return c(s.s("shared-calculator-error-parse-error"))},unrecognizedSymbol:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-unrecognized-symbol",{symbol:r}))},unexpectedInequality:function(){return c(s.s("shared-calculator-error-unexpected-inequality"))},unexpectedSymbol:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-unexpected-symbol",{symbol:r}))},addTypeError:function(r){return c(s.s("shared-calculator-error-add-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},subtractTypeError:function(r){return c(s.s("shared-calculator-error-subtract-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},multiplyTypeError:function(r){return c(s.s("shared-calculator-error-multiply-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},divideTypeError:function(r){return c(s.s("shared-calculator-error-divide-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},exponentTypeError:function(r){return c(s.s("shared-calculator-error-exponent-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},negativeTypeError:function(r){return c(s.s("shared-calculator-error-negative-type-error",{symbol:r[0]})).allowExport()},comparatorTypeError:function(r){return c(s.s("shared-calculator-error-comparator-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},andTypeError:function(r){return c(s.s("shared-calculator-error-and-type-error",{symbol:"and",symbol1:r[0],symbol2:r[1]})).allowExport()},listTypeError:function(r){return c(s.s("shared-calculator-error-list-type-error",{symbol1:r[0]})).allowExport()},pointTypeError:function(r){return c(s.s("shared-calculator-error-point-type-error",{symbol1:r,symbol2:e.prettyPrint(e.Point)})).allowExport()},indexTypeError:function(r){return c(s.s("shared-calculator-error-index-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},orderedPairAccessTypeError:function(r){return c(s.s("shared-calculator-error-ordered-pair-access-type-error",{symbol:r[0]})).allowExport()},functionTypeError:function(r,e){switch(e.length){case 1:return c(s.s("shared-calculator-error-function-type-error-1",{fn:u.formatSymbol(r),arg:e[0]})).allowExport();case 2:return c(s.s("shared-calculator-error-function-type-error-2",{fn:u.formatSymbol(r),arg1:e[0],arg2:e[1]})).allowExport();default:return c(s.s("shared-calculator-error-function-type-error-many",{fn:u.formatSymbol(r)})).allowExport()}},illegalDotCall:function(r){return c(s.s("shared-calculator-error-illegal-dot-call",{symbol:u.formatSymbol(r)}))},dotLHSTypeError:function(r,e){return c(s.s("shared-calculator-error-dot-lhs-type-error",{symbol:u.formatSymbol(r),type:e}))},sumLowerBoundTypeError:function(r){return c(s.s("shared-calculator-error-sum-lower-bound-type-error",{symbol:r[0]})).allowExport()},sumUpperBoundTypeError:function(r){return c(s.s("shared-calculator-error-sum-upper-bound-type-error",{symbol:r[0]})).allowExport()},sumInfiniteBoundError:function(){return c(s.s("shared-calculator-error-sum-infinite-bound-type-error"))},sumArgumentTypeError:function(r){return c(s.s("shared-calculator-error-sum-argument-type-error",{symbol:r[0]})).allowExport()},productLowerBoundTypeError:function(r){return c(s.s("shared-calculator-error-product-lower-bound-type-error",{symbol:r[0]})).allowExport()},productUpperBoundTypeError:function(r){return c(s.s("shared-calculator-error-product-upper-bound-type-error",{symbol:r[0]})).allowExport()},productInfiniteBoundError:function(){return c(s.s("shared-calculator-error-product-infinite-bound-type-error"))},productArgumentTypeError:function(r){return c(s.s("shared-calculator-error-product-argument-type-error",{symbol:r[0]})).allowExport()},integralLowerBoundTypeError:function(r){return c(s.s("shared-calculator-error-integral-lower-bound-type-error",{symbol:r[0]})).allowExport()},integralUpperBoundTypeError:function(r){return c(s.s("shared-calculator-error-integral-upper-bound-type-error",{symbol:r[0]})).allowExport()},integralArgumentTypeError:function(r){return c(s.s("shared-calculator-error-integral-argument-type-error",{symbol:r[0]})).allowExport()},derivativeTypeError:function(r){return c(s.s("shared-calculator-error-derivative-type-error",{symbol:r[0]})).allowExport()},derivativeVariableTypeError:function(r,e){return c(s.s("shared-calculator-error-derivative-variable-type-error",{symbol1:u.formatSymbol(r),symbol2:e[0]}))},piecewiseConditionTypeError:function(r){return c(s.s("shared-calculator-error-piecewise-condition-type-error",{symbol1:e.prettyPrint(e.Bool),symbol2:r[0]})).allowExport()},piecewiseBranchTypeError:function(r){return c(s.s("shared-calculator-error-piecewise-branch-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},piecewiseBranchLengthError:function(r){return c(s.s("shared-calculator-error-piecewise-branch-length-error",{symbol:r})).allowExport()},tableHeaderTypeError:function(r){return c(s.s("shared-calculator-error-table-header-type-error",{symbol:r[0]}))},tableEntryTypeError:function(r){return c(s.s("shared-calculator-error-table-entry-type-error",{symbol:r[0]}))},regressionTypeError:function(r){return c(s.s("shared-calculator-error-regression-type-error",{symbol1:r[0],symbol2:r[1]}))},heterogeneousList:function(){return c(s.s("shared-calculator-error-heterogeneous-list")).allowExport()},deeplyNested:function(){return c(s.s("shared-calculator-error-deeply-nested")).allowExport()},polygonListTypeError:function(r){return c(s.s("shared-calculator-error-polygon-list-type-error",{type:r[0]}))},polygonPointArgsError:function(){return c(s.s("shared-calculator-error-polygon-point-args-error"))},polygonTwoNumbersError:function(){return c(s.s("shared-calculator-error-two-numbers-error"))},boxplotOffsetInvalid:function(){return c(s.s("shared-calculator-error-boxplot-offset-invalid"))},boxplotBreadthInvalid:function(){return c(s.s("shared-calculator-error-boxplot-breadth-invalid"))},tooManyArguments:function(r,e){return c(s.s("shared-calculator-error-too-many-arguments",{symbol:r,max:e}))},pdfWrongArity:function(){var r=s.s("shared-calculator-error-pdf-wrong-arity-recommendation"),e=s.s("shared-calculator-error-pdf-wrong-arity",{recommendation:r});return c(e)},cdfRequiresArguments:function(){var r=s.s("shared-calculator-error-cdf-wrong-arity-recommendation"),e=s.s("shared-calculator-error-cdf-wrong-arity",{recommendation:r});return c(e)},cdfTooManyArguments:function(){var r=s.s("shared-calculator-error-cdf-too-many-arguments-recommendation"),e=s.s("shared-calculator-error-cdf-too-many-arguments",{recommendation:r});return c(e)},tdistWrongArity:function(){return c(s.s("shared-calculator-error-tdist-wrong-arity"))},randomArity:function(){return c(s.s("shared-calculator-error-random-arity"))},randomFromBroadcastDistribution:function(){return c(s.s("shared-calculator-error-random-from-broadcast-distribution"))},colorArity:function(r){var e="rgb"===r?[150,30,100]:[180,.5,.5],o=s.s("shared-calculator-error-color-arity-recommendation",{recommendation:u.formatSymbol(r)+"("+e.join(", ")+")"}),n=s.s("shared-calculator-error-color-arity",{symbol:r,recommendation:o});return c(n)},wrongArity:function(r,e,o,n){var t,a;if(r=u.formatSymbol(r),1===e)n=n||r+"(x)",a=s.s("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),t=1<o?s.s("shared-calculator-error-wrong-arity-single-arg-too-many",{dependency:r,supplement:a}):s.s("shared-calculator-error-wrong-arity-single-arg-too-few",{dependency:r,supplement:a});else{var l=[];if(!n){for(var i=0;i<e;i++)l[i]=i+1;n=u.formatSymbol(r)+"("+l.join(", ")+")"}a=s.s("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),t=s.s("shared-calculator-error-wrong-arity-many-arg",{dependency:r,assignment_arity:e,supplement:a})}return c(t)},wrongParametrizedReducerArity:function(r){return c(s.s("shared-calculator-error-wrong-two-arg-arity",{symbol:u.formatSymbol(r),recommendation:u.formatSymbol(r)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(r){return c(s.s("shared-calculator-error-wrong-two-arg-arity",{symbol:u.formatSymbol(r),recommendation:u.formatSymbol(r)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return c(s.s("shared-calculator-error-primed-function-arity"))},zeroArgReducer:function(r){return c(s.s("shared-calculator-error-zero-arg-reducer",{symbol:u.formatSymbol(r)}))},malformedPoint:function(){return c(s.s("shared-calculator-error-malformed-point"))},badTupleDimensions:function(r){return c(s.s("shared-calculator-error-bad-tuple-dimensions",{symbol:r}))},badImplicitCall:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-bad-implicit-call",{symbol:r}))},adjacentNumbers:function(r,e){return c(s.s("shared-calculator-error-adjacent-numbers",{left:r,right:e}))},identifierAsFunction:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-identifier-as-function",{symbol:r}))},binaryOperatorMissingOperand:function(r){return"%"===(r=u.formatSymbol(r))&&(r="% of"),c(s.s("shared-calculator-error-binary-operator-missing-operand",{symbol:r}))},unaryOperatorMissingLeft:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-unary-operator-missing-left",{symbol:r}))},unaryOperatorMissingRight:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-unary-operator-missing-right",{symbol:r}))},fractionMissingNumerator:function(){return c(s.s("shared-calculator-error-fraction-missing-numerator"))},fractionMissingDenominator:function(){return c(s.s("shared-calculator-error-fraction-missing-denominator"))},fractionEmpty:function(){return c(s.s("shared-calculator-error-fraction-empty"))},emptySubscript:function(){return c(s.s("shared-calculator-error-empty-subscript"))},emptySuperscript:function(){return c(s.s("shared-calculator-error-empty-superscript"))},invalidSubscript:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-invalid-subscript",{symbol:r}))},invalidOperatorName:function(){return c(s.s("shared-calculator-error-invalid-operator-name"))},unexpectedSubscript:function(){return c(s.s("shared-calculator-error-unexpected-subscript"))},superscriptWithPrime:function(){return c(s.s("shared-calculator-error-superscript-with-prime"))},unexpectedPrime:function(){return c(s.s("shared-calculator-error-unexpected-prime"))},primeWithoutParen:function(){return c(s.s("shared-calculator-error-prime-without-paren"))},emptyRadical:function(){return c(s.s("shared-calculator-error-empty-radical"))},emptyRadicalIndex:function(){return c(s.s("shared-calculator-error-empty-radical-index"))},emptyParen:function(){return c(s.s("shared-calculator-error-empty-paren"))},emptySquareBracket:function(){return c(s.s("shared-calculator-error-empty-square-bracket"))},emptyPipe:function(){return c(s.s("shared-calculator-error-empty-pipe"))},badTrigExponent:function(r){var e=r+"^2",o=r+"^-1";return c(s.s("shared-calculator-error-bad-trig-exponent",{form1:e,form2:o}))},badLogExponent:function(r){var e=r+"^2";return c(s.s("shared-calculator-error-bad-log-exponent",{form:e}))},inequalityChainTooLong:function(){return c(s.s("shared-calculator-error-inequality-chain-too-long"))},piecewiseMissingCondition:function(){return c(s.s("shared-calculator-error-piecewise-missing-condition"))},piecewisePartMissingCondition:function(){return c(s.s("shared-calculator-error-piecewise-part-missing-condition"))},colonMissingCondition:function(){return c(s.s("shared-calculator-error-colon-missing-condition"))},blankExpression:function(){return c(s.s("shared-calculator-error-blank-expression"))},functionNotDefined:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-function-not-defined",{dependency:r}))},parameterAlreadyDefined:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-parameter-already-defined",{dependency:r}))},cannotRedefine:function(r,e){return r=u.formatSymbol(r),c(void 0===e?s.s("shared-calculator-error-cannot-redefine",{symbol:r}):s.s("shared-calculator-error-cannot-redefine-root",{symbol:r,symbolRoot:e}))},cannotSubscript:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-cannot-subscript",{symbol:r}))},multiplyDefined:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-multiply-defined",{dependency:r}))},shadowedIndex:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-shadowed-index",{symbol:r}))},cycle:function(r){var e=(r=r.map(u.formatSymbol)).pop();return c(s.s("shared-calculator-error-dependency-cycle",{symbols:r.join("\', \'"),lastSymbol:e}))},selfReferentialFunction:function(r){return c(s.s("shared-calculator-error-self-referential-function",{symbol:u.formatSymbol(r)}))},simulationFPSNonNegativeNumber:function(){return c(s.s("shared-calculator-error-simulation-fps-nonnegative"))},sliderLimitReferencesExport:function(r){return c(s.s("shared-calculator-error-slider-limit-references-export",{symbol:u.formatSymbol(r)}))},sliderMinInvalid:function(){return c(s.s("shared-calculator-error-slider-min-invalid"))},sliderMaxInvalid:function(){return c(s.s("shared-calculator-error-slider-max-invalid"))},sliderMaxLessThanMin:function(){return c(s.s("shared-calculator-error-slider-max-less-than-min"))},sliderStepInvalid:function(){return c(s.s("shared-calculator-error-slider-step-invalid"))},domainMinInvalid:function(){return c(s.s("shared-calculator-error-domain-min-invalid"))},domainMaxInvalid:function(){return c(s.s("shared-calculator-error-domain-max-invalid"))},domainMaxLessThanMin:function(){return c(s.s("shared-calculator-error-domain-max-less-than-min"))},cdfMinInvalid:function(){return c(s.s("shared-calculator-error-cdf-min-invalid"))},cdfMaxInvalid:function(){return c(s.s("shared-calculator-error-cdf-max-invalid"))},cdfMaxLessThanMin:function(){return c(s.s("shared-calculator-error-cdf-max-less-than-min"))},tooManyVariables:function(r){if(0===(r=r.map(u.formatSymbol)).length)return c(s.s("shared-calculator-error-too-many-variables-no-symbols"));var e=r.pop();return 0<r.length?c(s.s("shared-calculator-error-too-many-variables-many-symbols",{variables:r.join("\', \'"),lastVariable:e})):c(s.s("shared-calculator-error-too-many-variables-one-symbol",{variable:e}))},addArgumentsToDefinition:function(r,e,o){r=r.map(u.formatSymbol);var n=(e=u.formatSymbol(e))+"("+(o=o.map(u.formatSymbol)).join(",")+","+r.join(",")+")",t=r.pop(),a={symbols:r.join("\', \'"),lastSymbol:t,newSignature:n};return r.length?c(s.s("shared-calculator-error-add-arguments-to-definition-many",a)):c(s.s("shared-calculator-error-add-arguments-to-definition-one",a))},invalidLHS:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-invalid-lhs",{symbol:r}))},unplottablePolarFunction:function(){return c(s.s("shared-calculator-error-unplottable-polar-function"))},invalidInequalityVariables:function(){return c(s.s("shared-calculator-error-invalid-inequality-variables"))},invalidImplicitVariables:function(){return c(s.s("shared-calculator-error-invalid-implicit-variables"))},singleVariableImplicitEquationsDisabled:function(){return c(s.s("shared-calculator-error-single-variable-implicit-equations-disabled"))},implicitsDisabled:function(){return c(s.s("shared-calculator-error-implicits-disabled"))},inequalitiesDisabled:function(){return c(s.s("shared-calculator-error-inequalities-disabled"))},complicatedPolarImplicit:function(){return c(s.s("shared-calculator-error-complicated-polar-implicit"))},invalidDoubleInequalityVariables:function(){return c(s.s("shared-calculator-error-invalid-double-inequality-variables"))},mismatchedDoubleInequality:function(){return c(s.s("shared-calculator-error-mismatched-double-inequality",{example:"1 < y < 2"}))},complicatedDoubleInequality:function(){return c(s.s("shared-calculator-error-complicated-double-inequality"))},equationRequired:function(r){return r?(r=u.formatSymbol(r),c(s.s("shared-calculator-error-equation-required-symbol",{lhs:r+"="}))):c(s.s("shared-calculator-error-equation-required"))},variableAsFunction:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-variable-as-function",{dependency:r}))},distributionAsFunction:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-distribution-as-function",{symbol:r}))},invalidTableHeader:function(r){return c(s.s("shared-calculator-error-invalid-table-header",{supplement:r}))},invalidTableEntry:function(r){return c(s.s("shared-calculator-error-invalid-table-entry",{supplement:r}))},invalidFirstTableColumn:function(){return c(s.s("shared-calculator-error-invalid-first-table-column",{most:"\'y\', \'r\',",last:"\'Î¸\'"}))},invalidDependentFirstTableColumn:function(){return c(s.s("shared-calculator-error-invalid-dependent-first-table-column"))},invalidRegressionParameter:function(r){return c(s.s("shared-calculator-error-invalid-regression-parameter",{symbol:u.formatSymbol(r)}))},optimizationError:function(){return c(s.s("shared-calculator-error-optimization-error"))},nonListDoubleReducer:function(r){return c(s.s("shared-calculator-error-non-list-double-reducer",{symbol:u.formatSymbol(r),recommendation:u.formatSymbol(r)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(r){return c(s.s("shared-calculator-error-non-list-parameterized-reducer",{symbol:u.formatSymbol(r),recommendation:u.formatSymbol(r)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(r){return c(s.s("shared-calculator-error-method-requires-list",{symbol:u.formatSymbol(r),recommendation:u.formatSymbol(r)+"([1,2,3])"})).allowExport()},variableRange:function(r){return c(s.s("shared-calculator-error-variable-range",{symbol:u.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableListIndicies:function(r){return c(s.s("shared-calculator-error-variable-list-indices",{symbol:u.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableFilter:function(r){return c(s.s("shared-calculator-error-variable-filter",{symbol:u.formatSymbol(r[0])})).setDependencies(r).allowExport()},functionFreeVariable:function(r,e){return c(s.s("shared-calculator-error-variable-function-free-variable",{functionSymbol:r,variableSymbol:e})).allowExport()},nonArithmeticRange:function(r){return c(s.s("shared-calculator-error-non-arithmetic-range")).allowExport()},invalidHalfEmptyRange:function(){return c(s.s("shared-calculator-error-invalid-half-empty-range"))},sumMissingBound:function(){return c(s.s("shared-calculator-error-sum-missing-bound"))},productMissingBound:function(){return c(s.s("shared-calculator-error-product-missing-bound"))},incorrectSumLowerBound:function(){return c(s.s("shared-calculator-error-incorrect-sum-lower-bound"))},incorrectProductLowerBound:function(){return c(s.s("shared-calculator-error-incorrect-product-lower-bound"))},badSumBoundDependency:function(r){return c(s.s("shared-calculator-error-bad-sum-bound-dependency",{symbol:u.formatSymbol(r)}))},badProductBoundDependency:function(r){return c(s.s("shared-calculator-error-bad-product-bound-dependency",{symbol:u.formatSymbol(r)}))},integralMissingBound:function(){return c(s.s("shared-calculator-error-integral-missing-bound"))},integralMissingDifferential:function(){return c(s.s("shared-calculator-error-integral-missing-differential"))},differentialWithSuperscript:function(){return c(s.s("shared-calculator-error-differential-with-superscript"))},sumMissingBody:function(){return c(s.s("shared-calculator-error-sum-missing-body"))},productMissingBody:function(){return c(s.s("shared-calculator-error-product-missing-body"))},integralMissingBody:function(){return c(s.s("shared-calculator-error-integral-missing-body"))},derivativeMissingBody:function(){return c(s.s("shared-calculator-error-derivative-missing-body"))},mismatchedBraces:function(r,e){return r=u.formatSymbol(r),e=u.formatSymbol(e),c(s.s("shared-calculator-error-mismatched-braces",{symbol1:r,symbol2:e}))},shadowedIntegrationVariable:function(r){return c(s.s("shared-calculator-error-shadowed-integration-variable",{symbol:u.formatSymbol(r)}))},badIntegralBoundDependency:function(r){return c(s.s("shared-calculator-error-bad-integral-bound-dependency",{symbol:u.formatSymbol(r)}))},percentMissingOf:function(){return c(s.s("shared-calculator-error-percent-missing-of"))},illegalBinWidth:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-illegal-bin-width",{symbol:r}))},ttestListTooShort:function(r){return r=u.formatSymbol(r),c(s.s("shared-calculator-error-ttest-list-too-short",{symbol:r}))},badSampleSize:function(){return c(s.s("shared-calculator-error-bad-sample-size"))},variableSampleSize:function(r){return c(s.s("shared-calculator-error-variable-sample-size",{symbol:u.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableSeed:function(r){return c(s.s("shared-calculator-error-variable-seed",{symbol:u.formatSymbol(r[0])})).setDependencies(r).allowExport()},badAnsContext:function(){return c(s.s("shared-calculator-error-bad-ans-context"))},ansUndefined:function(){return c(s.s("shared-calculator-error-ans-undefined"))},variablesUnsupported:function(r){return c(s.s("shared-calculator-error-variables-unsupported",{variable:u.formatSymbol(r)}))},functionUnsupported:function(r){return c(s.s("shared-calculator-error-function-unsupported",{symbol:u.formatSymbol(r)}))},logbaseUnsupported:function(){return c(s.s("shared-calculator-error-logbase-unsupported"))},constantUnsupported:function(r){return c(s.s("shared-calculator-error-constant-unsupported",{symbol:u.formatSymbol(r)}))},assignmentsUnsupported:function(){return c(s.s("shared-calculator-error-assignments-unsupported"))},functionDefinitionsUnsupported:function(){return c(s.s("shared-calculator-error-function-definition-unsupported"))},equationsUnsupported:function(){return c(s.s("shared-calculator-error-equations-unsupported"))},inequalitiesUnsupported:function(){return c(s.s("shared-calculator-error-inequalities-unsupported"))},regressionsUnsupported:function(){return c(s.s("shared-calculator-error-regressions-unsupported"))},pointsUnsupported:function(){return c(s.s("shared-calculator-error-points-unsupported"))},colorsUnsupported:function(){return c(s.s("shared-calculator-error-colors-unsupported"))},featureUnavailable:function(){return c(s.s("shared-calculator-error-feature-unavailable"))},fractionsUnavailable:function(){return c(s.s("basic-calculator-error-fractions-unavailable"))},nonSquareDeterminant:function(){return c(s.s("shared-calculator-error-non-square-determinant"))},nonSquareTrace:function(){return c(s.s("shared-calculator-error-non-square-trace"))},nonSquareInverse:function(){return c(s.s("shared-calculator-error-non-square-inverse"))},singularInverse:function(){return c(s.s("shared-calculator-error-non-singular-inverse"))},clickableObjectAssignmentNotDefined:function(r){return c(s.s("shared-calculator-error-clickable-object-assignment-not-defined",{symbol:r}))},clickableObjectAlreadyAssigned:function(r){return c(s.s("shared-calculator-error-multiply-defined",{dependency:r}))},clickableObjectAssignmentNotIdentifier:function(){return c(s.s("shared-calculator-error-clickable-object-assignment-not-identifier"))},clickableObjectInvalidExpression:function(){return c(s.s("shared-calculator-error-clickable-object-invalid-expression"))},matrixAssignment:function(){return c(s.s("shared-calculator-error-matrix-assignment"))},matrixAddDimensions:function(){return c(s.s("shared-calculator-error-matrix-add-dimensions"))},matrixSubtractDimensions:function(){return c(s.s("shared-calculator-error-matrix-subtract-dimensions"))},matrixMultiplyDimensions:function(){return c(s.s("shared-calculator-error-matrix-multiply-dimensions"))},matrixFractionalPower:function(){return c(s.s("shared-calculator-error-matrix-fractional-power"))},matrixPowerDimensions:function(){return c(s.s("shared-calculator-error-matrix-power-dimensions"))},matrixElementTypeError:function(r){return c(s.s("shared-calculator-error-matrix-element-type-error",{arg:r[0]}))},matrixInvalidVariable:function(r){return c(s.s("shared-calculator-error-matrix-invalid-variable",{symbol:u.formatSymbol(r)}))}}});\ndefine(\'core/math/parsenode/expression\',[\'require\',\'pjs\',\'./base\',\'core/math/errormsg\',\'core/math/types\'],function(require){"use strict";var e=require("pjs"),t=require("./base"),r=require("core/math/errormsg"),i=require("core/math/types");return e(t,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,1e4<e)throw r.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})});\ndefine(\'core/math/parsenode/scalarexpression\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t){s.init.call(this,t)},t.getEvalStrings=function(){for(var t=[],s=[],n=0;n<this.args.length;n++){var i=this.args[n].getEvalStrings(),t=t.concat(i.statements);s.push(i.expression)}return{statements:t,expression:this.scalarEvalExpression(s)}}})});\ndefine(\'core/math/parsenode/expressionTypes\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),e={Add:n(t,{}),Subtract:n(t,{}),Multiply:n(t,{}),Divide:n(t,{}),Exponent:n(t,{}),Negative:n(t,{}),And:n(t,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:n(t,{})};return e.RawExponent=n(e.Exponent,{}),e});\ndefine(\'core/math/maybe-rational\',["require","exports","core/math/builtin"],function(require,t,i){"use strict";function o(t,n){return{n:t,d:n}}function d(t){return"object"==typeof t&&"number"==typeof t.n&&"number"==typeof t.d}Object.defineProperty(t,"__esModule",{value:!0}),t.total=t.mod=t.nthroot=t.sqrt=t.pow=t.div=t.sub=t.mul=t.add=t.reciprocal=t.abs=t.neg=t.maybeRational=t.asFloat=t.fromDecimalString=t.isRational=void 0,t.isRational=d;var h=Math.pow(2,53)-1;function f(t){return d(t)?t.n/t.d:+t}function c(t,n){if(!isFinite(t)||!isFinite(n)||0===n||Math.floor(t)!==t||Math.floor(n)!==n||Math.abs(t)>h||Math.abs(n)>h)return t/n;n<0&&(t=-t,n=-n);var r=i.gcd(t,n);return o(t/r,n/r)}function s(t){return d(t)?o(-t.n,t.d):-t}function M(t){return d(t)?0===t.n?t.d/t.n:o(t.n<0?-t.d:t.d,Math.abs(t.n)):1/t}function e(t,n){if(!d(t)||!d(n))return f(t)+f(n);var r=i.gcd(t.d,n.d);return c(t.n*(n.d/r)+n.n*(t.d/r),t.d/r*n.d)}function u(t,n){if(!d(t)||!d(n))return f(t)*f(n);var r=i.gcd(t.n,n.d),a=i.gcd(n.n,t.d);return c(t.n/r*(n.n/a),t.d/a*(n.d/r))}function p(t,n){return e(t,s(n))}function l(t,n){return d(t)&&d(n)?u(t,M(n)):f(t)/f(n)}function r(t,n){if(!d(t)||!d(n))return i.pow(f(t),f(n));var r=function(t,n){var r=t,a=n;if(n.n<0&&(a=s(n),r=M(t)),!d(r)||!d(a))return i.pow(f(t),f(n));if(t=r,1===(n=a).d)return c(Math.pow(t.n,n.n),Math.pow(t.d,n.n));var o=t.n<0;if(o&&n.d%2!=1)return NaN;var e=(o?-1:1)*Math.round(Math.pow(Math.abs(t.n),1/n.d)),u=Math.round(Math.pow(Math.abs(t.d),1/n.d));return Math.pow(e,n.d)!==t.n||Math.pow(u,n.d)!==t.d?i.pow(f(t),f(n)):c(Math.pow(e,n.n),Math.pow(u,n.n))}(t,n);return d(r)?r:i.pow(f(t),f(n))}t.fromDecimalString=function(t){var n=t.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!n)return NaN;var r=n[1],a=n[2],o=n[3];if(!a&&!o)return NaN;var e=!!r;if(o){var u=o.replace(/0+$/,""),i=u.length,d=Math.pow(10,i),f=parseInt(a||"0",10)*d+parseInt(u||"0",10);return h<f||h<d?parseFloat(t):c(e?-f:f,d)}return f=parseInt(a,10),h<f?parseFloat(t):c(e?-f:f,1)},t.asFloat=f,t.maybeRational=c,t.neg=s,t.abs=function(t){return d(t)?o(Math.abs(t.n),Math.abs(t.d)):Math.abs(t)},t.reciprocal=M,t.add=e,t.mul=u,t.sub=p,t.div=l,t.pow=r,t.sqrt=function(t){if(!d(t))return Math.sqrt(t);var n=Math.round(Math.sqrt(t.n)),r=Math.round(Math.sqrt(t.d));return n*n!==t.n||r*r!==t.d?Math.sqrt(f(t)):c(n,r)},t.nthroot=function(t,n){return r(t,M(n))},t.mod=function(t,n){if(d(t)&&d(n))return p(t,u(n,o(Math.floor(f(l(t,n))),1)));var r=f(t),a=f(n);return r-a*Math.floor(r/a)},t.total=function(t){for(var n=o(0,1),r=0,a=t;r<a.length;r++)n=e(n,a[r]);return n}});\ndefine(\'core/math/parsenode/constant\',[\'require\',\'pjs\',\'./scalarexpression\',\'core/math/maybe-rational\',\'core/math/types\'],function(require){"use strict";var t=require("pjs"),a=require("./scalarexpression"),n=require("core/math/maybe-rational"),e=require("core/math/types");return t(a,function(t,a){t.init=function(t){"number"==typeof t&&(t=n.maybeRational(t,1)),this._constantValue=t,a.init.call(this,[])},t.isConstant=!0,t.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},t.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:n.asFloat(this._constantValue)},t.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},t.scalarExprString=function(){return 0<this.asValue()?String(this.asValue()):"("+String(this.asValue())+")"},t.getEvaluationInfo=function(){return[{val:this.asValue()}]},t.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},t._getValueType=function(){switch(typeof this.asValue()){case"number":return e.Number;case"boolean":return e.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})});\ndefine(\'core/math/parsenode/mixednumber\',[\'require\',\'pjs\',\'./constant\'],function(require){"use strict";return require("pjs")(require("./constant"),function(n,i){n.init=function(n){i.init.call(this,n)},n.is_mixed_number=!0})});\ndefine(\'core/math/parsenode/identifier\',[\'require\',\'pjs\',\'./expression\',\'core/lib/label\',\'core/math/parser/input-span\'],function(require){"use strict";var n=require("pjs"),e=require("./expression"),i=require("core/lib/label"),a=require("core/math/parser/input-span");return n(e,function(n,e,t){n.init=function(n){e.init.call(this,[]),this._symbol=i.latexToIdentifier(n),this.setInputSpan(new a.Span(n,0,n.length)),this.addDependency(this._symbol)},n.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})});\ndefine(\'core/math/parsenode/ans\',[\'require\',\'pjs\',\'./identifier\'],function(require){"use strict";return require("pjs")(require("./identifier"),function(i,n,e){})});\ndefine(\'core/math/parsenode/freevariable\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(i,n){i.init=function(i){n.init.call(this,[]),this.addDependency(i),this._symbol=i},i.isFreeVariable=!0,i.scalarEvalExpression=function(i){return this._symbol},i.copyWithArgs=function(i){return this}})});\ndefine(\'core/math/parsenode/dummyindex\',[\'require\',\'pjs\',\'./freevariable\'],function(require){"use strict";return require("pjs")(require("./freevariable"),function(){})});\ndefine(\'core/math/parsenode/list\',[\'require\',\'pjs\',\'./expression\',\'core/math/types\'],function(require){"use strict";var t=require("pjs"),n=require("./expression"),u=require("core/math/types");return t(n,function(t,n,i){t.init=function(t){n.init.call(this,t),this.length=t.length},t.isList=!0,t.getEvalStrings=function(){for(var t=[],n=[],s=0;s<this.args.length;s++){var r=this.args[s].getEvalStrings();Array.prototype.push.apply(t,r.statements),n.push(r.expression)}return{statements:t,expression:"["+n.join(",")+"]"}},t.asValue=function(){for(var t=[],n=0;n<this.args.length;n++)t.push(this.args[n].asValue());return t},t.asMaybeRationalValue=function(){for(var t=[],n=0;n<this.args.length;n++)t.push(this.args[n].asMaybeRationalValue());return t},t.getEvaluationInfo=function(){if(this.args.every(function(t){return t.isConstant}))return[{val:this.args.map(function(t){return t.asValue()})}]},i.eachArgs=function(t,n,s){var r=function(t){for(var n=1/0,s=0;s<t.length;s++)(t[s].isList||t[s].isBroadcast)&&(n=Math.min(n,t[s].length));return n}(n);if(isFinite(r))for(var i=0;i<r;i++){for(var e=[],a=0;a<n.length;a++)e.push(n[a].isList||u.isList(n[a].valueType)?n[a].elementAt(t,i):n[a]);s(e,i)}else s(n)},i.mapArgs=function(t,n,s){var r=[];return i.eachArgs(t,n,function(t){r.push(s(t))}),r},i.wrap=function(t){return t.isList||u.isList(t.valueType)?t:i([t])}})});\ndefine(\'core/math/parsenode/range\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,i,t){n.init=function(n){i.init.call(this,n),this.beginning=n[0],this.end=n[1]},n.isHalfEmpty=function(){return this.end&&this.end.args&&0===this.end.args.length}})});\ndefine(\'core/math/parsenode/broadcast\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n,s){t.init=function(t,s){if(n.init.call(this,s),this._replacedSymbols=t,this._expression=s[0],this._lists=s.slice(1),!t.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var r=0;r<t.length;r++)this.removeDependency(t[r]);for(var e=1/0,i=0;i<this._lists.length;i++){if(!this._lists[i].isList)throw new Error("List arguments of broadcast must be list literals");e=Math.min(e,this._lists[i].length)}this.length=e},t.isBroadcast=!0,t.copyWithArgs=function(t){return new this.constructor(this._replacedSymbols,t)},t.getEvalStrings=function(){var t=[],s=this._expression.getEvalStrings();Array.prototype.push.apply(t,s.statements);for(var r=[],e=[],i=0;i<this._lists.length;i++){var n=this._lists[i].getEvalStrings();Array.prototype.push.apply(t,n.statements);var a=this.tmpVar();e.push(a),r.push("var "+a+" = "+n.expression)}var o=this.tmpVar(),h=this.tmpVar();r.push("var "+o+" = []");var l=[];for(i=0;i<e.length;i++)l.push("var "+this._replacedSymbols[i]+" = "+e[i]+"["+h+"]");return r.push("for (var "+h+" = 0; "+h+" < "+this.length+"; "+h+"++) {\\n  "+l.join(";\\n  ")+";\\n  "+o+".push("+s.expression+");\\n}"),{statements:t.concat(r),expression:o}}})});\ndefine(\'core/math/parsenode/listaccess\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t){s.init.call(this,t),this.list=t[0],this.index=t[1]},t.getEvalStrings=function(){var t=this.index.getEvalStrings(),s=this.list.getEvalStrings(),i=t.statements.concat(s.statements),n=this.tmpVar();i.push("var "+n+" = "+s.expression);var e=this.tmpVar();return i.push("var "+e+" = Math.floor("+t.expression+") - 1"),{statements:i,expression:"("+e+" >= 0 && "+e+" < "+n+".length ? "+n+"["+e+"] : NaN)"}}})});\ndefine(\'core/math/parsenode/dotaccess\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),{})});\ndefine(\'core/math/parsenode/dotaccessexponent\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),{})});\ndefine(\'core/math/parsenode/orderedpair\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(e,r,s){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(r,e){return r.sliderVariables(e.getDependencies()).filter(function(e){return!r.validParametricVariable(e)})},e.getEvalStrings=function(){for(var e=[],r=[],s=0;s<this.args.length;s++){var t=this.args[s].getEvalStrings(),e=e.concat(t.statements);r.push(t.expression)}return{statements:e,expression:"["+r.join(",")+"]"}}})});\ndefine(\'core/math/parsenode/movablepoint\',[\'require\',\'pjs\',\'./orderedpair\'],function(require){"use strict";return require("pjs")(require("./orderedpair"),function(i,n){i.init=function(i,t,e){n.init.call(this,i),this.moveStrategy=t,this.defaultDragMode=e},i.isMovablePoint=!0})});\ndefine(\'core/math/parsenode/orderedpairaccess\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(t,s){t.init=function(t){s.init.call(this,t),this.point=t[0],this.index=t[1]},t.getEvalStrings=function(){var t=this.index.getEvalStrings(),s=this.point.getEvalStrings(),n=[];return Array.prototype.push.apply(n,t.statements),Array.prototype.push.apply(n,s.statements),{statements:n,expression:s.expression+"["+t.expression+"-1]"}}})});\ndefine(\'core/math/parsenode/polygon\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="polygon"}})});\ndefine(\'core/math/comparators\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get=e.table=void 0,e.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},e.get=function(e,i){switch(i){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}});\ndefine(\'core/math/parsenode/basecomparator\',[\'require\',\'pjs\',\'./scalarexpression\',\'./expressionTypes\',\'core/math/comparators\',\'core/math/functions\'],function(require){"use strict";var a=require("pjs"),t=require("./scalarexpression"),n=require("./expressionTypes").Subtract,o=require("core/math/comparators").table,c=require("core/math/functions");return a(t,function(t,e,i){i.create=function(n,r){return r=r||n,a(i,function(t,e){t.operator=n,t.isInequality=function(){return 0!==o[n].direction},t.compiledOperator=r,t.scalarEvalExpression=function(t){return t.join(r)},t.evaluate=c.createEvaluateFunction(t.scalarEvalExpression,2)})},t.init=function(t){e.init.call(this,t),this._difference=-1===o[this.operator].direction?n([t[1],t[0]]):n([t[0],t[1]])}})});\ndefine(\'core/math/parsenode/comparator\',[\'require\',\'core/math/parsenode/basecomparator\'],function(require){"use strict";var e=require("core/math/parsenode/basecomparator");return{"<":e.create("<"),">":e.create(">"),"<=":e.create("<="),">=":e.create(">="),"=":e.create("=","===")}});\ndefine(\'core/math/parsenode/doubleinequality\',[\'require\',\'pjs\',\'./base\',\'core/math/comparators\',\'./comparator\'],function(require){"use strict";var i=require("pjs"),e=require("./base"),t=require("core/math/comparators"),n=require("./comparator");return i(e,function(i,s){i.init=function(i){s.init.call(this),this.args=i,this._symbol=i[2]._symbol,this._operators=[i[1],i[3]],this._expressions=[i[0],i[4]];var e=t.get(t.table[i[1]].inclusive&&t.table[i[3]].inclusive,t.table[i[1]].direction);this._indicator=n[e]([i[0],i[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},i.isInequality=function(){return!0},i.isShadeBetween=function(){return!0}})});\ndefine(\'core/math/parsenode/repeatedoperator\',[\'require\',\'pjs\',\'./scalarexpression\',\'./dummyindex\'],function(require){"use strict";var t=require("pjs"),s=require("./scalarexpression"),i=require("./dummyindex");return t(s,function(t,s){t.init=function(t){s.init.call(this,t),this._index=t[0],this.addDummyDependency(this._index._symbol),this._index instanceof i&&this.removeDependency(this._index._symbol)},t.getEvalStrings=function(){var t=[],s=this.tmpVar(),i=this._index._symbol,e=this.tmpVar(),n=this.tmpVar(),r=this.args[1].getEvalStrings(),a=this.args[2].getEvalStrings(),h=this.args[3].getEvalStrings();Array.prototype.push.apply(t,r.statements),t.push("var "+e+" = Math.round("+r.expression+")"),Array.prototype.push.apply(t,a.statements),t.push("var "+n+" = Math.round("+a.expression+")"),t.push("var "+s+"="+this.starting_value);var o="for (var "+i+"="+e+";"+i+"<="+n+";"+i+"++) {"+h.statements.join(";")+";"+s+this.in_place_operator+h.expression+"};",p="if(!isFinite("+n+"-"+e+")) {"+s+"=("+n+"<"+e+"?"+this.starting_value+":NaN);}else{"+o+"}";return t.push(p),{statements:t,expression:s}},t.evaluate=function(t,s,i){var e=i.getCompiledFunction([this._index._symbol]).fn;if(s=Math.round(s),t=Math.round(t),!isFinite(s-t))return s<t?this.starting_value:NaN;for(var n=this.starting_value,r=t;r<=s;r++)n=this.update(n,e(r));return n}})});\ndefine(\'core/math/parsenode/sum\',[\'require\',\'pjs\',\'./repeatedoperator\'],function(require){"use strict";return require("pjs")(require("./repeatedoperator"),function(t,n){t.in_place_operator="+=",t.starting_value=0,t.evaluateConstant=function(t){var n=1+Math.round(t[1])-Math.round(t[0]);return n<=0?this.starting_value:n*t[2]},t.update=function(t,n){return t+n}})});\ndefine(\'core/math/parsenode/product\',[\'require\',\'pjs\',\'./repeatedoperator\'],function(require){"use strict";return require("pjs")(require("./repeatedoperator"),function(t,n){t.in_place_operator="*=",t.starting_value=1,t.evaluateConstant=function(t){var n=1+Math.round(t[1])-Math.round(t[0]);return n<=0?this.starting_value:Math.pow(t[2],n)},t.update=function(t,n){return t*n}})});\ndefine(\'core/math/parsenode/integral\',[\'require\',\'pjs\',\'./scalarexpression\',\'./dummyindex\',\'core/math/builtin\'],function(require){"use strict";var t=require("pjs"),s=require("./scalarexpression"),e=require("./dummyindex"),r=require("core/math/builtin");return t(s,function(t,s){t.init=function(t){s.init.call(this,t),this._differential=t[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof e&&this.removeDependency(this._differential._symbol)},t.getEvalStrings=function(){var t=this.args[0],s=this.args[1],e=this.args[2],i=this.args[3],n=[],r=this.tmpVar(),a=t._symbol,o=this.tmpVar(),p=this.tmpVar(),u=s.getEvalStrings(),h=e.getEvalStrings(),l=i.getEvalStrings();return Array.prototype.push.apply(n,u.statements),Array.prototype.push.apply(n,h.statements),n.push("var "+o+" = "+u.expression),n.push("var "+p+" = "+h.expression),n.push("var "+r+" = function ("+a+") { "+l.statements.join("; ")+"; return "+l.expression+";}"),{statements:n,expression:"BuiltIn.quad("+[r,o,p].join(", ")+")"}},t.evaluate=function(t,s,e){var i=this.args[0],n=e.getCompiledFunction([i._symbol]).fn;return r.quad(n,t,s)}})});\ndefine(\'core/math/parsenode/functioncall\',[\'require\',\'pjs\',\'./expression\',\'./identifier\'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("./identifier");return i(t,function(i,n){i.init=function(i,t){"string"==typeof i&&(i=s(i)),this._identifier=i,this._symbol=i._symbol,n.init.call(this,t),this.addDependency(this._symbol)},i.copyWithArgs=function(i){return new this.constructor(s(this._symbol),i)}})});\ndefine(\'core/math/parsenode/seededfunctioncall\',[\'require\',\'pjs\',\'./functioncall\'],function(require){"use strict";return require("pjs")(require("./functioncall"),function(i,t){i.init=function(i,n){t.init.call(this,i,n),this.seed=n[0]}})});\ndefine(\'core/math/parsenode/functionexponent\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,e){})});\ndefine(\'core/math/parsenode/functionfactorial\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,e){})});\ndefine(\'core/math/parsenode/prime\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n){t.init=function(t,i){n.init.call(this,i),this.order=t},t.copyWithArgs=function(t){return new this.constructor(this.order,t)}})});\ndefine(\'core/math/parsenode/piecewise\',[\'require\',\'pjs\',\'./scalarexpression\',\'./constant\',\'core/math/maybe-rational\'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),r=require("./constant"),a=require("core/math/maybe-rational").maybeRational,e=n(t,{});return e.chain=function(n,t){for(var r,a=t;n.length;)r=n.pop(),a=e([r.condition,r.if_expr,a]);return a},e.empty=function(){return e([r(!0),r(a(1,1)),r(NaN)])},e});\ndefine(\'core/math/parsenode/derivative\',[\'require\',\'pjs\',\'./scalarexpression\',\'./identifier\'],function(require){"use strict";var i=require("pjs"),n=require("./scalarexpression"),t=require("./identifier");return i(n,function(i,s){i.init=function(i,n){this._symbol=i instanceof t?i._symbol:t(i)._symbol,s.init.call(this,n)}})});\ndefine(\'core/math/parsenode/nativefunction\',[\'require\',\'pjs\',\'./scalarexpression\',\'core/math/functions\'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),a=require("core/math/functions");return n(t,function(t,e,r){t.init=function(t,r){if(t.length>=this._requiredArity)for(;t.length<this._maxArity;)t.push(this._optionalArguments[t.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":r||this._symbol,e.init.call(this,t)},t.copyWithArgs=function(t){var r=e.copyWithArgs.call(this,t);return r._errorSymbol=this._errorSymbol,r},t.scalarEvalExpression=function(t){return this.head+"("+t.join(",")+")"},r.create=function(e,i,o,s){return n(this,function(t,r,n){n.isFunction=!0,t._symbol=e,t.head=i,t._requiredArity=o,t._optionalArguments=s||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),n.getConcreteInvocationTree=function(t,r,e,i){return n(e,i).getConcreteTree(t,r)},n.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/typedfunction\',[\'require\',\'pjs\',\'./nativefunction\'],function(require){"use strict";return require("pjs")(require("./nativefunction"),function(t,e,n,o){n.create=function(t,e,n,r){var u=n.length,i=o.create.call(this,t,e,u);return i.prototype._inputTypes=n,i.prototype._outputType=r,i}})});\ndefine(\'core/math/parsenode/trigfunction\',[\'require\',\'pjs\',\'./nativefunction\',\'./expressionTypes\',\'core/math/errormsg\'],function(require){"use strict";var e=require("pjs"),t=require("./nativefunction"),o=require("./expressionTypes").Multiply,u=require("core/math/errormsg");return e(t,function(e,t,r,n){r.create=function(e,t){var c=n.create(e,t,1);return c.getConcreteInvocationTree=function(e,t,r,n){if(r.length<1)throw u.wrongArity(n,1,r.length);var i=t.trigAngleMultiplier?[o([r[0],t.trigAngleMultiplier])].concat(r.slice(1)):r;return c(i,n).getConcreteTree(e,t)},c.getCacheKeys=function(){return["trigAngleMultiplier"]},c}})});\ndefine(\'core/math/parsenode/inversetrigfunction\',[\'require\',\'pjs\',\'./nativefunction\',\'./expressionTypes\'],function(require){"use strict";var e=require("pjs"),t=require("./nativefunction"),c=require("./expressionTypes").Divide;return e(t,function(e,t,n,r){n.create=function(e,t,n){var u=r.create(e,t,1,n);return u.getConcreteInvocationTree=function(e,t,n,r){var i=u(n,r);return(t.trigAngleMultiplier?c([i,t.trigAngleMultiplier]):i).getConcreteTree(e,t)},u.getCacheKeys=function(){return["trigAngleMultiplier"]},u}})});\ndefine(\'core/math/parsenode/distribution\',[\'require\',\'pjs\',\'./scalarexpression\',\'core/math/errormsg\'],function(require){"use strict";var e=require("pjs"),t=require("./scalarexpression"),o=require("core/math/errormsg");return e(t,function(t,n,i){t.init=function(t,i){var r="tdist"===this._symbol;if(t.length<this._requiredArity){if(r)throw o.tdistWrongArity();throw o.wrongArity(i,this._requiredArity,t.length)}if(t.length>this._maxArity){if(r)throw o.tdistWrongArity();throw o.wrongArity(this._symbol,this._maxArity,t.length)}for(;t.length<this._maxArity;)t.push(this._optionalArguments[t.length-this._requiredArity]);n.init.call(this,t)},t.scalarEvalExpression=function(t){return this.head+"("+t.join(",")+")"},i.create=function(r,n,o){return e(this,function(t,i,e){e.isFunction=!0,t._symbol=r,t._requiredArity=n,t._optionalArguments=o||[],t._maxArity=t._requiredArity+t._optionalArguments.length,e.getConcreteInvocationTree=function(t,i,r,n){return e(r,n)},e.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/reducerfunction\',[\'require\',\'pjs\',\'./expression\',\'core/math/functions\',\'core/math/errormsg\',\'./distribution\',\'core/math/types\'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg"),o=require("./distribution"),a=require("core/math/types");return i(t,function(t,n,e){t.init=function(t,e){if(0===t.length)throw r.zeroArgReducer(e);if(t[0]instanceof o&&"length"!==this._symbol&&!t[0][this._symbol])throw r.functionTypeError(this._symbol,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,t)},t.evalExpression=function(t){return this.head+"("+t+")"},t.getEvalStrings=function(){var t=this.args[0].getEvalStrings();return{statements:t.statements,expression:this.evalExpression(t.expression)}},e.create=function(n,r){return i(e,function(t,e,i){t._symbol=n,t.head=r,t._arity=1,i.isFunction=!0,i.allowDotCalls=!0,i.dotMinArity=0,i.dotMaxArity=0,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(t,e,n,r){return i(n,r).getConcreteTree(t,e)},i.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/doublereducerfunction\',[\'require\',\'pjs\',\'./expression\',\'core/math/functions\',\'core/math/errormsg\'],function(require){"use strict";var i=require("pjs"),e=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg");return i(e,function(e,n,t){e.init=function(e,t){if(n.init.call(this,e),2!==this.args.length)throw r.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],n=Math.min(this.args[0].length,this.args[1].length),r=0;r<this.args.length;r++){var i=this.args[r],s=i.getEvalStrings();Array.prototype.push.apply(e,s.statements),t.push(i.length===n?s.expression:s.expression+".slice(0,"+n+")")}return{statements:e,expression:this.evalExpression(t)}},t.create=function(n,r){return i(t,function(e,t,i){e._symbol=n,e.head=r,e._arity=2,i.isFunction=!0,e.evaluate=s.createEvaluateFunction(e.evalExpression.bind(e),e._arity),i.getConcreteInvocationTree=function(e,t,n,r){return i(n,r).getConcreteTree(e,t)},i.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/parametrizedreducerfunction\',[\'require\',\'pjs\',\'./expression\',\'core/math/functions\',\'core/math/errormsg\',\'./distribution\',\'core/math/types\'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg"),o=require("./distribution"),a=require("core/math/types");return i(t,function(t,n,e){t.init=function(t,e){if(t.length<2&&void 0!==this._optionalArgument&&t.push(this._optionalArgument),2!==t.length)throw r.wrongParametrizedReducerArity(e);if(t[0]instanceof o&&!t[0][this._symbol])throw r.functionTypeError(e,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,t)},t.evalExpression=function(t){return this.head+"("+t.join(",")+")"},t.getEvalStrings=function(){var t=[],e=this.args[0].getEvalStrings(),n=this.args[1].getEvalStrings();return Array.prototype.push.apply(t,e.statements),Array.prototype.push.apply(t,n.statements),{statements:t,expression:this.evalExpression([e.expression,n.expression])}},e.create=function(n,r,o){return i(e,function(t,e,i){t._symbol=n,t.head=r,t._optionalArgument=o,t._arity=2,i.isFunction=!0,i.allowDotCalls=!0,i.dotMinArity=void 0===o?1:0,i.dotMaxArity=1,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(t,e,n,r){return i(n,r).getConcreteTree(t,e)},i.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/toplevelfunction\',[\'require\',\'pjs\',\'./nativefunction\',\'core/math/errormsg\'],function(require){"use strict";var c=require("pjs"),n=require("./nativefunction"),o=require("core/math/errormsg");return c(n,function(n,e,t,r){t.create=function(n){return c(t,function(n,e,t){t.isFunction=!0,t.getConcreteInvocationTree=function(n,e,t,r){throw o.unexpectedSymbol(r)},t.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/builtinfunction\',[\'require\',\'core/math/parsenode/nativefunction\',\'core/math/parsenode/typedfunction\',\'core/math/parsenode/trigfunction\',\'core/math/parsenode/inversetrigfunction\',\'core/math/parsenode/reducerfunction\',\'core/math/parsenode/doublereducerfunction\',\'core/math/parsenode/parametrizedreducerfunction\',\'core/math/parsenode/distribution\',\'core/math/parsenode/toplevelfunction\',\'core/math/types\',\'core/math/maybe-rational\',\'core/math/parsenode/constant\'],function(require){"use strict";var e=require("core/math/parsenode/nativefunction"),t=require("core/math/parsenode/typedfunction"),a=require("core/math/parsenode/trigfunction"),r=require("core/math/parsenode/inversetrigfunction"),n=require("core/math/parsenode/reducerfunction"),i=require("core/math/parsenode/doublereducerfunction"),o=require("core/math/parsenode/parametrizedreducerfunction"),c=require("core/math/parsenode/distribution"),l=require("core/math/parsenode/toplevelfunction"),s=require("core/math/types"),u=require("core/math/maybe-rational").maybeRational,m=require("core/math/parsenode/constant"),d=m(u(1,1)),p=m(u(0,1)),I=m(u(1,2));return{sin:a.create("sin","BuiltIn.sin"),cos:a.create("cos","BuiltIn.cos"),tan:a.create("tan","BuiltIn.tan"),cot:a.create("cot","BuiltIn.cot"),sec:a.create("sec","BuiltIn.sec"),csc:a.create("csc","BuiltIn.csc"),arcsin:r.create("arcsin","Math.asin"),arccos:r.create("arccos","Math.acos"),arctan:r.create("arctan","Math.atan2",[d]),arccot:r.create("arccot","BuiltIn.acot"),arcsec:r.create("arcsec","BuiltIn.asec"),arccsc:r.create("arccsc","BuiltIn.acsc"),sinh:e.create("sinh","BuiltIn.sinh",1),cosh:e.create("cosh","BuiltIn.cosh",1),tanh:e.create("tanh","BuiltIn.tanh",1),coth:e.create("coth","BuiltIn.coth",1),sech:e.create("sech","BuiltIn.sech",1),csch:e.create("csch","BuiltIn.csch",1),arcsinh:e.create("arcsinh","BuiltIn.asinh",1),arccosh:e.create("arccosh","BuiltIn.acosh",1),arctanh:e.create("arctanh","BuiltIn.atanh",1),arccoth:e.create("arccoth","BuiltIn.acoth",1),arcsech:e.create("arcsech","BuiltIn.asech",1),arccsch:e.create("arccsch","BuiltIn.acsch",1),sqrt:e.create("sqrt","Math.sqrt",1),rtxsqpone:e.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:e.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:e.create("nthroot","BuiltIn.nthroot",2),log:e.create("log","BuiltIn.common_log",1),logbase:e.create("logbase","BuiltIn.log_base",2),ln:e.create("ln","BuiltIn.log",1),exp:e.create("exp","Math.exp",1),floor:e.create("floor","Math.floor",1),ceil:e.create("ceil","Math.ceil",1),round:e.create("round","BuiltIn.round",1,[p]),abs:e.create("abs","Math.abs",1),sign:e.create("sign","BuiltIn.sign",1),mod:e.create("mod","BuiltIn.mod",2),nCr:e.create("nCr","BuiltIn.nCr",2),nPr:e.create("nPr","BuiltIn.nPr",2),factorial:e.create("factorial","BuiltIn.factorial",1),polyGamma:e.create("polyGamma","BuiltIn.polyGamma",2),lcm:n.create("lcm","BuiltIn.listLCM"),gcd:n.create("gcd","BuiltIn.listGCD"),mean:n.create("mean","BuiltIn.mean"),total:n.create("total","BuiltIn.total"),stdev:n.create("stdev","BuiltIn.stdev"),stdevp:n.create("stdevp","BuiltIn.stdevp"),mad:n.create("mad","BuiltIn.mad"),length:n.create("length","BuiltIn.length"),min:n.create("min","BuiltIn.listMin"),max:n.create("max","BuiltIn.listMax"),argmin:n.create("argmin","BuiltIn.argMin"),argmax:n.create("argmax","BuiltIn.argMax"),median:n.create("median","BuiltIn.median"),var:n.create("var","BuiltIn.variance"),varp:n.create("varp","BuiltIn.varp"),cov:i.create("cov","BuiltIn.cov"),covp:i.create("covp","BuiltIn.covp"),corr:i.create("corr","BuiltIn.corr"),spearman:i.create("spearman","BuiltIn.spearman"),quantile:o.create("quantile","BuiltIn.quantile"),quartile:o.create("quartile","BuiltIn.quartile"),upperQuantileIndex:o.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:o.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:o.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:o.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:o.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:e.create("normalcdf","BuiltIn.normalcdf",2,[p,d]),normalpdf:e.create("normalpdf","BuiltIn.normalpdf",1,[p,d]),normalSample:t.create("normalSample","BuiltIn.normalSample",[s.SeedType,s.Number,s.Number],s.Number),uniformSample:t.create("uniformSample","BuiltIn.uniformSample",[s.SeedType,s.Number,s.Number],s.Number),tSample:t.create("tSample","BuiltIn.tSample",[s.SeedType,s.Number],s.Number),poissonSample:t.create("poissonSample","BuiltIn.poissonSample",[s.SeedType,s.Number],s.Number),binomSample:t.create("binomSample","BuiltIn.binomSample",[s.SeedType,s.Number,s.Number],s.Number),binomcdf:e.create("binomcdf","BuiltIn.binomcdf",3,[I]),binompdf:e.create("binompdf","BuiltIn.binompdf",2,[I]),poissoncdf:e.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:e.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:e.create("uniformcdf","BuiltIn.uniformcdf",2,[p,d]),uniformpdf:e.create("uniformpdf","BuiltIn.uniformpdf",1,[p,d]),invNorm:e.create("invNorm","BuiltIn.invNorm",1),invT:e.create("invT","BuiltIn.invT",2),invPoisson:e.create("invPoisson","BuiltIn.invPoisson",2),invBinom:e.create("invBinom","BuiltIn.invBinom",3),invUniform:e.create("invUniform","BuiltIn.invUniform",3),erf:e.create("erf","BuiltIn.erf",1),tpdf:e.create("tpdf","BuiltIn.tpdf",2),tcdf:e.create("tcdf","BuiltIn.tcdf",3),tscore:o.create("tscore","BuiltIn.tscore",p),distance:t.create("distance","BuiltIn.distance",[s.Point,s.Point],s.Number),midpoint:t.create("midpoint","BuiltIn.midpoint",[s.Point,s.Point],s.Point),addPoints:t.create("addPoints","BuiltIn.addPoints",[s.Point,s.Point],s.Point),subtractPoints:t.create("addPoints","BuiltIn.subtractPoints",[s.Point,s.Point],s.Point),negatePoint:t.create("negatePoint","BuiltIn.negatePoint",[s.Point],s.Point),multiplyPoint:t.create("multiplyPoint","BuiltIn.multiplyPoint",[s.Point,s.Number],s.Point),dividePoint:t.create("dividePoint","BuiltIn.dividePoint",[s.Point,s.Number],s.Point),normaldist:c.create("normaldist",0,[p,d]),tdist:c.create("tdist",1),binomialdist:c.create("binomialdist",1,[I]),poissondist:c.create("poissondist",1),uniformdist:c.create("uniformdist",0,[p,d]),pdf:t.create("pdf","BuiltIn.normpdf",[s.Distribution,[s.Number,s.ListOfNumber,s.EmptyList]],s.Number).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=1}),cdf:t.create("cdf","BuiltIn.normcdf",[s.Distribution,[s.Number,s.ListOfNumber,s.EmptyList],[s.Number,s.ListOfNumber,s.EmptyList]],s.Number).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=2}),random:e.create("random","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=3}),rgb:t.create("rgb","BuiltIn.rgb",[s.Number,s.Number,s.Number],s.RGBColor),hsv:t.create("hsv","BuiltIn.hsv",[s.Number,s.Number,s.Number],s.RGBColor),shuffle:e.create("shuffle","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=2,a.minArityUsageExample="shuffle([1,2,3])",e.minArityUsageExample=a.minArityUsageExample,a.maxArityUsageExample="shuffle([1,2,3],2)",e.maxArityUsageExample=a.maxArityUsageExample,a.dotMaxArityUsageExample=".shuffle(2)"}),sort:e.create("sort","",1).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=0,a.dotMaxArity=1,a.minArityUsageExample="sort([3,2,1])",e.minArityUsageExample=a.minArityUsageExample,a.maxArityUsageExample="sort([1,2,3],[3,2,1])",e.maxArityUsageExample=a.maxArityUsageExample,a.dotMaxArityUsageExample=".sort([3,4])"}),join:e.create("join","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=1/0,a.minArityUsageExample="join([1,2],[3,4])",e.minArityUsageExample=a.minArityUsageExample,a.dotMinArityUsageExample=".join([3,4])"}),polygon:l.create("polygon"),histogram:l.create("histogram"),dotplot:l.create("dotplot"),boxplot:l.create("boxplot"),ttest:l.create("ttest"),ittest:l.create("ittest"),stats:l.create("stats"),det:l.create("det"),inv:l.create("inv"),transpose:l.create("transpose"),rref:l.create("rref"),trace:l.create("trace")}});\ndefine(\'core/math/parsenode/histogram\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="histogram"}})});\ndefine(\'core/math/parsenode/object3d\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(i,n){t.init.call(this,i),this._symbol=n}})});\ndefine(\'core/math/parsenode/dotplot\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(i){t.init.call(this,i),this._symbol="dotplot"}})});\ndefine(\'core/math/parsenode/boxplot\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="boxplot"}})});\ndefine(\'core/math/parsenode/ttest\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,i){t.init=function(){i.init.apply(this,arguments),this._symbol="ttest"}})});\ndefine(\'core/math/parsenode/independent-ttest\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})});\ndefine(\'core/math/parsenode/stats\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})});\ndefine(\'core/math/parsenode/equation\',[\'require\',\'./base\',\'pjs\',\'./expressionTypes\',\'core/math/parsenode/comparator\'],function(require){"use strict";var s=require("./base"),t=require("pjs"),e=require("./expressionTypes").Subtract,r=require("core/math/parsenode/comparator");return t(s,function(s,i){s.init=function(s,t){i.init.call(this),this.mergeDependencies(s,t),this._lhs=s,this._rhs=t,this._difference=e([this._lhs,this._rhs])},s.asComparator=function(){return r["="]([this._lhs,this._rhs])}})});\ndefine(\'core/math/parsenode/assignment\',[\'require\',\'./base\',\'./equation\',\'./identifier\',\'pjs\'],function(require){"use strict";var e=require("./base"),t=require("./equation"),s=require("./identifier");return require("pjs")(e,function(e,i){e.init=function(e,t){i.init.call(this),e=e._symbol,this.mergeDependencies(t),this._expression=t,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),i=0;i<t.length;i++)if(t[i]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=t(s(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&(!this._expression.is_mixed_number&&("number"==typeof this._expression.asValue()&&(!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol))))}})});\ndefine(\'core/math/parsenode/functiondefinition\',[\'require\',\'pjs\',\'./base\',\'core/math/errormsg\',\'./equation\',\'./identifier\',\'./functioncall\'],function(require){"use strict";var e=require("pjs"),t=require("./base"),a=require("core/math/errormsg"),i=require("./equation"),n=require("./identifier"),r=require("./functioncall");return e(t,function(e,s){e.init=function(e,t,i){s.init.call(this),e=e._symbol,this._argSymbols=t.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=i,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,i,s){if(i.length!==this._argSymbols.length)throw a.wrongArity(s,this._argSymbols.length,i.length);for(var n=Object.create(t),r=0;r<this._argSymbols.length;r++)n[this._argSymbols[r]]=i[r];return this._expression.getConcreteTree(e,n)},e.getSliderVariables=function(e,t){var i=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===i.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return n(e)}),t=i(r(n(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})});\ndefine(\'core/math/parsenode/optimizedregression\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(i,n){i.init=function(i,e,t,s,a){for(var r in n.init.call(this),this.parameters=i,this.residuals=e,this.statistics=t,this.model=s,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this.isLinear=a.isLinear,this.parameterWarning=a.parameterWarning,this._exports=[this.residualVariable],i)i.hasOwnProperty(r)&&this._exports.push(r);this.mergeDependencies(s)},i.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},i.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},i.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})});\ndefine(\'numeric\',[],function(){"use strict";var y="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=y),y.version="1.2.6",y._myIndexOf=function(r){for(var n=this.length,e=0;e<n;++e)if(this[e]===r)return e;return-1},y.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:y._myIndexOf,y.precision=4,y.largeArray=50,y.compile=function(){var r=Array.prototype.slice.call(arguments),n=r.pop(),n="return function ("+r.join(",")+") {"+n+"}";return new Function(["numeric"],n)(y)},y._dim=function(r){for(var n=[];"object"==typeof r;)n.push(r.length),r=r[0];return n},y.dim=function(r){var n;return"object"==typeof r?"object"==typeof(n=r[0])?"object"==typeof n[0]?y._dim(r):[r.length,n.length]:[r.length]:[]},y.mapreduce=function(r,n){return y.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+n+\';\\nif(typeof x === "number") { var xi = x; \'+r+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+r+";\\n    xi = x[i-1];\\n    "+r+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+r+"\\n}\\nreturn accum;")},y.mapreduce2=function(r,n){return y.compile("x","var n = x.length;\\nvar i,xi;\\n"+n+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+r+"\\n}\\nreturn accum;")},y.rep=function(r,n,e){void 0===e&&(e=0);var t,i=r[e],o=Array(i);if(e===r.length-1){for(t=i-2;0<=t;t-=2)o[t+1]=n,o[t]=n;return-1===t&&(o[0]=n),o}for(t=i-1;0<=t;t--)o[t]=y.rep(r,n,e+1);return o},y.dotMMsmall=function(r,n){for(var e,t,i,o,a,f,u=r.length,c=n.length,s=n[0].length,m=Array(u),l=u-1;0<=l;l--){for(i=Array(s),o=r[l],t=s-1;0<=t;t--){for(a=o[c-1]*n[c-1][t],e=c-2;1<=e;e-=2)f=e-1,a+=o[e]*n[e][t]+o[f]*n[f][t];0===e&&(a+=o[0]*n[0][t]),i[t]=a}m[l]=i}return m},y._getCol=function(r,n,e){for(var t=r.length-1;0<t;--t)e[t]=r[t][n],e[--t]=r[t][n];0===t&&(e[0]=r[0][n])},y.dotMMbig=function(r,n){var e,t,i,o=y._getCol,a=n.length,f=Array(a),u=r.length,c=n[0].length,s=new Array(u),m=y.dotVV;for(t=--u;-1!==t;--t)s[t]=Array(c);for(t=--c;-1!==t;--t)for(o(n,t,f),i=u;-1!==i;--i)e=r[i],s[i][t]=m(e,f);return s},y.dotMV=function(r,n){for(var e=r.length,t=(n.length,Array(e)),i=y.dotVV,o=e-1;0<=o;o--)t[o]=i(r[o],n);return t},y.dotVM=function(r,n){for(var e,t,i,o=r.length,a=n[0].length,f=Array(a),u=a-1;0<=u;u--){for(t=r[o-1]*n[o-1][u],e=o-2;1<=e;e-=2)i=e-1,t+=r[e]*n[e][u]+r[i]*n[i][u];0===e&&(t+=r[0]*n[0][u]),f[u]=t}return f},y.dotVV=function(r,n){for(var e,t=r.length,i=r[t-1]*n[t-1],o=t-2;1<=o;o-=2)e=o-1,i+=r[o]*n[o]+r[e]*n[e];return 0===o&&(i+=r[0]*n[0]),i},y.dot=function(r,n){var e=y.dim;switch(1e3*e(r).length+e(n).length){case 2002:return n.length<10?y.dotMMsmall(r,n):y.dotMMbig(r,n);case 2001:return y.dotMV(r,n);case 1002:return y.dotVM(r,n);case 1001:return y.dotVV(r,n);case 1e3:return y.mulVS(r,n);case 1:return y.mulSV(r,n);case 0:return r*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},y.diag=function(r){for(var n,e,t,i=r.length,o=Array(i),a=i-1;0<=a;a--){for(t=Array(i),n=a+2,e=i-1;n<=e;e-=2)t[e]=0,t[e-1]=0;for(a<e&&(t[e]=0),t[a]=r[a],e=a-1;1<=e;e-=2)t[e]=0,t[e-1]=0;0===e&&(t[0]=0),o[a]=t}return o},y.getDiag=function(r){for(var n=Math.min(r.length,r[0].length),e=Array(n),t=n-1;1<=t;--t)e[t]=r[t][t],e[--t]=r[t][t];return 0===t&&(e[0]=r[0][0]),e},y.identity=function(r){return y.diag(y.rep([r],1))},y.pointwise=function(r,n,e){void 0===e&&(e="");for(var t,i=[],o=/\\[i\\]$/,a="",f=!1,u=0;u<r.length;u++)o.test(r[u])?a=t=r[u].substring(0,r[u].length-3):t=r[u],"ret"===t&&(f=!0),i.push(t);return i[r.length]="_s",i[r.length+1]="_k",i[r.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+a+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(f?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+e+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+n+"\\n}\\nreturn ret;",y.compile.apply(null,i)},y.pointwise2=function(r,n,e){void 0===e&&(e="");for(var t,i=[],o=/\\[i\\]$/,a="",f=!1,u=0;u<r.length;u++)o.test(r[u])?a=t=r[u].substring(0,r[u].length-3):t=r[u],"ret"===t&&(f=!0),i.push(t);return i[r.length]="var _n = "+a+".length;\\nvar i"+(f?"":", ret = Array(_n)")+";\\n"+e+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+n+"\\n}\\nreturn ret;",y.compile.apply(null,i)},y._biforeach=function r(n,e,t,i,o){if(i!==t.length-1)for(var a=t[i]-1;0<=a;a--)r("object"==typeof n?n[a]:n,"object"==typeof e?e[a]:e,t,i+1,o);else o(n,e)},y._biforeach2=function r(n,e,t,i,o){if(i===t.length-1)return o(n,e);for(var a=t[i],f=Array(a),u=a-1;0<=u;--u)f[u]=r("object"==typeof n?n[u]:n,"object"==typeof e?e[u]:e,t,i+1,o);return f},y._foreach=function r(n,e,t,i){if(t!==e.length-1)for(var o=e[t]-1;0<=o;o--)r(n[o],e,t+1,i);else i(n)},y._foreach2=function r(n,e,t,i){if(t===e.length-1)return i(n);for(var o=e[t],a=Array(o),f=o-1;0<=f;f--)a[f]=r(n[f],e,t+1,i);return a},y.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},y.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},y.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],y.mathfuns2=["atan2","pow","max","min"],y.ops1={neg:"-",not:"!",bnot:"~",clone:""},y.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){for(var t,r,n,e,i=0;i<y.mathfuns2.length;++i)t=y.mathfuns2[i],y.ops2[t]=t;for(i in y.ops2){y.ops2.hasOwnProperty(i)&&(t=y.ops2[i],n="",e=-1!==y.myIndexOf.call(y.mathfuns2,i)?(n="var "+t+" = Math."+t+";\\n",r=function(r,n,e){return r+" = "+t+"("+n+","+e+")"},function(r,n){return r+" = "+t+"("+r+","+n+")"}):(r=function(r,n,e){return r+" = "+n+" "+t+" "+e},y.opseq.hasOwnProperty(i+"eq")?function(r,n){return r+" "+t+"= "+n}:function(r,n){return r+" = "+r+" "+t+" "+n}),y[i+"VV"]=y.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),n),y[i+"SV"]=y.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),n),y[i+"VS"]=y.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),n),y[i]=y.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+i+"VV, VS = numeric."+i+"VS, SV = numeric."+i+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+e("x","y")+"\\n}\\nreturn x;\\n"),y[t]=y[i],y[i+"eqV"]=y.pointwise2(["ret[i]","x[i]"],e("ret[i]","x[i]"),n),y[i+"eqS"]=y.pointwise2(["ret[i]","x"],e("ret[i]","x"),n),y[i+"eq"]=y.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+i+"eqV, S = numeric."+i+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\'))}for(i=0;i<y.mathfuns2.length;++i)t=y.mathfuns2[i],delete y.ops2[t];for(i=0;i<y.mathfuns.length;++i)t=y.mathfuns[i],y.ops1[t]=t;for(i in y.ops1)y.ops1.hasOwnProperty(i)&&(n="",t=y.ops1[i],-1!==y.myIndexOf.call(y.mathfuns,i)&&Math.hasOwnProperty(t)&&(n="var "+t+" = Math."+t+";\\n"),y[i+"eqV"]=y.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",n),y[i+"eq"]=y.compile("x",\'if(typeof x !== "object") return \'+t+"x\\nvar i;\\nvar V = numeric."+i+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),y[i+"V"]=y.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",n),y[i]=y.compile("x",\'if(typeof x !== "object") return \'+t+"(x)\\nvar i;\\nvar V = numeric."+i+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(i=0;i<y.mathfuns.length;++i)t=y.mathfuns[i],delete y.ops1[t];for(i in y.mapreducers)y.mapreducers.hasOwnProperty(i)&&(t=y.mapreducers[i],y[i+"V"]=y.mapreduce2(t[0],t[1]),y[i]=y.compile("x","s","k",t[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+t[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+i+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+t[0]+"\\n}\\nreturn accum;\\n"))}(),y.inv=function(r){for(var n,e,t,i,o,a=y.dim(r),f=Math.abs,u=a[0],c=a[1],s=y.clone(r),m=y.identity(u),l=0;l<c;++l){for(var h=-1,d=-1,p=l;p!==u;++p)d<(o=f(s[p][l]))&&(h=p,d=o);for(e=s[h],s[h]=s[l],s[l]=e,i=m[h],m[h]=m[l],m[l]=i,r=e[l],o=l;o!==c;++o)e[o]/=r;for(o=c-1;-1!==o;--o)i[o]/=r;for(p=u-1;-1!==p;--p)if(p!==l){for(n=s[p],t=m[p],r=n[l],o=l+1;o!==c;++o)n[o]-=e[o]*r;for(o=c-1;0<o;--o)t[o]-=i[o]*r,t[--o]-=i[o]*r;0===o&&(t[0]-=i[0]*r)}}return m},y.det=function(r){var n=y.dim(r);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");for(var e,t,i,o,a,f,u,c=n[0],s=1,m=y.clone(r),l=0;l<c-1;l++){for(e=(t=l)+1;e<c;e++)Math.abs(m[e][l])>Math.abs(m[t][l])&&(t=e);for(t!==l&&(f=m[t],m[t]=m[l],m[l]=f,s*=-1),i=m[l],e=l+1;e<c;e++){for(a=(o=m[e])[l]/i[l],t=l+1;t<c-1;t+=2)u=t+1,o[t]-=i[t]*a,o[u]-=i[u]*a;t!==c&&(o[t]-=i[t]*a)}if(0===i[l])return 0;s*=i[l]}return s*m[l][l]},y.transpose=function(r){for(var n,e,t,i,o=r.length,a=r[0].length,f=Array(a),u=0;u<a;u++)f[u]=Array(o);for(n=o-1;1<=n;n-=2){for(t=r[n],e=r[n-1],u=a-1;1<=u;--u)(i=f[u])[n]=t[u],i[n-1]=e[u],(i=f[--u])[n]=t[u],i[n-1]=e[u];0===u&&((i=f[0])[n]=t[0],i[n-1]=e[0])}if(0===n){for(e=r[0],u=a-1;1<=u;--u)f[u][0]=e[u],f[--u][0]=e[u];0===u&&(f[0][0]=e[0])}return f},y.negtranspose=function(r){for(var n,e,t,i,o=r.length,a=r[0].length,f=Array(a),u=0;u<a;u++)f[u]=Array(o);for(n=o-1;1<=n;n-=2){for(t=r[n],e=r[n-1],u=a-1;1<=u;--u)(i=f[u])[n]=-t[u],i[n-1]=-e[u],(i=f[--u])[n]=-t[u],i[n-1]=-e[u];0===u&&((i=f[0])[n]=-t[0],i[n-1]=-e[0])}if(0===n){for(e=r[0],u=a-1;1<=u;--u)f[u][0]=-e[u],f[--u][0]=-e[u];0===u&&(f[0][0]=-e[0])}return f},y.norm2=function(r){return Math.sqrt(y.norm2Squared(r))},y.linspace=function(r,n,e){if(void 0===e&&(e=Math.max(Math.round(n-r)+1,1)),e<2)return 1===e?[r]:[];for(var t=Array(e),i=--e;0<=i;i--)t[i]=(i*n+(e-i)*r)/e;return t},y.getBlock=function(r,f,u){var c=y.dim(r);return function r(n,e){var t,i=f[e],o=u[e]-i,a=Array(o);if(e===c.length-1){for(t=o;0<=t;t--)a[t]=n[t+i];return a}for(t=o;0<=t;t--)a[t]=r(n[t+i],e+1);return a}(r,0)},y.setBlock=function(r,f,u,n){var c=y.dim(r);return function r(n,e,t){var i,o=f[t],a=u[t]-o;if(t===c.length-1)for(i=a;0<=i;i--)n[i+o]=e[i];for(i=a;0<=i;i--)r(n[i+o],e[i],t+1)}(r,n,0),r},y.getRange=function(r,n,e){for(var t,i,o,a=n.length,f=e.length,u=Array(a),c=a-1;-1!==c;--c)for(u[c]=Array(f),i=u[c],o=r[n[c]],t=f-1;-1!==t;--t)i[t]=o[e[t]];return u},y.blockMatrix=function(r){var n=y.dim(r);if(n.length<4)return y.blockMatrix([r]);for(var e,t,i=n[0],o=n[1],a=0,f=0,u=0;u<i;++u)a+=r[u][0].length;for(e=0;e<o;++e)f+=r[0][e][0].length;var c=Array(a);for(u=0;u<a;++u)c[u]=Array(f);var s,m,l,h,d,p=0;for(u=0;u<i;++u){for(s=f,e=o-1;-1!==e;--e)for(s-=(t=r[u][e])[0].length,l=t.length-1;-1!==l;--l)for(d=t[l],m=c[p+l],h=d.length-1;-1!==h;--h)m[s+h]=d[h];p+=r[u][0].length}return c},y.tensor=function(r,n){if("number"==typeof r||"number"==typeof n)return y.mul(r,n);var e=y.dim(r),t=y.dim(n);if(1!==e.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");for(var i,o,a,f=e[0],u=t[0],c=Array(f),s=f-1;0<=s;s--){for(i=Array(u),a=r[s],o=u-1;3<=o;--o)i[o]=a*n[o],i[--o]=a*n[o],i[--o]=a*n[o],i[--o]=a*n[o];for(;0<=o;)i[o]=a*n[o],--o;c[s]=i}return c},y.epsilon=2220446049250313e-31,y.LU=function(r,n){n=n||!1;var e,t,i,o,a,f,u,c,s,m=Math.abs,l=r.length,h=l-1,d=new Array(l);for(n||(r=y.clone(r)),i=0;i<l;++i){for(s=m((f=r[u=i])[i]),t=i+1;t<l;++t)s<(o=m(r[t][i]))&&(s=o,u=t);for((d[i]=u)!=i&&(r[i]=r[u],r[u]=f,f=r[i]),a=f[i],e=i+1;e<l;++e)r[e][i]/=a;for(e=i+1;e<l;++e){for(c=r[e],t=i+1;t<h;++t)c[t]-=c[i]*f[t],c[++t]-=c[i]*f[t];t===h&&(c[t]-=c[i]*f[t])}}return{LU:r,P:d}},y.LUsolve=function(r,n){for(var e,t,i,o,a=r.LU,f=a.length,u=y.clone(n),c=r.P,s=f-1;-1!==s;--s)u[s]=n[s];for(s=0;s<f;++s)for(t=c[s],c[s]!==s&&(o=u[s],u[s]=u[t],u[t]=o),i=a[s],e=0;e<s;++e)u[s]-=u[e]*i[e];for(s=f-1;0<=s;--s){for(i=a[s],e=s+1;e<f;++e)u[s]-=u[e]*i[e];u[s]/=i[s]}return u},y.solve=function(r,n,e){return y.LUsolve(y.LU(r,e),n)},y});\ndefine(\'core/math/qr\',["require","exports"],function(require,r){"use strict";function f(r,t,n){for(var e=r.reflectors,a=r.r,l=r.p,h=t.slice(),o=0;o<e.length;o++)!function(r,t){for(var n=r.length,e=t.length,a=0,l=0,h=e-n;h<e;h++)a+=r[h+n-e]*t[h],l+=r[h+n-e]*r[h+n-e];for(var o=a/l,h=e-n;h<e;h++)t[h]=2*o*r[h+n-e]-t[h]}(e[o],h);for(o=e.length;o<a[0].length;o++)h[o]=0;h.length=a[0].length;for(var f=Math.pow(2,-52),g=n.regularize?f*Math.abs(a[0][0])*Math.max(a.length,a[0].length):0,o=e.length-1;0<=o;o--){var i=a[o];if(Math.abs(i[o])<=g)h[o]=0;else{for(var u=o+1;u<e.length;u++)h[o]-=h[u]*i[u];h[o]/=i[o]}}for(var v,o=l.length-1;0<=o;o--){l[o]!==o&&(v=h[o],h[o]=h[l[o]],h[l[o]]=v)}return h}function n(r){var t=r.r,n=Math.min(t.length,t[0].length),e=t[0][0],a=t[n-1][n-1];return 0===e?1/0:Math.abs(e/a)}Object.defineProperty(r,"__esModule",{value:!0}),r.isNumericallyFullRank=r.conditionNumber=r.qrSolve=r.qr=void 0,r.qr=function(r,t){if(!t||!t.mutateInput){var n=r;r=Array(r.length);for(var e=0;e<n.length;e++)r[e]=n[e].slice()}for(var a=Math.min(r.length,r[0].length),l=Array(a),h=[],o=0;o<a;o++){for(var f=-1/0,g=o,i=o;i<r[o].length;i++){var u=function(r,t,n){for(var e=0;t<r.length;t++)e+=r[t][n]*r[t][n];return e}(r,o,i);f<u&&(f=u,g=i)}if((l[o]=g)!==o)for(e=0;e<r.length;e++){var v=r[e][g];r[e][g]=r[e][o],r[e][o]=v}for(var c=function(r,t,n,e){var a=Array(r.length-t);if(1===a.length)return a[0]=1,a;if(0===e){for(var l=a[0]=1;l<a.length;l++)a[l]=0;return a}var h=r[t][n]<0?-1:1;a[0]=r[t][n]+h*Math.sqrt(e);for(var o=t+1;o<r.length;o++)a[o-t]=r[o][n];return a}(r,o,o,f),i=o;i<r[o].length;i++)!function(r,t,n){for(var e=r.length,a=t.length,l=0,h=0,o=a-e;o<a;o++)l+=r[o+e-a]*t[o][n],h+=r[o+e-a]*r[o+e-a];for(var f=l/h,o=a-e;o<a;o++)t[o][n]=2*f*r[o+e-a]-t[o][n]}(c,r,i);h.push(c)}return{reflectors:h,r:r,p:l}},r.qrSolve=function(r,t,n){return(Array.isArray(t[0])?function(r,t,n){for(var e=Array(r.r[0].length),a=0;a<e.length;a++)e[a]=Array(t[0].length);for(var l=Array(t.length),h=0;h<t[0].length;h++){for(a=0;a<t.length;a++)l[a]=t[a][h];for(var o=f(r,l,n),a=0;a<o.length;a++)e[a][h]=o[a]}return e}:f)(r,t,n)},r.conditionNumber=n,r.isNumericallyFullRank=function(r){var t=Math.pow(2,-52);return Math.max(r.r.length,r.r[0].length)*t*n(r)<1}});\ndefine(\'core/math/least-squares\',["require","exports","numeric","core/math/distance","./qr"],function(require,r,N,v,G){"use strict";function L(r,e){for(var n=[],t=0;t<e;t++)n.push(r);return n}function J(r,e){for(var n=O(r,e),t=0,a=0,o=n;a<o.length;a++){var i=o[a];t+=i*i}return t/n.length}function O(r,e){return r.apply(void 0,e)}function P(r,e){for(var n=[],t=0,a=r;t<a.length;t++){var o=a[t].apply(void 0,e);n.push(o)}return n}function R(r,e){for(var n=[],t=0;t<r.length;t++)e[t]&&n.push(r[t]);return n}function k(r,e,n){for(var t=[],a=0,o=0;a<r.length;a++){var i=0;n[a]&&(i=e[o],o+=1),t.push(r[a]+i)}return t}function f(r,e,n,t){var a,o=t.maxIterations,i=t.linearSubset||L(!1,n.length),u=N.not(i),s=R(e,i),l=R(e,u),v=n,f=0,S=.001;N.any(i)&&(a={Jv:x=N.transpose(P(s,v)),F:y=G.qr(x)},h=O(r,v),v=k(v,N.neg(G.qrSolve(y,h,{regularize:!0})),i));for(var p=!1,g=J(r,v);f<o&&!p&&isFinite(g);){var h=O(r,v),d=P(l,v),M=N.transpose(d),c=void 0,E=void 0;E=a?(y=a.F,x=a.Jv,c=N.dot(d,N.sub(h,N.dot(x,G.qrSolve(y,h,{regularize:!0})))),N.dot(d,N.sub(M,N.dot(x,G.qrSolve(y,M,{regularize:!0}))))):(c=N.dot(d,h),N.dot(d,M));for(var m=v,q=!1;f<o&&!p&&!q;){f+=1;var b=N.add(E,N.diag(L(S,l.length)));m=k(v,N.neg(N.solve(b,c,!0)),u),p=N.all(N.eq(m,v));var x,y,z,I=void 0;a&&(I={Jv:x=N.transpose(P(s,m)),F:y=G.qr(x)},z=O(r,m),m=k(m,N.neg(G.qrSolve(y,z,{regularize:!0})),i));var F=J(r,m);(q=F<g)?(v=m,g=F,a=I,S*=.1):(S=Math.max(S,1e-64),S*=2)}}return{solution:v,MSE:g}}Object.defineProperty(r,"__esModule",{value:!0}),r.testOnlyExports=r.optimizeNonLinear=r.optimizeLinear=r.tryRoundingSmallParametersToZero=r.evaluateMeanSquare=void 0,r.evaluateMeanSquare=J,r.tryRoundingSmallParametersToZero=function(r,e){var n=e.solution.map(function(r){return Math.abs(r)<1e-6?0:r}),t=J(r,n);return isFinite(e.MSE)&&!isFinite(e.MSE)||t<e.MSE||e.MSE!==e.MSE+Math.pow(.5,8)*(t-e.MSE)?e:{solution:n,MSE:t}},r.optimizeLinear=function(r,e){for(var n=P(e,u=L(0,e.length)),t=G.qr(N.transpose(n),{mutateInput:!0}),a=0;a<2;a++)var o=O(r,u),i=N.neg(G.qrSolve(t,o,{regularize:!1})),u=N.add(u,i);var s=J(r,u);if(G.isNumericallyFullRank(t))return{solution:u,MSE:s};for(var l=L(0,e.length),a=0;a<2;a++)o=O(r,l),i=N.neg(G.qrSolve(t,o,{regularize:!0})),l=N.add(l,i);var v=J(r,l);return.999*v<=s?{solution:l,MSE:v}:{solution:u,MSE:s}};function S(r){for(var e=[],n=0;n<o.length;n++){for(var t=[],a=0;a<r;a++)t[a]=0===n&&1!==r?0:1===n&&1!==r?1:o[503*(n*r+a)%o.length];e.push(t)}return e}function p(r,e,n,t,a){for(var o=[],i=0,u=n;i<u.length;i++){var s=u[i];o.push({soln:f(r,e,s,a),initialGuess:s})}o.sort(function(r,e){return isNaN(r.soln.MSE)?1:isNaN(e.soln.MSE)?-1:r.soln.MSE-e.soln.MSE});for(var l=[],v=0;v<t;v++)l.push(o[v].initialGuess);return l}var o=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500];var s=[3,5,7,11,13,17,19];function g(r,e){for(var n=[],t=0;t<r.length;t++){for(var a=r[t],o=[],i=0;i<a.length;i++){var u=s[i%s.length]*t%r.length;o.push(function(r,e,n,t){if(!e)return r;if("known"!==e.type)return r;var a=e.bounds;return a[0]===-1/0&&a[1]===1/0?r:a[0]===-1/0?a[1]-Math.exp(-r):a[1]===1/0?a[0]+Math.exp(r):n/(t-1)*a[1]+(t-1-n)/(t-1)*a[0]}(a[i],e[i],u,r.length))}n.push(o)}return n}r.optimizeNonLinear=function(r,e,n){var t=(n=n||{}).linearSubset,a=n.bounds,o=n.preferredInitialGuess,i=S(e.length);a&&(i=g(i,a));var u=p(r,e,i,5,{maxIterations:3,linearSubset:t}),s=f(r,e,p(r,e,u,1,{maxIterations:60,linearSubset:t})[0],{maxIterations:250,linearSubset:t});if(!o)return s;var l=f(r,e,o,{maxIterations:100,linearSubset:t});return isFinite(l.MSE)&&(l.MSE<s.MSE||v.approx(l.MSE,s.MSE,8))?l:s},r.testOnlyExports={generateInitialGuesses:S,mapInitialGuesses:g}});\ndefine(\'core/math/builtinconstants\',[\'require\',\'core/math/parsenode/constant\',\'core/math/maybe-rational\'],function(require){"use strict";var t=require("core/math/parsenode/constant"),a=require("core/math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(a(1,1)),infty:t(1/0)}});\ndefine(\'core/math/builtinframe\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var n,r=require("core/math/builtinconstants"),t=require("core/math/parsenode/builtinfunction"),e={};for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e});\n!function(){var e,n,a,i,c,u,f,l,s,p,y,d,b,_,h,v,w,m,O,j,g,P,S,x,t={};!function(e){var o="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:{};function n(n,r){return n!==o&&("function"==typeof Object.create?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(t,e){return n[t]=r?r(t,e):e}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(t){e(n(o,n(t)))}):"object"==typeof module&&"object"==typeof module.exports?e(n(o,n(module.exports))):e(n(o))}(function(t){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])};e=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},i=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(i=(a<3?o(i):3<a?o(e,n,i):o(e,n))||i);return 3<a&&i&&Object.defineProperty(e,n,i),i},c=function(n,r){return function(t,e){r(t,e,n)}},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(t,i,c,u){return new(c=c||Promise)(function(n,e){function r(t){try{a(u.next(t))}catch(t){e(t)}}function o(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?n(t.value):((e=t.value)instanceof c?e:new c(function(t){t(e)})).then(r,o)}a((u=u.apply(t,i||[])).next())})},l=function(n,r){var o,a,i,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(i=0<(i=c.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){c.label=e[1];break}if(6===e[0]&&c.label<i[1]){c.label=i[1],i=e;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(e);break}i[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(n,c)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},s=function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||x(e,t,n)},x=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]},p=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t},b=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r},_=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},h=function(t){return this instanceof h?(this.v=t,this):new h(t)},v=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),a=[],i={};return r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||c(r,n)})})}function c(t,e){try{(n=o[t](e)).value instanceof h?Promise.resolve(n.value.v).then(u,f):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}},w=function(r){var o,t={};return e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(o=!o)?{value:h(r[e](t)),done:"return"===e}:n?n(t):t}:n}},m=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=u[c]&&function(i){return new Promise(function(t,e){var n,r,o,a;i=u[c](i),n=t,r=e,o=i.done,a=i.value,Promise.resolve(a).then(function(t){n({value:t,done:o})},r)})}}},O=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};var o=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};j=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&x(e,t,n);return o(e,t),e},g=function(t){return t&&t.__esModule?t:{default:t}},P=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},S=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},t("__extends",e),t("__assign",n),t("__rest",a),t("__decorate",i),t("__param",c),t("__metadata",u),t("__awaiter",f),t("__generator",l),t("__exportStar",s),t("__createBinding",x),t("__values",p),t("__read",y),t("__spread",d),t("__spreadArrays",b),t("__spreadArray",_),t("__await",h),t("__asyncGenerator",v),t("__asyncDelegator",w),t("__asyncValues",m),t("__makeTemplateObject",O),t("__importStar",j),t("__importDefault",g),t("__classPrivateFieldGet",P),t("__classPrivateFieldSet",S)})}();\ndefine(\'core/math/reparameterization\',["require","exports","core/math/parsenode/constant","core/math/builtinframe","tslib","core/math/distance","core/math/policy"],function(require,e,C,h,T,k,y){"use strict";function D(e,t,a){var r=e.getPolynomialCoefficients(t).map(function(e){return e.getConcreteTree(y.defaultPolicy,h)});return(a-r[0].asValue())/r[1].asValue()}function O(e,t){return e.map(function(e){return t[e]?+t[e].asValue():NaN})}Object.defineProperty(e,"__esModule",{value:!0}),e.solveForOriginalParameters=e.mapInitialGuesses=void 0,e.mapInitialGuesses=function(e,t){var a={};for(var r in e)e[r].isConstant&&(a[r]=e[r]);var n,s,o,i,l,u=t.model;switch(u.type){case"trig":for(var c=[(l=[u.amplitudeNode,u.frequencyNode,u.phaseNode].map(function(e){return+e.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()}))[0]*Math.cos(l[2]),l[0]*Math.sin(l[2]),l[1]],d=0;d<u.newParameterSymbols.length;d++)a[u.newParameterSymbols[d]]=C(c[d]);break;case"exp":if(u.intercept&&(a[u.intercept.newParameterSymbols[0]]=C(Math.log(u.intercept.sign*u.intercept.node.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()))),u.base&&(a[u.base.newParameterSymbols[0]]=C(Math.log(+u.base.node.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()))),u.shiftScale)for(var m=u.shiftScale,p=m.mulNode,f=m.addNode,b=m.newParameterSymbols,g=m.stats,c=(n=[p,f].map(function(e){return+e.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()}),o=(s=g).range,i=s.midrange,[o*n[0],n[1]+i*n[0]]),d=0;d<b.length;d++)a[b[d]]=C(c[d]);break;default:throw new Error("Unexpected model type "+u.type)}for(var r in a)t.expression.dependsOn(r)||delete a[r];return a},e.solveForOriginalParameters=function(e,t,a){e=T.__assign({},e);var r,n,s,o,i,l,u,c,d,m=t.model;switch(m.type){case"trig":for(var p=(d=O(m.newParameterSymbols,e),[k.hypot(d[0],d[1]),d[2],Math.atan2(d[1],d[0])]),f=[m.amplitudeNode,m.frequencyNode,m.phaseNode],b=0;b<f.length;b++){var g=f[b].substitute(e),h=p[b];e[N=g.getDependencies()[0]]=C(D(g,N,h))}break;case"exp":if(m.shiftScale)for(var y=m.shiftScale,P=y.mulNode,v=y.addNode,w=y.stats,S=y.newParameterSymbols,p=(i=O(S,e),u=(l=w).range,c=l.midrange,[i[0]/u,i[1]-c*i[0]/u]),f=[P,v],b=0;b<f.length;b++){g=f[b].substitute(e),h=p[b];e[N=g.getDependencies()[0]]=C(D(g,N,h))}m.intercept&&(r=m.intercept.node.getDependencies()[0],n=D(m.intercept.node,r,m.intercept.sign*Math.exp(+e[m.intercept.newParameterSymbols[0]].asValue())),e[r]=C(n)),m.base&&(s=m.base.node.getDependencies()[0],o=D(m.base.node,s,Math.exp(+e[m.base.newParameterSymbols[0]].asValue())),e[s]=C(o));break;default:throw new Error("Unimplemented model "+m.type)}for(var N,V={},M=0,x=a;M<x.length;M++){V[N=x[M]]=e[N]}return V}});\ndefine(\'core/math/parsenode/regression\',[\'require\',\'pjs\',\'./base\',\'core/math/distance\',\'core/math/builtin\',\'core/lib/label\',\'core/math/errormsg\',\'./error\',\'./optimizedregression\',\'./list\',\'./functioncall\',\'./identifier\',\'./constant\',\'./freevariable\',\'./expressionTypes\',\'core/math/types\',\'core/math/least-squares\',\'core/math/reparameterization\'],function(require){"use strict";var e=require("pjs"),r=require("./base"),p=require("core/math/distance"),v=require("core/math/builtin"),D=require("core/lib/label"),S=require("core/math/errormsg"),t=require("./error"),T=require("./optimizedregression"),V=require("./list"),n=require("./functioncall"),a=require("./identifier"),R=require("./constant"),h=require("./freevariable"),i=require("./expressionTypes"),y=require("core/math/types"),g=require("core/math/least-squares"),s=require("core/math/reparameterization"),M=s.solveForOriginalParameters,G=s.mapInitialGuesses,_=g.optimizeLinear,d=g.optimizeNonLinear,F=g.evaluateMeanSquare,o=i.Subtract;return e(r,function(e,i,r){function m(e,r,i,t){var n=r.getDependencies();for(h=0;h<n.length;h++)if(!e.validRegressionParameter(n[h]))throw S.invalidRegressionParameter(n[h]);var a=r.getCompiledFunction(n).fn;if(n.length){for(var s,o,u=r.findLinearSubset(n),l=u.every(function(e){return e}),f=[],h=0;h<n.length;h++)f.push(r.takeDerivative(n[h]).getCompiledFunction(n).fn);l?(o=g.tryRoundingSmallParametersToZero(a,_(a,f))).isLinear=!0:(s={linearSubset:u,bounds:function(e,r){for(var i=[],t=0;t<e.length;t++)i.push(r.boundDomain(e[t]));return i}(n,r),preferredInitialGuess:function(e,r,i){var t=[];r=r||{},i=i||{};for(var n=0;n<e.length;n++){var a=e[n],s=D.identifierToLatex(a);i[a]&&isFinite(i[a].asValue())?t.push(+i[a].asValue()):r.hasOwnProperty(s)&&isFinite(r[s])?t.push(+r[s].asValue()):t.push(1)}return t}(n,i,t)},(o=g.tryRoundingSmallParametersToZero(a,d(a,f,s))).isLinear=!1)}else o={solution:[],MSE:F(a,[]),isLinear:!0};return o}function L(e,r){for(var i={},t=r.getDependencies(),n=0;n<t.length;n++)i[t[n]]=R(e.solution[n]);return i}function c(e,r){var i=e.length,t=e[0],n=r[0],a=e[i-1],s=r[i-1];if(isFinite(t)&&isFinite(a)&&isFinite(n)&&isFinite(s)&&s-n!=0){var o=a-t;if(0!=o){for(var u=1;u<i-1;u++){var l=e[u],f=r[u],h=(s*(l-t)+n*(a-l))/o;if(!p.approx(f,h,5))return}return 1}}}e.init=function(e,r){i.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof a,this._logLhs=n("ln",[e]),this._rhs=r,this._difference=o([e,r]),this._logDifference=o([n("ln",[e]),n("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var r=D.latexToIdentifier(this.userData.residualVariable);if(!e[r])return r}for(var i,t=this.getDependencies(),n=0;n<t.length;n++){var a=t[n].match(/_(.*)/);if(a&&!e[i="e_"+a[1]])return i}for(var s=1;;){if(!e[i="e_"+s])return i;s++}},e.getRHSModel=function(e,r,i){for(var t,n,a=this._rhs.getDependencies(),s=0;s<a.length;s++){var o=a[s];if(r[o]&&r[o].tryGetConcreteTree){var u=r[o].tryGetConcreteTree(e,r);if(!u.isError&&u.valueType===y.ListOfNumber){if(void 0!==t){t=void 0;break}0===u.getDependencies().length&&(t=o,n=u)}}}var l=Object.create(r);void 0!==t&&(l[t]=h(this.tmpVar()));var f=this._rhs.tryGetConcreteTree(e,l);return{node:f,substituted:f.isError?f:f.substitute(i),listNode:n,isValid:void 0!==t}},e.computeStatistics=function(e,r,i,t,n,a){if(t.getDependencies().length)throw S.optimizationError();var s=O(e,t);if(!isFinite(s))throw S.optimizationError();if(0<r.getDependencies().length)return{RMSE:Math.sqrt(s)};var o=y.isList(r.valueType)?v.varp(r.asValue()):0;if(r.getDependencies().length||!isFinite(o)||o<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(s)};var u,l,f=1-s/o;if(i.isValid){var h=[],c=[],g=n&&(a===N.LINLOG||a===N.LOGLOG);V.eachArgs(e,[i.listNode,r],function(e){h.push(g?Math.log(e[0].asValue()):+e[0].asValue()),c.push(+e[1].asValue())});var d=v.corr(h,c);if(p.approx((u=h,l=c,_(function(e,r){for(var i=[],t=0;t<u.length;t++)i.push(l[t]-(e*u[t]+r));return i},[function(){return u.map(function(e){return-e})},function(){return u.map(function(){return-1})}],[0,0])).MSE,s,8))return{r:d,rsquared:d*d}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,r){var i,t=this._rhs.getDependencies();for(var n in r)if(r.hasOwnProperty(n)&&r[n].concreteTree.isTable&&r[n].concreteTree.columns[0]){var a=r[n].rawTree.columns;if(a&&a.length){var s=a[0].getExports();if(1===s.length&&-1!==t.indexOf(s[0])){for(var o=1;o<a.length;o++)if(-1!==a[o].getDependencies().indexOf(e))return;i=i||n}}}return i||void 0};var N={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};function b(e,r,i,t){var n=Object.create(i);for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);return V.wrap(r.getConcreteTree(e,n))}function O(e,r){var i=0;return r.eachElement(e,function(e){var r=e.asValue();i+=r*r}),i/r.length}function E(e,r,i,t,n){var a=i.reparameterizeRegression();if(!a||0===a.length)return{parameters:L(h=m(e,i=i.deriveRegressionRestrictions(),t,n),i),isLinear:h.isLinear,parameterWarning:!1};for(var s=i.getDependencies(),o=1/0,u={},l=!1,f=0;f<a.length;f++){var h,c=a[f],g=c.expression;if((h=m(e,g=g.deriveRegressionRestrictions(),G(t,c),G(n,c))).MSE<o){var d=L(h,g),p=M(d,c,s),v=O(e,b(e,i.substitute(p),r,p));if(u&&(!isFinite(v)||o<=v)){isFinite(v)||(l=!0);continue}o=h.MSE,u=p}}return{parameters:u,isLinear:!1,parameterWarning:l}}e.linearizingTransformation=function(e,r,i){if(!this.isLhsSimple)return N.NONE;if(!i.isValid)return N.NONE;var t=i.substituted;if(t.isError)return N.NONE;if(t.valueType!==y.Number)return N.NONE;var n=t.getDependencies();if(1!==n.length)return N.NONE;if(isFinite(i.node.polynomialOrder(n[0])))return N.NONE;var a=t.getCompiledFunction(n).fn,s=i.listNode;if(t.valueType!==y.Number)return N.NONE;var o=s.mapElements(e,function(e){return+e.asValue()});if(o.length<3)return N.NONE;o.sort(function(e,r){return e-r});var u=o.map(a),l=u.map(Math.log),f=o.map(Math.log),h=!0;return V.wrap(r).eachElement(e,function(e){isFinite(Math.log(+e.asValue()))||(h=!1)}),c(o,l)&&h?N.LOGLIN:c(f,l)&&h?N.LOGLOG:c(f,u)?N.LINLOG:N.NONE},e.optimize=function(e,r,i,t,n){var a=this._lhs.getConcreteTree(e,r),s=this._rhs.getConcreteTree(e,r);this.typeCheck(e,[a,s]);var o,u,l,f,h=function(e){var r={};for(var i in e)r[i]=R(e[i]);return r}(this.userData.regressionParameters),c=E(e,r,V.wrap(this._difference.getConcreteTree(e,r)),h,t),g=c.parameters,d=c.isLinear,p=this.getRHSModel(e,r,g),v=b(e,this._difference,r,g),m=this.linearizingTransformation(e,a,p);f=!this.userData.isLogModeRegression||m!==N.LOGLIN&&m!==N.LOGLOG?this.computeStatistics(e,a,p,v,this.userData.isLogModeRegression,m):(o=this._logDifference.getConcreteTree(e,r),u=this._logLhs.getConcreteTree(e,r),g=(c=E(e,r,o,h,t)).parameters,d=c.isLinear,p=this.getRHSModel(e,r,g),v=b(e,this._difference,r,g),l=b(e,this._logDifference,r,g),this.computeStatistics(e,u,p,l,this.userData.isLogModeRegression,m));var L=this.chooseResidualVariable(i),O=this.getResidualSuggestionId(L,n);return this.userData.residualVariable=D.identifierToLatex(L),T(g,v,f,p.substituted,{isModelValid:p.isValid,residualVariable:L,residualSuggestionId:O,shouldSuggestLogMode:m!==N.NONE,isLinear:d,parameterWarning:c.parameterWarning})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){return e instanceof t?e:S.parseError()}},e.exportTo=function(e,r,i){if(!r.isError){for(var t in r.parameters)r.parameters.hasOwnProperty(t)&&(e.assignmentForbidden(t)||(i[t]=i[t]?S.multiplyDefined(t):r.parameters[t]));e.assignmentForbidden(r.residualVariable)||(i[r.residualVariable]=r.residuals)}},e.getSliderVariables=function(){return[]}})});\ndefine(\'core/math/parsenode/image\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(i,e,t,h){i.isImage=!0,i.init=function(i,t){e.init.call(this),this.center=i.center,this.radianAngle=i.radianAngle,this.width=i.width,this.height=i.height,this.opacity=i.opacity,this.moveStrategy=t,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})});\ndefine(\'core/math/parsenode/simulation\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(i,n,t,s){i.isSimulation=!0,i.init=function(i){n.init.call(this),this.fps=i,this.mergeDependencies(this.fps)}})});\ndefine(\'core/math/parsenode/slider\',[\'require\',\'pjs\',\'./assignment\',\'./identifier\'],function(require){"use strict";var i=require("pjs"),n=require("./assignment"),r=require("./identifier");return i(n,function(i,e,s,t){i.isSlider=!0,i.init=function(i,s){e.init.call(this,r(i._symbol),i._expression),this.setInputSpan(i._inputSpan),this.sliderAssignment=i,this.sliderMin=s.sliderMin,this.sliderMax=s.sliderMax,this.sliderSoftMin=s.sliderSoftMin,this.sliderSoftMax=s.sliderSoftMax,this.sliderStep=s.sliderStep,this.sliderIsPlayingOnce=s.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},i.shouldPromoteToSlider=function(i){return!1},i.asAssignment=function(){return n(this._symbol,this._expression)}})});\ndefine(\'core/math/parsenode/table\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(t,e){t.init=function(t){e.init.call(this),this.columns=t,this._exports=[],this.mergeDependencies.apply(this,t);for(var n=0;n<t.length;n++)Array.prototype.push.apply(this._exports,t[n].getExports())},t.exportPenalty=1,t.isTable=!0,t.exportTo=function(t,n,e){for(var s=0;s<this.columns.length;s++){var r,i=this.columns[s].getExports();i.length&&(r=i[0],t.assignmentForbidden(r)||e[r]||(n.isError?e[r]=n:this.columns[s].exportTo(t,n.columns[s],e)))}},t.getAllIds=function(){return this.columns.map(function(t){return t.header.userData.id})}})});\ndefine(\'core/math/parsenode/tablecolumn\',[\'require\',\'pjs\',\'./base\',\'./list\',\'./constant\',\'./identifier\'],function(require){"use strict";var e=require("pjs"),r=require("./base"),o=require("./list"),t=require("./constant"),n=require("./identifier");return e(r,function(e,i){function s(e){return e.isError?t(NaN):e}e.init=function(e,t,n){i.init.call(this),this.header=e,this.length=t,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof n?[this.header._symbol]:[]},e.isDiscrete=function(e){return!this.continuousConcreteTree||1!==this.continuousConcreteTree.getDependencies().length||1!==e.header.getDependencies().length||this.continuousConcreteTree.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,n){if(e.length){var i=e[0];if(t.isError)n[i]=t;else try{n[i]=o(t.values.map(s))}catch(e){if(!(e instanceof r))throw e;n[i]=e}}},e.exportTo=function(e,t,n){var i=this.getLegalExports(e);this._exportSymbolsTo(i,t,n)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})});\ndefine(\'core/math/parsenode/solvedequation\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(e,n){e.init=function(e,i,t){n.init.call(this),this._symbol=e,this._expression=i,this.mergeDependencies(i),this.branchMultiplier=t},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})});\ndefine(\'core/math/parsenode/seed\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,i){t.init=function(t){"string"!=typeof t&&(t=""+t),this._stringValue=t,i.init.call(this,[])},t.isString=!0,t.getEvalStrings=function(){return{statements:[],expression:JSON.stringify(this.asValue())}},t.asValue=function(){return this._stringValue}})});\ndefine(\'core/math/parsenode/extendseed\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t,e){s.init.call(this,e),this.seed=e[0],this.userSeed=e[1],this.tag=t},t.getEvalStrings=function(){var t=this.seed.getEvalStrings(),e=this.userSeed.getEvalStrings(),s=[];return Array.prototype.push.apply(s,t.statements),Array.prototype.push.apply(s,e.statements),{statements:s,expression:"("+t.expression+") + \'::"+this.tag+"\' + ("+e.expression+")"}},t.asValue=function(){return this.seed.asValue()+"::"+this.tag+this.userSeed.asValue()},t.copyWithArgs=function(t){return new this.constructor(this.tag,t)}})});\ndefine(\'core/math/parsenode/rgbcolor\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(s,a,t){s.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue(),+this.args[2].asValue()]},s.asValue=s.asArray,s.getEvalStrings=function(){for(var s=[],a=[],t=0;t<this.args.length;t++){var r=this.args[t].getEvalStrings(),s=s.concat(r.statements);a.push(r.expression)}return{statements:s,expression:"["+a.join(",")+"]"}}})});\ndefine(\'parsenodes\',[\'require\',\'core/math/parsenode/expressionTypes\',\'core/math/parsenode/base\',\'core/math/parsenode/expression\',\'core/math/parsenode/scalarexpression\',\'core/math/parsenode/error\',\'core/math/parsenode/constant\',\'core/math/parsenode/mixednumber\',\'core/math/parsenode/identifier\',\'core/math/parsenode/ans\',\'core/math/parsenode/freevariable\',\'core/math/parsenode/dummyindex\',\'core/math/parsenode/list\',\'core/math/parsenode/range\',\'core/math/parsenode/broadcast\',\'core/math/parsenode/listaccess\',\'core/math/parsenode/dotaccess\',\'core/math/parsenode/dotaccessexponent\',\'core/math/parsenode/orderedpair\',\'core/math/parsenode/movablepoint\',\'core/math/parsenode/orderedpairaccess\',\'core/math/parsenode/polygon\',\'core/math/parsenode/basecomparator\',\'core/math/parsenode/comparator\',\'core/math/parsenode/doubleinequality\',\'core/math/parsenode/repeatedoperator\',\'core/math/parsenode/sum\',\'core/math/parsenode/product\',\'core/math/parsenode/integral\',\'core/math/parsenode/functioncall\',\'core/math/parsenode/seededfunctioncall\',\'core/math/parsenode/functionexponent\',\'core/math/parsenode/functionfactorial\',\'core/math/parsenode/prime\',\'core/math/parsenode/piecewise\',\'core/math/parsenode/derivative\',\'core/math/parsenode/builtinfunction\',\'core/math/parsenode/nativefunction\',\'core/math/parsenode/typedfunction\',\'core/math/parsenode/reducerfunction\',\'core/math/parsenode/parametrizedreducerfunction\',\'core/math/parsenode/doublereducerfunction\',\'core/math/parsenode/toplevelfunction\',\'core/math/parsenode/distribution\',\'core/math/parsenode/histogram\',\'core/math/parsenode/object3d\',\'core/math/parsenode/dotplot\',\'core/math/parsenode/boxplot\',\'core/math/parsenode/ttest\',\'core/math/parsenode/independent-ttest\',\'core/math/parsenode/stats\',\'core/math/parsenode/assignment\',\'core/math/parsenode/functiondefinition\',\'core/math/parsenode/equation\',\'core/math/parsenode/regression\',\'core/math/parsenode/image\',\'core/math/parsenode/simulation\',\'core/math/parsenode/slider\',\'core/math/parsenode/table\',\'core/math/parsenode/tablecolumn\',\'core/math/parsenode/solvedequation\',\'core/math/parsenode/optimizedregression\',\'core/math/parsenode/seed\',\'core/math/parsenode/extendseed\',\'core/math/parsenode/rgbcolor\'],function(require){"use strict";var e=require("core/math/parsenode/expressionTypes"),o={Base:require("core/math/parsenode/base"),Expression:require("core/math/parsenode/expression"),ScalarExpression:require("core/math/parsenode/scalarexpression"),Error:require("core/math/parsenode/error"),Constant:require("core/math/parsenode/constant"),MixedNumber:require("core/math/parsenode/mixednumber"),Identifier:require("core/math/parsenode/identifier"),Ans:require("core/math/parsenode/ans"),FreeVariable:require("core/math/parsenode/freevariable"),DummyIndex:require("core/math/parsenode/dummyindex"),List:require("core/math/parsenode/list"),Range:require("core/math/parsenode/range"),Broadcast:require("core/math/parsenode/broadcast"),ListAccess:require("core/math/parsenode/listaccess"),DotAccess:require("core/math/parsenode/dotaccess"),DotAccessExponent:require("core/math/parsenode/dotaccessexponent"),OrderedPair:require("core/math/parsenode/orderedpair"),MovablePoint:require("core/math/parsenode/movablepoint"),OrderedPairAccess:require("core/math/parsenode/orderedpairaccess"),Polygon:require("core/math/parsenode/polygon"),BaseComparator:require("core/math/parsenode/basecomparator"),Comparator:require("core/math/parsenode/comparator"),DoubleInequality:require("core/math/parsenode/doubleinequality"),RepeatedOperator:require("core/math/parsenode/repeatedoperator"),Sum:require("core/math/parsenode/sum"),Product:require("core/math/parsenode/product"),Integral:require("core/math/parsenode/integral"),FunctionCall:require("core/math/parsenode/functioncall"),SeededFunctionCall:require("core/math/parsenode/seededfunctioncall"),FunctionExponent:require("core/math/parsenode/functionexponent"),FunctionFactorial:require("core/math/parsenode/functionfactorial"),Prime:require("core/math/parsenode/prime"),Piecewise:require("core/math/parsenode/piecewise"),Derivative:require("core/math/parsenode/derivative"),BuiltInFunction:require("core/math/parsenode/builtinfunction"),NativeFunction:require("core/math/parsenode/nativefunction"),TypedFunction:require("core/math/parsenode/typedfunction"),ReducerFunction:require("core/math/parsenode/reducerfunction"),ParametrizedReducerFunction:require("core/math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:require("core/math/parsenode/doublereducerfunction"),TopLevelFunction:require("core/math/parsenode/toplevelfunction"),Distribution:require("core/math/parsenode/distribution"),Histogram:require("core/math/parsenode/histogram"),Object3D:require("core/math/parsenode/object3d"),DotPlot:require("core/math/parsenode/dotplot"),BoxPlot:require("core/math/parsenode/boxplot"),TTest:require("core/math/parsenode/ttest"),IndependentTTest:require("core/math/parsenode/independent-ttest"),Stats:require("core/math/parsenode/stats"),Assignment:require("core/math/parsenode/assignment"),FunctionDefinition:require("core/math/parsenode/functiondefinition"),Equation:require("core/math/parsenode/equation"),Regression:require("core/math/parsenode/regression"),Image:require("core/math/parsenode/image"),Simulation:require("core/math/parsenode/simulation"),Slider:require("core/math/parsenode/slider"),Table:require("core/math/parsenode/table"),TableColumn:require("core/math/parsenode/tablecolumn"),SolvedEquation:require("core/math/parsenode/solvedequation"),OptimizedRegression:require("core/math/parsenode/optimizedregression"),Seed:require("core/math/parsenode/seed"),ExtendSeed:require("core/math/parsenode/extendseed"),RGBColor:require("core/math/parsenode/rgbcolor")};for(var r in e)o[r]=e[r];for(var a in o)o.hasOwnProperty(a)&&"Comparator"!==a&&"BuiltInFunction"!==a&&(o[a].prototype.type=a);for(var t in o.Comparator)o.Comparator.hasOwnProperty(t)&&(o.Comparator[t].prototype.type="Comparator[\'"+t+"\']");for(var n in o.BuiltInFunction)o.BuiltInFunction.hasOwnProperty(n)&&(o.BuiltInFunction[n].prototype.type="BuiltInFunction[\'"+n+"\']");return o});\ndefine(\'core/math/parser/char-codes\',["require","exports"],function(require,e){"use strict";function t(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}Object.defineProperty(e,"__esModule",{value:!0}),e.isWhitespace=e.isSingleQuote=e.isDot=e.isBackslash=e.isLetter=e.isUpperCaseLetter=e.isLowerCaseLetter=e.isDigit=void 0,e.isDigit=function(e){return 48<=e&&e<=57},e.isLowerCaseLetter=t,e.isUpperCaseLetter=i,e.isLetter=function(e){return t(e)||i(e)},e.isBackslash=function(e){return 92===e},e.isDot=function(e){return 46===e},e.isSingleQuote=function(e){return 39===e},e.isWhitespace=function(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}});\ndefine(\'core/math/parser/latex-lexer\',["require","exports","./char-codes","./input-span"],function(require,e,o,p){"use strict";function s(e,t,n){return{type:e,span:t,val:n}}function t(e,t,n){for(;o.isWhitespace(e.charCodeAt(t));)t+=1;return{input:e,prevSpan:n,pos:t,token:function(e,t){var n=t;if(t>=e.length)return s("End",p.emptySpanAt(e,t),"");var r=e.charCodeAt(t);{if(o.isDigit(r))return s("Digit",a=p.Span(e,n,t+1),e.charAt(n));if(o.isLetter(r))return s("Letter",a=p.Span(e,n,t+1),e.charAt(n));if(o.isBackslash(r)){if(t+=1,o.isLetter(e.charCodeAt(t))){for(;o.isLetter(e.charCodeAt(t));)t+=1;var a=p.Span(e,n,t),i=p.slice(a);return s(u[i]||"Cmd",a,i)}t+=1;a=p.Span(e,n,t),i=p.slice(a);return s("EscapedSymbol",a,i)}if(o.isSingleQuote(r)){for(t+=1;o.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;a=p.Span(e,n,t),i=p.slice(a);return s("Primes^",a,i)}a=p.Span(e,n,t),i=p.slice(a);return s("Primes",a,i)}a=p.Span(e,n,t+1),i=e.charAt(n);return s(c[i]||"Symbol",a,i)}}(e,t)}}function n(e){return t(e.input,e.token.span.end,e.token.span)}function r(e){return e.token}Object.defineProperty(e,"__esModule",{value:!0}),e.isDone=e.isAt=e.eat=e.peek=e.advance=e.lex=e.LatexToken=e.spanStates=void 0,e.spanStates=function(e,t){return p.joinSpans(e.token.span,t.prevSpan)},e.LatexToken=s,e.lex=function(e){return t(e,0,p.emptySpanAt(e,0))},e.advance=n,e.peek=r,e.eat=function(e,t){if(r(e).type!==t)throw"Parse Error: expected "+t+".";return n(e)},e.isAt=function(e,t){return r(e).type===t},e.isDone=function(e){return e.pos>=e.input.length};var u={"\\\\left":"Left","\\\\right":"Right","\\\\sqrt":"Sqrt","\\\\frac":"Frac","\\\\operatorname":"OperatorName"},c={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}});\ndefine(\'core/math/parser/latex-node\',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Symbol=r.OperatorName=r.LeftRight=r.SupSub=r.Frac=r.Sqrt=r.Group=void 0,r.Group=function(r,t){return{type:"Group",span:r,args:t}},r.Sqrt=function(r,t,e){return{type:"Sqrt",span:r,optArg:t,arg:e}},r.Frac=function(r,t,e){return{type:"Frac",span:r,num:t,den:e}},r.SupSub=function(r,t,e,n){return{type:"SupSub",span:r,sup:t,sub:e,nprimes:n}},r.LeftRight=function(r,t,e,n){return{type:"LeftRight",span:r,left:t,right:e,arg:n}},r.OperatorName=function(r,t){return{type:"OperatorName",span:r,arg:t}},r.Symbol=function(r,t){return{type:"Symbol",span:r,val:t}}});\ndefine(\'core/math/parser/latex-parser\',["require","exports","./latex-lexer","./input-span","./latex-node"],function(require,e,v,o,f){"use strict";function p(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function d(e,r){return{state:e,tree:r}}function u(e,r){var a=e,t=[];e:for(;!v.isDone(e);){var s=v.peek(e);switch(s.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===s.type&&r)break e;var c,n;if(e=(n=l(e)).state,"Group"===(c=n.tree).type)for(var o=0,p=c.args;o<p.length;o++){var u=p[o];t.push(u)}else t.push(c);break;case"}":case"Right":case"End":break e;default:throw"Unexpected token type "+s.type+"."}}var i=v.spanStates(a,e);return d(e,f.Group(i,t))}function l(e){var r=v.peek(e);switch(r.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return d(e=v.advance(e),r);case"[":case"]":return d(e=v.advance(e),f.Symbol(r.span,r.val));case"{":var a,t;return e=(t=u(e=v.advance(e),!1)).state,a=t.tree,d(e=v.eat(e,"}"),a);case"^":case"_":case"Primes":case"Primes^":return function(e){var r,a,t,s,c,n=e,o=0;e:for(;!v.isDone(e);){var p=v.peek(e);switch(p.type){case"^":if(e=v.advance(e),s)throw"Parse Error: double superscript.";r=i(e,p),e=r.state,s=r.tree;break;case"_":if(e=v.advance(e),c)throw"Parse Error: double subscript.";a=i(e,p),e=a.state,c=a.tree;break;case"Primes":if(e=v.advance(e),0<o)throw"Parse Error: double primes.";o=p.val.length;break;case"Primes^":if(e=v.advance(e),0<o)throw"Parse Error: double primes.";if(s)throw"Parse Error: double superscript";o=p.val.length-1,t=i(e,p),e=t.state,s=t.tree;break;default:break e}}var u=v.spanStates(n,e);return d(e,f.SupSub(u,s,c,o))}(e);case"Left":return function(e){var r,a=e;e=v.eat(e,"Left");var t,s=v.peek(e);e=v.advance(e),r=u(e,!1),e=r.state,t=r.tree,e=v.eat(e,"Right");var c=v.peek(e);e=v.advance(e);var n=v.spanStates(a,e);return d(e,f.LeftRight(n,s,c,t))}(e);case"Frac":return function(e){var r,a,t,s,c=e,n=v.peek(e);e=v.eat(e,"Frac"),r=i(e,n),e=r.state,t=r.tree,a=i(e,n),e=a.state,s=a.tree;var o=v.spanStates(c,e);return d(e,f.Frac(o,t,s))}(e);case"Sqrt":return function(e){var r,a,t,s,c=e,n=v.peek(e);e=v.eat(e,"Sqrt"),v.isAt(e,"[")&&(r=function(e){var r,a;return e=v.eat(e,"["),r=u(e,!0),e=r.state,a=r.tree,d(e=v.eat(e,"]"),a)}(e),e=r.state,t=r.tree);a=i(e,n),e=a.state,s=a.tree;var o=v.spanStates(c,e);return d(e,f.Sqrt(o,t,s))}(e);case"OperatorName":return function(e){var r,a,t=e,s=v.peek(e);e=v.eat(e,"OperatorName"),r=i(e,s),e=r.state,a=r.tree;var c=v.spanStates(t,e);return d(e,f.OperatorName(c,a))}(e);case"}":case"Right":throw"Parse Error: unexpected "+r.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+r.type+"."}}function i(e,r){var a,t,s=p(r.type);if(s<=0)throw new Error("Programming Error: greediness must be greater than 0.");var c=p(v.peek(e).type);if(0<c&&c<=s){var n=o.slice(r.span);throw"Parse Error: can\'t use "+o.slice(v.peek(e).span)+" as argument of "+n+". Use {}."}return e=(a=l(e)).state,"Group"!==(t=a.tree).type&&(t=f.Group(t.span,[t])),d(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0,e.parse=function(e){var r=u(v.lex(e),!1),a=r.state,t=r.tree;if(!v.isDone(a))throw"Parse error: unexpected "+o.slice(v.peek(a).span)+".";return t}});\ndefine(\'core/math/parser/command-aliases\',["require","exports","./char-codes"],function(require,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.translateCmd=void 0;var c={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",sgn:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile",arsinh:"arcsinh",arcosh:"arccosh",artanh:"arctanh",arcsch:"arccsch",arsech:"arcsech",arcoth:"arccoth"};e.translateCmd=function(e){for(var t=0;s.isBackslash(e.charCodeAt(t));)t+=1;return 0<t&&(e=e.slice(t)),c[e]||e}});\ndefine(\'core/math/parser/surface-node\',["require","exports","./command-aliases"],function(require,n,t){"use strict";function a(n){if("Subscript"===n.type){if("Alphanumeric"!==n.args[1].type)return!1;n=n.args[0]}switch(n.type){case"Cmd":case"Letter":return!0;default:return!1}}Object.defineProperty(n,"__esModule",{value:!0}),n.unwrapSeq=n.isDerivative=n.isSuperscriptedIdentifier=n.isIdentifier=n.MixedNumber=n.Alphanumeric=n.Cmd=n.Decimal=n.Letter=n.Juxt=n.PercentOf=n.Dot=n.Ellipsis=n.Colon=n.EmptyRangeEnd=n.EmptyPiecewise=n.Piecewise=n.Product=n.Sum=n.EmptyIntegral=n.Integral=n.Derivative=n.Frac=n.Nthroot=n.Sqrt=n.Seq=n.Prime=n.Superscript=n.Subscript=n.Pipes=n.List=n.Paren=n.Index=n.ImplicitCall=n.Call=n.Bang=n.Div=n.Mul=n.Sub=n.Add=n.Neg=n.Pos=n.Tilde=n.InequalityChain=n.TrailingInequalityPiece=n.Inequality=n.Equals=void 0,n.Equals=function(n,e){return{type:"Equals",span:n,args:e}},n.Inequality=function(n,e,t){return{type:"Inequality",span:n,symbol:e,args:t}},n.TrailingInequalityPiece=function(n,e,t){return{type:"TrailingInequalityPiece",span:n,symbol:e,args:t}},n.InequalityChain=function(n,e,t){return{type:"InequalityChain",span:n,first:e,chain:t}},n.Tilde=function(n,e){return{type:"Tilde",span:n,args:e}},n.Pos=function(n,e){return{type:"Pos",span:n,args:e}},n.Neg=function(n,e){return{type:"Neg",span:n,args:e}},n.Add=function(n,e){return{type:"Add",span:n,args:e}},n.Sub=function(n,e){return{type:"Sub",span:n,args:e}},n.Mul=function(n,e){return{type:"Mul",span:n,args:e}},n.Div=function(n,e){return{type:"Div",span:n,args:e}},n.Bang=function(n,e){return{type:"Bang",span:n,args:e}},n.Call=function(n,e){return{type:"Call",span:n,args:e}},n.ImplicitCall=function(n,e){return{type:"ImplicitCall",span:n,args:e}},n.Index=function(n,e){return{type:"Index",span:n,args:e}},n.Paren=function(n,e){return{type:"Paren",span:n,args:e}},n.List=function(n,e){return{type:"List",span:n,args:e}},n.Pipes=function(n,e){return{type:"Pipes",span:n,args:e}},n.Subscript=function(n,e){return{type:"Subscript",span:n,args:e}},n.Superscript=function(n,e){return{type:"Superscript",span:n,args:e}},n.Prime=function(n,e,t){return{type:"Prime",span:n,nprimes:e,args:t}},n.Seq=function(n,e){return{type:"Seq",span:n,args:e}},n.Sqrt=function(n,e){return{type:"Sqrt",span:n,args:e}},n.Nthroot=function(n,e){return{type:"Nthroot",span:n,args:e}},n.Frac=function(n,e){return{type:"Frac",span:n,args:e}},n.Derivative=function(n,e){return{type:"Derivative",span:n,args:e}},n.Integral=function(n,e){return{type:"Integral",span:n,args:e}},n.EmptyIntegral=function(n,e){return{type:"EmptyIntegral",span:n,args:e}},n.Sum=function(n,e){return{type:"Sum",span:n,args:e}},n.Product=function(n,e){return{type:"Product",span:n,args:e}},n.Piecewise=function(n,e){return{type:"Piecewise",span:n,args:e}},n.EmptyPiecewise=function(n){return{type:"EmptyPiecewise",span:n}},n.EmptyRangeEnd=function(n){return{type:"EmptyRangeEnd",span:n}},n.Colon=function(n,e){return{type:"Colon",span:n,args:e}},n.Ellipsis=function(n,e){return{type:"Ellipsis",span:n,args:e}},n.Dot=function(n,e){return{type:"Dot",span:n,args:e}},n.PercentOf=function(n,e){return{type:"PercentOf",span:n,args:e}},n.Juxt=function(n,e){return{type:"Juxt",span:n,args:e}},n.Letter=function(n,e){return{type:"Letter",span:n,val:e}},n.Decimal=function(n,e){return{type:"Decimal",span:n,val:e}},n.Cmd=function(n,e){return{type:"Cmd",span:n,val:t.translateCmd(e)}},n.Alphanumeric=function(n,e){return{type:"Alphanumeric",span:n,val:e}},n.MixedNumber=function(n,e,t,r){return{type:"MixedNumber",span:n,whole:e,num:t,den:r}},n.isIdentifier=a,n.isSuperscriptedIdentifier=function(n){return"Superscript"===n.type&&a(n.args[0])},n.isDerivative=function(n,e){if("Letter"!==n.type||"d"!==n.val)return!1;if("Juxt"!==e.type)return!1;var t=e.args,r=t[0],i=t[1];return"Letter"===r.type&&"d"===r.val&&a(i)},n.unwrapSeq=function(n){return"Seq"===n.type?n.args:[n]}});\ndefine(\'core/math/parser/surface-node-error\',["require","exports"],function(require,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdjacentNumbers=n.FractionEmpty=n.FractionMissingDenominator=n.FractionMissingNumerator=n.DifferentialWithSuperscript=n.IntegralMissingDifferential=n.DerivativeMissingBody=n.IntegralMissingBody=n.ProductMissingBody=n.SumMissingBody=n.IntegralMissingBound=n.MissingBound=n.ProductMissingBound=n.SumMissingBound=n.UnexpectedPrime=n.SuperscriptWithPrime=n.PrimeWithoutParen=n.PercentMissingOf=n.FunctionMissingArgument=n.UnexpectedSubscript=n.InvalidSubscript=n.InvalidOperatorName=n.UnrecognizedSymbol=n.UnexpectedDifferential=n.UnexpectedCloseDelimiter=n.MissingCloseDelimiter=n.UnaryOperatorMissingLeft=n.UnaryOperatorMissingRight=n.BinaryOperatorMissingLeft=n.BinaryOperatorMissingRight=n.UnexpectedEnd=n.EmptyRadicalIndex=n.EmptyPipe=n.EmptySquareBracket=n.EmptyRadical=n.EmptySuperscript=n.EmptySubscript=n.EmptyGroup=n.EmptyInput=n.UnexpectedParseError=n.Err=void 0,n.Err=function(n,t){return{type:"Err",span:n,error:t}},n.UnexpectedParseError=function(){return{type:"UnexpectedParseError"}},n.EmptyInput=function(){return{type:"EmptyInput"}},n.EmptyGroup=function(){return{type:"EmptyGroup"}},n.EmptySubscript=function(){return{type:"EmptySubscript"}},n.EmptySuperscript=function(){return{type:"EmptySuperscript"}},n.EmptyRadical=function(){return{type:"EmptyRadical"}},n.EmptySquareBracket=function(){return{type:"EmptySquareBracket"}},n.EmptyPipe=function(){return{type:"EmptyPipe"}},n.EmptyRadicalIndex=function(){return{type:"EmptyRadicalIndex"}},n.UnexpectedEnd=function(){return{type:"UnexpectedEnd"}},n.BinaryOperatorMissingRight=function(n){return{type:"BinaryOperatorMissingRight",val:n}},n.BinaryOperatorMissingLeft=function(n){return{type:"BinaryOperatorMissingLeft",val:n}},n.UnaryOperatorMissingRight=function(n){return{type:"UnaryOperatorMissingRight",val:n}},n.UnaryOperatorMissingLeft=function(n){return{type:"UnaryOperatorMissingLeft",val:n}},n.MissingCloseDelimiter=function(n,t){return{type:"MissingCloseDelimiter",open:n,close:t}},n.UnexpectedCloseDelimiter=function(n,t){return{type:"UnexpectedCloseDelimiter",open:n,close:t}},n.UnexpectedDifferential=function(){return{type:"UnexpectedDifferential"}},n.UnrecognizedSymbol=function(n){return{type:"UnrecognizedSymbol",val:n}},n.InvalidOperatorName=function(n){return{type:"InvalidOperatorName",val:n}},n.InvalidSubscript=function(n){return{type:"InvalidSubscript",val:n}},n.UnexpectedSubscript=function(n){return{type:"UnexpectedSubscript",base:n}},n.FunctionMissingArgument=function(n){return{type:"FunctionMissingArgument",val:n}},n.PercentMissingOf=function(){return{type:"PercentMissingOf"}},n.PrimeWithoutParen=function(){return{type:"PrimeWithoutParen"}},n.SuperscriptWithPrime=function(){return{type:"SuperscriptWithPrime"}},n.UnexpectedPrime=function(){return{type:"UnexpectedPrime"}},n.SumMissingBound=function(){return{type:"SumMissingBound"}},n.ProductMissingBound=function(){return{type:"ProductMissingBound"}},n.MissingBound=function(){return{type:"MissingBound"}},n.IntegralMissingBound=function(){return{type:"IntegralMissingBound"}},n.SumMissingBody=function(){return{type:"SumMissingBody"}},n.ProductMissingBody=function(){return{type:"ProductMissingBody"}},n.IntegralMissingBody=function(){return{type:"IntegralMissingBody"}},n.DerivativeMissingBody=function(){return{type:"DerivativeMissingBody"}},n.IntegralMissingDifferential=function(){return{type:"IntegralMissingDifferential"}},n.DifferentialWithSuperscript=function(){return{type:"DifferentialWithSuperscript"}},n.FractionMissingNumerator=function(){return{type:"FractionMissingNumerator"}},n.FractionMissingDenominator=function(){return{type:"FractionMissingDenominator"}},n.FractionEmpty=function(){return{type:"FractionEmpty"}},n.AdjacentNumbers=function(n){return{type:"AdjacentNumbers",args:n}}});\ndefine(\'core/math/parser/expression-token-tables\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allTokenTypes=e.rightTable=e.leftTable=e.escapedSymbolTable=e.symbolTable=e.commandTable=void 0;e.commandTable={"\\\\lt":"<","\\\\gt":">","\\\\le":"<=","\\\\ge":">=","\\\\leq":"<=","\\\\geq":">=","\\\\ldots":"...","\\\\sim":"~","\\\\cdot":"*","\\\\times":"*","\\\\div":"/","\\\\ln":"Ln","\\\\log":"Log","\\\\int":"Int","\\\\sum":"Sum","\\\\prod":"Prod","\\\\backslash":"Err"};for(var a=0,l=["sin","cos","tan","cot","sec","csc"];a<l.length;a++){var o=l[a];e.commandTable["\\\\"+o]="Trig",e.commandTable["\\\\"+o+"h"]="Trig",e.commandTable["\\\\arc"+o]="Trig",e.commandTable["\\\\arc"+o+"h"]="Trig",e.commandTable["\\\\ar"+o+"h"]="Trig"}e.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},e.escapedSymbolTable={"\\\\{":"\\\\{","\\\\}":"\\\\}","\\\\%":"%"},e.leftTable={"|":"(|","\\\\{":"\\\\{","[":"[","(":"("},e.rightTable={"|":"|)","\\\\}":"\\\\}","]":"]",")":")"},e.allTokenTypes=Object.keys({"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\\\{":!0,"\\\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0})});\ndefine(\'core/math/parser/expression-lexer\',["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(require,e,E,I,n,d){"use strict";function v(e,n,r,t,a,i,s,p){return{opts:e,input:n,prevSpan:r,startIndex:t,endIndex:a,token:i,mode:s,parent:p}}function D(e,n,r){return{type:e,span:n,val:r}}function s(e,n,r,t,a,i){var s=n.args;if(r>s.length&&i)return c(i,t);var p=function e(n,r,t){var a=n.args;if(r>=a.length){var i=I.emptySpanAt(n.span.input,n.span.end);return A(r,D("End",i,""))}var s=n.args[r];switch(s.type){case"Sqrt":case"Frac":case"SupSub":return A(r,s);case"Letter":if(!t||"integral"!==t.type)return A(r,s);if("d"!=s.val)return A(r,s);var p=e(n,r+1,t),o=p.endIndex,u=p.token;if("Letter"!==u.type&&"Cmd"!==u.type)return A(r,s);var l={type:"Differential",span:I.joinSpans(s.span,u.span),val:u.val};return A(o,l);case"LeftRight":var f=s.left,v=E.leftTable[f.val]||"Err",c=I.joinSpans(s.span,f.span);return A(r,D(v,c,f.val));case"OperatorName":for(var g=[],d=0,m=s.arg.args;d<m.length;d++){var y=m[d];if("Letter"!==y.type)return A(r,D("Err",s.span,I.slice(s.arg.span)));g.push(y.val)}var S="\\\\"+g.join(""),h=E.commandTable[S]||"Cmd";return A(r,D(h,s.span,S));case"Cmd":var b=E.commandTable[s.val]||"Cmd";return A(r,D(b,s.span,s.val));case"EscapedSymbol":var x=E.escapedSymbolTable[s.val]||"Err";return A(r,D(x,s.span,s.val));case"Symbol":if(T(s))return w(n,r);var k=E.symbolTable[s.val]||"Err";return A(r,D(k,s.span,s.val));case"Digit":return L(n,r);default:var j=s;throw"Unexpected atom "+j.type+"."}}(n,r=S(s,r),a),o=p.token,u=p.endIndex;if("End"===o.type&&i){var l=i.input.args[i.startIndex];if("LeftRight"===l.type){var f=l.right;return v(e,n,t,r,u,D(E.rightTable[f.val]||"Err",f.span,f.val),a,i)}}else"Int"===o.type?a=g(a):"Differential"===o.type&&(a=m(a));return v(e,n,t,r,u,o,a,i)}function c(e,n){var r=e.input,t=e.endIndex,a=e.mode,i=e.parent;return s(e.opts,r,t+1,n,a,i)}function r(e){return e.token}function g(e){return{type:"integral",parent:e}}function m(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function A(e,n){return{token:n,endIndex:e}}function w(e,n){var r=e.args[n];if("Symbol"!==r.type||"."!==r.val)throw new Error("Programming Error: expected \'.\'");if(n+2<e.args.length&&T(e.args[n+1])&&T(e.args[n+2])){var t=I.joinSpans(r.span,e.args[n+2].span);return A(n+2,D("...",t,I.slice(t)))}var a=S(e.args,n+1);return a<e.args.length&&"Digit"===e.args[a].type?L(e,n):A(n,D(E.symbolTable[r.val]||"Err",r.span,r.val))}function L(e,n){var r=function(e,n){for(var r=e.args,t=r[n].span,a=[];n<r.length;n++){var i=S(r,n);if(i>=r.length)break;if("Digit"!==(c=r[i]).type)break;n=i,a.push(c.val)}if((n=S(r,n))>=r.length)return;var s=r[n];if("Frac"!==s.type)return;for(var p=[],o=[],u=0,l=s.num.args;u<l.length;u++){if(!y(c=l[u])){if("Digit"!==c.type)return;p.push(c.val)}}for(var f=0,v=s.den.args;f<v.length;f++){var c;if(!y(c=v[f])){if("Digit"!==c.type)return;o.push(c.val)}}var g=I.joinSpans(t,s.span);return A(n,d.MixedNumber(g,a.join(""),p.join(""),o.join("")))}(e,n);if(r)return r;for(var t=e.args,a=e.args[n].span,i=[],s=!1,p=!1;n<t.length;n++){var o=S(t,n);if(o>=t.length)break;var u=t[o];if("Digit"===u.type)n=o,s=!0,i.push(u.val);else{if(p||!T(u))break;if(o+1<t.length&&T(e.args[o+1]))break;n=o,p=!0,i.push(".")}}if(!s)throw new Error("Programming Error: decimals must have at least one digit.");return A(n-1,D("Decimal",I.joinSpans(a,e.args[n-1].span),i.join("")))}function y(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return;case"Cmd":return"\\\\space"===e.val;case"EscapedSymbol":return"\\\\ "===e.val||"\\\\:"===e.val||"\\\\,"===e.val||"\\\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function S(e,n){for(;n<e.length&&y(e[n]);)n+=1;return n}function T(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(e,"__esModule",{value:!0}),e.didAdvance=e.isDone=e.isAt=e.endIntegral=e.beginIntegral=e.peek=e.advance=e.lexAt=e.lex=e.emptySpanAtState=e.joinState=e.spanStates=e.Span=void 0,Object.defineProperty(e,"Span",{enumerable:!0,get:function(){return n.Span}}),e.spanStates=function(e,n){return I.joinSpans(e.token.span,n.prevSpan)},e.joinState=function(e,n){return I.joinSpans(e,n.prevSpan)},e.emptySpanAtState=function(e){return I.emptySpanAt(e.token.span.input,e.token.span.start)},e.lex=function(e,n){return s(n,e,0,I.emptySpanAt(e.span.input,e.span.start),void 0,void 0)},e.lexAt=s,e.advance=function(e){var n=e.input.args[e.startIndex],r=e.token.span;return n&&"LeftRight"===n.type?s(e.opts,n.arg,0,r,e.mode,e):c(e,r)},e.peek=r,e.beginIntegral=g,e.endIntegral=m,e.isAt=function(e,n){return r(e).type===n},e.isDone=function(e){return e.startIndex>=e.input.args.length},e.didAdvance=function(e,n){return n.token.span.start>e.token.span.start}});\ndefine(\'core/math/parser/precspec\',["require","exports","./expression-token-tables"],function(require,e,o){"use strict";function p(e,r){for(var t=0,n=o.allTokenTypes;t<n.length;t++){var i=n[t];if(void 0===r[i])throw new Error("Programming Error: token "+i+" must be a assigned a "+e+" precedence")}}function s(e,r,t,n){if(void 0!==r[t])throw new Error("Programming Error: duplicate "+e+" entry for token "+t+".");r[t]=n}Object.defineProperty(e,"__esModule",{value:!0}),e.precSpec=e.ra=e.la=e.r=e.l=e.initial=void 0,e.initial=function(e){return{type:"initial",tokenType:e}},e.l=function(e){return{type:"l",tokenType:e}},e.r=function(e){return{type:"r",tokenType:e}},e.la=function(e){return{type:"la",tokenType:e}},e.ra=function(e){return{type:"ra",tokenType:e}},e.precSpec=function(e){for(var t={},r={},n={},i=0;i<e.length;i++)for(var o=0,a=e[i];o<a.length;o++){var c=a[o],l=c.type,u=c.tokenType;switch(l){case"initial":s("initial",t,u,i);break;case"l":s("left",r,u,i);break;case"r":s("right",n,u,i);break;case"la":s("left",r,u,i),s("right",n,u,i);break;case"ra":s("left",r,u,i),s("right",n,u,i-1)}}function f(e){return n[e]}return p("left",r),p("right",n),{rightPrec:f,leftPrec:function(e){return r[e]},initialPrec:function(e){var r=t[e];return void 0===r?f(e):r}}}});\ndefine(\'core/math/parser/expression-parser\',["require","exports","core/math/errormsg","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(require,e,z,a,H,K,p,Q,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0;var t=[[r.initial("("),r.la(")"),r.initial("\\\\{"),r.la("\\\\}"),r.r("["),r.la("]"),r.initial("(|"),r.la("|)"),r.la("Differential"),r.la("End")],[r.ra("...")],[r.la(",")],[r.ra(":")],[r.la("="),r.la(">"),r.la("<"),r.la(">="),r.la("<="),r.la("~")],[r.la("+"),r.la("-")],[r.la("*"),r.la("/"),r.la("Decimal"),r.la("MixedNumber"),r.la("Letter"),r.la("Cmd"),r.la("%"),r.r("("),r.la("\\\\{"),r.la("(|"),r.la("Frac"),r.la("Sqrt"),r.la("Trig"),r.la("Ln"),r.la("Log"),r.ra("Int"),r.ra("Sum"),r.ra("Prod")],[r.initial("+"),r.initial("-")],[r.la("!")],[r.la("SupSub")],[r.l("["),r.la(".")],[r.l("(")],[r.la("Err")]],n=r.precSpec(t),V=n.leftPrec,k=n.rightPrec,X=n.initialPrec,s={trailingComma:!1};function Y(e,r){var t=Q.lex(e,r);if(Q.isDone(t))return K.Err(Q.spanStates(t,t),K.EmptyGroup());var a=$(t,0),n=a.state,s=a.tree;return"Err"===s.type||Q.isDone(n)?s:pe(n).tree}function Z(e,r){return{state:e,tree:r}}function $(e,r){var t,a,n=e,s=function(e){var r,t,a,n,s,i,p,u,c,o,l,d,y,E,f,v,S,m,g,b=e,M=Q.peek(e),P=X(M.type);switch(M.type){case"+":if(e=Q.advance(e),r=$(e,P),e=r.state,"Err"!==(g=r.tree).type)return Z(e,H.Pos(Q.spanStates(b,e),[g]));if(!ee(g.error))return Z(e,g);var h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingRight(M.val));return Z(e,x);case"-":if(e=Q.advance(e),t=$(e,P),e=t.state,"Err"!==(g=t.tree).type)return Z(e,H.Neg(Q.spanStates(b,e),[g]));if(!ee(g.error))return Z(e,g);h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingRight(M.val));return Z(e,x);case"(":return ne(e);case"\\\\{":return e=Q.advance(e),Q.isAt(e,"\\\\}")?Z(e=Q.advance(e),H.EmptyPiecewise(Q.spanStates(b,e))):(a=$(e,P),e=a.state,g=a.tree,n=ie(b,e,g,"\\\\{","\\\\}"),e=n.state,"Err"===(g=n.tree).type?Z(e,g):Z(e,H.Piecewise(Q.spanStates(b,e),[g])));case"[":return e=Q.advance(e),Q.isAt(e,"]")?Z(e=Q.advance(e),H.List(Q.spanStates(b,e),[])):(s=$(e,P),e=s.state,g=s.tree,i=ie(b,e,g,"[","]"),e=i.state,"Err"===(g=i.tree).type?Z(e,g):Z(e,H.List(Q.spanStates(b,e),[g])));case"(|":if(e=Q.advance(e),Q.isAt(e,"|)")){e=Q.advance(e);h=Q.spanStates(b,e);return Z(e,K.Err(h,K.EmptyPipe()))}return p=$(e,P),e=p.state,g=p.tree,u=ie(b,e,g,"(|","|)"),e=u.state,"Err"===(g=u.tree).type?Z(e,g):Z(e,H.Pipes(Q.spanStates(b,e),[g]));case"Frac":if(e.opts.disallowFrac)throw z.fractionsUnavailable();e=Q.advance(e);var D=Y(M.num,e.opts),A=Y(M.den,e.opts);if("Err"===D.type&&"EmptyGroup"===D.error.type&&"Err"===A.type&&"EmptyGroup"===A.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionEmpty());return Z(e,x)}if("Err"===D.type&&"EmptyGroup"===D.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionMissingNumerator());return Z(e,x)}if("Err"===A.type&&"EmptyGroup"===A.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionMissingDenominator());return Z(e,x)}if("Err"===D.type)return Z(e,D);if("Err"===A.type)return Z(e,A);if(H.isDerivative(D,A)&&"Juxt"===A.type){var j=A.args[1],U=void 0;if(c=$(e,V("*")-1),e=c.state,"Err"!==(U=c.tree).type)return Z(e,H.Derivative(Q.spanStates(b,e),[j,U]));if(ee(U.error)){h=Q.spanStates(b,e);return Z(e,K.Err(h,K.DerivativeMissingBody()))}return Z(e,U)}return Z(e,H.Frac(Q.spanStates(b,e),[D,A]));case"Sqrt":if(e=Q.advance(e),M.optArg){var C=Y(M.optArg,e.opts);return"Err"===C.type?"EmptyGroup"===C.error.type?Z(e,K.Err(C.span,K.EmptyRadicalIndex())):Z(e,C):"Err"===(k=Y(M.arg,e.opts)).type?"EmptyGroup"===k.error.type?Z(e,K.Err(k.span,K.EmptyRadical())):Z(e,k):Z(e,H.Nthroot(Q.spanStates(b,e),[C,k]))}var k;return"Err"===(k=Y(M.arg,e.opts)).type?"EmptyGroup"===k.error.type?Z(e,K.Err(k.span,K.EmptyRadical())):Z(e,k):Z(e,H.Sqrt(Q.spanStates(b,e),[k]));case"Trig":case"Ln":e=Q.advance(e);var w=H.Cmd(Q.spanStates(b,e),M.val),B=0;if("SupSub"===(R=Q.peek(e)).type){if(e=Q.advance(e),R.sub){h=Q.spanStates(b,e),x=K.Err(h,K.UnexpectedSubscript(w.val));return Z(e,x)}if(O=te(R,e.opts)){if("Err"===O.type)return Z(e,O);w=H.Superscript(Q.spanStates(b,e),[w,O])}B=R.nprimes}if(I=Q.isAt(e,"(")){if(o=ne(e),e=o.state,"Err"===(g=o.tree).type)return Z(e,g);g=H.Call(Q.spanStates(b,e),[w,g.args[0]])}else{if(l=$(e,P-1),e=l.state,"Err"===(g=l.tree).type)return ee(g.error)?Z(e,K.Err(Q.spanStates(b,e),K.FunctionMissingArgument(M.val))):Z(e,g);g=H.ImplicitCall(Q.spanStates(b,e),[w,g])}if(0<B){h=Q.spanStates(b,e);if(!I){x=K.Err(h,K.PrimeWithoutParen());return Z(e,x)}g=H.Prime(h,B,[g])}return Z(e,g);case"Log":e=Q.advance(e);var I,w=H.Cmd(Q.spanStates(b,e),M.val),B=0,L=void 0,O=void 0;if("SupSub"===(R=Q.peek(e)).type&&(e=Q.advance(e),L=re(R,e.opts),O=te(R,e.opts),B=R.nprimes),L&&"Err"===L.type)return Z(e,L);if(O&&"Err"===O.type)return Z(e,O);if(I=Q.isAt(e,"(")){if(d=ne(e),e=d.state,"Err"===(g=d.tree).type)return Z(e,g);g=g.args[0]}else if(y=$(e,P-1),e=y.state,"Err"===(g=y.tree).type)return ee(g.error)?Z(e,K.Err(Q.spanStates(b,e),K.FunctionMissingArgument(M.val))):Z(e,g);var q=L?H.Seq(Q.spanStates(b,e),H.unwrapSeq(g).concat(L)):g,N=L?H.Cmd(Q.spanStates(b,e),"\\\\logbase"):w;if(O&&(N=H.Superscript(Q.spanStates(b,e),[N,O])),g=I?H.Call(Q.spanStates(b,e),[N,q]):H.ImplicitCall(Q.spanStates(b,e),[N,q]),0<B){h=Q.spanStates(b,e);if(!I){x=K.Err(h,K.PrimeWithoutParen());return Z(e,x)}g=H.Prime(h,B,[g])}return Z(e,g);case"Int":e=Q.advance(e);var R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.IntegralMissingBound())):Z(e,G);O=G.sup,L=G.sub,j=void 0;if(Q.isAt(e,"Differential"))return E=se(e),e=E.state,"Err"===(j=E.tree).type?Z(e,j):Z(e,H.EmptyIntegral(Q.spanStates(b,e),[j,L,O]));if(f=$(e,P),e=f.state,"Err"===(g=f.tree).type)return ee(g.error)?Z(e,K.Err(g.span,K.IntegralMissingBody())):Z(e,g);var F=g;return Q.isAt(e,"Differential")?(v=se(e),e=v.state,"Err"===(j=v.tree).type?Z(e,j):Z(e,H.Integral(Q.spanStates(b,e),[j,L,O,F]))):Z(e,K.Err(Q.spanStates(b,e),K.IntegralMissingDifferential()));case"Sum":e=Q.advance(e);R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.SumMissingBound())):Z(e,G);O=G.sup,L=G.sub;return S=$(e,P),e=S.state,"Err"===(g=S.tree).type?ee(g.error)?Z(e,K.Err(g.span,K.SumMissingBody())):Z(e,g):Z(e,H.Sum(Q.spanStates(b,e),[g,L,O]));case"Prod":e=Q.advance(e);var G,R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.ProductMissingBound())):Z(e,G);O=G.sup,L=G.sub;return m=$(e,P),e=m.state,"Err"===(g=m.tree).type?ee(g.error)?Z(e,K.Err(g.span,K.ProductMissingBody())):Z(e,g):Z(e,H.Product(Q.spanStates(b,e),[g,L,O]));case"Cmd":return e=Q.advance(e),g=H.Cmd(Q.spanStates(b,e),M.val),Z(e,g);case"Letter":return e=Q.advance(e),g=H.Letter(Q.spanStates(b,e),M.val),Z(e,g);case"Decimal":e=Q.advance(e);var _=H.Decimal(Q.spanStates(b,e),M.val);if("Decimal"!==(R=e.token).type&&"MixedNumber"!==R.type)return Z(e,_);var T=e;e=Q.advance(e);var h=Q.spanStates(b,e),W="MixedNumber"===R.type?R:H.Decimal(Q.spanStates(T,e),R.val);return Z(e,K.Err(h,K.AdjacentNumbers([_,W])));case"MixedNumber":if(e.opts.disallowFrac)throw z.fractionsUnavailable();if(e=Q.advance(e),"Decimal"!==(R=e.token).type&&"MixedNumber"!==R.type)return Z(e,M);T=e;e=Q.advance(e);h=Q.spanStates(b,e),W="MixedNumber"===R.type?R:H.Decimal(Q.spanStates(T,e),R.val);return Z(e,K.Err(h,K.AdjacentNumbers([M,W])));case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.BinaryOperatorMissingLeft(M.val));return Z(e,x);case"!":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingLeft(M.val));return Z(e,x);case"SupSub":e=Q.advance(e);var J="supsub";M.sub?J="subscript":M.sup?J="superscript":0<M.nprimes&&(J="prime");h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingLeft(J));return Z(e,x);case")":case"\\\\}":case"]":case"|)":case"Differential":return pe(e);case"Err":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.UnrecognizedSymbol(M.val));return Z(e,x);case"End":h=Q.spanStates(b,e),x=K.Err(h,K.UnexpectedEnd());return Z(e,x);default:throw"Unexpected token type "+M.type+"."}}(e);if(e=s.state,"Err"===(t=s.tree).type)return Z(e,t);if(!Q.didAdvance(n,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!Q.isDone(e);){if((!Q.isAt(e,"(")||(a=t,H.isIdentifier(a)||"Prime"===a.type&&H.isIdentifier(a.args[0]))?V(Q.peek(e).type):k("("))<=r)break;var i,p=e;if(e=(i=function(e,r){var t,a,n,s,i,p,u,c,o,l,d,y,E,f,v,S=Q.peek(e),m=k(S.type);switch(S.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=Q.advance(e),t=$(e,m),e=t.state,"Err"!==(v=t.tree).type)return Z(e,function(e,r,t){switch(e){case"+":return H.Add(r,t);case"-":return H.Sub(r,t);case"*":return H.Mul(r,t);case"/":return H.Div(r,t);case"=":return H.Equals(r,t);case"~":return H.Tilde(r,t);case":":return H.Colon(r,t);case".":return H.Dot(r,t);default:throw"Unexpected token type "+e+"."}}(S.type,Q.joinState(r.span,e),[r,v]));if(ee(v.error)){var g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case"%":e=Q.advance(e);var M=Q.peek(e);if("Cmd"!==M.type||"of"!==M.val&&"\\\\of"!==M.val){b=K.Err(S.span,K.PercentMissingOf());return Z(e,b)}if(e=Q.advance(e),a=$(e,m),e=a.state,"Err"!==(v=a.tree).type)return Z(e,H.PercentOf(Q.joinState(r.span,e),[r,v]));if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case">=":case"<=":case">":case"<":var P=S.type;if(e=Q.advance(e),n=w(e,P),e=n.state,P=n.symbol,s=$(e,m),e=s.state,"Err"===(v=s.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}for(var h=H.Inequality(Q.joinState(r.span,e),P,[r,v]),x=[],D=Q.peek(e).type;">="===D||"<="===D||">"===D||"<"===D;){var A=e;if(P=D,e=Q.advance(e),i=w(e,P),e=i.state,P=i.symbol,p=$(e,m),e=p.state,"Err"===(v=p.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}x.push(H.TrailingInequalityPiece(Q.spanStates(A,e),P,[v])),D=Q.peek(e).type}return x.length?Z(e,H.InequalityChain(Q.joinState(r.span,e),h,x)):Z(e,h);case"!":return Z(e=Q.advance(e),H.Bang(Q.joinState(r.span,e),[r]));case"[":A=e;if(e=Q.advance(e),Q.isAt(e,"]")){e=Q.advance(e);g=Q.spanStates(A,e);return Z(e,K.Err(g,K.EmptySquareBracket()))}return u=$(e,m),e=u.state,v=u.tree,c=ie(A,e,v,"[","]"),e=c.state,"Err"===(v=c.tree).type?Z(e,v):Z(e,H.Index(Q.joinState(r.span,e),[r,v]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\\\{":case"(|":return o=$(e,m),e=o.state,"Err"===(v=o.tree).type?Z(e,v):Z(e,H.Juxt(Q.joinState(r.span,e),[r,v]));case"(":if(H.isIdentifier(r)){if(l=ne(e),e=l.state,"Err"===(v=l.tree).type)return Z(e,v);g=Q.joinState(r.span,e);return Z(e,H.Call(g,[r,v.args[0]]))}if("Prime"===r.type&&H.isIdentifier(r.args[0])){if(d=ne(e),e=d.state,"Err"===(v=d.tree).type)return Z(e,v);g=Q.joinState(r.span,e);return Z(e,H.Prime(g,r.nprimes,[H.Call(g,[r.args[0],v.args[0]])]))}return y=$(e,m),e=y.state,"Err"===(v=y.tree).type?Z(e,v):Z(e,H.Juxt(Q.joinState(r.span,e),[r,v]));case"SupSub":e=Q.advance(e);var j=B(S),U=te(S,e.opts);if(j&&"Err"===j.type)return Z(e,j);if(U&&"Err"===U.type)return Z(e,U);if(j&&(r=H.Subscript(Q.joinState(r.span,e),[r,j])),U&&(r=H.Superscript(Q.joinState(r.span,e),[r,U])),0<S.nprimes){g=Q.joinState(r.span,e);if(!H.isIdentifier(r)){b=K.Err(g,K.UnexpectedPrime());return Z(e,b)}r=H.Prime(g,S.nprimes,[r])}return Z(e,r);case",":for(var C=[r];Q.isAt(e,",")&&(e=Q.advance(e),!Q.isAt(e,"..."))&&(!e.opts.trailingComma||!function(e){return Q.isAt(e,")")||Q.isAt(e,"]")||Q.isAt(e,"\\\\}")}(e));){if(E=$(e,m),e=E.state,"Err"===(v=E.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}C.push(v)}return Z(e,H.Seq(Q.joinState(r.span,e),C));case"...":if(e=Q.advance(e),Q.isAt(e,",")&&(e=Q.advance(e)),m>=V(Q.peek(e).type))return Z(e,H.Ellipsis(Q.joinState(r.span,e),[r,H.EmptyRangeEnd(Q.emptySpanAtState(e))]));if(f=$(e,m),e=f.state,"Err"!==(v=f.tree).type)return Z(e,H.Ellipsis(Q.joinState(r.span,e),[r,v]));if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case"]":case")":case"\\\\}":case"|)":case"Differential":return pe(e);case"Err":return $(e,m);case"End":g=Q.spanStates(e,e),b=K.Err(g,K.UnexpectedEnd());return Z(e,b);default:throw"Unexpected token type "+S.type+"."}}(e,t)).state,"Err"===(t=i.tree).type)return Z(e,t);if(!Q.didAdvance(p,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return Z(e,t)}function ee(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function w(e,r){if(!Q.isAt(e,"="))return{state:e,symbol:r};switch(r){case">":e=Q.advance(e),r=">=";break;case"<":e=Q.advance(e),r="<="}return{state:e,symbol:r}}function re(e,r){if(e.sub){var t=Y(e.sub,r);return"Err"===t.type&&"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptySubscript()):t}}function B(e){if(e.sub){var r=e.sub;if(0===r.args.length)return K.Err(r.span,K.EmptySubscript());for(var t=[],a=0,n=r.args;a<n.length;a++){var s=n[a];if("Digit"!==s.type&&"Letter"!==s.type){var i=s.span;return K.Err(i,K.InvalidSubscript(p.slice(i)))}t.push(s.val)}return H.Alphanumeric(r.span,t.join(""))}}function te(e,r){if(e.sup){var t=Y(e.sup,r);return"Err"===t.type?"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptySuperscript()):t:0<e.nprimes?K.Err(e.span,K.SuperscriptWithPrime()):t}}function ae(e,r,t){if("SupSub"!==e.type){var a=Q.spanStates(r,t);return K.Err(a,K.MissingBound())}if(0<e.nprimes){a=Q.spanStates(r,t);return K.Err(a,K.UnexpectedPrime())}var n=re(e,t.opts),s=te(e,t.opts);if(!n||"Err"===n.type&&"EmptySubscript"===n.error.type||!s||"Err"===s.type&&"EmptySuperscript"===s.error.type){a=Q.spanStates(r,t);return K.Err(a,K.MissingBound())}return"Err"===n.type?n:"Err"===s.type?s:{type:"Bounds",sup:s,sub:n}}function ne(e){var r,t,a,n=e,s=Q.peek(e),i=X(s.type);if(!Q.isAt(e,"("))throw new Error("Programming Error: expected \'(\' at start of parseParen.");if(e=Q.advance(e),Q.isAt(e,")")){var p=H.Seq(Q.emptySpanAtState(e),[]);e=Q.advance(e);var u=Q.spanStates(n,e);return Z(e,H.Paren(u,[p]))}return e=(t=ie(n,e=(r=$(e,i)).state,r.tree,"(",")")).state,"Err"===(a=t.tree).type?Z(e,a):Z(e,H.Paren(Q.spanStates(n,e),[a]))}function se(e){var r=e,t=Q.peek(e);if("Differential"!==t.type)throw new Error("Programming Error: expected differential");e=Q.advance(e);var a=H.Cmd(t.span,t.val),n=Q.peek(e);if("SupSub"===n.type){e=Q.advance(e);var s=Q.spanStates(r,e),i=B(n);if(i){if("Err"===i.type)return Z(e,i);a=H.Subscript(s,[a,i])}if(n.sup)return Z(e,K.Err(s,K.DifferentialWithSuperscript()));if(0<n.nprimes)return Z(e,K.Err(s,K.UnexpectedPrime()))}return Z(e,a)}function ie(e,r,t,a,n){if("Err"===t.type&&"UnexpectedEnd"!==t.error.type)return Z(r,t);if("Err"!==t.type&&Q.isAt(r,n))return Z(r=Q.advance(r),t);var s=Q.spanStates(e,r);return Z(r,K.Err(s,K.MissingCloseDelimiter(a,n)))}function pe(e){var r=e;switch(Q.peek(e).type){case")":e=Q.advance(e);var t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("(",")")));case"]":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("[","]")));case"\\\\}":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("\\\\{","\\\\}")));case"|)":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("|","|")));case"Differential":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedDifferential()));default:e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedParseError()))}}e.parse=function(e,r){var t=Y(e,r?a.__assign(a.__assign({},s),r):s);return"Err"===t.type&&"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptyInput()):t}});\ndefine(\'core/math/inverses\',[],function(){"use strict";var n={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(c){n[c]="arc"+c,n["arc"+c]=c}),n});\ndefine(\'core/math/parser/lower\',["require","exports","core/math/inverses","core/math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(require,e,m,V,a,X,Y,Z){"use strict";function $(e,r){for(var t=[],a=0;a<r.length;a++)t.push(re(e,r[a]));return t}function ee(e){if("Paren"!==e.type)return!1;var r=e.args[0];return"Seq"===r.type&&2===r.args.length}function re(e,r){return e.setInput(te(e,r),r.span)}function te(e,r){var t=e.nodes;switch(r.type){case"Pos":return te(e,r.args[0]);case"Neg":for(var a=-1,n=r.args[0];;)if("Pos"===n.type||"Paren"===n.type&&!ee(n))n=n.args[0];else{if("Neg"!==n.type)break;n=n.args[0],a*=-1}switch(n.type){case"Decimal":var s=ue(n);return t.Constant(-1===a?Z.neg(s):s);case"MixedNumber":s=oe(n);return t.MixedNumber(-1===a?Z.neg(s):s);default:return-1===a?t.Negative([re(e,n)]):te(e,n)}case"Add":return t.Add($(e,r.args));case"Sub":return t.Subtract($(e,r.args));case"Mul":return t.Multiply($(e,r.args));case"Div":return t.Divide($(e,r.args));case"Bang":var i=r.args[0];return"Call"===i.type?t.FunctionFactorial($(e,i.args)):t.FunctionCall("\\\\factorial",$(e,r.args));case"PercentOf":return t.PercentOf($(e,r.args));case"Call":return se(e,r);case"ImplicitCall":return function(e){var r=e.args,t=r[0],a=r[1];"Superscript"===t.type&&(t=t.args[0]);if("Cmd"===t.type&&"logbase"===t.val&&"Seq"===a.type&&2===a.args.length){if(!le(a.args[0]))throw V.badImplicitCall("log")}else if(!le(a)){if("Cmd"===t.type)throw V.badImplicitCall(t.val);throw V.parseError()}}(r),se(e,r);case"Dot":var c=r.args[1],u=$(e,r.args),o=u[0],p=u[1];if(de(c)){var l=X.emptySpanAt(c.span.input,c.span.end),d=e.setInput(ge(e),l);p=e.setInput(t.SeededFunctionCall(p,[d]),c.span)}else if("Letter"===c.type)switch(c.val){case"x":return t.OrderedPairAccess([o,t.Constant(1)]);case"y":return t.OrderedPairAccess([o,t.Constant(2)])}return t.DotAccess([o,p]);case"Prime":var g=r.args[0];if("Call"!==g.type)throw"ImplicitCall"===g.type?V.primeWithoutParen():V.unexpectedPrime();var y=g.args,f=y[0],m=y[1],v=Y.unwrapSeq(m).length;if("Cmd"===f.type&&"logbase"===f.val){if(2!==v)throw V.primedFunctionArity()}else if(1!==v)throw V.primedFunctionArity();return t.Prime(r.nprimes,$(e,r.args));case"Index":var h=r.args,w=h[0],S=h[1];if("Seq"===S.type)return t.ListAccess([te(e,w),t.List($(e,S.args))]);if("Ellipsis"!==S.type)return ie(S)?t.ListAccess([te(e,w),ce(e,S)]):t.ListAccess($(e,r.args));var b=S.args,C=b[0],x=b[1];return t.ListAccess([te(e,w),t.Range([t.List($(e,Y.unwrapSeq(C))),t.List("EmptyRangeEnd"===x.type?[]:$(e,Y.unwrapSeq(x)))])]);case"Paren":var q=r.args[0];return"Seq"===q.type?t.OrderedPair($(e,q.args)):te(e,q);case"List":if(0===r.args.length)return t.List([]);var I=r.args[0];if("Ellipsis"!==I.type)return t.List($(e,Y.unwrapSeq(I)));var E=I.args,C=E[0],x=E[1];return t.Range([t.List($(e,Y.unwrapSeq(C))),t.List($(e,Y.unwrapSeq(x)))]);case"Pipes":return t.FunctionCall("\\\\abs",$(e,r.args));case"Subscript":var P=r.args,M=P[0],D=P[1];if(0===D.val.length)throw V.emptySubscript();var L=void 0;switch(M.type){case"Letter":case"Cmd":L=M.val;break;default:throw V.unexpectedSubscript()}return t.Identifier(L+"_"+D.val);case"Superscript":var A=r.args,M=A[0],B=A[1];if("Call"!==M.type||"Seq"===M.args[1].type||function(e){if("Call"!==e.type)return!1;var r=e.args[0];for(;"Superscript"===r.type||"Subscript"===r.type||"Prime"===r.type;)r=r.args[0];return"Cmd"===r.type&&(ae(r.val)||ne(r.val))}(M)){if("Dot"!==M.type)return t.Exponent($(e,r.args));var c=M.args[1],O=$(e,M.args),o=O[0],p=O[1],N=re(e,B);if("Letter"===c.type)switch(c.val){case"x":return t.Exponent([t.OrderedPairAccess([o,t.Constant(1)]),N]);case"y":return t.Exponent([t.OrderedPairAccess([o,t.Constant(2)]),N])}else if("Call"===c.type){if("Letter"===(f=c.args[0]).type)switch(f.val){case"x":return t.Multiply([t.OrderedPairAccess([o,t.Constant(1)]),t.Exponent([re(e,c.args[1]),N])]);case"y":return t.Multiply([t.OrderedPairAccess([o,t.Constant(2)]),t.Exponent([re(e,c.args[1]),N])])}}return t.DotAccessExponent([o,p,N])}return t.FunctionExponent($(e,[M.args[0],M.args[1],B]));case"Sqrt":return t.FunctionCall("sqrt",$(e,r.args));case"Nthroot":return t.FunctionCall("nthroot",$(e,[r.args[1],r.args[0]]));case"Frac":return t.Divide($(e,r.args));case"Derivative":var F=$(e,r.args);if(!Y.isIdentifier(r.args[0]))throw V.parseError();return t.Derivative(F[0],[F[1]]);case"Integral":var R=r.args,F=$(e,[T=R[0],R[1],k=R[2],W=R[3]]);return t.Integral(F);case"EmptyIntegral":var U=$(e,r.args),T=U[0],_=U[1],k=U[2],W=t.Constant(Z.maybeRational(1,1));return t.Integral([T,_,k,W]);case"Sum":var j=r.args,z=j[0],H=j[1],k=j[2];if("Equals"!=H.type)throw V.incorrectSumLowerBound();if(!Y.isIdentifier(H.args[0]))throw V.incorrectSumLowerBound();var J=re(ye(e,(F=$(e,[H.args[0],H.args[1],k]))[0]),z);return t.Sum(F.concat(J));case"Product":var G=r.args,z=G[0],K=G[1],k=G[2];if("Equals"!=K.type)throw V.incorrectProductLowerBound();if(!Y.isIdentifier(K.args[0]))throw V.incorrectProductLowerBound();J=re(ye(e,(F=$(e,[K.args[0],K.args[1],k]))[0]),z);return t.Product(F.concat(J));case"Juxt":return t.Multiply($(e,r.args));case"Letter":return t.Identifier(r.val);case"Cmd":var Q=r.val;if("ans"===Q){if(void 0===e.currentIndex)throw V.badAnsContext();return t.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===Q)throw V.unrecognizedSymbol(Q);return t.Identifier(Q);case"Decimal":return t.Constant(ue(r));case"MixedNumber":return t.MixedNumber(oe(r));case"Piecewise":return function(e,r){var t,a=e.nodes,n=r.args[0],s=Y.unwrapSeq(n),i=[];e:for(t=0;t<s.length;t++){var c=s[t];switch(c.type){case"Colon":var u=c.args,o=u[0],p=u[1];if(!ie(o))throw V.colonMissingCondition();i.push({condition:ce(e,o),if_expr:re(e,p)});break;case"Equals":case"Inequality":case"InequalityChain":i.push({condition:ce(e,c),if_expr:a.Constant(Z.maybeRational(1,1))});break;default:break e}}if(0===t)throw V.piecewiseMissingCondition();if(t<s.length-1)throw V.piecewisePartMissingCondition();var l=t===s.length-1?re(e,s[t]):a.Constant(NaN);if(!a.Piecewise.chain)throw V.featureUnavailable();return a.Piecewise.chain(i,l)}(e,r);case"EmptyPiecewise":if(!t.Piecewise.empty)throw V.featureUnavailable();return t.Piecewise.empty();case"Equals":throw V.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw V.unexpectedInequality();case"Tilde":throw V.unexpectedSymbol("~");case"Seq":throw V.unexpectedSymbol(",");case"Colon":throw V.unexpectedSymbol(":");case"Ellipsis":throw V.unexpectedSymbol("...");case"EmptyRangeEnd":throw V.invalidHalfEmptyRange();case"Err":throw function(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return V.parseError();case"InvalidOperatorName":return V.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return V.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?V.unexpectedSymbol(e.val):V.unrecognizedSymbol(e.val);case"EmptyInput":return V.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return V.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return V.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return V.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return V.cannotSubscript(e.base);case"PercentMissingOf":return V.percentMissingOf();case"SumMissingBound":return V.sumMissingBound();case"ProductMissingBound":return V.productMissingBound();case"IntegralMissingBound":return V.integralMissingBound();case"SumMissingBody":return V.sumMissingBody();case"ProductMissingBody":return V.productMissingBody();case"IntegralMissingBody":return V.integralMissingBody();case"DerivativeMissingBody":return V.derivativeMissingBody();case"IntegralMissingDifferential":return V.integralMissingDifferential();case"DifferentialWithSuperscript":return V.differentialWithSuperscript();case"FractionMissingNumerator":return V.fractionMissingNumerator();case"FractionMissingDenominator":return V.fractionMissingDenominator();case"FractionEmpty":return V.fractionEmpty();case"EmptySuperscript":return V.emptySuperscript();case"EmptySubscript":return V.emptySubscript();case"InvalidSubscript":return V.invalidSubscript(e.val);case"SuperscriptWithPrime":return V.superscriptWithPrime();case"PrimeWithoutParen":return V.primeWithoutParen();case"UnexpectedPrime":return V.unexpectedPrime();case"EmptyRadical":return V.emptyRadical();case"EmptyRadicalIndex":return V.emptyRadicalIndex();case"EmptySquareBracket":return V.emptySquareBracket();case"EmptyPipe":return V.emptyPipe();case"FunctionMissingArgument":return V.wrongArity(e.val,1,0);case"AdjacentNumbers":return V.adjacentNumbers(pe(e.args[0]),pe(e.args[1]));default:throw"Unexpected surface node "+e.type+"."}}(r.error);default:throw"Unexpected surface node "+r.type+"."}}function ae(e){return m.hasOwnProperty(e)}function ne(e){return"ln"===e||"log"===e||"logbase"===e}function se(e,r){var t,a,n=e.nodes,s=r.args,i=s[0],c=s[1],u=re(e,i),o=$(e,Y.unwrapSeq(c));if(de(i)){var p=X.emptySpanAt(c.span.input,c.span.start),l=e.setInput(ge(e),p);return n.SeededFunctionCall(u,[l].concat(o))}if(Y.isIdentifier(i))return n.FunctionCall(u,o);if("Superscript"===i.type){var d=i.args,g=d[0],y=d[1];if("Cmd"===g.type){var f=g.val;if(ae(f)||ne(f)){if("Decimal"===(a=y).type&&"2"===a.val)return n.Exponent([n.FunctionCall(f,o),re(e,y)]);if("Neg"===(t=y).type&&"Decimal"===(t=t.args[0]).type&&"1"===t.val&&void 0!==m[f])return n.FunctionCall(m[f],o);throw ae(f)?V.badTrigExponent(f):V.badLogExponent("logbase"===f?"log":f)}}}return n.Multiply([u,re(e,c)])}function ie(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function ce(e,r){var t=e.nodes;switch(r.type){case"Equals":return t.Comparator["="]($(e,r.args));case"Inequality":return t.Comparator[r.symbol]($(e,r.args));case"InequalityChain":if(1<r.chain.length)throw V.inequalityChainTooLong();var a=r.first,n=a.symbol,s=a.args,i=s[0],c=s[1],u=r.chain[0],o=u.symbol,p=u.args[0],l=X.emptySpanAt(r.span.input,r.span.start);return t.And([ce(e,Y.Inequality(l,n,[i,c])),ce(e,Y.Inequality(l,o,[c,p]))]);default:throw V.parseError()}}function ue(e){return Z.fromDecimalString(e.val)}function oe(e){var r=Z.fromDecimalString(e.whole),t=Z.fromDecimalString(e.num),a=Z.fromDecimalString(e.den);return Z.add(r,Z.div(t,a))}function pe(e){switch(e.type){case"Decimal":return e.val;case"MixedNumber":return e.whole+" "+e.num+"/"+e.den;default:throw new Error("Unexpected node type "+e.type)}}function le(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var r=e.args[0];;)if("Pos"===r.type||"Paren"===r.type&&!ee(r))r=r.args[0];else{if("Neg"!==r.type)break;r=r.args[0]}return"Decimal"===r.type||"MixedNumber"===r.type;case"Pos":case"Paren":return le(e.args[0]);case"Juxt":case"Mul":case"Div":return le(e.args[0])&&le(e.args[1]);case"Subscript":return le(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return le(e.args[0])&&le(e.args[1]);case"Piecewise":return"Equals"===(r=e.args[0]).type||"Inequality"===r.type||"InequalityChain"===r.type;case"Call":var t=e.args,a=t[0],n=t[1];return Y.isIdentifier(a)||Y.isSuperscriptedIdentifier(a)?!1:le(a)&&le(n);case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":return!1;default:throw"Unexpected surface node "+e.type+"."}}function de(e){return"Cmd"===e.type&&("random"===e.val||"shuffle"===e.val)}function ge(e){var r=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return r;for(var t=0,a=e.seedExtensions;t<a.length;t++)var n=a[t],r=e.nodes.ExtendSeed("ro",[r,n]);return r}function ye(e,r){var t=e.seedExtensions||[];return a.__assign(a.__assign({},e),{seedExtensions:t.concat(r)})}Object.defineProperty(e,"__esModule",{value:!0}),e.lower=void 0,e.lower=function(e,r){return a=r,(t=e).setInput(function(e,r){var t=e.nodes;switch(r.type){case"Equals":var a=r.args,n=a[0],s=a[1];if("Call"===n.type){var i=n.args,c=i[0],u=i[1],o=Y.unwrapSeq(u);if(Y.isIdentifier(c)&&o.every(Y.isIdentifier))return t.FunctionDefinition(re(e,c),$(e,o),re(e,s))}else if(Y.isIdentifier(n))return t.Assignment(re(e,n),re(e,s));return t.Equation(re(e,n),re(e,s));case"Tilde":var p=$(e,r.args),n=p[0],s=p[1];return t.Regression(n,s);case"Inequality":return ce(e,r);case"InequalityChain":if(1<r.chain.length)throw V.inequalityChainTooLong();var l=r.first,d=l.symbol,g=l.args,y=g[0],f=g[1],m=r.chain[0],v=m.symbol,h=m.args[0];return Y.isIdentifier(f)?t.DoubleInequality([re(e,y),d,re(e,f),v,re(e,h)]):ce(e,r);case"Seq":if(!r.args.every(ee))throw V.malformedPoint();return t.List($(e,r.args));case"Call":var w=r.args,S=w[0],b=w[1];if("Cmd"===S.type)switch(S.val){case"polygon":return t.Polygon($(e,Y.unwrapSeq(b)));case"histogram":return t.Histogram($(e,Y.unwrapSeq(b)));case"cube":case"sphere":case"cone":case"dodecahedron":case"octahedron":case"tetrahedron":return t.Object3D($(e,Y.unwrapSeq(b)),S.val);case"dotplot":return t.DotPlot($(e,Y.unwrapSeq(b)));case"boxplot":return t.BoxPlot($(e,Y.unwrapSeq(b)));case"ttest":return t.TTest($(e,Y.unwrapSeq(b)));case"ittest":return t.IndependentTTest($(e,Y.unwrapSeq(b)));case"stats":return t.Stats($(e,Y.unwrapSeq(b)));default:return te(e,r)}return te(e,r);default:return te(e,r)}}(t,a),a.span);var t,a}});\ndefine(\'core/math/baseparser\',["require","exports","core/math/errormsg","parsenodes","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/parser/lower"],function(require,r,f,m,v,g,h){"use strict";function w(){throw f.featureUnavailable()}function b(r,e){return r.setInputSpan(e),r}Object.defineProperty(r,"__esModule",{value:!0}),r.parse=void 0,r.parse=function(r,e){var a=typeof r;if("string"!=a)throw new Error("Type Error: parse can only be called with strings, got "+JSON.stringify(r)+" of type "+a);var t=m;if((e=e||{}).disabledFeatures){t=Object.create(t);for(var o=0,n=e.disabledFeatures;o<n.length;o++){var i=n[o];if(!t[i])throw new Error("Programming Error: "+i+" cannot be disabled because it is not a parsenode.");t[i]=w}}var s=void 0===e.seedPrefix?"":e.seedPrefix,c=0,d={nodes:t,currentIndex:e.index,setInput:b,nextSeed:function(){var r=s+"::vc"+c;return c+=1,r}},p={};void 0!==e.trailingComma&&(p.trailingComma=e.trailingComma),e.disallowFrac&&(p.disallowFrac=!0);try{var l=v.parse(r),u=g.parse(l,p);return h.lower(d,u)}catch(r){return r instanceof m.Error?r:"string"==typeof r?m.Error(r):f.parseError()}}});\ndefine(\'core/math/rational-arithmetic-sequence\',[\'require\',\'core/math/distance\',\'core/math/builtin\'],function(require){"use strict";var o=require("core/math/distance"),e=require("core/math/builtin");return function(n,t){var r=e.toFraction(n),a=e.toFraction(t);if(o.approx(r.n/r.d,n)&&o.approx(a.n/a.d,t)){var c=e.lcm(r.d,a.d),i=r.n*(c/r.d);return{nstart:i,nstep:a.n*(c/a.d)-i,lcm:c}}}});\ndefine(\'core/math/cache-stats\',["require","exports"],function(require,e){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.markCacheRead=e.markCacheWrite=e.markCacheMiss=e.markCacheHit=e.setCacheStatStore=void 0,e.setCacheStatStore=function(e){a=e},e.markCacheHit=function(){a&&(a.cacheHits+=1)},e.markCacheMiss=function(){a&&(a.cacheMisses+=1)},e.markCacheWrite=function(){a&&(a.cacheWrites+=1)},e.markCacheRead=function(){a&&(a.cacheReads+=1)}});\ndefine(\'core/math/sliders\',["require","exports"],function(require,e){"use strict";function u(e,a){var r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<a?r:e}function d(e){var a,r=e.target,t=e.hardMin,i=e.hardMax,n=e.step,o=1e-10;if(void 0!==t&&void 0!==i&&(o=Math.min(o,Math.abs(i-t)/1e3)),n&&(o=Math.min(o,n/10)),void 0!==t&&(t=u(t,o)),void 0!==i&&(i=u(i,o)),e.forceSliderToMax&&void 0!==i&&(r=i),i<t)return t;if(r<=t)return t;if(i<=r)return i;n&&(a=void 0!==t?t:0,r=n*Math.round((r-a)/n)+a);var d=u(r,o);return!n&&t!==d&&i!==d||(r=d),r<=t?t:i<=r?i:r}Object.defineProperty(e,"__esModule",{value:!0}),e.computeSoftMax=e.constrainSliderValueLikeEvaluator=e.determineWhichLimitsAreCompatibleWithValue=e.roundToReasonableDecimal=void 0,e.roundToReasonableDecimal=u,e.determineWhichLimitsAreCompatibleWithValue=function(e){var a=!0,r=!0,t=!0;return void 0!==e.hardMin&&e.target<e.hardMin&&(a=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(r=!1),e.step&&d({target:e.target,step:e.step,hardMin:a?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(t=!1),{min:a,max:r,step:t}},e.constrainSliderValueLikeEvaluator=d,e.computeSoftMax=function(e){var a,r=e.storedMax,t=e.sliderValue,i=e.hardMin,n=e.step,o=10;return o<r&&(o=r),o<t&&(o=t),o<i&&(o=i),n&&(o=o<=(a=d({target:o,hardMin:i,hardMax:void 0,step:n}))?a:a+n),o}});\ndefine(\'core/math/features/getConcreteTree\',[\'require\',\'parsenodes\',\'core/math/errormsg\',\'core/math/types\',\'core/lib/label\',\'core/math/builtin\',\'core/math/distance\',\'core/math/maybe-rational\',\'core/math/rational-arithmetic-sequence\',\'core/math/cache-stats\',\'core/math/sliders\'],function(require){"use strict";var p=require("parsenodes"),d=require("core/math/errormsg"),u=require("core/math/types"),o=require("core/lib/label"),g=require("core/math/builtin"),a=require("core/math/distance"),m=require("core/math/maybe-rational"),y=m.maybeRational,f=require("core/math/rational-arithmetic-sequence"),c=require("core/math/cache-stats"),C=p.List,h=p.Range,i=p.OrderedPair,l=p.ScalarExpression,T=p.Constant,v=p.ExtendSeed,_=p.Multiply,b=p.Identifier,w=p.DummyIndex,L=p.BuiltInFunction,x=require("core/math/sliders");function A(e,t,r){for(var i=[],n=0;n<e.length;n++)i.push(e[n].getConcreteTree(t,r));return i}function e(){return this.getDependencies().concat([this._symbol])}function O(e,t,r,i){var n=i.length-1,s=e[t];if(!s)throw d.unexpectedSymbol(".");if(s.isError)throw s;if(!s.isFunction)throw d.unexpectedSymbol(".");if(!s.allowDotCalls)throw d.illegalDotCall(r);var o,a="random"===t,c="random"===t||"shuffle"===t,h=c?i[1].valueType:i[0].valueType;if((o=h)!==u.Distribution&&!u.isList(o))throw d.dotLHSTypeError("."+r,u.prettyPrint(h));var l=c?1:0;if(n<s.dotMinArity){if(a)throw d.randomArity();throw d.wrongArity("."+r,s.dotMinArity-l,n-l,s.dotMinArityUsageExample)}if(n>s.dotMaxArity){if(a)throw d.randomArity();throw d.wrongArity("."+r,s.dotMaxArity-l,n-l,s.dotMaxArityUsageExample)}}function D(e,t,r,i,n){var s=A(r,i,n);return O(n,e,t,s),n[e].getConcreteInvocationTree(i,n,s,t)}function P(e,t){return!e.isError&&-1===t.indexOf(e.valueType)?d.parseError():e}function E(e,t,r){if(t){var i=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(0<i.length){r.errors[e]=!0;for(var n=0;n<i.length;n++)i[n]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(i[n])}else r.values[e]=+t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}else r.valids[e]=!0}function S(e){return e&&e.valueType===u.ListOfNumber&&1===e.length&&e.args?e.args[0]:e}function F(e,t,r,i,n,s){if(i<t.length&&!a.approx(s,t.elementAt(e,i).asValue(),10))throw d.nonArithmeticRange();if(n-i<=r.length&&1<n-i&&!a.approx(s,r.elementAt(e,r.length-n+i).asValue(),10))throw d.nonArithmeticRange()}function s(e,t){for(var r=!1,i=!1,n=!1,s=0;s<e.length;s++){var o=e[s];(o.isList||o.isBroadcast)&&(i=!0,0===o.length&&(n=!0));for(var a=o.getDependencies(),c=0;c<a.length;c++)if(-1!==t.indexOf(a[c])){if(o.isList||o.isBroadcast)return"list"}else r=!0}return i?n?"empty":r?"broadcast":"list":"none"}function I(e){for(var t=[],r=[],i=[],n=0;n<e.length;n++){var s,o=e[n];if(o.isList){for(var a,c=!1,h=0;h<i.length;h++)if(o===i[h]){c=!0,(s=p.DummyIndex(r[h])).valueType=u.elementType(o.valueType),t.push(s);break}c||(a=p.Base.prototype.tmpVar(),r.push(a),i.push(o),(s=p.DummyIndex(a)).valueType=u.elementType(o.valueType),t.push(s))}else o.isBroadcast?(Array.prototype.push.apply(r,o._replacedSymbols),Array.prototype.push.apply(i,o._lists),t.push(o._expression)):t.push(o)}return{replacedArgs:i,concreteArgs:t,replacedSymbols:r}}p.Base.prototype.tryGetConcreteTree=function(){var t;try{t=this.getConcreteTree.apply(this,arguments)}catch(e){t=e instanceof p.Base?e:d.parseError()}return t},p.Base.prototype.getConcreteTree=function(e,t,r){if(c.markCacheRead(),this.isConcreteTreeCacheValid(t))return c.markCacheHit(),this.__cachedConcreteTree.value;c.markCacheMiss();for(var i=this._getConcreteTree(e,t,r),n={},s=this.getCacheKeys().slice();s.length;){var o,a=s.pop();n.hasOwnProperty(a)||(o=t[a],(n[a]=o)&&Array.prototype.push.apply(s,o.getCacheKeys()))}return c.markCacheWrite(),this.__cachedConcreteTree={keys:n,value:i},i},p.Base.prototype.getCacheKeys=function(){return this.getDependencies()},p.Histogram.prototype.getCacheKeys=e,p.Object3D.prototype.getCacheKeys=e,p.DotPlot.prototype.getCacheKeys=e,p.BoxPlot.prototype.getCacheKeys=e,p.TTest.prototype.getCacheKeys=e,p.IndependentTTest.prototype.getCacheKeys=e,p.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},p.PercentOf.prototype._getConcreteTree=function(e,t){return p.Divide([p.Multiply(this.args),p.Constant(y(100,1))]).getConcreteTree(e,t)},p.Assignment.prototype._getConcreteTree=function(e,t){return this._expression.getConcreteTree(e,t)},p.Identifier.prototype._getConcreteTree=function(e,t){var r=o.latexToIdentifier(this.getInputString()),i=t[this._symbol];if(i){if(i.isError)throw i;if(i.isFunction)throw d.identifierAsFunction(r);return i.getConcreteTree(e,t)}if(L.hasOwnProperty(this._symbol))throw d.functionUnsupported(r);return p.FreeVariable(this._symbol)},p.Ans.prototype._getConcreteTree=function(e,t){if(void 0===t[this._symbol])throw d.ansUndefined();return b.prototype._getConcreteTree.call(this,e,t)},p.Equation.prototype._getConcreteTree=function(e,t){return this.asComparator().getConcreteTree(e,t)},p.Constant.prototype._getConcreteTree=function(e,t){return new this.constructor(this._constantValue)},p.Seed.prototype._getConcreteTree=function(e,t){return new this.constructor(this._stringValue)},p.Derivative.prototype._getConcreteTree=function(e,t){var r;if(t[this._symbol]){var i=Object.create(t);i[this._symbol]=p.FreeVariable(this._symbol);var n=t[this._symbol].getConcreteTree(e,t);if(n.valueType!==u.Number&&n.valueType!==u.ListOfNumber)throw d.derivativeVariableTypeError(this._symbol,[u.prettyPrint(n.valueType)]);var s={};return s[this._symbol]=n,r=this.args[0].getConcreteTree(e,i),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).substitute(s).getConcreteTree(e,t)}return r=this.args[0].getConcreteTree(e,t),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).getConcreteTree(e,t)},p.DoubleInequality.prototype._getConcreteTree=function(e,t){return new this.constructor([p.Piecewise([this._indicator,this._expressions[0],T(NaN)]).getConcreteTree(e,t),this._operators[0],b(this._symbol),this._operators[1],p.Piecewise([this._indicator,this._expressions[1],T(NaN)]).getConcreteTree(e,t)])},p.Expression.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return this.typeCheck(e,r),this._constantCollapsedCopy(e,r)},p.Add.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.addPoints(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Subtract.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.subtractPoints(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Multiply.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Number,u.ListOfNumber])?p.BuiltInFunction.multiplyPoint(this.args).getConcreteTree(e,t):u.isOneOf(r[0].valueType,[u.Number,u.ListOfNumber])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.multiplyPoint([this.args[1],this.args[0]]).getConcreteTree(e,t):n.call(this,e,t)},p.Divide.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Number,u.ListOfNumber])?p.BuiltInFunction.dividePoint(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Negative.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.negatePoint(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Error.prototype._getConcreteTree=function(e,t){return this},p.FreeVariable.prototype._getConcreteTree=function(e,t){return this},p.FunctionCall.prototype._getConcreteTree=function(e,t){var r="logbase"===this._symbol?"log":o.latexToIdentifier(this._identifier.getInputString()),i=t[this._symbol];if(i&&i.isError)throw i;if(!i||!i.isFunction){if(L.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&t.ln&&t.log?d.logbaseUnsupported():d.functionUnsupported(r);if(i&&i.getConcreteTree(e,t).valueType===u.Distribution)throw d.distributionAsFunction(i._symbol);if(1==this.args.length){var n=[b(this._symbol),this.args[0]];return _(n).getConcreteTree(e,t)}if(i)throw d.variableAsFunction(r);throw d.functionNotDefined(r)}var s=A(this.args,e,t);return i.getConcreteInvocationTree(e,t,s,r)},p.DotAccess.prototype._getConcreteTree=function(e,t){var r,i,n=this.args[0],s=this.args[1];if(s instanceof p.Identifier)return i=o.latexToIdentifier(s.getInputString()),r=[n],D(s._symbol,i,r,e,t);if(s instanceof p.SeededFunctionCall)return i=o.latexToIdentifier(s._identifier.getInputString()),r=[s.seed,n].concat(s.args.slice(1)),D(s._symbol,i,r,e,t);if(s instanceof p.FunctionCall)return"x"===s._symbol&&1===s.args.length?p.Multiply([p.OrderedPairAccess([n,p.Constant(1)]),s.args[0]]).getConcreteTree(e,t):"y"===s._symbol&&1===s.args.length?p.Multiply([p.OrderedPairAccess([n,p.Constant(2)]),s.args[0]]).getConcreteTree(e,t):(i=o.latexToIdentifier(s._identifier.getInputString()),r=[n].concat(s.args),D(s._symbol,i,r,e,t));throw d.unexpectedSymbol(".")},p.DotAccessExponent.prototype._getConcreteTree=function(e,t){return"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?p.Exponent([p.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t):p.Multiply([p.DotAccess([this.args[0],p.Identifier(this.args[1]._symbol)]),p.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t)},p.FunctionExponent.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?p.Exponent([p.FunctionCall(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):_([this.args[0],p.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},p.FunctionFactorial.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?p.FunctionCall("\\\\factorial",[p.FunctionCall(r,[this.args[1]])]).getConcreteTree(e,t):_([this.args[0],p.FunctionCall("\\\\factorial",[this.args[1]])]).getConcreteTree(e,t)},p.FunctionDefinition.prototype._getConcreteTree=function(e,t){for(var r=0;r<this._argSymbols.length;r++){if(t[this._argSymbols[r]])throw d.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw d.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},p.Image.prototype._getConcreteTree=function(e,t){var r=this.center.tryGetConcreteTree(e,t),i=this.radianAngle.tryGetConcreteTree(e,t),n=this.width.tryGetConcreteTree(e,t),s=this.height.tryGetConcreteTree(e,t),o=this.opacity.tryGetConcreteTree(e,t),a=[u.Point,u.ListOfPoint],c=[u.Number,u.ListOfNumber],r=P(r,a),i=P(i,c),n=P(n,c),s=P(s,c),o=P(o,c);return p.Image({center:r,radianAngle:i,width:n,height:s,opacity:o},this.moveStrategy)},p.Simulation.prototype._getConcreteTree=function(e,t){var r=this.fps.tryGetConcreteTree(e,t);return p.Simulation(r)},p.Slider.prototype._getConcreteTree=function(e,t){var r,i,n,s,o,a,c,h,l,u=this._expression.getConcreteTree(e,t),p=S(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),g=S(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),y=S(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),f={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};return E("min",p,f),E("max",g,f),E("step",y,f),y&&f.valids.step&&(0===f.values.step?delete f.values.step:f.values.step=Math.abs(f.values.step)),f.errors.cycle?u=d.sliderLimitReferencesExport(f.exportedSymbol):(f.errors.min||!f.valids.min?f.errMsg=d.sliderMinInvalid():f.errors.max||!f.valids.max?f.errMsg=d.sliderMaxInvalid():!f.errors.step&&f.valids.step||(f.errMsg=d.sliderStepInvalid()),f.values.min>f.values.max&&(f.valids.min=!1,f.valids.max=!1,f.errMsg||(f.errMsg=d.sliderMaxLessThanMin()))),u.isConstant&&(r=t.initialEvaluation&&t.initialEvaluation.asValue()&&this.sliderIsPlayingOnce,i=f.values.max,n=+u.asValue(),s=f.values.min,o=f.values.step,!r||isFinite(i)||(a=S(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t)))&&(i=x.computeSoftMax({storedMax:+a.asValue(),sliderValue:n,step:o,hardMin:s})),c=x.constrainSliderValueLikeEvaluator({target:n,hardMin:s,hardMax:i,step:o,forceSliderToMax:r}),h=m.fromDecimalString(c.toString()),l=isFinite(m.asFloat(h))?h:c,u=T(l)),u.sliderInfo=f,u},p.Integral.prototype._getConcreteTree=function(e,t){if(t[this._differential._symbol])throw d.shadowedIntegrationVariable(this._differential._symbol);var r=this.args[0],i=this.args[1].getConcreteTree(e,t),n=this.args[2].getConcreteTree(e,t);if(i.dependsOn(r._symbol)||n.dependsOn(r._symbol))throw d.badIntegralBoundDependency(r._symbol);var s=Object.create(t);return s[this._differential._symbol]=w(this._differential._symbol),l.prototype._getConcreteTree.call(this,e,s)},p.ListAccess.prototype._getConcreteTree=function(e,t){var r,i=this.list.getConcreteTree(e,t);if(this.index instanceof h&&this.index.isHalfEmpty()){if(r=h([this.index.beginning,C([T(y(i.length,1))])]).getConcreteTree(e,t),Math.round(+r.args[0].asValue())>i.length)return C([])}else r=this.index.getConcreteTree(e,t);var n=[i,r];this.typeCheck(e,n);var s=r.getDependencies();if(s.length){if(r.isList)throw d.variableListIndicies(s);if(r.valueType===u.ListOfBool)throw d.variableFilter(s)}if(r.isList){if(r.valueType===u.EmptyList)return C([]);var o=[],a=0;if(r.valueType===u.ListOfNumber){for(;a<r.length;a++){var c=r.args[a];o.push(i.elementAt(e,c.asValue()-1))}return C(o)}if(r.valueType===u.ListOfBool){for(;a<r.length;a++){r.args[a]._constantValue&&o.push(i.elementAt(e,a))}return C(o)}}return this._constantCollapsedCopy(e,n)},p.List.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t);return this.typeCheck(e,r),new this.constructor(r)},p.ParametrizedReducerFunction.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof p.List&&this.args[0].valueType===u.ListOfDistribution)return p.List(p.List.mapArgs(t,[this.args[0]],function(e){return this.copyWithArgs([e[0],this.args[1]]).getConcreteTree(t,r)}.bind(this)));if(this.args[0]instanceof p.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(t,r);var i=A(this.args,t,r);switch(s([i[1]],this.getDummyDependencies())){case"none":return this.typeCheck(t,i),this._constantCollapsedCopy(t,i);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,[i[1]],function(e){return e=[i[0]].concat(e),this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var e=I([i[1]]),n=[i[0]].concat(e.concreteArgs);return this.typeCheck(t,n),p.Broadcast(e.replacedSymbols,[this.copyWithArgs(n)].concat(e.replacedArgs))}},p.Prime.prototype._getConcreteTree=function(e,t){var r=this.args[0],i=r.args[0];if(!t[r._symbol])throw d.functionNotDefined(r._symbol);var n,s=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw d.primedFunctionArity();n=[b(s),r.args[1]]}else{if(1!==r.args.length)throw d.primedFunctionArity();n=[b(s)]}for(var o=r.copyWithArgs(n).getConcreteTree(e,t),a=0;a<this.order;a++)o=o.takeDerivative(s);var c={};return c[s]=i,o.substitute(c).getConcreteTree(e,t)},p.Range.prototype._getConcreteTree=function(e,t){var r=this.beginning.getConcreteTree(e,t),i=this.end.getConcreteTree(e,t);if(r.getDependencies().length)throw d.variableRange(r.getDependencies());if(i.getDependencies().length)throw d.variableRange(i.getDependencies());if(!r.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var n,s,o,a=r.elementAt(e,0).asValue(),c=i.elementAt(e,i.length-1).asValue()-a;o=1===r.length?0<=c?1:-1:(n=r.elementAt(e,1).asValue(),s=f(a,n),r.elementAt(e,1).asValue()-a);var h=Math.round(c/o)+1;if(!isFinite(h)||h<r.length||h<i.length)throw d.nonArithmeticRange();var l,u=[];if(s)for(var p=s.nstart,g=0;g<h;g++)F(e,r,i,g,h,p/s.lcm),u.push(T(y(p,s.lcm))),p+=s.nstep;else for(u.push(T(a)),g=1;g<h;g++)F(e,r,i,g,h,l=a+g*o),u.push(T(y(l,1)));return C(u)},p.ReducerFunction.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof p.List&&this.args[0].valueType===u.ListOfDistribution&&"length"!==this._symbol)return p.List(p.List.mapArgs(t,this.args,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.args[0]instanceof p.Distribution&&"length"!==this._symbol)return this.args[0][this._symbol]().getConcreteTree(t,r);var e=A(this.args,t,r);if(1===this.args.length)return e=[p.List.wrap(e[0])],this.typeCheck(t,e),this._constantCollapsedCopy(t,e);switch(s(e,this.getDummyDependencies())){case"none":return e=[p.List(e)],this.typeCheck(t,e),this._constantCollapsedCopy(t,e);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,e,function(e){return e=[p.List(e)],this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var i=I(e),e=[p.List(i.concreteArgs)];return this.typeCheck(t,e),p.Broadcast(i.replacedSymbols,[this.copyWithArgs(e)].concat(i.replacedArgs))}},p.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t[this._index._symbol])throw d.shadowedIndex(this._index._symbol);var r=this.args[1].getConcreteTree(e,t),i=this.args[2].getConcreteTree(e,t);if(r.dependsOn(this._index._symbol)||i.dependsOn(this._index._symbol))throw this instanceof p.Sum?d.badSumBoundDependency(this._index._symbol):this instanceof p.Product?d.badProductBoundDependency(this._index._symbol):d.parseError();var n=Object.create(t);return n[this._index._symbol]=w(this._index._symbol),l.prototype._getConcreteTree.call(this,e,n)};var n=function(t,e){var r=A(this.args,t,e);switch(s(r,this.getDummyDependencies())){case"none":return this.typeCheck(t,r),this._constantCollapsedCopy(t,r);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,r,function(e){return this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var i=I(r);return this.typeCheck(t,i.concreteArgs),p.Broadcast(i.replacedSymbols,[this.copyWithArgs(i.concreteArgs)].concat(i.replacedArgs))}};function t(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});if(0<e.length){if(1===e.length&&e.push(p.Constant(1)),e[1].getDependencies().length)throw d.illegalBinWidth(this._symbol).setDependencies(e[1].getDependencies());if(e[1].valueType!==u.Number)throw d.illegalBinWidth(this._symbol);var i=e[1].asValue();if(!isFinite(i)||i<=0)throw d.illegalBinWidth(this._symbol)}return this.typeCheck(t,e),new this.constructor(e)}p.ScalarExpression.prototype._getConcreteTree=n,p.Object3D.prototype._getConcreteTree=n,p.Piecewise.prototype._getConcreteTree=function(e,t){var r=A(this.args,e,t),i=r[0];if(i.isConstant&&i.valueType===u.Bool&&r[1].valueType===r[2].valueType)return i.asValue()?r[1]:r[2];if(i.valueType===u.Bool&&u.isList(r[1].valueType)&&u.isList(r[2].valueType)&&r[1].length!==r[2].length)throw d.piecewiseBranchLengthError(i.getDependencies()[0]);return n.call(this,e,t)},p.Regression.prototype._getConcreteTree=function(e,t){return new this.constructor(this._lhs,this._rhs)},p.Polygon.prototype._getConcreteTree=function(t,r){var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),1===e.length&&e[0].valueType===u.ListOfPoint?new this.constructor(e):e.every(function(e){return e.valueType===u.Point})?new this.constructor([C(e)]):2===e.length?new this.constructor([i(this.args).getConcreteTree(t,r)]):d.parseError()},p.Histogram.prototype._getConcreteTree=t,p.DotPlot.prototype._getConcreteTree=t,p.BoxPlot.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),1!==e.length||e[0].valueType!==u.ListOfNumber&&e[0].valueType!==u.EmptyList?d.parseError():new this.constructor(e)},p.TTest.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),new this.constructor(e)},p.IndependentTTest.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),new this.constructor(e)},p.SolvedEquation.prototype._getConcreteTree=function(e,t){return new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},p.Table.prototype._getConcreteTree=function(e,t){for(var r=[],i=Object.create(t),n=0;n<this.columns.length;n++){var s=this.columns[n].getConcreteTree(e,i);s.isIndependent&&this.columns[n].exportToLocal(s,i),r.push(s)}return new this.constructor(r)},p.TableColumn.prototype._getConcreteTree=function(e,t,r){var i,n,s,o=this.header.getConcreteTree(e,t);if(o.isFreeVariable){i=[];for(var a,c=0;c<this.values.length;c++){this.values[c].tableError()?i.push(d.invalidTableEntry(this.values[c].tableError())):(a=this.values[c].tryGetConcreteTree(e,t)).isError?i.push(a):a.tableError()?i.push(d.invalidTableEntry(a.tableError())):a.valueType===u.Number?i.push(a):i.push(d.tableEntryTypeError([u.prettyPrint(a.valueType)]))}return(n=new this.constructor(o,this.length,i)).isIndependent=!0,n}if(o.isConstant){for(var h=[],l=0;l<this.length;l++)h.push(o);i=h}else i=o.isList?o.args.slice():[];return(o=this.header.getConcreteTree(e,t)).isError||o.valueType===u.Number||o.valueType===u.ListOfNumber||o.valueType===u.EmptyList||(o=d.tableHeaderTypeError([u.prettyPrint(o.valueType)])),n=new this.constructor(o,this.length,i),void 0!==r&&((s=this.header.tryGetConcreteTree(e,r)).isError||s.valueType!==u.Number||(n.continuousConcreteTree=s)),n},p.BuiltInFunction.pdf.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof C)return p.List(p.List.mapArgs(t,this.args,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.typeCheck(t,this.args),!(this.args[0]instanceof p.Distribution))throw d.functionTypeError(this._symbol,[u.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(t,r)},p.BuiltInFunction.cdf.prototype._getConcreteTree=function(t,r){var e=this.args;if(2===e.length&&(e=[e[0],p.Constant(-1/0),e[1]]),e[0]instanceof p.List)return p.List(p.List.mapArgs(t,e,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.typeCheck(t,e),!(e[0]instanceof p.Distribution))throw d.functionTypeError(this._symbol,[u.prettyPrint(e[0].valueType)]);return e[0].cdf(e.slice(1)).getConcreteTree(t,r)},p.BuiltInFunction.random.prototype._getConcreteTree=function(e,t){var r=this.args;(r.length<=1||!(r[1]instanceof p.Distribution)&&!(r[1]instanceof p.List)&&r.length<4)&&(r=[r[0],L.uniformdist([])].concat(r.slice(1)));var i=r[0],n=r[1],s=r[2],o=r[3];if(this.typeCheck(e,r.slice(1)),s&&s.getDependencies().length)throw d.variableSampleSize(s.getDependencies());if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(i=v("us",[i,o])),s){var a=s.asValue();if(a<1)throw d.badSampleSize();a=Math.round(a);for(var c,h=[],l=0;l<a;l++)c=v("lc",[i,T(y(l,1))]),h.push(n.sample([c]).getConcreteTree(e,t));return C(h)}return n.sample([i]).getConcreteTree(e,t)},p.BuiltInFunction.shuffle.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r.slice(1));var i,n=r[0],s=r[1],o=r[2];if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(n=v("us",[n,o])),"List"===s.type)return i=s.args.slice(),g.shuffle(n.asValue(),i),C(i);if("Broadcast"!==s.type)throw d.parseError();for(var a=s,c=[a._expression],h=g.randomPerm(n.asValue(),a.length),l=0;l<a._lists.length;l++){i=[];for(var u=0;u<h.length;u++)i.push(a._lists[l].args[h[u]]);c.push(p.List(i))}return a.copyWithArgs(c)},p.BuiltInFunction.sort.prototype._getConcreteTree=function(e,t){var r=this.args;if(1===r.length&&(r=r.concat(r[0])),this.typeCheck(e,r),0!==r[1].getDependencies().length)throw d.functionFreeVariable(this._errorSymbol,r[1].getDependencies()[0]);if("List"!==r[1].type)throw d.parseError();var i,n=r[1].asValue(),s=g.sortPerm(n);if("List"===r[0].type){for(i=[],h=0;h<Math.min(s.length,r[0].args.length);h++)i.push(r[0].args[s[h]]);return p.List(i)}if("Broadcast"!==r[0].type)throw d.parseError();for(var o=[r[0]._expression],a=0;a<r[0]._lists.length;a++){i=[];for(var c=r[0]._lists[a].args,h=0;h<Math.min(s.length,c.length);h++)i.push(c[s[h]]);o.push(p.List(i))}return r[0].copyWithArgs(o)},p.BuiltInFunction.join.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r);for(var i=[],n=0;n<r.length;n++){var s=r[n];if("Broadcast"===s.type&&(s=s.asList(e)),"List"===s.type)for(var o=0;o<s.args.length;o++)i.push(s.args[o]);else i.push(s)}return p.List(i)}});\ndefine(\'core/math/features/getValueType\',[\'require\',\'parsenodes\',\'core/math/types\'],function(require){"use strict";var e=require("parsenodes"),r=require("core/math/types");function t(){return r.Number}function n(){return r.Bool}function i(e){for(var t=0;t<e.length;t++)if(e[t].valueType===r.Point)return r.Point;return r.Number}var u={Add:i,Multiply:i,Divide:i,Subtract:i,Exponent:t,Negative:i,And:n,Piecewise:function(e){return e[1].valueType},BaseComparator:n,RepeatedOperator:t,List:function(e){if(0===e.length)return r.EmptyList;for(var t=e[0].valueType,n=1;n<e.length;n++)if(e[n].valueType!==t)return r.ListOfAny;return r.hasListType(t)?r.listType(t):r.ListOfAny},ListAccess:function(e){return r.elementType(e[0].valueType)},Broadcast:function(e){return r.listType(e[0].valueType)},Seed:function(e){return r.SeedType},ExtendSeed:function(e){return r.SeedType},OrderedPairAccess:t,OrderedPair:function(){return r.Point},RGBColor:function(){return r.RGBColor},NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:function(){return r.Distribution},DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:function(){return r.Any}};for(var o in u)e[o].prototype._getValueType=u[o]});\ndefine(\'core/math/features/typeCheck\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/math/errormsg\'],function(require){"use strict";var s=require("parsenodes"),u=require("core/math/types"),l=require("core/math/errormsg"),a=u.isOneOf;function f(r){for(var t=[],e=0;e<r.length;e++)t.push(u.prettyPrint(r[e].valueType));return t}function r(i,o){return function(r,t){for(var e=0;e<t.length;e++)if(t[e].valueType!==i[e])throw o(f(t))}}function t(r,t){var e=t.length,i=t[0];if(e<2)throw l.methodRequiresList(this._symbol);if(!a(i.valueType,[u.ListOfNumber,u.EmptyList]))throw l.methodRequiresList(this._symbol);if(2<e)throw l.tooManyArguments(this._symbol,2)}var e={Add:r([u.Number,u.Number],l.addTypeError),Multiply:r([u.Number,u.Number],l.multiplyTypeError),Divide:r([u.Number,u.Number],l.divideTypeError),Subtract:r([u.Number,u.Number],l.subtractTypeError),Exponent:r([u.Number,u.Number],l.exponentTypeError),Negative:r([u.Number],l.negativeTypeError),BaseComparator:r([u.Number,u.Number],l.comparatorTypeError),And:r([u.Bool,u.Bool],l.andTypeError),ExtendSeed:function(r,t){if(2!==t.length||t[0].valueType!==u.SeedType||!a(t[1].valueType,[u.SeedType,u.Number]))throw l.functionUnsupported("random")},List:function(r,t){if(0!==t.length){var e=t[0].valueType;if(!u.hasListType(e))throw l.listTypeError([u.prettyPrint(e)]);for(var i=0;i<t.length;i++){var o=t[i].valueType;if(!u.hasListType(o))throw l.listTypeError([u.prettyPrint(o)]);if(o!==e)throw l.heterogeneousList()}}},Broadcast:function(r,t){},Distribution:function(r,t){},RGBColor:function(r,t){},OrderedPair:function(r,t){if(0===t.length)throw l.emptyParen();if(r.dimensions&&t.length!==r.dimensions())throw l.badTupleDimensions(r.dimensions());for(var e=0;e<t.length;e++){var i=t[e].valueType;if(i!==u.Number)throw l.pointTypeError(u.prettyPrint(i))}},Piecewise:function(r,t){if(t[0].valueType!==u.Bool)throw l.piecewiseConditionTypeError(f(t));if(t[1].valueType!==t[2].valueType)throw l.piecewiseBranchTypeError([u.prettyPrint(t[1].valueType),u.prettyPrint(t[2].valueType)])},ListAccess:function(r,t){var e=u.isList(t[0].valueType),i=t[1].valueType,o=i===u.EmptyList||i===u.Number||i===u.ListOfNumber||i===u.ListOfBool;if(!e||!o)throw l.indexTypeError(f(t))},OrderedPairAccess:r([u.Point,u.Number],l.orderedPairAccessTypeError),Sum:function(r,t){if(t[1].valueType!==u.Number)throw l.sumLowerBoundTypeError([u.prettyPrint(t[1].valueType)]);if(t[2].valueType!==u.Number)throw l.sumUpperBoundTypeError([u.prettyPrint(t[2].valueType)]);if(t[3].valueType!==u.Number)throw l.sumArgumentTypeError([u.prettyPrint(t[3].valueType)])},Product:function(r,t){if(t[1].valueType!==u.Number)throw l.productLowerBoundTypeError([u.prettyPrint(t[1].valueType)]);if(t[2].valueType!==u.Number)throw l.productUpperBoundTypeError([u.prettyPrint(t[2].valueType)]);if(t[3].valueType!==u.Number)throw l.productArgumentTypeError([u.prettyPrint(t[3].valueType)])},Integral:function(r,t){if(t[1].valueType!==u.Number)throw l.integralLowerBoundTypeError([u.prettyPrint(t[1].valueType)]);if(t[2].valueType!==u.Number)throw l.integralUpperBoundTypeError([u.prettyPrint(t[2].valueType)]);if(t[3].valueType!==u.Number)throw l.integralArgumentTypeError([u.prettyPrint(t[3].valueType)])},NativeFunction:function(r,t){var e=this._errorSymbol,i=t.length,o="logbase"===this._symbol?1:0;if(i<this._requiredArity)throw l.wrongArity(e,this._requiredArity-o,i-o);if(i>this._maxArity)throw l.wrongArity(e,this._maxArity-o,i-o);for(var n=0;n<t.length;n++){if(t[n].valueType!==u.Number)throw l.functionTypeError(e,f(t))}},ReducerFunction:function(r,t){if(!a(t[0].valueType,[u.ListOfNumber,u.EmptyList]))throw l.functionTypeError(this._symbol,f(t))},DoubleReducerFunction:function(r,t){var e=t[0],i=t[1];if(!u.isList(e.valueType)||!u.isList(i.valueType))throw l.nonListDoubleReducer(this._symbol);if(!a(e.valueType,[u.ListOfNumber,u.EmptyList])||!a(i.valueType,[u.ListOfNumber,u.EmptyList]))throw l.functionTypeError(this._symbol,f(t))},ParametrizedReducerFunction:function(r,t){if(!a(t[0].valueType,[u.ListOfNumber,u.EmptyList]))throw l.nonListParametrizedReducer(this._symbol);if(t[1].valueType!==u.Number)throw l.functionTypeError(this._symbol,f(t))},TypedFunction:function(r,t){var e=this._errorSymbol,i=t.length,o="pdf"===this._symbol,n="cdf"===this._symbol,s="rgb"===this._symbol||"hsv"===this._symbol;if(i<this._requiredArity){if(o)throw l.pdfWrongArity();if(n)throw l.cdfRequiresArguments();if(s)throw l.colorArity(this._symbol);throw l.wrongArity(e,this._requiredArity,i)}if(i>this._maxArity){if(o)throw l.pdfWrongArity();if(n)throw l.cdfTooManyArguments();if(s)throw l.colorArity(this._symbol);throw l.wrongArity(e,this._maxArity,i)}for(var u=0;u<t.length;u++){var y=t[u].valueType,p=this._inputTypes[u],h=Array.isArray(p);if(!h&&y!==p||h&&!a(y,p))throw l.functionTypeError(e,f(t))}},Derivative:function(r,t){if(!a(t[0].valueType,[u.Number,u.ListOfNumber,u.EmptyList,u.Point,u.ListOfPoint]))throw l.derivativeTypeError(f(t))},Regression:function(r,t){if(!a(t[0].valueType,[u.Number,u.ListOfNumber])||!a(t[1].valueType,[u.Number,u.ListOfNumber]))throw l.regressionTypeError(f(t))},Polygon:function(r,t){if(1===t.length&&t[0].valueType!==u.ListOfPoint)throw l.polygonListTypeError(f(t));if(2===t.length&&t[0].valueType===u.Number&&t[1].valueType===u.Number)throw l.polygonTwoNumbersError();if(2<t.length&&!t.every(function(r){return r.valueType===u.Point}))throw l.polygonPointArgsError()},Object3D:function(r,t){if(t.length<3)throw l.wrongArity(this._symbol,3,t.length)},Histogram:t,DotPlot:t,BoxPlot:function(r,t){var e=t.length,i=t[0];if(0===e)throw l.methodRequiresList(this._symbol);if(!a(i.valueType,[u.ListOfNumber,u.EmptyList]))throw l.methodRequiresList(this._symbol);if(1<e)throw l.methodRequiresList(this._symbol)},TTest:function(r,t){var e=this._symbol;if(0===t.length)throw l.methodRequiresList(e);if(t[0].valueType===u.EmptyList)throw l.ttestListTooShort(e);if(t[0].valueType!==u.ListOfNumber)throw l.methodRequiresList(e);if(2<t.length)throw l.tooManyArguments(e,2);if(t[0].length<2)throw l.ttestListTooShort(e);if(t[1]&&t[1].valueType!==u.Number)throw l.functionTypeError(e,f(t))},IndependentTTest:function(r,t){var e=this._symbol;if(2!==t.length)throw l.wrongDoubleReducerArity(e);if(!u.isList(t[0].valueType)||!u.isList(t[1].valueType))throw l.nonListDoubleReducer(e);if(t[0].valueType===u.EmptyList||t[1].valueType===u.EmptyList)throw l.ttestListTooShort("ittest");if(t[0].valueType!==u.ListOfNumber||t[1].valueType!==u.ListOfNumber)throw l.functionTypeError(e,f(t));if(t[0].args.length<2||t[1].args.length<2)throw l.ttestListTooShort("ittest")},Stats:function(r,t){var e=t.length,i=t[0];if(0===e)throw l.methodRequiresList(this._symbol);if(i.valueType===u.EmptyList)throw l.functionTypeError(this._symbol,f(t));if(i.valueType!==u.ListOfNumber)throw l.methodRequiresList(this._symbol);if(1<e)throw l.methodRequiresList(this._symbol)}};for(var i in e)s[i].prototype.typeCheck=e[i];s.BuiltInFunction.random.prototype.typeCheck=function(r,t){var e=t.length,i=t[0],o=t[1],n=t[2];if(3<e)throw l.randomArity();if(!i)throw l.randomArity();if(!(i instanceof s.Distribution||i instanceof s.List))throw l.randomArity();if(i instanceof s.Distribution&&i.args&&(i.args[0]instanceof s.List||i.args[1]instanceof s.List))throw l.randomFromBroadcastDistribution();if(o&&o.valueType!==u.Number)throw l.randomArity();if(n&&n.valueType!==u.Number)throw l.randomArity()},s.BuiltInFunction.shuffle.prototype.typeCheck=function(r,t){var e=t.length;if(e<1)throw l.wrongArity(this._errorSymbol,1,e,this.minArityUsageExample);if(2<e)throw l.wrongArity(this._errorSymbol,2,e,this.maxArityUsageExample);if(!u.isList(t[0].valueType)||2===e&&t[1].valueType!==u.Number)throw l.functionTypeError(this._errorSymbol,f(t))},s.BuiltInFunction.length.prototype.typeCheck=function(r,t){if(1!==t.length||!u.isList(t[0].valueType))throw l.parseError()},s.BuiltInFunction.sort.prototype.typeCheck=function(r,t){var e=t.length;if(e<1)throw l.wrongArity(this._errorSymbol,1,e,this.minArityUsageExample);if(2<e)throw l.wrongArity(this._errorSymbol,2,e,this.maxArityUsageExample);if(!u.isList(t[0].valueType)||!a(t[1].valueType,[u.ListOfNumber,u.EmptyList]))throw l.functionTypeError(this._errorSymbol,f(t))},s.BuiltInFunction.join.prototype.typeCheck=function(r,t){var e=t.length;if(e<this._requiredArity)throw l.wrongArity(this._errorSymbol,this._requiredArity,e,this.minArityUsageExample);var i=t[0].valueType;u.isList(i)||(i=u.listType(i));for(var o=1;o<t.length;o++){var n=t[o].valueType;if(u.isList(n)||(n=u.listType(n)),n!==u.EmptyList&&(i===u.EmptyList&&(i=n),n!==i))throw l.functionTypeError(this._errorSymbol,f(t))}}});\ndefine(\'core/math/features/repr\',[\'require\',\'parsenodes\'],function(require){"use strict";function e(r,t,e){e=e||0;var i=Array(e+1).join("  "),s=i+"  ";return"[\\n"+s+r.map(function(r){return r.repr(t,e+1)}).join(",\\n"+s)+"\\n"+i+"]"}function s(r,t){return""+(t=t||"")+r}var i=require("parsenodes");i.Expression.prototype.repr=function(r,t){return s(this.type,r)+"("+e(this.args,r,t)+")"},i.DoubleInequality.prototype.repr=function(r,t){t=t||0;var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"([\\n"+i+this.args[0].repr(r,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(r,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(r,t+1)+"\\n"+e+"])"},i.Identifier.prototype.repr=i.FreeVariable.prototype.repr=function(r){return s(this.type,r)+"(\'"+this._symbol+"\')"},i.Constant.prototype.repr=function(r){return s(this.type,r)+"("+this.asValue()+")"},i.ExtendSeed.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this.tag+"\', "+e(this.args,r,t)+")"},i.Seed.prototype.repr=function(r){return s(this.type,r)+"("+this.asValue()+")"},i.FunctionCall.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._symbol+"\', "+e(this.args,r,t)+")"},i.Assignment.prototype.repr=function(r,t){return s(this.type,r)+"("+i.Identifier(this._symbol).repr(r,t)+", "+this._expression.repr(r,t)+")"},i.Regression.prototype.repr=i.Equation.prototype.repr=function(r,t){return s(this.type,r)+"("+this._lhs.repr(r,t)+", "+this._rhs.repr(r,t)+")"},i.FunctionDefinition.prototype.repr=function(r,t){return s(this.type,r)+"("+i.Identifier(this._symbol).repr(r,t)+", "+e(this._argSymbols.map(function(r){return i.Identifier(r)}),r,t)+", "+this._expression.repr(r,t)+")"},i.Error.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._msg+"\')"},i.Derivative.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._symbol+"\', "+e(this.args,r,t)+")"},i.SolvedEquation.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._symbol+"\', "+this._expression.repr(r,t)+")"},i.OptimizedRegression.prototype.repr=function(r,t){return s(this.type,r)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(r,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+")"},i.Table.prototype.repr=function(r,t){return s(this.type,r)+"("+e(this.columns,r,t)+")"},i.TableColumn.prototype.repr=function(r,t){return s(this.type,r)+"("+this.header.repr(r,t)+", "+this.length+", "+e(this.values,r,t)+")"},i.Image.prototype.repr=function(r,t){var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"({\\n"+i+"center: "+this.center.repr(r,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(r,t+1)+",\\n"+i+"width: "+this.width.repr(r,t+1)+",\\n"+i+"height: "+this.height.repr(r,t+1)+"},\\n"+i+"opacity: "+this.opacity.repr(r,t+1)+",\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+e+")"},i.Simulation.prototype.repr=function(r){return s(this.type,r)+"({\\n)"},i.Slider.prototype.repr=function(r,t){var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"({\\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(r,t+1)+",\\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(r,t+1))+",\\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(r,t+1))+",\\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(r,t+1))+"},\\n"+e+")"},i.Broadcast.prototype.repr=function(r,t){return s(this.type,r)+"([\'"+this._replacedSymbols.join("\', ")+"\'], "+e(this.args,r,t)+")"}});\ndefine(\'core/math/features/scalarEvalExpression\',[\'require\',\'parsenodes\',\'core/math/functions\'],function(require){"use strict";var n=require("parsenodes"),t=require("core/math/functions"),e={Add:function(n){return"("+n.join("+")+")"},Multiply:function(n){return"("+n.join("*")+")"},Divide:function(n){return"("+n.join("/")+")"},Subtract:function(n){return"("+n.join("-")+")"},Exponent:function(n){return"BuiltIn.pow("+n.join(",")+")"},RawExponent:function(n){return"Math.pow("+n.join(",")+")"},Negative:function(n){return"(-"+n[0]+")"},And:function(n){return n.join("&&")},Piecewise:function(n){return"("+n[0]+"?"+n[1]+":"+n[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var r in e){var o=n[r].prototype;o.scalarEvalExpression=e[r],o.evaluate=t.createEvaluateFunction(o.scalarEvalExpression,i[r])}});\ndefine(\'core/math/reconstitute-node\',[\'require\',\'parsenodes\',\'core/math/types\'],function(require){"use strict";var s=require("parsenodes"),u=require("core/math/types");return function t(e,n){if(u.isList(e)){for(var r=[],o=0;o<n.length;o++)r.push(t(u.elementType(e),n[o]));var a=s.List(r);return a.valueType=e,a}switch(e){case u.Number:case u.Bool:return s.Constant(n);case u.Point:return s.OrderedPair([s.Constant(n[0]),s.Constant(n[1])]);case u.RGBColor:return s.RGBColor([s.Constant(n[0]),s.Constant(n[1]),s.Constant(n[2])]);default:throw new Error("Cannot reconstitute value of a "+u.prettyPrint(e)+".")}}});\ndefine(\'core/math/features/constantcollapsedcopy\',[\'require\',\'parsenodes\',\'core/math/reconstitute-node\',\'core/math/maybe-rational\',\'core/math/errormsg\'],function(require){"use strict";var e=require("parsenodes"),u=e.Constant,l=e.Multiply,c=e.Subtract,i=e.Exponent,s=e.RawExponent,r=e.Seed,o=e.BuiltInFunction,h=require("core/math/reconstitute-node"),p=require("core/math/maybe-rational"),y=require("core/math/errormsg");function f(t){if(t.isConstant){var n=t.asValue();return"number"==typeof n&&!isFinite(n)}}var t={Expression:function(t,n){return this.copyWithArgs(n)},FreeVariable:function(t,n){return this},ScalarExpression:function(t,n){for(var e=[],a=0;a<n.length;a++){if(!n[a].isConstant&&!n[a].isString)return this.copyWithArgs(n);e.push(n[a].asValue())}return u(this.evaluate(e))},TypedFunction:function(t,n){for(var e=[],a=0;a<n.length;a++){if(0!==n[a].getDependencies().length)return this.copyWithArgs(n);e.push(n[a].asValue())}return h(this._outputType,this.evaluate(e))},OrderedPair:function(t,n){return this.copyWithArgs(n)},RGBColor:function(t,n){return this.copyWithArgs(n)},Distribution:function(t,n){return this.copyWithArgs(n)},Add:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.add(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):0===n[0].asValue()?n[1]:0===n[1].asValue()?n[0]:this.copyWithArgs(n)},Multiply:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.mul(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):1===n[0].asValue()?n[1]:1===n[1].asValue()?n[0]:this.copyWithArgs(n)},Subtract:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.sub(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):0===n[0].asValue()?e.Negative([n[1]]):0===n[1].asValue()?n[0]:this.copyWithArgs(n)},Divide:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.div(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):1===n[1].asValue()?n[0]:this.copyWithArgs(n)},Exponent:function(t,n){if(n[0].isConstant&&n[1].isConstant)return u(p.pow(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue()));if(n[0].isConstant){if(n[0].asValue()===Math.E)return o.exp([n[1]]);if(0<n[0].asValue())return s(n)}if(n[1].isConstant){var e=n[1].asValue();if(1===e)return n[0];if(e===Math.floor(e))return s(n);var a=n[1].asMaybeRationalValue();return p.isRational(a)?a.d%2==1?l([a.n%2==0?u(p.maybeRational(1,1)):o.sign([n[0]]),s([o.abs([n[0]]),n[1]])]):s(n):this.copyWithArgs(n)}return this.copyWithArgs(n)},RawExponent:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.pow(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):this.copyWithArgs(n)},Negative:function(t,n){return n[0].isConstant?u(p.neg(n[0].asMaybeRationalValue())):n[0]instanceof e.Negative?n[0].args[0]:this.copyWithArgs(n)},And:function(t,n){return n[0].isConstant&&n[1].isConstant?u(n[0].asValue()&&n[1].asValue()):n[0].isConstant&&!0===n[0]?n[1]:n[0].isConstant&&!1===n[0]?u(!1):n[1].isConstant&&!0===n[1]?n[0]:n[1].isConstant&&!1===n[1]?u(!1):this.copyWithArgs(n)},Piecewise:function(t,n){return n[0].isConstant&&!0===n[0].asValue()?n[1]:n[0].isConstant&&!1===n[0].asValue()?n[2]:this.copyWithArgs(n)},Integral:function(t,n){var e=n[0],a=n[1],s=n[2],i=n[3],r=i.getDependencies();if(a.isConstant&&s.isConstant){var o=s.asValue()-a.asValue();if(i.isConstant)return u(i.asValue()*o);if(!i.dependsOn(e._symbol))return l([i,u(o)]);if(1===r.length&&r[0]===e._symbol)return u(this.evaluate(a.asValue(),s.asValue(),i))}else if(!i.dependsOn(e._symbol))return l([i,c([s,a])]);return this.copyWithArgs(n)},ListAccess:function(t,n){return n[1].isConstant?n[0].elementAt(t,n[1].asValue()-1):this.copyWithArgs(n)},OrderedPairAccess:function(t,n){return n[1].isConstant&&n[0]instanceof e.OrderedPair?n[0].elementAt(t,n[1].asValue()-1):this.copyWithArgs(n)},Broadcast:function(t,n){for(var e=n[0].getDependencies(),a=0;a<e.length;a++)if(-1===this._replacedSymbols.indexOf(e[a]))return this.copyWithArgs(n);for(a=1;a<n.length;a++)if(0!==n[a].getDependencies().length)return this.copyWithArgs(n);var s=n[0].getCompiledFunction(this._replacedSymbols).fn,i=n.slice(1).map(function(t){return t.asValue()}),r=[];for(a=0;a<this.length;a++){for(var o=[],u=0;u<i.length;u++)o.push(i[u][a]);r.push(s.apply(void 0,o))}return h(this.valueType,r)},ReducerFunction:function(t,n){return 0===n[0].getDependencies().length?h(this.valueType,this.evaluate([n[0].asValue()])):this.copyWithArgs(n)},DoubleReducerFunction:function(t,n){if(0!==n[0].getDependencies().length||0!==n[1].getDependencies().length)return this.copyWithArgs(n);var e=Math.min(n[0].length,n[1].length);return h(this.valueType,this.evaluate([n[0].asValue().slice(0,e),n[1].asValue().slice(0,e)]))},ParametrizedReducerFunction:function(t,n){var e=n[0],a=n[1];return a.isConstant&&0===e.getDependencies().length?h(this.valueType,this.evaluate([e.asValue(),a.asValue()])):this.copyWithArgs(n)},RepeatedOperator:function(t,n){var e=n[1],a=n[2];if(f(e)||f(a))switch(this.type){case"Sum":throw y.sumInfiniteBoundError();case"Product":throw y.productInfiniteBoundError();default:throw y.parseError()}if(e.isConstant&&a.isConstant){var s=e.asValue(),i=a.asValue(),r=n[3];if(r.isConstant)return u(this.evaluateConstant([s,i,r.asValue()]));var o=r.getDependencies();if(0===o.length||1===o.length&&o[0]===n[0]._symbol)return u(this.evaluate(s,i,r))}return this.copyWithArgs(n)},ExtendSeed:function(t,n){var e=n[0],a=n[1];return 0===e.getDependencies().length&&0===a.getDependencies().length?r(e.asValue()+"::"+this.tag+a.asValue()):this.copyWithArgs(n)}};for(var n in t)e[n].prototype._constantCollapsedCopy=t[n];o.mod.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.mod(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):this.copyWithArgs(n)},o.sqrt.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant?u(p.sqrt(n[0].asMaybeRationalValue())):this.copyWithArgs(n)},o.nthroot.prototype._constantCollapsedCopy=function(t,n){var e=n[0],a=n[1];if(a.isConstant){if(e.isConstant)return u(p.nthroot(e.asMaybeRationalValue(),a.asMaybeRationalValue()));var s=[e,u(p.reciprocal(a.asMaybeRationalValue()))];return i(s)._constantCollapsedCopy(t,s)}return this.copyWithArgs(n)},o.abs.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant?u(p.abs(n[0].asMaybeRationalValue())):this.copyWithArgs(n)},o.total.prototype._constantCollapsedCopy=function(t,n){if(!n[0].isList)return this.copyWithArgs(n);for(var e=n[0].args,a=0;a<e.length;a++)if(!e[a].isConstant)return this.copyWithArgs(n);return u(p.total(n[0].asMaybeRationalValue()))}});\ndefine(\'core/math/features/polynomialorder\',[\'require\',\'parsenodes\'],function(require){"use strict";var r,e=require("parsenodes"),o={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var t in o){var a=o[t];e[t].prototype.polynomialOrder=(r=(r=(r=a).replace("order0","this.args[0].polynomialOrder(symbol)")).replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+r))}e.Exponent.prototype.polynomialOrder=function(r){var e=this.args[0].polynomialOrder(r),o=this.args[1].polynomialOrder(r);if(0===e&&0===o)return 0;var t=this.args[1];return t.isConstant&&t.asValue()===Math.round(t.asValue())&&0<t.asValue()?e*t.asValue():1/0},e.Piecewise.prototype.polynomialOrder=function(r){return this.dependsOn(r)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(r):1/0:0},e.List.prototype.polynomialOrder=function(r){return 1/0}});\ndefine(\'core/math/features/polynomialcoefficients\',[\'require\',\'parsenodes\',\'core/math/maybe-rational\'],function(require){"use strict";var g=require("parsenodes"),t=require("core/math/maybe-rational").maybeRational,n=g.Constant(t(0,1)),e=g.Constant(t(1,1));g.FreeVariable.prototype.getPolynomialCoefficients=function(t){return t===this._symbol?[n,e]:[this]},g.Constant.prototype.getPolynomialCoefficients=function(t){return[this]},g.Add.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=Math.max(o,n);a++)a<=o&&a<=n?s.push(g.Add([e[a],i[a]])):s.push(n<o?e[a]:i[a]);return s},g.Subtract.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=Math.max(o,n);a++)a<=o&&a<=n?s.push(g.Subtract([e[a],i[a]])):s.push(n<o?e[a]:g.Negative([i[a]]));return s},g.Negative.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=[],o=0;o<e.length;o++)i.push(g.Negative([e[o]]));return i},g.Exponent.prototype.getPolynomialCoefficients=function(t){var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1;if(0<i.length-1)throw"can\'t solve for variable in exponent";if(0==o)return[g.Exponent([e[0],i[0]])];if(this.args[1].isConstant)switch(this.args[1].asValue()){case 0:return[n];case 1:return e;case 2:return g.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(t)}throw"Unable to compile polynomial representation"},g.Multiply.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=o;a++)for(var r=0;r<=n;r++){var l=g.Multiply([e[a],i[r]]),f=s[a+r];s[a+r]=void 0===f?l:g.Add([f,l])}return s},g.Divide.prototype.getPolynomialCoefficients=function(t){var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=[];if(0<i.length-1)throw"Can\'t solve for variable in denominator";for(var n=0;n<e.length;n++)o.push(g.Divide([e[n],i[0]]));return o},g.Expression.prototype.getPolynomialCoefficients=function(t){if(this.dependsOn(t))throw"Unimplemented polynomialCoefficient call";return[this]},g.Piecewise.prototype.getPolynomialCoefficients=function(t){return this.dependsOn(t)?this.args[1].getPolynomialCoefficients(t):[this]}});\ndefine(\'core/math/features/extractconditions\',[\'require\',\'parsenodes\'],function(require){"use strict";var e=require("parsenodes");e.Expression.prototype.extractConditions=function(t,n){if(!this.dependsOn(t))return n;for(var s=0;s<this.args.length;s++){n=this.args[s].extractConditions(t,n)}return n},e.Piecewise.prototype.extractConditions=function(t,n){if(!this.dependsOn(t))return n;if(!this.args[0].dependsOn(t))return n=this.args[1].extractConditions(t,n),n=this.args[2].extractConditions(t,n);var s={};return s[t]=n,e.Piecewise([this.args[0].substitute(s),n,e.Constant(NaN)])}});\ndefine(\'core/math/features/piecewiseDependsOn\',[\'require\',\'parsenodes\'],function(require){"use strict";var e=require("parsenodes");e.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var n=0;n<this.args.length;n++){if(this.args[n].piecewiseDependsOn(e))return!0}return!1},e.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}});\ndefine(\'core/math/domaintypes\',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectDomains=t.allReals=t.knownDomain=t.unknownDomain=t.emptyDomain=void 0;t.emptyDomain=function(){return{type:"empty"}};t.unknownDomain=function(){return{type:"unknown"}};t.knownDomain=function(n){return isNaN(n[0])||isNaN(n[1])||n[1]<n[0]?t.emptyDomain():{type:"known",bounds:n}};t.allReals=function(){return t.knownDomain([-1/0,1/0])};t.intersectDomains=function(n,e){if("empty"===n.type||"empty"===e.type)return t.emptyDomain();if("unknown"===n.type||"unknown"===e.type)return t.unknownDomain();if(n.bounds&&e.bounds){var o=[Math.max(n.bounds[0],e.bounds[0]),Math.min(n.bounds[1],e.bounds[1])];return t.knownDomain(o)}return t.emptyDomain()}});\ndefine(\'core/math/features/bounddomain\',[\'require\',\'parsenodes\',\'core/math/builtinframe\',\'core/math/domaintypes\',\'core/math/comparators\',\'core/math/maybe-rational\',\'core/math/policy\'],function(require){"use strict";var n=require("parsenodes"),u=require("core/math/builtinframe"),m=require("core/math/domaintypes"),l=require("core/math/comparators").table,o=require("core/math/maybe-rational").maybeRational,d=require("core/math/policy").defaultPolicy,D=n.Constant(o(0,1));n.Base.prototype.boundDomain=function(n){return m.unknownDomain()},n.List.prototype.boundDomain=function(n){if(!this.dependsOn(n))return m.allReals();if(!this.args.length)return m.allReals();var o=this.args[0].boundDomain(n);if("known"!==o.type)return m.unknownDomain();for(var a=0;a<this.args.length;a++){var t=this.args[a].boundDomain(n);if("known"!==t.type)return m.unknownDomain();if(t.bounds[0]!==o.bounds[0]||t.bounds[1]!==o.bounds[1])return m.unknownDomain()}return o},n.Expression.prototype.boundDomain=function(n){for(var o=m.allReals(),a=0;a<this.args.length;a++)o=m.intersectDomains(o,this.args[a].boundDomain(n));return o},n.Constant.prototype.boundDomain=function(n){return this.isNaN()?m.emptyDomain():m.allReals()},n.Piecewise.prototype.boundDomain=function(n){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?m.intersectDomains(this.args[0].boundDomain(n),this.args[1].boundDomain(n)):m.unknownDomain()},n.OrderedPair.prototype.boundDomain=function(n){return m.intersectDomains(this.args[0].boundDomain(n),this.args[1].boundDomain(n))},n.BaseComparator.prototype.boundDomain=function(n){if(!this.dependsOn(n))return m.allReals();if("="===this.operator)return m.unknownDomain();var o=this._difference,a=this._difference.boundDomain(n);if(1<o.polynomialOrder(n))return m.unknownDomain();var t=o.getPolynomialCoefficients(n),e=t[1]?t[1].getConcreteTree(d,u):D,i=t[0]?t[0].getConcreteTree(d,u):D;if(!e.isConstant||!i.isConstant)return m.unknownDomain();if(isNaN(e.asValue())||isNaN(i.asValue()))return m.emptyDomain();if(0===e.asValue())return l[this.operator].inclusive?0<=i.asValue()?a:m.emptyDomain():0<i.asValue()?a:m.emptyDomain();var r=-i.asValue()/e.asValue(),s=e.asValue()<0?[-1/0,r]:[r,1/0];return m.intersectDomains(a,m.knownDomain(s))}});\ndefine(\'core/math/features/derivative\',[\'require\',\'parsenodes\',\'core/math/baseparser\',\'core/math/builtinframe\',\'core/math/parsenode/builtinfunction\',\'core/math/maybe-rational\',\'core/math/policy\',\'core/math/types\',\'core/math/errormsg\'],function(require){"use strict";var u=require("parsenodes"),t=require("core/math/baseparser"),o=require("core/math/builtinframe"),e=require("core/math/parsenode/builtinfunction"),r=require("core/math/maybe-rational").maybeRational,c=require("core/math/policy").defaultPolicy,i=require("core/math/types"),s=require("core/math/errormsg"),n=u.Constant(r(0,1)),x=u.Constant(r(1,1)),a=u.Constant(r(2,1)),y=u.OrderedPair([n,n]),d={FreeVariable:function(t){return t===this._symbol?x:n},Constant:function(t){return isFinite(this.asValue())?n:u.Constant(this.asValue())},Negative:function(t){return u.Negative([this.args[0].takeDerivative(t)])},Add:function(t){return u.Add([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},Subtract:function(t){return u.Subtract([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},Multiply:function(t){return u.Add([f(t,this.args[0],u.Multiply([this.args[0].takeDerivative(t),this.args[1]])),f(t,this.args[1],u.Multiply([this.args[0],this.args[1].takeDerivative(t)]))])},Divide:function(t){return u.Subtract([f(t,this.args[0],u.Divide([this.args[0].takeDerivative(t),this.args[1]])),f(t,this.args[1],u.Divide([u.Multiply([this.args[0],this.args[1].takeDerivative(t)]),u.Exponent([this.args[1],a])]))])},Exponent:function(t){return u.Add([f(t,this.args[0],u.Multiply([u.Multiply([this.args[1],u.Exponent([this.args[0],u.Subtract([this.args[1],x])])]),this.args[0].takeDerivative(t)])),f(t,this.args[1],u.Multiply([u.Piecewise([u.Comparator["="]([this.args[0],n]),u.Piecewise([u.Comparator[">"]([this.args[1],n]),n,u.Constant(NaN)]),u.Multiply([u.FunctionCall("\\\\ln",[this.args[0]]),u.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(t)]))]).getConcreteTree(c,o)},Sum:function(t){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(t)])},Product:function(t){var e=u.Sum([this.args[0],this.args[1],this.args[2],u.Piecewise([u.Comparator["="]([n,this.args[3]]),x,n])]),r=u.Multiply([u.Sum([this.args[0],this.args[1],this.args[2],u.Divide([this.args[3].takeDerivative(t),this.args[3]])]),u.Product(this.args)]),a=u.Product([this.args[0],this.args[1],this.args[2],u.Piecewise([u.Comparator["="]([n,this.args[3]]),this.args[3].takeDerivative(t),this.args[3]])]);return u.Piecewise([u.Comparator["="]([n,e]),r,u.Piecewise([u.Comparator["="]([x,e]),a,n])])},Piecewise:function(t){return 2===this.args.length?u.Piecewise([this.args[0],this.args[1].takeDerivative(t)]):3===this.args.length?u.Piecewise([this.args[0],this.args[1].takeDerivative(t),this.args[2].takeDerivative(t)]):void 0},List:function(e){return u.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1]])},OrderedPair:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},OrderedPairAccess:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1]])},Integral:function(t){var e=this.args[0],r=this.args[1],a=this.args[2],i=this.args[3],s={};s[e._symbol]=a;var n={};return n[e._symbol]=r,u.Add([f(t,i,this.copyWithArgs([e,r,a,i.takeDerivative(t)])),u.Subtract([f(t,a,u.Multiply([i.substitute(s),a.takeDerivative(t)])),f(t,r,u.Multiply([i.substitute(n),r.takeDerivative(t)]))])])},SolvedEquation:function(t){return this._expression.takeDerivative(t)},OptimizedRegression:function(t){return this.model.takeDerivative(t)},Broadcast:function(t){for(var e=this._replacedSymbols.slice(),r=this.args.slice(1),a=this._expression.takeDerivative(t),i=0;i<this._replacedSymbols.length;i++){var s,n,x=this._replacedSymbols[i],o=this.args[i+1];o.dependsOn(t)&&(s=this.tmpVar(),n=u.DummyIndex(s),e.push(s),r.push(o.takeDerivative(t)),a=u.Add([a,u.Multiply([this._expression.takeDerivative(x),n])]))}return u.Broadcast(e,[a].concat(r))},Seed:function(t){return u.Constant(NaN)}},v={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),\\\\invNorm(x))}",negatePoint:"-x_1"},p={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],round:["\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}","0/0"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],spearman:["0/0","0/0"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\\\pdf(\\\\tdist(y),x)*\\\\frac{-(y+1)*x}{y+x^2}","y_1*\\\\frac{1}{2}\\\\pdf(\\\\tdist(y),x)(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))"],invT:["x_1/\\\\pdf(\\\\tdist(y),\\\\invT(x, y))","0/0"],addPoints:["x_1","y_1"],subtractPoints:["x_1","-y_1"],multiplyPoint:["x_1*y","x*y_1"],dividePoint:["x_1/y","-x*(y_1/y^2)"],midpoint:["x_1/2","y_1/2"],distance:["-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/\\\\distance(x,y)","((y.x-x.x)*y_1.x+(y.y-x.y)*y_1.y)/\\\\distance(x,y)"]},h={tcdf:["-x_1*\\\\pdf(\\\\tdist(z),x)","y_1*\\\\pdf(\\\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","y_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\pdf(\\\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\\\{0<=z<=1: z_1*\\\\pdf(\\\\binomialdist(y,z),x)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\\\{y<=x: \\\\frac{y_1}{(z-y)^2}, 0\\\\}","\\\\{z>=x: -\\\\frac{z_1}{(z-y)^2}, 0\\\\}"],invUniform:["\\\\{y<=x<=z: x_1*(z-y), 0\\\\}","\\\\{y<=x<=z: y_1*(1-x), 0\\\\}","\\\\{y<=x<=z: z_1*x, 0\\\\}"]},l={normalcdf:["-x_1\\\\pdf(\\\\normaldist(z,u), x)","y_1\\\\pdf(\\\\normaldist(z,u), y)","-z_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))","u_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})"],binomcdf:["0/0","0/0","0/0","\\\\{0<=u<=1: u_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}"],uniformcdf:["\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}","\\\\{z>u: 0/0, y_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}","\\\\{z>u: 0/0, z_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}","\\\\{z>u: 0/0, u_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}"]};for(var _ in v)e[_].prototype.takeDerivative=function(a,i){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t)};return f(t,e[0],a.substitute(r),i).getConcreteTree(c,o)}}(t.parse(v[_]),e[_].prototype._outputType||i.Number);for(_ in p)e[_].prototype.takeDerivative=function(a,i,s){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t)};return u.Add([f(t,e[0],a.substitute(r),s),f(t,e[1],i.substitute(r),s)]).getConcreteTree(c,o)}}(t.parse(p[_][0]),t.parse(p[_][1]),e[_].prototype._outputType||i.Number);for(_ in h)e[_].prototype.takeDerivative=function(a,i,s,n){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t),z:e[2],z_1:e[2].takeDerivative(t)};return u.Add([u.Add([f(t,e[0],a.substitute(r),n),f(t,e[1],i.substitute(r),n)]),f(t,e[2],s.substitute(r),n)]).getConcreteTree(c,o)}}(t.parse(h[_][0]),t.parse(h[_][1]),t.parse(h[_][2]),e[_].prototype._outputType||i.Number);for(_ in l)e[_].prototype.takeDerivative=function(a,i,s,n,x){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t),z:e[2],z_1:e[2].takeDerivative(t),u:e[3],u_1:e[3].takeDerivative(t)};return u.Add([u.Add([f(t,e[0],a.substitute(r),x),f(t,e[1],i.substitute(r),x)]),u.Add([f(t,e[2],s.substitute(r),x),f(t,e[3],n.substitute(r),x)])]).getConcreteTree(c,o)}}(t.parse(l[_][0]),t.parse(l[_][1]),t.parse(l[_][2]),t.parse(l[_][3]),e[_].prototype._outputType||i.Number);var f=function(t,e,r,a){if(void 0===a&&(a=i.Number),e.dependsOn(t))return r;if(a===i.Number)return n;if(a===i.Point)return y;throw s.parseError()};for(var m in d){var g=d[m];u[m].prototype.takeDerivative=g}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(t){e[t].prototype.takeDerivative=function(t){for(var e=0;e<this.args.length;e++)if(this.args[e].dependsOn(t))return u.Constant(NaN);return n}})});\ndefine(\'core/math/features/substitute\',[\'require\',\'parsenodes\'],function(require){"use strict";var t=require("parsenodes"),s={Identifier:function(t){return t[this._symbol]?t[this._symbol]:this},FreeVariable:function(t){return t[this._symbol]?t[this._symbol]:this},Constant:function(t){return this},Expression:function(s){return this.copyWithArgs(this.args.map(function(t){return t.substitute(s)}))},List:function(s){return t.List(this.args.map(function(t){return t.substitute(s)}))},SolvedEquation:function(t){return new this.constructor(this._symbol,this._expression.substitute(t))},OptimizedRegression:function(t){return new this.constructor(this.model.substitute(t),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var i in s)t[i].prototype.substitute=s[i]});\ndefine(\'core/math/features/isImplicit\',[\'require\',\'parsenodes\'],function(require){"use strict";var i=require("parsenodes");function t(t){return!(t[0]instanceof i.FreeVariable)||t[1].dependsOn(t[0]._symbol)}i.Base.prototype.isImplicit=function(){return!1},i.Equation.prototype.isImplicit=function(){return t(this.args)},i.BaseComparator.prototype.isImplicit=function(){return t(this.args)},i.Broadcast.prototype.isImplicit=function(){return this._expression.isImplicit()}});\ndefine(\'core/math/workerconfig\',[],function(){"use strict";return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0}});\ndefine(\'core/math/features/solve\',[\'require\',\'core/math/baseparser\',\'parsenodes\',\'core/math/errormsg\',\'core/math/builtinframe\',\'core/math/workerconfig\',\'core/math/maybe-rational\',\'core/math/policy\'],function(require){"use strict";var e=require("core/math/baseparser"),t=require("parsenodes"),r=t.Base,y=t.Constant,a=t.Equation,q=t.SolvedEquation,i=t.BaseComparator,V=t.List,T=require("core/math/errormsg"),m=require("core/math/builtinframe"),I=require("core/math/workerconfig"),n=require("core/math/maybe-rational").maybeRational,v=require("core/math/policy").defaultPolicy,d=y(n(0,1));var o=e.parse("b*b"),s=e.parse("4*a*c"),l=e.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),c=e.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),u=e.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),p=e.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),b=e.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),f=e.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]");function E(e,r,t,a){for(var i,n,o,s,l=[],c=[],u=0;u<t.length;u++){var p=t[u],b=0;V.eachArgs(e,[r],function(e){var r=e[0];b=Math.max(b,r.polynomialOrder(p))});var f=2<b,g=1<t.length&&!e.validSolvedVariable(p),h=a&&r.piecewiseDependsOn(p);f||g||h?(c[u]={},l[u]=1/0):(c[u]=[],l[u]=0,V.eachArgs(e,[r],function(e){var r,t,a,i=e[0];r=i.getPolynomialCoefficients(p),(t=Object.create(m)).a=r[2]?r[2].tryGetConcreteTree(v,m):d,t.b=r[1]?r[1].tryGetConcreteTree(v,m):d,t.c=r[0]?r[0].tryGetConcreteTree(v,m):d,n=t,c[u].push(n),l[u]=Math.max(l[u],0===(a=n).a.asValue()?0===a.b.asValue()?0:1:2)}))}return s=1===t.length?(n=c[0],o=t[0],l[0]):(i=0===l[0]?1:0===l[1]?0:l[0]===l[1]?"y"===t[0]?0:1:l[0]<l[1]?0:1,n=c[i],o=t[i],l[i]),{localFrame:n,variableOfInterest:o,effectiveOrder:s}}var M={inequality:function(e){return g(e),{node:f.getConcreteTree(v,e),branchMultiplier:4}},generalEquation:function(e){return g(e),e.a.isConstant&&0===e.a.asValue()?{node:u.getConcreteTree(v,e),branchMultiplier:1}:e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?{node:p.getConcreteTree(v,e),branchMultiplier:1}:{node:b.getConcreteTree(v,e),branchMultiplier:2}}};function g(e){e.f=o.getConcreteTree(v,e),e.g=s.getConcreteTree(v,e),e.p=l.getConcreteTree(v,e),e.q=c.getConcreteTree(v,e),e.m=y(n(1e305,1))}r.prototype.trySolve=function(e,r){try{return this.solve(e,r)}catch(e){if(e instanceof t.Error)return e;throw e}},a.prototype.solve=function(e,r){return this.asComparator().solve(e,r)},i.prototype.solve=function(e,r){var t=this.tryGetConcreteTree(e,r);if(t.isError)return t;if(t.isConstant)return t;var a="="!==this.getOperator();if(!I.plotImplicits&&t.isImplicit())throw new T.implicitsDisabled;var i=this._difference.tryGetConcreteTree(e,r);i.isBroadcast&&(i=i.asList(e));var n=i.getDependencies();if(0===n.length)return i.isList?V(i.args.map(function(e){return y(0===e.asValue())})):y(0===i.asValue());if(1===n.length&&i.isList&&!a)return i;if(1===n.length&&!a&&!I.plotSingleVariableImplicitEquations)return T.singleVariableImplicitEquationsDisabled();var o=V.wrap(i);if(2<n.length)return T.tooManyVariables(this.getSliderVariables(e,t)).setDependencies(n);if(a&&!e.validInequalityVariables(n))return T.invalidInequalityVariables().setDependencies(n);var s=E(e,o,n,a),l=s.localFrame,c=s.effectiveOrder,u=s.variableOfInterest;if(e.complicatedPolarImplicit(u,c))return T.complicatedPolarImplicit().setDependencies(n);if(!e.validImplicitVariables(n))return T.invalidImplicitVariables();if(2<c)return i;for(var p=a?M.inequality:M.generalEquation,b=[],f=1,g=0;g<l.length;g++){var h=p(l[g]),m=h.node,f=h.branchMultiplier;if(m.isError)return m;if(m.isConstant)b.push(m);else for(var v=0;v<m.args.length;v++){var d=m.args[v],C=o.args[g].extractConditions(u,d).getConcreteTree(e,r);b.push(C)}}return q(u,V(b),f)}});\ndefine(\'core/types/graphmode\',["require","exports"],function(require,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.PARAMETRIC_CURVE_3D=I.Z_3D=I.OBJECT3D=I.VISUALIZATION=I.NONE=I.IMPLICIT=I.POLYGONFILL=I.POLAR=I.PARAMETRIC=I.XYPOINT_MOVABLE=I.XYPOINT=I.Y=I.X=void 0,I.X=1,I.Y=2,I.XYPOINT=3,I.XYPOINT_MOVABLE=4,I.PARAMETRIC=5,I.POLAR=6,I.POLYGONFILL=7,I.IMPLICIT=8,I.NONE=10,I.VISUALIZATION=11,I.OBJECT3D=12,I.Z_3D=13,I.PARAMETRIC_CURVE_3D=14});\ndefine(\'core/math/distribution-spec\',["require","exports","core/math/baseparser","tslib"],function(require,d,i,l){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.getFunctionSpecFromTree=d.parseToplevelFunction=d.DistributionParameterDefaultsMap=void 0,d.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var u={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};function s(t){var i=t,s=u[i.type];if(!s)switch("Assignment"===i.type&&(i=i._expression),i.type){case"FunctionCall":s=d.DistributionParameterDefaultsMap[i._symbol];break;default:return}if(s){for(var e={},a=s.params,o=i.args,r=0;r<a.length;r++){var n=o[r];e[a[r]]=n&&n.getInputString()||""}return l.__assign(l.__assign({},s),{span:i.getInputSpan(),values:e})}}d.parseToplevelFunction=function(t){return s(i.parse(t,{trailingComma:!0}))},d.getFunctionSpecFromTree=s});\ndefine(\'core/math/evaluationstate\',["require","exports","core/vendor/d3-color","parsenodes","./errormsg","core/types/graphmode","core/lib/label","core/math/distribution-spec","./types"],function(require,e,h,b,_,y,E,S,V){"use strict";function M(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function x(){return{operator:"=",variables:[]}}function I(e,r,i){var a=e.variables;if(a&&a.length){for(var t={},n=0,s=a;n<s.length;n++){t[o=s[n]]=!0}for(var o in i)t[o]=!0;i=t}e.variables=r.sliderVariables(Object.keys(i))}Object.defineProperty(e,"__esModule",{value:!0}),e.addSliderPrompts=e.EvaluationState=e.defaultEvaluationState=void 0,e.defaultEvaluationState=x,e.EvaluationState=function(e,r,i){if(r.isTable)return function(e,r){for(var i=[],a=0;a<e.columns.length;a++){var t=r.columns[a],n=t.isError?[]:t.values.map(M),s={dependent:!t.isIndependent,discrete:!!t.isIndependent,values:n};t.isError&&(s.error=t.getError()),i.push(s)}return{column_data:i}}(r,i);if(r.isImage)return a=e,t=r,s={variables:[],errorMap:{},dimensions:{}},(n=i).center.isError&&(s.errorMap.center=!0),n.radianAngle.isError&&(s.errorMap.angle=!0),n.width.isError&&(s.errorMap.width=!0),n.height.isError&&(s.errorMap.height=!0),n.opacity.isError&&(s.errorMap.opacity=!0),n.center.isError||n.radianAngle.isError||n.width.isError||n.height.isError||n.opacity.isError?s.variables=t.getSliderVariables(a,n):(s.dimensions.x=[],s.dimensions.y=[],s.dimensions.radianAngle=[],s.dimensions.width=[],s.dimensions.height=[],s.dimensions.opacity=[],b.List.eachArgs(a,[n.center,n.radianAngle,n.width,n.height,n.opacity],function(e){var r=e[0].asValue(),i=+e[1].asValue(),a=Math.atan2(Math.sin(i),Math.cos(i));s.dimensions.x.push(+r[0]),s.dimensions.y.push(+r[1]),s.dimensions.radianAngle.push(a),s.dimensions.width.push(+e[2].asValue()),s.dimensions.height.push(+e[3].asValue()),s.dimensions.opacity.push(Math.max(0,Math.min(1,+e[4].asValue())))}),(a.graphingEnabled()?t.getGraphMode(a,n):y.NONE)!==y.NONE&&(s.is_graphable=!0),n.moveStrategy&&(s.move_strategy=n.moveStrategy),t.center&&("Identifier"===t.center.type?(s.center_reference_id=t.center.referencedStatementId,s.center_reference_symbol=t.center._symbol):"OrderedPair"===t.center.type&&n.center.valueType===V.Point&&(s.center_is_point_literal=!0))),s;var a,t,n,s;if(r.isSimulation)return function(e,r){var i=r.fps,a=i.asValue(),t=void 0;("number"!=typeof a||a<0)&&(a=0,t=_.simulationFPSNonNegativeNumber().getError());for(var n={},s=0,o=i.getDependencies();s<o.length;s++){n[o[s]]=!0}var l={variables:[],fps:a,fps_error:t};return I(l,e,n),l}(e,i);var o,l=x();if(i.isError&&(!(r instanceof b.FunctionDefinition)||i.blocksExport))return l.error=i.getError(),l.variables=r.getSliderVariables(e,i),l.is_single_identifier=r instanceof b.Identifier,l;i instanceof b.RGBColor&&(o=i.asValue(),l.rgb_value=h.rgb(o[0],o[1],o[2]).formatHex()),i.moveStrategy&&(l.move_strategy=i.moveStrategy,l.default_drag_mode=i.defaultDragMode),r.isInequality()&&(l.is_inequality=!0),l.operator=r.getOperator(),i instanceof b.SolvedEquation?!0!==i._expression.asValue()&&!1!==i._expression.asValue()&&(l.assignment=i._symbol):r instanceof b.Assignment&&(l.assignment=r._symbol);var d,u,p=e.graphingEnabled()?r.getGraphMode(e,i):y.NONE;p!==y.NONE&&(l.is_graphable=!0,l.expression_type=r.getExpressionType(p,i.valueType),i.isShadeBetween()&&(l.is_shade_between=!0),(d=r.tableInfo(e,i))&&(l.is_tableable=!0,l.table_info=d)),void 0!==i.valueType&&V.isList(i.valueType)&&(l.is_concrete_list=!0,i.valueType!==V.ListOfColor||(u=i.asValue())&&(l.rgb_value=u.map(function(e){return h.rgb(e[0],e[1],e[2]).formatHex()}))),l.variables=l.is_graphable?[]:r.getSliderVariables(e,i),l.is_single_identifier=r instanceof b.Identifier,i.isConstant&&(l.constant_value=i.asValue());var g=i.getEvaluationInfo();if(!g||"="!==l.operator||r.isConstant||r.isFunction||i.valueType===V.Bool||i.valueType===V.ListOfBool||r instanceof b.Equation||r instanceof b.And||(l.is_evaluable=!0,l.zero_values=g),i instanceof b.OptimizedRegression){var c=i,f={};for(var v in c.parameters)c.parameters.hasOwnProperty(v)&&(f[E.identifierToLatex(v)]=+c.parameters[v].asValue());l.is_regression=!0,l.regression={parameters:f,residualVariable:E.identifierToLatex(c.residualVariable),residualSuggestionId:c.residualSuggestionId,shouldSuggestLogMode:c.shouldSuggestLogMode,isLinear:c.isLinear,statistics:c.statistics,parameterWarning:c.parameterWarning}}var m=S.getFunctionSpecFromTree(r);return m&&m.discrete&&(l.is_discrete_distribution=!0),l},e.addSliderPrompts=I});\ndefine(\'core/math/statementanalysis\',[\'require\',\'core/math/evaluationstate\',\'pjs\',\'core/types/graphmode\',\'core/math/workerconfig\'],function(require){"use strict";var i=require("core/math/evaluationstate").EvaluationState,e=require("pjs"),t=require("core/types/graphmode"),r=require("core/math/workerconfig");return e(function(e){e.init=function(e,t,r){this.policy=e,this.rawTree=t,this.concreteTree=r,this.evaluationState=i(e,t,r)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!r.pointsOfInterest)return!1;var e=this.getGraphMode();return e===t.X||e===t.Y}})});\ndefine(\'core/math/expression-types\',["require","exports"],function(require,T){"use strict";var l,i;Object.defineProperty(T,"__esModule",{value:!0}),T.isClickableExpressionType=T.getReconciledExpressionProps=T.EXPRESSION_PROP_DEFAULTS=T.ExpressionType=void 0,(i=l=T.ExpressionType||(T.ExpressionType={})).X_OR_Y="X_OR_Y",i.SINGLE_POINT="SINGLE_POINT",i.POINT_LIST="POINT_LIST",i.PARAMETRIC="PARAMETRIC",i.POLAR="POLAR",i.IMPLICIT="IMPLICIT",i.POLYGON="POLYGON",i.HISTOGRAM="HISTOGRAM",i.DOTPLOT="DOTPLOT",i.BOXPLOT="BOXPLOT",i.TTEST="TTEST",i.STATS="STATS",i.CUBE="CUBE",i.SPHERE="SPHERE",T.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}},T.getReconciledExpressionProps=function(i,s){if(void 0===i)return{points:!1,lines:!1,fill:!1};var e=T.EXPRESSION_PROP_DEFAULTS[i];switch(i){case l.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case l.POINT_LIST:case l.DOTPLOT:return{points:void 0===s.points?e.points:s.points,lines:void 0===s.lines?e.lines:s.lines,fill:!1};case l.PARAMETRIC:case l.POLYGON:case l.X_OR_Y:case l.POLAR:case l.IMPLICIT:case l.HISTOGRAM:case l.BOXPLOT:case l.TTEST:case l.STATS:case l.CUBE:case l.SPHERE:return{points:!1,lines:void 0===s.lines?e.lines:s.lines,fill:void 0===s.fill?e.fill:s.fill};default:return i}},T.isClickableExpressionType=function(i){if(void 0===i)return!1;switch(i){case l.SINGLE_POINT:case l.POINT_LIST:case l.PARAMETRIC:case l.POLYGON:case l.X_OR_Y:case l.POLAR:case l.IMPLICIT:return!0;case l.HISTOGRAM:case l.BOXPLOT:case l.DOTPLOT:case l.TTEST:case l.STATS:case l.CUBE:case l.SPHERE:return!1;default:return i}}});\ndefine(\'core/math/features/analyze\',[\'require\',\'underscore\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/builtin\',\'core/math/builtinframe\',\'core/math/parsenode/builtinfunction\',\'core/math/errormsg\',\'core/math/comparators\',\'core/math/types\',\'core/types/graphmode\',\'core/math/expression-types\',\'core/math/distribution-spec\',\'core/math/workerconfig\'],function(require){"use strict";var l=require("underscore"),h=require("parsenodes"),p=require("core/math/statementanalysis"),a=require("core/math/builtin"),u=require("core/math/builtinframe"),o=require("core/math/parsenode/builtinfunction"),d=require("core/math/errormsg"),n=require("core/math/comparators"),s=require("core/math/types"),c=require("core/types/graphmode"),y=require("core/math/expression-types").ExpressionType,g=require("core/math/distribution-spec").DistributionParameterDefaultsMap,b=require("core/math/workerconfig");function v(e,t,r,i){if(i.isError)return p(e,r,i);var n=i.getDependencies();switch(i.valueType){case s.Distribution:case s.ListOfDistribution:case s.RGBColor:case s.ListOfColor:case s.EmptyList:return p(e,r,i);case s.Point:case s.ListOfPoint:return n.length?e.validParametricVariables(n)?p(e,r,i):p(e,r,d.tooManyVariables(r.getSliderVariables(e,i)).setDependencies(n)):p(e,r,i);case s.Number:case s.ListOfNumber:return 0===n.length?p(e,r,i):n.length<=e.dimensions()-1?e.validExpressionVariables(n)?p(e,r,i):p(e,r,d.equationRequired(e.implicitDependency(n)).setDependencies(n)):e.validImplicitVariables(n)?p(e,r,d.equationRequired().setDependencies(n)):p(e,r,d.tooManyVariables(r.getSliderVariables(e,i)).setDependencies(n));default:return p(e,r,d.parseError())}}function m(e){return o.pdf([e,h.FreeVariable("x")])}function e(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();return i.length?p(e,this,d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):p(e,this,this.tryGetConcreteTree(e,t))}function t(a){return function(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();if(i.length)return p(e,this,d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i));var n,s=p(e,this,this.tryGetConcreteTree(e,t));return r.isError||(s.evaluationState.expression_type=y.TTEST,n=r.args.map(function(e){return e.asValue()}),s.evaluationState.ttest_results=a.apply(null,n)),s}}h.Base.prototype.analyze=function(e,t){return p(e,this,this.tryGetConcreteTree(e,t))},h.FunctionCall.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);return!r.isError&&g[this._symbol]&&0===r.getDependencies().length&&(r=m(r).tryGetConcreteTree(e,t)),v(e,0,this,r)},h.Expression.prototype.analyze=function(e,t){return v(e,0,this,this.tryGetConcreteTree(e,t))},h.FunctionDefinition.prototype.analyze=function(e,t){if(u[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split("_")[0];if(o[r])return p(e,this,d.cannotRedefine(this._symbol,r));var i=this.tryGetConcreteTree(e,t);if(i.isError)return p(e,this,i);var n=this._argSymbols,s=i.getDependencies();if(-1!==s.indexOf(this._symbol))return p(e,this,d.selfReferentialFunction(this._symbol));var a=s.filter(function(e){return-1===n.indexOf(e)});return e.unplottablePolarFunction(this._symbol,s)?p(e,this,d.unplottablePolarFunction()):a.some(e.assignmentForbidden)?p(e,this,d.addArgumentsToDefinition(a,this._symbol,n).setDependencies(s)):a.length?p(e,this,d.tooManyVariables(this.getSliderVariables(e,i)).setDependencies(s)):p(e,this,i)},h.Assignment.prototype.analyze=function(e,t,r){var i=this._symbol;if(!e.validLHS(i))return p(e,this,d.invalidLHS(i));if(u[i])return this.asEquation().analyze(e,t);var n=this.tryGetConcreteTree(e,t);if(!n.isError&&this._expression instanceof h.FunctionCall&&g[this._expression._symbol]&&0===n.getDependencies().length&&(n=m(n).tryGetConcreteTree(e,t)),n.isError)return p(e,this,n);var s=n.getDependencies();if(this.isEquation(n))return this.asEquation().analyze(e,t);if(1<s.length){var a=this.getSliderVariables(e,n);return a.length?p(e,this,d.tooManyVariables(a).allowExport().setDependencies(s)):p(e,this,n)}var o=this.getMoveStrategy(e,t,n,r,this.userData);if(o){var l=this.getDefaultDragMode(o);return p(e,this,h.MovablePoint(n.args,o,l))}return p(e,this,n)},h.Regression.prototype.analyze=function(e,t,r,i,n){return p(e,this,this.tryOptimize(e,t,r,i,n))},h.Polygon.prototype.analyze=e,h.Histogram.prototype.analyze=e,h.Object3D.prototype.analyze=e,h.DotPlot.prototype.analyze=e,h.BoxPlot.prototype.analyze=e,h.TTest.prototype.analyze=t(a.ttest),h.IndependentTTest.prototype.analyze=t(a.ittest),h.Stats.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();if(i.length)return p(e,this,d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i));var n,s=p(e,this,this.tryGetConcreteTree(e,t));return r.isError||(s.evaluationState.expression_type=y.STATS,n=r.args.map(function(e){return e.asValue()}),s.evaluationState.stats_results=a.stats.apply(null,n)),s},h.Equation.prototype.analyze=h.BaseComparator.prototype.analyze=function(e,t){var r="="!==this.getOperator();if(!b.plotInequalities&&r)return p(e,this,d.inequalitiesDisabled());var i=this.trySolve(e,t);if(i.isError)return p(e,this,i);if(i instanceof h.SolvedEquation&&i.getDependencies().length){var n=i.getDependencies().concat(i._symbol);if(!e.validImplicitVariables(n))return p(e,this,d.invalidImplicitVariables().setDependencies(n))}return this.getGraphMode(e,i)!==c.IMPLICIT||e.validImplicitVariables(i.getDependencies())?p(e,this,i):p(e,this,d.invalidImplicitVariables().setDependencies(i.getDependencies()))},h.DoubleInequality.prototype.analyze=function(e,t){if(!b.plotInequalities)return p(e,this,d.inequalitiesDisabled());var r=this.tryGetConcreteTree(e,t);if(r.isError)return p(e,this,r);var i=r.getDependencies();return n.table[this._operators[0]].direction!==n.table[this._operators[1]].direction?p(e,this,d.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(i)?2<i.length?p(e,this,d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?p(e,this,d.complicatedDoubleInequality().setDependencies(i)):p(e,this,r):p(e,this,d.invalidDoubleInequalityVariables().setDependencies(i))},h.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return p(e,this,r);var i=r.getDependencies();return i.length?e.validDoubleInequalityVariables(i)?p(e,this,d.complicatedDoubleInequality().setDependencies(i)):p(e,this,d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):p(e,this,r)},h.OrderedPair.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);if(i.isError)return p(e,this,i);var n=this.getMoveStrategy(e,t,i,r,this.userData);if(n){var s=this.getDefaultDragMode(n);return p(e,this,h.MovablePoint(i.args,n,s))}return v(e,0,this,i)},h.Table.prototype.analyze=function(e,t){for(var r,i=Object.create(t),n=Object.create(i),s=[],a=0;a<this.columns.length;a++){var o,l=this.columns[a].analyze(e,i,n);0===a&&(l.concreteTree.isIndependent?e.validFirstColumnVariable(l.concreteTree.header._symbol)?n[r=l.concreteTree.header._symbol]=h.FreeVariable(r):l=p(e,this.columns[a],d.invalidFirstTableColumn()):l=p(e,this.columns[a],d.invalidDependentFirstTableColumn())),l.concreteTree.isIndependent?l.rawTree.exportToLocal(l.concreteTree,i):l.concreteTree.isError||(o=function(e,t){return e.filter(function(e){return!t[e]})}(l.concreteTree.header.getDependencies(),i)).length&&(l=p(e,this.columns[a],d.tooManyVariables(o).setDependencies(o))),s.push(l.concreteTree)}var u=h.Table(s),c=p(e,this,u);return c.evaluationState.is_graphable=!0,c},h.TableColumn.prototype.analyze=function(e,t,r){var i=this.header.tableError();if(i)return p(e,this,d.invalidTableHeader(i));var n=this.tryGetConcreteTree(e,t,r);if(n.isError)return p(e,this,n);if(n.header.isError)return p(e,this,n.header);if(n.values.isError)return p(e,this,n.values);for(var s,a,o=0;o<n.values.length;o++){n.values[o].isError||((s=this.values[o]&&this.values[o].tableError())?n.values[o]=d.invalidTableEntry(s):(a=n.values[o].getDependencies()).length&&(n.values[o]=d.tooManyVariables(a).setDependencies(a)))}return p(e,this,n)},h.Image.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);if(i.radianAngle.isError||i.center.isError||i.width.isError||i.height.isError||i.opacity.isError)return p(e,this,i);var n=i.center.getDependencies(),s=i.radianAngle.getDependencies(),a=i.width.getDependencies(),o=i.height.getDependencies(),l=i.opacity.getDependencies();return n.length||s.length||a.length||o.length||l.length?p(e,this,h.Image({center:n.length?d.tooManyVariables(s).setDependencies(n):i.center,radianAngle:s.length?d.tooManyVariables(s).setDependencies(s):i.radianAngle,width:a.length?d.tooManyVariables(a).setDependencies(a):i.width,height:o.length?d.tooManyVariables(o).setDependencies(o):i.height,opacity:l.length?d.tooManyVariables(l).setDependencies(l):i.opacity})):(i.moveStrategy=this.getMoveStrategy(e,t,i,r,this.userData),p(e,this,i))},h.Simulation.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);return p(e,this,i)},h.Slider.prototype.analyze=function(e,t){var r,i,n,s=this.tryGetConcreteTree(e,t),a=s.sliderInfo,o=(i=a.missingVars.length?(r=l.unique(a.missingVars),p(e,this,d.tooManyVariables(e.sliderVariables(r)).setDependencies(r).allowExport())):p(e,this,s)).evaluationState;return b.sliders&&(o.assignment=a.exportedSymbol,o.slider_min_number=a.values.min,o.slider_max_number=a.values.max,o.slider_step_number=a.values.step,o.slider_min_valid=a.valids.min,o.slider_max_valid=a.valids.max,o.slider_step_valid=a.valids.step,n=o.slider_min_valid&&o.slider_max_valid&&o.slider_step_valid,o.is_slider=!0,o.raw_slider_latex=this.getInputString(),o.is_slidable=n,o.is_animatable=o.is_slidable&&!o.is_graphable,a.errMsg&&(o.error=a.errMsg.getError())),delete o.is_evaluable,delete o.zero_values,i}});\ndefine(\'core/math/features/analyzeFourFunction\',[\'require\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/errormsg\',\'core/math/parsenode/builtinfunction\',\'core/math/builtinconstants\'],function(require){"use strict";var n=require("parsenodes"),u=require("core/math/statementanalysis"),s=require("core/math/errormsg"),a=require("core/math/parsenode/builtinfunction"),p=require("core/math/builtinconstants");function t(n,t){return u(n,this,s.inequalitiesUnsupported())}n.Base.prototype.analyzeFourFunction=function(n,t){var r=this.tryGetConcreteTree(n,t);return r.isError?u(n,this,r):u(n,this,s.parseError())},n.Expression.prototype.analyzeFourFunction=function(n,t){var r=this.tryGetConcreteTree(n,t);if(r.isError)return u(n,this,r);var o=r.getDependencies();if(0<o.length){var e=o[0],i=a.hasOwnProperty(e)?s.functionUnsupported(e):p.hasOwnProperty(e)?s.constantUnsupported(e):s.variablesUnsupported(e);return u(n,this,i)}return u(n,this,r)},n.Assignment.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.equationsUnsupported())},n.And.prototype.analyzeFourFunction=t,n.DoubleInequality.prototype.analyzeFourFunction=t,n.BaseComparator.prototype.analyzeFourFunction=t,n.Regression.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.regressionsUnsupported())},n.OrderedPair.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.pointsUnsupported())},n.RGBColor.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.colorsUnsupported())}});\ndefine(\'core/math/features/analyzeScientific\',[\'require\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/errormsg\',\'core/math/builtinframe\'],function(require){"use strict";var t=require("parsenodes"),s=require("core/math/statementanalysis"),a=require("core/math/errormsg"),c=require("core/math/builtinframe");function e(t,e){return s(t,this,a.inequalitiesUnsupported())}t.Base.prototype.analyzeScientific=function(t,e){var i=this.tryGetConcreteTree(t,e);return i.isError?s(t,this,i):s(t,this,a.parseError())},t.Expression.prototype.analyzeScientific=function(t,e){var i=this.tryGetConcreteTree(t,e);if(i.isError)return s(t,this,i);var n=i.getDependencies();return 0<n.length?s(t,this,a.tooManyVariables(n)):s(t,this,i)},t.Assignment.prototype.analyzeScientific=function(t,e){var i=this._symbol;if(c[i])return s(t,this,a.cannotRedefine(i));var n=this.tryGetConcreteTree(t,e);if(n.isError)return s(t,this,n);var r=n.getDependencies();return this.isEquation(n)?s(t,this,a.equationsUnsupported()):0<r.length?s(t,this,a.tooManyVariables(r)):s(t,this,n)},t.FunctionDefinition.prototype.analyzeScientific=function(t,e){if(c[this._symbol])return s(t,this,a.cannotRedefine(this._symbol));var i=this.tryGetConcreteTree(t,e);if(i.isError)return s(t,this,i);var n=this._argSymbols,r=i.getDependencies();if(-1!==r.indexOf(this._symbol))return s(t,this,a.selfReferentialFunction(this._symbol));var o=r.filter(function(t){return-1===n.indexOf(t)});return o.length?s(t,this,a.addArgumentsToDefinition(o,this._symbol,n)):s(t,this,i)},t.Equation.prototype.analyzeScientific=function(t,e){return s(t,this,a.equationsUnsupported())},t.And.prototype.analyzeScientific=e,t.DoubleInequality.prototype.analyzeScientific=e,t.BaseComparator.prototype.analyzeScientific=e,t.Regression.prototype.analyzeScientific=function(t,e){return s(t,this,a.regressionsUnsupported())},t.OrderedPair.prototype.analyzeScientific=function(t,e){return s(t,this,a.pointsUnsupported())},t.RGBColor.prototype.analyzeScientific=function(t,e){return s(t,this,a.colorsUnsupported())}});\ndefine(\'core/math/features/analyzeSingleExpressionScientific\',[\'require\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/errormsg\',\'core/math/parsenode/builtinfunction\',\'core/math/builtinconstants\'],function(require){"use strict";var e=require("parsenodes"),s=require("core/math/statementanalysis"),p=require("core/math/errormsg"),a=require("core/math/parsenode/builtinfunction"),c=require("core/math/builtinconstants");function n(e,n){return s(e,this,p.inequalitiesUnsupported())}e.Base.prototype.analyzeSingleExpressionScientific=function(e,n){var t=this.tryGetConcreteTree(e,n);return t.isError?s(e,this,t):s(e,this,p.parseError())},e.Expression.prototype.analyzeSingleExpressionScientific=function(e,n){var t=this.tryGetConcreteTree(e,n);if(t.isError)return s(e,this,t);var i=t.getDependencies();if(0<i.length){var r=i[0],o=a.hasOwnProperty(r)?p.functionUnsupported(r):c.hasOwnProperty(r)?p.constantUnsupported(r):p.variablesUnsupported(r);return s(e,this,o)}return s(e,this,t)},e.Assignment.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.assignmentsUnsupported())},e.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.functionDefinitionsUnsupported())},e.Equation.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.equationsUnsupported())},e.And.prototype.analyzeSingleExpressionScientific=n,e.DoubleInequality.prototype.analyzeSingleExpressionScientific=n,e.BaseComparator.prototype.analyzeSingleExpressionScientific=n,e.Regression.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.regressionsUnsupported())},e.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.pointsUnsupported())},e.RGBColor.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.colorsUnsupported())}});\ndefine(\'core/lib/dragmode\',["require","exports"],function(require,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.reconcileDragMode=e.DragMode=void 0,(r=o=e.DragMode||(e.DragMode={})).NONE="NONE",r.X="X",r.Y="Y",r.XY="XY",r.AUTO="AUTO",e.reconcileDragMode=function(e,r){var n,t=!(n=r)||"none"===n[0].type&&"none"===n[1].type?o.NONE:"none"===n[1].type?o.X:"none"===n[0].type?o.Y:o.XY;switch(e){case o.NONE:return o.NONE;case o.AUTO:case o.XY:return t;case o.X:return t===o.X||t===o.XY?o.X:o.NONE;case o.Y:return t===o.Y||t===o.XY?o.Y:o.NONE;default:return o.NONE}}});\ndefine(\'core/math/features/getgraphmode\',[\'require\',\'parsenodes\',\'core/types/graphmode\',\'core/lib/dragmode\',\'core/lib/dragmode\',\'core/math/types\'],function(require){"use strict";var o=require("parsenodes"),i=require("core/types/graphmode"),a=require("core/lib/dragmode").reconcileDragMode,p=require("core/lib/dragmode").DragMode,u=require("core/math/types");function s(e,t){var r,o,s,n=t.getDependencies();switch(t.valueType){case u.Point:case u.ListOfPoint:return t.isMovablePoint&&(r=this.userData,o=t,s=!r||!r.hasOwnProperty("dragMode")||r.dragMode===p.AUTO?o.defaultDragMode:r.dragMode,a(s,o.moveStrategy)!==p.NONE)?i.XYPOINT_MOVABLE:0===n.length?i.XYPOINT:e.validParametricVariables(n)?2===e.dimensions()?i.PARAMETRIC:i.PARAMETRIC_CURVE_3D:i.NONE;case u.Number:case u.ListOfNumber:return 2===e.dimensions()&&1===n.length?i.Y:3===e.dimensions()&&2===n.length?i.Z_3D:i.NONE;default:return i.NONE}}function n(e,t){var r=t._expression.getDependencies();if(1<r.length)return i.NONE;if(t._expression.valueType!==u.Number&&t._expression.valueType!==u.ListOfNumber)return i.NONE;var o=t._symbol;return e.graphMode(o,r)}function e(e,t){return t.isError?i.NONE:i.VISUALIZATION}o.Base.prototype.getGraphMode=function(e,t){return i.NONE},o.Expression.prototype.getGraphMode=s,o.Equation.prototype.getGraphMode=o.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?i.NONE:t instanceof o.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):i.NONE:n(e,t):1===r.length||2===r.length?i.IMPLICIT:i.NONE},o.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},o.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof o.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var r=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:case u.EmptyList:switch(r.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):i.NONE;case 1:return t.valueType!==u.ListOfNumber||e.graphableListVariables(this._symbol,r[0])?this.isSlider?i.NONE:e.graphMode(this._symbol,r):i.NONE;case 2:return 3===e.dimensions()&&"z"===this._symbol?i.Z_3D:i.NONE;default:return i.NONE}break;default:return s.call(this,e,t)}},o.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return i.NONE;var r=e.graphMode(this._symbol,this._argSymbols),o=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(o.length){case 0:return r;case 1:return o[0]!==this._argSymbols[0]?i.NONE:r;default:return i.NONE}break;default:return i.NONE}},o.Regression.prototype.getGraphMode=function(e,t){return!this.isLhsSimple||!t.isModelValid||1!==t.model.getDependencies().length?i.NONE:i.Y},o.Polygon.prototype.getGraphMode=function(e,t){return t.isError?i.NONE:i.POLYGONFILL},o.Object3D.prototype.getGraphMode=function(e,t){return t.isError?i.NONE:i.OBJECT3D},o.Histogram.prototype.getGraphMode=e,o.DotPlot.prototype.getGraphMode=e,o.BoxPlot.prototype.getGraphMode=e,o.Image.prototype.getGraphMode=function(e,t){return!this.userData.showPoints||this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?i.NONE:i.XYPOINT}});\ndefine(\'core/lib/color-helpers\',["require","exports"],function(require,e){"use strict";function c(e){return s(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function s(e){return"string"==typeof e&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.getDisplayColor=e.mutateOpacity=e.parseHex=e.invertColor=e.shadeColor=e.isValidHexColor=e.normalizeColor=void 0,e.normalizeColor=c,e.isValidHexColor=s,e.shadeColor=function(e,r){if(!s(e=c(e)))return e;1<r&&(r=1),r<-1&&(r=-1);var t=parseInt(e.slice(1),16),a=r<0?0:255,o=r<0?-1*r:r,n=t>>16,i=t>>8&255,l=255&t;return"#"+(16777216+65536*(Math.round((a-n)*o)+n)+256*(Math.round((a-i)*o)+i)+(Math.round((a-l)*o)+l)).toString(16).slice(1)},e.invertColor=function(e){if(!s(e=c(e)))return e;var r="0123456789abcdef";return"#"+e.slice(1).split("").map(function(e){return r[15-r.indexOf(e)]}).join("")},e.parseHex=function(e){var r,t,a;return a=3===(e=e.replace(/#/,"")).length?(r=parseInt(e.slice(0,1)+e.slice(0,1),16),t=parseInt(e.slice(1,2)+e.slice(1,2),16),parseInt(e.slice(2,3)+e.slice(2,3),16)):6===e.length?(r=parseInt(e.slice(0,2),16),t=parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)):t=r=0,{r:r,g:t,b:a}},e.mutateOpacity=function(e,r){var t=/(rgba\\([\\d]+\\,\\ ?[\\d]+\\,\\ ?[\\d]+\\,\\ ?)[\\d.]+(\\))/;return e.match(t)?e.replace(t,"$1"+r+"$2"):e},e.getDisplayColor=function(e,r){if(r&&r.colorLatexValue){var t=r.colorLatexValue;return Array.isArray(t)?t[0]:t}return e.color},e.colors={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa"}});\ndefine(\'core/math/features/getgraphinfo\',[\'require\',\'parsenodes\',\'core/math/builtinframe\',\'core/math/domaintypes\',\'core/math/policy\',\'core/lib/color-helpers\'],function(require){"use strict";var e=require("parsenodes"),i=require("core/math/builtinframe"),a=require("core/math/domaintypes"),r=require("core/math/policy").defaultPolicy,o=require("core/lib/color-helpers").getDisplayColor;e.Base.prototype.getGraphInfo=function(e,t){var i,r,n=t.getDependencies();switch(n.length){case 0:i=t.getLinearCoefficients(),r=t.boundDomain("x");break;case 1:"known"===(r=t.boundDomain(n[0])).type&&(i=t.getLinearCoefficients());break;case 2:r=a.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:o(this.userData,this.metaData),pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!i,linearCoefficients:i,domainBound:r}},e.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(1<this.polynomialOrder(e[0]))return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].tryGetConcreteTree(r,i).asValue():0,t[1]?+t[1].tryGetConcreteTree(r,i).asValue():0];default:return}},e.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}});\ndefine(\'core/math/features/getMoveStrategy\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/math/maybe-rational\',\'core/math/builtinframe\',\'core/math/functions\'],function(require){"use strict";var _=require("parsenodes"),V=require("core/math/types"),e=require("core/math/maybe-rational").maybeRational,y=require("core/math/builtinframe"),I=require("core/math/functions"),v=_.Constant(e(0,1));function P(e){return{type:"none",inputString:e}}function F(e){return{type:"updateCoordinate",inputString:e}}function M(e,t,n){return{type:"updateSlider",inputString:e,id:t,coefficients:n}}function x(e,t,n,r,i,a){for(var o=t.getDependencies(),s=0;s<o.length;s++)if(i[o[s]])return!1;for(var u=o.length-1;0<=u;u--){var c=o[u];if(!a[c]){var f=r[c];if(void 0!==f){var g=n[c];if(1===g.order){var p=g.tree.getPolynomialCoefficients(c),d=p[1]?p[1].getConcreteTree(e,y):v,l=p[0]?p[0].getConcreteTree(e,y):v;if(l.isConstant&&d.isConstant)if(isFinite(l.asValue())&&isFinite(d.asValue()))if(0!==d.asValue())return{symbol:c,id:f,coefficients:[-l.asValue()/d.asValue(),1/d.asValue()]}}}}}return!1}function D(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}(e),r={};for(var i in t){var a=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&n[a]&&(r[a]=i)}return r}function T(e,t,n,r){for(var i=[],a=0;a<n.length;a++){var o=n[a],s={};i.push(s);for(var u=0;u<r.length;u++){var c=r[u],f=Object.create(t);f[c]=_.FreeVariable(c);var g=o.tryGetConcreteTree(e,f);g.isError?s[c]={tree:g,order:1/0}:s[c]={tree:g,order:g.polynomialOrder(c)}}}return i}function j(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];0!==t[i].order&&(n[i]=!0)}}_.Base.prototype.getMoveStrategy=function(){},_.Assignment.prototype.getMoveStrategy=function(e,t,n,r,i){if(this._expression instanceof _.OrderedPair)return this._expression.getMoveStrategy(e,t,n,r,i)},_.OrderedPair.prototype.getMoveStrategy=function(e,t,n,r,i){if(n.valueType===V.Point&&0===n.getDependencies().length){for(var a,o,s,u,c=D(this.getDependencies(),r),f=Object.keys(c),g=this.args,p=T(e,t,g,f),d=[],l={},y={},v=0;v<2;v++){var h,m=g[v],S=m.getInputString();m.isConstant?d[v]=F(S):((h=x(e,m,p[v],c,l,y))&&(d[v]=M(S,h.id,h.coefficients),l[h.symbol]=!0,j(f,p[v],y)),d[v]||(d[v]=P(S)))}if("none"!==d[0].type||"none"!==d[1].type)return d;if(1===f.length){var C,b=f[0],O=c[b];try{C=_.OrderedPair([p[0][b].tree,p[1][b].tree]).getCompiledFunction()}catch(e){return}return I.dehydrateCompiledFunction(C),[(a=g[0].getInputString(),s=r[o=O].evaluationState,u=C,{type:"updateSliderNonlinear",inputString:a,id:o,initialValue:s.constant_value,min:s.slider_min_number,max:s.slider_max_number,compiled:u}),P(g[1].getInputString())]}}},_.Image.prototype.getMoveStrategy=function(e,t,n,r,i){if("OrderedPair"===n.center.type&&n.center.args[0].isConstant&&n.center.args[1].isConstant&&n.width.isConstant&&n.height.isConstant&&n.radianAngle.isConstant&&n.opacity.isConstant){var a=D(this.getDependencies(),r),o=Object.keys(a),s=[this.width,this.height];"OrderedPair"===this.center.type?s.push(this.center.args[0],this.center.args[1]):"Identifier"===this.center.type&&(this.center.referencedStatementId=function(e,t){for(var n in t){if(t[n].evaluationState.assignment===e)return n}}(this.center._symbol,r));for(var u=[],c={},f={},g=T(e,t,s,o),p=[2,3,0,1],d=0;d<p.length;d++){var l,y,v=p[d],h=s[v];h?(l=h.getInputString(),h.isConstant?u[v]=F(l):((y=x(e,h,g[v],a,c,f))&&(u[v]=M(l,y.id,y.coefficients),c[y.symbol]=!0,j(o,g[v],f)),u[v]||(u[v]=P(l)))):u[v]=P("")}if("none"!==u[0].type||"none"!==u[1].type||"none"!==u[2].type||"none"!==u[3].type)return u}}});\ndefine(\'core/math/features/getDefaultDragMode\',[\'require\',\'parsenodes\',\'core/lib/dragmode\'],function(require){"use strict";var e=require("parsenodes"),t=require("core/lib/dragmode").DragMode;e.Base.prototype.getMoveStrategy=function(){return t.NONE},e.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?t.XY:"none"!==e[0].type?t.X:"none"!==e[1].type?t.Y:t.NONE},e.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?t.XY:"updateSlider"===e[0].type?t.X:"updateSlider"===e[1].type?t.Y:t.NONE}});\ndefine(\'core/math/features/tableinfo\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/lib/label\',\'core/math/distribution-spec\'],function(require){"use strict";var i=require("parsenodes"),o=i.List,a=require("core/math/types"),s=require("core/lib/label"),l=require("core/math/distribution-spec").getFunctionSpecFromTree;i.Base.prototype.tableInfo=function(e,t){return!1},i.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},i.Expression.prototype.tableInfo=function(e,t){var n=t.getDependencies();if(l(this))return!1;switch(t.valueType){case a.Point:case a.ListOfPoint:return 0!==n.length?!1:(!t.isMovablePoint||"updateSlider"!==t.moveStrategy[0].type&&"updateSlider"!==t.moveStrategy[1].type)&&{independent_variable:"x",dependent_column:"y",by_reference:!1,values:o.wrap(t).mapElements(e,function(e){return e.asArray()})};case a.Number:if(1!==n.length)return!1;var r=n[0];return e.validFirstColumnVariable(r)?{independent_variable:r,dependent_column:this.getInputString(),by_reference:!1}:!1;default:return!1}},i.Assignment.prototype.tableInfo=function(e,t){if(t instanceof i.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(l(this))return!1;var n,r=t.getDependencies();if(1<r.length)return!1;if(0===r.length){if(!e.tableableAsConstant(this._symbol))return!1;n=e.implicitIndependent(this._symbol)}else n=r[0];return!!e.validFirstColumnVariable(n)&&{independent_variable:n,dependent_column:e.assignmentForbidden(this._symbol)?s.trimLatex(this.getInputString().replace(/[^=]*=/,"")):s.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},i.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(1<t.getDependencies().length)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var r=e.assignmentForbidden(this._symbol);return{independent_variable:n,dependent_column:r?s.trimLatex(this.getInputString().replace(/[^=]*=/,"")):s.trimLatex(this.getInputString().split("=")[0]),by_reference:!r}},i.BaseComparator.prototype.tableInfo=function(e,t){return!1},i.DoubleInequality.prototype.tableInfo=function(e,t){return!1},i.Equation.prototype.tableInfo=function(e,t){return!1}});\ndefine(\'core/math/features/tableerror\',[\'require\',\'parsenodes\',\'core/lib/worker-i18n\'],function(require){"use strict";var r=require("parsenodes"),e=require("core/lib/worker-i18n");r.Base.prototype.tableError=function(){return this.isInequality()?e.s("shared-calculator-error-table-inequality-supplement"):!(this instanceof r.Expression)&&e.s("shared-calculator-error-table-generic-supplement")},r.List.prototype.tableError=function(){return e.s("shared-calculator-error-table-list-supplement")},r.Equation.prototype.tableError=r.Assignment.prototype.tableError=function(){return e.s("shared-calculator-error-table-equation-supplement")},r.FunctionDefinition.prototype.tableError=function(){return e.s("shared-calculator-error-table-function-definition-supplement")},r.Regression.prototype.tableError=function(){return e.s("shared-calculator-error-table-regression-supplement")}});\ndefine(\'core/math/curve-accumulator\',["require","exports","core/math/distance"],function(require,t,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accumulator=void 0;var e=(i.prototype.colinear=function(t,e,i){this.map&&(t=this.map(t),e=this.map(e),i=this.map(i));var n=h.pointToSegmentParameter(i[0],i[1],i[2]||0,t[0],t[1],t[2]||0,e[0],e[1],e[2]||0);if(n<1)return!1;var s=[t[0]+n*(e[0]-t[0]),t[1]+n*(e[1]-t[1]),3===t.length?t[2]+n*(e[2]-t[2]):0];return Math.abs(i[0]-s[0])<=this.xtolerance&&Math.abs(i[1]-s[1])<=this.ytolerance&&(2===t.length||Math.abs(i[2]-s[2])<=this.ztolerance)},i.prototype.addPoint=function(t){if(this.dimensions=t.length,this.xtolerance<0&&this.ytolerance<0&&(2===this.dimensions||this.ztolerance<0))this.segment.push.apply(this.segment,t);else if(this.segment.length){var e=2===this.dimensions?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=t,void(this.pendingPoint=t);(!this.colinear(e,this.pivotPoint,t)||h.hypot(e[0]-t[0],e[1]-t[1],(e[2]||0)-(t[2]||0))<h.hypot(e[0]-this.pendingPoint[0],e[1]-this.pendingPoint[1],(e[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=t),this.pendingPoint=t}}else this.segment.push.apply(this.segment,t)},i.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)},i.prototype.breakSegment=function(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]},i.prototype.getSegments=function(){return this.breakSegment(),this.segments},i.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},i);function i(t){t?(this.xtolerance=t.xtolerance||t.tolerance||0,this.ytolerance=t.ytolerance||t.tolerance||0,this.ztolerance=t.ztolerance||t.tolerance||0,this.map=t.map):this.xtolerance=this.ytolerance=this.ztolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}t.Accumulator=e});\ndefine(\'core/math/implicit-plotter\',["require","exports","core/math/distance","./curve-accumulator"],function(require,e,v,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.displayTriangles=e.traceContours=e.triangulate=e.buildQuadTree=e.sampleImplicitDiagnostic=e.sampleImplicit=void 0;var w=5,D=Math.pow(2,14);function n(e,r){var i=Math.pow(2,-w),n=s(r,i),t=s(r,2*i),c=u(e,n,t),a=o(c.root,e,n);return{paddedDomain:n,rootDomain:t,quadTree:c,triangles:a,contours:b(a,e,n)}}function y(e,r,i){return{x:e,y:r,z:i}}function N(e,r,i){return{x:e,y:r,isZero:i}}function c(e,r,i){return{vertices:[e,r,i],visited:!1,next:void 0}}function s(e,r){var i=(1+r)*e.xmin-r*e.xmax,n=(1+r)*e.xmax-r*e.xmin;return{xmin:i,ymin:(1+r)*e.ymin-r*e.ymax,xmax:n,ymax:(1+r)*e.ymax-r*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function F(e,r){return{depth:e,vertices:r,children:void 0,center:void 0}}function I(e,r,i){e.center=j(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],r,i)}function u(e,r,i){var n,t,c,a,s,u,o=(n=e,c=(t=i).xmin,a=t.xmax,s=t.ymin,u=t.ymax,F(0,[Q(c,u,n),Q(a,u,n),Q(a,s,n),Q(c,s,n)])),l=[];(T=[]).push(o);var v,f,d,h,x,z,m,y,N,p,g,b,k=1,M=!0;e:for(;T.length;)for(var A,S=l,l=T,T=S;A=l.pop();)if(function(e,r,i){if(e.depth<w)return!0;if(function(e,r){return e.vertices[0].x<r.xmin||e.vertices[0].y>r.ymax||e.vertices[2].x>r.xmax||e.vertices[2].y<r.ymin}(e,i))return!1;if(function(e,r){if(e.vertices[1].x-e.vertices[0].x<10*r.xtolerance)return!0;if(e.vertices[0].y-e.vertices[3].y<10*r.ytolerance)return!0;return!1}(e,i))return!1;var n=e.vertices[0],t=e.vertices[1],c=e.vertices[2],a=e.vertices[3];if(isNaN(n.z)&&isNaN(t.z)&&isNaN(c.z)&&isNaN(a.z))return!1;if(isNaN(n.z)||isNaN(t.z)||isNaN(c.z)||isNaN(a.z))return!0;var s=j(n,t,c,a,r,i),u=_(n,t,r,i),o=_(t,c,r,i),l=_(c,a,r,i),v=_(a,n,r,i);return P(n,u,r)||P(t,u,r)||P(t,o,r)||P(c,o,r)||P(c,l,r)||P(a,l,r)||P(a,v,r)||P(n,v,r)||q(n,u,s,r,i)||q(u,t,s,r,i)||q(t,o,s,r,i)||q(o,c,s,r,i)||q(c,l,s,r,i)||q(l,a,s,r,i)||q(a,v,s,r,i)||q(v,n,s,r,i)}(A,e,r)){if(f=e,b=g=p=N=y=m=z=x=h=d=void 0,d=(v=A).depth+1,h=v.vertices[0],x=v.vertices[1],z=v.vertices[2],m=v.vertices[3],y=Z(h,x,f),N=Z(x,z,f),p=Z(z,m,f),g=Z(m,h,f),b=Z(h,z,f),v.children=[F(d,[h,y,b,g]),F(d,[y,x,N,b]),F(d,[b,N,z,p]),F(d,[g,b,p,m])],!A.children){M=!1;break e}if(T.push(A.children[0]),T.push(A.children[1]),T.push(A.children[2]),T.push(A.children[3]),D<=(k+=3)){M=!1;break e}}else I(A,e,r);for(var C=0;C<l.length;C++)I(l[C],e,r);for(C=0;C<T.length;C++)I(T[C],e,r);return{root:o,resolved:M}}function q(e,r,i,n,t){if(0<e.z==0<r.z&&0<r.z==0<i.z)return!1;var c,a,s,u;if(0<e.z==0<r.z){if(0<(c=Z(e,r,n)).z!=0<e.z)return!0;a=f(e,i,n,t),s=f(r,i,n,t),u=f(c,i,n,t)}else if(0<r.z==0<i.z){if(0<(c=Z(r,i,n)).z!=0<r.z)return!0;a=f(r,e,n,t),s=f(i,e,n,t),u=f(c,e,n,t)}else{if(0<(c=Z(i,e,n)).z!=0<i.z)return!0;a=f(i,r,n,t),s=f(e,r,n,t),u=f(c,r,n,t)}var o=t.xtolerance,l=t.ytolerance;return o*l<v.pointToSegment(l*u.x,o*u.y,l*a.x,o*a.y,l*s.x,o*s.y)}function P(e,r,i){if(isNaN(e.z)&&isNaN(r.z))return!1;if(isNaN(e.z)||isNaN(r.z))return 0<e.z||0<r.z;var n=4*Z(e,r,i).z-r.z-3*e.z,t=1e-4,c=(i((1-t)*e.x+t*r.x,(1-t)*e.y+t*r.y)-e.z)/t,a=Math.max(Math.abs(e.z),Math.abs(r.z));return Math.abs(n-c)>.125*a}function p(e,r){return e.x<r.xmin||e.x>r.xmax||e.y<r.ymin||e.y>r.ymax}function Q(e,r,i){return y(e,r,i(e,r))}function Z(e,r,i){return Q(.5*(e.x+r.x),.5*(e.y+r.y),i)}function _(e,r,i,n){if(p(e,n)||p(r,n))return Z(e,r,i);if(isNaN(e.z)||isNaN(r.z))return function(e,r,i,n){if(isNaN(e.z)===isNaN(r.z))return Z(e,r,i);{var t;isNaN(e.z)&&(t=e,e=r,r=t)}var c=e.x,a=r.x,s=e.y,u=r.y,o=e.z,l=n.xtolerance,v=n.ytolerance;for(;Math.abs(c-a)>l||Math.abs(s-u)>v;){var f=.5*(c+a),d=.5*(s+u),h=i(f,d);isNaN(h)===isNaN(o)?(c=f,s=d,o=h):(a=f,u=d)}return y(c,s,o)}(e,r,i,n);if(0<e.z!=0<r.z)return Z(e,r,i);var t=.01,c=i(.99*e.x+t*r.x,.99*e.y+t*r.y)-e.z,a=r.z-i(t*e.x+.99*r.x,t*e.y+.99*r.y);return isNaN(c)||isNaN(a)||0<c==0<a?Z(e,r,i):g(y(e.x,e.y,c),y(r.x,r.y,a),i)}function j(e,r,i,n,t,c){var a=_(e,i,t,c);return 0<e.z==0<i.z&&0<a.z!=0<e.z?a:(a=_(r,n,t,c),0<r.z==0<n.z&&0<a.z!=0<r.z?a:Z(e,i,t))}function g(e,r,i){if(isNaN(e.z))return r;if(isNaN(r.z))return e;if(isFinite(e.z)||isFinite(r.z)){if(isFinite(e.z)){if(isFinite(r.z)){var n=1-e.z/r.z,t=1-r.z/e.z;return Q(e.x/n+r.x/t,e.y/n+r.y/t,i)}return e}return r}return Z(e,r,i)}function f(e,r,i,n){var t=e.x,c=r.x,a=e.y,s=r.y,u=e.z,o=r.z,l=n.xtolerance,v=n.ytolerance;if(p(e,n)||p(r,n)){var f=Z(e,r,i);return N(f.x,f.y,!1)}for(;Math.abs(t-c)>l||Math.abs(a-s)>v;){var d=.5*(t+c),h=.5*(a+s),x=i(d,h);0<x==0<u?(t=d,a=h,u=x):(c=d,s=h,o=x)}if(isNaN(u))return N(c,s,!1);if(isNaN(o))return N(t,a,!1);var z=g(y(t,a,u),y(c,s,o),i),m=0===u||0===o||0===z.z||z.z>=u==o>=z.z&&Math.abs(z.z)<1e250;return N(z.x,z.y,m)}function o(e,r,i){var n={triangles:[],edgeCache:{},domain:i,fn:r};return function e(r,i){if(!r.children)return;e(r.children[0],i);e(r.children[1],i);e(r.children[2],i);e(r.children[3],i);t(r.children[0],r.children[1],i);t(r.children[3],r.children[2],i);l(r.children[1],r.children[2],i);l(r.children[0],r.children[3],i)}(e,n),n.triangles}function t(e,r,i){e.children&&r.children?(t(e.children[1],r.children[0],i),t(e.children[2],r.children[3],i)):e.children?(t(e.children[1],r,i),t(e.children[2],r,i)):r.children?(t(e,r.children[0],i),t(e,r.children[3],i)):function(e,r,i){if(!e.center||!r.center)return;var n,t;t=e.depth>=r.depth?(n=_(e.vertices[1],e.vertices[2],i.fn,i.domain),d(e.vertices[1],r.center,e.vertices[2],e.center,n)):(n=_(r.vertices[0],r.vertices[3],i.fn,i.domain),d(r.vertices[0],r.center,r.vertices[3],e.center,n));z(t,i.edgeCache,i.domain);for(var c=0;c<4;c++)i.triangles.push(t[c])}(e,r,i)}function l(e,r,i){e.children&&r.children?(l(e.children[2],r.children[1],i),l(e.children[3],r.children[0],i)):e.children?(l(e.children[2],r,i),l(e.children[3],r,i)):r.children?(l(e,r.children[1],i),l(e,r.children[0],i)):function(e,r,i){if(!e.center||!r.center)return;var n,t;t=e.depth>=r.depth?(n=_(e.vertices[3],e.vertices[2],i.fn,i.domain),d(e.vertices[2],r.center,e.vertices[3],e.center,n)):(n=_(r.vertices[1],r.vertices[0],i.fn,i.domain),d(r.vertices[1],r.center,r.vertices[0],e.center,n));z(t,i.edgeCache,i.domain);for(var c=0;c<4;c++)i.triangles.push(t[c])}(e,r,i)}function d(e,r,i,n,t){return[c(e,t,r),c(r,t,i),c(i,t,n),c(n,t,e)]}function x(e,r,i){return 0<e.z&&!p(e,i)&&(!(0<r.z)||p(r,i))}function h(e,r){return e.x+","+e.y+","+r.x+","+r.y}function z(e,r,i){m(e[0],e[1],e[2],h(e[1].vertices[2],e[1].vertices[0]),r,i),m(e[1],e[2],e[3],h(e[2].vertices[0],e[2].vertices[2]),r,i),m(e[2],e[3],e[0],h(e[3].vertices[2],e[3].vertices[0]),r,i),m(e[3],e[0],e[1],h(e[0].vertices[0],e[0].vertices[2]),r,i)}function m(e,r,i,n,t,c){var a,s,u,o,l,v,f=r.vertices[0],d=r.vertices[1],h=r.vertices[2];x(d,h,c)&&(r.next=i),x(f,d,c)&&(r.next=e),x(h,f,c)&&(a=r,(u=t)[s=n]?a.next=u[s]:u[s]=a),x(f,h,c)&&(o=r,(v=t)[l=n]?v[l].next=o:v[l]=o)}function b(e,r,i){for(var n={fillAccumulator:new a.Accumulator(i),strokeAccumulator:new a.Accumulator(i),fn:r,domain:i},t=0;t<e.length;t++){var c=e[t];c.next&&!c.visited&&function(e,r){for(;;){var i=e.vertices[0],n=e.vertices[1],t=e.vertices[2];if(k(i,n,r),k(n,t,r),k(t,i,r),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}r.strokeAccumulator.breakSegment(),r.fillAccumulator.breakSegment()}(c,n)}return{strokeSegments:n.strokeAccumulator.finish().segments,fillSegments:n.fillAccumulator.finish().segments}}function k(e,r,i){var n;x(e,r,i.domain)&&(n=f(e,r,i.fn,i.domain),i.fillAccumulator.addPoint([n.x,n.y]),n.isZero?i.strokeAccumulator.addPoint([n.x,n.y]):i.strokeAccumulator.breakSegment())}e.sampleImplicit=function(e,r){var i=n(e,r);return{segments:i.contours.strokeSegments,fillSegments:i.contours.fillSegments,resolved:i.quadTree.resolved}},e.sampleImplicitDiagnostic=n,e.buildQuadTree=u,e.triangulate=o,e.traceContours=b,e.displayTriangles=function(e){for(var r=[],i=0;i<e.length;i++){var n=e[i];r.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return r}});\ndefine(\'core/math/poi-finding-accumulator\',["require","exports","core/math/workerconfig","tslib","./curve-accumulator","./poi"],function(require,e,t,i,r,o){"use strict";function s(e){return Math.abs(e)<5e-8}Object.defineProperty(e,"__esModule",{value:!0});var u,f=(u=r.Accumulator,i.__extends(h,u),h.prototype.getPOI=function(){return t.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},h.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},h.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},h.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||e<this.domain.min||e>this.domain.max||isNaN(e)},h.prototype.addPoint=function(e){0===this.segment.length&&s(e[1])&&(this.poiData.zeros.x.push(e[0]),this.poiData.zeros.y.push(e[1])),this.updateZeroBuffer(e),this.updateExtremumBuffer(e),u.prototype.addPoint.call(this,e)},h.prototype.updateZeroBuffer=function(e){if(this.fn)if(isFinite(e[0])&&isFinite(e[1]))switch(this.zeroBuffer.length){case 0:if(s(e[1]))return;return void this.zeroBuffer.push(e);case 1:return 0===e[1]||(0<e[1]==0<this.zeroBuffer[0][1]||(t=o.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn))&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0),void this.zeroBuffer.push(e);case 2:if(0===e[1])return;return 0<e[1]==0<this.zeroBuffer[0][1]||(t=o.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn))&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e);var t}else this.zeroBuffer.length=0},h.prototype.updateExtremumBuffer=function(e){if(this.fn)if(isFinite(e[0])&&isFinite(e[1]))switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:return e[1]===this.extremumBuffer[1][1]||(e[1]>this.extremumBuffer[1][1]==this.extremumBuffer[1][1]>this.extremumBuffer[0][1]||(t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]))&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]),!o.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)),this.extremumBuffer.shift()),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]==this.extremumBuffer[1][1]>this.extremumBuffer[0][1])return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e);var t=void 0,i=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),r=this.fn(i);return(t=r===this.extremumBuffer[1][1]?o.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],i,r,this.extremumBuffer[2][0],this.extremumBuffer[2][1]))&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}else this.zeroBuffer.length=0},h.prototype.bisectExtremumUsingDerivative=function(e,t,i,r,s,u){var f,h,n,m;if(this.fn)return this.derivative&&(h=this.derivative(e),n=this.derivative(s),isNaN(h)||isNaN(n)||h<0==n<0||(m=o.bisectZero(e,h,s,n,this.derivative))&&(f=[m[0],this.fn(m[0])])),f=f||o.bisectExtremum(e,t,i,r,s,u,this.fn)},h.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),2<this.segment.length&&(this.segments.push(this.segment),s(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},h.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},h.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},h);function h(e,t,i){var r=u.call(this,e)||this;return r.domain=e,r.fn=t,r.derivative=i,r.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},r.zeroBuffer=[],r.extremumBuffer=[],r}e.default=f});\ndefine(\'core/math/plotter\',["require","exports","tslib","core/math/distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","core/types/graphmode","./domaintypes"],function(require,e,t,F,v,b,o,a,k,w){"use strict";function A(e,i){var n=new a.default(i),t=e[0]+i.min*e[1],r=e[0]+i.max*e[1];return isFinite(t)&&isFinite(r)&&(n.addPoint([i.min,t]),n.addPoint([i.max,r]),n.addLinearZero(e),n.addLinearIntercept(e)),n.finish()}function I(e,i){var n=e(i);return{segments:[t.__spreadArray(t.__spreadArray([],n),n)],resolved:!0}}function x(e,i,n){var t=n.fn,r=n.jumpTolerance,a=e[0],o=e[1],s=i[0],m=i[1],c=F.mean(a,s),l=t(c);return v.bisectJump(a,o,c,l,s,m,t,r)}Object.defineProperty(e,"__esModule",{value:!0});var g=function(e,i,n){var t=n.fn,r=n.jumpTolerance,a=n.accumulator;if(!isFinite(r)||r<=0)return i;var o=x(e,i,n);if(!o)return i;for(var s=(i[0]-e[0])/10,m=[-s,s],c=i,l=0;l<m.length;l++){var u=e[0]+m[l],d=t(u);isFinite(d)||(u=e[0],d=e[1],u=e[0],d=e[1]);var p=i[0]+m[l],h=t(p);if(isFinite(h)?c=[p,h]:(p=i[0],h=i[1]),x([u,d],[p,h],n)){var f=o[0],v=o[1];return a.addPoint(f),a.breakSegment(),a.addPoint(v),i}}return c},y=function(e,i,n){this.derivative=n,this.accumulator=new a.default(i,e,n),this.fn=e,this.jumpTolerance=i.ytolerance||i.tolerance||0};function M(e,i,n){var t=i,r=e(t);return isFinite(r)||(r=e(t=i+n)),isFinite(r)||(r=e(t=i-n)),[t,r]}function R(e,i,n){var t,r,a,o,s=new y(e,i,n),m=i.step/10,c=i.min,l=M(e,c,m),u=l[0],d=l[1],p=[u,d];isFinite(d)&&s.accumulator.addPoint([u,d]);for(var h=Math.ceil((i.max-i.min)/i.step),f=1;f<=h;f++)u=(t=M(e,(h-f)/h*i.min+f/h*i.max,m))[0],d=t[1],isFinite(d)&&isFinite(p[1])?(u=(r=g(p,[u,d],s))[0],d=r[1],s.accumulator.addPoint([u,d])):isFinite(d)&&!isFinite(p[1])?(o=v.bisectFinite(p[0],p[1],u,d,e))&&(o[0]!==u&&s.accumulator.addPoint(o),u=(a=g(o,[u,d],s))[0],d=a[1],s.accumulator.addPoint([u,d])):!isFinite(d)&&isFinite(p[1])&&(o=v.bisectFinite(p[0],p[1],u,d,e))&&((o=g(p,o,s))[0]!==p[0]&&s.accumulator.addPoint(o),s.accumulator.breakSegment()),p=[u,d];return s.accumulator.finish()}function P(e,i,l,u){var n,t,r,d=i.min,a=i.max-i.min,p=i.xtolerance&&i.ytolerance?Math.min(i.xtolerance,i.ytolerance):i.tolerance?i.tolerance:0,o=Math.floor(a/(Math.PI/l));function s(e,i){var n=i%2==0?1:-1;if(u||-1!=n){for(var t=i*(Math.PI/l),r=[d,d+1,d+2,d+3],a=!1,o=0,s=r.length;o<s;o++){var m=e(r[o]),c=e(r[o]+t);if(isFinite(m)&&isFinite(c)&&(a=!0),isFinite(m)!==isFinite(c)||Math.abs(m-n*c)>p)return}if(a)return 1}}for(n=1;n<=o;n++)if(s(e,n)){for(r=n,t=2;t*n<=o;t++)s(e,t*n)||(r=void 0);if(r)break}return r?r*(Math.PI/l):null}function u(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function D(e,i){return i.map=u,R(e,i)}function S(i,e){if(e.max<e.min)return{segments:[],resolved:!0};var n,t=new o.Accumulator(e),r=e.min,a=i(r);return isFinite(a[0])&&isFinite(a[1])&&t.addPoint(a),function(e,i){for(var n=e.min,t=e.max,r=e.step,a=t-n,o=Math.ceil(a/r),s=a/o,m=0;m<o;m++)i(n+m*s);i(t)}(e,function(e){n=i(e),_(i,r,a,e,n,10,t),r=e,a=n}),t.finish()}function _(e,i,n,t,r,a,o){if(t!==i){var s=o.xtolerance,m=o.ytolerance,c=o.ztolerance,l=F.mean(i,t),u=e(l),d=isFinite(n[0])&&isFinite(n[1])&&(2===n.length||isFinite(n[2])),p=isFinite(r[0])&&isFinite(r[1])&&(2===r.length||isFinite(r[2])),h=isFinite(u[0])&&isFinite(u[1])&&(2===u.length||isFinite(u[2]));if(0===a||l===i||l===t)return o.breakSegment(),void(p&&o.addPoint(r));if(d||p)if(d===p){if(d&&h&&p){var f=F.pointToSegmentParameter(u[0],u[1],u[2]||0,n[0],n[1],n[2]||0,r[0],r[1],r[2]||0);if(.2<f&&f<.8&&Math.abs(u[0]-(n[0]+f*(r[0]-n[0])))<=s&&Math.abs(u[1]-(n[1]+f*(r[1]-n[1])))<=m&&(2===n.length||Math.abs(u[2]-(n[2]+f*(r[2]-n[2])))<=c))return void o.addPoint(r)}n[0]===u[0]&&n[1]===u[1]||_(e,i,n,l,u,a-1,o),r[0]===u[0]&&r[1]===u[1]||_(e,l,u,t,r,a-1,o)}else{for(var v=i,x=t,g=n,y=r;i!==l&&l!==t;)h==d?(i=l,n=u,d=h):(t=l,r=u,p=h),u=e(l=i+(t-i)/2),h=isFinite(u[0])&&isFinite(u[1])&&(2===u.length||isFinite(u[2]));d?(_(e,v,g,i,n,a-1,o),o.breakSegment()):(o.breakSegment(),o.addPoint(r),_(e,t,r,x,y,a-1,o))}}}function E(e,i,n){var t,r,a=e.viewport.xmin,o=e.viewport.xmax,s=e.viewport.ymin,m=e.viewport.ymax,c=i.lineWidth;3<c&&(a-=t=c*(o-a)/e.screen.width,o+=t,s-=r=c*(m-s)/e.screen.height,m+=r);var l=e.trigAngleMultiplier||1,u=e.oversample||4,d=1/u*(o-a)/e.screen.width,p=1/u*(m-s)/e.screen.height,h=i.domainBound;switch(i.graphMode){case k.X:switch((x=w.intersectDomains(w.knownDomain([s,m]),h)).type){case"empty":return!1;case"known":s=x.bounds[0],m=x.bounds[1]}v={min:s,max:m,xtolerance:p,ytolerance:d,step:p};break;case k.Y:switch((x=w.intersectDomains(w.knownDomain([a,o]),h)).type){case"empty":return!1;case"known":a=x.bounds[0],o=x.bounds[1]}v={min:a,max:o,xtolerance:d,ytolerance:p,step:d};break;case k.POLAR:if(!i.domain)throw new Error("Expected polar graph to have domain");var f,v={min:i.domain.min,max:i.domain.max,step:2*Math.PI/l/1e3,tolerance:Math.min(d,p)};i.domain.isExplicit||(f=P(n,v,l,"="===i.operator))&&(v.max=v.min+f),v.step=Math.max(v.step,(v.max-v.min)/11999);break;case k.PARAMETRIC:case k.PARAMETRIC_CURVE_3D:var x,g=i.domain?i.domain.min:0,y=i.domain?i.domain.max:1,F=i.domain?i.domain.step:.01;switch((x=w.intersectDomains(w.knownDomain([g,y]),h)).type){case"empty":return!1;case"known":g=x.bounds[0],y=x.bounds[1]}v={min:g,max:y,step:F,xtolerance:d,ytolerance:p,ztolerance:Math.min(d,p)};break;case k.IMPLICIT:v={xmin:a,xmax:o,ymin:s,ymax:m,xtolerance:d,ytolerance:p};break;case k.Z_3D:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return v}e.default={sampleLinear:A,sampleXY:R,findPiPeriod:P,samplePolar:D,sampleParametricRecursive:S,subsampleParametricRecursive:_,validateViewState:function(e){if(!e)return!1;var i=e.viewport.xmin,n=e.viewport.xmax,t=e.viewport.ymin,r=e.viewport.ymax;return!(!isFinite(i)||!isFinite(n)||n<=i)&&(!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))},computeDomain:E,computeGraphData:function(e){var i,n,t,r,a,o,s,m=e.viewState,c=e.graphInfo,l=e.compiled,u=e.derivative,d=e.discrete,p=e.maxOverride,h=l.fn,f=E(m,c,h),v=c.graphMode;if(f){switch(v){case k.X:case k.Y:var x,g,y,F,w=u?u.fn:void 0;F=d?(x=f.min,g=f.max,y=f.step,function(e){for(var i=e.fn,n=e.domain,t=n.min,r=n.max,a=Math.floor(t),o=Math.ceil(r),s=[],m=a;m<=o;m++){var c=i(m);isFinite(m)&&isFinite(c)&&s.push([m,c])}return{segments:s,resolved:!0}}({fn:h,domain:{min:Math.max(x,0),max:void 0!==p?Math.min(p,g):g,step:y}})):c.isLinear?A(c.linearCoefficients,f):R(h,f,w);break;case k.POLAR:F=D(h,f);break;case k.IMPLICIT:F=b.sampleImplicit(h,f);break;case k.PARAMETRIC:f.step||(f.step=(f.max-f.min)/1e3),F=f.max===f.min?I(h,f.min):c.isLinear?(n=c.linearCoefficients,t=f,r=A(n[0],t),a=A(n[1],t),r.segments.length&&a.segments.length&&4===r.segments[0].length&&4===a.segments[0].length?{segments:[[r.segments[0][1],a.segments[0][1],r.segments[0][3],a.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}):S(h,f);break;case k.PARAMETRIC_CURVE_3D:return f.step||(f.step=(f.max-f.min)/1e3),F=f.max===f.min?I(h,f.min):S(h,f),{graphMode:k.PARAMETRIC_CURVE_3D,segments:F.segments,cacheKey:l.source+":"+JSON.stringify(f),color:c.color,style:"dummy"};case k.Z_3D:return{meshData:function(e,i){for(var n=e.fn,t=i.xmin,r=i.xmax,a=i.ymin,o=(r-t)/30,s=(i.ymax-a)/30,m=[],c=[],l=[],u=o/1e3,d=s/1e3,p=0;p<30;p++)for(var h=0;h<30;h++){var f=t+p*o,v=a+h*s,x=n(f,v);m.push(f,v,x);var g=(n(f+u,v)-x)*d,y=(n(f,v+d)-x)*u,F=-u*d,w=Math.sqrt(g*g+y*y+F*F);c.push(g/w,y/w,F/w)}for(p=0;p<29;p++)for(h=0;h<29;h++){var M=30*h+p,P=30*h+p+1,b=30*(h+1)+p,k=30*(h+1)+p+1;l.push(M,b,P),l.push(b,k,P)}return{cacheKey:e.source+":"+JSON.stringify(i),positions:new Float32Array(m),normals:new Float32Array(c),faces:new Int16Array(l)}}(l,f),color:c.color,graphMode:k.Z_3D,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},compiled:l,style:"dummy"};default:throw new Error("Programming Error: unexpected graphmode "+v)}i=F.poi}else F={segments:[],resolved:!0};if((!i||250<i.zeros.x.length+i.extrema.x.length+i.intercept.x.length)&&(i={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),v===k.X)for(var M in i){i.hasOwnProperty(M)&&(s=i[o=M].y,i[o].y=i[o].x,i[o].x=s)}var P={segments:F.segments,resolved:F.resolved,graphMode:v,color:c.color,style:d?c.pointStyle:c.lineStyle,lineWidth:c.lineWidth,lineOpacity:c.lineOpacity,operator:c.operator,poi:i,compiled:l};return v===k.POLAR&&(P.sampledDomain={min:f.min,max:f.max,step:f.step}),F.fillSegments&&(P.fillSegments=F.fillSegments),P},polygonsFromSegments:function(e,i,n){for(var t=function(e){var i=e[e.length-1];return i[i.length-2]},r=[],a=0,o=0,s=[],m=[],c=-1/0,l=-1/0;;){if(c<=l){if(a>=i.length)break;m.push(i[a++])}if(l<=c){if(o>=e.length)break;s.push(e[o++])}c=t(m),l=t(s),F.approx(c,l,4)&&(r.push(function(e,i,n){var t,r,a,o,s=[],m=null;switch(n){case k.POLAR:m=u;break;case k.X:m=function(e){return[e[1],e[0]]}}for(t=0;t<e.length;t++)for(o=e[t],r=0;r<o.length;r+=2)a=[o[r],o[r+1]],m&&(a=m(a)),s.push(a[0],a[1]);for(t=i.length-1;0<=t;t--)for(r=(o=i[t]).length-2;0<=r;r-=2)a=[o[r],o[r+1]],m&&(a=m(a)),s.push(a[0],a[1]);return s}(s,m,n)),m=[],s=[],l=c=Math.max(c,l))}return r}}});\ndefine(\'core/lib/deepCopy\',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function r(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(r);var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=r(t[o]));return n}});\ndefine(\'core/types/styles\',["require","exports"],function(require,e){"use strict";var t,S;Object.defineProperty(e,"__esModule",{value:!0}),e.LineStyle=e.PointStyle=void 0,(t=e.PointStyle||(e.PointStyle={})).POINT="POINT",t.OPEN="OPEN",t.CROSS="CROSS",(S=e.LineStyle||(e.LineStyle={})).SOLID="SOLID",S.DASHED="DASHED",S.DOTTED="DOTTED"});\ndefine(\'core/math/cdf-branches\',["require","exports","tslib","core/lib/deepCopy","core/math/plotter","core/math/domaintypes","core/types/styles"],function(require,e,b,p,y,v,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeCDFTopBranches=void 0;function _(e){var i=e.viewState,t=e.graphInfo,d=e.compiled,a=e.derivative,o=e.bounds,r=e.included,n=e.discrete,s=p.default(t),c=v.intersectDomains(t.domainBound,v.knownDomain(o));if("known"===c.type)return s.domainBound=c,n?s.pointStyle=r?u.PointStyle.POINT:u.PointStyle.OPEN:s.lineStyle=u.LineStyle.SOLID,y.default.computeGraphData({graphInfo:s,viewState:i,compiled:d,derivative:a,discrete:n})}e.makeCDFTopBranches=function(e){var i,t,d,a,o,r,n,s,c,p,v=e.viewState,u=e.graphInfo,l=e.compiled,h=e.derivative,m=e.bounds,f=e.discrete,S=e.maxOverride,g=m[0],w=m[1],I=[];return f?(g=Math.ceil(g),w=Math.floor(w),t=void 0!==S?S:1/0,g===-1/0&&t<=w?(i=_({bounds:[g,t],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i)):g===-1/0&&w<1/0?(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i),I.push(_({bounds:[w+1,t],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}))):-1/0<g&&t<=w?(i=_({bounds:[g,t],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(_({bounds:[-1/0,g-1],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f})),I.push(i)):(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),d=_({bounds:[-1/0,g-1],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),a=_({bounds:[w+1,t],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i),o=void 0,d&&a&&(n=a,s=(r=d).segments,c=n.segments,p=b.__spreadArray(b.__spreadArray([],s),c),o=b.__assign(b.__assign({},r),{segments:p}),I.push(o)))):(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(y.default.computeGraphData({viewState:v,graphInfo:u,compiled:l,derivative:h}))),{cdfTopBranch:i,topBranches:I}}});\ndefine(\'core/math/copy-defined-pois\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(e){for(var r=[],t=[],u=e.length,n=0;n<u;n++)r.push(e[n][0]),t.push(e[n][1]);return{defined:{x:r,y:t}}}});\ndefine(\'core/types/opacity\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HIGH=e.DEFAULT=e.LOW=void 0,e.LOW=.2,e.DEFAULT=.4,e.HIGH=.8});\ndefine(\'core/types/slider-loop-modes\',["require","exports"],function(require,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.getSliderIcon=e.SliderLoopMode=void 0,(r=o=e.SliderLoopMode||(e.SliderLoopMode={})).LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",r.LOOP_FORWARD="LOOP_FORWARD",r.PLAY_ONCE="PLAY_ONCE",r.PLAY_INDEFINITELY="PLAY_INDEFINITELY",e.getSliderIcon=function(e){switch(e){case o.LOOP_FORWARD:return"dcg-icon-arrow-one-way";case o.LOOP_FORWARD_REVERSE:return"dcg-icon-arrow-two-way";case o.PLAY_ONCE:return"dcg-icon-arrow-once";case o.PLAY_INDEFINITELY:return"dcg-icon-arrow-infinite"}}});\ndefine(\'core/types/label-sizes\',["require","exports"],function(require,e){"use strict";var i,a;Object.defineProperty(e,"__esModule",{value:!0}),e.maybeMigrateLabelSizeEnumToLatex=e.LabelSize=void 0,(a=i=e.LabelSize||(e.LabelSize={})).SMALL="small",a.MEDIUM="medium",a.LARGE="large",e.maybeMigrateLabelSizeEnumToLatex=function(e){return e===i.SMALL?".85":e===i.MEDIUM?"1":e===i.LARGE?"1.35":void 0}});\ndefine(\'core/types/label-orientations\',["require","exports"],function(require,e){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LabelOrientation=void 0,(t=e.LabelOrientation||(e.LabelOrientation={})).DEFAULT="default",t.CENTER="center",t.CENTER_AUTO="center_auto",t.AUTO_CENTER="auto_center",t.ABOVE="above",t.ABOVE_LEFT="above_left",t.ABOVE_RIGHT="above_right",t.ABOVE_AUTO="above_auto",t.BELOW="below",t.BELOW_LEFT="below_left",t.BELOW_RIGHT="below_right",t.BELOW_AUTO="below_auto",t.LEFT="left",t.AUTO_LEFT="auto_left",t.RIGHT="right",t.AUTO_RIGHT="auto_right"});\ndefine(\'core/lib/default-spec\',["require","exports","underscore","core/lib/deepCopy"],function(require,e,u,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.populateDefaults=e.stripDefaultsAndMaybeReturnUndefined=e.stripDefaults=void 0,e.stripDefaults=function(e,r){var t={};for(var n in r)r.hasOwnProperty(n)&&(u.isEqual(e[n],r[n])||(t[n]=r[n]));return t},e.stripDefaultsAndMaybeReturnUndefined=function(e,r){var t=void 0,n={};for(var a in r)r.hasOwnProperty(a)&&(u.isEqual(e[a],r[a])||(n[a]=r[a],t=n));return t},e.populateDefaults=function(e,r){r=r||{};var t={};for(var n in e)e.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(t[n]=a.default(e[n]));for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}});\ndefine(\'core/lib/copy-properties\',["require","exports","core/lib/deepCopy"],function(require,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeTrueMap=r.extractPropertiesLike=r.copyAllProperties=r.copyProperties=void 0,r.copyProperties=function(r){var e=r.from,o=r.to,t=r.props;for(var i in t)t[i]&&e.hasOwnProperty(i)&&(o[i]=n.default(e[i]))},r.copyAllProperties=function(r,e){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},r.extractPropertiesLike=function(r,e){var o={};for(var t in e)e.hasOwnProperty(t)&&(o[t]=r[t]);return o},r.makeTrueMap=function(r){var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=!0);return e}});\ndefine(\'core/graphing-calc/json/expression\',["require","exports","tslib","core/types/opacity","core/types/styles","core/lib/dragmode","core/types/slider-loop-modes","core/types/label-sizes","core/types/label-orientations","core/lib/default-spec","../../lib/copy-properties"],function(require,t,r,e,i,a,l,s,n,o,d){"use strict";var L,D;function p(e){return d.extractPropertiesLike(e,t.DEFAULTS_DYNAMIC)}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.areDynamicPropertiesStrictEqual=t.extractDynamicProperties=t.stripDefaults=t.inflateDefaults=t.SLIDER_DEFAULTS=t.DEFAULTS=t.DEFAULTS_DYNAMIC=t.DEFAULT_SLIDER_PERIOD=t.EditableLabelMode=t.CLICKABLEINFO_DEFAULTS=t.VIZ_DEFAULTS=t.CDF_DEFAULTS=void 0,t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",showBoxplotOutliers:!0,binAlignment:"center",dotplotXMode:"exact",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}]},(D=L=t.EditableLabelMode||(t.EditableLabelMode={})).None="NONE",D.Math="MATH",D.Text="TEXT",t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS_DYNAMIC={polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},cdf:t.CDF_DEFAULTS,colorLatex:"",fillOpacity:""+e.DEFAULT,lineOpacity:"",pointOpacity:"",pointSize:"",lineWidth:"",labelAngle:"",vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS},t.DEFAULTS=r.__assign(r.__assign({folderId:"",latex:"",color:"",showLabel:!1,label:"",hidden:!1,secret:!1,dragMode:a.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:n.LabelOrientation.DEFAULT,suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:L.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,regressionParameters:{},displayEvaluationAsFraction:!1,slider:{}},t.DEFAULTS_DYNAMIC),{points:void 0,lines:void 0,fill:void 0}),t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:l.SliderLoopMode.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=function(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{slider:r.__assign(r.__assign({},t.SLIDER_DEFAULTS),e.slider),cdf:r.__assign(r.__assign({},t.CDF_DEFAULTS),e.cdf),vizProps:r.__assign(r.__assign({},t.VIZ_DEFAULTS),e.vizProps),clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},t.stripDefaults=function(e){var i=o.stripDefaults(t.DEFAULTS,r.__assign(r.__assign({},e),{slider:o.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),a=o.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===a?delete i.cdf:i.cdf=a;var l=o.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===l?delete i.vizProps:i.vizProps=l;var s=o.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===s?delete i.clickableInfo:i.clickableInfo=s,i},t.extractDynamicProperties=p,t.areDynamicPropertiesStrictEqual=function(e,i){for(var a in t.DEFAULTS_DYNAMIC)if(t.DEFAULTS_DYNAMIC.hasOwnProperty(a)&&e[a]!==i[a])return!1;return!0},t.computeParsableState=function(e){var i=s.maybeMigrateLabelSizeEnumToLatex(e.labelSize),a=i||e.labelSize;return r.__assign({type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:a,labelOrientation:e.labelOrientation,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",softMin:e.slider.hardMin?"":e.slider.min,softMax:e.slider.hardMax?"":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===l.SliderLoopMode.PLAY_ONCE}},p(e))}});\ndefine(\'core/types/point-size\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOTPLOT_DEFAULT=e.DEFAULT=void 0,e.DEFAULT=9,e.DOTPLOT_DEFAULT=14});\ndefine(\'core/math/features/graph\',["require","exports","parsenodes","core/math/comparators","tslib","core/math/builtin","core/math/plotter","core/types/graphmode","core/lib/dragmode","core/math/expression-types","core/math/cdf-branches","core/math/copy-defined-pois","core/math/distribution-spec","core/graphing-calc/json/expression","core/types/opacity","core/lib/color-helpers","core/types/styles","core/math/types","core/types/point-size"],function(require,e,v,b,F,w,z,W,G,O,_,B,Y,L,y,R,S,x,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var P=v.List;function X(e,t,a){for(var i=1/0,o=0,r=t;o<r.length;o++){var s=e[r[o]];Array.isArray(s)&&s.length<i&&(i=s.length)}var n=1;return"solvedEquation"===a?n=2:"baseComparator"===a&&(n=4),n*i}function q(e,t,a){if(!Array.isArray(e))return e;var i;switch(a){case"solvedEquation":i=2;break;case"baseComparator":i=4;break;default:i=1}return e[Math.floor(t/i)]}function T(e,t){for(var a=1/0,i=-1/0,o=1/0,r=-1/0,s=0,n=t;s<n.length;s++)for(var l=n[s],p=0;p<l.length;p+=2){var u=l[p],h=l[p+1];u<a&&(a=u),i<u&&(i=u),h<o&&(o=h),r<h&&(r=h)}if(isFinite(a)&&isFinite(o))return{type:e,xmin:a,ymin:o,xmax:i,ymax:r}}function I(e,t,a){var i={};a-=.5*t;for(var o=e.length-1;0<=o;o--){var r=e[o],s=Math.floor((r-a)/t);i[s]?i[s].data.push(r):i[s]={id:s,data:[r],min:s*t+a,max:s*t+a+t,center:s*t+a+t/2}}return i}v.Base.prototype._graph=function(I,e,V,A,N){var S=this;if(e instanceof v.SolvedEquation)return this._graph(I,e._expression,V,A,2===e.branchMultiplier?"solvedEquation":void 0);function t(e){var t=e.editableLabelMode;return t===L.EditableLabelMode.Text||t===L.EditableLabelMode.Math}var a=e.getExpressionType(A.graphMode,e.valueType),i=O.getReconciledExpressionProps(a,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(A.graphMode){case W.XYPOINT_MOVABLE:var o=U([e.asArray()]),r=this.userData.shouldGraph&&i.points,s=this.userData.showLabel&&!r;return r?[{segments:[o],graphMode:A.graphMode,color:R.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:t(this.userData),labels:this.computedLabels||[],poi:B.default(o),movablePointInfo:[]}]:s?[{segments:[o],graphMode:W.XYPOINT,color:R.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:t(this.userData),labels:this.computedLabels||[],poi:B.default(o),showPoint:!1}]:[];case W.XYPOINT:var n=[],l=this.userData.shouldGraph&&i.points,p=this.userData.shouldGraph&&i.lines,u=["colorLatexValue"];l&&u.push("computedPointOpacity","computedPointSize"),(this.userData.showLabel||l)&&u.push("computedLabelSize","computedLabelAngle");var h=X(this.metaData,u,N),c=[];P.wrap(e).eachElement(I,function(e,t){h<=t||c.push(e.asArray())});var d=this.userData.showLabel&&!l&&!p;return(this.userData.showLabel||l)&&n.push({segments:[U(c)],graphMode:A.graphMode,color:this.metaData.colorLatexValue||this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:l,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointSize:this.metaData.computedPointSize,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:t(this.userData),nakedLabel:d,labels:this.computedLabels||[],poi:B.default(c)}),p&&n.push({segments:j(c),graphMode:W.PARAMETRIC,color:R.getDisplayColor(this.userData,this.metaData),style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity,poi:{}}),n;case W.PARAMETRIC:case W.PARAMETRIC_CURVE_3D:var m=this.userData,g=this.metaData,y=[],u=["colorLatexValue"];i.lines&&u.push("computedLineOpacity","computedLineWidth"),i.fill&&u.push("computedFillOpacity");var f=X(this.metaData,u,N),n=P.wrap(e).mapElements(I,function(e,t){if(f<=t)return{segments:[],poi:{},graphMode:W.X,color:""};var a=q(S.metaData.computedLineWidth,t,N),i=q(S.metaData.computedLineOpacity,t,N),o=S.metaData.colorLatexValue?q(S.metaData.colorLatexValue,t,N):S.userData.color;if(0===e.getDependencies().length){var r=U([e.asArray()]);return{segments:[r],graphMode:W.XYPOINT,color:R.getDisplayColor(m,g),style:m.lineStyle,lineWidth:a,lineOpacity:i,poi:B.default(r)}}var s=e.getCompiledFunction(),n=S.getGraphInfo(I,e);return n.graphMode=A.graphMode,n.domain={min:S.metaData.evaluatedDomainMin,max:S.metaData.evaluatedDomainMax},n.style=S.userData.lineStyle,n.lineWidth=a,n.lineOpacity=i,n.color=o,z.default.computeGraphData({viewState:V,graphInfo:n,compiled:s})});if(i.fill){if(n.forEach(function(e,t){f<=t||y.push({segments:e.segments,color:S.metaData.colorLatexValue?q(S.metaData.colorLatexValue,t,N):S.userData.color,fillOpacity:q(S.metaData.computedFillOpacity,t,N),graphMode:W.POLYGONFILL,poi:{}})}),!i.lines)return y;n=n.concat(y)}return n;case W.X:case W.Y:case W.IMPLICIT:case W.POLAR:case W.Z_3D:var T=[],E=e.valueType===x.Number,C=X(this.metaData,["computedLineOpacity","computedLineWidth","colorLatexValue","fillOpacity"],N);return P.wrap(e).eachElement(I,function(e,t){if(!(C<=t)){var a,i=A.graphMode===W.IMPLICIT||A.graphMode===W.Z_3D?e.getCompiledFunction(["x","y"]):e.getCompiledFunction(),o=Y.getFunctionSpecFromTree(S),r=o&&o.discrete,s=function(e,t){if(e){var a,i,o,r,s,n,l,p=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return a=t.args[1].asValue(),i=2<t.args.length?t.args[2].asValue():.5,{type:p,xmin:0,xmax:a,ymin:0,ymax:u=w.binompdf(i*a,a,i)};if("poissondist"===e.symbol)return{type:p,xmin:0,xmax:2.5*(o=t.args[1].asValue()),ymin:0,ymax:u=Math.max(w.poissonpdf(Math.floor(o),o),w.poissonpdf(Math.ceil(o),o))};if("normaldist"===e.symbol)return o=1<t.args.length?t.args[1].asValue():0,r=2<t.args.length?t.args[2].asValue():1,u=w.normalpdf(o,o,r),{type:p,xmin:o-2*Math.abs(r),xmax:o+2*Math.abs(r),ymin:0,ymax:u};if("uniformdist"===e.symbol)return o=((s=1<t.args.length?t.args[1].asValue():0)+(n=2<t.args.length?t.args[2].asValue():1))/2,{type:p,xmin:s-(l=n-s)/3,xmax:n+l/3,ymin:0,ymax:u=w.uniformpdf(o,s,n)};if("tdist"===e.symbol){var u,h=t.args[1].asValue();return{type:p,xmin:-3,xmax:3,ymin:0,ymax:u=w.tpdf(0,h)}}}}(o,e);try{a=e.getCompiledDerivative()}catch(e){}var n=S.getGraphInfo(I,e);n.graphMode=A.graphMode,n.style=S.userData.lineStyle,n.lineWidth=q(S.metaData.computedLineWidth,t,N),n.lineOpacity=q(S.metaData.computedLineOpacity,t,N);var l=q(S.metaData.computedFillOpacity,t,N);n.fillOpacity=l,A.graphMode===W.POLAR&&(n.domain={min:S.metaData.evaluatedDomainMin,max:S.metaData.evaluatedDomainMax,isExplicit:S.metaData.isExplicitDomain});var p=S.metaData.colorLatexValue?q(S.metaData.colorLatexValue,t,N):S.userData.color;n.color=p;var u=S.metaData.evaluatedCDFMin,h=S.metaData.evaluatedCDFMax;if(isNaN(u)||isNaN(h)||!E){var c=void 0===S.userData.lines||S.userData.lines,d={viewState:V,graphInfo:n,compiled:i,derivative:a,discrete:r,maxOverride:void 0};o&&"binomialdist"===o.symbol&&(d.maxOverride=e.args[1].asValue());var m,g=z.default.computeGraphData(d);s&&(g.boundingBox=s),g.fillSegments?(g.fillSegments,m=F.__rest(g,["fillSegments"]),c||(m.lineWidth=0),T.push(m)):r?T.push({graphMode:W.XYPOINT,segments:[U(g.segments)],showPoint:S.userData.shouldGraph,color:p,style:g.style,boundingBox:s,poi:B.default(g.segments)}):(c||(g.lineWidth=0),T.push(g)),n.graphMode===W.IMPLICIT&&"="!==n.operator&&T.push({graphMode:W.POLYGONFILL,segments:g.fillSegments,poi:{},color:p,fillOpacity:l})}else{var y={viewState:V,graphInfo:n,compiled:i,derivative:a,bounds:[u,h],discrete:r,maxOverride:void 0};o&&"binomialdist"===o.symbol&&(y.maxOverride=e.args[1].asValue());var f,D=_.makeCDFTopBranches(y),v=D.cdfTopBranch,b=D.topBranches;if(b.forEach(function(e){e&&s&&(e.boundingBox=s)}),b.every(function(e){return void 0!==e}))if(r)T=b.map(function(e){return{graphMode:W.XYPOINT,segments:[U(e.segments)],showPoint:S.userData.shouldGraph,color:p,style:e.style,poi:B.default(e.segments),boundingBox:s}}),v&&v.segments.length&&(f=[],v.segments.forEach(function(e){isNaN(e[0])||isNaN(e[1])||f.push([e[0],0,e[0],e[1]])}),T.push({graphMode:W.PARAMETRIC,segments:f,boundingBox:s,poi:{},color:p}));else if(T=b,v&&v.segments.length){for(var O=void 0,L=void 0,x=0;x<v.segments.length;x++){if(4<=(M=v.segments[x]).length){O=M[0];break}}for(var M,P,x=v.segments.length-1;0<=x;x--){if(4<=(M=v.segments[x]).length){L=M[M.length-2];break}}void 0!==O&&void 0!==L&&isFinite(O)&&isFinite(L)&&(P=z.default.polygonsFromSegments(v.segments,[[O,0,L,0]],v.graphMode),T.push({graphMode:W.POLYGONFILL,segments:P,poi:{},color:p}))}}}}),T;case W.POLYGONFILL:case W.VISUALIZATION:case W.OBJECT3D:case W.NONE:return!1;default:var D=A.graphMode;throw new Error("Unexpected graphMode: "+D)}},v.Base.prototype.graph=function(e,t,a){var i=this.getGraphInfo(e,t);return this._graph(e,t,a,i)},v.BaseComparator.prototype.graph=function(e,t,a){var i=this.getGraphInfo(e,t),o=i.graphMode,r="baseComparator",s=void 0===this.userData.lines||this.userData.lines;if(o===W.IMPLICIT)return this._graph(e,t,a,i);if(o===W.NONE)return!1;if(!(t instanceof v.SolvedEquation))return!1;var n=this.getOperator(),l=[],p=[],u=!0;t._expression.eachElement(e,function(e){l.push(e.getCompiledFunction());try{p.push(e.getCompiledDerivative())}catch(e){u=!1}}),u||(p=void 0);for(var h=[],c=[-1,0,0,1],d=X(this.metaData,["computedLineWidth","computedLineOpacity","computedFillOpacity","colorLatexValue"],r),m=Math.min(l.length,d),g=0;g<m;g++){var y=this.getGraphInfo(e,t._expression.args[g]);y.graphMode=o,y.style=this.userData.lineStyle,y.color=this.metaData.colorLatexValue?q(this.metaData.colorLatexValue,g,r):this.userData.color,i.graphMode===W.POLAR&&(y.domain={min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain});var f=z.default.computeGraphData({viewState:a,graphInfo:y,compiled:l[g],derivative:p?p[g]:void 0});f.lineWidth=q(this.metaData.computedLineWidth,g,r),f.lineOpacity=q(this.metaData.computedLineOpacity,g,r),f.fillOpacity=q(this.metaData.computedFillOpacity,g,r),f.operator=b.get(b.table[n].inclusive,c[g%4]),s||(f.lineWidth=0),h.push(f)}for(g=0;g<m;g+=4){var D=z.default.polygonsFromSegments(h[g+1].segments,h[g+2].segments,o);h.push({graphMode:W.POLYGONFILL,segments:D,poi:{},fillOpacity:h[g].fillOpacity,color:h[g].color})}return h},v.DoubleInequality.prototype.graph=function(p,e,u){var h=this,c=this.getGraphInfo(p,e);if(c.graphMode===W.NONE)return!1;var d=[],m=b.get(b.table[this._operators[0]].inclusive,0),g=b.get(b.table[this._operators[1]].inclusive,0),y=this.userData,f=this.metaData,D=void 0===y.lines||y.lines,t=["colorLatexValue","computedFillOpacity"];D&&t.push("computedLineWidth","computedLineOpacity");var v=X(f,t);return P.eachArgs(p,e._expressions,function(e,t){var a,i,o,r,s,n,l;v<=t||(e[0].userData=e[1].userData=y,e[0].metaData=e[1].metaData=f,a=h.metaData.colorLatexValue?q(f.colorLatexValue,t):y.color,i=q(f.computedLineWidth,t),o=q(f.computedLineOpacity,t),r=q(f.computedFillOpacity,t),(s=h._graph(p,e[0],u,c)[0]).operator=m,s.color=a,s.lineWidth=i,s.lineOpacity=o,d.push(s),(n=h._graph(p,e[1],u,c)[0]).operator=g,n.color=a,n.lineWidth=i,n.lineOpacity=o,d.push(n),l=z.default.polygonsFromSegments(s.segments,n.segments,s.graphMode),D||(s.lineWidth=0,n.lineWidth=0),d.push({graphMode:W.POLYGONFILL,segments:l,lineOpacity:o,fillOpacity:r,poi:{},color:a}))}),d},v.Regression.prototype.graph=function(e,t,a){var i=this.getGraphInfo(e,t);return this._graph(e,t.model,a,i)},v.Polygon.prototype.graph=function(e,t,a){var i=[],o=void 0===this.userData.lines||this.userData.lines,r=void 0===this.userData.fill||this.userData.fill;if(!r&&!o)return i;var s=this.getGraphInfo(e,t),n=t.args[0].asValue();if(!n.length)return i;var l=j(F.__spreadArray(F.__spreadArray([],n),[n[0]]));return l.length&&(r&&i.push({segments:l,graphMode:W.POLYGONFILL,poi:{},color:s.color,fillOpacity:this.metaData.computedFillOpacity,style:s.style}),o&&i.push({segments:l,graphMode:W.PARAMETRIC,poi:{},color:s.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity})),i};function k(e){return Array.prototype.concat.apply([],e)}function U(e){for(var t=[],a=0,i=e;a<i.length;a++){var o=i[a],r=o[0],s=o[1];isNaN(r)||isNaN(s)||t.push(o)}return t}function j(e){for(var t=[],a=[],i=0,o=e;i<o.length;i++){var r=o[i],s=r[0],n=r[1];isNaN(s)||isNaN(n)?(4<=t.length&&a.push(t),t=[]):t.push(s,n)}return 4<=t.length&&a.push(t),a}v.Object3D.prototype.graph=function(e,t,a){var i,o,r,s=this.getGraphInfo(e,t);return[{segments:[(i=e,o=t,r=[],P.wrap(o).eachElement(i,function(e){r.push(e.args.map(function(e){return e.asValue()}))}),r)],color:s.color,objectName:this._symbol,graphMode:W.OBJECT3D}]},v.Histogram.prototype.graph=function(e,t,a){var i=this.getGraphInfo(e,t),o=t.args[0].asValue(),r=t.args[1].asValue(),s=I(o,r,this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?r/2:0),n=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?n=1/(o.length*r):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(n=1/o.length);var l=[],p=[];for(var u in s){var h=s[u],c=h.data.length;p.push([h.min,0*n,h.min,c*n,h.max,c*n,h.max,0*n]);var d=0;s[h.id+1]&&(d=s[h.id+1].data.length);var m=[h.min,0*n,h.min,c*n,h.max,c*n];d<c&&m.push(h.max,d*n),l.push(m)}var g=T("histogram",p);return g&&r&&(g.binWidth=r),[{segments:p,graphMode:W.POLYGONFILL,boundingBox:g,poi:{},color:i.color,fillOpacity:y.DEFAULT},{segments:l,graphMode:W.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:i.color}]},v.DotPlot.prototype.graph=function(e,t,a){var i,o=this.getGraphInfo(e,t),r=t.args[1].asValue(),s=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?r/2:0,n=I(t.args[0].asValue(),r,s),l=!1,p=[];for(var u in n)for(var h,c=(h=n[u]).data.length-1;0<=c;c--)h.center!==h.data[c]&&(l=!0);if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(var u in n){(i=(h=n[u]).data).reverse();for(var d=0;d<i.length;d++)p.push([i[d],d+1])}else for(var u in n){i=(h=n[u]).data;for(d=0;d<i.length;d++)p.push([h.center,d+1])}var m=T("dotplot",p);m&&r&&(m.ymin=0,m.xmin-=.5*r,m.xmax+=.5*r,m.binWidth=r);var g=this.metaData,y=g.computedPointOpacity,f=g.computedPointSize,D=q(y,0),v=this.userData.pointSize?q(f,0):M.DOTPLOT_DEFAULT;return[{segments:[p],graphMode:W.XYPOINT,boundingBox:m,poi:B.default(p),color:o.color,style:this.userData.pointStyle,pointSize:v,pointOpacity:D,showPoint:!0,needsDotplotXMode:l}]},v.BoxPlot.prototype.graph=function(e,t,a){var i=this.getGraphInfo(e,t),o=this.metaData.evaluatedAxisOffset,r=this.metaData.evaluatedBreadth,s=t.args[0].asValue();if(isNaN(r)||isNaN(o))return!1;var n,l,p,u=Math.min.apply(null,s),h=Math.max.apply(null,s),c=w.quartile(s,1),d=w.quartile(s,2),m=w.quartile(s,3),g=o,y=g-r/2,f=g+r/2,D=r/10,v=[];this.userData.vizProps.showBoxplotOutliers&&(l=c-1.5*(n=m-c),p=m+1.5*n,u=1/0,h=-1/0,s.forEach(function(e){l<=e&&e<u&&(u=e),h<e&&e<=p&&(h=e),(e<l||p<e)&&v.push([e,g])}));var b=[[c,y,m,y,m,f,c,f,c,y],[d,y,d,f],[c,g,u,g],[m,g,h,g],[u,g-D,u,g+D],[h,g-D,h,g+D]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis){for(var O=0,L=b;O<L.length;O++)for(var x=L[O],M=0;M<x.length;M+=2){var P=x[M];x[M]=x[M+1],x[M+1]=P}for(var I=0,V=v;I<V.length;I++){var A=V[I],P=A[0];A[0]=A[1],A[1]=P}}var N=[{segments:b,graphMode:W.PARAMETRIC,boundingBox:T("boxplot",b.concat(v)),poi:{},color:i.color}];return v.length&&N.push({segments:[v],graphMode:W.XYPOINT,color:i.color,style:S.PointStyle.OPEN,showPoint:!0,poi:B.default(v)}),N},v.Table.prototype.isValueDraggable=function(e,t,a){if(!e.columns[t].isIndependent)return!1;var i=this.columns[t].values,o=i&&i[a];return!(!o||!isFinite(o.asValue())||0!==o._dependencies.length)},v.Table.prototype.graph=function(e,t,a){var i={};if(t.columns[0].isError)return i;for(var o=t.columns[0],r=o.values,s=1;s<this.columns.length;s++){var n=t.columns[s];if(!n.isError){var l=this.columns[s].header.userData,p=this.columns[s].header.metaData;if(!l.hidden){for(var u=X(p,["colorLatexValue","computedPointSize","computedPointOpacity"]),h=l.dragMode,c=h===G.DragMode.X||h===G.DragMode.XY,d=h===G.DragMode.Y||h===G.DragMode.XY,m=!!l.points,g=!!l.lines,y=n.isDiscrete(o),f=g&&y,D=g&&!y,v=[],b=[],O=[],L=[],x=[],M=[],P=1/0,I=-1/0,V=1/0,A=-1/0,N=0;N<r.length;N++){var S=r[N],T=n.values[N];if(S&&T&&isFinite(S.asValue())&&isFinite(T.asValue())){var E=S.asValue(),C=T.asValue();if(m){if(u<=N)continue;var F=c&&this.isValueDraggable(t,0,N),w=d&&this.isValueDraggable(t,s,N);F||w?(O.push([E,C]),L.push({index:N,dragX:F,dragY:w})):b.push([E,C])}f&&M.push([E,C]),E<P&&(P=E),I<E&&(I=E),C<V&&(V=C),A<C&&(A=C)}else f&&(1<M.length&&x.push(M),M=[])}var z,_={type:"table",xmin:P,xmax:I,ymin:V,ymax:A};O.length&&v.push({graphMode:W.XYPOINT_MOVABLE,segments:[O],color:p.colorLatexValue||l.color,tableId:l.tableId,poi:B.default(O),movablePointInfo:L,boundingBox:_,pointOpacity:p.computedPointOpacity}),b.length&&v.push({segments:[b],graphMode:W.XYPOINT,showPoint:!0,poi:B.default(b),color:p.colorLatexValue||l.color,pointSize:p.computedPointSize,pointOpacity:p.computedPointOpacity,style:l.pointStyle,tableId:l.tableId,boundingBox:_}),(x.length||M.length)&&(x.push(M),v.push({segments:x.map(k),graphMode:W.PARAMETRIC,poi:{},color:R.getDisplayColor(l,p),style:l.lineStyle,lineWidth:Array.isArray(p.computedLineWidth)?p.computedLineWidth[0]:p.computedLineWidth,lineOpacity:Array.isArray(p.computedLineOpacity)?p.computedLineOpacity[0]:p.computedLineOpacity,tableId:l.tableId,boundingBox:_})),!D||(z=this.columns[s].header.graph(e,t.columns[s].continuousConcreteTree,a)).length&&Array.prototype.push.apply(v,z),v.length&&(i[l.id]=v)}}}return i},v.Image.prototype.graph=function(e,t,a){var i=[];if(!("OrderedPair"===t.center.type&&t.center.args[0].isConstant&&t.center.args[1].isConstant&&t.radianAngle.isConstant&&t.width.isConstant&&t.height.isConstant&&t.opacity.isConstant))return i;for(var o,r,s,n=[],l=[],p=t.width.asValue()/2,u=t.height.asValue()/2,h=t.radianAngle.asValue(),c=-1;c<=1;c++)for(var d=-1;d<=1;d++){var m=[t.center.args[0].asValue()+c*p*Math.cos(h)+d*u*Math.sin(h),t.center.args[1].asValue()-c*p*Math.sin(h)+d*u*Math.cos(h)];(o=t.moveStrategy,r=c,s=d,!!o&&(0===r&&0===s?"none"!==o[2].type||"none"!==o[3].type:0!==r&&0!==s?"none"!==o[0].type&&"none"!==o[1].type:0!==r?"none"!==o[0].type:0!==s&&"none"!==o[1].type))&&(n.push(m),l.push([c,d]))}return i.push({segments:[n],scaleFactors:[l],graphMode:W.XYPOINT_MOVABLE,color:R.getDisplayColor(this.userData,this.metaData),style:this.userData.style,poi:B.default(n),movablePointInfo:[],pointOpacity:1}),i}});\ndefine(\'core/math/features/elementAt\',[\'require\',\'parsenodes\',\'core/math/builtinframe\'],function(require){"use strict";var n=require("parsenodes"),o=require("core/math/builtinframe");function t(t,e){for(var r=0;r<this.length;r++)e(this.elementAt(t,r),r)}function e(t,e){for(var r=[],s=0;s<this.length;s++)r.push(e(this.elementAt(t,s),s));return r}n.List.prototype.elementAt=function(t,e){return 0<=(e=Math.floor(e))&&e<this.args.length?this.args[e]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(t,e){if((e=Math.floor(e))<0||e>=this.length)return n.Constant(NaN);for(var r={},s=0;s<this._replacedSymbols.length;s++)r[this._replacedSymbols[s]]=this._lists[s].elementAt(t,e);return this._expression.substitute(r).getConcreteTree(t,o)},n.Broadcast.prototype.asList=function(t){for(var e=[],r=0;r<this.length;r++)e.push(this.elementAt(t,r));return n.List(e)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=e,n.Broadcast.prototype.mapElements=e,n.OrderedPair.prototype.elementAt=function(t,e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}},n.RGBColor.prototype.elementAt=function(t,e){switch(e){case 0:return this.args[0];case 1:return this.args[1];case 2:return this.args[2];default:return n.Constant(NaN)}}});\ndefine(\'core/lib/number-to-latex\',["require","exports"],function(require,e){"use strict";function o(e){var r,t,n,i,a,o,u=e+"";return/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(u)&&(r=String(u).toLowerCase().split("e"),t=parseFloat(r[0]),n=parseInt(r[1],10),i=Math.abs(n),a=Math.abs(t).toString().split("."),u=n<0?"0."+new Array(i).join("0")+a.join(""):((o=a[1])&&(i-=o.length),a.join("")+new Array(i+1).join("0")),t<0&&(u="-"+u)),u}Object.defineProperty(e,"__esModule",{value:!0}),e.numberToStatsConfidenceLatex=e.numberToDecimalString=void 0,e.default=function(e){if("string"==typeof e)return e;if(void 0===e)return"";var r=e+"";return r=(r=r.replace(/1e\\+?([-\\d]+)/,"10^{$1}")).replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")},e.numberToDecimalString=o,e.numberToStatsConfidenceLatex=function(e,r){void 0===r&&(r=2);var t,n=o(e),i=n.indexOf(".");if(-1===i)return n;for(var a=i+1;a<n.length;a++)if(t){if(n[a]!==t)break}else{if("0"!==n[a]&&"9"!==n[a])break;t=n[a]}return n.substr(0,Math.max(i+5,a+r))}});\ndefine(\'core/math/features/printLatex\',[\'require\',\'parsenodes\',\'core/lib/label\',\'core/lib/number-to-latex\'],function(require){"use strict";var e=require("parsenodes"),t=require("core/lib/label"),r=require("core/lib/number-to-latex").default;function i(){return t.identifierToLatex(this._symbol)+" "}function n(t){switch(t){case">":return"\\\\gt ";case"<":return"\\\\lt ";case">=":return"\\\\ge ";case"<=":return"\\\\le ";case"=":return"="}}function a(t){return t.printLatex()}function s(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return t.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(a).join(", ")+"\\\\right)"}}function o(t){return t.isConstant&&!0===t.asValue()}e.Identifier.prototype.printLatex=i,e.FreeVariable.prototype.printLatex=i,e.Constant.prototype.printLatex=function(){return r(this.asValue())},e.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},e.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},e.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},e.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},e.Assignment.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},e.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},e.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+n(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+n(this.args[1])+this.args[2].printLatex()+n(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},e.And.prototype.printLatex=function(){if(!(this.args[0]instanceof e.BaseComparator&&this.args[1]instanceof e.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+n(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+n(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},e.NativeFunction.prototype.printLatex=s,e.TypedFunction.prototype.printLatex=s,e.ReducerFunction.prototype.printLatex=s,e.ParametrizedReducerFunction.prototype.printLatex=s,e.DoubleReducerFunction.prototype.printLatex=s,e.FunctionCall.prototype.printLatex=s,e.Distribution.prototype.printLatex=s,e.SeededFunctionCall.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"\\\\left("+this.args.slice(1).map(a).join(", ")+"\\\\right)"},e.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},e.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},e.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return t.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(a).join(", ")+"\\\\right)"}},e.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(a).join(", ")+"\\\\right]"},e.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(a).join(", ")+" ... "+this.args[1].args.map(a).join(", ")+"\\\\right]"},e.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},e.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},e.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},e.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},e.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},e.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)!"},e.Piecewise.prototype.printLatex=function(){var t=this;if(o(t.args[0]))return t.args[1].printLatex();for(var r,i=["\\\\left\\\\{"];;){if(o(t.args[0])){i.push(t.args[1].printLatex());break}if(i.push(t.args[0].printLatex(),": "),(r=t.args[2]).isConstant&&r.isNaN()){i.push(t.args[1].printLatex());break}if(i.push(t.args[1].printLatex(),", "),!(t.args[2]instanceof e.Piecewise)){i.push(t.args[2].printLatex());break}t=t.args[2]}return i.push("\\\\right\\\\}"),i.join("")},e.FunctionDefinition.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(t.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},e.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+t.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},e.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},e.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Histogram.prototype.printLatex=function(){return"\\\\histogram\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Object3D.prototype.printLatex=function(){return"\\\\"+this._symbol+"\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.DotPlot.prototype.printLatex=function(){return"\\\\dotplot\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.BoxPlot.prototype.printLatex=function(){return"\\\\boxplot\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.TTest.prototype.printLatex=function(){return"\\\\TTest\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.IndependentTTest.prototype.printLatex=function(){return"\\\\IndependentTTest\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Stats.prototype.printLatex=function(){return"\\\\Stats\\\\left("+this.args.map(a).join(", ")+"\\\\right)"}});\ndefine(\'core/math/features/statistics\',[\'require\',\'parsenodes\',\'core/math/maybe-rational\'],function(require){"use strict";var r=require("parsenodes"),i=r.BuiltInFunction,n=require("core/math/maybe-rational").maybeRational,s=r.Constant(n(0,1)),o=r.Constant(n(1,1)),e=r.Constant(n(2,1)),t=r.Constant(n(1,2)),a=r.Constant(-1/0);i.normaldist.prototype.pdf=function(t){return i.normalpdf([t[0],this.args[0],this.args[1]])},i.normaldist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.normalcdf([n,r,this.args[0],this.args[1]])},i.normaldist.prototype.mean=function(){return this.args[0]},i.normaldist.prototype.median=function(){return this.args[0]},i.normaldist.prototype.stdev=function(){return i.abs([this.args[1]])},i.normaldist.prototype.var=function(){return r.Exponent([this.args[1],e])},i.normaldist.prototype.quantile=function(t){return r.Add([r.Multiply([i.invNorm(t),this.stdev()]),this.mean()])},i.normaldist.prototype.sample=function(t){return i.normalSample([t[0],this.args[0],this.args[1]])},i.tdist.prototype.pdf=function(t){return i.tpdf([t[0],this.args[0]])},i.tdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.tcdf([n,r,this.args[0]])},i.tdist.prototype.mean=function(){return s},i.tdist.prototype.median=function(){return s},i.tdist.prototype.quantile=function(t){return i.invT([t[0],this.args[0]])},i.tdist.prototype.sample=function(t){return i.tSample([t[0],this.args[0]])},i.tdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.tdist.prototype.var=function(){var t=this.args[0];return r.Piecewise([r.Comparator[">="]([t,e]),r.Divide([t,r.Subtract([t,e])]),r.Constant(NaN)])},i.poissondist.prototype.pdf=function(t){return i.poissonpdf([t[0],this.args[0]])},i.poissondist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.poissoncdf([n,r,this.args[0]])},i.poissondist.prototype.mean=function(){return this.args[0]},i.poissondist.prototype.median=function(){return i.invPoisson([t,this.args[0]])},i.poissondist.prototype.stdev=function(){return i.sqrt([this.args[0]])},i.poissondist.prototype.var=function(){return this.args[0]},i.poissondist.prototype.quantile=function(t){return i.invPoisson([t[0],this.args[0]])},i.poissondist.prototype.sample=function(t){return i.poissonSample([t[0],this.args[0]])},i.binomialdist.prototype.pdf=function(t){return i.binompdf([t[0],this.args[0],this.args[1]])},i.binomialdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.binomcdf([n,r,this.args[0],this.args[1]])},i.binomialdist.prototype.mean=function(){return r.Multiply([this.args[0],this.args[1]])},i.binomialdist.prototype.median=function(){return i.invBinom([t,this.args[0],this.args[1]])},i.binomialdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.binomialdist.prototype.var=function(){var t=this.args[0],n=this.args[1];return r.Multiply([t,r.Multiply([n,r.Subtract([o,n])])])},i.binomialdist.prototype.quantile=function(t){return i.invBinom([t[0],this.args[0],this.args[1]])},i.binomialdist.prototype.sample=function(t){return i.binomSample([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.pdf=function(t){return i.uniformpdf([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.uniformcdf([n,r,this.args[0],this.args[1]])},i.uniformdist.prototype.mean=function(){return r.Divide([r.Add([this.args[0],this.args[1]]),e])},i.uniformdist.prototype.median=function(){return r.Divide([r.Add([this.args[0],this.args[1]]),e])},i.uniformdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.uniformdist.prototype.var=function(){return r.Divide([r.Exponent([r.Subtract([this.args[1],this.args[0]]),e]),r.Constant(n(12,1))])},i.uniformdist.prototype.quantile=function(t){return i.invUniform([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.sample=function(t){return i.uniformSample([t[0],this.args[0],this.args[1]])},r.List.prototype.sample=function(t){return r.ListAccess([this,r.Add([i.floor([r.Multiply([i.uniformSample([t[0],s,o]),r.Constant(n(this.length,1))])]),o])])}});\ndefine(\'core/math/features/getExpressionType\',[\'require\',\'parsenodes\',\'core/types/graphmode\',\'core/math/expression-types\',\'core/math/types\'],function(require){"use strict";var e=require("parsenodes"),o=require("core/types/graphmode"),r=require("core/math/expression-types").ExpressionType,n=require("core/math/types");e.Base.prototype.getExpressionType=function(e,t){return e===o.X||e===o.Y?r.X_OR_Y:e===o.XYPOINT||e===o.XYPOINT_MOVABLE?t===n.Point?r.SINGLE_POINT:r.POINT_LIST:e===o.PARAMETRIC||e===o.PARAMETRIC_CURVE_3D?r.PARAMETRIC:e===o.POLAR?r.POLAR:e===o.IMPLICIT?r.IMPLICIT:r.X_OR_Y},e.Polygon.prototype.getExpressionType=function(e,t){return r.POLYGON},e.Histogram.prototype.getExpressionType=function(e,t){return r.HISTOGRAM},e.Object3D.prototype.getExpressionType=function(e,t){return r.CUBE},e.DotPlot.prototype.getExpressionType=function(e,t){return r.DOTPLOT},e.BoxPlot.prototype.getExpressionType=function(e,t){return r.BOXPLOT}});\ndefine(\'core/math/features/findLinearSubset\',[\'require\',\'parsenodes\',\'core/math/maybe-rational\'],function(require){"use strict";var d=require("parsenodes"),e=require("core/math/maybe-rational").maybeRational,f=d.Constant(e(0,1)),p=d.Constant(e(-1,0));d.Expression.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!this.dependsOn(e[n]));return t},d.FreeVariable.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!0);return t},d.Add.prototype.findLinearSubset=function(e){for(var t=[],n=this.args[0].findLinearSubset(e),r=this.args[1].findLinearSubset(e),i=0;i<e.length;i++)t.push(n[i]&&r[i]);return t},d.Subtract.prototype.findLinearSubset=d.Add.prototype.findLinearSubset,d.Negative.prototype.findLinearSubset=function(e){return this.args[0].findLinearSubset(e)},d.Multiply.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e).slice(),n=this.args[1].findLinearSubset(e).slice(),r=0,i=0,s=0;s<e.length;s++)t[s]=t[s]&&!this.args[1].dependsOn(e[s]),t[s]&&(r+=1),n[s]=n[s]&&!this.args[0].dependsOn(e[s]),n[s]&&(i+=1);return i<=r?t:n},d.Divide.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e),n=[],r=0;r<e.length;r++)n.push(t[r]&&!this.args[1].dependsOn(e[r]));return n},d.List.prototype.findLinearSubset=function(e){var t=[];for(i=0;i<e.length;i++)t.push(!0);for(var n=0;n<this.args.length;n++)for(var r=this.args[n].findLinearSubset(e),i=0;i<e.length;i++)t[i]=t[i]&&r[i];return t},d.Broadcast.prototype.findLinearSubset=function(e){for(var t=this._replacedSymbols,n=this._expression,r=this._lists,i={},s=0;s<r.length;s++){for(var a=r[s].findLinearSubset(e),o=f,u=0;u<e.length;u++)a[u]?r[s].dependsOn(e[u])&&(o=d.Add([o,d.FreeVariable(e[u])])):o=d.Add([o,d.Exponent([d.FreeVariable(e[u]),p])]);i[t[s]]=o}return n.substitute(i).findLinearSubset(e)},d.Piecewise.prototype.findLinearSubset=function(e){for(var t=this.args[0],n=this.args[1].findLinearSubset(e),r=this.args[2].findLinearSubset(e),i=[],s=0;s<e.length;s++)i.push(!t.dependsOn(e[s])&&n[s]&&r[s]);return i}});\ndefine(\'core/math/features/deriveRegressionRestrictions\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/math/domaintypes\'],function(require){"use strict";var g=require("parsenodes"),c=require("core/math/types"),s=require("core/math/domaintypes");function e(e){for(var t,n=this.args[0],r=this.getDependencies(),i={},s=0;s<r.length;s++)if(e.listStatistics.hasOwnProperty(r[s])){if(void 0!==t)return{};t=r[s]}if(void 0===t)return{};if(1!==n.polynomialOrder(t))return{};var o=n.getPolynomialCoefficients(t),a=o[1],c=o[1].getDependencies();if(1!==c.length)return{};var p=c[0];if(1!==a.polynomialOrder(p))return{};var u=e.listStatistics[t],l=(u.max-u.min)/Math.min(u.length-1,31),f=Math.PI/l;return!isFinite(f)||f<=0?{}:(i[p]=g.Piecewise([g.And([g.Comparator["<="]([g.Constant(0),a]),g.Comparator["<"]([a,g.Constant(f)])]),g.Constant(1),g.Constant(NaN)]).boundDomain(p),i)}g.Base.prototype.deriveRegressionRestrictions=function(){return this},g.Broadcast.prototype.deriveRegressionRestrictions=function(){for(var e=this._replacedSymbols,t=this._expression,n=this._lists,r={},i=0;i<e.length;i++)0===n[i].getDependencies().length&&n[i].valueType===c.ListOfNumber&&(r[e[i]]=function(e){for(var t=1/0,n=-1/0,r=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),n=Math.max(n,e[i]);return{min:t,max:n,length:r}}(n[i].asValue()));var s,o=t._deriveRegressionRestrictions({listStatistics:r});for(s in o)if("known"!==o[s].type)return this;var a=t;for(s in o)a=function(e,t,n){if("known"!==n.type)return e;var r=g.And([g.Comparator["<="]([g.Constant(n.bounds[0]),g.FreeVariable(t)]),g.Comparator["<="]([g.FreeVariable(t),g.Constant(n.bounds[1])])]);return g.Multiply([e,g.Piecewise([r,g.Constant(1),g.Constant(NaN)])])}(a,s,o[s]);return g.Broadcast(e,[a].concat(n))},g.Base.prototype._deriveRegressionRestrictions=function(e){return{}},g.Expression.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=0;n<this.args.length;n++){var r=this.args[n]._deriveRegressionRestrictions(e);for(var i in r)t[i]=t[i]?s.intersectDomains(t[i],r[i]):r[i]}return t},g.BuiltInFunction.sin.prototype._deriveRegressionRestrictions=e,g.BuiltInFunction.cos.prototype._deriveRegressionRestrictions=e,g.Exponent.prototype._deriveRegressionRestrictions=function(e){for(var t=this.args[0],n=this.args[1],r=t.getDependencies(),i=n.getDependencies(),s={},o=!1,a=0;a<i.length;a++)if(e.listStatistics.hasOwnProperty(i[a])){o=!0;break}if(!o)return{};if(1!==r.length)return{};var c=r[0];return e.listStatistics.hasOwnProperty(c)||1!==t.polynomialOrder(c)?{}:(s[c]=g.Piecewise([g.Comparator[">="]([t,g.Constant(0)]),g.Constant(1),g.Constant(NaN)]).boundDomain(c),s)},g.Piecewise.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=this.getDependencies(),r=0;r<n.length;r++)t[n[r]]=s.unknownDomain();return t}});\ndefine(\'core/math/features/reparameterizeRegression\',[\'require\',\'parsenodes\',\'core/math/types\'],function(require){"use strict";var x=require("parsenodes"),n=require("core/math/types");function b(e,t){for(var r,i=e.getDependencies(),n=0;n<i.length;n++)if(t.hasOwnProperty(i[n])){if(void 0!==r)return;r=i[n]}return r}function D(e,t){if(1===e.polynomialOrder(t)){var r=e.getPolynomialCoefficients(t),i=r[1],n=r[0],s=i.getDependencies();if(1===s.length){var a=s[0];if(1===i.polynomialOrder(a)){var o=n.getDependencies().filter(function(e){return e!==a});if(1===o.length){var p=o[0];if(1===n.polynomialOrder(p))return[n,i]}}}}}function F(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(void 0!==r)for(var i=r.getDependencies(),n=0;n<i.length;n++){var s=i[n];-1===e.indexOf(s)&&e.push(s)}}return e}function u(e,t,r){for(var i=0;i<e.length;i++)if(i!==r)for(var n=e[i],s=0;s<t.length;s++)for(var a=t[s].model.replacedDependencies,o=0;o<a.length;o++)if(n.dependsOn(a[o]))return 1}function d(e){var t,r;for(s=0;s<this.args.length;s++){var i=this.args[s]._reparameterizeRegression(e);if(i){if(void 0!==r)return;t=i,r=s}}if(void 0!==r&&!u(this.args,t,r)){for(var n=[],s=0;s<t.length;s++){var a=t[s];n.push({model:a.model,expression:this.copyWithArgs([].concat(this.args.slice(0,r),a.expression,this.args.slice(r+1)))})}return n}}function g(e,t){var r=e.model;if("exp"!==r.type)return e;if(r.shiftScale)return e;var i=e.expression,n="Negative"===i.type;if(n&&(i=i.args[0]),"BuiltInFunction[\'exp\']"!==i.type)return e;var s=i.args[0],a=b(s,t.listStatistics);if(void 0===a)return e;var o=D(s,a);if(!o)return e;var p=o[0],l=o[1],c=[s.tmpVar(),s.tmpVar()],u=t.listStatistics[a].max-t.listStatistics[a].min,d=.5*(t.listStatistics[a].max+t.listStatistics[a].min),g=x.BuiltInFunction.exp([x.Add([x.Multiply([x.FreeVariable(c[0]),x.Divide([x.Subtract([x.DummyIndex(a),x.Constant(d)]),x.Constant(u)])]),x.FreeVariable(c[1])])]);return n&&(g=x.Negative([g])),{model:{type:"exp",shiftScale:{mulNode:l,addNode:p,newParameterSymbols:c,stats:{range:u,midrange:d}},base:r.base,intercept:r.intercept,replacedDependencies:F(l,p,r.base&&r.base.node,r.intercept&&r.intercept.node)},expression:g}}function f(e,t,r){var i=e._symbol,n=e.args[0],s=b(n,r.listStatistics);if(void 0!==s){var a=D(n,s);if(a){var o=a[0],p=a[1],l=t.getDependencies();if(1===l.length){var c=l[0];if(!n.dependsOn(c)&&1===t.polynomialOrder(c)){var u,d,g,f,m,h,y,v=[e.tmpVar(),e.tmpVar(),e.tmpVar()];return[{model:{type:"trig",amplitudeNode:t,frequencyNode:p,phaseNode:o,newParameterSymbols:v,replacedDependencies:F(t,p,o)},expression:(d=s,g=v,f="cos"===(u=i)?g[0]:g[1],m="cos"===u?g[1]:g[0],h=g[2],y=x.Multiply([x.FreeVariable(h),x.DummyIndex(d)]),("sin"===u?x.Add:x.Subtract)([x.Multiply([x.FreeVariable(f),x.BuiltInFunction.cos([y])]),x.Multiply([x.FreeVariable(m),x.BuiltInFunction.sin([y])])]))}]}}}}}x.Base.prototype.reparameterizeRegression=function(){},x.Broadcast.prototype.reparameterizeRegression=function(){for(var e=this._replacedSymbols,t=this._lists,r={},i=0;i<e.length;i++)0===t[i].getDependencies().length&&t[i].valueType===n.ListOfNumber&&(r[e[i]]=function(e){for(var t=1/0,r=-1/0,i=e.length,n=0;n<e.length;n++)t=Math.min(t,e[n]),r=Math.max(r,e[n]);return{min:t,max:r,length:i}}(t[i].asValue()));return this._reparameterizeRegression({listStatistics:r})},x.Base.prototype._reparameterizeRegression=function(e){},x.Expression.prototype._reparameterizeRegression=d,x.Exponent.prototype._reparameterizeRegression=function(e){var t=this.args[0],r=this.args[1],i=r.getDependencies(),n=t.getDependencies();if(function(e,t){for(var r=e.getDependencies(),i=0;i<r.length;i++)if(t[r[i]])return 1}(r,e.listStatistics)){if(0===n.length){if(t.asValue()<0)return;return[{model:{type:"exp",replacedDependencies:[]},expression:x.BuiltInFunction.exp([x.Multiply([x.BuiltInFunction.ln([t]),r])])}]}if(1===n.length&&!e.listStatistics.hasOwnProperty(n[0])&&-1===i.indexOf(n[0])&&1===t.polynomialOrder(n[0])){var s=this.tmpVar();return[g({model:{type:"exp",base:{node:t,newParameterSymbols:[s]},replacedDependencies:t.getDependencies()},expression:x.BuiltInFunction.exp([x.Multiply([x.FreeVariable(s),r])])},e)]}}},x.BuiltInFunction.exp.prototype._reparameterizeRegression=function(e){if(void 0!==b(this.args[0],e.listStatistics))return[g({model:{type:"exp",replacedDependencies:[]},expression:this},e)]},x.Multiply.prototype._reparameterizeRegression=function(e){var t,r,i;if("BuiltInFunction[\'sin\']"===this.args[0].type||"BuiltInFunction[\'cos\']"===this.args[0].type)return f(this.args[0],this.args[1],e);if("BuiltInFunction[\'sin\']"===this.args[1].type||"BuiltInFunction[\'cos\']"===this.args[1].type)return f(this.args[1],this.args[0],e);for(i=0;i<this.args.length;i++){var n=this.args[i]._reparameterizeRegression(e);if(n){if(void 0!==r)return;t=n,r=i}}if(void 0!==r&&!u(this.args,t,r)){var s=1===r?0:1,a=this.args[s];if(1!==t.length)return d.call(this,e);var o=t[0],p=o.model;if("exp"!==p.type||"BuiltInFunction[\'exp\']"!==o.expression.type||o.model.shiftScale)return d.call(this,e);var l=a.getDependencies();if(1!==l.length||1!==a.polynomialOrder(l[0])||e.listStatistics.hasOwnProperty(l[0]))return d.call(this,e);var c=this.tmpVar();return[{model:{type:"exp",replacedDependencies:[]},expression:this},g({model:{type:"exp",base:p.base,intercept:{node:a,newParameterSymbols:[c],sign:1},replacedDependencies:F(p.base&&p.base.node,a)},expression:x.BuiltInFunction.exp([x.Add([o.expression.args[0],x.FreeVariable(c)])])},e),g({model:{type:"exp",base:p.base,intercept:{node:a,newParameterSymbols:[c],sign:-1},replacedDependencies:F(p.base&&p.base.node,a)},expression:x.Negative([x.BuiltInFunction.exp([x.Add([o.expression.args[0],x.FreeVariable(c)])])])},e)]}}});\ndefine(\'parser\',[\'require\',\'core/math/baseparser\',\'core/math/features/getConcreteTree\',\'core/math/features/getValueType\',\'core/math/features/typeCheck\',\'core/math/features/repr\',\'core/math/features/scalarEvalExpression\',\'core/math/features/constantcollapsedcopy\',\'core/math/features/polynomialorder\',\'core/math/features/polynomialcoefficients\',\'core/math/features/extractconditions\',\'core/math/features/piecewiseDependsOn\',\'core/math/features/bounddomain\',\'core/math/features/derivative\',\'core/math/features/substitute\',\'core/math/features/isImplicit\',\'core/math/features/solve\',\'core/math/features/analyze\',\'core/math/features/analyzeFourFunction\',\'core/math/features/analyzeScientific\',\'core/math/features/analyzeSingleExpressionScientific\',\'core/math/features/getgraphmode\',\'core/math/features/getgraphinfo\',\'core/math/features/getMoveStrategy\',\'core/math/features/getDefaultDragMode\',\'core/math/features/tableinfo\',\'core/math/features/tableerror\',\'core/math/features/graph\',\'core/math/features/elementAt\',\'core/math/features/printLatex\',\'core/math/features/statistics\',\'core/math/features/getExpressionType\',\'core/math/features/findLinearSubset\',\'core/math/features/deriveRegressionRestrictions\',\'core/math/features/reparameterizeRegression\'],function(require){"use strict";var e=require("core/math/baseparser");return require("core/math/features/getConcreteTree"),require("core/math/features/getValueType"),require("core/math/features/typeCheck"),require("core/math/features/repr"),require("core/math/features/scalarEvalExpression"),require("core/math/features/constantcollapsedcopy"),require("core/math/features/polynomialorder"),require("core/math/features/polynomialcoefficients"),require("core/math/features/extractconditions"),require("core/math/features/piecewiseDependsOn"),require("core/math/features/bounddomain"),require("core/math/features/derivative"),require("core/math/features/substitute"),require("core/math/features/isImplicit"),require("core/math/features/solve"),require("core/math/features/analyze"),require("core/math/features/analyzeFourFunction"),require("core/math/features/analyzeScientific"),require("core/math/features/analyzeSingleExpressionScientific"),require("core/math/features/getgraphmode"),require("core/math/features/getgraphinfo"),require("core/math/features/getMoveStrategy"),require("core/math/features/getDefaultDragMode"),require("core/math/features/tableinfo"),require("core/math/features/tableerror"),require("core/math/features/graph"),require("core/math/features/elementAt"),require("core/math/features/printLatex"),require("core/math/features/statistics"),require("core/math/features/getExpressionType"),require("core/math/features/findLinearSubset"),require("core/math/features/deriveRegressionRestrictions"),require("core/math/features/reparameterizeRegression"),e});\ndefine(\'core/math/finddependencyorder\',[\'require\',\'core/math/builtinframe\',\'underscore\'],function(require){"use strict";var k=require("core/math/builtinframe"),x=require("underscore");return function(o,u,r){var n,e,i,t=[],v={},l={},a={},c={},g=0,d=[],w=[];if(!r)for(n in r=[],u)u.hasOwnProperty(n)&&r.push(n);for(n in u)if(u.hasOwnProperty(n)){for(i=u[n].exportPenalty||0;t.length<i+1;)t.push([]);t[i].push(n)}for(i=0;i<t.length;i++){for(var h={},p=0;p<t[i].length;p++){n=t[i][p];for(var s=u[n].getLegalExports(o),f=0;f<s.length;f++)e=s[f],k[e]||v[e]||(h[e]=h[e]||[],h[e].push(n),1<h[e].length&&(l[e]=!0))}for(e in h)v[e]=h[e]}for(p=0;p<r.length;p++)c.hasOwnProperty(r[p])||!function r(n){c[n]=c[n]||{};var e=c[n];var i;e.id=n;e.index=g;e.lowlink=g;d.push(e);e.instack=!0;g++;var t=u[n].getDependencies();for(var o=0;o<t.length;o++){var l=t[o];if(v.hasOwnProperty(l))for(var a=v[l],h=0;h<a.length;h++){var p=a[h];c.hasOwnProperty(p)?(i=c[p]).instack&&(e.lowlink=Math.min(e.lowlink,i.index)):(r(p),i=c[p],e.lowlink=Math.min(e.lowlink,i.lowlink))}}if(e.lowlink===e.index)if((i=d.pop()).instack=!1,i===e)f=e,w.push(f.id);else{for(var s=[i];(i=d.pop()).instack=!1,s.push(i),i!==e;);y(s)}var f}(r[p]);function y(r){for(var n,e=[],i=r.length-1;0<=i;i--){n=r[i];var t=u[n.id].getLegalExports(o);Array.prototype.push.apply(e,t),e.push(t[0]),w.push(n.id)}for((e=x.unique(e)).sort(),i=0;i<e.length;i++)a[e[i]]=e}return{resolved:w,multiplyDefined:l,cyclicallyDefined:a}}});\ndefine(\'core/math/findIntersections\',[\'require\',\'core/types/graphmode\',\'./plotter\',\'parsenodes\',\'core/math/distance\'],function(require){"use strict";var N=require("core/types/graphmode"),X=require("./plotter").default,i=require("parsenodes"),c=require("core/math/distance");function k(n){for(var t=[],e=0;e<n;e++)t[e]={x:[],y:[],intersects:[]};return t}function A(n,t){t instanceof i.SolvedEquation?t=t._expression:t instanceof i.OptimizedRegression&&(t=t.model);var e=[],r=[];return t instanceof i.DoubleInequality?i.List.eachArgs(n,t._expressions,function(n){e.push(n[0].getCompiledFunction()),r.push(n[0].isConstant&&n[1].isNaN()),e.push(n[1].getCompiledFunction()),r.push(n[1].isConstant&&n[1].isNaN())}):i.List.wrap(t).eachElement(n,function(n){e.push(n.getCompiledFunction()),r.push(n.isConstant&&n.isNaN())}),{functions:e,skipIntersecting:r}}function Y(n,t,e){for(var r=X.sampleXY(n,t),i=r.poi.zeros,o=r.poi.extrema,s=[],p=0,u=0,p=0;p<i.x.length;p++){for(;u<o.x.length&&o.x[u]<i.x[p];u++)c.approx(o.y[u],0)&&s.push(o.x[u]);s.push(i.x[p])}for(;u<o.x.length;u++)c.approx(o.y[u],0)&&s.push(o.x[u]);return{x:s,y:s.map(e)}}return{findIntersections:function(n,t,e){var r=n[e],i=r.getGraphInfo(),o=r.getGraphMode(),s=A(r.policy,r.concreteTree),p=k(s.functions.length),u=function(n,t){var e,r,i=[];for(var o in n){n.hasOwnProperty(o)&&String(o)!==String(t)&&n[o].shouldIntersect()&&(r=A((e=n[o]).policy,e.concreteTree),i.push({id:o,graphMode:e.getGraphMode(),functions:r.functions,skipIntersecting:r.skipIntersecting}))}return i}(n,e);if(!u)return p;for(var c,a,f,h,g=0,l=0;l<u.length;l++)for(var y=u[l],d=0;d<s.functions.length;d++)if(!s.skipIntersecting[d])for(var x=s.functions[d].fn,v=X.computeDomain(t,i,x),m=0;m<y.functions.length;m++)if(!u[l].skipIntersecting[m]){var I=function(t,e,n,r){return n===N.X&&r===N.X||n===N.Y&&r===N.Y?function(n){return e(n)-t(n)}:(n===N.X&&r===N.Y||n===N.Y&&r===N.X)&&function(n){return n-e(t(n))}}(x,y.functions[m].fn,o,y.graphMode);if(I){var C=Y(I,v,x);if(100<(g+=C.x.length))return k(s.functions.length);!function(n,t){n.intersects=Array(n.x.length);for(var e=0;e<n.x.length;e++)n.intersects[e]=t}(C,y.id),f=C,h=void 0,o===N.X&&(h=f.y,f.y=f.x,f.x=h),c=p[d],a=C,Array.prototype.push.apply(c.x,a.x),Array.prototype.push.apply(c.y,a.y),Array.prototype.push.apply(c.intersects,a.intersects)}}return p},findIndicatorZeros:Y}});\ndefine(\'core/math/policyFourFunction\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicySingleExpressionFourFunction=e.PolicyFourFunction=void 0;var n=(i.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},i.prototype.isValidSlider=function(e){return!1},i.prototype.sliderVariables=function(){return[]},i.prototype.graphingEnabled=function(){return!1},i.prototype.ansEnabled=function(){return!this.singleExpression},i.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},i);function i(e){this.singleExpression=e.singleExpression}e.PolicyFourFunction=new n({singleExpression:!1}),e.PolicySingleExpressionFourFunction=new n({singleExpression:!0})});\ndefine(\'core/math/policyScientific\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicySingleExpressionScientific=e.PolicyScientific=void 0;var i=(n.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},n.prototype.isValidSlider=function(e){return!1},n.prototype.sliderVariables=function(){return[]},n.prototype.graphingEnabled=function(){return!1},n.prototype.ansEnabled=function(){return!this.singleExpression},n.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},n);function n(e){this.singleExpression=e.singleExpression}e.PolicyScientific=new i({singleExpression:!1}),e.PolicySingleExpressionScientific=new i({singleExpression:!0})});\ndefine(\'core/math/policyGraphing\',["require","exports","./builtinframe","core/types/graphmode"],function(require,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyGraphing3D=t.PolicyGraphing=void 0;var e=(i.prototype.dimensions=function(){return 2},i.prototype.assignmentForbidden=function(t){return"x"===t||"y"===t||"theta"===t||"tmp"===t.slice(0,3)||r.hasOwnProperty(t)},i.prototype.isValidSlider=function(t){return"x"===t||"y"===t||"ans"!==t.slice(0,3)&&!this.assignmentForbidden(t)},i.prototype.sliderVariables=function(t){var r=this;return-1!==t.indexOf("theta")&&(t=t.filter(function(t){return"r"!==t})),t.filter(function(t){return!r.assignmentForbidden(t)&&"ans"!==t.slice(0,3)})},i.prototype.graphingEnabled=function(){return!0},i.prototype.ansEnabled=function(){return!1},i.prototype.validRegressionParameter=function(t){return"x"!==t&&"y"!==t},i.prototype.validLHS=function(t){return"theta"!==t},i.prototype.unplottablePolarFunction=function(t,r){return"theta"===t&&-1!==r.indexOf("r")},i.prototype.validDoubleInequalitySymbol=function(t){return"x"===t||"y"===t},i.prototype.validDoubleInequalityVariables=function(t){return!(2<t.length)&&t.every(this.validDoubleInequalitySymbol)},i.prototype.validExpressionVariables=function(t){return 1===t.length&&"x"===t[0]},i.prototype.validSolvedVariable=function(t){return"x"===t||"y"===t||"r"===t},i.prototype.validImplicitVariables=function(t){switch(t.length){case 0:return!0;case 1:return"x"===t[0]||"y"===t[0]||"r"===t[0];case 2:return"x"===t[0]&&"y"===t[1]||"y"===t[0]&&"x"===t[1]||"r"===t[0]&&"theta"===t[1]||"theta"===t[0]&&"r"===t[1];default:return!1}},i.prototype.graphableListVariables=function(t,r){return"x"===t||"y"===t||"r"===t||"x"===r||"y"===r},i.prototype.validParametricVariable=function(t){return"t"===t},i.prototype.validParametricVariables=function(t){return 1===t.length&&this.validParametricVariable(t[0])},i.prototype.validInequalityVariables=function(t){switch(t.length){case 1:return"x"===t[0]||"y"===t[0]||"r"===t[0];case 2:return this.validImplicitVariables(t);default:return!1}},i.prototype.validFirstColumnVariable=function(t){return"y"!==t&&"r"!==t&&"theta"!==t&&!t.match(/y_(\\d+)/)},i.prototype.complicatedPolarImplicit=function(t,r){return"theta"===t||"r"===t&&1!==r},i.prototype.constantGraphMode=function(t){return"x"===t?n.X:"r"===t?n.POLAR:n.Y},i.prototype.graphMode=function(t,r){var e=r[0];return"y"===e||"x"===t?n.X:"r"===t&&"theta"===e?n.POLAR:n.Y},i.prototype.tableableAsConstant=function(t){return"x"!==t&&"r"!==t&&"theta"!==t},i.prototype.implicitIndependent=function(t){return"x"},i.prototype.implicitDependency=function(t){return 1!==t.length?"y":"y"===t[0]?"x":"theta"===t[0]?"r":"y"},i.prototype.graphableAsConstant=function(t){return"y"===t||"x"===t||"r"===t},i.prototype.disabledFeatures=function(){return[]},i);function i(){}var o=(a.prototype.dimensions=function(){return 3},a.prototype.assignmentForbidden=function(t){return"x"===t||"y"===t||"z"===t||"tmp"===t.slice(0,3)||r.hasOwnProperty(t)},a.prototype.isValidSlider=function(t){return"x"===t||"y"===t||"z"===t||"ans"!==t.slice(0,3)&&!this.assignmentForbidden(t)},a.prototype.sliderVariables=function(t){var r=this;return t.filter(function(t){return!r.assignmentForbidden(t)&&"ans"!==t.slice(0,3)})},a.prototype.graphingEnabled=function(){return!0},a.prototype.ansEnabled=function(){return!1},a.prototype.validRegressionParameter=function(t){return!1},a.prototype.validLHS=function(t){return!0},a.prototype.unplottablePolarFunction=function(t,r){return!1},a.prototype.validDoubleInequalitySymbol=function(t){return!1},a.prototype.validDoubleInequalityVariables=function(t){return!1},a.prototype.validExpressionVariables=function(t){var r=t.join("");return"x"===r||"y"===r||"xy"===r||"yx"===r},a.prototype.validSolvedVariable=function(t){return"x"===t||"y"===t||"z"===t},a.prototype.validImplicitVariables=function(t){return!1},a.prototype.graphableListVariables=function(t,r){return"x"===t||"y"===t||"x"===r||"y"===r},a.prototype.validParametricVariable=function(t){return"t"===t},a.prototype.validParametricVariables=function(t){return 1===t.length&&this.validParametricVariable(t[0])},a.prototype.validInequalityVariables=function(t){return!1},a.prototype.validFirstColumnVariable=function(t){return!1},a.prototype.complicatedPolarImplicit=function(t,r){return!1},a.prototype.constantGraphMode=function(t){return n.Z_3D},a.prototype.graphMode=function(t,r){return"z"===t&&this.validExpressionVariables(r)?n.Z_3D:n.NONE},a.prototype.tableableAsConstant=function(t){return"x"!==t&&"r"!==t},a.prototype.implicitIndependent=function(t){return"x"},a.prototype.implicitDependency=function(t){if(2!==t.length)return"z";var r=t[0]<t[1]?t[0]+t[1]:t[1]+t[0];return"xy"===r?"z":"xz"===r?"y":"yz"===r?"x":"z"},a.prototype.graphableAsConstant=function(t){return"z"===t},a.prototype.disabledFeatures=function(){return[]},a);function a(){}t.PolicyGraphing=new e,t.PolicyGraphing3D=new o});\ndefine(\'core/math/frameFourFunction\',[\'require\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var i=require("core/math/parsenode/builtinfunction");return{getFrame:function(n){var t={};return n.additionalFunctions&&-1!==n.additionalFunctions.indexOf("sqrt")&&(t.sqrt=i.sqrt),t}}});\ndefine(\'core/math/frameScientific\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var e=require("core/math/builtinconstants"),i=require("core/math/parsenode/builtinfunction"),r=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];function n(r,n){for(var t=0;t<r.length;t++){var e=r[t];if(!n.hasOwnProperty(e))throw new Error("Programming Error: key \'"+e+"\' does not exist in table. Must be one of:\\n"+Object.keys(n).join("\\n"))}}return n(r,e),n(o,i),{getFrame:function(n){var t={};return r.forEach(function(r){t[r]=e[r]}),o.forEach(function(r){n.replaceRoundWithReciprocal&&"round"===r||(t[r]=i[r])}),n.trigAngleMultiplier&&(t.trigAngleMultiplier=n.trigAngleMultiplier),t}}});\ndefine(\'core/math/frameSingleExpressionScientific\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var t=require("core/math/builtinconstants"),i=require("core/math/parsenode/builtinfunction"),e=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];function r(r,n){for(var t=0;t<r.length;t++){var i=r[t];if(!n.hasOwnProperty(i))throw new Error("Programming Error: key \'"+i+"\' does not exist in table. Must be one of:\\n"+Object.keys(n).join("\\n"))}}return r(e,t),r(o,i),{getFrame:function(r){var n={};return e.forEach(function(r){n[r]=t[r]}),o.forEach(function(r){n[r]=i[r]}),r.trigAngleMultiplier&&(n.trigAngleMultiplier=r.trigAngleMultiplier),n}}});\ndefine(\'core/math/frameGraphing\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var e=require("core/math/builtinconstants"),r=require("core/math/parsenode/builtinfunction"),o=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov","distance","midpoint"],a=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"],c=["distance","midpoint"],s=["det","inv","transpose","rref","trace"];function t(t,i){for(var n=0;n<t.length;n++){var e=t[n];if(!i.hasOwnProperty(e))throw new Error("Programming Error: key \'"+e+"\' does not exist in table. Must be one of:\\n"+Object.keys(i).join("\\n"))}}return t(o,r),t(a,r),{getFrame:function(t){var i,n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(i in r)r.hasOwnProperty(i)&&(!0!==t.restrictedFunctions||-1===o.indexOf(i)||!0===t.forceEnableGeometryFunctions&&-1!==c.indexOf(i))&&(!1===t.distributions&&-1!==a.indexOf(i)||-1===s.indexOf(i)&&(n[i]=r[i]));return t.trigAngleMultiplier&&(n.trigAngleMultiplier=t.trigAngleMultiplier),t.globalRandomSeed&&(n.globalRandomSeed=t.globalRandomSeed),t.initialEvaluation&&(n.initialEvaluation=t.initialEvaluation),n}}});\ndefine(\'core/math/interpolatedlabel\',["require","exports","parsenodes","core/lib/label","./policy","core/math/types"],function(require,e,p,r,f,c){"use strict";function h(e){if(e.length<2)return"text";var t=e.split("`").length-1;return t<2?"text":2==t&&"`"===e[0]&&"`"===e[e.length-1]?"latex":"mixed"}function t(e){if(0===e.length)return[""];for(var t=[],r=e.split(/(`)/),n=!1,a="",u=0;u<r.length;u++){var i=r[u];i.length&&("`"===i?(a+="`",(n=!n)||(t.push(a),a="")):(a+=i,n||(t.push(a),a="")))}return a.length&&t.push(a),t}function n(e){for(var t,r,n="\\\\$({"+["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"].join("})|\\\\$({")+"})",a=new RegExp(n,"g"),u=[],i=0;r=a.exec(e);){i<(t=r.index)&&u.push(e.substr(i,t-i));var s=r[0],l=s.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");u.push({symbol:l,str:s}),i=r.index+s.length}return i<e.length&&u.push(e.substr(i)),{raw:e,parts:u}}function g(e,t){return t?"{"+r.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":r.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}Object.defineProperty(e,"__esModule",{value:!0}),e.interpolate=e.parse=e.chunkLabel=e.classifyLabelText=void 0,e.classifyLabelText=h,e.chunkLabel=t,e.parse=function(e){return t(e).map(n)},e.interpolate=function(e,t,r){return e.map(function(e){return function(e,t,r){for(var n=[],a="latex"===h(e.raw),u=0,i=e.parts;u<i.length;u++){var s=i[u];if("string"==typeof s)n.push(s);else{var l,o=p.Identifier(s.symbol).tryGetConcreteTree(f.defaultPolicy,t);if(o.valueType===c.Number){if("number"==typeof(l=o.asValue())){n.push(g(l,a));continue}}else if(o.valueType===c.ListOfNumber&&o.args[r]){if("number"==typeof(l=o.args[r].asValue())){n.push(g(l,a));continue}}a?n.push("{?}"):n.push("?")}}return n.join("")}(e,t,r)}).join("")}});\ndefine(\'core/math/getCLSymbolMap\',["require","exports","underscore","core/lib/label"],function(require,e,g,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCLSymbolMap=void 0,e.getCLSymbolMap=function(){var e={},t={},r={},a=[];for(var s in this.statements){if(this.statements.hasOwnProperty(s))switch((d=this.statements[s]).type){case"Error":break;case"Regression":r[s]=[],a.push(s);break;default:var i=d.getLegalExports(this.policy);if(i){for(var n=0,o=i;n<o.length;n++){var p=o[n];0<d.exportPenalty?t[p]=s:e[p]=s}r[s]=g.difference(d.getDependencies(),d.getDummyDependencies(),i)}}}for(var l=0,c=a;l<c.length;l++){var s=c[l],d=this.statements[s],u=y.latexToIdentifier(d.userData.residualVariable);u&&(t[u]=s);for(var f,h=d.getDependencies().slice(),v={},p=void 0;p=h.pop();){v[p]||(v[p]=!0,(f=e[p]||t[p])?(h.push.apply(h,r[f]),r[s].push(p)):t[p]=s)}}return{exportMap:e,weakExportMap:t,dependencyMap:r}}});\ndefine(\'core/types/line-width\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.THICK=e.DEFAULT=e.THIN=void 0,e.THIN=1,e.DEFAULT=2.5,e.THICK=5});\ndefine(\'core/types/point-opacity\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT=void 0,e.DEFAULT=.9});\ndefine(\'core/math/context\',["require","exports","parser","parsenodes","./finddependencyorder","./errormsg","./workerconfig","./findIntersections","core/vendor/d3-color","./policyFourFunction","./policyScientific","./policyGraphing","./frameFourFunction","./frameScientific","./frameSingleExpressionScientific","./frameGraphing","tslib","underscore","./plotter","core/types/graphmode","./interpolatedlabel","./expression-types","./getCLSymbolMap","./distribution-spec","./maybe-rational","core/lib/number-to-latex","core/lib/label","./functions","core/types/line-width","core/types/point-opacity","core/types/point-size","./evaluationstate","core/math/types","./cache-stats"],function(require,e,H,a,P,z,i,t,s,r,n,o,l,p,u,d,J,c,h,O,K,E,f,Q,m,W,j,v,y,g,_,T,q,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var b="undefined"!=typeof performance?function(){return performance.now()}:function(){return Date.now()},Z=a.Constant,D=a.Seed,R=a.FunctionCall,$=a.Image,ee=a.Simulation,te=a.Slider,ie=a.Table,ae=a.TableColumn,F=a.FreeVariable,S=t.findIntersections,N={fourFunction:r.PolicyFourFunction,scientific:n.PolicyScientific,singleExpressionScientific:n.PolicySingleExpressionScientific,singleExpressionFourFunction:r.PolicySingleExpressionFourFunction,graphing:o.PolicyGraphing,graphing_3d:o.PolicyGraphing3D},M={fourFunction:l,singleExpressionFourFunction:l,scientific:p,singleExpressionScientific:u,graphing:d,graphing_3d:d};function se(e,t){var i=H.parse(e,t);return i instanceof a.Expression?i:z.parseError()}function re(e,t){for(var i="id"+e,a=0,s=t||[];a<s.length;a++){var r=s[a];i+="::"+r[0]+r[1]}return i}var w=Z(m.maybeRational(0,1)),I=Z(m.maybeRational(1,1)),A=Z(NaN);function ne(e,t){return e?"0"===e?w:"1"===e?I:se(e,t):A}function oe(e,t){if(e)return se(e,t)}function C(e){return"ans"!==e.slice(0,3)}function L(e,t){var i=e.multiplyDefined,a=e.cyclicallyDefined;for(var s in i)i.hasOwnProperty(s)&&(t[s]=z.multiplyDefined(s));for(var s in a)a.hasOwnProperty(s)&&(t[s]=z.cycle(a[s].filter(C)))}function k(e,t,i){for(var a=0,s=i;a<s.length;a++){var r=s[a];e[r]||(e[r]=[]),e[r].push(t)}}function G(e,t,i){if(i.extraDepNodes)for(var a=0,s=i.extraDepNodes;a<s.length;a++){var r=s[a];r&&k(e,t,r.getDependencies())}if(i.clickableRules)for(var n=0,o=i.clickableRules;n<o.length;n++){var l=o[n];l.assignment&&k(e,t,l.assignment.getDependencies()),l.expression&&k(e,t,l.expression.getDependencies())}}var le={lineWidth:{parseNode:"lineWidth",valueOutputProp:"computedLineWidth",formulaOutputProp:"",validOutputProp:"line_width_valid",default:function(){return y.DEFAULT},transform:void 0,shouldEvaluate:void 0,seed:"lw"},lineOpacity:{parseNode:"lineOpacity",valueOutputProp:"computedLineOpacity",formulaOutputProp:"",validOutputProp:"line_opacity_valid",default:void 0,transform:void 0,shouldEvaluate:void 0,seed:"lo"},pointOpacity:{parseNode:"pointOpacity",valueOutputProp:"computedPointOpacity",formulaOutputProp:"",validOutputProp:"point_opacity_valid",default:function(e,t,i){return e&&t&&e.getGraphMode(i,t)===O.XYPOINT_MOVABLE?1:g.DEFAULT},transform:void 0,shouldEvaluate:void 0,seed:"po"},pointSize:{parseNode:"pointSize",valueOutputProp:"computedPointSize",formulaOutputProp:"",validOutputProp:"point_size_valid",default:function(){return _.DEFAULT},shouldEvaluate:void 0,transform:void 0,seed:"ps"},fillOpacity:{parseNode:"fillOpacity",valueOutputProp:"computedFillOpacity",formulaOutputProp:"",validOutputProp:"fill_opacity_valid",default:void 0,transform:void 0,shouldEvaluate:function(e){if(!e)return!1;var t=e.evaluationState,i=t.expression_type,a=t.is_inequality;return!(i!==E.ExpressionType.POLYGON&&i!==E.ExpressionType.PARAMETRIC&&!a)},seed:"fo"},labelSize:{parseNode:"labelSize",valueOutputProp:"computedLabelSize",formulaOutputProp:"",validOutputProp:"label_size_valid",transform:void 0,default:function(){return 1},shouldEvaluate:void 0,seed:"ls"},labelAngle:{parseNode:"labelAngle",valueOutputProp:"computedLabelAngle",formulaOutputProp:"label_angle_value",validOutputProp:"label_angle_valid",default:function(){return 0},transform:function(e){return"-\\\\trigAngleMultiplier*("+e+")"},shouldEvaluate:void 0,seed:"la"}};function V(e,t,i,a,s,r){var n,o=le[r];e&&(n=e.tryGetConcreteTree(a,s));var l=o.default&&o.default(e,n,a),p=function(e,t,i,a){var s={},r=!0,n=NaN,o=!1;if(i)for(var l=i.tryGetConcreteTree(e,t),p=l.asValue(),n=(o=Array.isArray(p))?p:+p,u=0,d=l.getDependencies();u<d.length;u++){s[d[u]]=!0}if(o)for(var c=0,h=n;c<h.length;c++){var f=h[c];if(!isFinite(+f)){r=!1,n=NaN;break}}else isFinite(+n)||(r=!1,n=NaN);return i||(r=!0,void 0!==a&&(n=a)),{value:n,valid:r,missingVarsMap:s}}(a,s,i[o.parseNode],l);i[o.valueOutputProp]=p.value,o.formulaOutputProp&&(t[o.formulaOutputProp]=p.value),t[o.validOutputProp]=p.valid,T.addSliderPrompts(t,a,p.missingVarsMap)}function B(e){return s.rgb(e[0],e[1],e[2]).formatHex()}function U(e,t,i,a,s){var r,n,o,l,p;e?(n=(r=e.tryGetConcreteTree(a,s)).asValue(),o=r.valueType,(p=!(!n||o!==q.RGBColor&&o!==q.ListOfColor))&&(l=r&&r.valueType===q.RGBColor?B(n):n.map(B),t.colorLatexValue=l,i.color_latex_value=l)):p=!0,i.color_latex_valid=p}var X=(Y.prototype.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=M[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,forceEnableGeometryFunctions:this.forceEnableGeometryFunctions,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:Z(this.use_degrees?Math.PI/180:m.maybeRational(1,1)),initialEvaluation:Z(this.initialEvaluation?1:0),globalRandomSeed:D(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},Y.prototype.processChangeSet=function(e){var t=b(),i={cacheHits:0,cacheMisses:0,cacheReads:0,cacheWrites:0};x.setCacheStatStore(i);var a={intersections:{},graphs:{}};e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});var s=!!e.isCompleteState&&!e.isUndoRedoState;s!==this.initialEvaluation&&(this.initialEvaluation=s,this.invalidate()),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("forceEnableGeometryFunctions")&&this.setForceEnableGeometryFunctions(e.forceEnableGeometryFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("replaceRoundWithReciprocal")&&this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),e.hasOwnProperty("pointsOfInterest")&&this.setWorkerConfigProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setWorkerConfigProperty("plotSingleVariableImplicitEquations",e.plotSingleVariableImplicitEquations),e.hasOwnProperty("plotImplicits")&&this.setWorkerConfigProperty("plotImplicits",e.plotImplicits),e.hasOwnProperty("plotInequalities")&&this.setWorkerConfigProperty("plotInequalities",e.plotInequalities),e.hasOwnProperty("sliders")&&this.setWorkerConfigProperty("sliders",e.sliders),e.hasOwnProperty("intersectId")&&(this.intersectId=e.intersectId);var r=b();this.processStatements(e,a);var n=b();i.processStatements=n-r,r=n,this.updateAnalysis(),n=b(),i.updateAnalysis=n-r,r=n,e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId,a),n=b(),i.updateIntersections=n-r,r=n;var o=this._publishAllStatuses(),n=b();return i.publishAllStatuses=n-r,r=n,this._computeAllLabels(),n=b(),i.computeAllLabels=n-r,r=n,this._graphAllChanged(a),n=b(),i.graphAllChanges=n-r,this.unpublishedIds={},i.timeInWorker=n-t,{syncId:e.syncId,isCompleteState:e.isCompleteState,intersectionChanges:a.intersections,statusChanges:o,graphChanges:a.graphs,timingData:i}},Y.prototype.processStatements=function(e,t){if(e.removes)for(var i in e.removes){var a=void 0;if(!e.isCompleteState&&this.statements.hasOwnProperty(i)&&(a=this.statements[i].getAllIds()),this.removeStatement(i,t),!e.isCompleteState&&a)for(var s=0,r=a;s<r.length;s++){var n=r[s];t.graphs[n]=void 0}}if(e.statements)for(var i in e.statements){var o=e.statements[i];null===o||this.addStatement(o,t)}},Y.prototype.setViewState=function(e){if(!c.isEqual(e,this.viewState))for(var t in this.viewState=e,this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)},Y.prototype.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},Y.prototype.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},Y.prototype.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=D(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},Y.prototype.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=N[e],this.invalidate()},Y.prototype.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},Y.prototype.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},Y.prototype.setForceEnableGeometryFunctions=function(e){this.forceEnableGeometryFunctions=e,this.invalidate()},Y.prototype.setDistributions=function(e){this.distributions=e,this.invalidate()},Y.prototype.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},Y.prototype.setReplaceRoundWithReciprocal=function(e){this.replaceRoundWithReciprocal=e,this.invalidate()},Y.prototype.setWorkerConfigProperty=function(e,t){t!==i[e]&&(i[e]=t,this.invalidate())},Y.prototype._publishAllStatuses=function(){var e,t={},i=this.currentStatus;for(var a in this.currentStatus={},this.unpublishedIds)this.analysis.hasOwnProperty(a)&&(e=this.analysis[a].evaluationState,JSON.stringify(e)!==JSON.stringify(i[a])&&(t[a]=e),this.currentStatus[a]=e);return t},Y.prototype._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var i=t.tryGetConcreteTree(this.policy,this.frame),a=1;i.valueType===q.ListOfPoint&&(a=i.args.length);for(var s=[],r=0;r<a;r++)s.push(K.interpolate(this.currentLabel[e],this.frame,r));c.isEqual(s,t.computedLabels)||(t.computedLabels=s,this.unpublishedIds[e]=!0)}}},Y.prototype._graphAllChanged=function(e){var t=this.getViewState(),i=!1;if(h.default.validateViewState(t)){for(var a in this.unpublishedIds)if(this.analysis.hasOwnProperty(a)){var s=this.analysis[a],r=s.evaluationState.expression_type,n=r===E.ExpressionType.SINGLE_POINT||r===E.ExpressionType.POINT_LIST;if(s.rawTree.isTable)for(var o=s.graph(t),l=0,p=s.rawTree.getAllIds();l<p.length;l++){var u=p[l];o[u]?this._notifyGraphComputed(u,o[u],e):this._notifyGraphRemoved(u,e)}else s.evaluationState.is_graphable&&(s.rawTree.userData.shouldGraph||s.rawTree.userData.showLabel&&n)?(this._notifyGraphComputed(a,s.graph(t),e),this.intersectId===a&&(i=!0)):this._notifyGraphRemoved(a,e)}c.keys(this.unpublishedIds).length&&void 0!==this.intersectId&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(i=!0)),i&&this._updateIntersections(this.intersectId,e)}},Y.prototype._notifyGraphRemoved=function(e,t){t.graphs[e]=void 0},Y.prototype._notifyGraphComputed=function(e,t,i){v.dehydrateGraphData(t),i.graphs[e]=t},Y.prototype._updateIntersections=function(e,t){var i;this.viewState&&(this.analysis[e]&&this.analysis[e].shouldIntersect()?(i=S(this.analysis,this.viewState,e),t.intersections[e]=i):t.intersections[e]=[])},Y.prototype.getDisabledFeatures=function(){var e=this.policy.disabledFeatures(),t=!1===this.functionDefinition?e.concat("FunctionDefinition"):e,i=this.additionalFunctions||[];return t=t.filter(function(e){return!("Exponent"===e&&-1!==i.indexOf("exponent")||"PercentOf"===e&&-1!==i.indexOf("percent"))})},Y.prototype.areFractionsDisallowed=function(){var e=this.evaluationMode;return!("fourFunction"!==e&&"singleExpressionFourFunction"!==e||this.additionalFunctions&&-1!==this.additionalFunctions.indexOf("fraction"))},Y.prototype.addStatement=function(e,t){var i=this;if(e){var a=e.id;this.markExportsDirty(a),this.markAsDirtyRoot(a);var s,r,n,o,l,p,u,d,c={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),disallowFrac:this.areFractionsDisallowed(),seedPrefix:re(a)},h={extraDepNodes:[]};switch(e.type){case"table":var f=[];this.statements.hasOwnProperty(a)&&(f=this.statements[a].getAllIds()),e.shouldGraph=!0;for(var m=e.columns,v=[],y=0,g=0,_=m;g<_.length;g++)var x=_[g],y=Math.max(x.values.length,y);for(var b=0;b<m.length;b++){for(var D,S,P,O,E,T=void 0,R=void 0,x=m[b],F=H.parse(x.latex,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",0],["tc",b]])})),T=[],N=-1,M=0;M<m[b].values.length;M++)x.values[M].replace(/\\\\space/g,"").match(/\\S/)?(T.push(H.parse(x.values[M],J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",M+1],["tc",b]])}))),N=M):T.push(Z(NaN));T=T.slice(0,N+1),(R=ae(F,y,T)).id=x.id,R.header&&(R.header.userData=x,R.header.metaData={extraDepNodes:[]},x.colorLatex&&(D=se(x.colorLatex,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",0],["tc",b],["cl",b]])})),R.header.metaData.colorLatex=D,R.header.metaData.extraDepNodes.push(D)),x.pointSize&&(S=se(x.pointSize,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",0],["tc",b],["ps",b]])})),R.header.metaData.pointSize=S,R.header.metaData.extraDepNodes.push(S)),x.pointOpacity&&(P=se(x.pointOpacity,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",0],["tc",b],["po",b]])})),R.header.metaData.pointOpacity=P,R.header.metaData.extraDepNodes.push(P)),x.lineWidth&&(O=se(x.lineWidth,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",0],["tc",b],["lw",b]])})),R.header.metaData.lineWidth=O,R.header.metaData.extraDepNodes.push(O)),x.lineOpacity&&(E=se(x.lineOpacity,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["tr",0],["tc",b],["lo",b]])})),R.header.metaData.lineOpacity=E,R.header.metaData.extraDepNodes.push(E))),v.push(R)}this.statements[a]=ie(v);var w=this.statements[a].getAllIds();f.forEach(function(e){-1===w.indexOf(e)&&i._notifyGraphRemoved(e,t)});break;case"image":var I="-\\\\trigAngleMultiplier*("+e.angle+")",A=se(e.center,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["ic",a]])})),C=se(I,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["ia",a]])})),L=se(e.width,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["iw",a]])})),k=se(e.height,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["ih",a]])})),G=se(e.opacity,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["io",a]])}));this.statements[a]=$({center:A,radianAngle:C,width:L,height:k,opacity:G});break;case"simulation":var V=se(e.fps||"60",J.__assign(J.__assign({},c),{seedPrefix:re(a,[["fps",a]])}));this.statements[a]=ee(V);break;default:for(var z in this.statements[a]=H.parse(e.latex,c),le){var W,j,q,B=z;e[B]&&(W=le[B],j=e[B],W.transform&&(j=W.transform(j)),q=ne(j,J.__assign(J.__assign({},c),{seedPrefix:re(a,[[W.seed,a]])})),h[B]=q,h.extraDepNodes.push(q))}e.colorLatex&&(q=oe(e.colorLatex,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["ac",a]])})),h.colorLatex=q,h.extraDepNodes.push(q)),e.polarDomain&&e.polarDomain.min&&(h.polarDomainMin=ne(e.polarDomain.min,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lm",a]])})),h.extraDepNodes.push(h.polarDomainMin)),e.polarDomain&&e.polarDomain.max&&(h.polarDomainMax=ne(e.polarDomain.max,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lM",a]])})),h.extraDepNodes.push(h.polarDomainMax)),e.parametricDomain&&e.parametricDomain.min&&(h.parametricDomainMin=ne(e.parametricDomain.min,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lm",a]])})),h.extraDepNodes.push(h.parametricDomainMin)),e.parametricDomain&&e.parametricDomain.max&&(h.parametricDomainMax=ne(e.parametricDomain.max,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lM",a]])})),h.extraDepNodes.push(h.parametricDomainMax)),e.vizProps&&(e.vizProps.axisOffset&&(h.vizAxisOffset=ne(e.vizProps.axisOffset,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["vo",a]])})),h.extraDepNodes.push(h.vizAxisOffset)),e.vizProps.breadth&&(h.vizBreadth=ne(e.vizProps.breadth,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["vb",a]])})),h.extraDepNodes.push(h.vizBreadth))),e.cdf&&e.cdf.show&&(s=Q.parseToplevelFunction(e.latex))&&"distribution"===s.type&&(h.distributionSpec=s,h.cdfMin=oe(e.cdf.min,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lm",a]])})),h.extraDepNodes.push(h.cdfMin),h.cdfMax=oe(e.cdf.max,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lM",a]])})),h.extraDepNodes.push(h.cdfMax)),this.statements[a].shouldPromoteToSlider(this.policy)&&(n=!(!(r=e.slider)||!r.isPlayingOnce),o=oe(r&&r.softMin,c),l=oe(r&&r.softMax,c),p=oe(r&&r.min,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lm",a]])})),u=oe(r&&r.max,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["lM",a]])})),d=oe(r&&r.step,J.__assign(J.__assign({},c),{seedPrefix:re(a,[["ls",a]])})),this.statements[a]=te(this.statements[a],{sliderMin:p,sliderMax:u,sliderStep:d,sliderIsPlayingOnce:n,sliderSoftMin:o,sliderSoftMax:l}))}var U=e.clickableInfo;U&&U.enabled&&(h.clickableRules=(U.rules||[]).map(function(e){return{ruleId:e.id,assignment:oe(e.assignment,c),expression:oe(e.expression,c)}})),this.statements[a].userData=e,this.statements[a].metaData=h;var X,Y=e.label;Y?(X=this.currentLabel[a])&&X.raw===Y||(this.currentLabel[a]=K.parse(Y)):delete this.currentLabel[a]}},Y.prototype.removeStatement=function(e,t){var i,a=this.statements[e];a&&(this.markExportsDirty(e),a.isTable?(i=this,a.getAllIds().forEach(function(e){i._notifyGraphRemoved(e,t)})):this._notifyGraphRemoved(e,t),delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e],delete this.currentStatus[e])},Y.prototype.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=0,i=this.statements[e].getLegalExports(this.policy);t<i.length;t++){var a=i[t];this.dirtyExportedSymbolRoots[a]=!0}}},Y.prototype.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},Y.prototype.getFrame=function(){return this.updateAnalysis(),this.frame},Y.prototype.getAnalysis=function(){return this.updateAnalysis(),this.analysis},Y.prototype.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},Y.prototype._updateRegressions=function(e){var t=this.frame,i=this.lastFrame,a=this.regressionFrame,s=[];for(var r in e)e.hasOwnProperty(r)&&e[r].isRegression&&s.push(r);var n=this;s.sort(function(e,t){var i=n.statements[e].userData&&n.statements[e].userData.residualVariable,a=n.statements[t].userData&&n.statements[t].userData.residualVariable;return i&&!a?-1:a&&!i?1:0});var o=P(this.policy,e,s);L(o,a);for(var l={},p=0,u=o.resolved;p<u.length;p++){var d,r=u[p];this.statements[r].isRegression?(this.analysis[r]=e[r].analyze(this.policy,a,t,i,l),this.analysis[r].exportTo(this.policy,t),delete e[r]):(d=e[r].tryGetConcreteTree(this.policy,a),e[r].exportTo(this.policy,d,a),l[r]={rawTree:e[r],concreteTree:d})}},Y.prototype.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var i=this.statements[t],a=i.metaData;if(k(e,t,i.getDependencies()),k(e,t,i.getLegalExports(this.policy)),i.isRegression&&i.userData&&i.userData.residualVariable&&k(e,t,[j.latexToIdentifier(i.userData.residualVariable)]),G(e,t,a),i.isTable&&i.columns)for(var s=0;s<i.columns.length;s++){var r=i.columns[s];r.header&&r.header.metaData&&G(e,t,r.header.metaData)}}return e},Y.prototype.getDirtyIdsAndSymbols=function(e){var t={},i={},a=this.markedRegressionDirty,s=[],r=[];for(var n in this.dirtyStatementRoots)this.dirtyStatementRoots[n]&&(i[n]=!0,s.push(n));for(var o in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[o]&&(t[o]=!0,r.push(o));for(;s.length||r.length;){for(;s.length;){var n=s.pop(),l=this.statements[n];if(l){l.isRegression&&(a=!0);for(var p=0,u=l.getLegalExports(this.policy);p<u.length;p++)t[o=u[p]]||(t[o]=!0,r.push(o))}}for(;r.length;){var d=e[o=r.pop()];if(d)for(var c=0,h=d;c<h.length;c++)i[n=h[c]]||(i[n]=!0,s.push(n))}}return{ids:i,symbols:t,hasDirtyRegression:a}},Y.prototype.updateAnalysis=function(){var e=this.buildSymbolToExpressionDirtyMap(),t=this.getDirtyIdsAndSymbols(e),i={};if(t.hasDirtyRegression){for(var a in this.statements)this.statements[a]&&(i[a]=this.statements[a]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var s=t.ids;for(var a in s)this.statements[a]&&(i[a]=this.statements[a]);var r=t.symbols;for(var n in r)r[n]&&(delete this.frame[n],delete this.regressionFrame[n])}for(var a in i)i[a]&&(this.unpublishedIds[a]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var o=this.analysis,l=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var p=P(this.policy,i);L(p,l);for(var u,d,c,h=p.resolved,f=0,m=h;f<m.length;f++)switch(a=m[f],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":o[a]=this.statements[a].analyzeFourFunction(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"scientific":o[a]=this.statements[a].analyzeScientific(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"singleExpressionScientific":o[a]=this.statements[a].analyzeSingleExpressionScientific(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"graphing":case"graphing_3d":if(l.r){var v=Object.create(l);if(v.r=F("r"),o[a]=this.statements[a].analyze(this.policy,v,o),o[a].getGraphMode()===O.POLAR){o[a].exportTo(this.policy,l);continue}}o[a]=this.statements[a].analyze(this.policy,l,o),o[a].exportTo(this.policy,l)}if("graphing"===this.evaluationMode||"graphing_3d"===this.evaluationMode)for(var y=0,g=h;y<g.length;y++){var a=g[y],_=o[a],x=_.evaluationState.expression_type;for(var b in le){var D=b,S=le[D];S.shouldEvaluate&&!S.shouldEvaluate(_)||function(e,t,i,a){var s,r;if(e.rawTree.isTable&&e.evaluationState.column_data&&e.rawTree.columns)for(var n=0;n<e.evaluationState.column_data.length;n++)s=e.evaluationState.column_data[n],V((r=e.rawTree.columns[n].header.metaData)[a],s,r,t,i,a);else s=e.evaluationState,V((r=e.rawTree.metaData)[a],s,r,t,i,a)}(_,this.policy,l,D)}!function(e,t,i){var a,s;if(e.rawTree.isTable&&e.evaluationState.column_data&&e.rawTree.columns)for(var r=0;r<e.evaluationState.column_data.length;r++)a=e.evaluationState.column_data[r],U((s=e.rawTree.columns[r].header.metaData).colorLatex,s,a,t,i);else a=e.evaluationState,U((s=e.rawTree.metaData).colorLatex,s,a,t,i)}(_,this.policy,l),function(e){var t=e.evaluationState.expression_type,i=e.rawTree.userData;if(i.clickableInfo&&i.clickableInfo.enabled){if(e.rawTree.isImage)return 1;if(e.rawTree.isSimulation)return 1;if(e.getGraphMode()!==O.XYPOINT_MOVABLE)return E.isClickableExpressionType(t)}}(_)&&function(e,C,L){var k=e.evaluationState,t=e.rawTree,G={},V={};k.clickableinfo_data={},t.metaData.clickableRules.forEach(function(e){var t,i,a,s,r,n,o,l,p=e.assignment,u=e.expression,d={};if(k.clickableinfo_data[e.ruleId]=d,p){"Identifier"===p.type?"Slider"===(o=(n=L[(r=p)._symbol])&&n.type)||"Assignment"===o?(t=r._symbol,(l=V[t])?(a=z.clickableObjectAlreadyAssigned(t).getError(),!0!==l&&(delete l.identifier,delete l.latex,l.error=z.clickableObjectAlreadyAssigned(t).getError(),V[t]=!0)):V[t]=d):a=z.clickableObjectAssignmentNotDefined(r._symbol).getError():a=z.clickableObjectAssignmentNotIdentifier().getError();for(var c=0,h=p.tryGetConcreteTree(C,L).getDependencies();c<h.length;c++){var f=h[c];G[f]=!0}}if(u){var m=u.tryGetConcreteTree(C,L);if(m.valueType===q.Number){var v=+m.asValue();isNaN(v)||(i=W.default(v))}else if(m.valueType===q.ListOfNumber){for(var y=[],g=!0,_=0,x=m.args;_<x.length;_++){if((N=x[_]).valueType!==q.Number){g=!1;break}var b=+N.asValue();y.push(W.default(b)),isNaN(b)&&(g=!1)}g&&(i="\\\\left["+y.join(",")+"\\\\right]")}else if(m.valueType===q.Point){for(var D=[],S=!0,P=0,O=m.args;P<O.length;P++){if((N=O[P]).valueType!==q.Number){S=!1;break}if(b=+N.asValue(),isNaN(b)){S=!1;break}D.push(W.default(b))}S&&(i="\\\\left("+D.join(",")+"\\\\right)")}else if(m.valueType===q.ListOfPoint){for(var g=!0,E=[],T=0,R=m.args;T<R.length;T++){var F=R[T];if(F.valueType!==q.Point){g=!1;break}for(var N,D=[],S=!0,M=0,w=F.args;M<w.length;M++){if((N=w[M]).valueType!==q.Number){S=!1;break}if(b=+N.asValue(),isNaN(b)){S=!1;break}D.push(W.default(b))}if(!S){g=!1;break}E.push("\\\\left("+D.join(",")+"\\\\right)")}g&&(i="\\\\left["+E.join(",")+"\\\\right]")}else m.valueType===q.EmptyList&&(i="\\\\left[\\\\right]");i||(s=z.clickableObjectInvalidExpression().getError());for(var I=0,A=m.getDependencies();I<A.length;I++)f=A[I],G[f]=!0}a?d.error=a:s?d.error=s:t&&i&&(d.identifier=t,d.latex=j.identifierToLatex(t)+"="+i)}),T.addSliderPrompts(k,C,G)}(_,this.policy,l),x===E.ExpressionType.PARAMETRIC||x===E.ExpressionType.POLAR?function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=a.expression_type===E.ExpressionType.POLAR?s.metaData.polarDomainMin:s.metaData.parametricDomainMin,n=a.expression_type===E.ExpressionType.POLAR?s.metaData.polarDomainMax:s.metaData.parametricDomainMax,o={},l=NaN,p=NaN,u=!1;if(r){u=!0;var d=r.tryGetConcreteTree(t,i);d.isConstant&&(l=+d.asValue());for(var c=0,h=d.getDependencies();c<h.length;c++)o[h[c]]=!0}else l=0;if(n){u=!0;var f=n.tryGetConcreteTree(t,i);f.isConstant&&(p=+f.asValue());for(var m=0,v=f.getDependencies();m<v.length;m++)o[v[m]]=!0}else a.expression_type===E.ExpressionType.PARAMETRIC?p=1:a.expression_type===E.ExpressionType.POLAR&&(p=12*Math.PI/i.trigAngleMultiplier.asValue());var y=!0,g=!0;isFinite(l)||(y=!1,l=NaN),isFinite(p)||(g=!1,p=NaN),y?g?p<l&&(g=y=!1,a.error=z.domainMaxLessThanMin().getError()):a.error=z.domainMaxInvalid().getError():a.error=z.domainMinInvalid().getError(),s.metaData.evaluatedDomainMin=l,s.metaData.evaluatedDomainMax=p,a.expression_type===E.ExpressionType.POLAR&&(s.metaData.isExplicitDomain=u),a.domain_min_number=l,a.domain_max_number=p,a.domain_min_valid=y,a.domain_max_valid=g,a.expression_type===E.ExpressionType.PARAMETRIC&&(delete o.t,T.addSliderPrompts(a,t,o))}(_,this.policy,l):x===E.ExpressionType.BOXPLOT?function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=s.metaData.vizAxisOffset,n=s.metaData.vizBreadth,o={},l=NaN,p=NaN;if(r){var u=r.tryGetConcreteTree(t,i);u.isConstant&&(l=+u.asValue());for(var d=0,c=u.getDependencies();d<c.length;d++)o[c[d]]=!0}else l=1;if(n){var h=n.tryGetConcreteTree(t,i);h.isConstant&&(p=+h.asValue());for(var f=0,m=h.getDependencies();f<m.length;f++)o[m[f]]=!0}else p=1;var v=!0,y=!0;isFinite(l)||(v=!1,l=NaN),isFinite(p)||(y=!1,p=NaN),v?y||(a.error=z.boxplotBreadthInvalid().getError()):a.error=z.boxplotOffsetInvalid().getError(),s.metaData.evaluatedAxisOffset=l,s.metaData.evaluatedBreadth=p,a.viz_values={axisOffset:l,breadth:p},a.viz_valids={axisOffset:v,breadth:y},T.addSliderPrompts(a,t,o)}(_,this.policy,l):(c=d=void 0,d=(u=_).rawTree.userData,c=u.rawTree.metaData,d.cdf&&d.cdf.show&&c.distributionSpec&&function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=s.metaData.cdfMin,n=s.metaData.cdfMax,o={},l=NaN,p=NaN,u="Assignment"===s.type?s._expression:s,d=u&&u.metaData&&u.metaData.distributionSpec;if(r){var c=r.tryGetConcreteTree(t,i);c.isConstant&&(l=+c.asValue());for(var h=0,f=c.getDependencies();h<f.length;h++)o[f[h]]=!0}else l=-1/0;if(n){var m=n.tryGetConcreteTree(t,i);m.isConstant&&(p=+m.asValue());for(var v=0,y=m.getDependencies();v<y.length;v++)o[y[v]]=!0}else p=1/0;var g,_=!0,x=!0;isNaN(l)&&(_=!1,l=NaN),isNaN(p)&&(x=!1,p=NaN),_?x?p<l&&(x=_=!1,a.error=z.cdfMaxLessThanMin().getError()):a.error=z.cdfMaxInvalid().getError():a.error=z.cdfMinInvalid().getError(),_&&x&&(g=R("cdf",[u,Z(l),Z(p)]),a.cdf_evaluation=+g.tryGetConcreteTree(t,i).asValue());var b,D=-1/0,S=1/0;d&&(d.discrete&&(D=0),"binomialdist"===d.symbol&&u.args&&u.args[0]&&(b=+u.args[0].asValue(),isFinite(b)&&(S=b))),s.metaData.evaluatedCDFMin=l,s.metaData.evaluatedCDFMax=p,a.cdf_min_valid=_,a.cdf_max_valid=x,a.cdf_min_default=D,a.cdf_max_default=S,a.is_single_identifier=!1,T.addSliderPrompts(a,t,o)}(_,this.policy,l))}for(var n in(e.globalRandomSeed||[]).forEach(function(e){o[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame),l)l.hasOwnProperty(n)&&(this.lastFrame[n]=l[n])},Y);function Y(){this.getCLSymbolMap=f.getCLSymbolMap,this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.use_degrees=!1,this.initialEvaluation=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setForceEnableGeometryFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.setDistributions(!0),this.invalidate()}e.Context=X});\ndefine(\'worker/workercore\',[\'require\',\'core/math/context\'],function(require){"use strict";var e=require("core/math/context").Context;return function(t){var r=new e;return{processChangeSet:function(e){var n=r.processChangeSet(e);t("processChangeSet",n)}}}});\ndefine(\'console\',[\'require\'],function(require){function n(){}var e={};return["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"].forEach(function(o){"undefined"!=typeof window&&window.console&&window.console[o]?e[o]=function(){Function.prototype.apply.call(window.console[o],window.console,arguments)}:e[o]=n}),e});\ndefine(\'worker/worker\',[\'require\',\'worker/workercore\',\'console\'],function(require){"use strict";var s=require("worker/workercore"),n={};require("console").log=function(e){self.postMessage({log:JSON.stringify(e)})};var t=self;(t.window=t).onmessage=function(e){var a,o=e.data&&e.data.connectionId;o&&("destroy"===e.data.originalMessage.type?delete n[o]:((a=n[o])||(a=s(function(e,a){t.postMessage({connectionId:o,originalMessage:{type:e,payload:a}})}),n[o]=a),a.processChangeSet(e.data.originalMessage)))},t.loadMessageQueue&&(t.loadMessageQueue.forEach(function(e){t.onmessage(e)}),delete t.loadMessageQueue)});\n!function(){"use strict";"undefined"==typeof window&&("undefined"==typeof requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"]))}();\ndefine("toplevel/worker", function(){});\n\n'})),i("worker_src",["require","text!worker_src_underlying"],(function(e){"use strict";return e("text!worker_src_underlying")})),i("worker/create_worker_url",["require","worker_src"],(function(e){"use strict";var t=e("worker_src");return function(){if(!t.length)return"/assets/generated/combined/toplevel/worker.js";var e;try{e=new Blob([t],{type:"application/javascript"})}catch(n){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);r.append(t),e=r.getBlob("application/javascript")}catch(e){return null}}return(window.URL||window.webkitURL).createObjectURL(e)}})),i("worker/fakeworker",["require","worker/workercore"],(function(e){"use strict";var t=e("worker/workercore");return function(e){var r={},n=t((function(t,r){e({type:t,payload:r})}));return r.postMessage=function(e){setTimeout((function(){n.processChangeSet(e)}),0)},r}})),i("worker/workerpool",["require","console","./create_worker_url","pjs","underscore_model","./fakeworker","underscore","lib/urlparser"],(function(e){"use strict";var t=e("console"),r=e("./create_worker_url"),n=e("pjs"),i=e("underscore_model").UnderscoreModel,o=e("./fakeworker"),a=e("underscore"),s=e("lib/urlparser"),l="";try{void 0===(l=s.getParameter(window.location.search,"workerThrottle"))&&(l=s.getParameter(window.top.location.search,"workerThrottle"))}catch(n){}var c=parseInt(l,10),u=0;function d(e){return c?function(t){u=Math.max(Date.now(),u)+c,setTimeout(e,u-Date.now(),t)}:e}return n(i,(function(e,n){e.init=function(e){n.init.call(this),this.workers=[],this.maxWorkers=e,this.workerURL=r()},e.allowedToSpawnWorker=function(){return this.workerURL&&this.workers.length<this.maxWorkers},e.killWorker=function(e){-1!==a.indexOf(this.workers,e)&&(e.terminate(),this.workers=a.without(this.workers,e),a.shuffle(a.values(e.__connections)).forEach((function(e){e&&e.onWorkerKilled&&e.onWorkerKilled()})))},e.spawnWorker=function(){try{var e=new Worker(this.workerURL);return e.__connections={},e.__isFake=!1,e.onerror=function(e){t.log(e)},e.addEventListener("message",d((function(t){var r,n=t.data;n&&n.log||n&&n.connectionId&&(r=e.__connections[n.connectionId])&&r.onResponse(n.originalMessage)}))),this.workers.push(e),e}catch(e){return null}},e.spawnFakeWorker=function(){var e=o(d((function(t){var r=a.values(e.__connections)[0];r&&r.onResponse(t)})));return e.__isFake=!0,e.__connections={},e},e.findLeastUsedWorker=function(){return a.sortBy(this.workers,(function(e){return a.size(e.__connections)}))[0]},e.allocateWorker=function(){var e=null;return this.allowedToSpawnWorker()&&(e=this.spawnWorker()),(e=e||this.findLeastUsedWorker())||this.spawnFakeWorker()}}))})),i("main/evaluator",["require","exports","worker/workerpoolconnection","worker/workerpool","core/lib/deepCopy","core/math/functions","underscore"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Evaluator=void 0;var s=(l.prototype.createWorkerPoolConnection=function(){var e=this;this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=r(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=function(t){e.shouldIgnoreWorkerMessage(t)?"processChangeSet"===t.type&&(e.markJobFinished(),e._processChangeSet()):e.listeners[t.type].call(e,t.payload)},this.workerPoolConnection.onWorkerKilled=function(){var t=e.hasJobInWorker();e.createWorkerPoolConnection(),t?(e.changeSet=i.default(e.cumulativeChangeSet),e.__state.changed=!0,e.__state.droppedMessage=!0):(e.changeSet=i.default(e.cumulativeChangeSet),e.__state.changed=!1),e.processChangeSet()}},l.prototype.destroy=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())},l.prototype.shouldIgnoreWorkerMessage=function(e){return!(!this.__suspendUntilSyncId||e&&e.payload&&e.payload.syncId>=this.__suspendUntilSyncId)},l.prototype.suspend=function(){var e=this;this.changeSet&&this.changeSet.syncId||(this.syncId++,this.applyToChangeSets((function(t){t.syncId=e.syncId}))),this.__suspendUntilSyncId=this.changeSet.syncId},l.prototype.markJobFinished=function(){this.__state.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0},l.prototype.startJobTimer=function(){this.__jobStartTime=(new Date).getTime()},l.prototype.hasJobInWorker=function(){return-1!==this.__jobStartTime},l.prototype.getJobElapsedTime=function(){return this.hasJobInWorker()?(new Date).getTime()-this.__jobStartTime:NaN},l.prototype.tick=function(){this._processChangeSet()},l.prototype.processChangeSet=function(){this.__processChangeSetRequested=!0},l.prototype._processChangeSet=function(){var e,t;this._syncEvaluatorConfig(),this.__processChangeSetRequested&&(e=4e3<=this.getJobElapsedTime(),this.__state.droppedMessage&&e?this.workerPoolConnection.killWorker():this.__state.changed&&this.changeSet&&(this.changeSet.syncId||(this.syncId++,this.changeSet.syncId=this.syncId),this.hasJobInWorker()?this.changeSet.isCompleteState&&e&&this.workerPoolConnection.killWorker():(t=this.changeSet,this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(t),this.__processChangeSetRequested=!1)))},l.prototype.notifyWhenSynced=function(e){var t=this;this._syncEvaluatorConfig(),this.hasJobInWorker()||this.changeSet?(this.syncId++,this.syncRequests.push({id:this.syncId,callback:e}),this.applyToChangeSets((function(e){e.syncId=t.syncId}))):setTimeout(e,0)},l.prototype.applyToChangeSets=function(e){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),e(this.changeSet),e(this.cumulativeChangeSet),this.processChangeSet()},l.prototype.clearStatementsAndStartCompleteState=function(){this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets((function(e){e.isCompleteState=!0,delete e.statements}))},l.prototype.markUndoRedoState=function(){this.applyToChangeSets((function(e){e.isUndoRedoState=!0}))},l.prototype.addStatement=function(e){this.applyToChangeSets((function(t){t.statements||(t.statements={}),t.statements[e.id]=i.default(e)}))},l.prototype.removeStatement=function(e){this.applyToChangeSets((function(t){t.statements||(t.statements={}),t.removes||(t.removes={}),delete t.statements[e],t.removes[e]=!0}))},l.prototype._syncEvaluatorConfig=function(){if(this.readEvaluatorConfig){var e=this.readEvaluatorConfig();for(var t in e)this._applyIfChanged(e,t)}},l.prototype._applyIfChanged=function(e,t){var r=this.cumulativeChangeSet&&this.cumulativeChangeSet[t],n=e[t];a.isEqual(r,n)||this.applyToChangeSets((function(e){e[t]=n}))},l);function l(e){this.listeners={processChangeSet:function(e){var t={},r={};for(var n in e.graphChanges){var i=e.graphChanges[n];void 0===i?r[n]=!0:(o.rehydrateGraphData(i),t[n]=i)}var a={};for(var n in e.intersectionChanges)r[n]||(a[n]=e.intersectionChanges[n]);this.onEvaluatorResults({evaluationStates:e.statusChanges,graphData:{addedGraphs:t,removedGraphs:r,intersections:a},renderSlowly:!!e.isCompleteState,timingData:e.timingData});for(var s=e.syncId;this.syncRequests.length&&void 0!==s&&this.syncRequests[0].id<=s;)this.syncRequests.shift().callback();this.markJobFinished(),this._processChangeSet()}},this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.syncId=1,this.syncRequests=[],e=e||n(),this.workerPool=e,this.createWorkerPoolConnection()}t.Evaluator=s})),i("graphing/canvaslayer",["require","jquery","pjs","browser"],(function(e){"use strict";var t=e("jquery"),r=e("pjs"),n=e("browser");return r((function(e){e.init=function(e){this.grapher=e,this.$=t("<div class='dcg-graph-outer' role='img'></div>").attr("aria-roledescription",this.s("graphing-calculator-narration-graphpaper-label")),this.canvas_node=t("<canvas class='dcg-graph-inner'></canvas>").css("position","relative").css("display","block"),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(0,0),n.IS_IOS&&n.IS_IN_IFRAME&&(this.$.css("-webkit-transform","translate3d(0,-.25px,0)"),this.$.append('<div style="width:1px; height:.5px; pointer-events:none; opacity: 0;" aria-hidden="true">text</div>')),this.$.append(this.canvas_node)},e.resize=function(e,t,r){r=r||this.devicePixelRatio,e===this.width&&t===this.height||(this.width=e,this.height=t,this.canvas_node.css("width",e+"px").css("height",t+"px").attr("width",e*r).attr("height",t*r),this.ctx=this.canvas_node[0].getContext("2d"),this.ctx.scale(r,r))},e.s=function(e,t){return this.grapher.controller.s(e,t)},e.getAriaLabel=function(e){var t="";if(0===e)return this.s("graphing-calculator-narration-empty-graphpaper");t=1===e?this.s("graphing-calculator-narration-graphpaper-one-graph"):this.s("graphing-calculator-narration-graphpaper-multiple-graphs",{count:e});var r=this.grapher.getAudioTrace();return r&&!r.getAudioTraceActive()&&void 0!==r.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})&&(n.IS_APPLE?t+=" "+this.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-mac"):t+=" "+this.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-windows")),t},e.updateAria=function(e,t){this.$.attr("aria-hidden",!e||!this.grapher.settings.config.graphpaper).attr("tabindex",e&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex&&0<t?0:-1).attr("aria-label",this.getAriaLabel(t))},e.redraw=function(){}}))})),i("loadcss!poi",(function(){})),i("graphing/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LINE_WIDTH=t.OFFSCREEN_RENDER_MARGIN=t.POI_ALPHA=t.POLAR_ALPHA=t.HIGHLIGHTED_POINT_ALPHA=t.POINT_ALPHA=t.FILL_ALPHA=t.MAX_DOTTED_SEGMENTS=t.ZOOM_FACTOR=t.DOUBLETAP_ZOOM=t.ANIMATE_ZOOM_DURATION=void 0,t.ANIMATE_ZOOM_DURATION=500,t.DOUBLETAP_ZOOM=2,t.ZOOM_FACTOR=1.0625,t.MAX_DOTTED_SEGMENTS=1e3,t.FILL_ALPHA=.4,t.POINT_ALPHA=.9,t.HIGHLIGHTED_POINT_ALPHA=.6,t.POLAR_ALPHA=.2,t.POI_ALPHA=.01,t.OFFSCREEN_RENDER_MARGIN=20,t.LINE_WIDTH=2.5})),i("graphing/dasheddrawer",["require","./constants","core/math/distance"],(function(e){"use strict";var t=e("./constants"),r=e("core/math/distance");function n(e,r,n){return this.pattern=n,this.replen=this.pattern[0]+this.pattern[1],r/this.replen>t.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=r*this.pattern[0]/this.replen/t.MAX_DOTTED_SEGMENTS,this.pattern[1]=r*this.pattern[1]/this.replen/t.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e,this}return n.getDashedPattern=function(e,t){var r=11*e.lineWidth/(t?3.5:2.5);return[r,7*r/11]},n.getDottedPattern=function(e,t,r){var n=.5*e.lineWidth*.1/(r?3.5:2.5),i=8*n/.1;return t&&(i*=2),[n,i]},n.getTotalSegmentLength=function(e){if(e.length<4)return 0;for(var t,n,i=0,o=0,a=e[0],s=e[1];isNaN(a)||isNaN(s);){if((o+=2)>=e.length)return 0;a=e[o],s=e[o+1]}for(o+=2;o<e.length;o+=2)t=e[o],n=e[o+1],isNaN(t)||isNaN(n)||(i+=r.hypot(t-a,n-s),a=t,s=n);return i},n.prototype.start=function(e,t){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=e,this.py=t},n.prototype.next=function(e,t){var r=this.pattern[this.pstate],n=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(t-this.py,2));if(1e-5<n){for(;n+this.dstaccum>=r;){var i=e-this.px,o=t-this.py,a=r-this.dstaccum;i*=a/n,o*=a/n,0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+i,this.py+o)),this.dstaccum=0,this.px+=i,this.py+=o,this.pstate=1-this.pstate,r=this.pattern[this.pstate],n-=a}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,t))}this.px=e,this.py=t,this.dstaccum+=n},n.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},n.prototype.drawSegment=function(e){for(var t,r,n=0,i=e[0],o=e[1];isNaN(i)||isNaN(o);){if((n+=2)>=e.length)return;i=e[n],o=e[n+1]}for(this.start(i,o),n+=2;n<e.length;n+=2)t=e[n],r=e[n+1],isNaN(t)||isNaN(r)||this.next(t,r);this.close()},n})),i("graphing/svg-classes",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restore=t.save=void 0,t.save=function(e,t){e._dcgSaveClassName&&e._dcgSaveClassName(t)},t.restore=function(e){e._dcgRestoreClassName&&e._dcgRestoreClassName()}})),i("graphing/draw-image-to-ctx",["require","exports","graphing-calc/models/list","./svg-classes"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawImageToCtx=void 0,t.drawImageToCtx=function(e,t,i){var o=e.formula;if(o&&o.dimensions.x)for(var a=o.dimensions,s=0;s<a.x.length;s++){var l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E=a.x[s],_=a.y[s],k=a.width[s],M=a.height[s],I=a.radianAngle[s];isFinite(E)&&isFinite(_)&&isFinite(k)&&isFinite(M)&&isFinite(I)&&(n.save(t,"dcg-svg-image"),t.save(),n.restore(t),t.globalAlpha=a.opacity[s],l=i.mapy(M)-i.mapy(0),c=i.mapx(k)-i.mapx(0),u=0===I?1:Math.abs(c/k*(M/l)),f=((d=i.mapx(E))-c/2)*(g=k<0?-1:1),m=((p=i.mapy(_))+l*u/2)*(h=M<0?-1:1),y=Math.abs(c),v=Math.abs(l),0!==I&&(t.translate(d,p),t.scale(1,1/u),t.rotate(I),t.translate(-d,-p)),t.scale(g,h),x=b=!1,(w=e.controller.getGrapher())&&"2d"===w.type&&(b=w.clickableObjectsLayer.shouldDrawHovered(e.id),x=w.clickableObjectsLayer.shouldDrawPressed(e.id)),S=e.imageObj,x?e.depressedImageObj?S=e.depressedImageObj:m+=1:b&&(e.hoveredImageObj?S=e.hoveredImageObj:t.globalAlpha*=.8),t.drawImage(S,f,m,y,v*u),r.isItemSelected(e)&&(t.beginPath(),t.rect(f,m,y,v*u),t.restore(),t.save(),t.strokeStyle="#6993C7",t.lineWidth=2,t.stroke()),t.restore())}}})),i("graphing/svg-groups",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restore=t.setTitle=t.save=void 0,t.save=function(e,t){e._dcgStartNamedGroup&&e._dcgStartNamedGroup(t)},t.setTitle=function(e,t){e._dcgSetTitle&&e._dcgSetTitle(t)},t.restore=function(e){e._dcgEndNamedGroup&&e._dcgEndNamedGroup()}})),i("graphing/graphslayer",["require","pjs","./clipping","./dasheddrawer","./constants","./viewport","core/types/graphmode","underscore","expressions/colors","core/types/styles","core/types/styles","core/types/line-opacity","core/types/point-opacity","core/types/point-size","./draw-image-to-ctx","./svg-groups","./svg-classes"],(function(e){"use strict";var t=e("pjs"),r=e("./clipping"),n=e("./dasheddrawer"),i=e("./constants"),o=e("./viewport").Viewport,a=e("core/types/graphmode"),s=e("underscore"),l=e("expressions/colors"),c=e("core/types/styles").PointStyle,u=e("core/types/styles").LineStyle,d=e("core/types/line-opacity"),p=e("core/types/point-opacity"),h=e("core/types/point-size"),g=e("./draw-image-to-ctx").drawImageToCtx,f=e("./svg-groups"),m=e("./svg-classes"),y={};function v(e,t){var r=3;return t&&(r+=t),new o(-r,e.width+r,-r,e.height+r)}function b(e){return Math.round(e-.5)+.5}var x=t((function(e){e.init=function(e,t){if(x.getExpressionAriaLabel=t,e.config.plaidMode)for(var r in l)l.hasOwnProperty(r)&&"string"==typeof l[r]&&(y[l[r]]=document.createElement("img"),y[l[r]].setAttribute("src","/assets/img/april-fools/"+r.toLowerCase()+".png"))},e.redrawToCtx=function(e,t,r,n,i,o,a,s){if(f.save(e,"expressions"),void 0===i)throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");i.forEach((function(i){var l=r[i],c=n[i];void 0!==l&&l.visible&&(f.save(e,"sketch"),t.settings.takingScreenshot&&f.setTitle(e,x.getExpressionAriaLabel(i)),x.drawSketchToCtx(r[i],e,t,o,a,s),f.restore(e)),c&&c.shouldGraph&&c.foreground&&g(c,e,t)})),f.restore(e)}}));return x.eachSegment=function(e,t){for(var r=0;r<e.branches.length;r++)for(var n=e.branches[r],i=0;i<n.segments.length;i++)t(n,n.segments[i])},x.drawSketchToCtx=function(e,t,r,n,o,s){if(s=s||{},e.branches&&e.branches.length){var l,c=t.lineWidth,g=t.globalAlpha,f=r.settings.globalCurveColor?r.settings.globalCurveColor:e.color,m=y[f];m&&m.complete&&0<m.naturalWidth?(l=t.createPattern(m,"repeat"),t.fillStyle=l):t.fillStyle=f,t.strokeStyle=f,t.lineJoin="round",t.lineCap="round";var v=!!r.settings.takingScreenshot,b=!!s.showMovablePoints,w=1;o.shouldDrawHovered(e.id)&&(w=1.2),o.shouldDrawPressed(e.id)&&(w=1.4);for(var S=0;S<e.branches.length;S++){var E=e.branches[S];if(!E.color||r.settings.globalCurveColor||Object.keys(y).length||(t.fillStyle=E.color),E.graphMode!==a.XYPOINT&&E.graphMode!==a.XYPOINT_MOVABLE){E.graphMode!==a.POLAR&&(t.desmos_batching=!0,t.beginPath());for(var _=0;_<E.segments.length;_++){var k,M,I=E.segments[_],C=a.Y;E.flip&&(C=a.X),E.graphMode&&(C=E.graphMode),C!==a.POLYGONFILL||r.settings.disableFill?C!==a.IMPLICIT&&(M="<="==(k=E.operator)||"<"==k||"\\leq"==k||"\\le"==k,r.settings.disableFill||"<"!=k&&">"!=k&&"<="!=k&&">="!=k&&"\\leq"!=k&&"\\le"!=k&&"\\geq"!=k&&"\\ge"!=k||x.fillGraphStrokeToCtx(t,r,I,M,C)):x.fillPolygonToCtx(t,r,I,E.fillOpacity*w)}t.globalAlpha=this._clampedOpacity(E.fillOpacity*w,i.FILL_ALPHA),E.graphMode!==a.POLAR&&(t.fill(),t.desmos_batching=!1),t.globalAlpha=1}}x.eachSegment(e,function(n,s){var l,c,p,h,g,f,m,y,v;n.graphMode!==a.XYPOINT&&n.graphMode!==a.XYPOINT_MOVABLE&&(l=a.Y,n.flip&&(l=a.X),n.graphMode&&(l=n.graphMode),c=void 0!==n.lineWidth,p=n.lineWidth,h=i.LINE_WIDTH,t.strokeStyle=n.color,t.fillStyle=n.color,c&&(p<=0||!isFinite(p))||(t.lineWidth=c?p:h,g=r.settings.graphLineWidth/h,t.lineWidth*=g,t.globalAlpha*=r.settings.curveOpacity,t.globalAlpha=this._clampedOpacity(1===r.settings.curveOpacity?1:n.lineOpacity,d.DEFAULT),m="default","<"===(f=n.operator)||">"===f||"!="===f?m=u.DASHED:"<="===f||">="===f?m=u.SOLID:e.style===u.DASHED||n.style===u.DASHED?m=u.DASHED:e.style!==u.DOTTED&&n.style!==u.DOTTED||(m=u.DOTTED,c&&(t.lineWidth*=2)),y=o.shouldDrawPressed(e.id),v=o.shouldDrawHovered(e.id),(y||v)&&(t.save(),t.lineWidth+=4.5,t.globalAlpha*=y?.5:.3,x.drawGraphStrokeToCtx(t,r,s,m,l,f),t.restore()),x.drawGraphStrokeToCtx(t,r,s,m,l,f)))}.bind(this)),t.lineWidth=c,t.globalAlpha=g,x.eachSegment(e,function(i,s){if(i.graphMode===a.XYPOINT&&i.showPoint||i.graphMode===a.XYPOINT_MOVABLE&&v){var l,c=[];if(i.interactiveLabel&&e.labels)for(var u=0,d=e.labels.length;u<d;u++){var g=e.labels[u],f=n.isOpenPOI(g),m=n.getHoveredPOI()===g;c.push(f||m),!f&&m&&(l=u)}var y=i.graphMode===a.XYPOINT_MOVABLE&&v&&!b&&1===i.pointOpacity,w=1;"medium"===i.pointSize?w=1.5:"large"===i.pointSize?w=2.25:"number"==typeof i.pointSize?w=i.pointSize/h.DEFAULT:"object"==typeof i.pointSize&&(w=i.pointSize.map((function(e){return e/h.DEFAULT})));var S,E=o.shouldDrawPressed(e.id),_=o.shouldDrawHovered(e.id),k=1;E?k=.5:_&&(k=.3),Array.isArray(i.color)&&(S=i.color),1!==k&&(x.drawPointsToCtx(t,r,s,i.style,c,l,Array.isArray(w)?w.map((function(e){return 1.5*e})):1.5*w,k,S,i.pointOpacity),t.restore()),x.drawPointsToCtx(t,r,s,i.style,c,l,w,1,S,y?p.DEFAULT:i.pointOpacity)}}.bind(this))}},x.drawGraphStrokeToCtx=function(e,t,i,o,a,s){var l,c=r.getClippingGraphType(a,"="!==s,t.settings),d=r.mapSegmentToCanvas(i,t.viewport,t.screen,c),p=r.clipStrokeEdges(d,v(t.screen,e.lineWidth));if(0!==p.length){if(e.save(),m.save(e,"dcg-svg-curve"),o==u.DASHED)new n(e,n.getTotalSegmentLength(p),n.getDashedPattern(e,!!t.settings.highlight)).drawSegment(p);else if(o==u.DOTTED)new n(e,n.getTotalSegmentLength(p),n.getDottedPattern(e,!!t.settings.config.projectorMode,!!t.settings.highlight)).drawSegment(p);else if(o!==u.SOLID&&"default"!==o||1!==e.lineWidth){for(e.desmos_batching||e.beginPath(),e.moveTo(p[0],p[1]),l=0;l<p.length;l+=2)e.lineTo(p[l],p[l+1]);e.desmos_batching||e.stroke()}else{if(e.desmos_batching||e.beginPath(),4<p.length||p[0]!==p[2]&&p[1]!==p[3])for(e.moveTo(p[0],p[1]),l=0;l<p.length;l+=2)e.lineTo(p[l],p[l+1]);else for(e.moveTo(b(p[0]),b(p[1])),l=0;l<p.length;l+=2)e.lineTo(b(p[l]),b(p[l+1]));e.desmos_batching||e.stroke()}m.restore(e),e.restore()}},x.mapPointToScreen=function(e,t,r){var n=e.mapx(t)-.5;if(n<-20||n>e.screen.width+20)return null;var i=e.mapy(r)-.5;return i<-20||i>e.screen.height+20?null:{x:n,y:i}},x.drawPointToCtx=function(e,t,r,n,o,a,s,l,u,d){var p,h=e.lineWidth,g=e.fillStyle,f=e.strokeStyle,y=x.mapPointToScreen(t,r,n);if(!y)return!1;m.save(e,"dcg-svg-point"),e.globalAlpha=void 0!==o?o:i.POINT_ALPHA,u&&(e.globalAlpha*=u),e.desmos_batching||e.beginPath();var v=t.settings.pointLineWidth;if(s&&(v=t.settings.config.projectorMode?17:11,e.lineWidth=v),void 0!==l){if(l<=0||!isFinite(l))return!1;v*=l,e.lineWidth=v}return d&&(e.fillStyle=d,e.strokeStyle=d),a===c.CROSS?(p=.4*v,e.moveTo(y.x-p,y.y-p),e.lineTo(y.x+p,y.y+p),e.moveTo(y.x+p,y.y-p),e.lineTo(y.x-p,y.y+p),e.lineWidth=.3*v):a===c.OPEN?(p=.42*v,e.moveTo(y.x+p,y.y),e.arc(y.x,y.y,p,0,2*Math.PI,!0),e.closePath(),e.fillStyle="white",e.lineWidth=.25*v,e.fill()):(e.moveTo(y.x-.1,y.y-.1),e.lineTo(y.x-.1,y.y+.1),e.lineTo(y.x+.1,y.y+.1),e.lineTo(y.x+.1,y.y-.1)),e.desmos_batching||e.stroke(),e.globalAlpha=1,e.lineWidth=h,e.fillStyle=g,e.strokeStyle=f,m.restore(e),!0},x.drawPointsToCtx=function(e,t,r,n,o,a,s,l,c,u){var d,p=e.lineWidth;e.lineWidth=t.settings.pointLineWidth,d=Array.isArray(u)?u.map(function(e){return this._clampedOpacity(e,i.POINT_ALPHA)}.bind(this)):this._clampedOpacity(u,i.POINT_ALPHA);for(var h=0;h<r.length;h++)x.drawPointToCtx(e,t,r[h][0],r[h][1],a===h?i.HIGHLIGHTED_POINT_ALPHA:Array.isArray(d)?d[h]:d,n,o[h],Array.isArray(s)?s[h]:s,l,c&&c[h]);e.lineWidth=p},x.fillGraphStrokeToCtx=function(e,t,n,o,s){e.globalAlpha=s===a.POLAR?i.POLAR_ALPHA:i.FILL_ALPHA;var l,c,u,d=null,p=null;s===a.POLAR?(p=r.ALL,c=o?0:t.viewport.polarDiameter(),u=t.settings.degreeMode?180:2*Math.PI,d=r.computePolarFill(n,c,u)):s===a.Y?(p=r.Y,l=o?t.viewport.ymin:t.viewport.ymax,d=r.computeCartesianFill(n,l)):s===a.X&&(p=r.X,l=o?t.viewport.xmin:t.viewport.xmax,d=r.computeCartesianFill(n,l));for(var h=v(t.screen),g=0;g<d.length;g++){var f=r.getClippingGraphType(s,!0,t.settings),y=r.mapSegmentToCanvas(d[g],t.viewport,t.screen,f),b=r.clipFillEdges(y,h,p);if(6<=b.length){m.save(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(b[0],b[1]);for(var x=2;x<b.length;x+=2)e.lineTo(b[x],b[x+1]);e.lineTo(b[0],b[1]),e.desmos_batching||e.fill(),m.restore(e)}}e.globalAlpha=1},x._clampedOpacity=function(e,t){return e<0?0:1<e?1:s.isFinite(e)?e:t},x.fillPolygonToCtx=function(e,t,n,o){var a=v(t.screen);e.globalAlpha=this._clampedOpacity(o,i.FILL_ALPHA);var s=r.mapSegmentToCanvas(n,t.viewport,t.screen,r.Y_EQUALS),l=r.clipFillEdges(s,a,r.ALL);if(6<=l.length){m.save(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(l[0],l[1]);for(var c=2;c<l.length;c+=2)e.lineTo(l[c],l[c+1]);e.desmos_batching||e.fill(),m.restore(e)}e.globalAlpha=1},x})),i("graphing/poidotslayer",["require","loadcss!poi","pjs","./graphslayer","./constants"],(function(e){"use strict";e("loadcss!poi");var t=e("pjs"),r=e("./graphslayer"),n=e("./constants"),i=t((function(e){e.init=function(){this.savedPOI=[]},e.redrawToCtx=function(e,t,r,n,o){var a=[];for(var s in r){var l,c=r[s];c.visible&&(c.showHighlight&&i.drawSketchHighlight(c,e,t,n,o),l=c.getPOI(),(c.showPOI||l.length&&l[0].isAttachedToPlottedPoint())&&a.push.apply(a,i.drawPOIs(l,e,"#AAAAAA",t)))}this.savedPOI=a},e.getDrawnPOI=function(){return this.savedPOI}}));return i.drawSketchHighlight=function(e,t,n,i,o){n.settings.setProperty("highlight",!0),r.drawSketchToCtx(e,t,n,i,o),n.settings.setProperty("highlight",!1)},i.drawPOIs=function(e,t,i,o){t.lineWidth=o.settings.pointLineWidth,t.strokeStyle=i||"#AAAAAA",t.fillStyle=i||"#AAAAAA",t.lineJoin="round",t.lineCap="round";var a=t.globalAlpha;t.globalAlpha=n.POI_ALPHA;var s,l,c=[],u=e.length;if(u&&e[0].isAttachedToPlottedPoint())for(s=0;s<u;s++)l=e[s],r.mapPointToScreen(o,l.x,l.y)&&c.push(l);else for(s=0;s<u;s++)l=e[s],r.drawPointToCtx(t,o,l.x,l.y)&&c.push(l);return t.globalAlpha=a,c},i})),i("graphing/stepnumber",["require","pjs","./svg-classes"],(function(e){"use strict";var t=e("pjs"),r=e("./svg-classes"),n=document.createElement("canvas").getContext("2d"),i=t((function(e){e.init=function(e,t){this._label=e,this._fontSize=t,this._layout=this._computeLayout(e,t)},e._computeLayout=function(e,t){var r={};return e.superscript?(r.mantissa_height=t,i.setCtxFontSize(n,r.mantissa_height),r.mantissa_width=n.measureText(e.mantissa).width,r.superscript_height=Math.round(.8*t),i.setCtxFontSize(n,r.superscript_height),r.superscript_width=n.measureText(e.superscript).width,r.mantissa_x=0,r.mantissa_y=t/5,r.superscript_x=r.mantissa_width/2+r.superscript_width/2,r.superscript_y=-t/4,r.top=r.superscript_y-r.superscript_height/2,r.bottom=r.mantissa_y+r.mantissa_height/2,r.left=r.mantissa_x-r.mantissa_width/2,r.right=r.superscript_x+r.superscript_width/2):(r.mantissa_height=t,i.setCtxFontSize(n,t),r.mantissa_width=n.measureText(e.string).width,r.mantissa_x=0,r.mantissa_y=0,r.top=r.mantissa_y-r.mantissa_height/2,r.bottom=r.mantissa_y+r.mantissa_height/2,r.left=r.mantissa_x-r.mantissa_width/2,r.right=r.mantissa_x+r.mantissa_width/2),r},e.getRect=function(){return this.getRectWhenCenteredAt({x:0,y:0})},e.getRectWhenCenteredAt=function(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}},e.getWidth=function(){return this._layout.right-this._layout.left},e.getHeight=function(){return this._layout.bottom-this._layout.top},e.clampBoundsWithinRect=function(e,t){var r={};return e.x+this._layout.left<t.left?r.x=t.left-this._layout.left:e.x+this._layout.right>t.right?r.x=t.right-this._layout.right:r.x=e.x,e.y+this._layout.top<t.top?r.y=t.top-this._layout.top:e.y+this._layout.bottom>t.bottom?r.y=t.bottom-this._layout.bottom:r.y=e.y,r},e.getValue=function(){return this._label.value},e.getMinusWidth=function(){return this.getValue()<0?(i.setCtxFontSize(n,this._fontSize),n.measureText("-1").width-n.measureText("1").width):0},e.getString=function(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string},e.drawCenteredAt=function(e,t,n){var o=t.x,a=i.computeBaselineFromCenter(t.y,this._fontSize);n&&r.save(e,n),e.save(),n&&r.restore(e),i.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+o,this._layout.mantissa_y+a),e.strokeText(this._label.superscript,this._layout.superscript_x+o,this._layout.superscript_y+a),e.fillText(this._label.mantissa,this._layout.mantissa_x+o,this._layout.mantissa_y+a),e.fillText(this._label.superscript,this._layout.superscript_x+o,this._layout.superscript_y+a)):(e.strokeText(this._label.string,this._layout.mantissa_x+o,this._layout.mantissa_y+a),e.fillText(this._label.string,this._layout.mantissa_x+o,this._layout.mantissa_y+a)),e.restore()}}));return i.computeBaselineFromCenter=function(e,t){return e+.272*t},i.setCtxFontSize=function(e,t){e.font=t+"px Arial",e.textAlign="center"},i})),i("graphing/computestepsizes",["require","./stepnumber","core/lib/label"],(function(e){"use strict";function t(e,t,r,n){var i=Math.ceil(e/r),o=Math.floor(t/r),a=1/r;if(!(o<i||1e4<o-i))for(var s=i;s<=o;s++)n(s/a)}var r=e("./stepnumber"),n=e("core/lib/label"),i={};function o(e){return e?{base:10,major:[e,2*e,5*e],minor:[4,4,5]}:i.RATIONAL_STEPS}return i.RATIONAL_STEPS={base:10,major:[1,2,5],minor:[5,4,5]},i.PI_STEPS={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},i.PI_FRAC_STEPS={base:2,major:[Math.PI/3],minor:[3]},i.bestStep=function(e,t){for(var r,n,i,o,a=1/0,s=0;s<t.major.length;s++)r=t.major[s],i=Math.ceil(Math.log(e/r)/Math.log(t.base)),(o=r*Math.pow(t.base,i))<a&&(n=(a=o)/t.minor[s]);return{major:a,minor:n}},i.countStepsInRange=function(e,t,r){return 1+(t-e)/r},i.calculateSpaceBetweenRects=function(e,t){var r=e.right<t.left?t.left-e.right:t.right<e.left?e.left-t.right:0,n=e.bottom<t.top?t.top-e.bottom:t.bottom<e.top?e.top-t.bottom:0;return Math.max(n,r)},i.estimateMajors=function(e){var t=e.screen.width,r=e.screen.height,n=e.viewport.xmax-e.viewport.xmin,i=e.viewport.ymax-e.viewport.ymin,o=e.settings.pixelsPerLabel;return{majorStepX:o/t*n,majorStepY:o/r*i}},i.cartesian=function(e){var a,s,l,c,u,d,p,h,g={},f=Math.abs(e.settings.xAxisStep),m=Math.abs(e.settings.yAxisStep),y=e.viewport.xmax-e.viewport.xmin,v=e.viewport.ymax-e.viewport.ymin,b=0<=n.value(f,y).string.indexOf("Ï"),x=0<=n.value(m,v).string.indexOf("Ï"),w=i.countStepsInRange(e.viewport.xmin,e.viewport.xmax,f),S=i.countStepsInRange(e.viewport.ymin,e.viewport.ymax,m),E=i.estimateMajors(e),_=e.settings.labelSize;return f&&f!==Math.PI&&3<=w&&w<100&&(s=0,e.settings.xAxisNumbers&&t(e.viewport.xmin,e.viewport.xmax,f,(function(e){var t=r(n.value(e,y),_);s=Math.max(t.getWidth(),s)})),a=s+10,e.settings.xAxisNumbers||(a=1===e.settings.xAxisMinorSubdivisions?8:20),w*a<=e.screen.width&&(g.majorStepX=f,g.minorStepX=3===f||5===f?1:f/4)),m&&m!==Math.PI&&3<=S&&S<100&&(l=0,e.settings.yAxisNumbers&&t(e.viewport.ymin,e.viewport.ymax,m,(function(e){var t=r(n.value(e,v),_);l=Math.max(t.getHeight(),l)})),a=l+10,e.settings.yAxisNumbers||(a=1===e.settings.yAxisMinorSubdivisions?8:20),S*a<=e.screen.height&&(g.majorStepY=m,g.minorStepY=3===m||5===m?1:m/4)),g.majorStepX||(c=b?1<=E.majorStepX?i.PI_STEPS:i.PI_FRAC_STEPS:o(f),u=i.bestStep(E.majorStepX,c),g.majorStepX=u.major,g.minorStepX=u.minor),g.majorStepY||(d=x?1<=E.majorStepY?i.PI_STEPS:i.PI_FRAC_STEPS:o(m),p=i.bestStep(E.majorStepY,d),g.majorStepY=p.major,g.minorStepY=p.minor),f===m&&(1<=(h=e.screen.width/y/(e.screen.height/v))&&h<=2?(g.majorStepX=g.majorStepY,g.minorStepX=g.minorStepY):h<=1&&.5<=h&&(g.majorStepY=g.majorStepX,g.minorStepY=g.minorStepX)),0<e.settings.xAxisMinorSubdivisions&&(g.minorStepX=g.majorStepX/e.settings.xAxisMinorSubdivisions),0<e.settings.yAxisMinorSubdivisions&&(g.minorStepY=g.majorStepY/e.settings.yAxisMinorSubdivisions),g},i.polar=function(e){var t=i.estimateMajors(e),r=i.bestStep(t.majorStepX,i.RATIONAL_STEPS),n=i.bestStep(t.majorStepY,i.RATIONAL_STEPS),o=r.major>n.major?r:n;return{majorStepR:o.major,minorStepR:o.minor}},i})),i("graphing/gridlayer",["require","pjs","./stepnumber","core/lib/label","./computestepsizes","core/graphing-calc/json/graph-settings","./svg-classes","./svg-groups"],(function(e){"use strict";var t=e("pjs"),r=e("./stepnumber"),n=e("core/lib/label"),i=e("./computestepsizes"),o=e("core/graphing-calc/json/graph-settings").AxisArrowModes,a=e("./svg-classes"),s=e("./svg-groups"),l=t((function(e){e.redrawToCtx=function(e,t,r){var n;s.save(e,"graphpaper");var o,a=t.settings.showGrid,l=t.settings.polarMode&&a?(n=i.polar(t),s.save(e,"grid"),this.drawPolarGrid(e,t,n),s.restore(e),s.save(e,"axis"),this.drawAxes(e,t,r),this.drawPolarStepNumbers(e,t,n)):(n=i.cartesian(t),a&&(s.save(e,"grid"),this.drawCartesianGrid(e,t,n),s.restore(e)),o=!a,s.save(e,"axis"),this.drawAxes(e,t,r),this.drawCartesianStepNumbers(e,t,n,o));this.drawLabels(e,t,l),s.restore(e),s.restore(e)},e.addTextShadow=function(e,t){e.strokeStyle=t.settings.getBackgroundColor(),e.lineWidth=3,e.miterLimit=2},e.drawPolarGrid=function(e,t,r){e.save();var n=t.settings.minorAxisOpacity,i=1-(1-t.settings.majorAxisOpacity)/(1-n),o=Math.round(t.mapx(0))-.5,s=Math.round(t.mapy(0))-.5,l=t.screen.height/(t.viewport.ymax-t.viewport.ymin),u=t.screen.width/(t.viewport.xmax-t.viewport.xmin),d=l/u,p=u/l,h=s/d,g=t.viewport.smallestR(),f=t.viewport.largestR(),m=r.minorStepR*Math.max(1,Math.floor(g/r.minorStepR)),y=r.majorStepR*Math.max(1,Math.floor(g/r.majorStepR));e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+n+")",c(m,f,r.minorStepR,(function(r){a.save(e,"dcg-svg-minor-gridline"),e.beginPath(),a.restore(e),e.scale(1,d);var n=t.mapx(r)-o;e.moveTo(o+n,h),e.arc(o,h,n,0,2*Math.PI),e.scale(1,p),e.stroke()})),c(0,359,0<g?5:15,(function(r){var n,i;(0===r||180===r)&&t.settings.showXAxis||(90===r||270===r)&&t.settings.showYAxis||(a.save(e,"dcg-svg-minor-gridline"),e.beginPath(),a.restore(e),e.moveTo(o,s),n=t.mapx(f*Math.cos(r*Math.PI/180)),i=t.mapy(f*Math.sin(r*Math.PI/180)),e.lineTo(Math.round(n)-.5,Math.round(i)-.5),e.stroke())})),e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+i+")",c(y,f,r.majorStepR,(function(r){a.save(e,"dcg-svg-major-gridline"),e.beginPath(),a.restore(e),e.scale(1,d);var n=t.mapx(r)-o;e.moveTo(o+n,h),e.arc(o,h,n,0,2*Math.PI),e.scale(1,p),e.stroke()})),e.restore()},e.drawCartesianGrid=function(e,t,r){e.save();var n=t.viewport.xmin,i=t.viewport.ymin,o=t.viewport.xmax,s=t.viewport.ymax,l=t.screen.width,u=t.screen.height,d=u,p=0;t.settings.restrictGridToFirstQuadrant&&(i=n=0,d=t.mapy(0),p=t.mapx(0));var h=t.settings.minorAxisOpacity,g=t.settings.majorAxisOpacity;e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+h+")",a.save(e,"dcg-svg-minor-gridline"),c(n,o,r.minorStepX,(function(r){var n;0===r&&t.settings.showYAxis||(n=Math.round(t.mapx(r)))!==l&&(e.beginPath(),e.moveTo(n-.5,0),e.lineTo(n-.5,d),e.stroke())})),c(i,s,r.minorStepY,(function(r){var n;0===r&&t.settings.showXAxis||(n=Math.round(t.mapy(r)))!==u&&(e.beginPath(),e.moveTo(p,n-.5),e.lineTo(l,n-.5),e.stroke())})),a.restore(e);var f=1-(1-g)/(1-h);e.strokeStyle="rgba(0, 0 , 0, "+f+")",a.save(e,"dcg-svg-major-gridline"),c(n,o,r.majorStepX,(function(r){var n;0===r&&t.settings.showYAxis||(n=Math.round(t.mapx(r)))!==l&&(e.beginPath(),e.moveTo(n-.5,0),e.lineTo(n-.5,d),e.stroke())})),c(i,s,r.majorStepY,(function(r){var n;0===r&&t.settings.showXAxis||(n=Math.round(t.mapy(r)))!==u&&(e.beginPath(),e.moveTo(p,n-.5),e.lineTo(l,n-.5),e.stroke())})),a.restore(e),e.restore()},e.drawAxes=function(e,t,r){var n=t.settings.axisLineOffset,i=t.settings.axisOpacity.toString(),l="rgba(127,205,230,"+i+")",c="rgba(0,0,0,"+i+")",u=t.settings.xAxisArrowMode,d=t.settings.yAxisArrowMode,p=t.settings.showXAxis,h=t.settings.showYAxis,g=Math.round(t.mapx(0))-n,f=Math.round(t.mapy(0))-n,m=t.screen.height,y=t.screen.width;function v(t,r,n){e.save();var i=Math.PI/12,o=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=c,e.strokeStyle=c,e.beginPath(),e.moveTo(t,r),e.lineTo(t+Math.cos(n-i)*o,r+Math.sin(n-i)*o),e.lineTo(t+Math.cos(n+i)*o,r+Math.sin(n+i)*o),e.lineTo(t,r),e.lineTo(t+Math.cos(n-i)*o,r+Math.sin(n-i)*o),e.stroke(),e.fill(),e.restore()}var b=m,x=0;t.settings.restrictGridToFirstQuadrant&&(b=f,x=g,u===o.BOTH&&(u=o.POSITIVE),d===o.BOTH&&(d=o.POSITIVE)),h&&(s.save(e,"yaxis"),t.settings.takingScreenshot&&s.setTitle(e,t.settings.yAxisLabel||"Y axis"),a.save(e,"dcg-svg-axis-line"),e.lineWidth=+t.settings.axisLineWidth,e.strokeStyle="y"===r?l:c,d===o.BOTH?(e.beginPath(),e.moveTo(g,2*t.settings.axisLineWidth),e.lineTo(g,m-2*t.settings.axisLineWidth),e.stroke(),v(g,m-t.settings.axisLineWidth,3*Math.PI/2),v(g,t.settings.axisLineWidth,Math.PI/2)):d===o.POSITIVE?(e.beginPath(),e.moveTo(g,2*t.settings.axisLineWidth),e.lineTo(g,b),e.stroke(),v(g,t.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(g,0),e.lineTo(g,b),e.stroke()),a.restore(e),s.restore(e)),p&&(s.save(e,"xaxis"),t.settings.takingScreenshot&&s.setTitle(e,t.settings.xAxisLabel||"X axis"),a.save(e,"dcg-svg-axis-line"),e.lineWidth=+t.settings.axisLineWidth,e.strokeStyle="x"===r?l:c,u===o.BOTH?(e.beginPath(),e.moveTo(2*t.settings.axisLineWidth,f),e.lineTo(y-2*t.settings.axisLineWidth,f),e.stroke(),v(t.settings.axisLineWidth,f,0),v(y-t.settings.axisLineWidth,f,Math.PI)):u===o.POSITIVE?(e.beginPath(),e.lineTo(x,f),e.lineTo(y-2*t.settings.axisLineWidth,f),e.stroke(),v(y-t.settings.axisLineWidth,f,Math.PI)):(e.beginPath(),e.lineTo(x,f),e.lineTo(y,f),e.stroke()),a.restore(e),s.restore(e))},e.drawPolarStepNumbers=function(e,t,i){e.save();var o=t.settings.showGrid,s=t.settings.xAxisNumbers&&t.settings.showXAxis,l=t.settings.yAxisNumbers&&t.settings.showYAxis,p=o&&t.settings.polarNumbers,h=t.viewport.largestR(),g=t.viewport.smallestR(),f=t.viewport.xmin,m=t.viewport.xmax,y=t.viewport.ymin,v=t.viewport.ymax,b=t.screen.width,x=t.screen.height,w={left:3,right:b-3,top:3,bottom:x-3},S=t.settings.labelHangingColor,E=t.settings.getTextColor(),_=t.settings.labelSize,k=_;function M(e,r,n){var i=Math.sqrt(e*e-r*r);y<=i&&i<=v&&n.push({x:t.mapx(r),y:t.mapy(i)}),y<=-i&&-i<=v&&n.push({x:t.mapx(r),y:t.mapy(-i)})}function I(e,r,n){var i=Math.sqrt(e*e-r*r);f<=i&&i<=m&&n.push({x:t.mapx(i),y:t.mapy(r)}),f<=-i&&-i<=m&&n.push({x:t.mapx(-i),y:t.mapy(r)})}this.addTextShadow(e,t),e.fillStyle=E;var C,L,P,T,A,O,D,F,q=t.mapx(0),N=t.mapy(0),R=y<=0&&0<=v&&s,B=f<=0&&0<=m&&l,j="";R||B||!o||(D=(C=Math.abs(q))<=(L=Math.abs(q-b))?(A="left",C):(A="right",L),F=(P=Math.abs(N))<=(T=Math.abs(N-x))?(O="top",P):(O="bottom",T),s&&l?j=D<=F?A:O:l?j=A:s&&(j=O));var V,z,U,G={left:0,right:b,top:N-1,bottom:N+1},K={left:q-1,right:q+1,top:0,bottom:x};return c(0,h,i.majorStepR,(function(i){var o=[],a=[],c=[],u=r(n.value(i,h),_),p=u.getRect();switch(0<i?(B&&y<=i&&i<=v&&a.push({x:q-p.right-5,y:t.mapy(i)}),B&&y<=-i&&-i<=v&&a.push({x:q-p.right-5,y:t.mapy(-i)}),R&&f<=i&&i<=m&&o.push({x:t.mapx(i),y:N-p.top+3}),R&&f<=-i&&-i<=m&&o.push({x:t.mapx(-i),y:N-p.top+3})):B&&!s&&y<=i&&i<=v?a.push({x:q-p.right-5,y:t.mapy(i)}):R&&!l&&f<=i&&i<=m&&o.push({x:t.mapx(i),y:N-p.top+3}),j){case"top":I(i,v,c);break;case"bottom":I(i,y,c);break;case"left":M(i,f,c);break;case"right":M(i,m,c)}o.forEach((function(t){t=u.clampBoundsWithinRect(t,w),u.drawCenteredAt(e,t,"dcg-svg-axis-value"),d(G,u.getRectWhenCenteredAt(t))})),a.forEach((function(t){t=u.clampBoundsWithinRect(t,w),u.drawCenteredAt(e,t,"dcg-svg-axis-value"),d(K,u.getRectWhenCenteredAt(t))})),c.forEach((function(t){t=u.clampBoundsWithinRect(t,w),u.drawCenteredAt(e,t,"dcg-svg-axis-value")}))})),p&&(V=Math.ceil(g/i.majorStepR),z=Math.floor(h/i.majorStepR),U=Math.ceil((V+z)/2)*i.majorStepR,c(0,359,0<g?15:30,(function(i){var o,s,l,c,d=t.settings.degreeMode?i.toString()+"Â°":n.value(i*Math.PI/180,2*Math.PI).string,p=e.measureText(d).width/2,h=U/1.05,g=h*Math.cos(i*Math.PI/180),w=h*Math.sin(i*Math.PI/180);g<f||m<g||w<y||v<w||(o=t.mapx(g),s=t.mapy(w),0===i||180===i?s-=k:90!==i&&270!==i||(o+=3+p),l=u(o,3+p,b-3-p),c=u(s,3+k,x-3-k),c=r.computeBaselineFromCenter(c,_),a.save(e,"dcg-svg-polar-axis-value"),e.save(),a.restore(e),e.fillStyle=S,r.setCtxFontSize(e,_),e.strokeText(d,l,c),e.fillText(d,l,c),e.restore())}))),e.restore(),{x:G,y:K}},e.drawLabels=function(e,t,r){var n,i,o,s,l,c,u,d,h=t.viewport.xmin,g=t.viewport.xmax,f=t.viewport.ymin,m=t.viewport.ymax,y=t.screen.width,v=t.screen.height,b=(g-h)/y,x=(m-f)/v,w=t.settings.getTextColor(),S=t.mapx(0),E=t.mapy(0),_=t.settings.labelSize,k=t.settings.showXAxis&&t.settings.xAxisLabel,M=t.settings.showYAxis&&t.settings.yAxisLabel,I=r.x,C=r.y;k&&I?(a.save(e,"dcg-svg-axis-label"),e.save(),a.restore(e),e.fillStyle=w,e.__xLabelOffset&&t.settings.isViewportTransient&&p(e.__xLabelOffset.xscale,b)&&p(e.__xLabelOffset.yscale,x)&&(i={x:e.__xLabelOffset.x+S,y:e.__xLabelOffset.y+E}),this._setAxisLabelFont(e,k,_,t),i||(n=y-e.measureText(k).width-15,i=I.bottom+_<v?{x:n,y:I.bottom+_}:{x:n,y:I.top-_/2},e.__xLabelOffset={x:i.x-S,y:i.y-E,xscale:b,yscale:x}),e.strokeText(k,i.x,i.y),e.fillText(k,i.x,i.y),e.restore()):e.__xLabelPosition=null,M&&C?(a.save(e,"dcg-svg-axis-label"),e.save(),a.restore(e),e.fillStyle=w,e.__yLabelOffset&&t.settings.isViewportTransient&&p(e.__yLabelOffset.xscale,b)&&p(e.__yLabelOffset.yscale,x)&&(d={x:e.__yLabelOffset.x+S,y:e.__yLabelOffset.y+E}),this._setAxisLabelFont(e,M,_,t),d||(l=_,c=(s=e.measureText(M).width)+5,this._isShortMathyLabel(M)||(o=s,s=l,l=o,c=.5*s),u=15+l,d=0<C.left-s?{x:C.left-c,y:u}:{x:C.right+s,y:u},e.__yLabelOffset={x:d.x-S,y:d.y-E,xscale:b,yscale:x}),e.translate(d.x,d.y),this._isShortMathyLabel(M)||e.rotate(-Math.PI/2),e.strokeText(M,0,0),e.fillText(M,0,0),e.restore()):e.__yLabelPosition=null},e._isShortMathyLabel=function(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)},e._setAxisLabelFont=function(e,t,r,n){this.addTextShadow(e,n),this._isShortMathyLabel(t)?e.font="italic "+Math.round(1.4*r.toString())+"px Times":e.font=Math.round(1.2*r.toString())+"px Arial"},e.drawCartesianStepNumbers=function(e,t,i,o){e.save();var s=t.settings.showXAxis,l=t.settings.showYAxis,u=s&&t.settings.xAxisNumbers,p=l&&t.settings.yAxisNumbers,h=t.viewport.xmin,g=t.viewport.xmax,f=t.viewport.ymin,m=t.viewport.ymax,y=t.screen.width,v=t.screen.height,b={left:3,top:3,right:y-3,bottom:v-3};t.settings.restrictGridToFirstQuadrant&&(f=h=0);var x=t.settings.labelHangingColor,w=t.settings.getTextColor(),S=t.mapx(0),E=t.mapy(0),_=t.settings.labelSize;this.addTextShadow(e,t);var k,M={left:0,right:y,top:E-1,bottom:E+1},I={left:S-1,right:S+1,top:0,bottom:v},C=!1;s&&l&&(u||p)&&(C=!0,e.fillStyle=w,(k=r(n.value(0,1),_)).drawCenteredAt(e,{x:S-k.getRect().right-5,y:E-k.getRect().top+5},"dcg-svg-axis-value"));var L,P,T,A,O,D=[],F=[];return u&&c(h,g,i.majorStepX,(function(e){var t=r(n.value(e,g-h),_);"0"===t.getString()&&C||D.push(t)})),p&&c(f,m,i.majorStepY,(function(e){var t=r(n.value(e,m-f),_);"0"===t.getString()&&C||F.push(t)})),o&&(e.save(),a.save(e,"dcg-svg-tickmark"),L=t.settings.axisLineOffset,P="rgba(0,0,0,"+t.settings.axisOpacity.toString()+")",e.lineWidth=t.settings.axisLineWidth,e.strokeStyle=P,T=Math.round(t.mapy(0))-L,A=Math.round(t.mapx(0))-L,O=Math.round(2*e.lineWidth)-L,e.beginPath(),D.forEach((function(r){var n=Math.round(t.mapx(r.getValue()))-L;e.moveTo(n,T-O),e.lineTo(n,T+O)})),F.forEach((function(r){var n=Math.round(t.mapy(r.getValue()))-L;e.moveTo(A-O,n),e.lineTo(A+O,n)})),e.stroke(),a.restore(e),e.restore()),D.forEach((function(r){var n={x:t.mapx(r.getValue())-.5*r.getMinusWidth(),y:E-r.getRect().top+5},i=r.clampBoundsWithinRect(n,b);e.fillStyle=n.y===i.y?w:x;var o="dcg-svg-axis-value";n.x!==i.x&&(o+=" dcg-svg-offcenter-axis-value"),r.drawCenteredAt(e,i,o),d(M,r.getRectWhenCenteredAt(i)),a.restore(e)})),F.forEach((function(r){var n={x:S-5-r.getRect().right,y:t.mapy(r.getValue())},i=r.clampBoundsWithinRect(n,b);e.fillStyle=n.x===i.x?w:x;var o="dcg-svg-axis-value";n.y!==i.y&&(o+=" dcg-svg-offcenter-axis-value"),r.drawCenteredAt(e,i,o),d(I,r.getRectWhenCenteredAt(i)),a.restore(e)})),e.restore(),{x:M,y:I}}})),c=function(e,t,r,n){var i=Math.ceil(e/r),o=Math.floor(t/r);if(isFinite(o-i)&&!(1e4<o-i))for(var a=i;a<=o;a++)n(a*r)},u=function(e,t,r){return e<t?t:r<e?r:e},d=function(e,t){t.left<e.left&&(e.left=t.left),t.right>e.right&&(e.right=t.right),t.top<e.top&&(e.top=t.top),t.bottom>e.bottom&&(e.bottom=t.bottom)},p=function(e,t){var r=Math.abs(e),n=Math.abs(t);return Math.abs(r-n)<=1e-4*(r<n?n:r)};return l})),i("core/math/recttransformation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RT=void 0;var r=(n.prototype.toJSON=function(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}},n.prototype.compose=function(e){return new n(this.sx*e.tx+this.tx,this.sy*e.ty+this.ty,this.sx*e.sx,this.sy*e.sy)},n.prototype.translate=function(e,t){var r=void 0===t?e.x:t.x-e.x,i=void 0===t?e.y:t.y-e.y;return new n(this.tx+r,this.ty+i,this.sx,this.sy)},n.prototype.scale=function(e,t){return n.scale(e,t).compose(this)},n.prototype.scaleAtPoint=function(e,t,r){return void 0===r&&(r=t),n.scaleAtPoint(e,t,r).compose(this)},n.prototype.inverse=function(){return new n(-this.tx/this.sx,-this.ty/this.sy,1/this.sx,1/this.sy)},n.prototype.div=function(e){return new n((this.tx*e.sx-this.sx*e.tx)/e.sx,(this.ty*e.sy-this.sy*e.ty)/e.sy,this.sx/e.sx,this.sy/e.sy)},n.prototype.conjugate=function(e){return new n(this.tx*e.sx+e.tx*(1-this.sx),this.ty*e.sy+e.ty*(1-this.sy),this.sx,this.sy)},n.prototype.pow=function(e){return new n(this.tx*i(this.sx,e),this.ty*i(this.sy,e),Math.pow(this.sx,e),Math.pow(this.sy,e))},n.prototype.mapX=function(e){return this.sx*e+this.tx},n.prototype.mapY=function(e){return this.sy*e+this.ty},n.prototype.mapPoint=function(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}},n.prototype.mapRect=function(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}},n.scale=function(e,t){return void 0===t&&(t=e),new n(0,0,e,t)},n.translate=function(e,t){return(new n).translate(e,t)},n.scaleAtPoint=function(e,t,r){return void 0===r&&(r=t),void 0===r&&(r=t),new n(e.x*(1-t),e.y*(1-r),t,r)},n.fromRects=function(e,t){var r=(t.right-t.left)/(e.right-e.left),i=(t.top-t.bottom)/(e.top-e.bottom);return new n(t.left-r*e.left,t.bottom-i*e.bottom,r,i)},n.fromJSON=function(e){return new n(e.tx,e.ty,e.sx,e.sy)},n);function n(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=r),this.tx=e,this.ty=t,this.sx=r,this.sy=n}function i(e,t){var r=e-1;return 1+r*r*r==1?t*(1+r*(t-1)*(.5+1/6*r*(t-2))):(Math.pow(e,t)-1)/r}t.RT=r})),i("graphing/projection",["require","exports","core/math/recttransformation"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=void 0;var n=(i.prototype.mapx=function(e){return this.mathToPixels.mapX(e)},i.prototype.mapy=function(e){return this.mathToPixels.mapY(e)},i.prototype.map_pt=function(e){return this.mathToPixels.mapPoint(e)},i.prototype.reverse_mapx=function(e){return this.pixelsToMath.mapX(e)},i.prototype.reverse_mapy=function(e){return this.pixelsToMath.mapY(e)},i.prototype.reverse_map_pt=function(e){return this.pixelsToMath.mapPoint(e)},i.prototype.coordsAreOnscreen=function(e,t,r){return-(r=void 0===r?0:r)<e&&-r<t&&e<this.screen.width+r&&t<this.screen.height+r},i.prototype.closestPointOnScreen=function(e){var t=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,t.left),t.right),y:Math.min(Math.max(e.y,t.top),t.bottom)}},i);function i(e,t,n){var i,o;this.screen=e,this.viewport=t,this.settings=n,this.mathCoordinates={left:(i=t).xmin,right:i.xmax,bottom:i.ymin,top:i.ymax},this.pixelCoordinates={left:0,right:(o=e).width,top:0,bottom:o.height},this.mathToPixels=r.RT.fromRects(this.mathCoordinates,this.pixelCoordinates),this.pixelsToMath=r.RT.fromRects(this.pixelCoordinates,this.mathCoordinates)}t.Projection=n})),function(e){"function"==typeof i&&i.amd?i("vendor/jquery.mousewheel",["jquery"],e):e(jQuery)}((function(e){var t,r,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var a=n.length;a;)e.event.fixHooks[n[--a]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],l,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};function l(n){var i,a,s,l=n||window.event,d=o.call(arguments,1),p=0,h=0,g=0;if((n=e.event.fix(l)).type="mousewheel","detail"in l&&(g=-1*l.detail),"wheelDelta"in l&&(g=l.wheelDelta),"wheelDeltaY"in l&&(g=l.wheelDeltaY),"wheelDeltaX"in l&&(h=-1*l.wheelDeltaX),"axis"in l&&l.axis===l.HORIZONTAL_AXIS&&(h=-1*g,g=0),p=0===g?h:g,"deltaY"in l&&(p=g=-1*l.deltaY),"deltaX"in l&&(h=l.deltaX,0===g&&(p=-1*h)),0!==g||0!==h)return 1===l.deltaMode?(p*=a=e.data(this,"mousewheel-line-height"),g*=a,h*=a):2===l.deltaMode&&(p*=s=e.data(this,"mousewheel-page-height"),g*=s,h*=s),i=Math.max(Math.abs(g),Math.abs(h)),(!r||i<r)&&u(l,r=i)&&(r/=40),u(l,i)&&(p/=40,h/=40,g/=40),p=Math[1<=p?"floor":"ceil"](p/r),h=Math[1<=h?"floor":"ceil"](h/r),g=Math[1<=g?"floor":"ceil"](g/r),n.deltaX=h,n.deltaY=g,n.deltaFactor=r,n.deltaMode=0,d.unshift(n,p,h,g),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,d)}function c(){r=null}function u(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})),i("graphing/viewportcontroller",["require","jquery","pjs","lib/aria","lib/i18n","core/math/recttransformation","./viewport","core/math/distance","./constants","./projection","keys","jquery.handleevent","vendor/jquery.mousewheel"],(function(e){"use strict";var t=e("jquery"),r=e("pjs"),n=e("lib/aria"),i=e("lib/i18n"),o=e("core/math/recttransformation").RT,a=e("./viewport").Viewport,s=e("core/math/distance"),l=e("./constants"),c=e("./projection").Projection,u=e("keys");return e("jquery.handleevent"),e("vendor/jquery.mousewheel"),r((function(e){var r=0;function d(e,t){var r=t.x-e.x,n=t.y-e.y,i=.5*(e.x+t.x),o=.5*(e.y+t.y),a=.5*s.hypot(r,n);return{center:g(i,o),radius:a}}function p(e,t){return d(t,{x:2*e.x-t.x,y:2*e.y-t.y})}function h(e,t){for(var r=[],n=0;n<e.length;n++)r.push(g(e[n].x-t.left,e[n].y-t.top));return r}function g(e,t){return{x:e,y:t}}function f(e){return g(.5*(e.left+e.right),.5*(e.bottom+e.top))}e.init=function(e,t){this.grapher=e,this.$=this.grapher.$,this.__id=r++,this.controller=t,this.isScalingEnabled=!1,this.mousePt=g(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()},e.remove=function(){t(window).off(".viewportcontroller-"+this.__id)},e.s=function(e,t){return i.s(e,t,this.grapher.settings.language)},e.getViewport=function(){return this.grapher.getProjection().viewport},e.getProjection=function(){return this.grapher.getProjection()},e.updateMouse=function(e){var t=this.$[0].getBoundingClientRect();this.mousePt=g(e.clientX-t.left,e.clientY-t.top)},e.updateScaleAxis=function(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.grapher.redrawAllLayers()},e.updateCursor=function(){this.$.toggleClass("dcg-scale-horizontal","x"===this.grapher.scaleAxis),this.$.toggleClass("dcg-scale-vertical","y"===this.grapher.scaleAxis),this.$.toggleClass("dcg-scale-both","both"===this.grapher.scaleAxis)},e.isMouseNearOrigin=function(){var e=this.getProjection().mathToPixels.mapPoint(g(0,0));return Math.abs(this.mousePt.x-e.x)<50&&Math.abs(this.mousePt.y-e.y)<50},e.isMouseNearXAxis=function(){var e=this.getProjection(),t=e.pixelCoordinates,r=e.mathToPixels.mapY(0);return r=Math.min(Math.max(t.top,r),t.bottom),Math.abs(this.mousePt.y-r)<40&&e.settings.showXAxis},e.isMouseNearYAxis=function(){var e=this.getProjection(),t=e.pixelCoordinates,r=e.mathToPixels.mapX(0);return r=Math.min(Math.max(t.left,r),t.right),Math.abs(this.mousePt.x-r)<40&&e.settings.showYAxis},e.isMouseInViewport=function(){var e=this.getProjection(),t=e.mathCoordinates,r=e.pixelsToMath.mapPoint(this.mousePt);return r.x>=t.left&&r.x<=t.right&&r.y>=t.bottom&&r.y<=t.top},e.getDefaultViewport=function(){return this.controller.getDefaultStateViewport()||this.grapher.getDefaultViewport()},e._setViewportWithoutCancellingAnimation=function(e){var t;e.isValid()&&(e.equals(this.getViewport())||(t=this.getProjection(),this.grapher._setProjection(new c(t.screen,e,t.settings))))},e.setViewport=function(e){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(e)},e.setScreen=function(e){var t=this.getProjection(),r=t.settings.squareAxes,n=new c(e,this.getViewportForScreen(t.viewport,e,r),t.settings);this.grapher._setProjection(n)},e.getTransformedViewport=function(e){var t=this.getProjection(),r=t.pixelsToMath.div(e).mapRect(t.pixelCoordinates);return new a(r.left,r.right,r.bottom,r.top)},e.transformViewport=function(e){this.setViewport(this.getTransformedViewport(e))},e.animateTransformation=function(e){var t=this;this.cancelAnimation();var r,n=this.getTransformedViewport(e),i=0;this.__animationTimeout=requestAnimationFrame((function o(a){var s=(a-(r=r||a))/l.ANIMATE_ZOOM_DURATION;(i+=s)<1?(t.__animationTimeout=requestAnimationFrame(o),t._setViewportWithoutCancellingAnimation(t.getTransformedViewport(e.pow(s)))):t.setViewport(n),t.grapher.debounceUserRequestedViewportChange()}))},e.cancelAnimation=function(){cancelAnimationFrame(this.__animationTimeout)},e.addMouseWheelEventHandler=function(){var e,r,n=this,i=!1;t(window).on("scroll.viewportcontroller-"+this.__id,(function(e){i=!0})),t(window).on("mousewheel.viewportcontroller-"+this.__id,(function(t){e=t.originalEvent.clientX,r=t.originalEvent.clientY})),t(window).on("mousemove.viewportcontroller-"+this.__id,(function(t){var n,o;i&&((n=t.originalEvent.clientX-e)*n+(o=t.originalEvent.clientY-r)*o<100||(i=!1))}));var a=0;this.$.mousewheel(function(e,t){var r,s,c,u,d,p,h,f,m=Date.now();n.preventScrollZoom&&50<m-n.lastScrollZoom&&(n.preventScrollZoom=!1),n.lastScrollZoom=m,n.preventScrollZoom||(r=this.getProjection()).settings.config.lockViewport||(s=r.mathToPixels,i||(e.preventDefault(),n.updateMouse(e),c=s.mapPoint(g(0,0)),u=n.isMouseNearOrigin()&&0<t?c:n.mousePt,0<a||(a+=1,requestAnimationFrame((function(){a--})),d=0<(t=0<t?1:-1)?l.ZOOM_FACTOR:1/l.ZOOM_FACTOR,h="x"!==(p=n.grapher.scaleAxis)&&"both"!==p&&p?1:d,f="y"!==p&&"both"!==p&&p?1:d,this.transformViewport(o.scaleAtPoint(u,h,f)),this.grapher.debounceUserRequestedViewportChange())))}.bind(this))},e.handleDoubleClick=function(e){var t,r,n=this.getProjection();n.settings.config.lockViewport||n.settings.config.disable_dblclick_zooming||e.wasHandled()||(e.preventDefault(),t=this.$[0].getBoundingClientRect(),r=g(e.clientX-t.left,e.clientY-t.top),this.animateTransformation(o.scaleAtPoint(r,l.DOUBLETAP_ZOOM)))},e.applyPanTouchChanges=function(e,t){var r;this.getProjection().settings.config.lockViewport||this.isScalingEnabled||(r=g(t[0].x-e[0].x,t[0].y-e[0].y),this.transformViewport(o.translate(r)),this.grapher.debounceUserRequestedViewportChange())},e.chooseDragScaleCenter=function(){var e=this.getProjection(),t=e.pixelCoordinates,r=e.mathToPixels.mapX(0),n=e.mathToPixels.mapY(0);return g(r=Math.min(Math.max(t.left,r),t.right),n=Math.min(Math.max(t.top,n),t.bottom))},e.applyScaleTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport){var r=this.grapher.scaleAxis;if(2===e.length&&2===t.length)i=d(e[0],e[1]),a=d(t[0],t[1]);else{if(1!==t.length)return;var n=this.chooseDragScaleCenter(),i=p(n,e[0]),a=p(n,t[0])}var s=a.radius/i.radius,l="y"===r?1:s,c="x"===r?1:s,u=o.scaleAtPoint(i.center,l,c).translate(i.center,a.center);this.transformViewport(u),this.grapher.debounceUserRequestedViewportChange()}},e.addTouchEventHandler=function(){var e=this,r=[],n=!1,i=!0,o=!0;function a(){e.grapher.scaleAxis&&(e.grapher.scaleAxis=void 0,e.grapher.redrawAllLayers(),e.updateCursor())}function s(){e.isScalingEnabled=!1,e.preventScrollZoom=!0,a()}t(window).on("mousemove.viewportcontroller-"+this.__id,(function(t){var r=e.grapher.getProjection();n||r.settings.config.lockViewport||(e.updateMouse(t),e.isScalingEnabled&&e.updateScaleAxis())}));var l=function(t){if(n&&!e.getProjection().settings.config.lockViewport&&e.grapher&&e.grapher.clickableObjectsLayer&&!e.grapher.clickableObjectsLayer.isAnObjectPressed()){var s=h(t.touches,e.$.offset());if(2===r.length&&2===s.length)(function(t){e.grapher.scaleAxis||(e.grapher.scaleAxis=function(t){if(!(t.length<2)){var r=e.grapher.getProjection(),n=r.pixelCoordinates,i=r.mathToPixels.mapX(0),o=r.mathToPixels.mapY(0),a=(i=Math.min(Math.max(n.left,i),n.right),o=Math.min(Math.max(n.top,o),n.bottom),t[1].x-t[0].x),s=t[1].y-t[0].y;return Math.abs(t[0].x-i)<40&&Math.abs(t[1].x-i)<40&&Math.abs(s)>3*Math.abs(a)&&r.settings.showYAxis?"y":Math.abs(t[0].y-o)<40&&Math.abs(t[1].y-o)<40&&Math.abs(a)>3*Math.abs(s)&&r.settings.showXAxis?"x":"both"}}(t)),e.grapher.scaleAxis})(s),e.applyScaleTouchChanges(r,s);else if(1===r.length&&e.isScalingEnabled){e.updateMouse(t);var l,c,u=e.grapher.scaleAxis,d=e.getProjection().mathToPixels.mapPoint(g(0,0)),p=i?1:-1,f=o?1:-1;if("x"!==u&&"both"!==u||(l=e.mousePt.x>d.x+5*p),"y"!==u&&"both"!==u||(c=e.mousePt.y>d.y+5*f),"x"===u&&i!==l)return;if("y"===u&&o!==c)return;if("both"===u&&i!==l&&o!==c)return;e.applyScaleTouchChanges(r,s)}else a();1===r.length&&e.applyPanTouchChanges(r,s),e.controller.dispatch({type:"grapher/drag-move"}),r=s}},c=function(i){n&&(e.cancelAnimation(),r=h(i.touches,e.$.offset()),0===i.touches.length&&(n=!1,e.grapher.isDragging=!1,t(document).off(".graphdrag"),e.grapher.debounceUserRequestedViewportChange(),e.controller.dispatch({type:"grapher/drag-end"})),0!==i.touches.length&&(1!==i.touches.length||e.isScalingEnabled)||a())};this.$.on("dcg-tapstart",(function(r){var a,s,u=e.getProjection();u.settings.config.lockViewport||r.wasHandled()||n||r.touches.length===r.changedTouches.length&&(n=!0,e.grapher.isDragging=!0,e.updateMouse(r),a=u.mathToPixels.mapPoint(g(0,0)),"x"!==(s=e.grapher.scaleAxis)&&"both"!==s||(i=e.mousePt.x>a.x),"y"!==s&&"both"!==s||(o=e.mousePt.y>a.y),e.controller.dispatch({type:"grapher/drag-start"}),t(document).on("dcg-tapmove.graphdrag",l),t(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",c))})),this.$.on("dblclick",this.handleDoubleClick.bind(this)),t(window).on("keydown.viewportcontroller-"+this.__id,function(e){var t;this.getProjection().settings.config.lockViewport||(u.lookup(e)!==u.SHIFT||(t=e).altKey||t.ctrlKey||t.metaKey?s():(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()))}.bind(this)),t(window).on("keyup.viewportcontroller-"+this.__id+" blur.viewportcontroller-"+this.__id,s)},e.zoom=function(e){var t,r,i=this.getProjection().pixelCoordinates;"in"===e?(this.animateTransformation(o.scaleAtPoint(f(i),2)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-in"))):"out"===e?(this.animateTransformation(o.scaleAtPoint(f(i),.5)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-out"))):"default"===e?(t=this.getDefaultViewport(),this.animateTransformation(this.getCustomZoomTransformation(t)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-default"))):"square"===e&&(r=this.getSquareViewport(),this.animateTransformation(this.getCustomZoomTransformation(r)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-square")))},e.zoomCustom=function(e){this.animateTransformation(this.getCustomZoomTransformation(e)),n.alert(this.s("graphing-calculator-narration-viewport-updated"))},e.getCustomZoomTransformation=function(e){var t=this.getProjection().viewport,r=this.getProjection().pixelCoordinates,n=this.getProjection().mathCoordinates,i=(t.xmax-t.xmin)/(e.xmax-e.xmin),a=(t.ymax-t.ymin)/(e.ymax-e.ymin),s=o.fromRects(n,r),l=new o.translate(s.mapPoint({x:0,y:0}),{x:0,y:0}),c=new o.scale(i,a),u=o.fromRects({left:e.xmin,right:e.xmax,bottom:e.ymin,top:e.ymax},r);return new o.translate({x:0,y:0},u.mapPoint({x:0,y:0})).compose(c.compose(l))},e.isZoomRestored=function(){var e=this.getProjection(),t=e.viewport,r=this.getDefaultViewport();return e.settings.squareAxes&&Math.abs((t.xmin-r.xmin)/t.xmin)<.05&&Math.abs((t.xmax-r.xmax)/t.xmax)<.05&&Math.abs((t.ymin-r.ymin)/t.ymin)<.05&&Math.abs((t.ymax-r.ymax)/t.ymax)<.05},e.getViewportForScreen=function(e,t,r){return r?"y"==this.getProjection().settings.lastChangedAxis?e.squareXAxis(t):e.squareYAxis(t):e},e.getSquareViewport=function(){var e=this.getProjection();return this.getViewportForScreen(e.viewport,e.screen,!0)},e.enforceSquareAxes=function(){var e=this.getProjection();e.settings.squareAxes&&(e.viewport.isSquare(e.screen)||this.setViewport(this.getViewportForScreen(e.viewport,e.screen,!0)))}}))})),i("geometry/math/hypot",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function n(e){return e===1/0||e===-1/0}t.default=r?Math.hypot:function(e,t){if(n(e)||n(t))return 1/0;if(isNaN(e)||isNaN(t))return NaN;if(0===e&&0===t)return 0;if(Math.abs(e)>Math.abs(t)){var r=t/e;return Math.abs(e)*Math.sqrt(r*r+1)}return r=e/t,Math.abs(t)*Math.sqrt(r*r+1)}})),i("lib/priority-queue",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n.prototype.size=function(){return this._data.length},n.prototype.queue=function(e){var t=this._data.length;for(this._data.push(e);0<t;){var r=t-1>>>1;if(!(this.comparator(this._data[t],this._data[r])<0))break;var n=this._data[r];this._data[r]=this._data[t],this._data[t]=n,t=r}},n.prototype.dequeue=function(){var e=this._data[0],t=this._data.pop();if(0<this._data.length&&void 0!==t){this._data[0]=t;for(var r=0,n=this._data.length-1;;){var i=1+(r<<1),o=1+i,a=r;if(i<=n&&this.comparator(this._data[i],this._data[a])<0&&(a=i),o<=n&&this.comparator(this._data[o],this._data[a])<0&&(a=o),a===r)break;var s=this._data[a];this._data[a]=this._data[r],this._data[r]=s,r=a}}return e},n.prototype.peek=function(){return this._data[0]},n.prototype.clear=function(){this._data.length=0},n);function n(e){this.comparator=e,this._data=[]}t.default=r})),i("geometry/math/polygon-area-support",["require","exports","lib/priority-queue","bugsnag"],(function(e,t,r,n){"use strict";function i(e,t){var r=e.pt2.y-e.pt1.y,n=e.pt1.x-e.pt2.x,i=t.pt2.y-t.pt1.y,o=t.pt1.x-t.pt2.x,a=r*e.pt1.x+n*e.pt1.y,s=i*t.pt1.x+o*t.pt1.y,l=r*o-i*n;if(0!=l)return(r*s-i*a)/l}function o(e,t,r){if(r.scanlineX<t.scanlineX&&n.notify("PolygonArea: rightEdge should not be left of leftEdge!",{metaData:{scanlineY:e,leftEdge:t,rightEdge:r}}),!(r.xSlope>=t.xSlope)){if(t.scanlineX===r.scanlineX)return e;var o=t.pt2.y>t.pt1.y?t.pt2:t.pt1,a=r.pt2.y>r.pt1.y?r.pt2:r.pt1,l=o.y;if(a.y<o.y){if(s(l=a.y,t)<a.x)return}else if(o.y<a.y){var c=s(l,r);if(o.x<c)return}else if(o.x<a.x)return;var u=i(t,r);if(void 0!==u)return Math.max(Math.min(u,l),e)}}function a(e,t,r,n){if(r&&n){if(r.id<n.id){if(r.skipIntersectionWith[n.id])return}else if(n.skipIntersectionWith[r.id])return;var i=o(e,r,n);void 0!==i&&(r.id<n.id?r.skipIntersectionWith[n.id]=!0:n.skipIntersectionWith[r.id]=!0,t.queue({type:"x",y:i,edge1:r,edge2:n}))}}function s(e,t){var r=t.pt1.x,n=t.pt2.x,i=t.pt1.y,o=t.pt2.y;if(i===e)return r;if(o===e)return n;var a=(e-i)/(o-i),s=(1-a)*r+a*n;if(r<n){if(s<=r)return r;if(n<=s)return n}else{if(s<=n)return n;if(r<=s)return r}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.processEvent=t.setupEventQueueAndActiveEdges=t.measureUpwardNonZeroLength=t.measureUpwardEvenOddLength=t.measureDownwardNonZeroLength=t.measureDownwardEvenOddLength=t.computeScanlineX=t.checkForEdgeIntersection=t._stableYIntersectEdges=t._unstableYIntersectEdges=void 0,t._unstableYIntersectEdges=i,t._stableYIntersectEdges=o,t.checkForEdgeIntersection=a,t.computeScanlineX=s,t.measureDownwardEvenOddLength=function(e){for(var t=0,r=0,n=!1,i=0,o=e;i<o.length;i++){var a=o[i].scanlineX;n?(n=!1,t+=a-r):(n=!0,r=a)}return t},t.measureDownwardNonZeroLength=function(e){for(var t=0,r=0,n=!1,i=0,o=0,a=e;o<a.length;o++){var s=a[o],l=s.scanlineX;s.isClockwise?i+=1:--i,0===i||n?0===i&&n&&(n=!1,t+=l-r):(n=!0,r=l)}return t},t.measureUpwardEvenOddLength=function(e,t){for(var r=0,i=0,o=!1,a=-1/0,l=0,c=t;l<c.length;l++){var u=c[l],d=s(e,u);d<a?(d-a<-1e-4&&n.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:e,edge:u,minScanlineX:a,scanlineX:d}}),d=a):a=d,u.scanlineX=d,o?(o=!1,r+=d-i):(o=!0,i=d)}return r},t.measureUpwardNonZeroLength=function(e,t){for(var r=0,i=0,o=!1,a=0,l=-1/0,c=0,u=t;c<u.length;c++){var d=u[c],p=s(e,d);p<l?(p-l<-1e-4&&n.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:e,edge:d,minScanlineX:l,scanlineX:p}}),p=l):l=p,d.scanlineX=p,d.isClockwise?a+=1:--a,0===a||o?0===a&&o&&(o=!1,r+=p-i):(o=!0,i=p)}return r},t.setupEventQueueAndActiveEdges=function(e){for(var t=1,n=new r.default((function(e,t){return e.y-t.y})),i=e.length-1;1<=i;i--){var o=e[i],a=e[i-1],s={id:t++,pt1:o,pt2:a,scanlineX:0,xSlope:1/0,isClockwise:a.y>o.y,skipIntersectionWith:{}};a.y>o.y?(n.queue({type:"+",y:o.y,edge:s}),n.queue({type:"-",y:a.y,edge:s}),s.xSlope=(a.x-o.x)/(a.y-o.y),s.scanlineX=o.x):o.y>a.y&&(n.queue({type:"+",y:a.y,edge:s}),n.queue({type:"-",y:o.y,edge:s}),s.xSlope=(o.x-a.x)/(o.y-a.y),s.scanlineX=a.x)}return{activeEdges:[],events:n}},t.processEvent=function(e,t,r){var n,i,o,s,l,c,u,d,p,h,g,f,m,y;"x"===e.type?(d=t,p=r,h=(u=e).edge1,g=u.edge2,f=u.y,y=(m=p.indexOf(h))+1,-1===m||p[y]!==g?h.id<g.id?delete h.skipIntersectionWith[g.id]:delete g.skipIntersectionWith[h.id]:(p[m]=g,p[y]=h,a(f,d,p[m-1],g),a(f,d,h,p[y+1]))):"+"===e.type?function(e,t,r){for(var n=e.edge,i=e.y,o=n.xSlope,s=n.scanlineX,l=0;l<r.length;l++){var c=r[l];if(s<c.scanlineX)break;if(s===c.scanlineX&&o<=c.xSlope)break}r.splice(l,0,n),a(i,t,r[l-1],n),a(i,t,n,r[l+1])}(e,t,r):"-"===e.type&&(i=t,o=r,s=(n=e).edge,l=n.y,c=o.indexOf(s),o.splice(c,1),a(l,i,o[c-1],o[c]))}})),i("geometry/math/polygon",["require","exports","./hypot","bugsnag","./polygon-area-support"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePaintedNonZeroArea=t.calculatePaintedEvenOddArea=t.calculateSimpleArea=t.calculatePerimeter=t.pointIsWithinNonZeroFill=t.pointIsWithinEvenOddFill=void 0,t.pointIsWithinEvenOddFill=function(e,t){if(!e)return!1;for(var r=t.x,n=t.y,i=!1,o=e.length-1;3<=o;o-=2){var a=e[o-3],s=e[o-2],l=e[o-1],c=e[o];n<s!=n<c&&r<(l-a)*(n-s)/(c-s)+a&&(i=!i)}return i},t.pointIsWithinNonZeroFill=function(e,t){if(!e)return!1;for(var r=t.x,n=t.y,i=0,o=e.length-1;3<=o;o-=2){var a=e[o-3],s=e[o-2],l=e[o-1],c=e[o];n<s!=n<c&&r<(l-a)*(n-s)/(c-s)+a&&(c<s?i+=1:s<c&&--i)}return 0!==i},t.calculatePerimeter=function(e){for(var t=0,n=0;n<e.length-1;n++)t+=r.default(e[n].x-e[n+1].x,e[n].y-e[n+1].y);return t},t.calculateSimpleArea=function(e){for(var t=0,r=0;r<e.length-1;r++)t+=e[r].x*e[r+1].y-e[r].y*e[r+1].x;return Math.abs(t)/2},t.calculatePaintedEvenOddArea=function(e){if(e.length<4)return 0;if(e[0].x!==e[e.length-1].x||e[0].y!==e[e.length-1].y)return 0;var t=i.setupEventQueueAndActiveEdges(e),r=t.events,o=t.activeEdges,a=r.peek();if(!a)return 0;for(var s,l=0,c=a.y,u=0;s=r.dequeue();){var d=s.y;d<c&&n.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:e,scanlineY:d,lastScanlineY:c}}),u+=.5*(d-c)*(i.measureUpwardEvenOddLength(d,o)+l),i.processEvent(s,r,o),c=d,l=i.measureDownwardEvenOddLength(o)}return u},t.calculatePaintedNonZeroArea=function(e){if(e.length<4)return 0;if(e[0].x!==e[e.length-1].x||e[0].y!==e[e.length-1].y)return 0;var t=i.setupEventQueueAndActiveEdges(e),r=t.events,o=t.activeEdges,a=r.peek();if(!a)return 0;for(var s,l=0,c=a.y,u=0;s=r.dequeue();){var d=s.y;d<c&&n.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:e,scanlineY:d,lastScanlineY:c}}),u+=.5*(d-c)*(i.measureUpwardNonZeroLength(d,o)+l),i.processEvent(s,r,o),c=d,l=i.measureDownwardNonZeroLength(o)}return u}})),i("graphing/poicontroller",["require","jquery","core/math/distance","lib/rounding","core/types/graphmode","lib/conditional_blur","keys","lib/aria","core/lib/label","expressions/colors","graphing-calc/models/image","graphing-calc/models/expression","../geometry/math/polygon"],(function(e){"use strict";var t=e("jquery"),r=e("core/math/distance"),n=e("lib/rounding"),i=e("core/types/graphmode"),o=e("lib/conditional_blur").default,a=e("keys"),s=e("lib/aria"),l=e("core/lib/label"),c=e("expressions/colors").getColorName,u=e("graphing-calc/models/image"),d=e("graphing-calc/models/expression"),p=e("../geometry/math/polygon"),h=0;function g(e,t){this.manager=e,this.controller=e.controller,this.graphSettings=t,this.$=this.manager.$,this.__id=h++,this.graphSettings.config.graphpaper&&!this.graphSettings.config.disableMouseInteractions&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler(),this.addManualUnhoverListener())}return g.prototype.getExpressionModel=function(e){return this.controller.getItemModel(e)},g.prototype.remove=function(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener()},g.prototype.addGlobalMouseListener=function(e,r){for(var n=e.split(" "),i=0;i<n.length;i++)t(document).on(n[i]+".dcg-poiController-"+this.__id,r)},g.prototype.removeAllGlobalMouseListeners=function(){t(document).off(".dcg-poiController-"+this.__id)},g.prototype.getToleranceByDevice=function(e){return"touch"===e?20:10},g.prototype.addHoverEventHandler=function(){this.$.on("dcg-tapmove",function(e){var r,n,i,o,a,s,l,c,d,p,h,g;"touch"!==e.device&&(r=t(document.elementFromPoint(e.clientX,e.clientY)).closest(".dcg-grapher").length,n=this.manager.poiLabelsLayer,i=this.getMouseRelativeToGrapher(e),o=this.getToleranceByDevice(e.device),r&&(a=this.getFeatureUnderPoint(i,o)),a&&"movable-point"===a.type&&(s=a.poi.getMovablePoint().id),a&&a.isClickable&&(this.manager.movablePointsLayer.isMovingPoint()||this.manager.traceLayer.isTracing()||(l=a.model)),this.manager.clickableObjectsLayer.setHoveredId(l&&l.id),a&&"poi"===a.type&&(a.poi.isAttachedToPlottedPoint()&&!a.poi.hasInteractiveLabel()||(c=a.poi)),c!==n.getHoveredPOI()&&(this.controller.isTraceEnabled()?n.setHoveredPOI(c):n.setHoveredPOI(void 0),this.manager.redrawAllLayers()),h=!1,a&&"image"===a.type&&(d=u.isActuallyDraggable(a.model),p=a.isClickable,h=d&&!p),g=!1,a&&"draggable-label"===a.type&&(g=!0),h||g?this.manager.setLayerClass("extraMoveCursor","dcg-mouse-over-movable-point"):this.manager.setLayerClass("extraMoveCursor",""),this.manager.movablePointsLayer.setHoveredPointId(s))}.bind(this))},g.prototype.addManualUnhoverListener=function(){var e=function(){var e=this.manager;e.poiLabelsLayer.setHoveredPOI(void 0),e.clickableObjectsLayer.setHoveredId(void 0),e.redrawAllLayers()}.bind(this);t(window).on("blur.dcg-poiController-"+this.__id,e),this.$.on("mouseleave",e)},g.prototype.removeManualUnhoverListener=function(){t(window).off(".dcg-poiController-"+this.__id)},g.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(e){var t=this.getMouseRelativeToGrapher(e),r=this.getToleranceByDevice(e.device);this.getFeatureUnderPoint(t,r)&&(e.preventDefault(),e.handle())}.bind(this)),this.$.on("touchstart",function(e){var r,n,i;this.graphSettings.config.lockViewport?(r=this.getMouseRelativeToGrapher(e.originalEvent),n=this.getToleranceByDevice(e.device),(i=this.getFeatureUnderPoint(r,n))&&("image"!==i.type||i.model.selected||u.isActuallyDraggable(i.model))&&("sketch-branch"===i.type&&this.graphSettings.config.onlyTraceSelected&&!i.sketch.selected||e.preventDefault())):t(e.target).is(":not(input, textarea)")&&e.preventDefault()}.bind(this)),this.$.on("dcg-tapstart",function(e){var t=this.getMouseRelativeToGrapher(e),r=this.getToleranceByDevice(e.device),n=this.getFeatureUnderPoint(t,r);if(n&&n.isClickable?this.manager.clickableObjectsLayer.setPressedId(n.model.id):this.manager.clickableObjectsLayer.setPressedId(void 0),n&&"editable-label"===n.type)e.handle();else{if(o(),n&&"draggable-label"===n.type)return this.startMovingPoint({type:"draggable-label",label:n.label,startScreenPt:t}),void e.handle();if(n&&"image"===n.type&&u.isActuallyDraggable(n.model)){var i=!1;if(n.isClickable&&(i=!0),this.startMovingPoint({type:"image",image:n.model,startScreenPt:t,shouldDelayUntilRealMove:i}),!i)return void e.handle()}if(n&&"movable-point"===n.type)return this.startMovingPoint({type:"poi",poi:n.poi,startScreenPt:t}),e.handle(),void e.handle("do-not-clear-poi-labels");if(this._togglePOIUnderPoint(t,r))return e.handle(),void e.handle("do-not-clear-poi-labels");if(n&&"sketch-branch"===n.type&&!n.isClickable){if(!this.graphSettings.config.onlyTraceSelected){var a=!this.controller.isTraceEnabled(),s=!this.controller.isListEnabled();if(a&&s)return;if(this.controller.dispatch({type:"set-selected-id",id:n.sketch.id}),a)return;return this.startTracingBranch(n.branchInfo,t),e.handle(),void e.handle("do-not-clear-poi-labels")}if(n.sketch.selected)return this.startTracingBranch(n.branchInfo,t),e.handle(),void e.handle("do-not-clear-poi-labels")}n&&"image"===n.type||this.controller.dispatch({type:"set-none-selected"});var l=this;this.addGlobalMouseListener("dcg-tapmove",function(e){this.manager.clickableObjectsLayer.isAnObjectPressed()?t=this.getMouseRelativeToGrapher(e):l.removeAllGlobalMouseListeners()}.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(e){l.removeAllGlobalMouseListeners();var n=this.manager.clickableObjectsLayer.getPressedId();this.manager.clickableObjectsLayer.setPressedId(void 0);var i=this.getFeatureUnderPoint(t,r);i&&i.isClickable?i.model.id!==n||e.wasHandled("dragged-clickable-object")||this.controller.dispatch({type:"clickable-item-clicked",id:i.model.id}):(i&&"sketch-branch"===i.type&&!i.sketch.selected||i&&"image"===i.type)&&this.controller.dispatch({type:"set-selected-id",id:i.model.id})}.bind(this))}}.bind(this))},g.prototype.addKeydownEventHandler=function(){this.$.on("keydown",function(e){var t,r,n=this.manager.movablePointsLayer.getFocusedPoint();n&&(t=a.lookup(e),r=a.lookupChar(e),"Up"===t||"Down"===t||"Left"===t||"Right"===t?(e.stopPropagation(),e.preventDefault(),this.movePointFromKeyboard(n,e)):"X"!==r&&"Y"!==r&&"L"!==r&&"C"!==r||this.speakPoint(n,r))}.bind(this))},g.prototype.getMouseRelativeToGrapher=function(e){var t=this.$[0].getBoundingClientRect(),r=e.touches?e.touches[0]:e;return{x:r.clientX-t.left,y:r.clientY-t.top}},g.prototype._getClosestPoint=function(e,t,n){for(var i=n,o=null,a=this.manager.getProjection(),s=0;s<e.length;s++){var l=e[s],c=a.map_pt(l),u=r.hypot(c.x-t.x,c.y-t.y);u<i&&(i=u,o=l)}return o},g.prototype.getFeatureUnderPoint=function(e,t){var r=this.manager.poiLabelsLayer,n=this.manager.getProjection(),i=n.reverse_map_pt(e);if(!this.manager.scaleAxis){var o=r.getInteractiveLabelUnderPoint(e);if(o){if("editable"===o.type)return{type:"editable-label",model:o.model};if("draggable"===o.type)return{type:"draggable-label",label:o.label}}for(var a,s=this.manager.__sketchOrder,l={},c=1,p=s.length-1;0<=p;p--){var h=s[p],f=this.controller.getItemModel(h),m=c;if(l[h]=m,f)if("expression"===f.type){var y=this.manager.getGraphSketch(h);if(!y||!y.visible)continue;var v=y.branches;if(!v||!v.length)continue;if(y.showHighlight&&(m=-1/0,l[h]=m),!a||a.stackingContext>=m)for(var b=d.isClickableObject(f),x=0;x<v.length;x++){var w,S=g.calculateDistanceFromBranch(v[x],i,n,b);S<t&&(w=!1,(!a||m<a.stackingContext||m===a.stackingContext&&S<a.distance)&&(w=!0),w&&(a={type:"sketch-branch",model:f,sketch:y,distance:S,stackingContext:m,branchInfo:{id:y.id,branch:x,sketch:y}}))}}else if("image"===f.type){var E=this.manager.getGraphImage(h);if(!E||!this.isImageUnderMouse(E,i,t))continue;E.foreground?(m=c+=1,l[h]=m,c+=1):(m=1/0,l[h]=m),(!a||a.stackingContext>m)&&(a={type:"image",model:E,distance:0,stackingContext:m})}}var _=[],k=[],M=[],I=a?a.stackingContext:1/0;this.manager.poiDotsLayer.getDrawnPOI().forEach((function(e){e.isBareLabel()||(e.isMovable()?_.push(e):e.isAttachedToPlottedPoint()?l[e.sketch.id]<=I&&k.push(e):M.push(e))}));var C=this._getClosestPoint(_,e,t);if(C)return{type:"movable-point",poi:C};var L=this._getClosestPoint(M,e,t);if(L)return{type:"poi",poi:L};var P=this._getClosestPoint(k,e,t);if(P){var T=this.controller.getItemModel(P.sketch.id);return T&&"expression"===T.type&&d.isClickableObject(T)?{type:"poi",poi:P,isClickable:!0,model:T}:{type:"poi",poi:P}}return a?"sketch-branch"===a.type?{type:"sketch-branch",branchInfo:a.branchInfo,sketch:a.sketch,model:a.model,isClickable:d.isClickableObject(a.model)}:{type:"image",model:a.model,isClickable:u.isClickableObject(a.model)}:void 0}},g.prototype._togglePOIUnderPoint=function(e,t){if(this.controller.isTraceEnabled()){var r=this.getFeatureUnderPoint(e,t);if(!r)return!1;if(r.isClickable)return!1;var n=r.poi;return!!n&&!n.isBareLabel()&&(this.manager.poiLabelsLayer.isOpenPOI(n)?(this.manager.poiLabelsLayer.closePOI(n),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(n),this.speakPoint(n)),this.manager.redrawAllLayers(),!0)}},g.prototype.isImageUnderMouse=function(e,t,r){if(!e)return!1;var n=e.formula;if(!n)return!1;var i=n.dimensions;if(!i.x||!i.y||!i.width||!i.height||!e.shouldGraph||this.controller.isItemSecret(e.id)&&!e.draggable)return!1;for(var o=0;o<i.x.length;o++){var a=i.x[o],s=i.y[o],l=i.radianAngle[o],c=a+Math.cos(l)*(t.x-a)-Math.sin(l)*(t.y-s),u=s+Math.sin(l)*(t.x-a)+Math.cos(l)*(t.y-s),d=.5*Math.abs(i.width[o]),p=.5*Math.abs(i.height[o]);if(a-d<c&&c<a+d&&s-p<u&&u<s+p)return!0}return!1},g.calculateDistanceFromBranch=function(e,t,r,n){if(e&&e.graphMode===i.POLYGONFILL&&n){for(var o=e.segments,a=0;a<o.length;a++)if(p.pointIsWithinNonZeroFill(o[a],t))return 0;return 1/0}var s=g.getBranchesDistanceInfo(e,t,r,n);return s?s.minDistance:1/0},g.getBranchesDistanceInfo=function(e,t,n,o){var a=n.screen.width/(n.viewport.xmax-n.viewport.xmin),s=n.screen.height/(n.viewport.ymax-n.viewport.ymin),l=t.x,c=t.y,u=!1,d=!1;switch(e.graphMode){case i.PARAMETRIC:case i.IMPLICIT:if(!o)return null;break;case i.POLAR:if(!o)return null;d=!0;break;case i.Y:break;case i.X:u=!0;var p=l;l=c,c=p,p=a,a=s,s=p;break;default:return null}for(var h,g,f=1/0,m=1/0,y=0;y<e.segments.length;y++)for(var v=e.segments[y],b=0;b<v.length-3;b+=2){var x,w,S,E,_=v[b],k=v[b+1],M=v[b+2],I=v[b+3];d&&(w=_,_=(x=k)*Math.cos(w),k=x*Math.sin(w),E=M,M=(S=I)*Math.cos(E),I=S*Math.sin(E));var C=r.closestPointOnSegment(0,0,(_-l)*a,(k-c)*s,(M-l)*a,(I-c)*s),L=r.hypot(C[0],C[1]);C[0]<0?L<f&&(f=L,h=C):L<m&&(m=L,g=C)}var P=f<m?h:g;if(!P)return null;var T=P[0]/a+l,A=P[1]/s+c;return{closestPoint:{x:u?A:T,y:u?T:A},minDistance:Math.min(f,m),secondDistance:Math.max(f,m)}},g.getBranchesTracePoint=function(e,t,r){if(e&&e.compiled&&e.compiled.fn){var o=e.compiled.fn,a=r.screen.width/(r.viewport.xmax-r.viewport.xmin),s=r.screen.height/(r.viewport.ymax-r.viewport.ymin),l=this.getBranchesDistanceInfo(e,t,r,!1);if(!l)return null;var c=l.minDistance/l.secondDistance;c*=c;var u=e.graphMode===i.Y?"x":"y",d=l.closestPoint[u]*(1-c)+t[u]*c,p=1/(2*a),h=1/(2*s),f=o(d-p),m=o(d),y=o(d+p),v=p*Math.min(1,h/Math.abs(f-m)),b=p*Math.min(1,h/Math.abs(y-m));isFinite(v)||(v=p),isFinite(b)||(b=p),d=n.shortestDecimalBetween(d-v,d+b);var x=g.fillHole(o,d,a,s,t.x,t.y);return{x:e.graphMode===i.Y?d:x,y:e.graphMode===i.Y?x:d}}},g.prototype.startMovingPoint=function(e){var t=!1,r=!1;function n(){return"poi"===e.type?e.poi.getMovablePoint():"image"===e.type?{sketch:{id:e.image.formula.center_reference_id}}:"draggable-label"===e.type?{sketch:{id:e.label.model.id}}:void 0}var i,o=n(),a=this.controller;function s(){r=!0,a.dispatch({type:"start-moving-point",pointInfo:o})}e.shouldDelayUntilRealMove||s(),"poi"===e.type?i=e.poi:"image"===e.type?i={x:e.image.formula.dimensions.x[0],y:e.image.formula.dimensions.y[0]}:"draggable-label"===e.type&&(i={x:e.label.x,y:e.label.y});var l=this.manager.getProjection().map_pt(i),c=e.startScreenPt.x-l.x,u=e.startScreenPt.y-l.y,d=e.poi;"poi"===e.type&&this.manager.movablePointsLayer.setPressedPointId(d.isMovable()?d.getMovablePoint().id:void 0);var p=null,h=function(){var e,i;p&&(r||s(),t=!0,e=this.manager.getProjection(),i=this.getMouseRelativeToGrapher(p),p=null,this.controller.dispatch({type:"on-move-point",pointInfo:n(),screenPt:{x:i.x-c,y:i.y-u},projection:e}))}.bind(this);this.manager.registerMovablePointListener(h),this.addGlobalMouseListener("dcg-tapmove",(function(e){p=e})),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(i){var o,a,s;h(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),r&&(i.handle("dragged-clickable-object"),this.controller.dispatch({type:"stop-moving-point",pointInfo:n()})),"poi"===e.type&&(t||(o=this.manager.getProjection(),a=this.getToleranceByDevice(i.device),s=o.map_pt(d),this._togglePOIUnderPoint(s,a)))}.bind(this))},g.prototype.startTracingBranch=function(e,t){this.manager.markLabelsDirty(),this.last_screen_pt=t;var r=this.manager.getProjection(),n=r.reverse_map_pt(t),i=e.sketch.branches[e.branch],o=g.getBranchesTracePoint(i,n,r);o&&this.speakPoint(o),this.manager.traceLayer.setTraceInfo({pt:o,branchInfo:e}),this.manager.redrawAllLayers(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))},g.prototype.stopTracingBranch=function(e){this.manager.markLabelsDirty();var t=this.manager.poiLabelsLayer.getHoveredPOI();t&&!this.manager.poiLabelsLayer.isOpenPOI(t)&&(this.manager.poiLabelsLayer.openPOI(t),this.speakPoint(t),this.manager.redrawAllLayers()),this.last_screen_pt=null,this.manager.traceLayer.setTraceInfo(void 0),this.manager.redrawAllLayers(),this.removeAllGlobalMouseListeners()},g.prototype.handleTraceUpdate=function(e){if(this.manager.traceLayer.traceInfo){var t,r=this.manager.getProjection();if(e)t=this.getMouseRelativeToGrapher(e),this.last_screen_pt=t,this.manager.markLabelsDirty();else{if(!this.last_screen_pt)return;t=this.last_screen_pt}var n=r.reverse_map_pt(t),i=1/0,o=-1,a=this.manager.traceLayer.traceInfo,s=this.manager.graphSketches[a.branchInfo.sketch.id];if(s){a.branchInfo.sketch=s;for(var l=a.branchInfo.sketch.branches,c=0;c<l.length;c++){var u=g.calculateDistanceFromBranch(l[c],n,r,!1);u<i&&(o=c,i=u)}var d=l[o],p=d?g.getBranchesTracePoint(d,n,r):null;p&&this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=o,this.manager.traceLayer.traceInfo.pt=p,this.manager.redrawAllLayers()}}},g.prototype.speakPoint=function(e){var t=this.manager.getAudioTrace();t&&e&&t.queueCoordinates(e,void 0,!0)},g.fillHole=function(e,t,n,i,o,a){var s=e(t);if(isFinite(s))return s;var l=t-1e-11,c=t+1e-11,u=e(l),d=e(c);if(isNaN(u)&&isNaN(d))return NaN;if(isNaN(u))return d;if(isNaN(d))return u;var p=(o-l)*n,h=(o-c)*n,g=(a-u)*i,f=(a-d)*i;return r.hypot(p,g)<r.hypot(h,f)?u:d},g.prototype.hasNonlinearMoveStrategy=function(e){if(!e||!e.sketch)return!1;var t=this.getExpressionModel(e.sketch.id);if(!t||!t.formula)return!1;var r=t.formula.move_strategy;return!(!r||!r[0])&&"updateSliderNonlinear"===r[0].type},g.prototype.movePointFromKeyboard=function(e,t){var r,n,i,o,s,l,c,u,d,p;e&&t&&"movable-point"===e.type&&(n=(r=this.manager.getProjection()).map_pt({x:e.x,y:e.y}),o=i=0,s=t.shiftKey?10:2,l=t.shiftKey?"big":"","Up"===(u=a.lookup(t))?(c="y",o-=s,l+="up"):"Down"===u?(c="y",o+=s,l+="down"):"Left"===u?(c="x",i-=s,l+="down"):"Right"===u&&(c="x",i+=s,l+="up"),0===i&&0===o||(d={x:n.x+i,y:n.y+o},"x"===c||this.hasNonlinearMoveStrategy(e)?p={x:l}:"y"===c&&(p={y:l}),this.controller.dispatch({type:"on-move-point",pointInfo:e,screenPt:d,projection:r,keyboardDirection:p})))},g.prototype.speakPoint=function(e,t){if(e&&this.manager.getAudioTrace()){var r=this.manager.getProjection();if(r){var n=r.viewport;switch(t){case"X":s.alert("X: "+l.value(e.x,n.xmax-n.xmin).ariaString);break;case"Y":s.alert("Y: "+l.value(e.y,n.ymax-n.ymin).ariaString);break;case"L":s.alert(e.ariaLabel||this.controller.s("graphing-calculator-narration-poi-graph-point"));break;case"C":s.alert(c(this.controller,e.sketch.color))}}}},g})),i("vendor/canvas2svg",[],(function(){"use strict";var e,t,r,n,i;function o(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++)e=e.replace(new RegExp("\\{"+r[n]+"\\}","gi"),t[r[n]]);return e}function a(e){var t,r,n;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{for(r="",n=0;n<12;n++)r+=t[Math.floor(Math.random()*t.length)]}while(e[r]);return r}function s(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}return i=function(e,t){var r,n,i,o={};for(e=e.split(","),t=t||10,r=0;r<e.length;r+=2)n="&"+e[r+1]+";",i=parseInt(e[r],t),o[n]="&#"+i+";";return o["\\xa0"]="&#160;",o}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(r=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var r,n=this.__ctx.__createElement("stop");n.setAttribute("offset",e),-1!==t.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),n.setAttribute("stop-color",o("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),n.setAttribute("stop-opacity",r[4])):n.setAttribute("stop-color",t),this.__root.appendChild(n)},n=function(e,t){this.__root=e,this.__ctx=t},(t=function(e){var r,n={width:500,height:500,enableMirroring:!1};if(1<arguments.length?((r=n).width=e,r.height=arguments[1]):r=e||n,!(this instanceof t))return new t(r);this._randomPostfix="-"+"xxxxxxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)})),this._svgClassNames=[],this.width=r.width||n.width,this.height=r.height||n.height,this.enableMirroring=void 0!==r.enableMirroring?r.enableMirroring:n.enableMirroring,(this.canvas=this).__document=r.document||document,r.ctx?this.__ctx=r.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(e,t,r){void 0===t&&(t={});var n,i,o=this.__document.createElementNS("http://www.w3.org/2000/svg",e),a=Object.keys(t);for(r&&(o.setAttribute("fill","none"),o.setAttribute("stroke","none")),n=0;n<a.length;n++)i=a[n],o.setAttribute(i,t[i]);var s=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return s&&o.setAttribute("class",s),o},t.prototype.__setDefaultStyles=function(){for(var t,r=Object.keys(e),n=0;n<r.length;n++)this[t=r[n]]=e[t].canvas},t.prototype.__applyStyleState=function(e){for(var t,r=Object.keys(e),n=0;n<r.length;n++)this[t=r[n]]=e[t]},t.prototype.__getStyleState=function(){for(var t,r={},n=Object.keys(e),i=0;i<n.length;i++)r[t=n[i]]=this[t];return r},t.prototype.__applyStyleToCurrentElement=function(t){var i=this.__currentElement,a=this.__currentElementsToStyle;a&&(i.setAttribute(t,""),i=a.element,a.children.forEach((function(e){e.setAttribute(t,"")})));for(var s,l,c,u,d=Object.keys(e),p=0;p<d.length;p++)if(s=e[d[p]],l=this[d[p]],s.apply)if(l instanceof n){if(l.__ctx)for(;l.__ctx.__defs.childNodes.length;)c=l.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[c]=c,this.__defs.appendChild(l.__ctx.__defs.childNodes[0]);i.setAttribute(s.apply,o("url(#{id})",{id:l.__root.getAttribute("id")}))}else if(l instanceof r)i.setAttribute(s.apply,o("url(#{id})",{id:l.__root.getAttribute("id")}));else if(-1!==s.apply.indexOf(t)&&s.svg!==l)if("stroke"!==s.svgAttr&&"fill"!==s.svgAttr||-1===l.indexOf("rgba")){var h=s.svgAttr;if("globalAlpha"===d[p]&&(h=t+"-"+s.svgAttr,i.getAttribute(h)))continue;i.setAttribute(h,l)}else{u=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(l),i.setAttribute(s.svgAttr,o("rgb({r},{g},{b})",{r:u[1],g:u[2],b:u[3]}));var g=u[4],f=this.globalAlpha;null!=f&&(g*=f),i.setAttribute(s.svgAttr+"-opacity",g)}},t.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},t.prototype.getSerializedSvg=function(e){var t,r,n,o,a,s=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(s)&&(s=s.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(i),r=0;r<t.length;r++)n=t[r],o=i[n],(a=new RegExp(n,"gi")).test(s)&&(s=s.replace(a,o));return s},t.prototype.getSvg=function(){return this.__root},t.prototype._dcgStartNamedGroup=function(e){var t=this.__createElement("g");t.setAttribute("id",e+this._randomPostfix);var r=this.__closestGroupOrSvg();this.__groupStack.push(r),r.appendChild(t),this.__currentElement=t},t.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])},t.prototype._dcgSaveClassName=function(e){this._svgClassNames.push(e),this.__currentElement&&"path"===this.__currentElement.tagName&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",e))},t.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()},t.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},t.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},t.prototype.__addTransform=function(e){var t,r=this.__closestGroupOrSvg();0<r.childNodes.length&&("path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:r,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath()),t=this.__createElement("g"),r.appendChild(t),this.__currentElement=t);var n=this.__currentElement.getAttribute("transform");n?n+=" ":n="",n+=e,this.__currentElement.setAttribute("transform",n)},t.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(o("scale({x},{y})",{x:e,y:t}))},t.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(o("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},t.prototype.translate=function(e,t){this.__addTransform(o("translate({x},{y})",{x:e,y:t}))},t.prototype.transform=function(e,t,r,n,i,a){this.__addTransform(o("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:r,d:n,e:i,f:a}))},t.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},t.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},t.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},t.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(o("M {x} {y}",{x:e,y:t}))},t.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},t.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},-1<this.__currentDefaultPath.indexOf("M")?this.__addPathCommand(o("L {x} {y}",{x:e,y:t})):this.__addPathCommand(o("M {x} {y}",{x:e,y:t}))},t.prototype.bezierCurveTo=function(e,t,r,n,i,a){this.__currentPosition={x:i,y:a},this.__addPathCommand(o("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:r,cp2y:n,x:i,y:a}))},t.prototype.quadraticCurveTo=function(e,t,r,n){this.__currentPosition={x:r,y:n},this.__addPathCommand(o("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:r,y:n}))},t.prototype.arcTo=function(e,t,r,n,i){var o,a,l,c,u,d,p,h,g,f,m,y,v,b=this.__currentPosition&&this.__currentPosition.x,x=this.__currentPosition&&this.__currentPosition.y;if(void 0!==b&&void 0!==x){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");b===e&&x===t||e===r&&t===n||0===i?this.lineTo(e,t):(o=s([b-e,x-t]),a=s([r-e,n-t]),o[0]*a[1]!=o[1]*a[0]?(l=o[0]*a[0]+o[1]*a[1],c=Math.acos(Math.abs(l)),u=s([o[0]+a[0],o[1]+a[1]]),p=e+(d=i/Math.sin(c/2))*u[0],h=t+d*u[1],g=[-o[1],o[0]],f=[a[1],-a[0]],y=(m=function(e){var t=e[0];return 0<=e[1]?Math.acos(t):-Math.acos(t)})(g),v=m(f),this.lineTo(p+g[0]*i,h+g[1]*i),this.arc(p,h,i,y,v)):this.lineTo(e,t))}},t.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},t.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},t.prototype.rect=function(e,t,r,n){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.closePath()},t.prototype.fillRect=function(e,t,r,n){var i=this.__createElement("rect",{x:e,y:t,width:r,height:n},!0);this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("fill")},t.prototype.strokeRect=function(e,t,r,n){var i=this.__createElement("rect",{x:e,y:t,width:r,height:n},!0);this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},t.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],r=t.childNodes,n=r.length-1;0<=n;n--)r[n]&&t.removeChild(r[n]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)},t.prototype.clearRect=function(e,t,r,n){var i,o;0!==e||0!==t||r!==this.width||n!==this.height?(i=this.__closestGroupOrSvg(),o=this.__createElement("rect",{x:e,y:t,width:r,height:n,fill:"#FFFFFF"},!0),i.appendChild(o)):this.__clearCanvas()},t.prototype.createLinearGradient=function(e,t,n,i){var o=this.__createElement("linearGradient",{id:a(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new r(o,this)},t.prototype.createRadialGradient=function(e,t,n,i,o,s){var l=this.__createElement("radialGradient",{id:a(this.__ids),cx:i+"px",cy:o+"px",r:s+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new r(l,this)},t.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},t.prototype.__wrapTextLink=function(e,t){if(e.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),r.appendChild(t),r}return t},t.prototype.__applyText=function(e,t,r,n){var i,o,a=this.__parseFont(),s=this.__closestGroupOrSvg(),l=this.__createElement("text",{"font-family":a.family,"font-size":a.size,"font-style":a.style,"font-weight":a.weight,"text-decoration":a.decoration,x:t,y:r,"text-anchor":(i=this.textAlign,(o={left:"start",right:"end",center:"middle",start:"start",end:"end"})[i]||o.start)},!0);l.appendChild(this.__document.createTextNode(e)),this.__currentElement=l,this.__applyStyleToCurrentElement(n),s.appendChild(this.__wrapTextLink(a,l))},t.prototype.fillText=function(e,t,r){this.__applyText(e,t,r,"fill")},t.prototype.strokeText=function(e,t,r){this.__applyText(e,t,r,"stroke")},t.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},t.prototype.arc=function(e,t,r,n,i,a){var s,l,c,u,d,p,h;n!==i&&((n%=2*Math.PI)==(i%=2*Math.PI)&&(i=(i+2*Math.PI-.001*(a?-1:1))%(2*Math.PI)),s=e+r*Math.cos(i),l=t+r*Math.sin(i),c=e+r*Math.cos(n),u=t+r*Math.sin(n),d=a?0:1,(h=i-n)<0&&(h+=2*Math.PI),p=a?h>Math.PI?0:1:h>Math.PI?1:0,this.lineTo(c,u),this.__addPathCommand(o("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:p,sweepFlag:d,endX:s,endY:l})),this.__currentPosition={x:s,y:l})},t.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),r=a(this.__ids),n=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",r),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",o("url(#{id})",{id:r})),e.appendChild(n),this.__currentElement=n},t.prototype.drawImage=function(){var e,r,n,i,o,a,s,l,c,u,d,p,h=Array.prototype.slice.call(arguments),g=h[0],f=0,m=0;if(3===h.length)e=h[1],r=h[2],n=o=g.width,i=a=g.height;else if(5===h.length)e=h[1],r=h[2],n=h[3],i=h[4],o=g.width,a=g.height;else{if(9!==h.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);f=h[1],m=h[2],o=h[3],a=h[4],e=h[5],r=h[6],n=h[7],i=h[8]}s=this.__closestGroupOrSvg(),this.__currentElement;var y,v,b,x="translate("+e+", "+r+")";if(g instanceof t){if((l=g.getSvg().cloneNode(!0)).childNodes&&1<l.childNodes.length){for(c=l.childNodes[0];c.childNodes.length;)p=c.childNodes[0].getAttribute("id"),this.__ids[p]=p,this.__defs.appendChild(c.childNodes[0]);(b=l.childNodes[1])&&(v=(y=b.getAttribute("transform"))?y+" "+x:x,b.setAttribute("transform",v),s.appendChild(b))}}else"CANVAS"!==g.nodeName&&"IMG"!==g.nodeName||((u=this.__createElement("image")).setAttribute("width",n),u.setAttribute("height",i),u.setAttribute("opacity",this.globalAlpha),u.setAttribute("preserveAspectRatio","none"),(f||m||o!==g.width||a!==g.height)&&((d=this.__document.createElement("canvas")).width=n,d.height=i,d.getContext("2d").drawImage(g,f,m,o,a,0,0,n,i),g=d),u.setAttribute("transform",x),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===g.nodeName?g.toDataURL():g.getAttribute("src")),s.appendChild(u))},t.prototype.createPattern=function(e,r){var i,o=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=a(this.__ids);return o.setAttribute("id",s),o.setAttribute("width",e.width),o.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((i=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),i.setAttribute("height",e.height),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),o.appendChild(i),this.__defs.appendChild(o)):e instanceof t&&(o.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(o)),new n(o,this)},t.prototype.setLineDash=function(e){e&&0<e.length?this.lineDash=e.join(","):this.lineDash=null},t.prototype.ellipse=function(e,t,r,n,i,a,s,l){var c,u,d,p,h,g,f;a!==s&&((a%=2*Math.PI)==(s%=2*Math.PI)&&(s=(s+2*Math.PI-.001*(l?-1:1))%(2*Math.PI)),c=e+Math.cos(-i)*r*Math.cos(s)+Math.sin(-i)*n*Math.sin(s),u=t-Math.sin(-i)*r*Math.cos(s)+Math.cos(-i)*n*Math.sin(s),d=e+Math.cos(-i)*r*Math.cos(a)+Math.sin(-i)*n*Math.sin(a),p=t-Math.sin(-i)*r*Math.cos(a)+Math.cos(-i)*n*Math.sin(a),h=l?0:1,(f=s-a)<0&&(f+=2*Math.PI),g=l?f>Math.PI?0:1:f>Math.PI?1:0,this.lineTo(d,p),this.__addPathCommand(o("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:n,xAxisRotation:i*(180/Math.PI),largeArcFlag:g,sweepFlag:h,endX:c,endY:u})),this.__currentPosition={x:c,y:u})},t.prototype._dcgSetTitle=function(e){var t,r=this.__currentElement,n=!1,i=r.getElementsByTagName("title");0<i.length?t=i[0]:(t=this.__document.createElementNS("http://www.w3.org/2000/svg","title"),n=!0),t.textContent=e,n&&r.appendChild(t)},t.prototype.drawFocusRing=function(){},t.prototype.createImageData=function(){},t.prototype.getImageData=function(){},t.prototype.putImageData=function(){},t.prototype.globalCompositeOperation=function(){},t.prototype.setTransform=function(){},t})),i("graphing/screen",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0,t.Screen=function(e,t){this.width=e,this.height=t}})),i("graphing/poi",["require","exports","core/math/poi-type","core/types/graphmode","core/types/point-opacity"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POI=void 0;var o=1,a=(s.prototype.getLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return e&&"labels"in e&&e.labels&&e.labels[this.pointIdxOnBranch]||""},s.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},s.prototype.getCompiledFunction=function(){var e=this.sketch.branches[this.branch];if("compiled"in e&&e.compiled)return e.compiled.fn},s.prototype.isAttachedToPlottedPoint=function(){return this.type===r.DEFINITION||this.type===r.LABEL},s.prototype.isMovable=function(){return this.getGraphMode()===n.XYPOINT_MOVABLE},s.prototype.isPersistent=function(){return this.type===r.LABEL},s.prototype.getLabelSize=function(){var e=this.sketch&&this.sketch.branches[this.branch];return this.type===r.LABEL&&e&&"labelSize"in e&&void 0!==e.labelSize?e.labelSize:1},s.prototype.getLabelRotation=function(){var e=this.sketch&&this.sketch.branches[this.branch];return this.type===r.LABEL&&e&&"labelAngle"in e&&void 0!==e.labelAngle?e.labelAngle:0},s.prototype.getPointOpacity=function(){var e=this.sketch&&this.sketch.branches[this.branch];return e&&"pointOpacity"in e&&void 0!==e.pointOpacity?e.pointOpacity:this.isMovable()?1:i.DEFAULT},s.prototype.getTextOutline=function(){if(this.hasEditableLabel())return!1;var e=this.sketch&&this.sketch.branches[this.branch];return!(this.type===r.LABEL&&e&&"suppressTextOutline"in e&&e.suppressTextOutline)},s.prototype.hasInteractiveLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return!(!e||!("interactiveLabel"in e)||!e.interactiveLabel)},s.prototype.hasEditableLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return!(!e||!("editableLabel"in e)||!e.editableLabel)},s.prototype.isBareLabel=function(){return this.bareLabel},s.prototype.getMovablePoint=function(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)},s);function s(e,t,r,n,i,a,s){this.x=e,this.y=t,this.type=r,this.sketch=n,this.branch=i,this.pointIdxOnBranch=a,this.bareLabel=void 0!==s&&s,this.id=o++}t.POI=a})),i("graphing/graphsketch",["require","exports","core/math/poi-type","core/types/graphmode","./poi","core/math/poi-type","lib/mathspeak"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphSketch=void 0;var s=(l.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(var e=0;e<this.branches.length;e++){var t,i,o=this.branches[e],a=o.poi;o.graphMode===n.X||o.graphMode===n.Y?(a.zeros&&this._pushPOI(a.zeros,e,r.ZERO),a.intercept&&this._pushPOI(a.intercept,e,r.INTERCEPT),a.extrema&&this._pushPOI(a.extrema,e,r.EXTREMUM),a.intersections&&this._pushPOI(a.intersections,e,r.INTERSECTION)):o.graphMode!==n.XYPOINT&&o.graphMode!==n.XYPOINT_MOVABLE||(o.graphMode,t=o.graphMode===n.XYPOINT&&!0===o.interactiveLabel,!0===o.showLabel||t?(i=o.nakedLabel,a.defined&&this._pushPOI(a.defined,e,r.LABEL,i)):a.defined&&this._pushPOI(a.defined,e,r.DEFINITION))}return this.__cachedPOI},l.prototype.getBranchPOI=function(e){return this.getPOI().filter((function(t){return t.branch===e}))},l.prototype.getMovablePoints=function(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];var e=this.branches[0];if(e&&1===e.segments.length&&e.graphMode===n.XYPOINT_MOVABLE)for(var t=e.segments[0],r=0;r<t.length;r++){var i=void 0;e.tableId&&(i={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[r].index,dragX:e.movablePointInfo[r].dragX,dragY:e.movablePointInfo[r].dragY});var o=e.scaleFactors?e.scaleFactors[0][r]:void 0,s=i?i.rowIndex:r,l=1===e.segments.length&&e.labels&&e.labels[r]?e.labels[r]:void 0,c=e.hasOwnProperty("pointOpacity")?e.pointOpacity:1;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+s+"]",sketch:this,color:this.color,pointOpacity:c,tableInfo:i,scaleFactor:o,x:t[r][0],y:t[r][1],label:l,ariaLabel:l&&a.getMathspeakFromText(l)})}return this.__cachedMovablePoints},l.prototype.getMovablePointByIndex=function(e){return this.getMovablePoints()[e]},l.prototype.getStaticLabeledPoints=function(){var e=this;if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;var t=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach((function(r){var i,s;r.type!==o.DEFINITION&&r.type!==o.LABEL||t.graphMode===n.XYPOINT&&(i=t.showLabel,s=r.getLabel(),!i&&""===s||e.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+e.id+","+r.id+"]",x:r.x,y:r.y,sketch:r.sketch,label:s,ariaLabel:""!==s?a.getMathspeakFromText(s):void 0}))})),this.__cachedStaticLabeledPoints},l.prototype._pushPOI=function(e,t,r,n){void 0===n&&(n=!1);for(var o=0,a=e.x.length;o<a;o++){var s=new i.POI(e.x[o],e.y[o],r,this,t,o,n);e.intersects&&(s.intersects=e.intersects[o]),this.__cachedPOI.push(s),this.__cachedPOIIds[s.id]=s}},l.prototype.updateIntersections=function(e){for(var t=this,i=0,o=this.branches.length;i<o;i++)this.branches[i].poi.intersections=e[i];var a=this.__cachedPOI;for(this.__cachedPOI=[],a.forEach((function(e){e.type!==r.INTERSECTION?t.__cachedPOI.push(e):delete t.__cachedPOIIds[e.id]})),i=0;i<this.branches.length;i++){var s=this.branches[i],l=s.graphMode,c=s.poi;l!==n.X&&l!==n.Y||c.intersections&&this._pushPOI(c.intersections,i,r.INTERSECTION)}},l.prototype.getPOIById=function(e){return this.__cachedPOIIds[e]},l.prototype.updateFrom=function(e){if(e){this.visible=!0,this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected;var t=this.branches[0].graphMode;if(t===n.XYPOINT||t===n.XYPOINT_MOVABLE){for(var r=!0,i=0;i<this.__cachedPOI.length;i++){var o=e.__cachedPOI[i],a=this.__cachedPOI[i];if(!o||o.type!==a.type){r=!1;break}}if(r)for(i=0;i<this.__cachedPOI.length;i++)o=e.__cachedPOI[i],a=this.__cachedPOI[i],delete this.__cachedPOIIds[a.id],(this.__cachedPOIIds[o.id]=a).id=o.id}}},l);function l(e,t){var n=this;this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.labels=[],this.id=e,this.branches=void 0!==t?t:[],this.getPOI().forEach((function(e){e.type===r.LABEL&&n.labels.push(e)}))}t.GraphSketch=s})),i("graphing/canvas-braille",["require","exports","tslib","./projection","./screen","core/graphing-calc/json/graph-settings","abraham"],(function(e,t,r,n,i,o,a){"use strict";function s(e,t){for(var r=t.x,n=t.y,i=t.width,o=t.height,a=e.getImageData(r,n,i,o).data,s=3;s<a.length;s+=4)if(0!==a[s])return!1;return!0}function l(e,t,r,n,i){return s(t,d(e,r,n,i))}function c(e,t){var r=e.dotSpacing;return(2+r)*t.length+(1+r)*(t.length-1)}function u(e){return 3+2*e.dotSpacing}function d(e,t,r,n){var i=e.cellPadding;return{x:t-i,y:r-i,width:c(e,n)+2*i,height:u(e)+2*i}}function p(e,t){if(!e)return t;var r=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return{x:r,y:n,width:Math.max(e.x+e.width,t.x+t.width)-r,height:Math.max(e.y+e.height,t.y+t.height)-n}}function h(e,t,r){return Math.min(Math.max(e,t),r)}function g(e,t,r,n,i){return{x:h(r,0,t.canvas.width-c(e,i)),y:h(n,0,t.canvas.height-u(e))}}function f(e,t,r,n,i){var o=t.fillStyle;t.fillStyle="white";var a=d(e,r,n,i);t.fillRect(a.x,a.y,a.width,a.height),t.fillStyle="black",function(e,t,r,n,i){for(var o,a,s,l,c,u,d,p=3+2*e.dotSpacing,h=0;h<i.length;h++)o=e,a=t,s=r+p*h,l=n,c=i[h],u=1+o.dotSpacing,1&(d=c.charCodeAt(0)-10240)&&a.fillRect(s,l,1,1),2&d&&a.fillRect(s,l+u,1,1),4&d&&a.fillRect(s,l+2*u,1,1),8&d&&a.fillRect(s+u,l,1,1),16&d&&a.fillRect(s+u,l+u,1,1),32&d&&a.fillRect(s+u,l+2*u,1,1)}(e,t,r,n,i),t.fillStyle=o}function m(e,t,r,n){var i=e.cellPadding;return{x:Math.round(t-(c(e,n)+i)),y:r}}function y(e,t){var r="nemeth"===t?a.latexToNemeth(e):a.latexToUeb(e);return r.isError?"":r.value.replace(/\u283C(?!$)/g,"")}function v(e,t){return 0<=t?e*Math.pow(10,t):e/Math.pow(10,-t)}function b(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.log(o-i)/Math.LN10)-1,s=a,l=5;e:for(var u=a;a-u<4;u--)for(var d=0,p=[5,2,1];d<p.length;d++){var h=p[d],g=v(h,u),f=Math.floor(i/g)+1,m=Math.ceil(o/g)-1,b=Math.abs(n(g)-n(0)),x=y(String(v(f*h,u)),t),w=y(String(v(m*h,u)),t);if(b<c(e,x)+c(e," ")||b<c(e,w)+c(e," "))break e;if(15<=m-f)break e;s=u,l=h}return{int:l,exp:s}}function x(e,t,r){return b(e,t,[r.viewport.xmin,r.viewport.xmax],(function(e){return r.mapx(e)}))}function w(e,t){for(var r=e.int,n=e.exp,i=t[0],o=t[1],a=Math.ceil(i/v(r,n)),s=Math.floor(o/v(r,n)),l=[],c=a;c<=s;c++)l.push(v(c*r,n));return l}function S(e,t,r){return{x:w(x(e,t,r),[r.viewport.xmin,r.viewport.xmax]),y:w((n=e,i=t,(o=r).viewport.isSquare(o.screen)?x(n,i,o):b(n,i,[o.viewport.ymin,o.viewport.ymax],(function(e){return o.mapy(e)}))),[r.viewport.ymin,r.viewport.ymax])};var n,i,o}function E(e){switch(e){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:throw new Error("Unexpected embosser model: "+e)}}function _(e){switch(e){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:throw new Error("Unexpected embosser model: "+e)}}function k(e,t,r,n,i,o){void 0===o&&(o=1);var a=e.fillStyle;e.fillStyle=t,e.fillRect(r-1,n,o,i-n),e.fillStyle=a}function M(e,t,r,n,i,o){void 0===o&&(o=1);var a=e.fillStyle;e.fillStyle=t,e.fillRect(n,r-1,i-n,o),e.fillStyle=a}Object.defineProperty(t,"__esModule",{value:!0}),t.createBrailleImage=void 0,t.createBrailleImage=function(e,t,a,h,v){var b,x,w;if(void 0!==a.margins&&void 0!==t){var I=function(e){if("etc8"===e||"etc11"===e)return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if("vpmax8"===e||"vpmax11"===e)return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};throw new Error("Unexpected embosser model "+e)}(h),C=a.margins,L=r.__assign({},t.settings),P=L.showGrid&&function(e){if("etc8"===e||"etc11"===e)return!1;if("vpmax8"===e||"vpmax11"===e)return!0;throw new Error("Unexpected embosser model "+e)}(h),T=!!L.showXAxis,A=!!L.showYAxis,O=!!L.xAxisNumbers,D=L.xAxisArrowMode,F=!!L.yAxisNumbers,q=L.yAxisArrowMode,N=I.graphLineWidth,R={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:o.AxisArrowModes.NONE,yAxisNumbers:!1,yAxisArrowMode:o.AxisArrowModes.NONE,showXAxis:!1,showYAxis:!1,graphLineWidth:N,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(var B in R)t.settings[B]=R[B];var j=e.width-C.right-C.left,V=e.height-C.top-C.bottom,z=new i.Screen(j,V),U=t.getProjection().viewport;t.settings.squareAxes&&(U=U.squareCrop(z));var G=new n.Projection(z,U,t.settings),K=e.getContext("2d"),H=document.createElement("canvas");H.width=j,H.height=V;var W=H.getContext("2d"),$=document.createElement("canvas");$.width=j,$.height=V;var Y=$.getContext("2d"),Q=document.createElement("canvas");Q.width=j,Q.height=V;var X=Q.getContext("2d"),Z=document.createElement("canvas");Z.width=j,Z.height=V;var J=Z.getContext("2d"),ee=document.createElement("canvas");ee.width=j,ee.height=V;var te,re,ne,ie,oe=ee.getContext("2d");if(null!==K&&null!==J&&null!==W&&null!==X&&null!==oe&&null!==Y){t.settings.disableFill=!0,t.screenshotToCanvas(Z,{width:j,height:V,targetPixelRatio:1,transparentBackground:!0}),t.settings.disableFill=!1,t.screenshotToCanvas(H,{width:j,height:V,targetPixelRatio:1,transparentBackground:!0}),K.fillStyle="white",K.fillRect(0,0,e.width,e.height);var ae,se,le,ce=Math.round(G.mapx(0)),ue=Math.round(G.mapy(0)),de=""!==L.xAxisLabel?L.xAxisLabel.replace(/ /g,"\\ "):"x",pe=""!==L.yAxisLabel?L.yAxisLabel.replace(/ /g,"\\ "):"y";T&&G.coordsAreOnscreen(j-6,ue-8,0)&&f(se=r.__assign(r.__assign({},I),{cellPadding:I.cellPadding+1}),oe,Be=(b=g(se,W,Be=(ae=m(se,Be=j-2,je=ue-(Se=2+2*u(se)),Ee=y(de,v))).x,je=ae.y,Ee)).x,je=b.y,Ee),A&&G.coordsAreOnscreen(ce+4,1,0)&&f(se=r.__assign(r.__assign({},I),{cellPadding:I.cellPadding+1}),oe,Be=(le=g(se,W,Be=ce+4,je=1,Ee=y(pe,v))).x,je=le.y,Ee);var he,ge=S(I,v,G),fe=ge.x,me=ge.y;if(T){for(var ye,ve,be=void 0,xe=0,we=fe;xe<we.length;xe++)0===(Le=we[xe])&&A||(Fe=Math.round(G.mapx(Le)))<2||Fe>G.screen.width-2||O&&(ye=c(I,y("-1",v))-c(I,y("1",v)),l(I,J,Be=(ve=g(I,oe,Be=Fe-(Le<0?1+ye:1),je=ue+4,Ee=y(""+Le,v))).x,je=ve.y,Ee)&&(f(I,oe,Be,je,Ee),be=p(be,d(I,Be,je,Ee))));I.embossPatternInequalities&&be&&(be=p(be,{x:0,y:ue,width:j,height:0}),X.fillStyle="white",X.fillRect(be.x,be.y,be.width,be.height))}if(A){be=void 0;for(var Se,Ee,_e,ke=0,Me=me;ke<Me.length;ke++)0===(Ae=Me[ke])&&T||(Re=Math.round(G.mapy(Ae)))<2||Re>G.screen.height-2||(Se=-Math.ceil(u(I)/2),F&&l(I,J,Be=(x=g(I,oe,Be=(_e=m(I,Be=ce-4,je=Re+Se,Ee=y(""+Ae,v))).x,je=_e.y,Ee)).x,je=x.y,Ee)&&(f(I,oe,Be,je,Ee),be=p(be,d(I,Be,je,Ee))));I.embossPatternInequalities&&be&&(be=p(be,{x:ce,y:0,width:0,height:V}),X.fillStyle="white",X.fillRect(be.x,be.y,be.width,be.height))}T&&A&&(Be=(he=m(I,Be=ce-2,je=ue+2,Ee=y(O||F?"0":"o",v))).x,je=he.y,G.coordsAreOnscreen(Be,je,0)&&l(I,J,Be=(w=g(I,oe,Be,je,Ee)).x,je=w.y,Ee)&&f(I,oe,Be,je,Ee));for(var Ie=0,Ce=fe;Ie<Ce.length;Ie++){var Le=Ce[Ie];(Fe=Math.round(G.mapx(Le)))<2||Fe>G.screen.width-2||A&&0===Le||P&&k(X,"white",Fe-1,0,V,3)}for(var Pe=0,Te=me;Pe<Te.length;Pe++){var Ae=Te[Pe];(Re=Math.round(G.mapy(Ae)))<2||Re>G.screen.height-2||T&&0===Ae||P&&M(X,"white",Re-1,0,j,3)}T&&M(X,"white",ue-3,0,j,7),A&&k(X,"white",ce-3,0,V,7);for(var Oe=0,De=fe;Oe<De.length;Oe++){var Fe;Le=De[Oe],(Fe=Math.round(G.mapx(Le)))<2||Fe>G.screen.width-2||A&&0===Le||(P?k(X,_(h),Fe,0,V):T&&k(X,_(h),Fe,ue-3,ue+2))}for(var qe=0,Ne=me;qe<Ne.length;qe++){var Re;Ae=Ne[qe],(Re=Math.round(G.mapy(Ae)))<2||Re>G.screen.height-2||T&&0===Ae||(P?M(X,_(h),Re,0,j):A&&M(X,_(h),Re,ce-3,ce+2))}if(T&&M(X,E(h),ue,0,j),A&&k(X,E(h),ce,0,V),q!==o.AxisArrowModes.NONE&&(function(e,t,r,n){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(r-1+o,0+Math.abs(o),1,1);e.fillStyle=i}(X,E(h),ce),q===o.AxisArrowModes.BOTH&&function(e,t,r,n){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(r-1+o,n-Math.abs(o),1,1);e.fillStyle=i}(X,E(h),ce,V-1)),D!==o.AxisArrowModes.NONE&&(function(e,t,r,n){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(r-Math.abs(o),n-1+o,1,1);e.fillStyle=i}(X,E(h),j-1,ue),D===o.AxisArrowModes.BOTH&&function(e,t,r,n){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(0+Math.abs(o),n-1+o,1,1);e.fillStyle=i}(X,E(h),0,ue)),I.embossPatternInequalities)for(var Be=0;Be<j;Be+=6)for(var je=0;je<V;je+=6){var Ve={x:Be,y:je,width:3,height:3};(function(e,t){for(var r=t.x,n=t.y,i=t.width,o=t.height,a=e.getImageData(r,n,i,o).data,s=3;s<a.length;s+=4)if(0===a[s])return;return 1})(W,Ve)&&s(X,Ve)&&s(J,Ve)&&s(oe,Ve)&&(re=Be,ne=je,ie=(te=Y).fillStyle,te.fillStyle="black",te.fillRect(re+1,ne,1,1),te.fillRect(re,ne+1,1,1),te.fillRect(re+1,ne+1,1,1),te.fillRect(re+2,ne+1,1,1),te.fillRect(re+1,ne+2,1,1),te.fillStyle=ie)}I.embossPatternInequalities||K.drawImage(H,C.left,C.top),K.drawImage(Q,C.left,C.top),K.drawImage(Z,C.left,C.top),K.drawImage(ee,C.left,C.top),I.embossPatternInequalities&&K.drawImage($,C.left,C.top)}for(var B in R)t.settings[B]=L[B]}}})),i("graphing/braille-size-options",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brailleSizes=void 0,t.brailleSizes={},t.brailleSizes.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50},name:function(e){return e.s("graphing-calculator-label-braille-size-vpmax8")}},t.brailleSizes.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5},name:function(e){return e.s("graphing-calculator-label-braille-size-vpmax11")}},t.brailleSizes.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0},name:function(e){return e.s("graphing-calculator-label-braille-size-etc8")}},t.brailleSizes.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5},name:function(e){return e.s("graphing-calculator-label-braille-size-etc11")}}})),i("graphing/movablepointslayer",["require","exports","tslib","dcgview","browser","core/lib/label","core/graphing-calc/json/expression","core/types/graphmode","lib/aria","./constants","jquery","underscore"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCoordsString=void 0;var p=n.Components.For;function h(e,t){var r=e[t];return Array.isArray(r)&&e.tableInfo?r[e.tableInfo.rowIndex]:r}var g,f=(g=n.Class,r.__extends(m,g),m.prototype.init=function(){this.grapher=this.props.grapher(),this.renderedPointsIdOrder=[],this.renderedPoints={}},m.prototype.template=function(){var e=this;return n.createElement(p,{each:function(){return e.renderedPointsIdOrder}},n.createElement("div",{class:n.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:function(){return e.requestRedrawNextFrame()},onFocusout:function(){return e.requestRedrawNextFrame()},didMount:this.didMountRoot.bind(this)},(function(t){return n.createElement("div",{class:e.const({"dcg-tabbable-point":!0,"dcg-movable-point":"movable"===e.renderedPoints[t].type}),style:function(){return{transform:e.getTransform(t)}},role:n.const("button"),"aria-roledescription":function(){return"movable"===e.renderedPoints[t].type?e.grapher.controller.s("graphing-calculator-narration-movable-point-description"):e.grapher.controller.s("graphing-calculator-narration-point-description")},"dcg-mp-id":e.const(t),tabindex:function(){return e.getTabIndex(t)},"aria-label":function(){return e.getAriaLabel(t)},"aria-hidden":e.bindFn(e.getAriaHidden)})})))},m.prototype.redraw=function(e,t,r){var n,i=this,o=this.grapher.graphSketches,a=this.renderedPoints;function s(n){var o=i.processPOI(e,t,n,a[n.id],r,l);o&&(i.renderedPoints[n.id]=o,i.renderedPointsIdOrder.push(n.id))}this.renderedPoints={},this.renderedPointsIdOrder=[];var l=this.getFocusedPointId();for(n in o){var c=o[n];c.visible&&(c.getMovablePoints().forEach(s),c.getStaticLabeledPoints().forEach(s))}var u=this.renderedPoints[this.hoveredPointId],d=this.renderedPoints[this.pressedPointId],p=u&&u.poi,h=d&&d.poi;p||this.setHoveredPointId(void 0),h||this.setPressedPointId(void 0);var g,f,m=h||p;m?(g="movable-point"===m.type&&m.tableInfo&&m.tableInfo.dragX,f="movable-point"===m.type&&m.tableInfo&&m.tableInfo.dragY,g&&f||!g&&!f?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):g?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0),this.update(),this.speakAriaAlert()},m.prototype._clampedOpacity=function(e){return e<0?0:1<e||!d.isFinite(e)?1:e},m.prototype.drawForScreenshot=function(e,t,r,n){var i=this,o=this.grapher.graphSketches;for(var a in o){var l,c,u=o[a];u.visible&&((l=u.branches[0]).graphMode===s.XYPOINT_MOVABLE&&(c=l.pointOpacity),u.getMovablePoints().forEach((function(o){var a={screenX:t.mapx(o.x),screenY:t.mapy(o.y),color:o.color,pointOpacity:c,animationPercent:0};i.drawMovablePointOnCtx(e,a,r,n)})))}},m.prototype.processPOI=function(e,t,r,n,i,o){var a=r.id,s=r.x,l=r.y,u=t.mapx(s),d=t.mapy(l),p=o===a,g=t.coordsAreOnscreen(u,d,c.OFFSCREEN_RENDER_MARGIN);if(g||p)return(n=n||("movable-point"===r.type?{type:"movable",id:a,pointOnScreen:g,poi:r,projection:t,screenX:screenX,screenY:screenY,color:h(r,"color"),pointOpacity:h(r,"pointOpacity"),pointIsHovered:!1,pointIsPressed:!1,lastHoverActionTime:0,animationPercent:0}:{type:"static",id:a,pointOnScreen:g,poi:r,projection:t,screenX:screenX,screenY:screenY})).pointOnScreen=g,n.poi=r,n.projection=t,n.screenX=u,n.screenY=d,"movable"===n.type&&(n.color=h(n.poi,"color"),n.pointOpacity=h(n.poi,"pointOpacity"),this.updateMovablePointAnimation(n),this.drawMovablePointOnCtx(e,n,i)),n},m.prototype.drawMovablePointOnCtx=function(e,t,r,n){var i=n||(this.grapher.settings.config.projectorMode?13.5:10.5),o=Array.isArray(t.color)?t.color[0]:t.color,a=t.screenX,s=t.screenY,l=t.animationPercent||0;r.push({left:a-i,right:a+i,top:s-i,bottom:s+i}),e.save();var c=e.globalAlpha,u=this._clampedOpacity(t.pointOpacity);e.fillStyle=o,e.globalAlpha=.35*u,e.beginPath(),e.moveTo(a+i,s),e.arc(a,s,i,0,2*Math.PI,!0),e.closePath(),e.fill(),e.globalAlpha=u,i*=.3+.7*l,e.beginPath(),e.moveTo(a+i,s),e.arc(a,s,i,0,2*Math.PI,!0),e.closePath(),e.fill(),e.globalAlpha=c,e.restore()},m.prototype.updateMovablePointAnimation=function(e){var t=Date.now(),r=e.id,n=this.hoveredPointId===r,i=this.pressedPointId===r;e.pointIsPressed=i,n!==e.pointIsHovered&&(e.pointIsHovered=n,e.lastHoverActionTime=t);var o=e.animationPercent||0,a=.004*(t-e.lastHoverActionTime);i?o=1:n?1<=(o+=a)?o=1:this.requestRedrawNextFrame():(o-=a)<=0?o=0:this.requestRedrawNextFrame(),e.animationPercent=o},m.prototype.getTransform=function(e){var t=this.renderedPoints[e];if(t)return i.translateRule(t.screenX,t.screenY)},m.prototype.getTabIndex=function(e){var t=this.renderedPoints[e];if(!t)return-1;var r=t.poi,n=this.grapher.controller.getItemEditableLabelMode(r.sketch.id),i="movable"===t.type||void 0===n||n===a.EditableLabelMode.None,o=this.grapher.settings,s=o.config.graphpaper&&o.config.enableTabindex;return i&&s?0:-1},m.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},m.prototype.getAriaLabel=function(e){var t=this.getAriaAlert({id:e,includeUsageInstructions:!1});return t&&t.completeMessage},m.prototype.speakAriaAlert=function(){var e=this.getFocusedPointId();if(e){var t=this.renderedPoints[e];if(!t||"static"===t.type)return}var r=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});(this.lastAriaAlert=r)&&r.completeMessage&&l.alert(r.completeMessage)},m.prototype.getAriaAlert=function(e){var t=e.id,r=e.lastAriaAlert,n=e.includeUsageInstructions;if(t){var i=this.renderedPoints[t];if(i){r&&r.id!==t&&(r=void 0);var o=i.poi,a=i.pointOnScreen,s=i.projection;if(o&&s){var l=s.viewport;if(l){var c=r&&r.label,u=o.ariaLabel,d=c!==u,p=r&&r.coordX,h=r&&r.coordY,g=o.x,f=o.y,m=g!==p||f!==h,v=y(g,f,l)+".",b=this.grapher.controller,x=u||b.s("graphing-calculator-narration-movable-point-prefix"),w="movable-point"===o.type&&n?b.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",S=a?"":b.s("graphing-calculator-narration-movable-point-off-screen-prompt");return{id:t,coordX:g,coordY:f,label:u,completeMessage:r?d?x+S:m?v+S:"":x+". "+v+w+S}}}}}},m.prototype.setHoveredPointId=function(e){e!==this.hoveredPointId&&(this.hoveredPointId=e,this.requestRedrawNextFrame())},m.prototype.isMovingPoint=function(){return!!this.pressedPointId},m.prototype.setPressedPointId=function(e){e!==this.pressedPointId&&(this.pressedPointId=e,this.requestRedrawNextFrame())},m.prototype.getFocusedPointId=function(){if(document.activeElement&&u.contains(this.rootNode,document.activeElement))return u(document.activeElement).attr("dcg-mp-id")},m.prototype.getFocusedPoint=function(){var e=this.getFocusedPointId();if(e){var t=this.renderedPoints[e];if(t)return t.poi}},m.prototype.didMountRoot=function(e){this.rootNode=e},m.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},m);function m(){return null!==g&&g.apply(this,arguments)||this}function y(e,t,r){return"X: "+o.value(e,r.xmax-r.xmin).ariaString+". Y: "+o.value(t,r.ymax-r.ymin).ariaString}t.default=f,t.getCoordsString=y})),i("graphing/integral-image",["require","exports"],(function(e,t){"use strict";function r(e,t,r){return Math.max(t,Math.min(r,e))}Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.getSumForValidRect=function(e){var t=e.left-1,r=e.right-1,n=e.top-1,i=e.bottom-1,o=this.imageData.width,a=this.imageData.data,s=a[t+n*o],l=a[r+n*o],c=a[t+i*o],u=a[r+i*o];return 0<=t&&0<=n?u-l-c+s:0<=t?u-c:0<=n?u-l:u},i.prototype.getSum=function(e){var t={left:r(Math.floor(e.left),0,this.imageData.width),right:r(Math.ceil(e.right),0,this.imageData.width),top:r(Math.floor(e.top),0,this.imageData.height),bottom:r(Math.ceil(e.bottom),0,this.imageData.height)};return t.right<=t.left||t.bottom<=t.top?0:this.getSumForValidRect(t)},i);function i(e){var t=e.data,r=e.width,n=e.height;this.imageData=e;for(var i=1;i<r;i++)t[i]+=t[i-1];for(var o=1;o<n;o++)t[o*r]+=t[o*r-r];for(var a=r*n-r-n+1,s=r-1,l=0;l<a;l++){i=1+l%s;var c=(o=1+Math.floor(l/s))*r,u=i-1+c,d=i+c-r,p=i-1+c-r;t[c+i]+=t[u]+t[d]-t[p]}}t.default=n})),i("graphing/automatic-label-placer",["require","exports","graphing/integral-image","underscore"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCandidatesForPolygon=t.generateCandidatesForAngle=t.generateCandidatesForSegment=t.generateCandidatesForPoint=t.buildStaticEnvGetter=t.computePositions=t.getIntegralImage=void 0;var i=.5,o=document.createElement("canvas"),a=[];function s(e,t){if(!(0<t.width*t.height))return new r.default({width:0,height:0,data:[]});o.width=0,o.width=Math.round(t.width*i),o.height=Math.round(t.height*i);var n=o.getContext("2d");n.save(),n.scale(o.width/e.canvas.width,o.height/e.canvas.height),n.drawImage(e.canvas,0,0),n.restore();var s=n.getImageData(0,0,o.width,o.height),l=s.data;l.length,a.length;for(var c=a=new Array(l.length/4),u=0;u<c.length;u++)c[u]=l[4*u+3];return new r.default({width:s.width,height:s.height,data:c})}function l(e,t){return Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))}function c(e,t){if(!(t.length<=1))for(var r,n,o,a,s=e(),c=0,u=t;c<u.length;c++){var d=u[c];d.staticScore+=(a=l(o=d,s.viewport),10*(o.width*o.height-a)),d.staticScore+=function(e,t){var r=0;return t.forEach((function(t){r+=l(e,t)})),r}(d,s.domObstructions),d.staticScore+=(r=d,n=void 0,n=s.integralImage.getSum({left:r.left*i,right:r.right*i,top:r.top*i,bottom:r.bottom*i}),n/=200,n/=i*i)}}t.getIntegralImage=s,t.computePositions=function(e){for(var t=0;t<e.length;t++){var r=function(e,t){var r=1/0,n=-1,i=t[e];if(1===i.length)return i[0];for(var o=0;o<i.length;o++){var a=t[e][o].staticScore,s=function(e,t,r){for(var n=0,i=r[e][t],o=0;o<r.length;o++)if(o!==e){for(var a=0,s=r[o],l=s.length-1;0<=l;l--){var c=s[l];a+=Math.max(0,Math.min(i.right,c.right)-Math.max(i.left,c.left))*Math.max(0,Math.min(i.bottom,c.bottom)-Math.max(i.top,c.top))}n+=a/s.length}return n}(e,o,t),l=a+s;(-1===n||l<r)&&(r=l,n=o)}return i[n]}(t,e);e[t]=[r]}return e.map((function(e){return e[0]}))},t.buildStaticEnvGetter=function(e,t,r){var n;return function(){return n=n||{domObstructions:r,viewport:{left:0,right:t.width,top:0,bottom:t.height},integralImage:s(e,t)}}},t.generateCandidatesForPoint=function(e,t){var r=t.nakedLabel?0:t.pt_radius,i=Math.round(r/Math.sqrt(2)),o=[],a=t.pt_x,s=t.pt_y,l=t.width,u=t.height,d=400;o.push({cx_s:0,cy_s:0,cx_a:0,cy_a:0,staticScore:d,orientation:"center",matches:{default:1,center:1,center_auto:1,auto_center:1}}),o.push({cx_s:.5,cx_a:r+3,cy_s:0,cy_a:0,staticScore:d,orientation:"right",matches:{default:1,right:1,center_auto:1,auto_right:1}}),o.push({cx_s:-.5,cx_a:-r-3,cy_s:0,cy_a:0,staticScore:d,orientation:"left",matches:{default:1,left:1,center_auto:1,auto_left:1}}),o.push({cx_s:0,cx_a:0,cy_s:-.5,cy_a:-r,staticScore:d,orientation:"above",matches:{default:1,above:1,auto_center:1,above_auto:1}}),o.push({cx_s:-.5,cx_a:-i,cy_s:-.5,cy_a:-i,staticScore:d,orientation:"tl",matches:{default:1,above_left:1,above_auto:1,auto_left:1}}),o.push({cx_s:.5,cx_a:i,cy_s:-.5,cy_a:-i,staticScore:d,orientation:"tr",matches:{default:1,above_right:1,above_auto:1,auto_right:1}}),o.push({cx_s:0,cx_a:0,cy_s:.5,cy_a:r,staticScore:d,orientation:"below",matches:{default:1,below:1,auto_center:1,below_auto:1}}),o.push({cx_s:-.5,cx_a:-i,cy_s:.5,cy_a:i,staticScore:d,orientation:"bl",matches:{default:1,below_left:1,below_auto:1,auto_left:1}}),o.push({cx_s:.5,cx_a:i,cy_s:.5,cy_a:i,staticScore:d,orientation:"br",matches:{default:1,below_right:1,below_auto:1,auto_right:1}});var p=Math.cos(t.rotation),h=Math.sin(t.rotation),g=o.map((function(e){var r,n=e.cx_s*l+e.cx_a,i=e.cy_s*u+e.cy_a,o=n*p-i*h,c=i*p+n*h,d="calc("+(100*e.cx_s-50)+"% + "+e.cx_a+"px)",g="calc("+(100*e.cy_s-50)+"% + "+e.cy_a+"px)",f=-l/2,m=l/2,y=-u/2,v=u/2;return t.rotation&&(f=(r=function(e){for(var t=e[0].x,r=e[0].x,n=e[0].y,i=e[0].y,o=e.length-1;1<=o;o--){var a=e[o],s=a.x,l=a.y;s<t&&(t=s),r<s&&(r=s),l<n&&(n=l),i<l&&(i=l)}return{left:t,right:r,top:n,bottom:i}}([{x:f*p-y*h,y:y*p+f*h},{x:f*p-v*h,y:v*p+f*h},{x:m*p-y*h,y:y*p+m*h},{x:m*p-v*h,y:v*p+m*h}])).left,m=r.right,y=r.top,v=r.bottom),f=Math.round(a+o+f),m=Math.round(a+o+m),y=Math.round(s+c+y),v=Math.round(s+c+v),{pt_x:Math.round(a),pt_y:Math.round(s),left:f,right:m,top:y,bottom:v,width:m-f,height:v-y,transform:"translate("+d+","+g+")",staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation,matches:e.matches}}));return c(e,g=t.enforceOrientation&&"default"!==t.enforceOrientation?n.filter(g,(function(e){return!!e.matches[t.enforceOrientation]})):t.nakedLabel?n.filter(g,(function(e){return"center"===e.orientation})):t.keepOrientation&&t.priorOrientation?n.filter(g,(function(e){return e.orientation===t.priorOrientation})):n.filter(g,(function(e){return"center"!==e.orientation}))),g},t.generateCandidatesForSegment=function(e,t){for(var r,i,o=[],a=t.width,s=t.height,l=a/2,u=s/2,d=t.pt_x1,p=t.pt_y1,h=t.pt_x2,g=t.pt_y2,f=(g-p)/(h-d),m=Math.atan2(g-p,h-d)+Math.PI/2,y=5*Math.cos(m),v=5*Math.sin(m),b=Math.min(p,g)-Math.abs(v)-s,x=Math.max(p,g)+Math.abs(v),w=[0,20,20,40,40],S=[],E=0,_=[.5,.4,.6,.2,.8];E<_.length;E++){var k=_[E];S.push({x:d*(1-k)+h*k,y:p*(1-k)+g*k})}for(var M=0;M<S.length;M++){var I,C,L,P,T,A,O=S[M];2<=f||f<=-2?(T=A=O.y-u,I=Math.abs((h-d)/(g-p)*u)+Math.abs(y),C=O.x+I,L=O.x-I-a):A=f<=.05&&-.05<=f?(C=L=O.x-l,P=Math.abs(f*l)+Math.abs(v),T=O.y-P-s,O.y+P):(L=0<y?(C=O.x+y,O.x-y-a):(C=O.x+y-a,O.x-y),0<v?(T=O.y+v,O.y-v-s):(T=O.y+v-s,O.y-v)),T<b?T=b:x<T&&(T=x),A<b?A=b:x<A&&(A=x);var D=0<(h-d)*(T-p)-(g-p)*(C-d),F=M.toString()+(D?"-a":"-b");o.push({pt_x:O.x,pt_y:O.y,left:C,top:T,staticScore:w[M],orientation:F,matches:((r={})[F]=1,r)});var q=M.toString()+(D?"-b":"-a");o.push({pt_x:O.x,pt_y:O.y,left:L,top:A,staticScore:w[M],orientation:q,matches:((i={})[q]=1,i)})}var N=o.map((function(e){var r=Math.round(e.left),n=Math.round(e.left+a),i=Math.round(e.top),o=Math.round(e.top+s);return{pt_x:Math.round(e.pt_x),pt_y:Math.round(e.pt_y),left:r,right:n,top:i,bottom:o,width:n-r,height:o-i,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation,matches:e.matches}}));return t.keepOrientation&&t.priorOrientation&&(N=n.filter(N,(function(e){return e.orientation===t.priorOrientation}))),c(e,N),N},t.generateCandidatesForAngle=function(e,t){var r,i=[],o=t.pt_x,a=t.pt_y,s=t.width,l=t.height,u=t.startAngle,d=t.endAngle;d<u&&(d+=2*Math.PI);var p=(u+d)/2,h=t.isRightAngle?t.radius*Math.sqrt(2):t.radius+4,g=h+Math.sqrt(t.width*t.width/4+t.height*t.height/4),f=[],m=g*Math.sin(p);h+.5*l<m&&(m=h+.5*l),m<-h-.5*l&&(m=-h-.5*l),f.push({x:o+g*Math.cos(p)-s/2,y:a+m-l/2});for(var y=0;y<f.length;y++){var v=f[y],b=y.toString()+"-a";i.push({pt_x:v.x,pt_y:v.y,left:v.x,top:v.y,staticScore:0,orientation:b,matches:((r={})[b]=1,r)})}var x=i.map((function(e){var r=Math.round(e.left),n=Math.round(e.left+s),i=Math.round(e.top),o=Math.round(e.top+l);return{pt_x:Math.round(e.pt_x),pt_y:Math.round(e.pt_y),left:r,right:n,top:i,bottom:o,width:n-r,height:o-i,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation,matches:e.matches}}));return t.keepOrientation&&t.priorOrientation&&(x=n.filter(x,(function(e){return e.orientation===t.priorOrientation}))),c(e,x),x},t.generateCandidatesForPolygon=function(e,t){for(var r=[],i=t.width,o=t.height,a=Math.round(10/Math.sqrt(2)),s=0,l=0,u=0,d=0;d<t.path.length-2;d+=2)u+=1,s+=t.path[d],l+=t.path[d+1];var p=s/u,h=l/u;r.push({left:p-i/2,top:h-o/2,staticScore:0,orientation:"center",matches:{center:1}}),r.push({left:10+p+3,top:h-o/2,staticScore:50,orientation:"right",matches:{right:1}}),r.push({left:p-(10+i)-3,top:h-o/2,staticScore:50,orientation:"left",matches:{left:1}}),r.push({left:p-i/2,top:h-(o+10),staticScore:50,orientation:"top",matches:{top:1}}),r.push({left:p-(i+a),top:h-(o+a),staticScore:50,orientation:"tl",matches:{tl:1}}),r.push({left:p+a,top:h-(o+a),staticScore:50,orientation:"tr",matches:{tr:1}}),r.push({left:p-i/2,top:10+h,staticScore:50,orientation:"bottom",matches:{bottom:1}}),r.push({left:p-(i+a),top:h+a,staticScore:50,orientation:"bl",matches:{bl:1}}),r.push({left:p+a,top:h+a,staticScore:50,orientation:"br",matches:{br:1}});var g=r.map((function(e){var r=Math.round(e.left),n=Math.round(e.left+i),a=Math.round(e.top),s=Math.round(e.top+o);return{pt_x:Math.round(p),pt_y:Math.round(h),left:r,right:n,top:a,bottom:s,width:n-r,height:s-a,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation,matches:e.matches}}));return t.keepOrientation&&t.priorOrientation&&(g=n.filter(g,(function(e){return e.orientation===t.priorOrientation}))),c(e,g),g}})),i("graphing/canvas-labels",["require","exports","tslib","core/lib/deepCopy","graphing/svg-classes"],(function(e,t,r,n,i){"use strict";function o(e,t){e.translate(t.left-.5,t.top-.5)}function a(e,t,r){e.save(),e.font=t.font,r?(e.strokeStyle="#FFF",e.lineWidth=3,e.miterLimit=2,e.strokeText(t.text,0,t.y)):(e.fillStyle=t.color,e.fillText(t.text,0,t.y)),e.restore()}function s(e,t,r){e.save(),r?(e.strokeStyle="#FFF",e.lineWidth=3):e.fillStyle=t.color,e.beginPath();for(var n=0,i=t.instructions;n<i.length;n++){var o=i[n];switch(o.type){case"moveTo":e.moveTo(o.x,o.y);break;case"lineTo":e.lineTo(o.x,o.y);break;case"ellipse":e.ellipse(o.centerX,o.centerY,o.radiusX,o.radiusY,o.rotation,o.startAngle,o.endAngle,o.anticlockwise)}}e.closePath(),r?e.stroke():e.fill(),e.restore()}function l(e,t){var r=Math.sqrt(e[0]*e[0]+e[1]*e[1]),n=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=e[0]*t[0]+e[1]*t[1],o=Math.acos(i/(r*n));return e[0]*t[1]-e[1]*t[0]<0&&(o*=-1),o}Object.defineProperty(t,"__esModule",{value:!0}),t.drawCommandsToCtx=t.computeDrawingCommandsForDOMLabel=void 0;var c={};function u(e,t){var n=e+"-"+t,i=c[n];if(i)return i;i=[],c[n]=i;var o=t.split(" ");if(4!==o.length)return i;var a=parseFloat(o[0]),s=parseFloat(o[2]),u=parseFloat(o[1]),d=parseFloat(o[3]),p=s-a,h=d-u;function g(e){return(e-a)/p}function f(e){return(e-u)/h}var m=new RegExp("(M[0-9-.]+ [0-9-.]+)|(L[0-9-.]+ [0-9-.]+)|(A[0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+)","g"),y=e.match(m);if(!y||!y.length)return i;for(var v=NaN,b=NaN,x=0,w=y;x<w.length;x++){var S=w[x],E=S.substr(1).split(" ").map(parseFloat);switch(S[0]){case"M":v=g(E[0]),b=f(E[1]),i.push({type:"moveTo",x:v,y:b});break;case"L":v=g(E[0]),b=f(E[1]),i.push({type:"lineTo",x:v,y:b});break;case"A":var _=E[0]/p,k=E[1]/h,M=E[2],I=E[3],C=E[4],L=g(E[5]),P=f(E[6]),T=function(e,t,r,n,i,o,a,s,c){var u=Math.cos(i),d=Math.sin(i),p=(e-s)/2,h=(t-c)/2,g=u*p+d*h,f=-d*p+u*h,m=r*r,y=n*n,v=g*g,b=f*f,x=Math.sqrt((m*y-m*b-y*v)/(m*b+y*v));o===a&&(x*=-1);var w=x*r*f/n,S=-x*n*g/r,E=[1,0],_=[(-g-w)/r,(-f-S)/n];return{centerX:u*w-d*S+(e+s)/2,centerY:d*w+u*S+(t+c)/2,radiusX:r,radiusY:n,startAngle:l(E,[(g-w)/r,(f-S)/n]),endAngle:l(E,_),rotation:i,anticlockwise:0===a}}(v,b,_,k,M,I,C,L,P);v=L,b=P,i.push(r.__assign({type:"ellipse"},T))}}return i}function d(e,t,r){var i=window.getComputedStyle(e);"0px"!==i.borderTopWidth&&(s=function(e,t,r){var n=e.getBoundingClientRect();if(0<n.width&&0<n.height){var i=n.width,o=parseFloat(t.borderTopWidth||"1px"),a=t.borderTopColor||"#000",s=[{type:"moveTo",x:0,y:0},{type:"lineTo",x:i,y:0},{type:"lineTo",x:i,y:o},{type:"lineTo",x:0,y:o}];return{type:"path",rect:{left:n.left-r.pointCenterX,right:n.right-r.pointCenterX,top:n.top-r.pointCenterY,bottom:n.bottom-r.pointCenterY},instructions:s,color:a}}}(e,i,t))&&r.push(s);for(var o=e.childNodes,a=0;a<o.length;a++){var s,l=o[a];3===l.nodeType?(s=function(e,t){var r=document.createRange();r.selectNode(e);var n=r.getBoundingClientRect();if(0<n.width&&0<n.height){var i=window.getComputedStyle(e.parentElement),o=e.nodeValue||"";if(o){var a=-.228*parseFloat(i.fontSize);return{type:"text",rect:{left:n.left-t.pointCenterX,right:n.right-t.pointCenterY,top:n.top-t.pointCenterY,bottom:n.bottom-t.pointCenterY},text:o,color:i.color||"#000",font:i.fontStyle+" "+i.fontSize+" "+i.fontFamily,y:n.height+a,hasOutline:t.hasOutline}}}}(l,t))&&r.push(s):"svg"===l.nodeName?(s=function(e,t){var r=e.childNodes[0];if(r&&"path"===r.nodeName){var i=e.getBoundingClientRect();if(0<i.width&&0<i.height){for(var o=u(r.getAttribute("d")||"",e.getAttribute("viewBox")||""),a=window.getComputedStyle(e),s=i.width,l=i.height,c=0,d=o=n.default(o);c<d.length;c++){var p=d[c];switch(p.type){case"moveTo":case"lineTo":p.x*=s,p.y*=l;break;case"ellipse":p.centerX*=s,p.centerY*=l,p.radiusX*=s,p.radiusY*=l;break;default:return p}}return{type:"path",rect:{left:i.left-t.pointCenterX,right:i.right-t.pointCenterX,top:i.top-t.pointCenterY,bottom:i.bottom-t.pointCenterY},color:a.color||"#000",instructions:o}}}}(l,t))&&r.push(s):1===l.nodeType&&d(l,t,r)}}t.computeDrawingCommandsForDOMLabel=function(e,t){var r=[];return d(e,t,r),r},t.drawCommandsToCtx=function(e,t){i.save(t,"dcg-svg-label"),t.save(),i.restore(t);for(var r=0,n=e;r<n.length;r++){var l=n[r];switch(t.save(),o(t,l.rect),l.type){case"path":s(t,l,!0);break;case"text":l.hasOutline&&a(t,l,!0);break;default:return l}t.restore()}for(var c=0,u=e;c<u.length;c++){switch(l=u[c],t.save(),o(t,l.rect),l.type){case"path":s(t,l,!1);break;case"text":a(t,l,!1);break;default:return l}t.restore()}t.restore()}})),i("graphing/poilabelslayer",["require","exports","tslib","dcgview","jquery","core/lib/label","core/types/graphmode","core/types/point-size","core/math/poi-type","./constants","./poi","./automatic-label-placer","core/lib/color-helpers","core/math/interpolatedlabel","../dcgview-helpers/static-mathquill-view","../dcgview-helpers/mathquill-view","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing-calc/models/abstract-item","graphing/canvas-labels","graphing/movablepointslayer","./svg-groups","main/mathquill-operators"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var E=n.Components.Input,_=n.Components,k=_.For,M=_.Switch,I=_.IfElse;function C(e,t,r){var n=e.s("graphing-calculator-label-poi-unknown"),i=t.getProjection();if(!i)return n;var o=i.viewport;return o&&r&&(n=x.getCoordsString(r.x,r.y,o)),n}var L,P=(L=n.Class,r.__extends(T,L),T.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={},this.takingScreenshot=!1},T.prototype.template=function(){var e=this;return n.createElement(k,{each:function(){return e.cachedLabelOrder}},n.createElement("div",{class:n.const("dcg-graph-outer"),style:this.const({"z-index":0}),didMount:this.didMountRoot.bind(this)},(function(t){return n.createElement("div",{class:function(){return e.getLabelClasses(t)},style:function(){return e.getLabelStyles(t)}},n.createElement("div",{class:n.const("dcg-pt"),style:function(){return e.getDotStyles(t)}}),n.createElement("div",{class:n.const("dcg-label"),didMount:function(r){return e.linkLabelNode(t,r)}},e.renderLabelContent(t)))})))},T.prototype.renderLabelContent=function(e){var t=this;return n.createElement(M,{key:function(){return t.getLabelContent(e).type}},(function(r){return"text"===r?n.createElement("span",null,(function(){return t.getLabelContent(e).text})):"latex"===r?n.createElement(g.default,{latex:function(){return t.getLabelContent(e).text},config:t.bindFn(t.getMQConfig)}):"mixed"===r?n.createElement(k,{each:function(){return h.chunkLabel(t.getLabelContent(e).text)},key:function(e,t){return""+e+t}},n.createElement("span",null,(function(e){return I((function(){return"latex"===h.classifyLabelText(e)}),{true:function(){return n.createElement(g.default,{latex:function(){return e.substr(1,e.length-2)},config:t.bindFn(t.getMQConfig)})},false:function(){return n.createElement("span",null,(function(){return e}))}})}))):r===m.EditableLabelMode.Math?n.createElement("div",{class:function(){return{"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":t.shouldEditableLabelBeFocused(e),"dcg-empty-label":0===t.getEditableLabelText(e).trim().length}},style:function(){return{"border-color":p.shadeColor(t.getEditableLabelTextColor(e),.3)}}},n.createElement(f.default,{latex:function(){return t.getEditableLabelText(e)},placeholder:function(){return""},isFocused:function(){return t.shouldEditableLabelBeFocused(e)},capExpressionSize:function(){return!!t.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:n.const(!1),config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:C(t.controller,t.grapher,t.cachedLabelDict[e])})},getAriaPostLabel:t.const(""),onUserChangedLatex:function(r){return t.onLabelInput(r,e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(r){return t.onEditableLabelFocusChange(r,e)},hasError:t.const(!1),noFadeout:t.const(!0),needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})):n.createElement("div",{class:function(){return{"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":t.shouldEditableLabelBeFocused(e),"dcg-empty-label":0===t.getEditableLabelText(e).trim().length}},style:function(){return{"border-color":p.shadeColor(t.getEditableLabelTextColor(e),.3)}},onScroll:function(e){e.target&&(e.target.scrollLeft=0)}},n.createElement(E,{"aria-label":function(){return t.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:C(t.controller,t.grapher,t.cachedLabelDict[e])})},onInput:function(r){return t.onLabelInput(r,e)},value:function(){return t.getEditableLabelText(e)},onFocus:function(){return t.onEditableLabelFocusChange(!0,e)},onBlur:function(){return t.onEditableLabelFocusChange(!1,e)}}),n.createElement("span",{class:n.const("dcg-text-input-content")},(function(){return t.getEditableLabelText(e)||" "})))}))},T.prototype.getSketchIdFromLabelId=function(e){var t=this.cachedLabelDict[e];if(t)return t.sketchId},T.prototype.getEditableLabelTextColor=function(e){var t=this.getSketchIdFromLabelId(e);if(!t)return"#000";var r=this.controller.getItemModel(t);return r&&"expression"===r.type?v.getDisplayColor(r):"#000"},T.prototype.onEditableLabelFocusChange=function(e,t){var r=this.getSketchIdFromLabelId(t);r&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:r}}),this.update())},T.prototype.shouldEditableLabelBeFocused=function(e){var t=this.getSketchIdFromLabelId(e),r=this.controller.getFocusLocation();return!(!r||"editable-label"!==r.type||!t||r.id!==t)},T.prototype.onLabelInput=function(e,t){var r,n=this.getSketchIdFromLabelId(t);n&&this.grapher.poiController.getExpressionModel(n)&&(r=e,this.controller.getItemEditableLabelMode(n)===m.EditableLabelMode.Math&&0<r.length&&(r="`"+r+"`"),this.controller.dispatch({type:"set-item-label",id:n,label:r}))},T.prototype.getEditableLabelText=function(e){var t=this.getSketchIdFromLabelId(e);if(t){var r=this.grapher.poiController.getExpressionModel(t);return r?this.controller.getItemEditableLabelMode(t)===m.EditableLabelMode.Math?r.label.substr(1,r.label.length-2):r.label:""}},T.prototype.linkLabelNode=function(e,t){var r=this.cachedLabelDict[e];r&&(r.labelDOM=t)},T.prototype.getLabelClasses=function(e){var t=this.cachedLabelDict[e];return t?t.classes:{}},T.prototype.getLabelStyles=function(e){var t=this.cachedLabelDict[e];return t?t.styles:{}},T.prototype.getDotStyles=function(e){var t=this.cachedLabelDict[e];return t?t.dotStyles:{}},T.prototype.getLabelContent=function(e){var t=this.cachedLabelDict[e];if(t){var r=this.getSketchIdFromLabelId(e);if(!r)return{is_hole:!1,type:"text",text:""};var n=this.controller.getItemEditableLabelMode(r);return t.classes["dcg-editable-label"]&&void 0!==n&&n!==m.EditableLabelMode.None?{is_hole:!1,type:n,text:""}:t.content}return{is_hole:!1,type:"text",text:""}},T.prototype.didMountRoot=function(e){this.node=e},T.prototype.computeHoveredLabel=function(e,t){var r;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(r=this.computeLabel(this.hoveredPOI,e,t,"hovered"),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);var n=this.getHoveredInteractiveLabel();return n&&!n.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),r},T.prototype.computeTraceLabel=function(e,t){if(this.traceInfo){var r=this.traceInfo.pt;if(r){var n=new u.POI(r.x,r.y,l.TRACE,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0);return this.computeLabel(n,e,t,"trace")}}},T.prototype.computeLabel=function(e,t,r,n){var i=e.id+"";"trace"===n&&(i="*trace*");var s=t.mapx(e.x),u=t.mapy(e.y),d=s,p=u;if(t.coordsAreOnscreen(s,u,c.OFFSCREEN_RENDER_MARGIN)){if(this.isHiddenInteractiveLabel(e))return;var g=!1,f=void 0,m=e.sketch,v=m&&m.branches[0];v&&(g=!(!("nakedLabel"in v)||!v.nakedLabel),f="labelOrientation"in v?v.labelOrientation:void 0);var b=m.id,x=this.controller.getItemModel(b);if(e.hasEditableLabel()&&x&&"expression"===x.type&&!y.isSinglePoint(x))return;var w=function(e,t){var r,n,i,s,c,u=t.xmax-t.xmin,d=t.ymax-t.ymin,p=e.getGraphMode();e.type===l.TRACE?(n=(r=p===a.X)?e.y:e.x,i=e.getCompiledFunction(),c=o.point(n,u,d,i),r&&(s=c[0],c[0]=c[1],c[1]=s)):c=[o.value(e.x,u),o.value(e.y,d)];var g=!isFinite(c[1].value),f=e.getLabel();if(f)return"latex"===h.classifyLabelText(f)?{is_hole:g,type:"latex",text:f.substr(1,f.length-2)}:"text"===h.classifyLabelText(f)?{is_hole:g,type:"text",text:f}:{is_hole:g,type:"mixed",text:f};var m=c[0].superscript?c[0].mantissa+"^{"+c[0].superscript+"}":c[0].string,y=c[1].superscript?c[1].mantissa+"^{"+c[1].superscript+"}":c[1].string;return"undefined"===m&&(m="\\mathrm{undefined}"),"undefined"===y&&(y="\\mathrm{undefined}"),{is_hole:g,type:"latex",text:"\\left("+m+",\\space "+y+"\\right)"}}(e,t.viewport),S=e.pointIdxOnBranch,E=e.getLabelSize();Array.isArray(E)&&(E=E[S]);var _=e.getLabelRotation();Array.isArray(_)&&(_=_[S]);var k=!!e.getTextOutline(),M=e.isPersistent(),I=e.isAttachedToPlottedPoint(),C=e.hasInteractiveLabel(),L=e.hasEditableLabel()&&!this.takingScreenshot,P=m.color,T=!M,A=!!I;C&&(T=A=!0),"trace"===n&&(T=!(A=!1));var O=r[i],D=O&&O.labelDOM,F=O&&O.width,q=O&&O.height,N=O&&O.orientation,R={"dcg-poi-label":!0,"dcg-tracept":"trace"===n,"dcg-opened":"opened"===n,"dcg-hole":w.is_hole,"dcg-show-border":T,"dcg-hide-dot":A,"dcg-editable-label":L,"dcg-has-outline":k};isFinite(E)||(E=1);var B={left:s+"px",top:u+"px","font-size":Math.round(1100*E)/10+"%"};_&&!this.takingScreenshot&&(B.transform="rotate("+_+"rad)"),M&&P&&(B.color=P),B.opacity=""+e.getPointOpacity();var j={};return"trace"===n&&(j["background-color"]=P,j["border-color"]=P),{id:i,sketchId:b,x:e.x,y:e.y,screenX:s,screenY:u,top:p,left:d,width:F,height:q,labelDOM:D,forcedOrientation:f,isNakedLabel:g,orientation:N,rotation:_,classes:R,styles:B,dotStyles:j,content:w,hasOutline:k||e.hasEditableLabel()}}},T.prototype.computeAllLabels=function(e,t){var r,n,i={},o=this.grapher.graphSketches;for(r in o){var a=o[r];if(a.visible){var s=a.labels;if(s.length)for(var l=0;l<s.length;l++)(n=this.computeLabel(s[l],e,t,"opened"))&&(Array.isArray(a.color)&&(n.styles.color=a.color[l]),i[n.id]=n)}}var c,u,d={};for(r in this.openedPOI2Sketch){var p=(c=r,(u=o[this.openedPOI2Sketch[r]])&&u.visible?u.getPOIById(c):null);p&&(d[r]=p.sketch.id,(n=this.computeLabel(p,e,t,"opened"))&&(i[n.id]=n))}return this.openedPOI2Sketch=d,i},T.prototype.markLabelsDirty=function(){this.labelsDirty=!0},T.prototype.getInteractiveLabelUnderPoint=function(e){for(var t,r=0,n=this.cachedLabelOrder.length;r<n;r++){var i=this.cachedLabelOrder[r],o=this.cachedLabelDict[i];if(o&&o.width&&o.height){var a=o.screenX,s=o.screenY,l=o.left,c=o.top,u=o.width,d=o.height;if(0<u&&0<d&&e.x>a+l&&e.x<a+l+u&&e.y>s+c&&e.y<s+c+d){var p=this.getSketchIdFromLabelId(i);if(void 0===p)continue;var h=this.controller.getItemModel(p);if(!h||"expression"!==h.type)continue;if(y.hasEditableLabel(h))return{type:"editable",model:h};!t&&y.isDraggableAndHidden(h)&&(t={model:h,x:o.x,y:o.y})}}}if(t)return{type:"draggable",label:t}},T.prototype.positionLabels=function(e,t,r,n,o){var a=this,l=!this.labelsDirty;this.labelsDirty=!1;var c=[];t.forEach((function(e){var t,n,i,o,u,d,p,h,g=r[e];g&&g.labelDOM&&(void 0===(n=a.getSketchIdFromLabelId(e))||(i=a.grapher.getGraphSketch(n))&&i.branches&&(t=i.branches[0].pointSize),(void 0===t||t<0)&&(t=s.DEFAULT),o=(a.grapher.settings.config.projectorMode?14:10)*t/s.DEFAULT,u=g.screenX,d=g.screenY,p=g.labelDOM.clientWidth,h=g.labelDOM.clientHeight,0<p&&0<h&&c.push({renderedLabel:g,pt_x:u,pt_y:d,pt_radius:o,rotation:g.rotation,nakedLabel:g.isNakedLabel,width:p,height:h,keepOrientation:l,priorOrientation:g.orientation,enforceOrientation:g.forcedOrientation}))}));var u=d.buildStaticEnvGetter(e,n,o),p=c.map((function(e){return d.generateCandidatesForPoint(u,e)}));d.computePositions(p).forEach((function(e,t){var r=c[t].renderedLabel;r.orientation=e.orientation;var n=e.left-e.pt_x,o=e.top-e.pt_y;r.left=n,r.top=o,r.width=e.width,r.height=e.height;var a=r.labelDOM;a&&(a.style.transform=e.transform,i(a).data("orientation",e.orientation),setTimeout((function(){return a.classList.add("dcg-enable-transition")}),1))}))},T.prototype.copyToCtx=function(e){w.save(e,"labels");var t=this.node.getBoundingClientRect();for(var r in this.cachedLabelDict){var n,i,o,a,s=this.cachedLabelDict[r];s&&(n=s.labelDOM)&&(i={pointCenterX:s.screenX-t.left,pointCenterY:s.screenY-t.top,hasOutline:!!s.hasOutline},o=this.computeRotatedCenter(i.pointCenterX,i.pointCenterY,s.rotation),a=b.computeDrawingCommandsForDOMLabel(n,i),e.save(),e.rotate(s.rotation),e.translate(o.x,o.y),b.drawCommandsToCtx(a,e),e.restore())}w.restore(e)},T.prototype.computeRotatedCenter=function(e,t,r){var n=Math.cos(-r),i=Math.sin(-r);return{x:e*n-t*i,y:t*n+e*i}},T.prototype.drawForScreenshot=function(e,t,r,n,i){this.takingScreenshot=!0,this.redraw(e,t,n,i),this.takingScreenshot=!1,this.copyToCtx(r)},T.prototype.redraw=function(e,t,r,n){var i=this.computeAllLabels(e,this.cachedLabelDict),o=this.computeHoveredLabel(e,this.cachedLabelDict);o&&(i[o.id]=o);var a=this.computeTraceLabel(e,this.cachedLabelDict);a&&(i[a.id]=a),this.cachedLabelDict=i,this.cachedLabelOrder=Object.keys(i),this.update(),this.positionLabels(t,this.cachedLabelOrder,this.cachedLabelDict,r,n)},T.prototype.clearOpenedPOI=function(){this.openedPOI2Sketch={}},T.prototype.closePOI=function(e){delete this.openedPOI2Sketch[e.id]},T.prototype.openPOI=function(e){this.openedPOI2Sketch[e.id]=e.sketch.id},T.prototype.isOpenPOI=function(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)},T.prototype.isOpenInteractiveLabel=function(e){return!!this.isOpenPOI(e)&&e.hasInteractiveLabel()},T.prototype.isHiddenInteractiveLabel=function(e){return!!e&&!!e.hasInteractiveLabel()&&!this.isOpenPOI(e)&&this.getHoveredPOI()!==e},T.prototype.setHoveredPOI=function(e){this.hoveredPOI=e},T.prototype.getHoveredPOI=function(){return this.hoveredPOI},T.prototype.getHoveredInteractiveLabel=function(){var e=this.getHoveredPOI();return e&&e.hasInteractiveLabel()?e:void 0},T.prototype.setTraceInfo=function(e){this.traceInfo=e},T.prototype.isTracing=function(){return!!this.traceInfo},T.prototype.getTraceInfo=function(){return this.traceInfo},T.prototype.getMQConfig=function(){return{autoOperatorNames:S.getAutoOperators()}},T);function T(){var e=null!==L&&L.apply(this,arguments)||this;return e.labelsDirty=!1,e}t.default=P})),i("graphing/imagelayer",["require","exports","tslib","jquery","dcgview","underscore","./draw-image-to-ctx","./svg-groups","graphing-calc/models/image","core/lib/label","keys","lib/aria","./movablepointslayer"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h,g=i.Components.For,f=(h=i.Class,r.__extends(m,h),m.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}},m.prototype.template=function(){var e=this;return i.createElement(g,{each:function(){return e.renderedTabTargetOrder}},i.createElement("div",{class:i.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),onKeydown:this.bindFn(this.handleKeydown),didMount:function(t){return e.rootNode=t}},(function(t){return i.createElement("div",{class:i.const("dcg-tabbable-draggableimage"),style:function(){return e.getStyle(t)},role:i.const("button"),"aria-roledescription":function(){return e.controller.s("graphing-calculator-narration-draggable-image-description")},"dcg-draggableimage-id":e.const(t),tabindex:function(){return e.getTabIndex()},"aria-hidden":e.bindFn(e.getAriaHidden),"aria-label":function(){return e.getAriaLabel(t)}})})))},m.prototype.redrawToCtx=function(e,t,r,n){this.renderedTabTargets={},this.renderedTabTargetOrder=[],s.save(e,"background-images"),(void 0===n||n.length<o.size(r))&&(n=o.keys(r));for(var i=0,c=n;i<c.length;i++){var u=c[i],d=r[u];d&&d.shouldGraph&&!d.foreground&&a.drawImageToCtx(d,e,t);var p=this.controller.getItemModel(u);if(p&&"image"===p.type&&!p.hidden&&!this.controller.isItemSecret(u)&&l.isActuallyDraggable(p)){var h=p.formula.dimensions;if(!(h&&h.x&&h.y&&h.width&&h.height&&h.radianAngle))return;this.renderedTabTargetOrder.push(u),this.renderedTabTargets[u]={id:u,description:this.grapher.getAudioTrace().getExpressionAriaLabel(p.formula.center_reference_id||p.id),x:h.x[0],y:h.y[0],radianAngle:h.radianAngle[0],width:h.width[0],height:h.height[0],widthScale:Math.abs(t.mapx(1)-t.mapx(0)),heightScale:Math.abs(t.mapy(1)-t.mapy(0)),screenX:t.mapx(h.x[0]),screenY:t.mapy(h.y[0]),centerId:p.formula.center_reference_id}}}s.restore(e),this.update(),this.speakAriaAlert()},m.prototype.getStyle=function(e){var t=this.renderedTabTargets[e];if(t){var r=t.screenX,n=t.screenY,i=t.radianAngle,o=t.width,a=t.height,s=t.widthScale,l=t.heightScale,c=l/s,u=o*s,d=a*l/c;return{position:"absolute",top:0,left:0,transform:"translate("+(r-u/2)+"px, "+(n-d/2)+"px)"+(1==c?"":" scale(1,"+c+")")+(i?" rotate("+i+"rad)":""),width:u+"px",height:d+"px"}}},m.prototype.getTabIndex=function(){var e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1},m.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},m.prototype.getAriaLabel=function(e){var t=this.getAriaAlert({id:e,includeUsageInstructions:!1});return t&&t.completeMessage},m.prototype.speakAriaAlert=function(){var e,t=this.focusedId;t&&!this.renderedTabTargets[t]||(e=this.getAriaAlert({id:t,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0}),(this.lastAriaAlert=e)&&e.completeMessage&&d.alert(e.completeMessage))},m.prototype.getAriaAlert=function(e){var t=e.id,r=e.lastAriaAlert,n=e.includeUsageInstructions;if(t){var i=this.controller.getItemModel(t);if(i&&"image"===i.type){var o=this.renderedTabTargets[t];if(o){r&&r.id!==t&&(r=void 0);var a=r&&r.coordX,s=r&&r.coordY,l=o.x,c=o.y,u=l!==a||c!==s,d=this.grapher.getProjection(),h=p.getCoordsString(l,c,d.viewport)+".",g=o.description,f=n?this.controller.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",m=this.isImageFullyVisible(i,d)?"":this.controller.s("graphing-calculator-narration-draggable-image-off-screen-prompt");return{id:t,coordX:l,coordY:c,completeMessage:r?u?h+m:"":g+". "+h+f+m}}}}},m.prototype.handleFocusChange=function(){var e=void 0;document.activeElement&&n.contains(this.rootNode,document.activeElement)&&(e=n(document.activeElement).attr("dcg-draggableimage-id")),this.focusedId!==e&&(this.focusedId=e,this.lastAriaAlert=void 0,this.requestRedrawNextFrame())},m.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},m.prototype.handleKeydown=function(e){var t,r,n;!this.focusedId||(t=this.renderedTabTargets[this.focusedId])&&(r=u.lookup(e),n=u.lookupChar(e),"Up"===r||"Down"===r||"Left"===r||"Right"===r?(e.stopPropagation(),e.preventDefault(),this.moveImageFromKeyboard(t,e)):"X"!==n&&"Y"!==n&&"L"!==n||this.speakImageAttribute(t,n))},m.prototype.moveImageFromKeyboard=function(e,t){var r,n,i,o,a,s,l,c,d,p;void 0!==e&&void 0!==e.centerId&&(n=(r=this.grapher.getProjection()).map_pt({x:e.x,y:e.y}),o=i=0,a=t.shiftKey?10:2,s=t.shiftKey?"big":"","Up"===(c=u.lookup(t))?(l="y",o-=a,s+="up"):"Down"===c?(l="y",o+=a,s+="down"):"Left"===c?(l="x",i-=a,s+="down"):"Right"===c&&(l="x",i+=a,s+="up"),0===i&&0===o||""===s||(d={x:n.x+i,y:n.y+o},p={},"x"===l||this.hasNonlinearMoveStrategy(e.centerId)?p={x:s}:"y"===l&&(p={y:s}),this.controller.dispatch({type:"on-move-point",pointInfo:{sketch:{id:e.centerId}},screenPt:d,projection:r,keyboardDirection:p})))},m.prototype.speakImageAttribute=function(e,t){if(e&&this.grapher.getAudioTrace()){var r=this.grapher.getProjection();if(r){var n=r.viewport;switch(t){case"X":d.alert("X: "+c.value(e.x,n.xmax-n.xmin).ariaString);break;case"Y":d.alert("Y: "+c.value(e.y,n.ymax-n.ymin).ariaString);break;case"L":d.alert(e.description)}}}},m.prototype.hasNonlinearMoveStrategy=function(e){if(!e)return!1;var t=this.controller.getItemModel(e);if(!t||"expression"!==t.type||!t.formula)return!1;var r=t.formula.move_strategy;return!(!r||!r[0])&&"updateSliderNonlinear"===r[0].type},m.prototype.isImageFullyVisible=function(e,t){var r=e.formula.dimensions;if(!r||!r.x||!r.y)return!1;for(var n=0;n<r.x.length;n++)if(!t.coordsAreOnscreen(t.mapx(r.x[n]),t.mapy(r.y[n])))return!1;return!0},m);function m(){return null!==h&&h.apply(this,arguments)||this}t.default=f})),i("graphing/clickableobject-layer",["require","exports","tslib","dcgview","jquery","graphing-calc/models/expression","graphing-calc/models/image"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.For,c=(s=n.Class,r.__extends(u,s),u.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}},u.prototype.template=function(){var e=this;return n.createElement(l,{each:function(){return e.renderedTabTargetOrder}},n.createElement("div",{class:n.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),didMount:function(t){return e.rootNode=t}},(function(t){return n.createElement("div",{class:n.const("dcg-tabbable-clickableobject"),role:n.const("button"),"aria-roledescription":function(){return e.controller.s("graphing-calculator-narration-clickable-object-description")},"dcg-clickableobject-id":e.const(t),tabindex:function(){return e.getTabIndex()},"aria-hidden":e.bindFn(e.getAriaHidden),"aria-label":function(){return e.getAriaLabel(t)},onTap:function(){e.controller.dispatch({type:"clickable-item-clicked",id:t})}})})))},u.prototype.redraw=function(){var e;this.renderedTabTargets={},this.renderedTabTargetOrder=[];var t,r=this.grapher.graphSketches;for(e in r)r[e].visible&&(n=this.controller.getItemModel(e))&&"expression"===n.type&&o.isClickableObject(n)&&(this.renderedTabTargetOrder.push(e),t=""!==n.clickableInfo.description?n.clickableInfo.description:this.grapher.getAudioTrace().getExpressionAriaLabel(e),this.renderedTabTargets[e]={id:e,description:t});var n,i=this.grapher.graphImages;for(e in i)i[e].hidden||this.controller.isItemSecret(e)||(n=this.controller.getItemModel(e))&&"image"===n.type&&a.isClickableObject(n)&&(this.renderedTabTargetOrder.push(e),this.renderedTabTargets[e]={id:e,description:n.clickableInfo.description});this.renderedTabTargets[this.hoveredId]||this.setHoveredId(void 0),this.renderedTabTargets[this.pressedId]||this.setPressedId(void 0),this.hoveredId||this.pressedId?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0),this.update()},u.prototype.getTabIndex=function(){var e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1},u.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},u.prototype.getAriaLabel=function(e){var t=this.renderedTabTargets[e];return t?t.description:""},u.prototype.shouldDrawHovered=function(e){return e===this.focusedId||!(this.isAnObjectPressed()&&!this.isObjectPressed(e))&&this.isObjectHovered(e)},u.prototype.isObjectHovered=function(e){return void 0!==e&&this.hoveredId===e},u.prototype.setHoveredId=function(e){e!==this.hoveredId&&(this.hoveredId=e,this.requestRedrawNextFrame())},u.prototype.shouldDrawPressed=function(e){return this.isObjectPressed(e)},u.prototype.isObjectPressed=function(e){return void 0!==e&&this.pressedId===e},u.prototype.setPressedId=function(e){e!==this.pressedId&&(this.pressedId=e,this.requestRedrawNextFrame())},u.prototype.getPressedId=function(){return this.pressedId},u.prototype.isAnObjectPressed=function(){return!!this.pressedId},u.prototype.handleFocusChange=function(){var e=void 0;document.activeElement&&i.contains(this.rootNode,document.activeElement)&&(e=i(document.activeElement).attr("dcg-clickableobject-id")),this.focusedId!==e&&(this.focusedId=e,this.requestRedrawNextFrame())},u.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("graphing/grapher",["require","exports","main/graph_settings","./canvaslayer","./poidotslayer","./gridlayer","./graphslayer","./viewportcontroller","./poicontroller","vendor/canvas2svg","dcgview","jquery","underscore","./viewport","./screen","./graphsketch","./projection","underscore_model","./audiograph","./canvas-braille","./braille-size-options","core/lib/deepCopy","core/lib/default-spec","core/graphing-calc/json/graph-settings","graphing/tonegenerator","./movablepointslayer","./poilabelslayer","./imagelayer","./clickableobject-layer","./svg-classes","./svg-groups"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S,E,_,k,M,I,C,L,P){"use strict";function T(){return new h.Viewport(-10,10,-10,10)}Object.defineProperty(t,"__esModule",{value:!0}),t.Grapher=void 0;var A=(O.prototype.remove=function(){this.$.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()},O.prototype.tick=function(e){this.__isRedrawingSlowly?this._redrawSlowly():this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()},O.prototype.registerMovablePointListener=function(e){this.__movablePointListener=e},O.prototype.deregisterMovablePointListener=function(){this.__movablePointListener=void 0},O.prototype.setSketchOrder=function(e){p.isEqual(this.__sketchOrder,e)||(this.__sketchOrder=e,this.redrawAllLayers())},O.prototype.clear=function(){this.graphSketches={},this.graphImages={}},O.prototype.getGraphSketch=function(e){return this.graphSketches[e]},O.prototype.getGraphImage=function(e){return this.graphImages[e]},O.prototype.addGraphSketch=function(e){this.graphSketches[e.id]=e},O.prototype.removeGraphSketch=function(e){delete this.graphSketches[e]},O.prototype.addGraphImage=function(e){var t=this;e.imageObj.width&&e.imageObj.height?(this.graphImages[e.id]=e,this.redrawAllLayers()):d(e.imageObj).on("load.calc_load",(function(){return t.addGraphImage(e)}))},O.prototype.removeGraphImage=function(e){var t=this.graphImages[e];t&&d(t.imageObj).off("load.calc_load"),delete this.graphImages[e],this.redrawAllLayers()},O.prototype.getProjection=function(){return this.__projection},O.prototype._setProjection=function(e){this.__projection=e,this.redrawAllLayers()},O.prototype.getAudioTrace=function(){return this.audioGraph},O.prototype.getDefaultViewport=function(){var e=this.getProjection();return T().squareYAxis(e.screen)},O.prototype._updateScreenSize=function(e,t){var r,n;e<=0||t<=0||(r=this.getProjection().screen).width===e&&r.height===t||(this.$.width(e),n=new g.Screen(e,t),this.viewportController.setScreen(n))},O.prototype._setIsVisible=function(e){e!==this.isVisible&&((this.isVisible=e)?this.redrawAllLayers():this.canvasLayer.resize(0,0))},O.prototype.update=function(){var e=this.controller.computeMajorLayout().grapher;0<e.width&&0<e.height?(this._setIsVisible(!0),this._updateScreenSize(e.width,e.height),this.$.css({position:"absolute",left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px"})):this._setIsVisible(!1)},O.prototype.hide=function(e){var t=this.getGraphSketch(e);t&&(t.visible=!1)},O.prototype.select=function(e){var t;!this.selectedId||(t=this.getGraphSketch(this.selectedId))&&(t.selected=!1,t.showPOI=!1,t.showHighlight=!1);var r=this.getGraphSketch(e);r&&(r.selected=!0,r.showPOI=this.controller.isTraceEnabled(),r.showHighlight=!0),this.selectedId=e},O.prototype.updateSketch=function(e,t){var r=this.getGraphSketch(e);if(!t.length)return this.hide(e);var n=new f.GraphSketch(e,t);n.color=t[0].color,t[0].style&&(n.style=t[0].style),r&&n.updateFrom(r);var i=String(e)===String(this.selectedId);n.selected=i,n.showPOI=i&&this.controller.isTraceEnabled(),n.showHighlight=i,this.addGraphSketch(n)},O.prototype.updateIntersections=function(e,t){var r=this.getGraphSketch(e);r&&r.updateIntersections(t)},O.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.__redrawRequested=!0},O.prototype._clear=function(){var e=this.getProjection(),t=e.screen;this.canvasLayer.resize(e.screen.width,e.screen.height),this.canvasLayer.ctx.clearRect(0,0,t.width,t.height)},O.prototype._redrawAllLayers=function(){this.isVisible&&(this.__redrawRequested=!1,this._clear(),this.audioGraph.recomputePoints(),this._recomputeClickableObjects(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPointsAndLabels(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",void 0))},O.prototype.cancelRedrawSlowly=function(){this.__isRedrawingSlowly&&(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.redrawAllLayers())},O.prototype.redrawSlowly=function(){this.__isRedrawingSlowly||(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!0,this.audioGraph.recomputePoints())},O.prototype._redrawSlowly=function(){var e,t,r,n,i,o=this.__redrawSlowlyIndex;0===o&&(this._clear(),this._redrawGridLayer()),o>=this.__sketchOrder.length?this.cancelRedrawSlowly():((e={})[r=this.__sketchOrder[o]]=this.graphSketches[r],n=e,(t={})[r]=this.graphImages[r],((i=t)[r]||n[r])&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),n,i,[r],this.poiLabelsLayer,this.clickableObjectsLayer),this.__redrawSlowlyIndex+=1)},O.prototype._redrawGridLayer=function(){this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)},O.prototype._recomputeClickableObjects=function(){this.clickableObjectsLayer.redraw()},O.prototype._redrawGraphsLayer=function(){this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)},O.prototype._updateCanvasLayerAria=function(){var e=0;for(var t in this.graphSketches)_.canPlaySketch(this.graphSketches[t])&&(e+=1);this.canvasLayer.updateAria(this.isVisible,e)},O.prototype._redrawPointsAndLabels=function(){var e=this.getProjection(),t=[];this.movablePointsLayer.redraw(this.canvasLayer.ctx,e,t),this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,e,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer);var r=this.$[0].getBoundingClientRect();p.each([this.controller.find$(".dcg-overgraph-pillbox-elements")[0],this.controller.find$(".dcg-graphpaper-branding")[0]],(function(e){var n;e&&(n=e.getBoundingClientRect(),t.push({left:n.left-r.left,top:n.top-r.top,right:n.right-r.left,bottom:n.bottom-r.top}))}));var n=this.canvasLayer.ctx.canvas.getBoundingClientRect();this.poiLabelsLayer.redraw(e,this.canvasLayer.ctx,{width:n.width,height:n.height},t)},O.prototype._redrawImageLayer=function(){this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)},O.prototype._parseScreenshotOpts=function(e){var t,n,i,o,a,s=this.getProjection(),l=e?(t=e.width||e.height||s.screen.width,n=e.height||e.width||s.screen.height,i=e.targetPixelRatio||1,o=(t<256||n<256)&&!e.preserveAxisNumbers,a=r.fromObject(e.settings||this.settings),!!e.transparentBackground):(t=s.screen.width,n=s.screen.height,o=!(i=1),a=r.fromObject(this.settings),!1);return o&&(a.setProperty("xAxisNumbers",!1),a.setProperty("yAxisNumbers",!1),a.setProperty("polarNumbers",!1)),{width:t,height:n,targetPixelRatio:i,settings:a,transparentBackground:l}},O.prototype._syncScreenshotReturnCanvas=function(e){var t,r,n,i,o,a=document.createElement("canvas");return e&&e.braille?(r=(t=e.braille).embosserModel,n=t.brailleMode,i=x.brailleSizes[r],a.width=i.width,a.height=i.height,b.createBrailleImage(a,this,i,r,n)):(o=this._parseScreenshotOpts(e),a.width=o.width*o.targetPixelRatio,a.height=o.height*o.targetPixelRatio,this.screenshotToCanvas(a,e)),a},O.prototype.screenshot=function(e){return this._syncScreenshotReturnCanvas(e).toDataURL("image/png")},O.prototype.asyncScreenshot=function(e,t){var r=this,n=!1;!e.transparentBackground&&e.showLabels&&(n=(e=w.default(e)).transparentBackground=!0);var i=this._syncScreenshotReturnCanvas(e),o=i.getContext("2d"),a=i,s=o;e&&"svg"===e.format&&(n=!1,e.transparentBackground&&((e=w.default(e)).transparentBackground=!1),s=new c(i.width,i.height),a={getContext:function(){return s},width:i.width,height:i.height},this.screenshotToCanvas(a,e));var l,p,h,g,f,m,y,v=this.makeScreenshotProjection(e),b=[];e.showMovablePoints&&this.movablePointsLayer.drawForScreenshot(s,v,b),e.showLabels&&(l=v.screen.width,p=v.screen.height,h=v.settings.labelSize||15,f=(g=d('<div class="dcg-calculator-api-container">\n          <div class="dcg-container">\n            <div class="dcg-grapher" style="font-size:'+h*(l<200||p<200?.9:1)+'px"></div>\n          </div>\n        </div>').css({width:v.screen.width,height:v.screen.height,position:"absolute",left:"0px",top:"0px"}).appendTo("body")).find(".dcg-grapher"),m=u.mountToNode(M.default,f[0],{grapher:function(){return r}}),y={width:v.screen.width,height:v.screen.height},m.drawForScreenshot(v,o,s,y,b),g.remove()),n&&(s.globalCompositeOperation="destination-over",s.fillStyle="#FFF",s.fillRect(0,0,a.width,a.height)),e&&"svg"===e.format?t(s.getSerializedSvg()):t(a.toDataURL("image/png"))},O.prototype.makeScreenshotProjection=function(e){var t=this._parseScreenshotOpts(e),r=t.width,n=t.height,i=t.settings,o=new g.Screen(r,n),a=this.getProjection().viewport;return this.getSetting("squareAxes")&&(a=a.squareCrop(o)),new m.Projection(o,a,i)},O.prototype.screenshotToCanvas=function(e,t){var r=this._parseScreenshotOpts(t),n=r.targetPixelRatio,i=r.transparentBackground,o=e.getContext("2d");o.scale(n,n);var a=this.makeScreenshotProjection(t);a.settings.takingScreenshot=!0,P.save(o,"background"),L.save(o,"dcg-svg-background"),i?o.clearRect(0,0,a.screen.width,a.screen.height):(o.fillStyle="white",o.fillRect(0,0,a.screen.width,a.screen.height)),L.restore(o),P.restore(o),this.imageLayer.redrawToCtx(o,a,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(o,a),this.graphsLayer.redrawToCtx(o,a,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer,t)},O.prototype.getImageData=function(e,t,r,n){return this.canvasLayer.ctx.getImageData(e,t,r,n)},O.prototype.getSetting=function(e,t){var r=this.settings.getProperty(e);return void 0!==r?r:t},O.prototype.getState=function(e){var t=this,r={viewport:this.getCurrentViewport()};return this.settings.stateProperties.forEach((function(e){"randomSeed"!==e&&(r[e]=t.getSetting(e))})),e.stripDefaults&&(r=S.stripDefaults(E.DefaultGraphSettings,r)),r},O.prototype.getUndoRedoState=function(){var e=this,t={};return this.settings.stateProperties.forEach((function(r){t[r]=e.getSetting(r)})),t.viewport=this.getUserRequestedViewport(),t},O.prototype.notifyAfterRedraw=function(e){var t,r=this;this.__isRedrawingSlowly?requestAnimationFrame(this.notifyAfterRedraw.bind(this,e)):this.__redrawRequested?(this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1,t="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i,this.events.observeEvent(t,(function(){r.events.unobserveEvent(t),e()}))):e()},O.prototype.getCurrentViewport=function(){return this.viewportController.getViewport().toObject()},O.prototype.getUserRequestedViewport=function(){return this._lastUserRequestedViewport},O.prototype.setUserRequestedViewport=function(e){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=w.default(e)},O.prototype.debounceUserRequestedViewportChange=function(){var e=this;this.__debouncedViewportCommit||(this.__debouncedViewportCommit=p.debounce((function(t,r){if(!e.isDragging&&e._lastUserRequestedViewportUpdateToken===r){if(e._lastUserRequestedViewport){var n=h.Viewport.fromObject(e._lastUserRequestedViewport);if(e.computeConcreteViewport(n).equals(t))return}e.controller.dispatch({type:"commit-user-requested-viewport",viewport:t})}}),1e3));var t=this.getCurrentViewport();this.__debouncedViewportCommit(t,this._lastUserRequestedViewportUpdateToken)},O.prototype.setGrapherState=function(e,t){for(var r in e=S.populateDefaults(E.DefaultGraphSettings,e),t&&t.doNotClear||this.clear(),E.DefaultGraphSettings)E.DefaultGraphSettings.hasOwnProperty(r)&&this.settings.setProperty(r,e[r]);var n,i;"viewport"in e&&(n=h.Viewport.fromObject(e.viewport),this.setUserRequestedViewport(n),i=this.computeConcreteViewport(n),this.viewportController.setViewport(i)),this.redrawAllLayers()},O.prototype.computeConcreteViewport=function(e){var t=this.getProjection().screen;return this.getSetting("squareAxes")&&!e.isSquare(t)?e.squareYAxis(t):e},O.prototype.setLayerClass=function(e,t){var r=this._layerClasses[e];r!==(this._layerClasses[e]=t)&&(r&&this.$.removeClass(r),t&&this.$.addClass(t))},O);function O(e,t,r,c){var h=this;this.type="2d",this._layerClasses={},this.$=e,this.evaluator=c,this.controller=r,this.settings=t;var f=new g.Screen(1024,768),b=T().squareYAxis(f);this.setUserRequestedViewport(b),this.__projection=new m.Projection(f,b,t),this.markLabelsDirty=p.debounce((function(){h.evaluator.notifyWhenSynced((function(){h.__isRedrawingSlowly?h.notifyAfterRedraw((function(){h.poiLabelsLayer.markLabelsDirty(),h.redrawAllLayers()})):(h.poiLabelsLayer.markLabelsDirty(),h.redrawAllLayers())}))}),300),this.poiController=new l(this,t),this.viewportController=s(this,this.controller),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.graphSketches={},this.graphImages={},this.audioGraph=new v.default(r,this),this.canvasLayer=n(this),this.$.append(this.canvasLayer.$);var x=d("<div></div>");this.$.append(x);var w=this;this.imageLayer=u.mountToNode(I.default,x[0],{grapher:function(){return w}}),this.gridLayer=o(),this.poiDotsLayer=i(),this.graphsLayer=a(this.settings,(function(e){return h.audioGraph.getExpressionAriaLabel(e)}));var S=d("<div></div>");this.$.append(S),w=this,this.clickableObjectsLayer=u.mountToNode(C.default,S[0],{grapher:function(){return w}});var E=d("<div></div>");this.$.append(E),w=this,this.movablePointsLayer=u.mountToNode(k.default,E[0],{grapher:function(){return w}});var _=d("<div></div>");this.$.append(_),this.poiLabelsLayer=u.mountToNode(M.default,_[0],{grapher:function(){return w}}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0,this.__sketchOrder=[],this.selectedId=void 0,this.__redrawRequested=!1,this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.events=new y.UnderscoreModel}t.Grapher=A})),i("api/util",["require","exports","lib/console"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateLanguage=void 0,t.validateLanguage=function(e){return"es-ES"===e?(r.warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):e}})),i("loadcss!tour",(function(){})),i("loadcss!calculator_embed",(function(){})),i("loadcss!buttons",(function(){})),i("loadcss!dcg-normalize",(function(){})),i("loadcss!projector_mode",(function(){})),i("loadcss!desmos-icons",(function(){})),i("loadcss!popovers",(function(){})),i("main/calc_embed",["require","exports","main/graph_settings","tours/tour_manager","tslib","jquery","main/controller","dcgview","main/instancehotkeys","lib/console","underscore","lib/defocus-mobile","graphing-calc/views/main","underscore_model","graphing/viewport","main/evaluator","graphing/grapher","core/lib/color-helpers","api/util","lib/parse-query-params","loadcss!tour","loadcss!calculator_embed","loadcss!buttons","loadcss!dcg-normalize","loadcss!projector_mode","loadcss!desmos-icons","loadcss!popovers"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x,w=0,S=(E.prototype.setOption=function(e,t){this.controller.getGraphSettings().config.setProperty(e,t)},E.prototype.setOptions=function(e){var t,r=this.controller.getGraphSettings().config,n=i.__assign({},e);function o(e){var t=e.notes,r=e.folders,n=e.images;return!1===t||!1===r||!1===n}e.hasOwnProperty("backgroundColor")&&(y.isValidHexColor(e.backgroundColor)||(c.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete n.backgroundColor)),e.hasOwnProperty("textColor")&&(y.isValidHexColor(e.textColor)||(c.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete n.textColor)),e.hasOwnProperty("menus")&&(c.warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),e.hasOwnProperty("settingsMenu")||(n.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(n.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(c.warn("Deprecated option: solutions. Setting pointsOfInterest instead."),e.hasOwnProperty("pointsOfInterest")||(n.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&c.warn("Deprecated option: singleVariableSolutions has been removed."),!1===e.graphpaper&&(e.expressionsCollapsed&&(n.expressionsCollapsed=!1,c.warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),r.expressionsCollapsed&&(n.expressionsCollapsed=!1,c.warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),e.zoomButtons&&(n.zoomButtons=!1,c.warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(n.showResetButtonOnGraphpaper=!1,c.warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),r.zoomButtons&&(n.zoomButtons=!1,c.warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),r.showResetButtonOnGraphpaper&&(n.showResetButtonOnGraphpaper=!1,c.warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),!1===r.graphpaper&&(e.expressionsCollapsed||e.zoomButtons||e.showResetButtonOnGraphpaper)&&(n.graphpaper=!0,c.warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),e.lockViewport&&e.zoomButtons&&(n.zoomButtons=!1,c.warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),r.lockViewport&&e.zoomButtons&&(n.lockViewport=!1,c.warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),r.zoomButtons&&e.lockViewport&&(n.zoomButtons=!1,c.warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));var a=o(e),s=o(i.__assign(i.__assign({},r),e)),l=r.pasteGraphLink,u=e.pasteGraphLink;for(t in a?(u||l)&&(n.pasteGraphLink=!1,c.warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):u&&s&&(n.notes=!0,n.folders=!0,n.images=!0,c.warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true.")),e.language&&(n.language=v.validateLanguage(e.language)),n)if(n.hasOwnProperty(t))switch(t){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!n.expressionsCollapsed),n.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}):this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!n.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!n.degreeMode),this.controller.getGraphSettings().setGraphSettings({degreeMode:!!n.degreeMode});break;case"keypad":case"graphpaper":case"expressions":case"settingsMenu":case"zoomButtons":case"showResetButtonOnGraphpaper":case"expressionsTopbar":case"pointsOfInterest":case"trace":case"border":case"lockViewport":case"administerSecretFolders":case"advancedStyling":case"clickableObjects":case"images":case"imageUploadCallback":case"folders":case"notes":case"sliders":case"links":case"restrictedFunctions":case"forceEnableGeometryFunctions":case"distributions":case"pasteGraphLink":case"pasteTableData":case"clearIntoDegreeMode":case"autosize":case"plotSingleVariableImplicitEquations":case"plotImplicits":case"plotInequalities":case"colors":case"branding":case"disableScrollFix":case"invertedColors":case"fontSize":case"projectorMode":case"language":case"redrawSlowly":case"onlyTraceSelected":case"disableMouseInteractions":case"nativeOnscreenKeypad":case"functionDefinition":case"plaidMode":case"pasteGraphLinkCallback":case"editOnWeb":case"crossOriginSaveTest":case"backgroundColor":case"textColor":case"enableTabindex":case"audioTraceReverseExpressions":case"showHamburger":case"decimalToFraction":case"capExpressionSize":case"transparentBackground":case"pauseWhenOffscreen":case"brailleMode":case"sixKeyInput":case"brailleControls":case"zoomFit":case"forceLogModeRegressions":var d=n[t];void 0!==d&&this.setOption(t,d);break;default:return t}},E.prototype.setViewport=function(e){this.grapher.viewportController.setViewport(new g.Viewport(e[0],e[1],e[2],e[3]))},E.prototype.resize=function(e){e&&this.controller.dispatch({type:"ui/container-resized",size:e})},E.prototype.interceptTouch=function(){var e=o(this.rootElt),t=e.find(".dcg-expression-top-bar");t.add(e.find(".dcg-keypad")),t.length&&(t.on("touchstart",(function(e){o(e.target).is("input, textarea")||e.preventDefault()})),t.on("touchend",(function(e){0<o(e.target).closest(".dcg-do-not-blur").length||d.default()})))},E.prototype.destroy=function(){o(window).off(".calculator-"+this.__id);var e=o(this.rootElt);e.off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),s.unmountFromNode(this.rootElt),e.remove()},E.prototype.tick=function(e,t){t||(this.controller.shouldDispatchTickNextFrame()&&this.controller.dispatch({type:"tick",time:e}),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(e)},E.prototype.getState=function(e){return this.controller.getState(e)},E.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},E.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},E);function E(e,t,i,c){var d=this;e=e||document.createElement("div");var g=document.createElement("div");g.className="dcg-wrapper",g.style.width="100%",g.style.height="100%",e.appendChild(g),this.__id=w++;var y=new r;for(var v in this.graphSettings=y,i)y.config.setProperty(v,i[v]);var b=new a.default(y);this.controller=b,c&&b.dispatch({type:"ui/container-resized",size:c}),this.rootElt=g,this.view=s.mountToNode(p.default,this.rootElt,{controller:s.const(b)});var x=new f.Evaluator(t);this.controller.setEvaluator(x),this.controller.setRootElt(this.rootElt);var S=b.find$(".dcg-grapher"),E=new m.Grapher(S,y,this.controller,x);this.controller.setGrapher(E),y.registerCallbacks(E,x),this.controller.initStateStack(),y.config.redrawSlowly||(E.redrawSlowly=E.redrawAllLayers),x.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:y.randomSeed,degreeMode:y.degreeMode,viewState:b.getViewState(),intersectId:b.getIntersectId(),restrictedFunctions:y.config.restrictedFunctions,forceEnableGeometryFunctions:y.config.forceEnableGeometryFunctions,distributions:y.config.distributions,pointsOfInterest:y.config.pointsOfInterest,plotSingleVariableImplicitEquations:y.config.plotSingleVariableImplicitEquations,plotImplicits:y.config.plotImplicits,plotInequalities:y.config.plotInequalities,sliders:y.config.sliders}},x.onEvaluatorResults=function(e){d.controller.dispatch({type:"on-evaluator-changes",changes:e.evaluationStates,timingData:e.timingData,graphData:e.graphData}),e.renderSlowly?E.redrawSlowly():E.redrawAllLayers()},this.unsubFunc=this.controller.subToChanges((function(){d.controller.doesDOMHaveSize()&&(d.view.update(),E.update());var e=!1;!function(){var e=!1,t=b.computeMajorLayout(),r={left:t.grapher.left,right:t.grapher.left+t.grapher.width,width:t.grapher.width,top:t.grapher.top,bottom:t.grapher.top+t.grapher.height,height:t.grapher.height},n=E.getCurrentViewport(),i={top:n.ymax,bottom:n.ymin,left:n.xmin,right:n.xmax,width:n.xmax-n.xmin,height:n.ymax-n.ymin};return u.isEqual(i,_.mathCoordinates)||(_.setProperty("mathCoordinates",i),e=!0),0<r.height&&0<r.width&&!u.isEqual(r,_.pixelCoordinates)&&(_.setProperty("pixelCoordinates",r),e=!0),e}()||(e=!0),function(){var e=!1,t=E.getProjection(),r=E.viewportController.isZoomRestored();r!==y.zoomedDefault&&(y.setProperty("zoomedDefault",r),e=!0);var n=t.viewport.isSquare(t.screen);return n!==y.squareAxes&&(y.setProperty("squareAxes",n),e=!0),e}()&&(e=!0),e&&d.controller.doesDOMHaveSize()&&(d.view.update(),E.update())}));var _=new h.UnderscoreModel;_.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=_,o(this.rootElt).on("keydown.calculator-"+this.__id,(function(e){d.grapher&&d.grapher.audioGraph.handleKeydown(e),d.instanceHotkeys.handleKeydown(e)})),o(window).on("dcg-tapstart.calculator-"+this.__id,(function(e){var t,r=o(e.target),n=!!r.closest(d.rootElt).length,i=e.wasHandled("create-expression-with-keyboard"),a=!!r.closest(".dcg-api-shared-keypad-root").length,s=!!r.hasClass("dcg-shell");n||a||s||i||b.dispatch({type:"set-none-selected"}),e.wasHandled("do-not-clear-poi-labels")||(E.traceLayer.clearOpenedPOI(),E.redrawAllLayers()),b.isInEditListMode()&&(t=0===r.closest(".dcg-exppanel").length&&0===r.closest(".dcg-options-menu").length&&0===r.closest(".dcg-expression-top-bar").length&&0===r.closest(".dcg-keypad").length,n&&!t||b.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}))})),this.grapher=E,this.evaluator=x,this.tourManager=n({evaluator:x}),this.controller.dispatch({type:"set-blank"});var k={};["degreeMode"].forEach((function(e){void 0!==i[e]&&(k[e]=i[e])})),y.setGraphSettings(k),y.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),y.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),y.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:y.config.pointsOfInterest}),y.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:y.config.backgroundColor}),y.config.hasOwnProperty("textColor")&&this.setOptions({textColor:y.config.textColor}),y.config.observe("language",(function(){var e=d.controller.getState();d.controller.dispatch({type:"set-state",state:e}),d.tourManager&&(d.tourManager.closingMsg=function(e,t){return"<b>"+e+"</b><br>"+d.controller.s("graphing-tours-label-self-destruct",{seconds:t})})})),y.config.observe("forceLogModeRegressions",(function(){y.config.forceLogModeRegressions&&d.controller.setAllRegressionsToLogMode()})),this.instanceHotkeys=new l.default(b)}function _(){var e=o('<div style="z-index:99999; position: absolute; left: 0; top: 0;background:#FFF">waiting...</div>').appendTo("body"),t=window,r=[];t.Calc.controller.onEvaluatorChangesSpy=function(){r.push(Date.now())},setInterval((function(){for(var t=Date.now();1e3<t-r[0];)r.shift();e.text(r.length+" fps")}),100)}function k(){var e,t=o('<div style="z-index:99999; position: absolute; left: 0; top: 0;background:#FFF">waiting...</div>').appendTo("body"),r=window,n=[],i=0;r.Calc.controller.onEvaluatorChangesSpy=function(e,t){var r=t.timeInWorker;n[i%100]=r,i+=1},function r(){cancelAnimationFrame(e),e=requestAnimationFrame(r),function(){for(var e=0,r=0,i=n;r<i.length;r++)e+=i[r];var o=e/n.length;t.text(o.toFixed(1)+" ms")}()}()}t.default=S,b.getQueryParams().simulationFPS&&(x=setInterval((function(){window.Calc&&(clearInterval(x),setTimeout(_,1e3))}),1)),b.getQueryParams().timeInWorker&&(x=setInterval((function(){window.Calc&&(clearInterval(x),setTimeout(k,1e3))}),1))})),i("lib/dom-change-detector",["require","exports","tslib","jquery"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAllWatchingDetectors=t.testFixture=void 0;var i=1,o={},a=!1;function s(){a=!0,requestAnimationFrame(l)}function l(){for(var e in t.testFixture.rafSPY&&t.testFixture.rafSPY(),a=!1,o)o[e].detectAndEnqueueEvent(),a=!0;if(a)for(var e in s(),o)o[e].dispatchQueuedEvent()}t.testFixture={},t.checkAllWatchingDetectors=l;var c=(u.prototype.stopWatching=function(){delete o[this.id]},u.prototype.startWatching=function(){this.checkForChanges(),o[this.id]=this,a||s()},u.prototype.resetAppliedScalingAndGetBoundingClientRect=function(){var e=this.elt.getBoundingClientRect(),t={x:e.width/this.elt.offsetWidth,y:e.height/this.elt.offsetHeight};if(t.x===this.appliedScale.x&&t.y===this.appliedScale.y)return e;var r=n(this.elt).children(".dcg-wrapper")[0];return r&&(this.appliedScale=t,n(r).css({transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%","transform-origin":"0 0"})),e},u.prototype.detectAndEnqueueEvent=function(){var e,t;this.destroyed||(t=!0,document.body&&document.body.contains(this.elt)?(t=(e=this.resetAppliedScalingAndGetBoundingClientRect()).top>window.innerHeight||e.bottom<0||e.left>window.innerWidth||e.right<0,this.lastSize?e.width===this.lastSize.width&&e.height===this.lastSize.height||(this.lastSize.width=e.width,this.lastSize.height=e.height,this.queuedEvent={type:"resized",target:this.elt,size:r.__assign({},this.lastSize),isOffscreen:t}):(this.lastSize={width:e.width,height:e.height},this.queuedEvent={type:"added",target:this.elt,size:r.__assign({},this.lastSize),isOffscreen:t})):this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0}),t!==this.lastOffscreen&&(this.lastOffscreen=t,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:t})))},u.prototype.dispatchQueuedEvent=function(){var e=this.queuedEvent;e&&(this.queuedEvent=void 0,this.cb(e))},u.prototype.checkForChanges=function(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()},u.prototype.destroy=function(){for(var e in this.stopWatching(),this)this.hasOwnProperty(e)&&delete this[e];this.destroyed=!0},u);function u(e,t){this.elt=e,this.cb=t,this.destroyed=!1,this.lastOffscreen=!1,this.id=i.toString(),this.appliedScale={x:1,y:1},i++}t.default=c})),i("graphing/compute-async-screenshot-bounds",["require","exports","lib/console"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeBoundsFromScreenshotOpts=void 0,t.computeBoundsFromScreenshotOpts=function(e){var t=e.mode,n=e.width,i=e.height,o=e.currentBounds,a=e.graphpaperAspectRatio,s=e.mathAspectRatio,l=e.mathBounds,c=n/i,u=o.left+o.width/2,d=o.bottom+o.height/2;if(void 0===l.left!=(void 0===l.right)||void 0===l.bottom!=(void 0===l.top))return r.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+l),o;var p,h,g,f,m,y,v,b,x,w=void 0!==l.left&&void 0!==l.right,S=void 0!==l.bottom&&void 0!==l.top,E=w&&S;switch(t){case"stretch":return E?l:w?{left:l.left,right:l.right,bottom:o.bottom,top:o.top}:S?{left:o.left,right:o.right,bottom:l.bottom,top:l.top}:o;case"contain":return E?(g=l.right-l.left,f=l.top-l.bottom,m={x:l.left+g/2,y:l.bottom+f/2},g/f<c?(p=(h=f/i)*s,{left:m.x-p*n/2,right:m.x+p*n/2,bottom:l.bottom,top:l.top}):(h=(p=g/n)/s,{left:l.left,right:l.right,bottom:m.y-h*i/2,top:m.y+h*i/2})):w?(y=l.right-l.left,v=l.left+y/2,y/o.height<c?{left:v-(p=(h=o.height/i)*s)*n/2,right:v+p*n/2,bottom:o.bottom,top:o.top}:(h=(p=y/n)/s,{left:l.left,right:l.right,bottom:d-h*i/2,top:d+h*i/2})):S?(b=l.top-l.bottom,x=l.bottom+b/2,o.width/b<c?{left:u-(p=(h=b/i)*s)*n/2,right:u+p*n/2,bottom:l.bottom,top:l.top}:(h=(p=o.width/n)/s,{left:o.left,right:o.right,bottom:x-h*i/2,top:x+h*i/2})):a<c?{left:u-(p=(h=o.height/i)*s)*n/2,right:u+p*n/2,bottom:o.bottom,top:o.top}:(h=(p=o.width/n)/s,{left:o.left,right:o.right,bottom:d-h*i/2,top:d+h*i/2});case"preserveX":return E?(g=l.right-l.left,f=l.top-l.bottom,m={x:l.left+g/2,y:l.bottom+f/2},h=(p=g/n)/s,{left:l.left,right:l.right,bottom:m.y-h*i/2,top:m.y+h*i/2}):S?(b=l.top-l.bottom,x=l.bottom+b/2,o.width,h=(p=o.width/n)/s,{left:o.left,right:o.right,bottom:x-h*i/2,top:x+h*i/2}):w?(h=(p=(y=l.right-l.left)/n)/s,{left:l.left,right:l.right,bottom:d-h*i/2,top:d+h*i/2}):(h=(p=(y=o.right-o.left)/n)/s,{left:o.left,right:o.right,bottom:d-h*i/2,top:d+h*i/2});case"preserveY":return E?(g=l.right-l.left,p=(h=(f=l.top-l.bottom)/i)*s,{left:(m={x:l.left+g/2,y:l.bottom+f/2}).x-p*n/2,right:m.x+p*n/2,bottom:l.bottom,top:l.top}):w?(y=l.right-l.left,v=l.left+y/2,o.height,{left:v-(p=(h=o.height/i)*s)*n/2,right:v+p*n/2,bottom:o.bottom,top:o.top}):S?{left:u-(p=(h=(b=l.top-l.bottom)/i)*s)*n/2,right:u+p*n/2,bottom:l.bottom,top:l.top}:{left:u-(p=(h=(b=o.top-o.bottom)/i)*s)*n/2,right:u+p*n/2,bottom:o.bottom,top:o.top};default:return o}}})),i("dcgview-helpers/mathquill-proxy",["require","exports","dcgview-helpers/mathquill-view"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathQuillProxy=void 0;var n=(i.prototype.simulateUserChangedLatex=function(){r.default.simulateUserChangedLatex(this.mq)},i.prototype.simulateKeypress=function(e){r.default.simulateKeypress(this.mq,e)},i.prototype.latex=function(e){return void 0===e?this.mq.latex():(this.mq.latex(e),void this.simulateUserChangedLatex())},i.prototype.reflow=function(){this.mq.reflow()},i.prototype.el=function(){return this.mq.el()},i.prototype.getAriaLabel=function(){return this.mq.getAriaLabel()},i.prototype.setAriaLabel=function(e){return this.mq.setAriaLabel(e)},i.prototype.html=function(){return this.mq.html()},i.prototype.mathspeak=function(){return this.mq.mathspeak()},i.prototype.select=function(){this.mq.select()},i.prototype.moveToRightEnd=function(){this.mq.moveToRightEnd()},i.prototype.cmd=function(e){this.mq.cmd(e),this.simulateUserChangedLatex()},i.prototype.write=function(e){this.mq.write(e),this.simulateUserChangedLatex()},i.prototype.keystroke=function(e){this.simulateKeypress(e)},i.prototype.typedText=function(e){this.mq.typedText(e),this.simulateUserChangedLatex()},i.prototype.clearSelection=function(){this.mq.clearSelection()},i.prototype.getAriaPostLabel=function(){return this.mq.getAriaPostLabel()},i.prototype.setAriaPostLabel=function(e,t){this.mq.setAriaPostLabel(e,t)},i.prototype.blur=function(){this.mq.blur()},i.prototype.focus=function(){this.mq.focus()},i.prototype.revert=function(){this.mq.revert()},i.prototype.ignoreNextMousedown=function(e){this.mq.ignoreNextMousedown(e)},i.prototype.clickAt=function(e,t,r){this.mq.clickAt(e,t,r)},i);function i(e){this.mq=e,this.id=e.id,this.data=e.data}t.MathQuillProxy=n})),i("main/raf-loop",["require","lib/parse-query-params"],(function(e){"use strict";var t=(0,e("lib/parse-query-params").getQueryParams)().timeoutLoop;return void 0!==t?(t=parseFloat(t),isNaN(t)&&(t=1e3/60),function(e){setTimeout((function r(){setTimeout(r,t),e(Date.now())}),t)}):function(e){requestAnimationFrame((function t(r){requestAnimationFrame(t),e(r)}))}})),i("main/shared-clock-bus",["require","exports","main/raf-loop","underscore_model"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsubscribe=t.subscribe=void 0;var i=new n.UnderscoreModel;r((function(e){i.triggerEvent("tick",e)}));var o=0;t.subscribe=function(e){return o+=1,i.observeEvent("tick."+o,(function(t,r){e(r)})),o},t.unsubscribe=function(e){i.unobserveEvent("tick."+e)}})),i("main/shared-worker-pool",["require","exports","worker/workerpool","lib/urlparser"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n.getParameter(location.search,"nworkers"),o=4;i&&(o=parseInt(i,10)),t.default=new r(o)})),i("graphing-calc/json/config-options",["require","exports","tslib","core/lib/color-helpers","lib/console","main/font_sizes","expressions/colors","expressions/image_file_to_data_url","core/lib/deepCopy","api/util"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u={keypad:!(t.validateConfigOptions=t.isConfigOption=t.publicConfigOptions=void 0),graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,administerSecretFolders:!1,advancedStyling:!1,clickableObjects:!1,images:!0,imageUploadCallback:s.imageFileToDataURL,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,forceEnableGeometryFunctions:!1,pasteGraphLink:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:a.RED,BLUE:a.BLUE,GREEN:a.GREEN,ORANGE:a.ORANGE,PURPLE:a.PURPLE,BLACK:a.BLACK},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:o.MEDIUM,language:"en",backgroundColor:"#fff",textColor:"#000",distributions:!0,brailleMode:"none",sixKeyInput:!1,brailleControls:!0,zoomFit:!0,forceLogModeRegressions:!1};t.publicConfigOptions=Object.keys(u);var d={showHamburger:!1,disableScrollFix:!1,branding:!0,redrawSlowly:!1,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,transparentBackground:!1,pauseWhenOffscreen:!1},p={solutions:!0,menus:!0,singleVariableSolutions:!0},h=r.__assign(r.__assign({},u),d);t.isConfigOption=function(e){return!!u.hasOwnProperty(e)||!!d.hasOwnProperty(e)||!!p.hasOwnProperty(e)},t.validateConfigOptions=function(e){var t=l.default(h);for(var r in e)t.hasOwnProperty(r)&&(t[r]=e[r]);return n.isValidHexColor(t.backgroundColor)||(t.backgroundColor=h.backgroundColor,i.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),n.isValidHexColor(t.textColor)||(t.textColor=h.textColor,i.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),void 0===e.zoomButtons&&(t.graphpaper&&!t.lockViewport||(t.zoomButtons=!1)),void 0===e.images&&(t.graphpaper||(t.images=!1)),e.hasOwnProperty("menus")&&(i.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),e.hasOwnProperty("settingsMenu")||(t.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(t.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(i.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),e.hasOwnProperty("pointsOfInterest")||(t.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&i.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),t.graphpaper||(t.expressionsCollapsed&&(t.expressionsCollapsed=!1,i.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),t.zoomButtons&&(t.zoomButtons=!1,i.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),t.showResetButtonOnGraphpaper&&(t.showResetButtonOnGraphpaper=!1,i.warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),t.lockViewport&&t.zoomButtons&&(t.zoomButtons=!1,i.warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),!1!==t.notes&&!1!==t.folders&&!1!==t.images||!0!==t.pasteGraphLink||(t.pasteGraphLink=!1,i.warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),t.language&&(t.language=c.validateLanguage(t.language)),t}})),i("api/graphing",["require","exports","tslib","lib/i18n","main/calc_embed","core/lib/deepCopy","underscore_model","core/math/recttransformation","lib/dom-change-detector","graphing/compute-async-screenshot-bounds","graphing-calc/api/sanitize-expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-proxy","lib/console","underscore","main/shared-clock-bus","main/shared-worker-pool","core/graphing-calc/json/graph-settings","graphing-calc/json/config-options","core/lib/random-seed","../lib/underscore-shim"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x){"use strict";function w(e,t){var r={},n={};for(var i in e)v.isConfigOption(i)?r[i]=e[i]:y.isGraphSetting(i)?n[i]=e[i]:t||h.warn("Unrecognized setting: "+i+". Ignoring.");return{configOptions:r,settingsOptions:n}}function S(e,t){var r={};return t.hasOwnProperty("x")&&(r.x=e.mapX(t.x)),t.hasOwnProperty("y")&&(r.y=e.mapY(t.y)),r}var E;Object.defineProperty(t,"__esModule",{value:!0});var _,k=[],M=!1,I=(_=x.UnderscoreModelShim,r.__extends(C,_),C.prototype.destroy=function(){function e(e){h.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}for(var t in this._calc.destroy(),this.controller.onEventsEmitted=function(){},f.unsubscribe(this._sharedClockBusToken),this.domChangeDetector.destroy(),this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){},this._destroyed=!0},C.prototype._syncGraphpaperBounds=function(){var e=this;this.controller.runAfterDispatch((function(){e.setProperty("graphpaperBounds",{mathCoordinates:e._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:e._calc.graphpaperBounds.pixelCoordinates})}))},C.prototype._initGraphSettings=function(){var e=this,t=new a.UnderscoreModel;this.settings=this.graphSettings=t,y.publicGraphSettings.forEach((function(r){e._calc.grapher.settings.observeAndSync(r,(function(){e.controller.runAfterDispatch((function(){t.setProperty(r,e._calc.grapher.settings[r])}))}))})),v.publicConfigOptions.forEach((function(r){e._calc.grapher.settings.config.observeAndSync(r,(function(){e.controller.runAfterDispatch((function(){t.setProperty(r,e._calc.grapher.settings.config[r])}))}))}))},C.prototype.updateSettings=function(e){var t=w(e,!1),r=t.configOptions,n=t.settingsOptions;g.isEmpty(r)||this._calc.setOptions(r),g.isEmpty(n)||this._calc.grapher.settings.setGraphSettings(n),this.notifyControllerOfAPICall()},C.prototype.setGraphSettings=function(e){h.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(e),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()},C.prototype.fetchLanguage=function(e){return n.fetchLanguage(e)},C.prototype.setDefaultState=function(e){this._calc.grapher.settings.setProperty("defaultState",e),this.notifyControllerOfAPICall()},C.prototype.mathToPixels=function(e){return S(s.RT.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates),e)},C.prototype.pixelsToMath=function(e){return S(s.RT.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates),e)},C.prototype.notifyControllerOfAPICall=function(){this.controller.dispatch({type:"render"})},C.prototype.setExpression=function(e){var t=this.controller.getItemModel(e.id),r=t&&t.type,n=u.validateItem(e,r,this.controller);if(n)if(r)this.controller.dispatch({type:"set-expression-properties-from-api",id:n.id,properties:n});else{if("image"===n.type)return;this.controller.dispatch({type:"add-item-to-end-from-api",state:n})}},C.prototype.setExpressions=function(e){e.forEach(this.setExpression.bind(this))},C.prototype.removeExpression=function(e){var t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})},C.prototype.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this))},C.prototype.removeSelected=function(){var e=this.controller.getSelectedItem();if(e){var t=e.id;return this.controller.dispatch({type:"remove-item-by-id",id:t}),t}},C.prototype.setMathBounds=function(e){e&&e.left<e.right&&e.bottom<e.top?this._calc.setViewport([e.left,e.right,e.bottom,e.top]):h.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(e)),this.notifyControllerOfAPICall()},C.prototype.setViewport=function(e){4==e.length&&e[1]>e[0]&&e[3]>e[2]?this._calc.setViewport(e):h.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+e),this.notifyControllerOfAPICall()},C.prototype.resize=function(){this.domChangeDetector.checkForChanges()},C.prototype.getState=function(e){return this.controller.getState(e)},C.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(u.sanitizeItem)},C.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},C.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},C.prototype.undo=function(){this.controller.dispatch({type:"undo"})},C.prototype.redo=function(){this.controller.dispatch({type:"redo"})},C.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-undoredo-history"})},C.prototype.newRandomSeed=function(){this.updateSettings({randomSeed:b.default()})},C.prototype.screenshot=function(e){return e=e||{},e=this._validateBrailleScreenshotOptions(e),this._calc.grapher.screenshot(e)},C.prototype._getMathAspectRatio=function(){var e=this.graphpaperBounds.mathCoordinates,t=this._calc.grapher.getProjection().pixelCoordinates,r=t.right-t.left,n=t.bottom-t.top;return e.width/r/(e.height/n)},C.prototype.isProjectionUniform=function(){return!!this._calc.grapher.getProjection().settings.squareAxes},C.prototype._validateBrailleScreenshotOptions=function(e){var t=(e=o.default(e)).braille;if(t){var r=t.embosserModel;if(!r)return h.warn("Screenshot braille options requires an embosser model to be specified. "),h.warn("Continuing with non-braille screenshot."),delete e.braille,e;if("etc"===r&&(t.embosserModel="etc11"),"vpmax"===r&&(t.embosserModel="vpmax11"),"etc8"!==t.embosserModel&&"etc11"!==t.embosserModel&&"vpmax8"!==t.embosserModel&&"vpmax11"!==t.embosserModel)return h.warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),h.warn("Continuing with non-braille screenshot."),delete e.braille,e;"nemeth"!==t.brailleMode&&"ueb"!==t.brailleMode&&(h.warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),t.brailleMode="nemeth"),e.width&&(h.warn("Screenshot width option is ignored when exporting Braille."),delete e.width),e.height&&(h.warn("Screenshot height option is ignored when exporting Braille."),delete e.height),e.targetPixelRatio&&(h.warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete e.targetPixelRatio),e.preserveAxisNumbers&&(h.warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete e.preserveAxisNumbers)}return e},C.prototype._validateAsyncScreenshotOpts=function(e){var t=(e=o.default(e)).mode||"contain",n=e.width||e.height||this.graphpaperBounds.pixelCoordinates.width,i=e.height||e.width||this.graphpaperBounds.pixelCoordinates.height,a=e.targetPixelRatio||1,s=e.preserveAxisNumbers;e.hasOwnProperty("format")||(e.svg?(e.format="svg",delete e.svg):e.format="png");var l=e.mathBounds||{},u=this._getMathAspectRatio(),d=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,p=c.computeBoundsFromScreenshotOpts({mode:t,width:n,height:i,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:d,mathAspectRatio:u,mathBounds:l});return{opts:r.__assign(r.__assign({},e),{width:n,height:i,targetPixelRatio:a,preserveAxisNumbers:s}),mathBounds:p}},C.prototype.asyncScreenshot=function(e,t){if(arguments.length){if(1===arguments.length){if("function"!=typeof e)return void h.warn("asyncScreenshot expects a callback");t=e,e={}}e=e||{},e=this._validateBrailleScreenshotOptions(e);var r=this._validateAsyncScreenshotOpts(e),n=r.opts,i=r.mathBounds;k.push({api:this,options:n,mathBounds:i,state:this.getState(),callback:t}),function e(){if(!M){for(var t,r,n,i,o,a,s,l,c,u,d;(t=k.shift())&&t.api._destroyed;);t&&(M=!0,n=(r=t).options,i=r.mathBounds,o=r.state,a=r.callback,(s=E=E||new I).setState(o),s.setMathBounds(i),["majorAxisOpacity","minorAxisOpacity","axisLineOffset","axisLineWidth","labelSize","graphLineWidth","pointLineWidth"].forEach((function(e){"axisLineWidth"===e?s._calc.grapher.settings.setProperty(e,r.api._calc.grapher.settings[e]):s._calc.grapher.settings[e]=r.api._calc.grapher.settings[e]})),l=s._calc.evaluator,c=function(){s._calc.grapher.asyncScreenshot(n,(function(t){M=!1,e(),a(t)}))},u=r.api._calc.controller,d=f.subscribe((function(){u.areAnyImagesLoading()||(f.unsubscribe(d),l.notifyWhenSynced(c))})))}}()}else h.warn("asyncScreenshot expects a callback")},C.prototype.setOptions=function(e){var t=this._calc.setOptions(e);return this.notifyControllerOfAPICall(),t},C.prototype.focusFirstExpression=function(){var e=this.controller.getItemModelByIndex(0);e&&this.controller.dispatch({type:"move-focus-to-item",id:e.id,where:"end"})},C.prototype.HelperExpression=function(e){var t=e&&e.latex||"",r=new a.UnderscoreModel;return r.latex=t,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:r}}),r},C);function C(e,t,r){var n=_.call(this)||this;if(n._destroyed=!1,n.isOffscreen=!1,!(n instanceof C))return new C(e,t,r);var o=w(t||{},!0),a=v.validateConfigOptions(o.configOptions),s=o.settingsOptions;return n._calc=new i.default(e,m.default,a),n._calc.interceptTouch(),n.controller=n._calc.controller,n.controller.onEventsEmitted=function(e){var t=n.controller.getSelectedItem();n.setProperty("isAnyExpressionSelected",!!t),n.setProperty("selectedExpressionId",t?t.id:void 0),n.setProperty("expressionAnalysis",n.controller.getExpressionAnalysis());var r=d.default.getFocusedMathquill();for(var i in n.setProperty("focusedMathQuill",r?new p.MathQuillProxy(r):void 0),e)e.hasOwnProperty(i)&&e[i]&&n.triggerEvent(i,void 0)},n._calc.graphpaperBounds.observeAndSync("mathCoordinates",n._syncGraphpaperBounds.bind(n)),n._calc.graphpaperBounds.observeAndSync("pixelCoordinates",n._syncGraphpaperBounds.bind(n)),n.colors=n.controller.getColors(),n._initGraphSettings(),n.updateSettings(s),n._sharedClockBusToken=f.subscribe((function(e){var t=n._calc.grapher.settings.config.pauseWhenOffscreen&&n.isOffscreen;n._calc.tick(e,t)})),n.domChangeDetector=new l.default(e,(function(e){switch(n.isOffscreen=e.isOffscreen,e.type){case"offscreen-noop":case"removed":break;case"added":case"resized":n._calc.resize(e.size)}})),a.autosize?n.domChangeDetector.startWatching():n.domChangeDetector.checkForChanges(),"function"==typeof r&&r(n),n}t.default=I})),i("main/calc_headless",["require","exports","main/graph_settings","main/evaluator","underscore_model","main/controller"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadlessCalc=void 0;var a=(s.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e})},s.prototype.tick=function(){this.evaluator.tick()},s.prototype.destroy=function(){this.evaluator.destroy()},s);function s(e,t){var a=this,s=new r;for(var l in t)s.config.setProperty(l,t[l]);this.controller=new o.default(s);var c=new n.Evaluator(e);this.controller.setEvaluator(c),c.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:s.randomSeed,degreeMode:s.degreeMode,restrictedFunctions:s.config.restrictedFunctions,distributions:s.config.distributions,pointsOfInterest:s.config.pointsOfInterest,plotSingleVariableImplicitEquations:s.config.plotSingleVariableImplicitEquations,plotImplicits:s.config.plotImplicits,plotInequalities:s.config.plotInequalities,sliders:s.config.sliders}},c.onEvaluatorResults=function(e){a.controller.dispatch({type:"on-evaluator-changes",changes:e.evaluationStates,timingData:e.timingData})};var u=new i.UnderscoreModel;u.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=u,this.evaluator=c,this.setBlank()}t.HeadlessCalc=a})),i("api/headless",["require","exports","main/calc_headless","graphing-calc/json/config-options","main/shared-clock-bus","main/shared-worker-pool","graphing-calc/api/sanitize-expression","underscore_model","lib/console"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(u.prototype.destroy=function(){function e(e){l.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}for(var t in this._calc.destroy(),i.unsubscribe(this._sharedClockBusToken),this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},u.prototype.setExpression=function(e){var t=this.controller.getItemModel(e.id),r=t&&t.type,n=a.validateItem(e,r,this.controller);if(n)if(r)this.controller.dispatch({type:"set-expression-properties-from-api",id:n.id,properties:n});else{if("image"===n.type)return;this.controller.dispatch({type:"add-item-to-end-from-api",state:n})}},u.prototype.setExpressions=function(e){e.forEach(this.setExpression.bind(this))},u.prototype.removeExpression=function(e){var t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})},u.prototype.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this))},u.prototype.getState=function(e){return this.controller.getState(e)},u.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(a.sanitizeItem)},u.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},u.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},u.prototype.HelperExpression=function(e){var t=e&&e.latex||"",r=new s.UnderscoreModel;return r.latex=t,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:r}}),r},u.prototype.resize=function(){},u);function u(){var e=this;if(!(this instanceof u))return new u;this._calc=new r.HeadlessCalc(o.default,n.validateConfigOptions({})),this.controller=this._calc.controller,this._sharedClockBusToken=i.subscribe((function(){e._calc.tick()}))}t.default=c})),i("api/abstract",["require","exports","lib/console","underscore_model","ipad.scrollfix","lib/dom-change-detector"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(s.prototype.setupDomChangeDetector=function(e){var t=this;this.autoSize=e,i.limitScrollOnElement(this.rootElt),this.domChangeDetector=new o.default(this.rootElt,(function(e){switch(e.type){case"added":t.view=t.onCreateView(),t.onResizeView(e.size);break;case"removed":t.onDestroyView(),t.view=void 0;break;case"resized":t.onResizeView(e.size)}})),!1!==this.autoSize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()},s.prototype.detach=function(){r.warn(".detach() is deprecated. It should no longer be necessary")},s.prototype.destroy=function(){function e(e){r.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}for(var t in this.view&&this.onDestroyView(),this.domChangeDetector.destroy(),this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},s.prototype.resize=function(){this.domChangeDetector.checkForChanges()},s.prototype.updateView=function(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()},s.prototype.triggerEvent=function(e,t){this.eventModel.triggerEvent(e,t)},s.prototype.observeEvent=function(e,t){this.eventModel.observeEvent(e,t)},s.prototype.unobserveEvent=function(e){this.eventModel.unobserveEvent(e)},s);function s(e){if(this.rootElt=e,this.eventModel=new n.UnderscoreModel,!e)throw new Error("must pass an HTMLElement to the API")}t.default=a})),i("immutable-store",["require","underscore","core/lib/deepCopy"],(function(e){"use strict";var t=e("underscore"),r=e("core/lib/deepCopy").default;function n(e){return t.clone(e)}function i(e){this.setState(e)}return i.prototype.setState=function(e){this.state=e},i.prototype.getState=function(){return this.state},i.prototype.set=function(e,t){if(1!==arguments.length){if("string"==typeof e)return this.state=n(this.state),void(this.state[e]=t);var r=e.length-2,i=e[1+r];this.state=s=n(this.state);for(var o=0;o<=r;o++)var a=e[o],s=s[a]=n(s[a]);s[i]=t}else this.state=e},i.prototype.deepMutate=function(e,t){if(1===arguments.length)return t=e,this.state=r(this.state),void t(this.state);if("string"==typeof e)return this.state=n(this.state),this.state[e]=r(this.state[e]),void t(this.state[e]);for(var i=e.length-2,o=e[1+i],a=this.state=n(this.state),s=0;s<=i;s++){var l=e[s];a=a[l]=n(a[l])}t(a=a[o]=r(a[o]))},i.prototype.shallowMutate=function(e,t){if(1===arguments.length)return t=e,this.state=n(this.state),void t(this.state);if("string"==typeof e)return this.state=n(this.state),this.state[e]=n(this.state[e]),void t(this.state[e]);for(var r=e.length-1,i=this.state=n(this.state),o=0;o<=r;o++){var a=e[o];i=i[a]=n(i[a])}t(i)},i.areShallowEqual=function(e,t){},i.areDeepEqual=function(e,t){},{default:i}})),i("basic/model",["require","exports","immutable-store","main/shared-clock-bus","core/lib/label","main/evaluator","core/lib/label","underscore"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(c.prototype.isSingleExpression=function(){return"singleExpressionScientific"===this.evaluationMode||"singleExpressionFourFunction"===this.evaluationMode},c.prototype.destroy=function(){n.unsubscribe(this._sharedClockBusToken)},c.prototype.generateObjectId=function(){return(this._nextObjectId++).toString()},c.prototype.updateNextObjectId=function(){for(var e=this.store.getState().order,t=/^[0-9]+$/,r=this._nextObjectId=0,n=e;r<n.length;r++){var i,o=n[r];!t.test(o)||(i=parseInt(o,10))>=this._nextObjectId&&(this._nextObjectId=i+1)}},c.prototype.clearShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!1},c.prototype.markShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!0},c.prototype.getShouldDebounceUndoRedo=function(){return this._shouldDebounceUndoRedo},c.prototype.clearCachedBrailleValues=function(){for(var e=0,t=this.getExpressionOrder();e<t.length;e++){var r=t[e];this.store.set(["expressions",r,"braille"],"")}},c.prototype.getState=function(){return this.store.getState()},c.prototype.getPersistedState=function(){var e=this.getState(),t=e.expressions,r=e.order,n=e.settings;return{expressions:{list:r.map((function(e){var r=t[e];return{id:r.id,latex:r.latex,displayAsFraction:r.displayAsFraction}}))},settings:n}},c.prototype.setState=function(e){this.store.set(e),this._updateIndexes(),this.updateNextObjectId()},c.prototype.setStateFromAPI=function(e){var t=[],r={};e.expressions.list.forEach((function(e){t.push(e.id),r[e.id]={id:e.id,latex:e.latex,braille:"",type:"latex",displayAsFraction:!!e.displayAsFraction}})),this.setState({expressions:r,order:t,settings:e.settings,ui:{focus:void 0}})},c.prototype.canClear=function(){if(1<this.getNumberOfExpressions())return!0;var e=this.getExpressionOrder()[0];return""!==this.getExpressionLatex(e)},c.prototype.clear=function(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})},c.prototype.getExpressionOrder=function(){return this.store.getState().order},c.prototype.getNumberOfExpressions=function(){return this.getExpressionOrder().length},c.prototype.getExpressionById=function(e){return this.getState().expressions[e]},c.prototype.getExpressionIndex=function(e){return this._indexes[e]},c.prototype._getExpressionByIndex=function(e){var t=this.getExpressionOrder()[e];return this.getExpressionById(t)},c.prototype._updateIndexes=function(){this._indexes={};for(var e=0,t=0,r=this.getExpressionOrder();t<r.length;t++){var n=r[t];this._indexes[n]=e,e+=1}this._evaluate()},c.prototype._usesAnsById=function(e){return-1!==this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")},c.prototype._getPreviousExpById=function(e){var t=this.getExpressionIndex(e);return this._getExpressionByIndex(t-1)},c.prototype.createBlankAfterId=function(e){var t,r;this.isSingleExpression()||this.getExpressionById(e).latex&&(t=this.getExpressionIndex(e),r=this.generateObjectId(),this.store.shallowMutate("order",(function(e){e.splice(t+1,0,r)})),this.store.shallowMutate("expressions",(function(e){e[r]={id:r,latex:"",braille:"",type:"latex",displayAsFraction:!1}})),this._updateIndexes(),this.setFocusedById(r,!0))},c.prototype.conditionallyCopyPrevious=function(e){var t=this._getPreviousExpById(e),r=this.getExpressionById(e);null!=t&&""===r.latex&&this._usesAnsById(t.id)&&this.setLatexById(e,t.latex)},c.prototype.backspaceAtFrontOfId=function(e){var t;""===this.getExpressionById(e).latex&&1!==this.getNumberOfExpressions()&&(t=this.getExpressionIndex(e),this.store.shallowMutate("order",(function(e){e.splice(t,1)})),this.store.shallowMutate("expressions",(function(t){delete t[e]})),this._updateIndexes(),this._setFocusedByIndex(Math.max(t-1,0),!0))},c.prototype.setLatexById=function(e,t){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],""),""===t&&this.setFractionEvaluation(e,!1),this._evaluate()},c.prototype.setLatexAndBrailleById=function(e,t,r){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],r),""===t&&this.setFractionEvaluation(e,!1),this._evaluate()},c.prototype.setFractionEvaluation=function(e,t){this.store.set(["expressions",e,"displayAsFraction"],t)},c.prototype.setLatexOfFocusedExpression=function(e){var t=this.getFocusedExpressionId();t&&this.setLatexById(t,e)},c.prototype.isExpressionFocused=function(e){return this.getFocusedExpressionId()===e},c.prototype.getExpressionLatex=function(e){return this.getExpressionById(e).latex},c.prototype.getExpressionError=function(e){var t=this._evaluations[e];return t?t.error:""},c.prototype.getExpressionValue=function(e){var t=this._evaluations[e];if(t)return t.value},c.prototype.getExpressionAns=function(e){var t=this._evaluations[e];if(t)return t.ans},c.prototype.getExpressionAnsId=function(e){var t=this._evaluations[e];if(t)return t.ansId},c.prototype.shouldShowEvaluationForExpression=function(e){var t=this._evaluations[e];return!!t&&t.showEvaluation},c.prototype.isRationalizableConstant=function(e){var t=this._evaluations[e];return!!t&&t.isRationalizableConstant},c.prototype.canDisplayEvaluationAsFraction=function(e){var t=this.getExpressionValue(e);return!!t&&a.canDisplayAsFraction(t)},c.prototype._setFocusedByIndex=function(e,t){var r,n=this._getExpressionByIndex(e),i=this.store.getState().ui.focus,o=t?{type:"latex-expression",id:n.id}:void 0;s.isEqual(i,o)||(i&&(r=i.id,this.store.deepMutate("expressions",(function(e){var t=e[r];t&&(t.braille="")}))),!t&&this.getFocusedExpressionId()!==n.id||this.store.shallowMutate("ui",(function(e){e.focus=o})))},c.prototype.setFocusedById=function(e,t){var r=this.getExpressionIndex(e);this._setFocusedByIndex(r,t)},c.prototype.focusPrevById=function(e){var t=this.getExpressionIndex(e)-1;0<=t&&this._setFocusedByIndex(t,!0)},c.prototype.focusNextById=function(e){var t=this.getExpressionIndex(e)+1;t<this.getNumberOfExpressions()?this._setFocusedByIndex(t,!0):this.createAtEnd()},c.prototype.getFocusedExpression=function(){var e=this.getFocusedExpressionId();return e?this.getExpressionById(e):void 0},c.prototype.getFocusedExpressionId=function(){var e=this.getState().ui.focus;return e&&e.id},c.prototype.clearFocusedExpression=function(){var e=this.getFocusedExpression();e&&this.setLatexById(e.id,"")},c.prototype.shouldShowClear=function(){if(1===this.getNumberOfExpressions())return!1;var e=this.getFocusedExpression();return!!e&&!!e.latex},c.prototype.getLastExpression=function(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)},c.prototype.isLastExpressionEmpty=function(){return!!this.getLastExpression().latex},c.prototype.createAtEnd=function(){this.createBlankAfterId(this.getLastExpression().id)},c.prototype.focusLastExpression=function(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)},c.prototype.focusFirstExpression=function(){this._setFocusedByIndex(0,!0)},c.prototype.getDegreeMode=function(){return this.getState().settings.degreeMode},c.prototype.setDegreeMode=function(e){this.store.set(["settings","degreeMode"],!!e),this._evaluate()},c.prototype._cleanupLatex=function(e){return"="===(e=i.trimLatex(e)).substr(e.length-1)&&(e=e.substr(0,e.length-1)),e},c.prototype._evaluate=function(){var e=this;this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach((function(t){return e._evaluator.addStatement({id:t,index:e.getExpressionIndex(t),latex:e._cleanupLatex(e.getExpressionLatex(t)),shouldGraph:!1,type:"statement"})}))},c.prototype._setupEvaluator=function(){var e=this;this._evaluator=new o.Evaluator(this.workerPool),this._evaluator.readEvaluatorConfig=function(){return{degreeMode:e.getDegreeMode(),evaluationMode:e.evaluationMode,additionalFunctions:e.additionalFunctions,functionDefinition:e.functionDefinition,replaceRoundWithReciprocal:e.replaceRoundWithReciprocal}},this._evaluator.onEvaluatorResults=function(t){var r=t.evaluationStates;for(var n in e._evaluations={},r){var i,o,s,l,c=r[n];e.getExpressionById(n)&&(void 0===(i=c.constant_value)&&c.zero_values&&c.zero_values.length&&(i=c.zero_values[0].val),o=c.hasOwnProperty("constant_value")&&a.canDisplayAsFraction(c.constant_value),s=!c.is_evaluable&&o,l=!!c.is_evaluable||s||Array.isArray(i),e._evaluations[n]={error:c.error,ans:void 0,ansId:void 0,value:i,showEvaluation:l,isRationalizableConstant:s})}for(var u=void 0,d=void 0,p=0,h=e.getExpressionOrder();p<h.length;p++){n=h[p];var g,f=e._evaluations[n];u&&f&&("number"==typeof(g=u.value)?(f.ans=g,f.ansId=d):Array.isArray(g)&&(f.ans="[...]")),u=f,d=n}"function"==typeof e.onEvaluationUpdate&&e.onEvaluationUpdate()}},c.prototype.reloadState=function(){this.setState(this.getState())},c.prototype.getFunctionDefinition=function(){return!!this.functionDefinition},c.prototype.enableFunctionDefinition=function(){this.functionDefinition=!0,this.reloadState()},c.prototype.disableFunctionDefinition=function(){this.functionDefinition=!1,this.reloadState()},c.prototype.getReplaceRoundWithReciprocal=function(){return!!this.replaceRoundWithReciprocal},c.prototype.enableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!0,this.reloadState()},c.prototype.disableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!1,this.reloadState()},c);function c(e){var t=this,i=e.evaluationMode,o=e.additionalFunctions,a=e.functionDefinition,s=e.replaceRoundWithReciprocal,l=e.workerPool;this._evaluations={},this._nextObjectId=0,this.store=new r.default({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}}),this.evaluationMode=i,this.additionalFunctions=o,this.functionDefinition=a,this.replaceRoundWithReciprocal=s,this.workerPool=l,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=n.subscribe((function(){t._evaluator.tick()}))}t.default=l})),i("basic/controller",["require","exports","tslib","flux","underscore","./model","lib/state-stack","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view","lib/console","bugsnag","core/lib/color-helpers"],(function(e,t,n,i,o,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=(f.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},f.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch((function(){t.onEventEmitted&&t.onEventEmitted(e)}))},f.prototype.getFunctionDefinition=function(){return this.options.functionDefinition},f.prototype.getSettingsMenu=function(){return this.settingsMenu},f.prototype.getBrailleMode=function(){return this.brailleMode},f.prototype.renderAsBraille=function(){return"none"!==this.brailleMode},f.prototype.setBrailleMode=function(e){this.brailleMode=e},f.prototype.getSixKeyInput=function(){return this.sixKeyInput},f.prototype.setSixKeyInput=function(e){this.sixKeyInput=e},f.prototype.getBrailleControls=function(){return this.brailleControls},f.prototype.setBrailleControls=function(e){this.brailleControls=e},f.prototype.getBrailleExpressionDownload=function(){return this.brailleExpressionDownload},f.prototype.setBrailleExpressionDownload=function(e){this.brailleExpressionDownload=e},f.prototype.getRestrictedEditing=function(){return this.options.restrictedEditing},f.prototype.getKeyboardMode=function(){return this.keyboardMode},f.prototype.getFontSize=function(){return this.fontSize},f.prototype.getInvertedColors=function(){return this.invertedColors},f.prototype.hasBackgroundColor=function(){return"#ffffff"!==this.getBackgroundColor()},f.prototype.getBackgroundColor=function(){var e=h.normalizeColor(this.backgroundColor||"#fff");return this.getInvertedColors()&&"#ffffff"!==e?h.invertColor(e):e},f.prototype.getTextColor=function(){var e=h.normalizeColor(this.textColor||"#000");return this.getInvertedColors()&&"#000000"!==e?h.invertColor(e):e},f.prototype.getAdditionalFunctions=function(){return this.options.additionalFunctions},f.prototype.getTypingSlashWritesDivisionSymbol=function(){return this.options.typingSlashWritesDivisionSymbol},f.prototype.setTypingAsteriskWritesTimesSymbol=function(e){this.typingAsteriskWritesTimesSymbol=e},f.prototype.getTypingAsteriskWritesTimesSymbol=function(){return this.typingAsteriskWritesTimesSymbol},f.prototype.setProjectorMode=function(e){this.projectorMode=e},f.prototype.isProjectorMode=function(){return this.projectorMode},f.prototype.getReplaceCommaWith10Exp=function(){return this.replaceCommaWith10Exp},f.prototype.setReplaceCommaWith10Exp=function(e){this.replaceCommaWith10Exp=e},f.prototype.getReplaceRoundWithReciprocal=function(){return this.model.getReplaceRoundWithReciprocal()},f.prototype.setReplaceRoundWithReciprocal=function(e){e?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()},f.prototype.setCapExpressionSize=function(e){this.capExpressionSize=e},f.prototype.getCapExpressionSize=function(){return this.capExpressionSize},f.prototype.setDecimalToFraction=function(e){this.decimalToFraction=e},f.prototype.setLanguage=function(e){"en"!==e&&-1===r.supportedLanguages.indexOf(e)?d.warn("Translation for '"+e+"' isn't currently available. Using '"+this.language+"' instead."):this.language=e},f.prototype.getLanguage=function(){return this.language},f.prototype.getDecimalToFraction=function(){return this.decimalToFraction},f.prototype.isScientificCalc=function(){var e=this.options.evaluationMode;return"scientific"===e||"singleExpressionScientific"===e},f.prototype.isFourFunctionCalc=function(){return"fourFunction"===this.options.evaluationMode||"singleExpressionFourFunction"===this.options.evaluationMode},f.prototype.getAllowLinks=function(){return this.options.links},f.prototype.canUndo=function(){return this.stateStack.canUndo()},f.prototype.canRedo=function(){return this.stateStack.canRedo()},f.prototype.undo=function(e){var t,r;this.canUndo()&&(this.stateStack.undo(),r=this.stateStack.getState(),e.restoreFocus||(t={focus:void 0},r=n.__assign(n.__assign({},r),{ui:t})),this.model.setState(r),this.enqueueEvent("change"))},f.prototype.redo=function(e){var t,r;this.canRedo()&&(this.stateStack.redo(),r=this.stateStack.getState(),e.restoreFocus||(t={focus:void 0},r=n.__assign(n.__assign({},r),{ui:t})),this.model.setState(r),this.enqueueEvent("change"))},f.prototype.clearHistory=function(){this.stateStack.clear()},f.prototype.canBackspace=function(){var e=this.model.getFocusedExpression();return e&&(0<e.latex.length||1<this.model.getNumberOfExpressions())},f.prototype.focusLastExpression=function(){this.model.focusLastExpression()},f.prototype.shouldRender=function(){return 0<this.containerSize.width&&0<this.containerSize.height},f.prototype.canClear=function(){return this.model.canClear()},f.prototype.shouldShowClear=function(){return this.model.shouldShowClear()},f.prototype.enableSettingsMenu=function(){this.settingsMenu=!0},f.prototype.disableSettingsMenu=function(){this.closeSettingsMenu(),this.settingsMenu=!1},f.prototype.closeSettingsMenu=function(){this.settingsMenuOpen=!1},f.prototype.toggleSettingsMenu=function(){this.settingsMenuOpen=!this.settingsMenuOpen},f.prototype.isSettingsMenuOpen=function(){return this.settingsMenuOpen},f.prototype.isLastExpressionEmpty=function(){return this.model.isLastExpressionEmpty()},f.prototype.createAtEnd=function(){this.model.createAtEnd()},f.prototype.clearFocusedExpression=function(){this.model.clearFocusedExpression()},f.prototype.setLatexById=function(e,t){this.model.setLatexById(e,t)},f.prototype.setLatexAndBrailleById=function(e,t,r){this.model.setLatexAndBrailleById(e,t,r)},f.prototype.setLatexOfFocusedExpression=function(e){this.model.setLatexOfFocusedExpression(e)},f.prototype.toggleFractionEvaluationById=function(e){this.model.setFractionEvaluation(e,!this.model.getExpressionById(e).displayAsFraction)},f.prototype.conditionallyCopyPrevious=function(e){this.model.conditionallyCopyPrevious(e)},f.prototype.createBlankAfterId=function(e){this.model.createBlankAfterId(e)},f.prototype.backspaceAtFrontOfId=function(e){this.model.backspaceAtFrontOfId(e)},f.prototype.areStatesDifferentEnoughForUndoRedo=function(e,t){var r={focus:void 0};return o.isEqual(n.__assign(n.__assign({},e),{ui:r}),n.__assign(n.__assign({},t),{ui:r}))},f.prototype.commitUndoRedoDebounced=function(){var e,t=this.model.getState(),r=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(t,r)||((e=(new Date).getTime())-this._lastDebouncedTime<1e3?this.stateStack.replaceState(t):this.stateStack.addState(t),this._lastDebouncedTime=e,this.enqueueEvent("change"))},f.prototype.commitUndoRedoSynchronously=function(){var e=this.model.getState(),t=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,t)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))},f.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},f.prototype.getFocusedMathquill=function(){if(this.model.getFocusedExpressionId())return u.default.getFocusedMathquill()},f.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill=function(){return this.getFocusedMathquill()||(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())},f.prototype.typeIntoFocusedMathquill=function(e){e=e.replace(/\r|\n/g,"");var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&u.default.canAcceptText(t,this.getCapExpressionSize(),e)&&(t.typedText(e),this.setLatexOfFocusedExpression(t.latex()),this.model.markShouldDebounceUndoRedo())},f.prototype.pressKeyInFocusedMathquill=function(e,t){var r;"none"!==this.getBrailleMode()||(r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill())&&("Up"===e||"Down"===e||"Left"===e||"Right"===e?u.default.applyArrowKeyAndReturnIfWasAtBounds(r,e,t)&&this.moveFocusInDirection(e):"Enter"===e?(t&&(t.preventDefault(),t.stopPropagation()),this.handleEnter()):"Backspace"===e&&this.attemptToMoveFocusWithBackspace()||(r.keystroke(e,t),this.setLatexOfFocusedExpression(r.latex())))},f.prototype.moveFocusInDirection=function(e){var t=this.model.getFocusedExpressionId();t&&("Up"===e?this.model.focusPrevById(t):"Down"===e&&this.model.focusNextById(t))},f.prototype.handleEnter=function(){var e;this.model.isSingleExpression()||(e=this.model.getFocusedExpressionId())&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))},f.prototype.attemptToMoveFocusWithBackspace=function(){var e=this.model.getFocusedExpression();if(!e)return!1;var t=e.latex,r=e.id;return""===t&&(this.backspaceAtFrontOfId(r),!0)},f.prototype.executeCommandInFocusedMathquill=function(e){var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&(l.execute(t,e),this.setLatexOfFocusedExpression(t.latex()))},f.prototype.syncPublicSettings=function(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleControls",this.brailleControls),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)},f.prototype.hookUpDispatcher=function(){var e=this;this.dispatcher.register((function(t){e.enqueueEvent("render");var r=!1,i=e.getRestrictedEditing();switch(t.type){case"update-options":e.options=n.__assign(n.__assign({},e.options),t.options);break;case"keypad/shift":var o=void 0;switch(e.keyboardMode){case"qwerty":o="capitalQwerty";break;case"capitalQwerty":default:o="qwerty";break;case"letters":o="capitalLetters";break;case"capitalLetters":o="letters"}e.updateKeyboardMode(o);break;case"undo":i||(e.undo({restoreFocus:"keyboard-shortcut"===t.source}),r=!0);break;case"redo":i||(e.redo({restoreFocus:"keyboard-shortcut"===t.source}),r=!0);break;case"clear-history":e.clearHistory();break;case"set-state-from-api":t.opts.allowUndo||e.clearHistory(),e.model.setStateFromAPI(t.state);break;case"main":e.updateKeyboardMode("main");break;case"ABC":e.options.qwertyKeyboard?e.updateKeyboardMode("qwerty"):e.updateKeyboardMode("letters");break;case"functions":e.updateKeyboardMode("functions");break;case"degrees":e.model.setDegreeMode(!e.model.getDegreeMode());break;case"update-degree-mode":e.model.setDegreeMode(!!t.mode);break;case"update-font-size":var a=t.size;if("number"!=typeof a&&(a=parseInt(a,10)),isNaN(a))return;e.fontSize=a;break;case"update-inverted-colors":e.invertedColors=!!t.mode;break;case"update-background-color":e.backgroundColor=t.color;break;case"update-text-color":e.textColor=t.color;break;case"update-projector-mode":e.setProjectorMode(!!t.mode);break;case"update-cap-expression-size":e.setCapExpressionSize(!!t.mode);break;case"update-decimal-to-fraction":e.setDecimalToFraction(!!t.mode);break;case"update-language":e.setLanguage(t.language);break;case"set-blank":t.opts.allowUndo||e.clearHistory(),e.model.clear(),e.focusLastExpression();break;case"clear":e.model.clearFocusedExpression();break;case"set-braille-mode":var s=t.mode;"nemeth"!==s&&"ueb"!==s&&"none"!==s?d.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '"+s+"'."):(e.model.clearCachedBrailleValues(),e.setBrailleMode(t.mode));break;case"set-six-key-input":e.setSixKeyInput(!!t.mode);break;case"set-braille-controls":e.setBrailleControls(!!t.value);break;case"set-braille-expression-download":e.setBrailleExpressionDownload(!!t.mode);break;case"set-replace-comma-with-10-exp":e.setReplaceCommaWith10Exp(!!t.replace);break;case"set-replace-round-with-reciprocal":e.setReplaceRoundWithReciprocal(!!t.replace);break;case"set-typing-asterisk-writes-times-symbol":e.setTypingAsteriskWritesTimesSymbol(!!t.mode);break;case"update-latex":e.model.markShouldDebounceUndoRedo(),e.setLatexById(t.id,t.latex);break;case"update-latex-from-braille":e.model.markShouldDebounceUndoRedo(),e.setLatexAndBrailleById(t.id,t.latex,t.braille);break;case"focusin":e.model.setFocusedById(t.id,!0);break;case"focusout":e.model.setFocusedById(t.id,!1);break;case"focus-first-expression":e.model.focusFirstExpression();break;case"focus-prev-expression":e.moveFocusInDirection("Up");break;case"focus-next-expression":e.moveFocusInDirection("Down");break;case"focus-last-expression":e.model.focusLastExpression();break;case"insert-blank-expression":e.handleEnter();break;case"backspace-from-braille":e.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":e.typeIntoFocusedMathquill(t.text);break;case"keypad/press-key":e.pressKeyInFocusedMathquill(t.key,t.evt);break;case"keypad/custom-command":e.executeCommandInFocusedMathquill(t.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":case"render":break;case"enable-settings-menu":e.enableSettingsMenu();break;case"disable-settings-menu":e.disableSettingsMenu();break;case"toggle-settings-menu":e.toggleSettingsMenu();break;case"close-settings-menu":e.closeSettingsMenu();break;case"ui/container-resized":e.containerSize=t.size;break;case"toggle-fraction-evaluation":e.toggleFractionEvaluationById(t.id);break;default:return t}e.runAfterDispatch((function(){return e.syncPublicSettings()})),r||(e.model.getShouldDebounceUndoRedo()?(e.commitUndoRedoDebounced(),e.model.clearShouldDebounceUndoRedo()):e.commitUndoRedoSynchronously())}))},f);function f(e,t){var r=this;this.keyboardMode="main",this.fontSize=16,this.invertedColors=!1,this.backgroundColor="",this.textColor="",this.projectorMode=!1,this.capExpressionSize=!1,this.decimalToFraction=!0,this.settingsMenu=!0,this.settingsMenuOpen=!1,this.language="en",this.brailleMode="none",this.sixKeyInput=!1,this.brailleControls=!0,this.brailleExpressionDownload=!0,this.replaceCommaWith10Exp=!1,this.typingAsteriskWritesTimesSymbol=!1,this.stateStack=new s.default,this.dispatcher=new i.Dispatcher,this.s=c.createDictionaryLookupFunction((function(){return r.language})),this.dispatch=function(e){var t;for(p.leaveBreadcrumb("dispatch",e),r.dispatcher.dispatch(e);t=r._queuedCallbacks.shift();)t()},this._queuedCallbacks=[],this.stateStack=new s.default,this.dispatcher=new i.Dispatcher,this.options=e,this.model=new a.default({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:t.workerPool}),this.model=this.model,this.model.setDegreeMode(e.degreeMode),this.setLanguage(e.language),this.setBrailleMode(e.brailleMode),this.setSixKeyInput(e.sixKeyInput),this.setBrailleControls(e.brailleControls),this.setBrailleExpressionDownload(e.brailleExpressionDownload),this.setReplaceCommaWith10Exp(e.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(e.typingAsteriskWritesTimesSymbol),this.setProjectorMode(e.projectorMode),this.setCapExpressionSize(e.capExpressionSize),this.setDecimalToFraction(e.decimalToFraction),this.invertedColors=e.invertedColors,this.backgroundColor=e.backgroundColor,this.textColor=e.textColor,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=function(){return r.dispatch({type:"render"})},this.settingsProxy=t.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}t.default=g})),i("basic/dcgview-basic",["require","exports","tslib","dcgview"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DCGViewBasic=void 0;var i,o=(i=n.Class,r.__extends(a,i),a.prototype.init=function(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.DCGViewBasic=o})),i("loadcss!keypad/control-bar",(function(){})),i("keypad/control-bar",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./control-bar"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=i.default,r.__extends(s,o),s.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-keypad-control-bar dcg-do-not-blur"),role:n.const("group"),"aria-label":function(){return e.controller.s("shared-calculator-narration-keypad-controlbar")}},n.createElement("div",{class:n.const("dcg-keypad-control-bar-contents")},this.children))},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.default=a})),i("loadcss!keypad/control-btn",(function(){})),i("keypad/control-btn",["require","exports","tslib","dcgview","loadcss!./control-btn"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n.Class,r.__extends(a,i),a.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-keypad-control-btn":!0,"dcg-disabled":e.isDisabled(),"dcg-selected":!e.isDisabled()&&e.isSelected(),"dcg-selectable-btn":!e.isDisabled()&&e.isSelectable(),"dcg-narrow-control-btn":e.props.narrowButton&&e.props.narrowButton()}},didMount:this.bindFn(this.didMount),role:n.const("button"),"aria-disabled":function(){return e.isDisabled()||void 0},"aria-label":function(){return e.getAriaLabel()},"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":function(){return e.hasPopup()||e.isDisabled()||!e.isSelectable()?void 0:e.isSelected()},"aria-expanded":function(){return e.hasPopup()&&!e.isDisabled()?e.isSelected():void 0},tabindex:this.bindFn(this.getTabIndex)},this.children)},a.prototype.getTabIndex=function(){return this.isDisabled()?void 0:this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0},a.prototype.handleTap=function(e){this.isDisabled()||this.props.onTap(e)},a.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},a.prototype.hasPopup=function(){return!!this.props.ariaPopup&&this.props.ariaPopup()},a.prototype.isDisabled=function(){return!!this.props.disabled&&this.props.disabled()},a.prototype.isSelected=function(){return!!this.props.selected&&this.props.selected()},a.prototype.isSelectable=function(){return!!this.props.selectable&&this.props.selectable()},a.prototype.didMount=function(e){this.props.didMount&&this.props.didMount(e)},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.default=o})),i("loadcss!dcgview-helpers/download-button",(function(){})),i("dcgview-helpers/download-button",["require","exports","tslib","dcgview","browser","loadcss!./download-button"],(function(e,t,r,n,i){"use strict";function o(){return!i.IS_IE&&!function(){if(i.IS_SAFARI){var e=navigator.userAgent.match(/Version\/(\d+)/);if(e&&e[1])return parseFloat(e[1])<11}}()&&void 0!==document.createElement("a").download}Object.defineProperty(t,"__esModule",{value:!0}),t.canDownload=void 0,t.canDownload=function(){return o()||void 0!==navigator.msSaveBlob};var a,s=(a=n.Class,r.__extends(l,a),l.prototype.init=function(){this.supportsDirectDownload=o()},l.prototype.template=function(){var e=this;return n.createElement("a",{role:n.const("button"),tabindex:function(){return e.props.enabled()?0:-1},"aria-disabled":function(){return!e.props.enabled()},class:function(){return{"dcg-download-button":!0,"dcg-disabled":!e.props.enabled(),"dcg-braille-equations":e.props.isBraille,"dcg-svg-button":e.props.isSvg}},didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:function(){return e.supportsDirectDownload?e.props.filename():void 0},onTap:function(t){var r;e.supportsDirectDownload||!navigator.msSaveOrOpenBlob||(r=e.props.data())&&(navigator.msSaveOrOpenBlob(r,e.props.filename()),t.preventDefault())}},n.createElement("i",{class:n.const("dcg-icon-download")}),n.createElement("span",null,(function(){return e.props.text()})))},l.prototype.didMountDownload=function(e){this.downloadLink=e,this.didUpdate()},l.prototype.didUnmountDownload=function(){this.revokeBlobURL()},l.prototype.didUpdate=function(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)},l.prototype.updateDownloadURL=function(){var e;this.revokeBlobURL(),!this.supportsDirectDownload||(e=this.props.data())&&(this.cachedObjectURL=URL.createObjectURL(e))},l.prototype.revokeBlobURL=function(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.default=s})),i("lib/export-braille-equations",["require","exports","abraham","graphing-calc/models/expression","expressions/regression_view","core/lib/number-to-latex"],(function(e,t,r,n,i,o){"use strict";function a(e,t,n){if(void 0===n&&(n=!1),n&&(e=e.replace(/ /g,"\\ ")),"none"===t)return e;var i="nemeth"===t?r.latexToNemeth(e):r.latexToUeb(e);return i.isError?"":r.UnicodeBraille.toBrailleAscii(i.value)}function s(e){var t="--------------------";return t+"\n"+e+"\n"+t}function l(e,t){var r=""+e;return"nemeth"===t?a(r,t,!1)+"_4":"ueb"===t?a(r+".",t,!1):""}Object.defineProperty(t,"__esModule",{value:!0}),t.getBrailleEquationsBasic=t.getBrailleEquationsGraphing=void 0,t.getBrailleEquationsGraphing=function(e,t){if("none"===t)return"";var r=[];r.push(a("Expression List",t,!0)),r.push(""),r.push("");for(var c="",u=e.getItemCount(),d=0;d<u;d++){var p=e.getItemModelByIndex(d);if(p&&!p.secret){""!==c&&"folder"!==p.type&&c!==p.folderId&&(r.push(s(a("End Folder",t,!0))),c="");var h="";switch(p.type){case"expression":if(!p.hidden){var g=l(p.displayIndex,t),f=(h=p.latex,[]),m=p.formula;if(m&&!n.isEmpty(p))if(e.shouldShowEvaluationForItem(p.id)){var y=m.zero_values&&m.zero_values.length?m.zero_values[0].val:m.constant_value;Array.isArray(y)?h+="\\ "+y.length+"\\ element\\ list":h+="="+y}else if(n.shouldShowCDFFooter(p))f.push(a("Min="+n.getCDFMin(p),t,!1)),f.push(a("Max="+n.getCDFMax(p),t,!1)),n.isCDFMaxValid(p)&&n.isCDFMinValid(p)&&f.push(a("CDF="+n.getCDFEvaluation(p),t,!1));else if(n.isTTest(p)){var v=n.getTTestResults(p);v&&(f.push(a("<"+o.numberToStatsConfidenceLatex(v.lessThan,5),t,!1)),f.push(a(">"+o.numberToStatsConfidenceLatex(v.greaterThan,5),t,!1)),f.push(a("\\ne"+o.numberToStatsConfidenceLatex(v.notEqual,5),t,!1)))}else if(m.is_regression&&m.regression){var b=m.regression,x=b.statistics,w=b.parameters;for(var S in x.hasOwnProperty("Rsquared")&&f.push(a("R^2="+i.getRoundedStat(b,"Rsquared"),t,!1)),x.hasOwnProperty("rsquared")&&f.push(a("r^2="+i.getRoundedStat(b,"rsquared"),t,!1)),x.hasOwnProperty("r")&&f.push(a("r="+i.getRoundedStat(b,"r"),t,!1)),x.hasOwnProperty("RMSE")&&f.push(a("\\operatorname{RMSE}="+i.getRoundedStat(b,"RMSE"),t,!1)),w)f.push(a(S+"="+i.getRoundedParam(b,S),t,!1))}r.push(g+"  "+a(h,t,!1)),r.push.apply(r,f)}break;case"text":r.push(a(p.text,t,!0));break;case"folder":p.collapsed?h="Collapsed Folder "+p.title:(h="Start Folder "+p.title,c=p.id),r.push(s(a(h,t,!0)));break;case"image":r.push(a("Image",t,!1));break;case"simulation":r.push(a("Simulation",t,!1));break;case"table":r.push(s(a("Start Table",t,!0)));for(var E=0,_=p.rowModels;E<_.length;E++){for(var k=[],M=0,I=_[E].cells;M<I.length;M++){var C,L,P=I[M],T="";"header"===P.type?T=P.latex||"":"cell"===P.type&&(C=P.column.index,L=P.row.index-1,T=P.column.disabled?P.column.computedValues[L]||"":p.columns[C].values[L]||""),k.push(a(T,t))}var A=k.join("\t");/^\t/.test(A)||r.push(A)}r.push(s(a("End Table",t,!0)));break;default:return p}}}return""!==c&&r.push(s(a("End Folder",t,!0))),r.join("\n")},t.getBrailleEquationsBasic=function(e,t){if("none"===t)return"";var r=[];r.push(a("Expression List",t,!0)),r.push(""),r.push("");for(var n=0,i=e.getExpressionOrder();n<i.length;n++){var o=i[n],s=l(e.getExpressionIndex(o)+1,t),c=e.getExpressionLatex(o),u=e.getExpressionValue(o);void 0!==u&&(c+="="+u),r.push(s+"  "+a(c,t,!1))}return r.join("\n")}})),i("loadcss!basic/settings-menu",(function(){})),i("basic/settings-menu",["require","exports","tslib","browser","keys","dcgview","./dcgview-basic","jquery","dcgview-helpers/download-button","lib/export-braille-equations","loadcss!./settings-menu"],(function(e,t,r,n,i,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMenu=void 0;var u,d=o.Components.If,p=(u=a.DCGViewBasic,r.__extends(h,u),h.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-point-left":e.controller.containerSize.height<=420}},role:o.const("complementary"),"aria-label":o.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},o.createElement("div",{class:o.const("dcg-popover-interior"),style:function(){return{background:e.controller.getBackgroundColor()}}},o.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-displaysize-container":!0}}},o.createElement("div",{class:o.const("dcg-group-title")},(function(){return e.controller.s("shared-calculator-label-settings-display")})),o.createElement("div",{role:o.const("group"),"aria-label":function(){return e.controller.s("shared-calculator-narration-settings-display-size")},class:o.const("dcg-displaysize-buttons dcg-segmented-control-container")},o.createElement("span",{class:function(){return{"dcg-displaysize-option":!0,"dcg-displaysize-default":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected":!e.getProjectorMode()}},role:o.const("button"),onTap:this.bindFn(this.setDefaultDisplaySize),tabindex:o.const(0),"aria-label":function(){return e.controller.s("shared-calculator-narration-settings-display-size-default")},"aria-pressed":function(){return!e.getProjectorMode()}},o.const("A")),o.createElement("span",{class:function(){return{"dcg-displaysize-option":!0,"dcg-displaysize-large":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected":e.getProjectorMode()}},role:o.const("button"),onTap:this.bindFn(this.setLargeDisplaySize),tabindex:o.const(0),"aria-label":function(){return e.controller.s("shared-calculator-narration-settings-display-size-large")},"aria-pressed":this.bindFn(this.getProjectorMode)},o.const("A")))),o.createElement("div",{role:o.const("checkbox"),tabindex:o.const(0),onTap:this.bindFn(this.onToggleInvertedColors),"aria-checked":function(){return e.controller.getInvertedColors()},"aria-label":function(){return e.controller.s("basic-calculator-narration-reverse-contrast")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-checked":e.controller.getInvertedColors(),"dcg-checkbox-container":!0,"dcg-reverse-contrast":!0}},handleEvent:o.const(!0)},o.createElement("span",{class:o.const("dcg-checkbox-box")},o.createElement("i",{class:o.const("dcg-icon-check")})),o.createElement("span",{class:o.const("dcg-checkbox-label")},(function(){return e.controller.s("basic-calculator-label-reverse-contrast")}))),o.createElement(d,{predicate:function(){return e.controller.getBrailleControls()}},(function(){return o.createElement("div",null,o.createElement("div",{role:o.const("checkbox"),tabindex:o.const(0),onTap:e.bindFn(e.onToggleBrailleMode),"aria-checked":function(){return e.controller.renderAsBraille()},"aria-label":function(){return e.controller.s("basic-calculator-narration-braille-mode")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-checked":e.controller.renderAsBraille(),"dcg-checkbox-container":!0,"dcg-braille-mode":!0}},handleEvent:o.const(!0)},o.createElement("span",{class:o.const("dcg-checkbox-box")},o.createElement("i",{class:o.const("dcg-icon-check")})),o.createElement("span",{class:o.const("dcg-checkbox-label")},(function(){return e.controller.s("basic-calculator-label-braille-mode")}))),o.createElement(d,{predicate:function(){return e.controller.renderAsBraille()}},(function(){return o.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-braille-container":!0}}},o.createElement("div",{role:o.const("group"),"aria-label":function(){return e.controller.s("basic-calculator-label-braille-mode")},class:o.const("dcg-braille-options-buttons dcg-segmented-control-container")},o.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected":e.isNemeth()}},role:o.const("button"),onTap:function(){return e.setBrailleMode("nemeth")},tabindex:o.const(0),"aria-label":function(){return e.controller.s("basic-calculator-narration-nemeth")},"aria-pressed":function(){return e.isNemeth()}},(function(){return e.controller.s("basic-calculator-button-nemeth")})),o.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-segmented-control-btn":!0,"dcg-dark-gray-segmented-control-btn":!0,"dcg-selected":e.isUEB()}},role:o.const("button"),onTap:function(){return e.setBrailleMode("ueb")},tabindex:o.const(0),"aria-label":function(){return e.controller.s("basic-calculator-narration-ueb")},"aria-pressed":function(){return e.isUEB()}},(function(){return e.controller.s("basic-calculator-button-ueb")}))),o.createElement("div",{class:o.const("dcg-braille-options-container")},o.createElement("div",{role:o.const("checkbox"),tabindex:o.const(0),onTap:function(){return e.onToggleSixKeyInput()},"aria-checked":function(){return e.controller.getSixKeyInput()},"aria-label":function(){return e.controller.s("basic-calculator-narration-six-key-input")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-six-key-checkbox":!0,"dcg-checked":e.controller.getSixKeyInput(),"dcg-checkbox-container":!0}},handleEvent:o.const(!0)},o.createElement("span",{class:o.const("dcg-checkbox-box")},o.createElement("i",{class:o.const("dcg-icon-check")})),o.createElement("span",{class:o.const("dcg-checkbox-label")},(function(){return e.controller.s("basic-calculator-label-six-key-input")}))),o.createElement("a",{href:o.const("https://www.desmos.com/accessibility#braille"),class:o.const("dcg-six-key-info"),target:o.const("_blank")},o.createElement("i",{class:o.const("dcg-icon-question-sign")})),o.createElement(d,{predicate:function(){return!n.IS_MOBILE&&l.canDownload()&&e.controller.getBrailleExpressionDownload()}},(function(){return o.createElement(l.default,{data:function(){var t=c.getBrailleEquationsBasic(e.model,e.controller.getBrailleMode());return new Blob([t],{type:"text/plain"})},enabled:e.const(!0),filename:e.const("desmos-equations.brl"),text:function(){return e.controller.s("basic-calculator-link-download-braille-equations")},isBraille:e.const(!0)})}))))})))})),o.createElement(d,{predicate:function(){return!!e.getVersionNumber()}},(function(){return o.createElement("div",{class:o.const("dcg-version-number")},o.const("Version: "),(function(){return e.getVersionNumber()}))}))))},h.prototype.getVersionNumber=function(){var e=window;if(e&&e.AppBridge)return e.AppBridge.versionNumber},h.prototype.didUnmountSettingsDropdown=function(){s(document).off(".dcg-settings-view")},h.prototype.didMountSettingsDropdown=function(e){var t=this;this.settingsGroupNode=e,s(document).on("dcg-tapstart.dcg-settings-view",(function(e){0===s(e.target).closest(".dcg-basic-settings-container").length&&t.controller.dispatch({type:"close-settings-menu"})})),s(document).on("keydown.dcg-settings-view",(function(e){var r,n,o;"Esc"===i.lookup(e)&&(t.controller.dispatch({type:"close-settings-menu"}),t.controller.dispatch({type:"focus-last-expression"})),"Tab"!==i.lookup(e)||e.altKey||e.metaKey||e.ctrlKey||(r=document.activeElement,n=s(t.props.settingsButtonNode()),o=s(t.settingsGroupNode).find(".dcg-settings-menu-option:last"),e.shiftKey||r!==o[0]?e.shiftKey&&r===n[0]&&(o.trigger("focus"),e.preventDefault(),e.stopPropagation()):(n.trigger("focus"),e.preventDefault(),e.stopPropagation()))}))},h.prototype.setBrailleMode=function(e){this.controller.dispatch({type:"set-braille-mode",mode:e})},h.prototype.onToggleBrailleMode=function(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.renderAsBraille()?"none":"nemeth"})},h.prototype.isNemeth=function(){return"nemeth"===this.controller.getBrailleMode()},h.prototype.isUEB=function(){return"ueb"===this.controller.getBrailleMode()},h.prototype.isLatex=function(){return"none"===this.controller.getBrailleMode()},h.prototype.onToggleSixKeyInput=function(){var e=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",mode:e})},h.prototype.onToggleInvertedColors=function(){var e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})},h.prototype.getProjectorMode=function(){return this.controller.isProjectorMode()},h.prototype.setDefaultDisplaySize=function(){this.controller.dispatch({type:"update-projector-mode",mode:!1})},h.prototype.setLargeDisplaySize=function(){this.controller.dispatch({type:"update-projector-mode",mode:!0})},h);function h(){return null!==u&&u.apply(this,arguments)||this}t.SettingsMenu=p})),i("loadcss!basic/keypad/settings-control-button",(function(){})),i("basic/keypad/settings-control-button",["require","exports","tslib","dcgview","keypad/control-btn","basic/dcgview-basic","basic/settings-menu","loadcss!./settings-control-button"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.If,c=(s=o.DCGViewBasic,r.__extends(u,s),u.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement("div",{class:n.const("dcg-basic-settings-container")},n.createElement(i.default,{didMount:function(t){return e.settingsButtonNode=t},command:this.const("settings"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-settings")},onTap:this.bindFn(this.onToggleSettingsMenu),selected:function(){return e.controller.isSettingsMenuOpen()},ariaPopup:this.const(!0)},n.createElement("i",{class:n.const("dcg-icon-wrench")})),n.createElement(l,{predicate:function(){return e.controller.isSettingsMenuOpen()}},(function(){return n.createElement(a.SettingsMenu,{controller:e.props.controller,settingsButtonNode:function(){return e.settingsButtonNode}})})))},u.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("basic/keypad/fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./settings-control-button","basic/dcgview-basic"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components,u=c.If,d=c.IfElse,p=(l=s.DCGViewBasic,r.__extends(h,l),h.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement(i.default,{controller:this.props.controller},n.createElement(u,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))})),n.createElement(u,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))})),d((function(){return t.shouldShowClear()}),{true:function(){return n.createElement(o.default,{command:e.const("clear"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return t.dispatch({type:"clear"})}},(function(){return t.s("basic-calculator-button-controlbar-clear")}))},false:function(){return n.createElement(o.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear-all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},(function(){return t.s("basic-calculator-button-controlbar-clear-all")}))}}),n.createElement(u,{predicate:function(){return e.controller.getRestrictedEditing()}},(function(){return n.createElement("div",{class:n.const("dcg-spacer-2")})})),n.createElement(u,{predicate:function(){return"none"===t.getBrailleMode()}},(function(){return n.createElement(o.default,{command:e.const("backspace"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},n.createElement("i",{class:n.const("dcg-icon-delete")}))})),n.createElement(u,{predicate:function(){return e.props.controller().getSettingsMenu()}},(function(){return n.createElement(a.default,{controller:e.props.controller})})))},h.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},h);function h(){return null!==l&&l.apply(this,arguments)||this}t.default=p})),i("basic/keypad/single-expression-fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=n.Components.If,c=(s=a.DCGViewBasic,r.__extends(u,s),u.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement(i.default,{controller:this.props.controller},n.createElement(l,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))})),n.createElement(l,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))})),n.createElement(o.default,{command:this.const("clear"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return t.dispatch({type:"clear"})}},(function(){return t.s("basic-calculator-button-controlbar-clear")})),n.createElement(l,{predicate:function(){return e.controller.getRestrictedEditing()}},(function(){return n.createElement("div",{class:n.const("dcg-spacer-2")})})),n.createElement(l,{predicate:function(){return"none"===t.getBrailleMode()}},(function(){return n.createElement(o.default,{command:e.const("backspace"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},n.createElement("i",{class:n.const("dcg-icon-delete")}))})))},u);function u(){return null!==s&&s.apply(this,arguments)||this}t.default=c})),i("loadcss!keypad/control-toggle",(function(){})),i("keypad/control-toggle",["require","exports","tslib","lib/aria","core/lib/color-helpers","dcgview","./dcgview-keypad","loadcss!./control-toggle"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=a.default,r.__extends(c,s),c.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-keypad-control-toggle":!0,"dcg-toggled":e.props.toggled()}},role:o.const("button"),tabindex:o.const("0"),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.handleTap)},o.createElement("div",{class:o.const("dcg-ctrl-toggle-option")},this.props.defaultOption),o.createElement("div",{class:o.const("dcg-ctrl-toggle-option")},this.props.toggledOption),o.createElement("div",{class:o.const("dcg-ctrl-toggle-cover"),style:function(){return{background:i.shadeColor(e.controller.getBackgroundColor(),-.1)}}}))},c.prototype.getAriaLabel=function(){var e={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.s("shared-calculator-narration-control-toggle-switch-to-default",e):this.controller.s("shared-calculator-narration-control-toggle-switch-to-toggled",e)},c.prototype.handleTap=function(){this.props.toggled()?n.alert(this.props.defaultAriaLabel()):n.alert(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("basic/keypad/scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle","./settings-control-button"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,u=n.Components,d=u.If,p=u.IfElse,h=(c=a.DCGViewBasic,r.__extends(g,c),g.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement(i.default,{controller:this.props.controller},n.createElement(o.default,{command:this.const("main"),selected:function(){return"main"===t.getKeyboardMode()},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"main"})},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-main")}},(function(){return t.s("basic-calculator-button-controlbar-main")})),n.createElement(o.default,{command:this.const("ABC"),selected:function(){return-1!==["qwerty","capitalQwerty","letters"].indexOf(t.getKeyboardMode())},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-abc")},onTap:function(){return t.dispatch({type:"ABC"})}},(function(){return t.s("basic-calculator-button-controlbar-abc")})),n.createElement(o.default,{command:this.const("functions"),selected:function(){return-1!==["functions","restrictedFunctions"].indexOf(t.getKeyboardMode())},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-functions")},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"functions"})}},(function(){return t.s("basic-calculator-button-controlbar-func")})),n.createElement(s.default,{command:this.const("degrees"),toggled:function(){return e.model.getDegreeMode()},defaultOption:function(){return t.s("basic-calculator-label-controlbar-rad")},toggledOption:function(){return t.s("basic-calculator-label-controlbar-deg")},defaultAriaLabel:function(){return t.s("basic-calculator-narration-controlbar-radians")},toggledAriaLabel:function(){return t.s("basic-calculator-narration-controlbar-degrees")},onTap:function(){return t.dispatch({type:"degrees"})},controller:this.props.controller}),n.createElement(d,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))})),n.createElement(d,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))})),p((function(){return t.shouldShowClear()}),{true:function(){return n.createElement(o.default,{command:e.const("clear"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return t.dispatch({type:"clear"})}},(function(){return t.s("basic-calculator-button-controlbar-clear")}))},false:function(){return n.createElement(o.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear-all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},(function(){return t.s("basic-calculator-button-controlbar-clear-all")}))}}),n.createElement(d,{predicate:function(){return e.props.controller().getSettingsMenu()}},(function(){return n.createElement(l.default,{controller:e.props.controller})})))},g);function g(){return null!==c&&c.apply(this,arguments)||this}t.default=h})),i("basic/keypad/single-expression-scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components.If,u=(l=a.DCGViewBasic,r.__extends(d,l),d.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement(i.default,{controller:this.props.controller},n.createElement(s.default,{command:this.const("degrees"),toggled:function(){return e.model.getDegreeMode()},defaultOption:function(){return t.s("basic-calculator-label-controlbar-rad")},toggledOption:function(){return t.s("basic-calculator-label-controlbar-deg")},defaultAriaLabel:function(){return t.s("basic-calculator-narration-controlbar-radians")},toggledAriaLabel:function(){return t.s("basic-calculator-narration-controlbar-degrees")},onTap:function(){return t.dispatch({type:"degrees"})},controller:this.props.controller}),n.createElement("div",{class:n.const("dcg-spacer")}),n.createElement(c,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))})),n.createElement(c,{predicate:function(){return!e.controller.getRestrictedEditing()}},(function(){return n.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))})),n.createElement("div",{class:n.const("dcg-spacer")}),n.createElement(o.default,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return t.dispatch({type:"clear"})}},(function(){return t.s("basic-calculator-button-controlbar-clear")})),n.createElement(o.default,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-backspace")},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},n.createElement("i",{class:n.const("dcg-icon-delete")})))},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("basic/keypad/fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){var e=this;return n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.s("basic-calculator-narration-keypad")}},n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"(",{colspan:this.parenColspan()}),o.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),o.view(this,"/")),n.createElement(s.default,null,o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"*")),n.createElement(s.default,null,o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"-")),n.createElement(s.default,null,o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"+")),n.createElement(s.default,null,o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"ans"),o.view(this,"enter",{style:"blue"}))))},u.prototype.parenColspan=function(){return 1<this.controller.getAdditionalFunctions().length?.5:1},u.prototype.makeAdditionalFunctionKey=function(e){var t=this.controller.getAdditionalFunctions()[e];return"exponent"===t?o.view(this,"a^b"):"percent"===t?o.view(this,"%"):"sqrt"===t?o.view(this,"sqrt"):"fraction"===t?o.view(this,"a/b"):void 0},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/single-expression-fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){var e=this;return n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.s("basic-calculator-narration-keypad")}},n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"(",{colspan:this.parenColspan()}),o.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)),n.createElement(s.default,null,o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/")),n.createElement(s.default,null,o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*")),n.createElement(s.default,null,o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-")),n.createElement(s.default,null,o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),o.view(this,"+"))))},u.prototype.parenColspan=function(){return 2===this.controller.getAdditionalFunctions().length?1.5:2},u.prototype.dotColspan=function(){return this.controller.getAdditionalFunctions().length?1:2},u.prototype.makeAdditionalFunctionKey=function(e){var t=this.controller.getAdditionalFunctions()[e];return"exponent"===t?o.view(this,"a^b"):"percent"===t?o.view(this,"%"):"sqrt"===t?o.view(this,"sqrt"):void 0},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/single-expression-scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"("),o.view(this,")"),o.view(this,"x^2"),o.view(this,"sqrt"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"x^3"),o.view(this,"x^y"),o.view(this,"ythroot")),n.createElement(s.default,null,o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"pi"),o.view(this,"e^x"),o.view(this,"!")),n.createElement(s.default,null,o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"log"),o.view(this,"ln"),o.view(this,"|x|")),n.createElement(s.default,null,o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan")),n.createElement(s.default,null,o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"x/y"),o.view(this,"+"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"arcsin"),o.view(this,"arccos"),o.view(this,"arctan")))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/sci-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components.IfElse,u=(l=i.DCGViewBasic,r.__extends(d,l),d.prototype.template=function(){var e=this;return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"a^2"),o.view(this,"a^b"),o.view(this,"|a|"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"%"),o.view(this,"a/b")),n.createElement(s.default,null,o.view(this,"sqrt"),o.view(this,"nthroot"),o.view(this,"pi"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"left",{style:"highlight"}),o.view(this,"right",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.spacer(.5),o.view(this,"backspace",{style:"highlight",colspan:1.5})),n.createElement(s.default,null,o.view(this,"("),o.view(this,")"),c((function(){return e.controller.getReplaceCommaWith10Exp()}),{true:function(){return o.view(e,"10^n")},false:function(){return o.view(e,",")}}),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"ans"),o.view(this,"+"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"enter",{style:"blue",colspan:2})))},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("basic/keypad/sci-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"q"),o.view(this,"w"),o.view(this,"e"),o.view(this,"r"),o.view(this,"t"),o.view(this,"y"),o.view(this,"u"),o.view(this,"i"),o.view(this,"o"),o.view(this,"p")),n.createElement(s.default,null,n.createElement("div",{class:n.const("dcg-half-width-placeholder")}),o.view(this,"a"),o.view(this,"s"),o.view(this,"d"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"j"),o.view(this,"k"),o.view(this,"l"),n.createElement("div",{class:n.const("dcg-half-width-placeholder")})),n.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,"z"),o.view(this,"x"),o.view(this,"c"),o.view(this,"v"),o.view(this,"b"),o.view(this,"n"),o.view(this,"m"),o.view(this,","),o.view(this,"backspace",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:1.5}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter",{style:"blue",colspan:1.5})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/sci-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"a"),o.view(this,"b"),o.view(this,"c"),o.view(this,"d"),o.view(this,"e"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"i"),o.view(this,"j")),n.createElement(s.default,null,o.view(this,"k"),o.view(this,"l"),o.view(this,"m"),o.view(this,"n"),o.view(this,"o"),o.view(this,"p"),o.view(this,"q"),o.view(this,"r"),o.view(this,"s"),o.view(this,"t")),n.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,","),o.view(this,"u"),o.view(this,"v"),o.view(this,"w"),o.view(this,"x"),o.view(this,"y"),o.view(this,"z"),o.view(this,"pi"),o.view(this,"backspace",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:2}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"enter",{style:"blue",colspan:2})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/sci-capital-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),n.createElement(s.default,null,n.createElement("div",{class:n.const("dcg-half-width-placeholder")}),o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),n.createElement("div",{class:n.const("dcg-half-width-placeholder")})),n.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.view(this,","),o.view(this,"backspace",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:1.5}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter",{style:"blue",colspan:1.5})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/sci-capital-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewBasic,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"A"),o.view(this,"B"),o.view(this,"C"),o.view(this,"D"),o.view(this,"E"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"I"),o.view(this,"J")),n.createElement(s.default,null,o.view(this,"K"),o.view(this,"L"),o.view(this,"M"),o.view(this,"N"),o.view(this,"O"),o.view(this,"P"),o.view(this,"Q"),o.view(this,"R"),o.view(this,"S"),o.view(this,"T")),n.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,","),o.view(this,"U"),o.view(this,"V"),o.view(this,"W"),o.view(this,"X"),o.view(this,"Y"),o.view(this,"Z"),o.view(this,"pi"),o.view(this,"backspace",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:2}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"enter",{style:"blue",colspan:2})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("basic/keypad/sci-functions-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=n.Components.IfElse,u=(l=i.DCGViewBasic,r.__extends(d,l),d.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-sci-func-keypad")},n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"a^b"),o.view(this,"sqrt"),o.view(this,"nthroot")),n.createElement(s.default,null,o.view(this,"arcsin"),o.view(this,"arccos"),o.view(this,"arctan"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"e^x"),o.view(this,"abs"),c((function(){return e.controller.getReplaceRoundWithReciprocal()}),{true:function(){return o.view(e,"a^{-1}")},false:function(){return o.view(e,"round")}})),n.createElement(s.default,null,o.view(this,"mean"),o.view(this,"stdev"),o.view(this,"stdevp"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"ln"),o.view(this,"log"),o.view(this,"backspace",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"nPr"),o.view(this,"nCr"),o.view(this,"!"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),o.view(this,"e"),o.view(this,"pi"),o.view(this,"enter",{style:"blue"}))))},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=u})),i("basic/keypad/scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./sci-keypad","./sci-qwerty-keypad","./sci-letters-keypad","./sci-capital-qwerty-keypad","./sci-capital-letters-keypad","./sci-functions-keypad"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,p=n.Components.SwitchUnion,h=(d=i.DCGViewBasic,r.__extends(g,d),g.prototype.template=function(){var e=this;return n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.s("basic-calculator-narration-keypad")}},p((function(){return e.controller.getKeyboardMode()}),{qwerty:function(){return n.createElement(a.default,{controller:e.props.controller})},letters:function(){return n.createElement(s.default,{controller:e.props.controller})},capitalQwerty:function(){return n.createElement(l.default,{controller:e.props.controller})},capitalLetters:function(){return n.createElement(c.default,{controller:e.props.controller})},functions:function(){return n.createElement(u.default,{controller:e.props.controller})},main:function(){return n.createElement(o.default,{controller:e.props.controller})}}))},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.default=h})),i("loadcss!basic/keypad/braille-example-row",(function(){})),i("basic/keypad/braille-example-row",["require","exports","tslib","dcgview","dcgview-helpers/static-mathquill-view","abraham","loadcss!./braille-example-row"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrailleExampleRow=void 0;var a,s=n.Components.For,l=(a=n.Class,r.__extends(c,a),c.prototype.template=function(){var e=this;return n.createElement("tr",null,n.createElement(s,{each:function(){return e.getBrailleAscii(e.props.latex())},key:function(e){return e.key}},n.createElement("td",null,(function(e){return n.createElement("span",{class:n.const("dcg-key-press")},(function(){return e.char}))}))),n.createElement("td",{class:n.const("dcg-braille-font")},(function(){return e.getBrailleUnicode(e.props.latex())})),n.createElement("td",null,n.createElement(i.default,{config:this.const({}),latex:function(){return e.props.latex()}})))},c.prototype.getBrailleAscii=function(e){for(var t=o.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)),r=[],n=0;n<t.length;n++)r.push({char:t[n],key:n+")"+t[n]});return r},c.prototype.getBrailleUnicode=function(e){var t;return"nemeth"===this.props.brailleMode()?t=o.latexToNemeth(e):"ueb"===this.props.brailleMode()&&(t=o.latexToUeb(e)),t&&t.value?t.value:""},c);function c(){return null!==a&&a.apply(this,arguments)||this}t.BrailleExampleRow=l})),i("loadcss!basic/keypad/braille-keypad",(function(){})),i("basic/keypad/braille-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./braille-example-row","loadcss!./braille-keypad"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=i.DCGViewBasic,r.__extends(l,a),l.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":e.controller.hasBackgroundColor()}}},n.createElement("div",{class:n.const("dcg-braille-io-keypad")},n.createElement("div",{class:n.const("dcg-braille-description")},n.createElement("div",{class:n.const("dcg-braille-title")},(function(){return e.controller.s("basic-calculator-text-braille-mode-is-on",{mode:e.brailleType()})})),n.createElement("div",{class:n.const("dcg-braille-info-text")},(function(){return e.controller.s("basic-calculator-text-how-to-type-braille")})),n.createElement("div",{class:n.const("dcg-blue-btn"),role:n.const("button"),tabindex:n.const(0),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"none"})}},(function(){return e.controller.s("basic-calculator-button-turn-braille-mode-off",{mode:e.brailleType()})}))),n.createElement("div",{class:n.const("dcg-braille-examples-table-container")},n.createElement("table",{class:n.const("dcg-braille-examples-table")},n.createElement("tr",null,n.createElement("th",null,(function(){return e.controller.s("basic-calculator-heading-braille-table-type-this")})),n.createElement("th",null,(function(){return e.brailleType()})),n.createElement("th",null,(function(){return e.controller.s("basic-calculator-heading-braille-table-typeset")}))),n.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("2+2")}),n.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\frac{1}{2}")}),n.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\sqrt{4}")})),n.createElement("div",{class:n.const("dcg-more-examples-link")},n.createElement("a",{href:function(){return"https://www.desmos.com/braille-examples?"+e.controller.getBrailleMode()},target:n.const("_blank")},(function(){return e.controller.s("basic-calculator-link-view-braille-examples")}))))))},l.prototype.brailleType=function(){return"nemeth"===this.controller.getBrailleMode()?"Nemeth":"ueb"===this.controller.getBrailleMode()?"UEB":""},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.default=s})),i("loadcss!basic/expression-view",(function(){})),i("basic/expression-view",["require","exports","tslib","keys","core/lib/label","dcgview","lib/i18n","jquery","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","./dcgview-basic","abraham","expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","main/mathquill-operators","../core/lib/count-latex-tokens","loadcss!Abraham","loadcss!./expression-view"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y,v=o.Components,b=v.If,x=v.Input,w=v.Textarea,S=(y=u.DCGViewBasic,r.__extends(E,y),E.prototype.getAriaLabel=function(){var e=this.getIndex()+1+"";return this.s("shared-calculator-narration-expression-index",{index:e})},E.prototype.didUpdate=function(){this.renderAnsValue()},E.prototype.didMountMQ=function(e){this.$mq=s(e)},E.prototype.getExp=function(){return this.model.getExpressionById(this.props.id())},E.prototype.getAns=function(){return this.model.getExpressionAns(this.props.id())},E.prototype.getAnsId=function(){return this.model.getExpressionAnsId(this.props.id())},E.prototype.getLatex=function(){return this.getExp().latex},E.prototype.getValue=function(){return this.model.getExpressionValue(this.props.id())},E.prototype.getBraille=function(){var e=this.getExp().braille;if(""!==e)return e;var t=g.latexToBraille(this.getLatex(),this.controller.getBrailleMode());return t.isError?"":d.UnicodeBraille.toExpandedBrailleAscii(t.value)},E.prototype.getIndex=function(){return this.model.getExpressionIndex(this.props.id())},E.prototype.getShowEvaluation=function(){return this.model.shouldShowEvaluationForExpression(this.props.id())},E.prototype.isFractionEvaluation=function(){return this.getExp().displayAsFraction},E.prototype.canDisplayEvaluationAsFraction=function(){return this.controller.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(this.props.id())},E.prototype.shouldDisplayEvaluationAsFraction=function(){return this.canDisplayEvaluationAsFraction()&&this.getExp().displayAsFraction},E.prototype.toggleFractionEvaluation=function(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})},E.prototype.getFractionDisplayAriaLabel=function(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("basic-calculator-narration-convert-to-decimal"):this.controller.s("basic-calculator-narration-convert-to-fraction")},E.prototype.getError=function(){var e=this.model.getExpressionError(this.props.id());return e&&0<this.getLatex().length?a.unpack(e,this.controller.getLanguage()):""},E.prototype.showError=function(){return!!this.getError()},E.prototype.getFractionMessage=function(){return this.shouldDisplayEvaluationAsFraction()?this.s("basic-calculator-label-convert-to-decimal"):this.s("basic-calculator-label-convert-to-fraction")},E.prototype.getIsFocused=function(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())},E.prototype.onFocusedChanged=function(e){this.getExp()&&(e?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))},E.prototype.onMQReflow=function(){this.renderedAnsData=void 0,this.renderAnsValue()},E.prototype.renderAnsValue=function(){var e,t,r,n,o=this;this.$mq&&(e=this.getAns(),n=!1,(t=this.getAnsId())&&(r=this.model.getExpressionById(t),n=r&&r.displayAsFraction),this.renderedAnsData&&this.renderedAnsData.value==e&&this.renderedAnsData.displayAsFraction===n||(this.renderedAnsData={value:e,displayAsFraction:n},this.$mq.find(".dcg-mq-ans").each((function(t,r){var a,l=s(r);"number"==typeof e?a=i.truncatedHTMLLabel(e,{digits:o.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:n}):"string"==typeof e&&(a=e),a?l.removeClass("dcg-invalid").html(a):l.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')}))))},E.prototype.getEvaluationLatex=function(){var e=this.getValue();if(void 0===e&&(e=NaN),this.model.isRationalizableConstant(this.props.id())&&!this.shouldDisplayEvaluationAsFraction())return"";if(Array.isArray(e))return"\\mathrm{"+e.length+"\\ element\\ list}";var t=i.truncatedLatexLabel(e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()});return"undefined"===t?"=\\mathrm{undefined}":"="+t},E.prototype.getEvaluationBraille=function(){var e=this.getEvaluationLatex(),t=g.latexToBraille(e,this.controller.getBrailleMode());return t.isError?"":d.UnicodeBraille.toExpandedBrailleAscii(t.value)},E.prototype.didMountBrailleInput=function(e){this.brailleInputNode=e},E.prototype.didUnmountBrailleInput=function(){this.brailleInputNode=void 0},E.prototype.handleBrailleFocus=function(e){var t=e.target;t&&setTimeout((function(){t.setSelectionRange(0,0)}))},E.prototype.handleBrailleKeydown=function(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(n.lookup(e)===n.UP?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),e.preventDefault()):n.lookup(e)===n.DOWN?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),e.preventDefault()):n.lookup(e)===n.ENTER?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),e.preventDefault()):n.lookup(e)===n.BACKSPACE&&document.activeElement===this.brailleInputNode&&""===this.getBraille()&&(this.dispatch({type:"backspace-from-braille"}),e.preventDefault()))},E.prototype.forceModelFocus=function(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)},E.prototype.focusBrailleInput=function(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()},E.prototype.getPostLabel=function(){if(this.showError())return this.getError();if(this.getShowEvaluation()){var e=this.getValue();return void 0===e&&(e=NaN),Array.isArray(e)?e.length+" element list":"equals "+i.truncatedAriaLabel(e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()})}return""},E.prototype.onBrailleInput=function(e){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});var t=g.brailleToLatex(d.UnicodeBraille.coerceToSixDotCells(e),this.controller.getBrailleMode()),r=t.isError?"":t.value;(!this.controller.getCapExpressionSize()||m.countLatexTokens(r)<=c.EXPRESSION_TOKEN_LIMIT)&&this.controller.dispatch({type:"update-latex-from-braille",latex:r,braille:e,id:this.props.id()})},E.prototype.getIndexSubscript=function(){return"_{"+(this.getIndex()+1)+"}"},E.prototype.getEvaluationDigits=function(){return this.controller.isScientificCalc()?10:7},E.prototype.onMountContainer=function(e){this.containerNode=e},E.prototype.onTapContainer=function(e){e.target!==this.containerNode||this.getShowEvaluation()||this.showError()||this.forceModelFocus()},E.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-basic-expression":!0,"dcg-focused":e.getIsFocused(),"dcg-braille-io":e.controller.renderAsBraille()}},onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer)},o.createElement(b,{predicate:function(){return e.controller.renderAsBraille()}},(function(){return o.createElement("div",{class:o.const("dcg-braille-input")},o.createElement(p.default,{ariaLabel:function(){var t=g.latexToBraille("eq"+e.getIndexSubscript(),e.controller.getBrailleMode());return t.isError?"":d.UnicodeBraille.toExpandedBrailleAscii(t.value)},didMount:e.bindFn(e.didMountBrailleInput),didUnmount:e.bindFn(e.didUnmountBrailleInput),onFocusedChanged:e.bindFn(e.onFocusedChanged),shouldFocus:e.bindFn(e.getIsFocused),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:e.bindFn(e.onBrailleInput),sixKeyInput:function(){return e.controller.getSixKeyInput()},value:function(){return e.getBraille()},isStatic:e.const(!1)}))})),o.createElement(b,{predicate:function(){return e.controller.renderAsBraille()}},(function(){return o.createElement("div",{class:o.const("dcg-braille-evaluation-container")},o.createElement(b,{predicate:function(){return e.getShowEvaluation()}},(function(){return o.createElement("div",{class:o.const("dcg-braille-evaluation")},o.createElement(x,{readonly:e.const("true"),class:e.const("dcg-braille-evaluation-inner"),value:function(){return e.getEvaluationBraille()},onFocus:e.bindFn(e.handleBrailleFocus),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:function(){}}))})),o.createElement(b,{predicate:function(){return e.showError()}},(function(){return o.createElement("div",{class:o.const("dcg-braille-error")},o.createElement("div",{class:o.const("dcg-basic-expression-error")},o.createElement("i",{class:o.const("dcg-icon-error")})),o.createElement(w,{readonly:e.const("true"),class:e.const("dcg-braille-error-inner"),value:function(){return e.getError()},onFocus:e.bindFn(e.handleBrailleFocus),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:function(){}}))})))})),o.createElement(b,{predicate:function(){return e.controller.renderAsBraille()}},(function(){return o.createElement("div",{class:o.const("dcg-exp-mathquill-container"),didMount:e.bindFn(e.didMountMQ),onTap:e.bindFn(e.forceModelFocus)},o.createElement(l.default,{latex:function(){return e.getLatex()},config:e.const({}),onReflow:e.bindFn(e.onMQReflow)}))})),o.createElement(b,{predicate:function(){return!e.controller.renderAsBraille()}},(function(){return o.createElement("div",{class:o.const("dcg-exp-mathquill-container"),didMount:e.bindFn(e.didMountMQ)},o.createElement(c.default,{latex:function(){return e.getLatex()},onReflow:e.bindFn(e.onMQReflow),isFocused:e.bindFn(e.getIsFocused),capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.bindFn(e.getMQConfig),getAriaLabel:function(){return e.getAriaLabel()},getAriaPostLabel:function(){return e.getPostLabel()},hasError:function(){return!1},onUserPressedKey:function(t,r){e.controller.isSettingsMenuOpen()&&e.controller.dispatch({type:"close-settings-menu"}),e.dispatch({type:"keypad/press-key",key:t,evt:r})},onUserTypedText:function(t){return e.dispatch({type:"keypad/type-text",text:t})},onUserChangedLatex:function(t){e.dispatch({type:"update-latex",id:e.props.id(),latex:t})},onFocusedChanged:e.bindFn(e.onFocusedChanged),disableSpace:function(){return e.controller.getRestrictedEditing()}}))})),o.createElement("div",{class:o.const("dcg-exp-output-container")},o.createElement(b,{predicate:function(){return e.showError()&&!e.controller.renderAsBraille()}},(function(){return o.createElement(h.Tooltip,{tooltip:e.bindFn(e.getError),gravity:e.const("w"),targetClickBehavior:e.const("stick")},o.createElement("div",{class:o.const("dcg-basic-expression-error")},o.createElement("i",{class:o.const("dcg-icon-error")})))})),o.createElement(b,{predicate:function(){return e.getShowEvaluation()}},(function(){return o.createElement("div",{class:function(){return{"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":Array.isArray(e.getValue())}}},o.createElement(l.default,{config:e.const({}),latex:function(){return e.getEvaluationLatex()}}),o.createElement(b,{predicate:e.bindFn(e.canDisplayEvaluationAsFraction)},(function(){return o.createElement(h.Tooltip,{tooltip:e.bindFn(e.getFractionMessage),gravity:e.const("sw"),offset:e.const({left:-5})},o.createElement("span",{role:o.const("button"),tabindex:o.const("0"),"aria-label":e.bindFn(e.getFractionDisplayAriaLabel),class:function(){return{"dcg-basic-fraction-toggle":!0,"dcg-selected":e.isFractionEvaluation()}},onTap:e.bindFn(e.toggleFractionEvaluation)},o.createElement("i",{class:o.const("dcg-icon-fraction")})))})))}))))},E.prototype.getMQConfig=function(){var e=this.controller,t=e.getAdditionalFunctions(),r=e.isFourFunctionCalc()&&(!t||-1===t.indexOf("fraction"));return{typingAsteriskWritesTimesSymbol:e.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:e.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:e.getRestrictedEditing(),autoCommands:f.getAutoCommands({disallowFrac:r})}},E);function E(){return null!==y&&y.apply(this,arguments)||this}t.default=S})),i("loadcss!basic/basic-list-view",(function(){})),i("basic/basic-list-view",["require","exports","tslib","scroll_helpers","dcgview","./dcgview-basic","./expression-view","jquery","lib/conditional_blur","loadcss!./basic-list-view"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,u=i.Components,d=u.For,p=u.If,h=(c=o.DCGViewBasic,r.__extends(g,c),g.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-basic-list-container"),role:i.const("complementary"),"aria-label":function(){return e.controller.s("basic-calculator-narration-expression-list")},didMount:this.bindFn(this.didMountContainer)},i.createElement("div",{class:i.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},i.createElement(p,{predicate:this.bindFn(this.showAnswerHint)},(function(){return i.createElement("div",{class:i.const("dcg-answer-hint")},(function(){return e.controller.s("basic-calculator-label-answer-hint")}))}))),i.createElement(d,{each:function(){return e.model.getExpressionOrder()}},i.createElement("div",{class:function(){return{"dcg-basic-list":!0,"dcg-projector-mode":e.controller.isProjectorMode()}}},(function(t){return i.createElement(a.default,{controller:e.props.controller,id:e.const(t)})}))))},g.prototype.didMountPlaceholder=function(e){s(e).on("dcg-tap",l.default)},g.prototype.showAnswerHint=function(){if(this.didHideAnswerHint)return!1;var e=this.model.getExpressionOrder()[0];return!(!this.model.shouldShowEvaluationForExpression(e)&&!this.didShowAnswerHint||(this.didShowAnswerHint=!0,(1<this.model.getNumberOfExpressions()||""===this.model.getExpressionLatex(e))&&(this.didHideAnswerHint=!0)))},g.prototype.didUpdate=function(){var e;!this.$container||0<(e=this.$container.find(".dcg-focused")).length&&n.scrollVisible(e,this.$container,50)},g.prototype.didMountContainer=function(e){this.$container=s(e)},g);function g(){var e=null!==c&&c.apply(this,arguments)||this;return e.didShowAnswerHint=!1,e.didHideAnswerHint=!1,e}t.default=h})),i("loadcss!basic/main",(function(){})),i("basic/main",["require","exports","tslib","browser","keys","dcgview","./dcgview-basic","jquery","./keypad/fourfunction-control-bar","./keypad/single-expression-fourfunction-control-bar","./keypad/scientific-control-bar","./keypad/single-expression-scientific-control-bar","./keypad/fourfunction-keypad","./keypad/single-expression-fourfunction-keypad","./keypad/single-expression-scientific-keypad","./keypad/scientific-keypad","./keypad/braille-keypad","./basic-list-view","lib/aria","touchtracking","loadcss!desmos-icons","loadcss!./main","loadcss!dcg-normalize"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x,w=o.Components,S=w.If,E=w.IfElse,_=(x=a.DCGViewBasic,r.__extends(k,x),k.prototype.template=function(){var e=this;return o.createElement(S,{predicate:function(){return e.controller.shouldRender()}},(function(){return o.createElement("div",{class:o.const("dcg-calculator-api-container"),style:o.const("width: 100%; height: 100%; position: relative;")},o.createElement("div",{class:function(){return{"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":e.controller.containerSize.width<570,"dcg-short":e.controller.containerSize.height<=540,"dcg-scientific-calculator":e.controller.isScientificCalc(),"dcg-four-function-calculator":e.controller.isFourFunctionCalc(),"dcg-container":!0}},onKeydown:e.bindFn(e.handleRootKeydown),didMount:e.bindFn(e.didMountRoot),"x-ms-format-detection":o.const("none")},o.createElement("div",{role:o.const("application"),"aria-label":function(){return e.controller.isScientificCalc()?e.controller.s("basic-calculator-narration-calc-description-scientific"):e.controller.isFourFunctionCalc()?e.controller.s("basic-calculator-narration-calc-description-fourfunction"):""},class:function(){return{"dcg-calc-basic-main":!0,"dcg-inverted-colors":e.controller.getInvertedColors(),"dcg-projector-mode":e.controller.isProjectorMode(),"dcg-ipad":n.IS_IPAD,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!e.controller.getAllowLinks()}},style:function(){return{"font-size":e.controller.getFontSize()+"px",background:e.controller.getBackgroundColor(),color:e.controller.getTextColor(),filter:e.controller.getInvertedColors()?"invert(100%)":"none"}}},o.createElement(y.default,{controller:e.props.controller}),o.createElement(S,{predicate:function(){return e.controller.isScientificCalc()&&e.model.isSingleExpression()}},(function(){return o.createElement("div",null,o.createElement(d.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},E((function(){return e.controller.renderAsBraille()}),{true:function(){return o.createElement(m.default,{controller:e.props.controller})},false:function(){return o.createElement(g.default,{controller:e.props.controller})}})))})),o.createElement(S,{predicate:function(){return e.controller.isScientificCalc()&&!e.model.isSingleExpression()}},(function(){return o.createElement("div",null,o.createElement(u.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},E((function(){return e.controller.renderAsBraille()}),{true:function(){return o.createElement(m.default,{controller:e.props.controller})},false:function(){return o.createElement(f.default,{controller:e.props.controller})}})))})),o.createElement(S,{predicate:function(){return e.controller.isFourFunctionCalc()&&e.model.isSingleExpression()}},(function(){return o.createElement("div",null,o.createElement(c.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},E((function(){return e.controller.renderAsBraille()}),{true:function(){return o.createElement(m.default,{controller:e.props.controller})},false:function(){return o.createElement(h.default,{controller:e.props.controller})}})))})),o.createElement(S,{predicate:function(){return e.controller.isFourFunctionCalc()&&!e.model.isSingleExpression()}},(function(){return o.createElement("div",null,o.createElement(l.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},E((function(){return e.controller.renderAsBraille()}),{true:function(){return o.createElement(m.default,{controller:e.props.controller})},false:function(){return o.createElement(p.default,{controller:e.props.controller})}})))})))))}))},k.prototype.didMountRoot=function(e){b.monitor(e)},k.prototype.handleRootKeydown=function(e){if(i.isUndo(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(i.isRedo(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(!e.metaKey&&!e.shiftKey)if(e.ctrlKey||e.altKey||i.lookup(e)!==i.BACKSPACE){if(e.ctrlKey===n.IS_APPLE&&e.altKey===!n.IS_APPLE){var t=i.lookupChar(e);if("N"===t){if(!this.controller.getBrailleControls())return;return this.dispatch({type:"set-braille-mode",mode:"nemeth"}),v.alert(this.controller.s("basic-calculator-narration-hotkey-nemeth")),!1}if("U"===t){if(!this.controller.getBrailleControls())return;return this.dispatch({type:"set-braille-mode",mode:"ueb"}),v.alert(this.controller.s("basic-calculator-narration-hotkey-ueb")),!1}if("Q"===t||"X"===t){if(!this.controller.getBrailleControls())return;return this.dispatch({type:"set-braille-mode",mode:"none"}),v.alert(this.controller.s("basic-calculator-narration-hotkey-braille-off")),!1}if("6"===t){if(!this.controller.getBrailleControls())return;var r=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",mode:r}),v.alert(r?this.controller.s("basic-calculator-narration-hotkey-six-key-input-on"):this.controller.s("basic-calculator-narration-hotkey-six-key-input-off")),!1}}}else if(!document.activeElement||b.elIsFocusable(s(document.activeElement)))return!1;return!0},k);function k(){return null!==x&&x.apply(this,arguments)||this}t.default=_})),i("api/basic",["require","exports","tslib","dcgview","./abstract","main/shared-worker-pool","basic/controller","basic/main","core/lib/color-helpers","underscore_model","./util","core/lib/deepCopy","lib/console"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicCalculator=void 0;var h,g=(h=i.default,r.__extends(f,h),f.prototype.init=function(e){var t=this;(e=d.default(e)).backgroundColor&&!l.isValidHexColor(e.backgroundColor)&&(p.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete e.backgroundColor),e.textColor&&!l.isValidHexColor(e.textColor)&&(p.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete e.textColor);var n=r.__assign({language:"en",qwertyKeyboard:!0,links:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,backgroundColor:"#fff",textColor:"#000",brailleMode:"none",sixKeyInput:!1,brailleControls:!0,brailleExpressionDownload:!0,projectorMode:!1,capExpressionSize:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1,decimalToFraction:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1},e);this.settings=new c.UnderscoreModel;var i={workerPool:o.default,settingsProxy:this.settings};this.controller=new a.default(n,i),this.controller.onEventEmitted=function(e){"render"===e&&t.updateView(),t.triggerEvent(e,void 0)},this.setupDomChangeDetector(n.autosize)},f.prototype.onCreateView=function(){return n.mountToNode(s.default,this.rootElt,{controller:n.const(this.controller)})},f.prototype.setState=function(e,t){t=t||{},this.controller.dispatch({type:"set-state-from-api",state:e,opts:{allowUndo:!!t.allowUndo}})},f.prototype.getState=function(){return d.default(this.controller.model.getPersistedState())},f.prototype.undo=function(){this.controller.dispatch({type:"undo",source:"api"})},f.prototype.redo=function(){this.controller.dispatch({type:"redo",source:"api"})},f.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-history"})},f.prototype.setBlank=function(e){e=e||{},this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!e.allowUndo}})},f.prototype.updateSettings=function(e){if(null!=e)for(var t in e)switch(t){case"fontSize":var r=e[t];if(void 0===r)continue;this.controller.dispatch({type:"update-font-size",size:r});break;case"invertedColors":var n=e[t];if(void 0===n)continue;this.controller.dispatch({type:"update-inverted-colors",mode:n});break;case"backgroundColor":var i=e[t];if(void 0===i||!l.isValidHexColor(i)){p.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:i});break;case"textColor":var o=e[t];if(void 0===o||!l.isValidHexColor(o)){p.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:o});break;case"degreeMode":var a=e[t];if(void 0===a)continue;this.controller.dispatch({type:"update-degree-mode",mode:a});break;case"brailleMode":var s=e[t];this.controller.dispatch({type:"set-braille-mode",mode:s});break;case"sixKeyInput":var c=e[t];if(void 0===c)continue;this.controller.dispatch({type:"set-six-key-input",mode:c});break;case"brailleControls":var d=e[t];if(void 0===d)continue;this.controller.dispatch({type:"set-braille-controls",value:d});break;case"brailleExpressionDownload":var h=e[t];if(void 0===h)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:h});break;case"projectorMode":var g=e[t];if(void 0===g)continue;this.controller.dispatch({type:"update-projector-mode",mode:g});break;case"capExpressionSize":var f=e[t];if(void 0===f)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:f});break;case"language":var m=e[t];if(void 0===m)continue;this.controller.dispatch({type:"update-language",language:u.validateLanguage(m)});break;case"settingsMenu":e.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!e.qwertyKeyboard}});var y=this.controller.getKeyboardMode();"qwerty"!==y&&"letters"!==y||this.controller.dispatch({type:"ABC"});break;case"functionDefinition":e.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!e.links}});break;case"decimalToFraction":var v=e[t];if(void 0===v)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:v});break;case"replaceCommaWith10Exp":var b=e[t];if(void 0===b)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:b});break;case"replaceRoundWithReciprocal":var x=e[t];if(void 0===x)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:x});break;case"restrictedEditing":this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!e.restrictedEditing}});break;case"typingAsteriskWritesTimesSymbol":var w=e[t];if(void 0===w)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:w})}},f.prototype.focusFirstExpression=function(){this.controller.dispatch({type:"focus-first-expression"})},f.prototype.onResizeView=function(e){this.controller.dispatch({type:"ui/container-resized",size:e})},f.prototype.onDestroyView=function(){n.unmountFromNode(this.rootElt)},f.prototype.destroy=function(){this.controller.model.destroy(),h.prototype.destroy.call(this)},f);function f(e){return h.call(this,e)||this}t.BasicCalculator=g})),i("api/fourfunction",["require","exports","tslib","./basic","core/lib/deepCopy","lib/console","./util"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=n.BasicCalculator,r.__extends(c,s),c);function c(e,t){var r=s.call(this,e)||this;return r instanceof c?(r.init(function(e){if((e=i.default(e)).hasOwnProperty("typingSlashWritesDivisionSymbol")||(e.typingSlashWritesDivisionSymbol=!0),e.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(e.typingAsteriskWritesTimesSymbol=!0),e.exponentButtonForSquareRoot&&(o.warn("As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: \"exponent\"' instead."),e.additionalFunctions=["exponent"]),e.additionalFunctions){var t=e.additionalFunctions;"string"==typeof t&&(t=[t]),2<t.length&&(o.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),t=t.slice(0,2));for(var r=!0,n=0;n<t.length;n++)-1===["sqrt","exponent","percent","fraction"].indexOf(t[n])&&(o.warn("Unrecognized value: '"+t[n]+"' for 'additionalFunction'. Valid values are 'sqrt', 'percent', 'exponent', or 'fraction'. Using default (\"sqrt\")"),r=!1);e.additionalFunctions=r?t:["sqrt"]}return e.additionalFunctions&&e.additionalFunctions.length||(e.additionalFunctions=["sqrt"]),e.singleExpression?e.evaluationMode="singleExpressionFourFunction":e.evaluationMode="fourFunction",delete e.singleExpression,e.hasOwnProperty("decimalToFraction")||(e.decimalToFraction=!1),e.language&&(e.language=a.validateLanguage(e.language)),e}(t||{})),r):new c(e,t)}t.default=l})),i("api/scientific",["require","exports","tslib","./basic","core/lib/deepCopy","./util"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=(a=n.BasicCalculator,r.__extends(l,a),l);function l(e,t){var r=a.call(this,e)||this;return r instanceof l?(r.init(function(e){return(e=i.default(e)).singleExpression?e.evaluationMode="singleExpressionScientific":e.evaluationMode="scientific",delete e.singleExpression,e.language&&(e.language=o.validateLanguage(e.language)),e}(t||{})),r):new l(e,t)}t.default=s})),i("pillow-keypad/controller",["require","exports","flux","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(s.prototype.getBackgroundColor=function(){return"does-not-matter"},s.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},s.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch((function(){t.onEventEmitted&&t.onEventEmitted(e)}))},s.prototype.getKeyboardMode=function(){return this.keyboardMode},s.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},s.prototype.typeIntoFocusedMathquill=function(e){e=e.replace(/\r|\n/g,"");var t=this.activeMQ;t&&(t.typedText(e),o.default.simulateUserChangedLatex(t))},s.prototype.pressKeyInFocusedMathquill=function(e,t){var r=this.activeMQ;if(r)return"Enter"===e?(t&&(t.preventDefault(),t.stopPropagation()),void this.enqueueEvent("enter")):void r.keystroke(e,t)},s.prototype.executeCommandInFocusedMathquill=function(e){var t=this.activeMQ;t&&n.execute(t,e)},s.prototype.hookUpDispatcher=function(){var e=this;this.dispatcher.register((function(t){switch(e.enqueueEvent("render"),t.type){case"hide-keypad":e.enqueueEvent("hide-keypad");break;case"set-active-mq":e.activeMQ=t.mq;break;case"keypad/shift":e.updateKeyboardMode("capitalQwerty"===e.keyboardMode?"qwerty":"capitalQwerty");break;case"main":e.updateKeyboardMode("main");break;case"ABC":e.updateKeyboardMode("qwerty");break;case"functions":e.updateKeyboardMode("functions");break;case"keypad/type-text":e.typeIntoFocusedMathquill(t.text);break;case"keypad/press-key":e.pressKeyInFocusedMathquill(t.key,t.evt);break;case"keypad/custom-command":e.executeCommandInFocusedMathquill(t.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;default:return t}}))},s);function s(){var e=this;this.keyboardMode="main",this.dispatcher=new r.Dispatcher,this.s=i.createDictionaryLookupFunction((function(){return"en"})),this.dispatch=function(t){var r;for(e.dispatcher.dispatch(t);r=e._queuedCallbacks.shift();)r()},this._queuedCallbacks=[],this.dispatcher=new r.Dispatcher,this.hookUpDispatcher()}t.default=a})),i("pillow-keypad/dcgview-pillow-keypad",["require","exports","tslib","dcgview"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DCGViewPillowKeypad=void 0;var i,o=(i=n.Class,r.__extends(a,i),a.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s},a);function a(){return null!==i&&i.apply(this,arguments)||this}t.DCGViewPillowKeypad=o})),i("pillow-keypad/main-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=s.DCGViewPillowKeypad,r.__extends(u,l),u.prototype.template=function(){return n.createElement(o.default,{controller:this.props.controller},n.createElement(a.default,null,i.view(this,"a^2"),i.view(this,"a^b"),i.view(this,"|a|"),i.view(this,"a/b"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"7",{style:"highlight"}),i.view(this,"8",{style:"highlight"}),i.view(this,"9",{style:"highlight"}),i.view(this,"/"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"x"),i.view(this,"y")),n.createElement(a.default,null,i.view(this,"("),i.view(this,")"),i.view(this,"<"),i.view(this,">"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"4",{style:"highlight"}),i.view(this,"5",{style:"highlight"}),i.view(this,"6",{style:"highlight"}),i.view(this,"*"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"left",{style:"highlight"}),i.view(this,"right",{style:"highlight"})),n.createElement(a.default,null,i.view(this,"sqrt"),i.view(this,","),i.view(this,"<="),i.view(this,">="),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"1",{style:"highlight"}),i.view(this,"2",{style:"highlight"}),i.view(this,"3",{style:"highlight"}),i.view(this,"-"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.spacer(.5),i.view(this,"backspace",{style:"highlight",colspan:1.5})),n.createElement(a.default,null,i.view(this,"nthroot"),i.view(this,"pi"),i.view(this,"%"),i.view(this,"a_b"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"0",{style:"highlight"}),i.view(this,".",{style:"highlight"}),i.view(this,"="),i.view(this,"+"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"enter",{colspan:2,style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("pillow-keypad/qwerty-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=s.DCGViewPillowKeypad,r.__extends(u,l),u.prototype.template=function(){return n.createElement(o.default,{controller:this.props.controller},n.createElement(a.default,null,i.view(this,"q"),i.view(this,"w"),i.view(this,"e"),i.view(this,"r"),i.view(this,"t"),i.view(this,"y"),i.view(this,"u"),i.view(this,"i"),i.view(this,"o"),i.view(this,"p")),n.createElement(a.default,null,n.createElement("div",{class:n.const("dcg-half-width-placeholder")}),i.view(this,"a"),i.view(this,"s"),i.view(this,"d"),i.view(this,"f"),i.view(this,"g"),i.view(this,"h"),i.view(this,"j"),i.view(this,"k"),i.view(this,"l"),n.createElement("div",{class:n.const("dcg-half-width-placeholder")})),n.createElement(a.default,null,i.view(this,"shift",{style:"highlight"}),i.view(this,"z"),i.view(this,"x"),i.view(this,"c"),i.view(this,"v"),i.view(this,"b"),i.view(this,"n"),i.view(this,"m"),i.view(this,","),i.view(this,"backspace",{style:"highlight"})),n.createElement(a.default,null,i.view(this,"="),i.view(this,"{"),i.view(this,"}"),i.view(this,"["),i.view(this,"]"),i.view(this,"!"),i.view(this,"'"),i.view(this,"pi"),i.view(this,"enter",{style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("pillow-keypad/capital-qwerty-keypad",["require","exports","tslib","dcgview","./dcgview-pillow-keypad","keypad/keys","keypad/keypad","keypad/row"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=i.DCGViewPillowKeypad,r.__extends(u,l),u.prototype.template=function(){return n.createElement(a.default,{controller:this.props.controller},n.createElement(s.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),n.createElement(s.default,null,n.createElement("div",{class:n.const("dcg-half-width-placeholder")}),o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),n.createElement("div",{class:n.const("dcg-half-width-placeholder")})),n.createElement(s.default,null,o.view(this,"shift",{style:"highlight"}),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.view(this,","),o.view(this,"backspace",{style:"highlight"})),n.createElement(s.default,null,o.view(this,"="),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter",{style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("pillow-keypad/functions-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,c=(l=s.DCGViewPillowKeypad,r.__extends(u,l),u.prototype.template=function(){return n.createElement(o.default,{controller:this.props.controller},n.createElement(a.default,null,i.view(this,"sin"),i.view(this,"cos"),i.view(this,"tan"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"ln"),i.view(this,"log"),i.view(this,"backspace",{style:"highlight"})),n.createElement(a.default,null,i.view(this,"arcsin"),i.view(this,"arccos"),i.view(this,"arctan"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"e^x"),i.view(this,"abs"),i.view(this,"round")),n.createElement(a.default,null,i.view(this,"mean"),i.view(this,"stdev"),i.view(this,"stdevp"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"a^b"),i.view(this,"sqrt"),i.view(this,"nthroot")),n.createElement(a.default,null,i.view(this,"nPr"),i.view(this,"nCr"),i.view(this,"!"),n.createElement("div",{class:n.const("dcg-partition-placeholder")}),i.view(this,"e"),i.view(this,"%"),i.view(this,"enter",{style:"blue"})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=c})),i("pillow-keypad/control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./dcgview-pillow-keypad"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=a.DCGViewPillowKeypad,r.__extends(c,s),c.prototype.template=function(){var e=this.props.controller();return n.createElement(i.default,{controller:this.props.controller},n.createElement(o.default,{command:this.const("main"),selected:function(){return"main"===e.getKeyboardMode()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return e.dispatch({type:"main"})}},(function(){return e.s("basic-calculator-button-controlbar-main")})),n.createElement(o.default,{command:this.const("ABC"),selected:function(){return-1!==["qwerty","capitalQwerty"].indexOf(e.getKeyboardMode())},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return e.s("basic-calculator-narration-controlbar-abc")},onTap:function(){return e.dispatch({type:"ABC"})}},(function(){return e.s("basic-calculator-button-controlbar-abc")})),n.createElement(o.default,{command:this.const("functions"),selected:function(){return-1!==["functions","restrictedFunctions"].indexOf(e.getKeyboardMode())},ariaLabel:function(){return e.s("basic-calculator-narration-controlbar-functions")},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return e.dispatch({type:"functions"})}},(function(){return e.s("shared-calculator-button-controlbar-functions")})),n.createElement("div",{class:n.const("dcg-hide-keypad-button"),"dcg-command":n.const("hide-keypad"),onTap:function(){return e.dispatch({type:"hide-keypad"})}},n.createElement("i",{class:n.const("dcg-icon-hide")})))},c);function c(){return null!==s&&s.apply(this,arguments)||this}t.default=l})),i("loadcss!pillow-keypad/main",(function(){})),i("pillow-keypad/main",["require","exports","tslib","dcgview","./dcgview-pillow-keypad","./main-keypad","./qwerty-keypad","./capital-qwerty-keypad","./functions-keypad","./control-bar","touchtracking","loadcss!./main"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,p=n.Components.Switch,h=(d=i.DCGViewPillowKeypad,r.__extends(g,d),g.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-calculator-api-container"),style:n.const("width: 100%; height: 100%; position: relative;")},n.createElement("div",{class:n.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),didMount:this.bindFn(this.didMountRoot)},n.createElement(c.default,{controller:this.props.controller}),n.createElement("div",{role:n.const("group"),"aria-label":function(){return e.s("shared-calculator-narration-keypad")}},n.createElement(p,{key:function(){return e.controller.getKeyboardMode()}},(function(t){switch(t){case"qwerty":return n.createElement(a.default,{controller:e.props.controller});case"capitalQwerty":return n.createElement(s.default,{controller:e.props.controller});case"functions":return n.createElement(l.default,{controller:e.props.controller});default:return n.createElement(o.default,{controller:e.props.controller})}})))))},g.prototype.didMountRoot=function(e){u.monitor(e)},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.default=h})),i("api/pillow-keypad",["require","exports","tslib","dcgview","./abstract","pillow-keypad/controller","pillow-keypad/main"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,l=(s=i.default,r.__extends(c,s),c.prototype.init=function(){var e=this;this.controller=new o.default,this.controller.onEventEmitted=function(t){"render"===t&&e.updateView(),e.triggerEvent(t,void 0)},this.setupDomChangeDetector(!0)},c.prototype.setActiveMathquill=function(e){this.controller.dispatch({type:"set-active-mq",mq:e})},c.prototype.onCreateView=function(){return n.mountToNode(a.default,this.rootElt,{controller:n.const(this.controller)})},c.prototype.onResizeView=function(e){},c.prototype.onDestroyView=function(){n.unmountFromNode(this.rootElt)},c.prototype.destroy=function(){s.prototype.destroy.call(this)},c);function c(e){var t=s.call(this,e)||this;return t instanceof c?(t.init(),t):new c(e)}t.default=l})),i("core/cl-calculator",["require","exports","core/graphing-calc/migrate-state","core/graphing-calc/json/expression","core/graphing-calc/json/table","core/graphing-calc/json/simulation"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLCalculator=void 0,t.CLCalculator=function(e){var t=r.migrateToLatest(e),a={},s=t.graph.degreeMode,l=t.randomSeed;function c(e){switch(e.type){case void 0:case"expression":var t=n.computeParsableState(n.inflateDefaults(e));a[t.id]=t;break;case"table":var r=i.computeParsableState(i.inflateDefaults(e));a[r.id]=r;break;case"simulation":var s=o.computeParsableState(o.inflateDefaults(e));a[s.id]=s;break;case"folder":case"text":case"image":break;default:return e}}for(var u=0,d=t.expressions.list;u<d.length;u++)c(d[u]);return{setExpression:function(e){c(e)},getChangeSet:function(){return{statements:a,isCompleteState:!0,degreeMode:s,globalRandomSeed:l}}}}})),i("core/math/tree-queries/count-numbers",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countNumbers=void 0,t.countNumbers=function e(t,r){switch(t.type){case"Mul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Equals":case"Inequality":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":for(var n=0,i=0,o=t.args;i<o.length;i++)n+=e(o[i],r);return n;case"Decimal":return void 0===r||parseFloat(t.val)===r?1:0;case"MixedNumber":return void 0===r?3:(n=0,parseFloat(t.whole)===r&&(n+=1),parseFloat(t.num)===r&&(n+=1),parseFloat(t.den)===r&&(n+=1),n);case"Letter":case"EmptyPiecewise":case"Cmd":case"EmptyRangeEnd":return 0;case"Subscript":return e(t.args[0],r);case"InequalityChain":n=0,n+=e(t.first,r);for(var a=0,s=t.chain;a<s.length;a++)n+=e(s[a].args[0],r);return n;default:throw"Unexpected surface node "+t.type+"."}}})),i("core/graphing-calc/diffs/longest-subsequence",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findLongestSubsequence=void 0,t.findLongestSubsequence=function(e){for(var t=e.length,r=new Array(t),n=new Array(t+1),i=0,o=0;o<t;o++){var a=void 0;if(e[n[i]]<e[o])a=i+1;else{for(var s=1,l=i-1;s<=l;){var c=Math.ceil((s+l)/2);e[n[c]]<e[o]?s=c+1:l=c-1}a=s}r[o]=n[a-1],n[a]=o,i<a&&(i=a)}var u=new Array(i),d=n[i];for(o=i-1;0<=o;o--)u[o]=e[d],d=r[d];return u}})),i("core/graphing-calc/diffs/calculate-diff",["require","exports","underscore","./longest-subsequence"],(function(e,t,r,n){"use strict";var i,o;function a(e,t,o){var l,c={};for(var u in e)e.hasOwnProperty(u)&&(t.hasOwnProperty(u)?(l=function(e,t,o,l){if(r.isArray(e)&&r.isArray(t)){if(o===i.EXPRESSIONS&&"list"===l||o===i.TABLE_EXPRESSION&&"columns"===l)return function(e,t){for(var o={},l={},c=0;c<e.length;c++){if(void 0!==l[e[c].id])return{s:t};l[e[c].id]=c}var u={};for(c=0;c<t.length;c++){if(void 0!==u[t[c].id])return{s:t};u[t[c].id]=c}for(var d=function(e,t,r){for(var i={},o=t.filter((function(e){return void 0!==r[e.id]})).map((function(e){return r[e.id]})),a=0,s=n.findLongestSubsequence(o);a<s.length;a++)i[e[s[a]].id]=!0;return i}(e,t,l),p=0,h=0;h<e.length;h++){var g,f,m,y,v=e[h];d[v.id]?(f=t[g=u[v.id]],m={},p!==g&&(m.a=t.slice(p,g).map((function(t){return s(e,l,t)}))),r.isEqual(v,f)||(y="table"===v.type&&"table"===f.type,m.e=a(v,f,y?i.TABLE_EXPRESSION:i.OTHER)),r.isEmpty(m)||(o[h]=m),p=g+1):o[h]={d:1}}if(p<t.length&&(o[e.length]={a:t.slice(p,t.length).map((function(t){return s(e,l,t)}))}),!r.isEmpty(o))return{l:o}}(e,t);if(!r.isEqual(e,t))return{s:t}}else if(r.isObject(e)&&r.isObject(t)){var c=a(e,t,function(e,t){return e===i.ROOT&&"expressions"===t?i.EXPRESSIONS:i.OTHER}(o,l));if(!r.isEmpty(c))return{e:c}}else if(!r.isEqual(e,t))return{s:t}}(e[u],t[u],o,u))&&(c[u]=l):c[u]={d:1});for(var u in t)t.hasOwnProperty(u)&&!e.hasOwnProperty(u)&&(c[u]={s:t[u]});return c}function s(e,t,n){if(t[n.id]){var o=e[t[n.id]],s={f:t[n.id]};return r.isEqual(o,n)||(s.e=a(o,n,i.OTHER)),{m:s}}return{s:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDiff=void 0,(o=i=i||{})[o.ROOT=0]="ROOT",o[o.EXPRESSIONS=1]="EXPRESSIONS",o[o.TABLE_EXPRESSION=2]="TABLE_EXPRESSION",o[o.OTHER=3]="OTHER",t.calculateDiff=function(e,t){return a(e,t,i.ROOT)}})),i("core/graphing-calc/diffs/apply-diff",["require","exports","underscore","../../lib/deepCopy"],(function(e,t,r,n){"use strict";function i(e,t){for(var n=0,a=r.keys(t);n<a.length;n++){var s=a[n],l=t[s];l.hasOwnProperty("s")?e[s]=l.s:l.hasOwnProperty("d")?delete e[s]:l.hasOwnProperty("l")?e[s]=function(e,t){for(var r=[],n=0;n<e.length;n++){var a=t[n];a&&a.a&&r.push.apply(r,o(e,a.a)),a&&a.e?r.push(i(e[n],a.e)):a&&a.d||r.push(e[n])}var s=t[e.length];return s&&s.a&&r.push.apply(r,o(e,s.a)),r}(e[s],l.l):l.hasOwnProperty("e")&&(e[s]=i(e[s],l.e))}return e}function o(e,t){for(var r=[],n=0,o=t;n<o.length;n++){var a,s=o[n];s.hasOwnProperty("s")?r.push(s.s):s.hasOwnProperty("m")&&(a=e[s.m.f],s.m.e?r.push(i(a,s.m.e)):r.push(a))}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDiff=void 0,t.applyDiff=function(e,t){return i(n.default(e),t)}})),i("core/graphing-calc/translation/common",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mutateString=t.deserializeTranslationKey=t.serializeTranslationKey=void 0,t.serializeTranslationKey=function(e){return"expression"===e.location||"object"===e.location?e.location+":"+e.id+":"+e.path:e.location+":"+e.path},t.deserializeTranslationKey=function(e){function t(){return new Error("Invalid key: "+e)}var r=e.split(":"),n=r[0];if(!n)throw t();if("expression"!=n&&"settings"!=n&&"object"!=n)throw t();if("settings"==n){if(2!=r.length)throw t();return{location:n,path:r[1]}}if(3!=r.length)throw t();return{location:n,id:r[1],path:r[2]}},t.mutateString=function(e,t,r){if(e)for(var n=t.split("."),i=e,o=0;o<n.length;o++){var a=n[o];if(!i[a])break;o==n.length-1&&"string"==typeof i[a]?i[a]=r:i=i[a]}}})),i("core/graphing-calc/translation/translator",["require","exports","tslib","../../lib/deepCopy","./common"],(function(e,t,r,n,i){"use strict";function o(e,t){return function(n,o,a,s){var l;n&&(l=i.serializeTranslationKey(r.__assign(r.__assign({},t),{path:o})),e[l]={value:n,type:a,context:s})}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyLocalizationMap=t.extractLocalizationMap=void 0,t.extractLocalizationMap=function(e){var t,r,n,i,a,s,l={};if("graph"==e.type){for(var c=0,u=e.graphState.expressions.list;c<u.length;c++){var d=function(e){var t,r,n,i,a={},s=o(a,{location:"expression",id:e.id});switch(e.type){case"expression":s(e.label,"label","interpolated-string","expression-list-expression-label"),s(null===(t=e.clickableInfo)||void 0===t?void 0:t.description,"clickableInfo.description","string","expression-list-expression-clickable-description");break;case"image":s(e.image_url,"image_url","image","expression-list-image-url"),s(null===(r=e.clickableInfo)||void 0===r?void 0:r.description,"clickableInfo.description","string","expression-list-image-clickable-description"),s(null===(n=e.clickableInfo)||void 0===n?void 0:n.hoveredImage,"clickableInfo.hoveredImage","image","expression-list-image-clickable-hovered"),s(null===(i=e.clickableInfo)||void 0===i?void 0:i.depressedImage,"clickableInfo.depressedImage","image","expression-list-image-clickable-depressed");break;case"text":s(e.text,"text","string","expression-list-note-text");break;case"folder":s(e.title,"title","string","expression-list-folder-title")}return a}(u[c]);for(var p in d)l[p]=d[p]}var h=(i=e.graphState,(s=o(a={},{location:"settings"}))(i.graph.xAxisLabel,"xAxisLabel","string","settings-xaxis-label"),s(i.graph.yAxisLabel,"yAxisLabel","string","settings-yaxis-label"),a);for(var p in h)l[p]=h[p]}else{var g=e.geometryState.objects;for(var f in g){var m=(n=void 0,(n=o(r={},{location:"object",id:(t=g[f]).id}))(t.label,"label","string","geometry-object-label"),"image"===t.type&&n(t.url,"url","image","geometry-object-image-url"),r);for(var p in m)l[p]=m[p]}}return l},t.applyLocalizationMap=function(e,t,r){var o,a,s=n.default(e);if("graph"===r){for(var l,c={},u=0,d=null!==(a=null===(o=s.expressions)||void 0===o?void 0:o.list)&&void 0!==a?a:[];u<d.length;u++){var p=d[u];c[p.id]=p}for(var h in t)"expression"==(l=i.deserializeTranslationKey(h)).location?i.mutateString(c[l.id],l.path,t[h].value):i.mutateString(s.graph,l.path,t[h].value)}else if(s.objects)for(var h in t)"object"==(l=i.deserializeTranslationKey(h)).location&&i.mutateString(s.objects[l.id],l.path,t[h].value);return s}})),i("core/mathtools",["require","exports","parser","core/math/builtinframe","parsenodes","tslib","core/math/context","core/cl-calculator","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/tree-queries/count-numbers","core/lib/color-helpers","core/math/policyGraphing","core/math/policyScientific","core/math/policyFourFunction","./math/parser/surface-node-error","core/lib/label","core/graphing-calc/diffs/calculate-diff","core/graphing-calc/diffs/apply-diff","core/graphing-calc/migrate-state","core/math/types","core/graphing-calc/translation/translator","./math/parser/input-span"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y,v,b,x,w,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyLocalizationMap=t.extractLocalizationMap=t.migrateToLatest=t.applyDiff=t.calculateDiff=t.CLCalculator=t.colorHelpers=t.policies=t.parseNodes=t.types=t.builtInFrame=t.context=t.treeQueries=t.expressionParser=t.parser=t.Label=void 0,Object.defineProperty(t,"CLCalculator",{enumerable:!0,get:function(){return s.CLCalculator}}),t.colorHelpers=d,t.Label=m,Object.defineProperty(t,"calculateDiff",{enumerable:!0,get:function(){return y.calculateDiff}}),Object.defineProperty(t,"applyDiff",{enumerable:!0,get:function(){return v.applyDiff}}),Object.defineProperty(t,"migrateToLatest",{enumerable:!0,get:function(){return b.migrateToLatest}}),Object.defineProperty(t,"extractLocalizationMap",{enumerable:!0,get:function(){return w.extractLocalizationMap}}),Object.defineProperty(t,"applyLocalizationMap",{enumerable:!0,get:function(){return w.applyLocalizationMap}}),t.parser={parse:function(e,t){return null==e&&(e=""),r.parse(e,t)}},t.expressionParser={parse:function(e){if(null!=e)try{var r=l.parse(e);return c.parse(r)}catch(r){var n=r instanceof t.parseNodes.Base?r.getInputSpan():S.Span(e,0,e.length),i=o.__assign(o.__assign({},f.UnexpectedParseError()),{originalError:r});return f.Err(n,i)}}},t.treeQueries={countNumbers:u.countNumbers},t.context=a.Context,t.builtInFrame=n,t.types=x,t.parseNodes=i,t.policies={graphing:p.PolicyGraphing,scientific:h.PolicyScientific,fourFunction:g.PolicyFourFunction}})),i("api/calculator",["require","exports","mathquill","tslib","graphing/clipping","core/constants","expressions/colors","graphing-calc/api/sanitize-expression","core/graphing-calc/json/graph-settings","main/font_sizes","expressions/image_file_to_data_url","./graphing","./headless","./fourfunction","./scientific","./pillow-keypad","core/mathtools"],(function(e,t,n,i,o,a,s,l,c,u,d,p,h,g,f,m,y){"use strict";var v;function b(e){var t=v.enabledFeatures;return!t||t[e]}function x(e){t.DesmosAPI[e]=function(){throw new Error("The Desmos "+e+" is not enabled for this API key.")}}for(var w in Object.defineProperty(t,"__esModule",{value:!0}),t.Calculator=t.HeadlessGraphingCalculator=t.PillowKeypad=t.FourFunctionCalculator=t.ScientificCalculator=t.GraphingCalculator=t.DesmosAPI=void 0,void 0!==r?v=r:(v={},window.Desmos=v),t.GraphingCalculator=p.default,t.HeadlessGraphingCalculator=h.default,t.FourFunctionCalculator=g.default,t.ScientificCalculator=f.default,t.PillowKeypad=m.default,t.DesmosAPI={version:a.CURRENT_API_VERSION,Colors:{RED:s.RED,BLUE:s.BLUE,GREEN:s.GREEN,ORANGE:s.ORANGE,PURPLE:s.PURPLE,BLACK:s.BLACK},imageFileToDataURL:d.imageFileToDataURL,supportedLanguages:v.localeData?Object.keys(v.localeData):v.locales?Object.keys(v.locales):[],Styles:i.__assign(i.__assign({},l.SanitizedLineStyle),l.SanitizedPointStyle),ColumnModes:l.SanitizedColumnMode,DragModes:l.SanitizedDragMode,AxisArrowModes:c.AxisArrowModes,FontSizes:u,LabelSizes:l.SanitizedLabelSize,LabelOrientations:l.SanitizedLabelOrientation,GraphingCalculator:p.default,Calculator:p.default,FourFunctionCalculator:g.default,ScientificCalculator:f.default,Private:{Mathtools:y,Graphtools:{getClippingGraphType:o.getClippingGraphType,mapSegmentToCanvas:o.mapSegmentToCanvas}},MathQuill:n,PillowKeypad:m.default,HeadlessGraphingCalculator:h.default},b("GraphingCalculator")||(x("GraphingCalculator"),x("Calculator")),b("FourFunctionCalculator")||x("FourFunctionCalculator"),b("ScientificCalculator")||x("ScientificCalculator"),t.DesmosAPI)t.DesmosAPI.hasOwnProperty(w)&&(v[w]=t.DesmosAPI[w]);t.Calculator=p.default})),i("main/noconflict",["require","jquery","underscore"],(function(e){"use strict";var t=e("jquery"),n=e("underscore");return void 0===r&&(r={}),function(){r.$=t,r._=n,r.$.noConflict(!0)}})),void 0===r&&(r={}),r.require=n,r.requirejs=e,n.isBrowser||function(){"use strict";var t=n("worker_src"),r={define:i,require:n,requirejs:e};new Function("ALMOND_OVERRIDES",t)(r)}(),i("toplevel/api",["require","api/calculator","main/noconflict"],(function(e){"use strict";e("api/calculator"),e("main/noconflict")()}))}(),r.require("toplevel/api")}(void 0!==typeof window?window:this||{})}();
